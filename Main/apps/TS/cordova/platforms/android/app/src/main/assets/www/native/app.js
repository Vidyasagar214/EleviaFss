var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||typeof Object.defineProperties=='function'?Object.defineProperty:function(b,c,a){a=a;if(b==Array.prototype||b==Object.prototype){return}b[c]=a.value};$jscomp.getGlobal=function(a){return typeof window!='undefined'&&window===a?a:typeof global!='undefined'&&global!=null?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(i,f,j,k){if(!f){return}var a=$jscomp.global;var b=i.split('.');for(var e=0;e<b.length-1;e++){var d=b[e];if(!(d in a)){a[d]={}}a=a[d]}var g=b[b.length-1];var h=a[g];var c=f(h);if(c==h||c==null){return}$jscomp.defineProperty(a,g,{configurable:!0,writable:!0,value:c})};$jscomp.polyfill('Array.prototype.copyWithin',function(a){if(a){return a}var b=function(d,c,b){var e=this.length;d=Number(d);c=Number(c);b=Number(b!=null?b:e);if(d<c){b=Math.min(b,e);while(c<b){if(c in this){this[d++]=this[c++]}else {delete this[d++];c++}}}else {b=Math.min(b,e+c-d);d+=b-c;while(b>c){if(--b in this){this[--d]=this[b]}else {delete this[d]}}}return this};return b},'es6','es3');$jscomp.SYMBOL_PREFIX='jscomp_symbol_';$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};if(!$jscomp.global['Symbol']){$jscomp.global['Symbol']=$jscomp.Symbol}};$jscomp.Symbol=function(){var a=0;function Symbol(b){return $jscomp.SYMBOL_PREFIX+(b||'')+a++}return Symbol}();$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global['Symbol'].iterator;if(!a){a=$jscomp.global['Symbol'].iterator=$jscomp.global['Symbol']('iterator')}if(typeof Array.prototype[a]!='function'){$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}})}$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var b=0;return $jscomp.iteratorPrototype(function(){if(b<a.length){return {done:!1,value:a[b++]}}else {return {done:!0}}})};$jscomp.iteratorPrototype=function(b){$jscomp.initSymbolIterator();var a={next:b};a[$jscomp.global['Symbol'].iterator]=function(){return this};return a};$jscomp.iteratorFromArray=function(a,d){$jscomp.initSymbolIterator();if(a instanceof String){a=a+''}var c=0;var b={next:function(){if(c<a.length){var e=c++;return {value:d(e,a[e]),done:!1}}b.next=function(){return {done:!0,value:void 0}};return b.next()}};$jscomp.initSymbol();$jscomp.initSymbolIterator();b[Symbol.iterator]=function(){return b};return b};$jscomp.polyfill('Array.prototype.entries',function(a){if(a){return a}var b=function(){return $jscomp.iteratorFromArray(this,function(b,c){return [b,c]})};return b},'es6','es3');$jscomp.polyfill('Array.prototype.fill',function(a){if(a){return a}var b=function(f,c,b){var d=this.length||0;if(c<0){c=Math.max(0,d+c)}if(b==null||b>d){b=d}b=Number(b);if(b<0){b=Math.max(0,d+b)}for(var e=Number(c||0);e<b;e++){this[e]=f}return this};return b},'es6','es3');$jscomp.findInternal=function(a,d,e){if(a instanceof String){a=String(a)}var f=a.length;for(var b=0;b<f;b++){var c=a[b];if(d.call(e,c,b,a)){return {i:b,v:c}}}return {i:-1,v:void 0}};$jscomp.polyfill('Array.prototype.find',function(a){if(a){return a}var b=function(c,b){return $jscomp.findInternal(this,c,b).v};return b},'es6','es3');$jscomp.polyfill('Array.prototype.findIndex',function(a){if(a){return a}var b=function(c,b){return $jscomp.findInternal(this,c,b).i};return b},'es6','es3');$jscomp.polyfill('Array.from',function(a){if(a){return a}var b=function(b,c,g){$jscomp.initSymbolIterator();c=c!=null?c:function(d){return d};var d=[];$jscomp.initSymbol();$jscomp.initSymbolIterator();var f=b[Symbol.iterator];if(typeof f=='function'){b=f.call(b);var h;while(!(h=b.next()).done){d.push(c.call(g,h.value))}}else {var i=b.length;for(var e=0;e<i;e++){d.push(c.call(g,b[e]))}}return d};return b},'es6','es3');$jscomp.polyfill('Object.is',function(a){if(a){return a}var b=function(b,c){if(b===c){return b!==0||1/b===1/c}else {return b!==b&&c!==c}};return b},'es6','es3');$jscomp.polyfill('Array.prototype.includes',function(a){if(a){return a}var b=function(d,e){var b=this;if(b instanceof String){b=String(b)}var f=b.length;for(var c=e||0;c<f;c++){if(b[c]==d||Object.is(b[c],d)){return !0}}return !1};return b},'es7','es3');$jscomp.polyfill('Array.prototype.keys',function(a){if(a){return a}var b=function(){return $jscomp.iteratorFromArray(this,function(b){return b})};return b},'es6','es3');$jscomp.polyfill('Array.of',function(a){if(a){return a}var b=function(b){return Array.from(arguments)};return b},'es6','es3');$jscomp.polyfill('Array.prototype.values',function(a){if(a){return a}var b=function(){return $jscomp.iteratorFromArray(this,function(c,b){return b})};return b},'es6','es3');$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();$jscomp.initSymbol();$jscomp.initSymbolIterator();var b=a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.polyfill('Promise',function(c){if(c&&!$jscomp.FORCE_POLYFILL_PROMISE){return c}function AsyncExecutor(){this.batch_=null}AsyncExecutor.prototype.asyncExecute=function(a){if(this.batch_==null){this.batch_=[];this.asyncExecuteBatch_()}this.batch_.push(a);return this};AsyncExecutor.prototype.asyncExecuteBatch_=function(){var a=this;this.asyncExecuteFunction(function(){a.executeBatch_()})};var e=$jscomp.global['setTimeout'];AsyncExecutor.prototype.asyncExecuteFunction=function(a){e(a,0)};AsyncExecutor.prototype.executeBatch_=function(){while(this.batch_&&this.batch_.length){var b=this.batch_;this.batch_=[];for(var a=0;a<b.length;++a){var d=b[a];delete b[a];try{d()}catch(f){this.asyncThrow_(f)}}}this.batch_=null};AsyncExecutor.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a})};var b={PENDING:0,FULFILLED:1,REJECTED:2};var a=function(d){this.state_=b.PENDING;this.result_=undefined;this.onSettledCallbacks_=[];var a=this.createResolveAndReject_();try{d(a.resolve,a.reject)}catch(f){a.reject(f)}};a.prototype.createResolveAndReject_=function(){var b=this;var a=!1;function firstCallWins(d){return function(e){if(!a){a=!0;d.call(b,e)}}}return {resolve:firstCallWins(this.resolveTo_),reject:firstCallWins(this.reject_)}};a.prototype.resolveTo_=function(b){if(b===this){this.reject_(new TypeError('A Promise cannot resolve to itself'))}else {if(b instanceof a){this.settleSameAsPromise_(b)}else {if(isObject(b)){this.resolveToNonPromiseObj_(b)}else {this.fulfill_(b)}}}};a.prototype.resolveToNonPromiseObj_=function(b){var a=undefined;try{a=b.then}catch(f){this.reject_(f);return}if(typeof a=='function'){this.settleSameAsThenable_(a,b)}else {this.fulfill_(b)}};function isObject(a){switch(typeof a){case 'object':return a!=null;case 'function':return !0;default:return !1;}}a.prototype.reject_=function(a){this.settle_(b.REJECTED,a)};a.prototype.fulfill_=function(a){this.settle_(b.FULFILLED,a)};a.prototype.settle_=function(d,a){if(this.state_!=b.PENDING){throw new Error('Cannot settle('+d+', '+a|'): Promise already settled in state'+this.state_)}this.state_=d;this.result_=a;this.executeOnSettledCallbacks_()};a.prototype.executeOnSettledCallbacks_=function(){if(this.onSettledCallbacks_!=null){var b=this.onSettledCallbacks_;for(var a=0;a<b.length;++a){b[a].call();b[a]=null}this.onSettledCallbacks_=null}};var d=new AsyncExecutor();a.prototype.settleSameAsPromise_=function(b){var a=this.createResolveAndReject_();b.callWhenSettled_(a.resolve,a.reject)};a.prototype.settleSameAsThenable_=function(b,d){var a=this.createResolveAndReject_();try{b.call(d,a.resolve,a.reject)}catch(f){a.reject(f)}};a.prototype.then=function(f,g){var b;var d;var e=new a(function(a,e){b=a;d=e});function createCallback(a,e){if(typeof a=='function'){return function(h){try{b(a(h))}catch(i){d(i)}}}else {return e}}this.callWhenSettled_(createCallback(f,b),createCallback(g,d));return e};a.prototype['catch']=function(a){return this.then(undefined,a)};a.prototype.callWhenSettled_=function(e,f){var a=this;function callback(){switch(a.state_){case b.FULFILLED:e(a.result_);break;case b.REJECTED:f(a.result_);break;default:throw new Error('Unexpected state: '+a.state_);}}if(this.onSettledCallbacks_==null){d.asyncExecute(callback)}else {this.onSettledCallbacks_.push(function(){d.asyncExecute(callback)})}};function resolvingPromise(b){if(b instanceof a){return b}else {return new a(function(a,d){a(b)})}}a['resolve']=resolvingPromise;a['reject']=function(b){return new a(function(d,a){a(b)})};a['race']=function(b){return new a(function(e,f){var d=$jscomp.makeIterator(b);for(var a=d.next();!a.done;a=d.next()){resolvingPromise(a.value).callWhenSettled_(e,f)}})};a['all']=function(e){var d=$jscomp.makeIterator(e);var b=d.next();if(b.done){return resolvingPromise([])}else {return new a(function(g,h){var a=[];var f=0;function onFulfilled(b){return function(d){a[b]=d;f--;if(f==0){g(a)}}}do{a.push(undefined);f++;resolvingPromise(b.value).callWhenSettled_(onFulfilled(a.length-1),h);b=d.next()}while(!b.done)})}};return a},'es6','es3');$jscomp.executeAsyncGenerator=function(a){function passValueToGenerator(b){return a.next(b)}function passErrorToGenerator(b){return a['throw'](b)}return new Promise(function(b,c){function handleGeneratorRecord(d){if(d.done){b(d.value)}else {Promise.resolve(d.value).then(passValueToGenerator,passErrorToGenerator).then(handleGeneratorRecord,c)}}handleGeneratorRecord(a.next())})};$jscomp.owns=function(b,a){return Object.prototype.hasOwnProperty.call(b,a)};$jscomp.polyfill('WeakMap',function(c){function isConformant(){if(!c||!Object.seal){return !1}try{var b=Object.seal({});var d=Object.seal({});var a=new c([[b,2],[d,3]]);if(a.get(b)!=2||a.get(d)!=3){return !1}a['delete'](b);a.set(d,4);return !a.has(b)&&a.get(d)==4}catch(e){return !1}}if(isConformant()){return c}var a='$jscomp_hidden_'+Math.random().toString().substring(2);function insert(b){if(!$jscomp.owns(b,a)){var d={};$jscomp.defineProperty(b,a,{value:d})}}function patch(a){var b=Object[a];if(b){Object[a]=function(d){insert(d);return b(d)}}}patch('freeze');patch('preventExtensions');patch('seal');var d=0;var b=function(a){this.id_=(d+=Math.random()+1).toString();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();var f=$jscomp.makeIterator(a);var b;while(!(b=f.next()).done){var e=b.value;this.set(e[0],e[1])}}};b.prototype.set=function(b,d){insert(b);if(!$jscomp.owns(b,a)){throw new Error('WeakMap key fail: '+b)}b[a][this.id_]=d;return this};b.prototype.get=function(b){return $jscomp.owns(b,a)?b[a][this.id_]:undefined};b.prototype.has=function(b){return $jscomp.owns(b,a)&&$jscomp.owns(b[a],this.id_)};b.prototype['delete']=function(b){if(!$jscomp.owns(b,a)||!$jscomp.owns(b[a],this.id_)){return !1}return delete b[a][this.id_]};return b},'es6','es3');$jscomp.MapEntry=function(){this.previous;this.next;this.head;this.key;this.value};$jscomp.polyfill('Map',function(b){var g=!$jscomp.ASSUME_NO_NATIVE_MAP&&function(){if(!b||!b.prototype.entries||typeof Object.seal!='function'){return !1}try{b=b;var e=Object.seal({x:4});var c=new b($jscomp.makeIterator([[e,'s']]));if(c.get(e)!='s'||c.size!=1||c.get({x:4})||c.set({x:4},'t')!=c||c.size!=2){return !1}var d=c.entries();var a=d.next();if(a.done||a.value[0]!=e||a.value[1]!='s'){return !1}a=d.next();if(a.done||a.value[0].x!=4||a.value[1]!='t'||!d.next().done){return !1}return !0}catch(j){return !1}}();if(g){return b}$jscomp.initSymbol();$jscomp.initSymbolIterator();var e=new WeakMap();var a=function(a){this.data_={};this.head_=f();this.size=0;if(a){var e=$jscomp.makeIterator(a);var c;while(!(c=e.next()).done){var d=c.value;this.set(d[0],d[1])}}};a.prototype.set=function(e,d){var a=c(this,e);if(!a.list){a.list=this.data_[a.id]=[]}if(!a.entry){a.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:e,value:d};a.list.push(a.entry);this.head_.previous.next=a.entry;this.head_.previous=a.entry;this.size++}else {a.entry.value=d}return this};a.prototype['delete']=function(d){var a=c(this,d);if(a.entry&&a.list){a.list.splice(a.index,1);if(!a.list.length){delete this.data_[a.id]}a.entry.previous.next=a.entry.next;a.entry.next.previous=a.entry.previous;a.entry.head=null;this.size--;return !0}return !1};a.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=f();this.size=0};a.prototype.has=function(a){return !!c(this,a).entry};a.prototype.get=function(d){var a=c(this,d).entry;return a&&a.value};a.prototype.entries=function(){return d(this,function(a){return [a.key,a.value]})};a.prototype.keys=function(){return d(this,function(a){return a.key})};a.prototype.values=function(){return d(this,function(a){return a.value})};a.prototype.forEach=function(e,d){var f=this.entries();var c;while(!(c=f.next()).done){var a=c.value;e.call(d,a[1],a[0],this)}};$jscomp.initSymbol();$jscomp.initSymbolIterator();a.prototype[Symbol.iterator]=a.prototype.entries;var c=function(g,e){var f=i(e);var a=g.data_[f];if(a&&$jscomp.owns(g.data_,f)){for(var d=0;d<a.length;d++){var c=a[d];if(e!==e&&c.key!==c.key||e===c.key){return {id:f,list:a,index:d,entry:c}}}}return {id:f,list:a,index:-1,entry:undefined}};var d=function(c,d){var a=c.head_;return $jscomp.iteratorPrototype(function(){if(a){while(a.head!=c.head_){a=a.previous}while(a.next!=a.head){a=a.next;return {done:!1,value:d(a)}}a=null}return {done:!0,value:void 0}})};var f=function(){var a={};a.previous=a.next=a.head=a;return a};var h=0;var i=function(a){var c=a&&typeof a;if(c=='object'||c=='function'){a=a;if(!e.has(a)){var d=''+ ++h;e.set(a,d);return d}return e.get(a)}return 'p_'+a};return a},'es6','es3');$jscomp.polyfill('Math.acosh',function(a){if(a){return a}var b=function(b){b=Number(b);return Math.log(b+Math.sqrt(b*b-1))};return b},'es6','es3');$jscomp.polyfill('Math.asinh',function(a){if(a){return a}var b=function(b){b=Number(b);if(b===0){return b}var c=Math.log(Math.abs(b)+Math.sqrt(b*b+1));return b<0?-c:c};return b},'es6','es3');$jscomp.polyfill('Math.log1p',function(a){if(a){return a}var b=function(b){b=Number(b);if(b<0.25&&b>-0.25){var f=b;var g=1;var c=b;var d=0;var e=1;while(d!=c){f*=b;e*=-1;c=(d=c)+e*f/++g}return c}return Math.log(1+b)};return b},'es6','es3');$jscomp.polyfill('Math.atanh',function(b){if(b){return b}var a=Math.log1p;var c=function(c){c=Number(c);return (a(c)-a(-c))/2};return c},'es6','es3');$jscomp.polyfill('Math.cbrt',function(a){if(a){return a}var b=function(b){if(b===0){return b}b=Number(b);var c=Math.pow(Math.abs(b),1/3);return b<0?-c:c};return b},'es6','es3');$jscomp.polyfill('Math.clz32',function(a){if(a){return a}var b=function(b){b=Number(b)>>>0;if(b===0){return 32}var c=0;if((b&4.29490176E9)===0){b<<=16;c+=16}if((b&4.27819008E9)===0){b<<=8;c+=8}if((b&4.02653184E9)===0){b<<=4;c+=4}if((b&3.221225472E9)===0){b<<=2;c+=2}if((b&2.147483648E9)===0){c++}return c};return b},'es6','es3');$jscomp.polyfill('Math.cosh',function(a){if(a){return a}var b=Math.exp;var c=function(c){c=Number(c);return (b(c)+b(-c))/2};return c},'es6','es3');$jscomp.polyfill('Math.expm1',function(a){if(a){return a}var b=function(b){b=Number(b);if(b<0.25&&b>-0.25){var e=b;var f=1;var c=b;var d=0;while(d!=c){e*=b/++f;c=(d=c)+e}return c}return Math.exp(b)-1};return b},'es6','es3');$jscomp.polyfill('Math.hypot',function(a){if(a){return a}var b=function(c,d,h){c=Number(c);d=Number(d);var b,g,f;var e=Math.max(Math.abs(c),Math.abs(d));for(b=2;b<arguments.length;b++){e=Math.max(e,Math.abs(arguments[b]))}if(e>1.0E100||e<1.0E-100){c=c/e;d=d/e;f=c*c+d*d;for(b=2;b<arguments.length;b++){g=Number(arguments[b])/e;f+=g*g}return Math.sqrt(f)*e}else {f=c*c+d*d;for(b=2;b<arguments.length;b++){g=Number(arguments[b]);f+=g*g}return Math.sqrt(f)}};return b},'es6','es3');$jscomp.polyfill('Math.imul',function(a){if(a){return a}var b=function(b,c){b=Number(b);c=Number(c);var f=b>>>16&65535;var d=b&65535;var g=c>>>16&65535;var e=c&65535;var h=f*e+d*g<<16>>>0;return d*e+h|0};return b},'es6','es3');$jscomp.polyfill('Math.log10',function(a){if(a){return a}var b=function(b){return Math.log(b)/Math.LN10};return b},'es6','es3');$jscomp.polyfill('Math.log2',function(a){if(a){return a}var b=function(b){return Math.log(b)/Math.LN2};return b},'es6','es3');$jscomp.polyfill('Math.sign',function(a){if(a){return a}var b=function(b){b=Number(b);return b===0||isNaN(b)?b:b>0?1:-1};return b},'es6','es3');$jscomp.polyfill('Math.sinh',function(a){if(a){return a}var b=Math.exp;var c=function(c){c=Number(c);if(c===0){return c}return (b(c)-b(-c))/2};return c},'es6','es3');$jscomp.polyfill('Math.tanh',function(a){if(a){return a}var b=function(b){b=Number(b);if(b===0){return b}var c=Math.exp(-2*Math.abs(b));var d=(1-c)/(1+c);return b<0?-d:d};return b},'es6','es3');$jscomp.polyfill('Math.trunc',function(a){if(a){return a}var b=function(b){b=Number(b);if(isNaN(b)||b===Infinity||b===-Infinity||b===0){return b}var c=Math.floor(Math.abs(b));return b<0?-c:c};return b},'es6','es3');$jscomp.polyfill('Number.EPSILON',function(a){return Math.pow(2,-52)},'es6','es3');$jscomp.polyfill('Number.MAX_SAFE_INTEGER',function(){return 9.007199254740991E15},'es6','es3');$jscomp.polyfill('Number.MIN_SAFE_INTEGER',function(){return -9.007199254740991E15},'es6','es3');$jscomp.polyfill('Number.isFinite',function(a){if(a){return a}var b=function(b){if(typeof b!=='number'){return !1}return !isNaN(b)&&b!==Infinity&&b!==-Infinity};return b},'es6','es3');$jscomp.polyfill('Number.isInteger',function(a){if(a){return a}var b=function(b){if(!Number.isFinite(b)){return !1}return b===Math.floor(b)};return b},'es6','es3');$jscomp.polyfill('Number.isNaN',function(a){if(a){return a}var b=function(b){return typeof b==='number'&&isNaN(b)};return b},'es6','es3');$jscomp.polyfill('Number.isSafeInteger',function(a){if(a){return a}var b=function(b){return Number.isInteger(b)&&Math.abs(b)<=Number.MAX_SAFE_INTEGER};return b},'es6','es3');$jscomp.polyfill('Object.assign',function(a){if(a){return a}var b=function(e,f){for(var d=1;d<arguments.length;d++){var b=arguments[d];if(!b){continue}for(var c in b){if($jscomp.owns(b,c)){e[c]=b[c]}}}return e};return b},'es6','es3');$jscomp.polyfill('Object.entries',function(a){if(a){return a}var b=function(c){var d=[];for(var b in c){if($jscomp.owns(c,b)){d.push([b,c[b]])}}return d};return b},'es8','es3');$jscomp.polyfill('Object.getOwnPropertySymbols',function(a){if(a){return a}return function(){return []}},'es6','es5');$jscomp.polyfill('Reflect.ownKeys',function(b){if(b){return b}var a='jscomp_symbol_';function isSymbol(c){return c.substring(0,a.length)==a}var c=function(e){var f=[];var c=Object.getOwnPropertyNames(e);var d=Object.getOwnPropertySymbols(e);for(var a=0;a<c.length;a++){(isSymbol(c[a])?d:f).push(c[a])}return f.concat(d)};return c},'es6','es5');$jscomp.polyfill('Object.getOwnPropertyDescriptors',function(a){if(a){return a}var b=function(e){var d={};var c=Reflect.ownKeys(e);for(var b=0;b<c.length;b++){d[c[b]]=Object.getOwnPropertyDescriptor(e,c[b])}return d};return b},'es8','es5');$jscomp.underscoreProtoCanBeSet=function(){var b={a:!0};var a={};try{a.__proto__=b;return a.a}catch(c){}return !1};$jscomp.setPrototypeOf=typeof Object.setPrototypeOf=='function'?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,b){a.__proto__=b;if(a.__proto__!==b){throw new TypeError(a+' is not extensible')}return a}:null;$jscomp.polyfill('Object.setPrototypeOf',function(a){return a||$jscomp.setPrototypeOf},'es6','es5');$jscomp.polyfill('Object.values',function(a){if(a){return a}var b=function(b){var c=[];for(var d in b){if($jscomp.owns(b,d)){c.push(b[d])}}return c};return b},'es8','es3');$jscomp.polyfill('Reflect.apply',function(a){if(a){return a}var c=Function.prototype.apply;var b=function(e,d,b){return c.call(e,d,b)};return b},'es6','es3');$jscomp.objectCreate=$jscomp.ASSUME_ES5||typeof Object.create=='function'?Object.create:function(b){var a=function(){};a.prototype=b;return new a()};$jscomp.construct=function(){function reflectConstructWorks(){function Base(){}function Derived(){}new Base();Reflect.construct(Base,[],Derived);return new Base() instanceof Base}if(typeof Reflect!='undefined'&&Reflect.construct){if(reflectConstructWorks()){return Reflect.construct}var b=Reflect.construct;var a=function(e,d,a){var c=b(e,d);if(a){Reflect.setPrototypeOf(c,a.prototype)}return c};return a}function construct(b,d,a){if(a===undefined){a=b}var f=a.prototype||Object.prototype;var c=$jscomp.objectCreate(f);var e=Function.prototype.apply;var g=e.call(b,c,d);return g||c}return construct}();$jscomp.polyfill('Reflect.construct',function(a){return $jscomp.construct},'es6','es3');$jscomp.polyfill('Reflect.defineProperty',function(a){if(a){return a}var b=function(e,d,c){try{Object.defineProperty(e,d,c);var b=Object.getOwnPropertyDescriptor(e,d);if(!b){return !1}return b.configurable===(c.configurable||!1)&&b.enumerable===(c.enumerable||!1)&&('value' in b?b.value===c.value&&b.writable===(c.writable||!1):b.get===c.get&&b.set===c.set)}catch(f){return !1}};return b},'es6','es5');$jscomp.polyfill('Reflect.deleteProperty',function(a){if(a){return a}var b=function(c,b){if(!$jscomp.owns(c,b)){return !0}try{return delete c[b]}catch(d){return !1}};return b},'es6','es3');$jscomp.polyfill('Reflect.getOwnPropertyDescriptor',function(a){return a||Object.getOwnPropertyDescriptor},'es6','es5');$jscomp.polyfill('Reflect.getPrototypeOf',function(a){return a||Object.getPrototypeOf},'es6','es5');$jscomp.findDescriptor=function(d,c){var a=d;while(a){var b=Reflect.getOwnPropertyDescriptor(a,c);if(b){return b}a=Reflect.getPrototypeOf(a)}return undefined};$jscomp.polyfill('Reflect.get',function(a){if(a){return a}var b=function(d,c,e){if(arguments.length<=2){return d[c]}var b=$jscomp.findDescriptor(d,c);if(b){return b.get?b.get.call(e):b.value}return undefined};return b},'es6','es5');$jscomp.polyfill('Reflect.has',function(a){if(a){return a}var b=function(c,b){return b in c};return b},'es6','es3');$jscomp.polyfill('Reflect.isExtensible',function(a){if(a){return a}if($jscomp.ASSUME_ES5||typeof Object.isExtensible=='function'){return Object.isExtensible}return function(){return !0}},'es6','es3');$jscomp.polyfill('Reflect.preventExtensions',function(a){if(a){return a}if(!($jscomp.ASSUME_ES5||typeof Object.preventExtensions=='function')){return function(){return !1}}var b=function(b){Object.preventExtensions(b);return !Object.isExtensible(b)};return b},'es6','es3');$jscomp.polyfill('Reflect.set',function(a){if(a){return a}var b=function(b,d,e,f){var c=$jscomp.findDescriptor(b,d);if(!c){if(Reflect.isExtensible(b)){b[d]=e;return !0}return !1}if(c.set){c.set.call(arguments.length>3?f:b,e);return !0}else {if(c.writable&&!Object.isFrozen(b)){b[d]=e;return !0}}return !1};return b},'es6','es5');$jscomp.polyfill('Reflect.setPrototypeOf',function(a){if(a){return a}else {if($jscomp.setPrototypeOf){var b=$jscomp.setPrototypeOf;var c=function(c,d){try{b(c,d);return !0}catch(e){return !1}};return c}else {return null}}},'es6','es5');$jscomp.polyfill('Set',function(b){var c=!$jscomp.ASSUME_NO_NATIVE_SET&&function(){if(!b||!b.prototype.entries||typeof Object.seal!='function'){return !1}try{b=b;var d=Object.seal({x:4});var c=new b($jscomp.makeIterator([d]));if(!c.has(d)||c.size!=1||c.add(d)!=c||c.size!=1||c.add({x:4})!=c||c.size!=2){return !1}var e=c.entries();var a=e.next();if(a.done||a.value[0]!=d||a.value[1]!=d){return !1}a=e.next();if(a.done||a.value[0]==d||a.value[0].x!=4||a.value[1]!=a.value[0]){return !1}return e.next().done}catch(f){return !1}}();if(c){return b}$jscomp.initSymbol();$jscomp.initSymbolIterator();var a=function(a){this.map_=new Map();if(a){var e=$jscomp.makeIterator(a);var c;while(!(c=e.next()).done){var d=c.value;this.add(d)}}this.size=this.map_.size};a.prototype.add=function(a){this.map_.set(a,a);this.size=this.map_.size;return this};a.prototype['delete']=function(c){var a=this.map_['delete'](c);this.size=this.map_.size;return a};a.prototype.clear=function(){this.map_.clear();this.size=0};a.prototype.has=function(a){return this.map_.has(a)};a.prototype.entries=function(){return this.map_.entries()};a.prototype.values=function(){return this.map_.values()};a.prototype.keys=a.prototype.values;$jscomp.initSymbol();$jscomp.initSymbolIterator();a.prototype[Symbol.iterator]=a.prototype.values;a.prototype.forEach=function(c,a){var d=this;this.map_.forEach(function(e){return c.call(a,e,e,d)})};return a},'es6','es3');$jscomp.checkStringArgs=function(a,c,b){if(a==null){throw new TypeError("The 'this' value for String.prototype."+b+' must not be null or undefined')}if(c instanceof RegExp){throw new TypeError('First argument to String.prototype.'+b+' must not be a regular expression')}return a+''};$jscomp.polyfill('String.prototype.codePointAt',function(a){if(a){return a}var b=function(b){var e=$jscomp.checkStringArgs(this,null,'codePointAt');var f=e.length;b=Number(b)||0;if(!(b>=0&&b<f)){return void 0}b=b|0;var c=e.charCodeAt(b);if(c<55296||c>56319||b+1===f){return c}var d=e.charCodeAt(b+1);if(d<56320||d>57343){return c}return (c-55296)*1024+d+9216};return b},'es6','es3');$jscomp.polyfill('String.prototype.endsWith',function(a){if(a){return a}var b=function(b,c){var d=$jscomp.checkStringArgs(this,b,'endsWith');b=b+'';if(c===void 0){c=d.length}var f=Math.max(0,Math.min(c|0,d.length));var e=b.length;while(e>0&&f>0){if(d[--f]!=b[--e]){return !1}}return e<=0};return b},'es6','es3');$jscomp.polyfill('String.fromCodePoint',function(a){if(a){return a}var b=function(e){var c='';for(var d=0;d<arguments.length;d++){var b=Number(arguments[d]);if(b<0||b>1114111||b!==Math.floor(b)){throw new RangeError('invalid_code_point '+b)}if(b<=65535){c+=String.fromCharCode(b)}else {b-=65536;c+=String.fromCharCode(b>>>10&1023|55296);c+=String.fromCharCode(b&1023|56320)}}return c};return b},'es6','es3');$jscomp.polyfill('String.prototype.includes',function(a){if(a){return a}var b=function(b,c){var d=$jscomp.checkStringArgs(this,b,'includes');return d.indexOf(b,c||0)!==-1};return b},'es6','es3');$jscomp.polyfill('String.prototype.repeat',function(a){if(a){return a}var b=function(b){var c=$jscomp.checkStringArgs(this,null,'repeat');if(b<0||b>1342177279){throw new RangeError('Invalid count value')}b=b|0;var d='';while(b){if(b&1){d+=c}if(b>>>=1){c+=c}}return d};return b},'es6','es3');$jscomp.stringPadding=function(c,a){var b=c!==undefined?String(c):' ';if(!(a>0)||!b){return ''}var d=Math.ceil(a/b.length);return b.repeat(d).substring(0,a)};$jscomp.polyfill('String.prototype.padEnd',function(a){if(a){return a}var b=function(d,c){var b=$jscomp.checkStringArgs(this,null,'padStart');var e=d-b.length;return b+$jscomp.stringPadding(c,e)};return b},'es8','es3');$jscomp.polyfill('String.prototype.padStart',function(a){if(a){return a}var b=function(d,c){var b=$jscomp.checkStringArgs(this,null,'padStart');var e=d-b.length;return $jscomp.stringPadding(c,e)+b};return b},'es8','es3');$jscomp.polyfill('String.prototype.startsWith',function(a){if(a){return a}var b=function(b,g){var c=$jscomp.checkStringArgs(this,b,'startsWith');b=b+'';var h=c.length;var e=b.length;var f=Math.max(0,Math.min(g|0,c.length));var d=0;while(d<e&&f<h){if(c[f++]!=b[d++]){return !1}}return d>=e};return b},'es6','es3');$jscomp.arrayFromIterator=function(c){var b;var a=[];while(!(b=c.next()).done){a.push(b.value)}return a};$jscomp.arrayFromIterable=function(a){if(a instanceof Array){return a}else {return $jscomp.arrayFromIterator($jscomp.makeIterator(a))}};$jscomp.inherits=function(a,b){a.prototype=$jscomp.objectCreate(b.prototype);a.prototype.constructor=a;if($jscomp.setPrototypeOf){var e=$jscomp.setPrototypeOf;e(a,b)}else {for(var c in b){if(c=='prototype'){continue}if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);if(d){Object.defineProperty(a,c,d)}}else {a[c]=b[c]}}}a.superClass_=b.prototype};$jscomp.polyfill('WeakSet',function(b){function isConformant(){if(!b||!Object.seal){return !1}try{var c=Object.seal({});var d=Object.seal({});var a=new b([c]);if(!a.has(c)||a.has(d)){return !1}a['delete'](c);a.add(d);return !a.has(c)&&a.has(d)}catch(e){return !1}}if(isConformant()){return b}var a=function(a){this.map_=new WeakMap();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();var e=$jscomp.makeIterator(a);var c;while(!(c=e.next()).done){var d=c.value;this.add(d)}}};a.prototype.add=function(a){this.map_.set(a,!0);return this};a.prototype.has=function(a){return this.map_.has(a)};a.prototype['delete']=function(a){return this.map_['delete'](a)};return a},'es6','es3');try{if(Array.prototype.values.toString().indexOf('[native code]')==-1){delete Array.prototype.values}}catch(a){}var Ext=Ext||{};if(!Ext.app){Ext.app={}}if(!Ext.app.bind){Ext.app.bind={}}if(!Ext.app.domain){Ext.app.domain={}}if(!Ext.app.route){Ext.app.route={}}if(!Ext.behavior){Ext.behavior={}}if(!Ext.button){Ext.button={}}if(!Ext.container){Ext.container={}}if(!Ext.core){Ext.core={}}if(!Ext.data){Ext.data={}}if(!Ext.data.field){Ext.data.field={}}if(!Ext.data.flash){Ext.data.flash={}}if(!Ext.data.identifier){Ext.data.identifier={}}if(!Ext.data.matrix){Ext.data.matrix={}}if(!Ext.data.operation){Ext.data.operation={}}if(!Ext.data.proxy){Ext.data.proxy={}}if(!Ext.data.reader){Ext.data.reader={}}if(!Ext.data.request){Ext.data.request={}}if(!Ext.data.schema){Ext.data.schema={}}if(!Ext.data.session){Ext.data.session={}}if(!Ext.data.validator){Ext.data.validator={}}if(!Ext.data.writer){Ext.data.writer={}}if(!Ext.dataview){Ext.dataview={}}if(!Ext.dataview.component){Ext.dataview.component={}}if(!Ext.dataview.element){Ext.dataview.element={}}if(!Ext.direct){Ext.direct={}}if(!Ext.dom){Ext.dom={}}if(!Ext.dom.Element){Ext.dom.Element={}}if(!Ext.event){Ext.event={}}if(!Ext.event.gesture){Ext.event.gesture={}}if(!Ext.event.publisher){Ext.event.publisher={}}if(!Ext.field){Ext.field={}}if(!Ext.form){Ext.form={}}if(!Ext.fx){Ext.fx={}}if(!Ext.fx.animation){Ext.fx.animation={}}if(!Ext.fx.easing){Ext.fx.easing={}}if(!Ext.fx.layout){Ext.fx.layout={}}if(!Ext.fx.layout.card){Ext.fx.layout.card={}}if(!Ext.fx.runner){Ext.fx.runner={}}if(!Ext.grid){Ext.grid={}}if(!Ext.grid.cell){Ext.grid.cell={}}if(!Ext.grid.column){Ext.grid.column={}}if(!Ext.grid.plugin){Ext.grid.plugin={}}if(!Ext.layout){Ext.layout={}}if(!Ext.layout.wrapper){Ext.layout.wrapper={}}if(!Ext.lib){Ext.lib={}}if(!Ext.list){Ext.list={}}if(!Ext.mixin){Ext.mixin={}}if(!Ext.overrides){Ext.overrides={}}if(!Ext.overrides.app){Ext.overrides.app={}}if(!Ext.overrides.list){Ext.overrides.list={}}if(!Ext.overrides.scroll){Ext.overrides.scroll={}}if(!Ext.panel){Ext.panel={}}if(!Ext.picker){Ext.picker={}}if(!Ext.plugin){Ext.plugin={}}if(!Ext.promise){Ext.promise={}}if(!Ext.scroll){Ext.scroll={}}if(!Ext.tab){Ext.tab={}}if(!Ext.theme){Ext.theme={}}if(!Ext.theme.neptune){Ext.theme.neptune={}}if(!Ext.theme.triton){Ext.theme.triton={}}if(!Ext.util){Ext.util={}}if(!Ext.util.paintmonitor){Ext.util.paintmonitor={}}if(!Ext.util.sizemonitor){Ext.util.sizemonitor={}}if(!Ext.util.translatable){Ext.util.translatable={}}if(!Ext.ux){Ext.ux={}}if(!Ext.ux.ajax){Ext.ux.ajax={}}if(!Ext.viewport){Ext.viewport={}}var TS=TS||{};if(!TS.common){TS.common={}}if(!TS.common.dataview){TS.common.dataview={}}if(!TS.common.draw){TS.common.draw={}}if(!TS.common.field){TS.common.field={}}if(!TS.common.fwaview){TS.common.fwaview={}}if(!TS.common.grid){TS.common.grid={}}if(!TS.common.picker){TS.common.picker={}}if(!TS.common.ts){TS.common.ts={}}if(!TS.common.window){TS.common.window={}}if(!TS.controller){TS.controller={}}if(!TS.controller.crew){TS.controller.crew={}}if(!TS.controller.exa){TS.controller.exa={}}if(!TS.controller.exp){TS.controller.exp={}}if(!TS.controller.fss){TS.controller.fss={}}if(!TS.controller.fwa){TS.controller.fwa={}}if(!TS.controller.ts){TS.controller.ts={}}if(!TS.controller.tsa){TS.controller.tsa={}}if(!TS.data){TS.data={}}if(!TS.data.field){TS.data.field={}}if(!TS.data.proxy){TS.data.proxy={}}if(!TS.data.reader){TS.data.reader={}}if(!TS.field){TS.field={}}if(!TS.model){TS.model={}}if(!TS.model.admin){TS.model.admin={}}if(!TS.model.crew){TS.model.crew={}}if(!TS.model.exa){TS.model.exa={}}if(!TS.model.exp){TS.model.exp={}}if(!TS.model.fss){TS.model.fss={}}if(!TS.model.fwa){TS.model.fwa={}}if(!TS.model.shared){TS.model.shared={}}if(!TS.model.ts){TS.model.ts={}}if(!TS.model.tsa){TS.model.tsa={}}if(!TS.overrides){TS.overrides={}}if(!TS.overrides.app){TS.overrides.app={}}if(!TS.overrides.app.bind){TS.overrides.app.bind={}}if(!TS.overrides.data){TS.overrides.data={}}if(!TS.overrides.data.proxy){TS.overrides.data.proxy={}}if(!TS.overrides.data.schema){TS.overrides.data.schema={}}if(!TS.overrides.dataview){TS.overrides.dataview={}}if(!TS.overrides.direct){TS.overrides.direct={}}if(!TS.overrides.field){TS.overrides.field={}}if(!TS.overrides.form){TS.overrides.form={}}if(!TS.overrides.grid){TS.overrides.grid={}}if(!TS.overrides.grid.plugin){TS.overrides.grid.plugin={}}if(!TS.overrides.list){TS.overrides.list={}}if(!TS.overrides.mixin){TS.overrides.mixin={}}if(!TS.overrides.picker){TS.overrides.picker={}}if(!TS.overrides.scroll){TS.overrides.scroll={}}if(!TS.overrides.ux){TS.overrides.ux={}}if(!TS.overrides.ux.ajax){TS.overrides.ux.ajax={}}if(!TS.service){TS.service={}}if(!TS.store){TS.store={}}if(!TS.view){TS.view={}}if(!TS.view.common){TS.view.common={}}if(!TS.view.crew){TS.view.crew={}}if(!TS.view.exa){TS.view.exa={}}if(!TS.view.exp){TS.view.exp={}}if(!TS.view.fss){TS.view.fss={}}if(!TS.view.fwa){TS.view.fwa={}}if(!TS.view.main){TS.view.main={}}if(!TS.view.ts){TS.view.ts={}}if(!TS.view.tsa){TS.view.tsa={}}(function(q){var e,p=['constructor','toString','valueOf','toLocaleString'],n={},m={},k=0,l,j,a,b,o,f,c,d,g,h,i,t=function(){var s,t;j=Ext.Base;a=Ext.ClassManager;b=Ext.Class;for(s=p.length;s-->0;){t=1<<s;m[n[t]=p[s]]=t}for(s in m){k|=m[s]}k=~k;Function.prototype.$isFunction=1;i=!!a.addAlias;o=b.getPreprocessor('config').fn;f=b.getPreprocessor('cachedConfig');f=f&&f.fn;h=b.getPreprocessor('privates');h=h&&h.fn;d=b.getPreprocessor('platformConfig');d=d&&d.fn;c=a.postprocessors.platformConfig;c=c&&c.fn;g=a.postprocessors.deprecated;g=g&&g.fn;e=j.$staticMembers;if(!e){e=[];for(l in j){if(j.hasOwnProperty(l)){e.push(l)}}}q.derive=r;return r.apply(this,arguments)},s=function(f,d,o){var l=o.enumerableMembers,j=f.prototype,b,h,k,e,m;if(!d){return}if(i){f.addMembers(d)}else {for(b in d){e=d[b];if(e&&e.$isFunction&&!e.$isClass&&e!==Ext.emptyFn&&e!==Ext.identityFn){m=j.hasOwnProperty(b)&&j[b];if(m){e.$previous=m}j[b]=h=e;h.$owner=f;h.$name=b}else {j[b]=e}}for(k=1;l;k<<=1){if(l&k){l&=~k;b=n[k];j[b]=h=d[b];h.$owner=f;h.$name=b}}}if(d.platformConfig&&c){c.call(a,f.$className,f,d)}if(d.deprecated&&g){g.call(a,f.$className,f,d)}},r=function(u,Q,c,L,E,M,O,B,D,G,N){var g=function ctor(){return this.constructor.apply(this,arguments)||null},m=g,v={enumerableMembers:L&k,onCreated:N,onBeforeCreated:s,aliases:B},p=c.alternateClassName||[],P=Ext.global,F,z,l,K,y,C,H,r,x,w,n,I,t,J=a.alternateToName||a.maps.alternateToName,A=a.nameToAlternates||a.maps.nameToAlternates;for(l=e.length;l-->0;){H=e[l];g[H]=j[H]}if(c.$isFunction){c=c(g)}v.data=c;x=c.statics;delete c.statics;c.$className=u;if('$className' in c){g.$className=c.$className}g.extend(Q);r=g.prototype;if(E){g.xtype=c.xtype=E[0];r.xtypes=E}r.xtypesChain=M;r.xtypesMap=O;c.alias=B;m.triggerExtended(g,c,v);if(c.onClassExtended){g.onExtended(c.onClassExtended,g);delete c.onClassExtended}if(c.privates&&h){h.call(b,g,c)}if(x){if(i){g.addStatics(x)}else {for(w in x){if(x.hasOwnProperty(w)){t=x[w];if(t&&t.$isFunction&&!t.$isClass&&t!==Ext.emptyFn&&t!==Ext.identityFn){g[w]=I=t;I.$owner=g;I.$name=w}g[w]=t}}}}if(c.inheritableStatics){g.addInheritableStatics(c.inheritableStatics);delete c.inheritableStatics}if(r.onClassExtended){m.onExtended(r.onClassExtended,m);delete r.onClassExtended}if(c.platformConfig&&d){d.call(b,g,c);delete c.platformConfig}if(c.config){o.call(b,g,c)}if(c.cachedConfig&&f){f.call(b,g,c);delete c.cachedConfig}v.onBeforeCreated(g,v.data,v);for(l=0,y=D&&D.length;l<y;++l){g.mixin.apply(g,D[l])}for(l=0,y=B.length;l<y;l++){F=B[l];a.setAlias?a.setAlias(g,F):a.addAlias(g,F)}if(c.singleton){m=new g()}if(!(p instanceof Array)){p=[p]}n=a.getName(m);for(l=0,K=p.length;l<K;l++){z=p[l];a.classes[z]=m;if(i){a.addAlternate(g,z)}else {if(n){J[z]=n;p=A[n]||(A[n]=[]);p.push(z)}}}for(l=0,y=G.length;l<y;l+=2){C=G[l];if(!C){C=P}C[G[l+1]]=m}a.classes[u]=m;if(!i){if(n&&n!==u){J[u]=n;p=A[n]||(A[n]=[]);p.push(u)}}delete r.alternateClassName;if(v.onCreated){v.onCreated.call(m,m)}if(u){a.triggerCreated(u)}return m};q.derive=t})(Ext.cmd={});var Ext=Ext||{};(function(){var d=this,h=Object.prototype,c=h.toString,b=['valueOf','toLocaleString','toString','constructor'],a=function(){},f=function(){},e=function(a){return a},g=function(){var a=g.caller.caller;return a.$owner.prototype[a.$name].apply(this,arguments)},k=Ext.manifest||{},l,i=/\[object\s*(?:Array|Arguments|\w*Collection|\w*List|HTML\s+document\.all\s+class)\]/,j=/^\\?\/Date\(([-+])?(\d+)(?:[+-]\d{4})?\)\\?\/$/;Ext.global=d;Ext.now=Date.now||(Date.now=function(){return +new Date()});Ext.ticks=d.performance&&d.performance.now?function(){return performance.now()}:Ext.now;Ext._startTime=Ext.ticks();a.$nullFn=e.$nullFn=a.$emptyFn=e.$identityFn=f.$nullFn=!0;f.$privacy='framework';Ext['suspendLayouts']=Ext['resumeLayouts']=a;for(l in {toString:1}){b=null}Ext.enumerables=b;Ext.apply=function(c,a,g){if(g){Ext.apply(c,g)}if(c&&a&&typeof a==='object'){var e,f,d;for(e in a){c[e]=a[e]}if(b){for(f=b.length;f--;){d=b[f];if(a.hasOwnProperty(d)){c[d]=a[d]}}}}return c};function addInstanceOverrides(d,e,c){var a,b;for(a in c){if(c.hasOwnProperty(a)){b=c[a];if(typeof b==='function'){b.$name=a;b.$owner=e;b.$previous=d.hasOwnProperty(a)?d[a]:g}d[a]=b}}}Ext.buildSettings=Ext.apply({baseCSSPrefix:'x-'},Ext.buildSettings||{});Ext.apply(Ext,{idSeed:0,idPrefix:'ext-',isSecure:/^https/i.test(window.location.protocol),enableGarbageCollector:!1,enableListenerCollection:!0,name:Ext.sandboxName||'Ext',privateFn:f,emptyFn:a,identityFn:e,frameStartTime:Ext.now(),manifest:k,enableAria:!0,startsWithHashRe:/^#/,validIdRe:/^[a-z_][a-z0-9\-_]*$/i,BLANK_IMAGE_URL:'data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==',makeIdSelector:function(a){return '#'+a},id:function(a,c){if(a&&a.id){return a.id}var b=(c||Ext.idPrefix)+ ++Ext.idSeed;if(a){a.id=b}return b},returnId:function(a){return a.getId()},returnTrue:function(){return !0},emptyString:new String(),baseCSSPrefix:Ext.buildSettings.baseCSSPrefix,$eventNameMap:{},$vendorEventRe:/^(DOMMouse|Moz.+|MS.+|webkit.+)/,canonicalEventName:function(a){return Ext.$eventNameMap[a]||(Ext.$eventNameMap[a]=Ext.$vendorEventRe.test(a)?a:a.toLowerCase())},applyIf:function(b,c){var a;if(b){for(a in c){if(b[a]===undefined){b[a]=c[a]}}}return b},destroy:function(){var c=arguments.length,b,a;for(b=0;b<c;b++){a=arguments[b];if(a){if(Ext.isArray(a)){this.destroy.apply(this,a)}else {if(Ext.isFunction(a.destroy)){a.destroy()}}}}return null},destroyMembers:function(c){for(var a,d,b=1,e=arguments,f=e.length;b<f;b++){a=c[d=e[b]];if(a!=null){c[d]=Ext.destroy(a)}}},override:function(a,b){if(a.$isClass){a.override(b)}else {if(typeof a==='function'){Ext.apply(a.prototype,b)}else {var c=a.self,d;if(c&&c.$isClass){d=b.privates;if(d){b=Ext.apply({},b);delete b.privates;addInstanceOverrides(a,c,d)}addInstanceOverrides(a,c,b)}else {Ext.apply(a,b)}}}return a},valueFrom:function(a,b,c){return Ext.isEmpty(a,c)?b:a},isEmpty:function(a,b){return a==null||(!b?a==='':!1)||Ext.isArray(a)&&a.length===0},isArray:'isArray' in Array?Array.isArray:function(a){return c.call(a)==='[object Array]'},isDate:function(a){return c.call(a)==='[object Date]'},isMSDate:function(a){if(!Ext.isString(a)){return !1}return j.test(a)},isObject:c.call(null)==='[object Object]'?function(a){return a!==null&&a!==undefined&&c.call(a)==='[object Object]'&&a.ownerDocument===undefined}:function(a){return c.call(a)==='[object Object]'},isSimpleObject:function(a){return a instanceof Object&&a.constructor===Object},isPrimitive:function(b){var a=typeof b;return a==='string'||a==='number'||a==='boolean'},isFunction:typeof document!=='undefined'&&typeof document.getElementsByTagName('body')==='function'?function(a){return !!a&&c.call(a)==='[object Function]'}:function(a){return !!a&&typeof a==='function'},isNumber:function(a){return typeof a==='number'&&isFinite(a)},isNumeric:function(a){return !isNaN(parseFloat(a))&&isFinite(a)},isString:function(a){return typeof a==='string'},isBoolean:function(a){return typeof a==='boolean'},isElement:function(a){return a?a.nodeType===1:!1},isTextNode:function(a){return a?a.nodeName==='#text':!1},isDefined:function(a){return typeof a!=='undefined'},isIterable:function(a){if(!a||typeof a.length!=='number'||typeof a==='string'||Ext.isFunction(a)){return !1}if(!a.propertyIsEnumerable){return !!a.item}if(a.hasOwnProperty('length')&&!a.propertyIsEnumerable('length')){return !0}return i.test(c.call(a))},isDebugEnabled:a,clone:function(a){if(a===null||a===undefined){return a}if(a.nodeType&&a.cloneNode){return a.cloneNode(!0)}var g=c.call(a),e,i,f,d,h;if(g==='[object Date]'){return new Date(a.getTime())}if(g==='[object Array]'){e=a.length;d=[];while(e--){d[e]=Ext.clone(a[e])}}else {if(g==='[object Object]'&&a.constructor===Object){d={};for(h in a){d[h]=Ext.clone(a[h])}if(b){for(i=b.length;i--;){f=b[i];if(a.hasOwnProperty(f)){d[f]=a[f]}}}}}return d||a},getUniqueGlobalNamespace:function(){var a=this.uniqueGlobalNamespace,b;if(a===undefined){b=0;do{a='ExtBox'+ ++b}while(d[a]!==undefined);d[a]=Ext;this.uniqueGlobalNamespace=a}return a},functionFactoryCache:{},cacheableFunctionFactory:function(){var f=this,a=Array.prototype.slice.call(arguments),e=f.functionFactoryCache,d,b,c;if(Ext.isSandboxed){c=a.length;if(c>0){c--;a[c]='var Ext=window.'+Ext.name+';'+a[c]}}d=a.join('');b=e[d];if(!b){b=Function.prototype.constructor.apply(Function.prototype,a);e[d]=b}return b},functionFactory:function(){var b=Array.prototype.slice.call(arguments),a;if(Ext.isSandboxed){a=b.length;if(a>0){a--;b[a]='var Ext=window.'+Ext.name+';'+b[a]}}return Function.prototype.constructor.apply(Function.prototype,b)},Logger:{verbose:a,log:a,info:a,warn:a,error:function(a){throw new Error(a)},deprecate:a},ariaWarn:function(a,b){if(Ext.enableAria&&!Ext.slicer){if(!Ext.ariaWarn.first){Ext.ariaWarn.first=!0;Ext.log.warn('WAI-ARIA compatibility warnings can be suppressed by adding the following to application startup code:');Ext.log.warn('    Ext.ariaWarn = Ext.emptyFn;')}Ext.log.warn({msg:b,dump:a})}},getElementById:function(a){return document.getElementById(a)},splitAndUnescape:function(){var a={};return function(e,c){if(!e){return []}else {if(!c){return [e]}}var g=a[c]||(a[c]=new RegExp('\\\\'+c,'g')),f=[],d,b;d=e.split(c);while((b=d.shift())!==undefined){while(b.charAt(b.length-1)==='\\'&&d.length>0){b=b+c+d.shift()}b=b.replace(g,c);f.push(b)}return f}}()});Ext.returnTrue.$nullFn=Ext.returnId.$nullFn=!0})();Ext.platformTags.classic=!(Ext.platformTags.modern=Ext.isModern=!0);(function(){function toString(){var d=this,b=d.sourceClass,a=d.sourceMethod,c=d.msg;if(a){if(c){a+='(): ';a+=c}else {a+='()'}}if(b){a=a?b+'.'+a:b}return a||c||''}Ext.Error=function(b){if(Ext.isString(b)){b={msg:b}}var a=new Error();Ext.apply(a,b);a.message=a.message||a.msg;a.toString=toString;return a};Ext.apply(Ext.Error,{ignore:!1,raise:function(a){a=a||{};if(Ext.isString(a)){a={msg:a}}var d=this,b=d.raise.caller,e,c;if(b===Ext.raise){b=b.caller}if(b){if(!a.sourceMethod&&(c=b.$name)){a.sourceMethod=c}if(!a.sourceClass&&(c=b.$owner)&&(c=c.$className)){a.sourceClass=c}}if(d.handle(a)!==!0){e=toString.call(a);throw new Ext.Error(a)}},handle:function(){return this.ignore}})})();Ext.deprecated=function(a){return Ext.emptyFn};Ext.raise=function(){Ext.Error.raise.apply(Ext.Error,arguments)};Ext.Array=function(){var c=Array.prototype,b=c.slice,f=function(){var a=[],b,c=20;if(!a.splice){return !1}while(c--){a.push('A')}a.splice(15,0,'F','F','F','F','F','F','F','F','F','F','F','F','F','F','F','F','F','F','F','F','F');b=a.length;a.splice(13,0,'XXX');if(b+1!==a.length){return !1}return !0}(),i='indexOf' in c,h=!0;function stableSort(b,e){var d=b.length,c=new Array(d),a;for(a=0;a<d;a++){c[a]=a}c.sort(function(a,c){return e(b[a],b[c])||a-c});for(a=0;a<d;a++){c[a]=b[c[a]]}for(a=0;a<d;a++){b[a]=c[a]}return b}try{if(typeof document!=='undefined'){b.call(document.getElementsByTagName('body'))}}catch(q){h=!1}var g=function(b,a){return a<0?Math.max(0,b.length+a):Math.min(b.length,a)},e=function(a,n,m,d){var e=d?d.length:0,i=a.length,f=g(a,n);if(f===i){if(e){a.push.apply(a,d)}}else {var k=Math.min(m,i-f),c=f+k,h=c+e-k,l=i-c,j=i-k,b;if(h<c){for(b=0;b<l;++b){a[h+b]=a[c+b]}}else {if(h>c){for(b=l;b--;){a[h+b]=a[c+b]}}}if(e&&f===j){a.length=j;a.push.apply(a,d)}else {a.length=j+e;for(b=0;b<e;++b){a[f+b]=d[b]}}}return a},k=function(a,c,d,b){if(b&&b.length){if(c===0&&!d){a.unshift.apply(a,b)}else {if(c<a.length){a.splice.apply(a,[c,d].concat(b))}else {a.push.apply(a,b)}}}else {a.splice(c,d)}return a},o=function(b,c,a){return e(b,c,a)},m=function(a,c,b){a.splice(c,b);return a},n=function(a,f,c){var d=g(a,f),h=a.slice(f,g(a,d+c));if(arguments.length<4){e(a,d,c)}else {e(a,d,c,b.call(arguments,3))}return h},l=function(a){return a.splice.apply(a,b.call(arguments,1))},d=f?m:o,j=f?k:e,p=f?l:n,a={binarySearch:function(h,i,c,b,d){var g=h.length,e,f;if(c instanceof Function){d=c;c=0;b=g}else {if(b instanceof Function){d=b;b=g}else {if(c===undefined){c=0}if(b===undefined){b=g}d=d||a.lexicalCompare}}--b;while(c<=b){e=c+b>>1;f=d(i,h[e]);if(f>=0){c=e+1}else {if(f<0){b=e-1}}}return c},defaultCompare:function(a,b){return a<b?-1:a>b?1:0},lexicalCompare:function(a,b){a=String(a);b=String(b);return a<b?-1:a>b?1:0},each:function(c,e,d,g){c=a.from(c);var b,f=c.length;if(g!==!0){for(b=0;b<f;b++){if(e.call(d||c[b],c[b],b,c)===!1){return b}}}else {for(b=f-1;b>-1;b--){if(e.call(d||c[b],c[b],b,c)===!1){return b}}}return !0},forEach:'forEach' in c?function(a,c,b){return a.forEach(c,b)}:function(b,d,c){for(var a=0,e=b.length;a<e;a++){d.call(c,b[a],a,b)}},indexOf:i?function(a,d,b){return a?c.indexOf.call(a,d,b):-1}:function(b,e,c){var a,d=b?b.length:0;for(a=c<0?Math.max(0,d+c):c||0;a<d;a++){if(b[a]===e){return a}}return -1},contains:i?function(a,b){return c.indexOf.call(a,b)!==-1}:function(b,d){var a,c;for(a=0,c=b.length;a<c;a++){if(b[a]===d){return !0}}return !1},toArray:function(a,d,c){if(!a||!a.length){return []}if(typeof a==='string'){a=a.split('')}if(h){return b.call(a,d||0,c||a.length)}var f=[],e;d=d||0;c=c?c<0?a.length+c:c:a.length;for(e=d;e<c;e++){f.push(a[e])}return f},pluck:function(b,f){var d=[],a,e,c;for(a=0,e=b.length;a<e;a++){c=b[a];d.push(c[f])}return d},map:'map' in c?function(a,c,b){return a.map(c,b)}:function(b,f,d){var c=[],e=b.length,a;for(a=0;a<e;a++){c[a]=f.call(d,b[a],a,b)}return c},every:'every' in c?function(a,c,b){return a.every(c,b)}:function(b,d,c){var a=0,e=b.length;for(;a<e;++a){if(!d.call(c,b[a],a,b)){return !1}}return !0},some:'some' in c?function(a,c,b){return a.some(c,b)}:function(b,d,c){var a=0,e=b.length;for(;a<e;++a){if(d.call(c,b[a],a,b)){return !0}}return !1},equals:function(b,c){var d=b.length,e=c.length,a;if(b===c){return !0}if(d!==e){return !1}for(a=0;a<d;++a){if(b[a]!==c[a]){return !1}}return !0},clean:function(d){var c=[],b=0,e=d.length,a;for(;b<e;b++){a=d[b];if(!Ext.isEmpty(a)){c.push(a)}}return c},unique:function(e){var b=[],d=0,f=e.length,c;for(;d<f;d++){c=e[d];if(a.indexOf(b,c)===-1){b.push(c)}}return b},filter:'filter' in c?function(a,c,b){return a.filter(c,b)}:function(b,e,d){var c=[],a=0,f=b.length;for(;a<f;a++){if(e.call(d,b[a],a,b)){c.push(b[a])}}return c},findBy:function(b,e,c){var a=0,d=b.length;for(;a<d;a++){if(e.call(c||b,b[a],a)){return b[a]}}return null},from:function(c,e){if(c===undefined||c===null){return []}if(Ext.isArray(c)){return e?b.call(c):c}var d=typeof c;if(c&&c.length!==undefined&&d!=='string'&&(d!=='function'||!c.apply)){return a.toArray(c)}return [c]},remove:function(b,e){var c=a.indexOf(b,e);if(c!==-1){d(b,c,1)}return b},removeAt:function(c,b,a){var e=c.length;if(b>=0&&b<e){a=a||1;a=Math.min(a,e-b);d(c,b,a)}return c},include:function(b,c){if(!a.contains(b,c)){b.push(c)}},clone:function(a){return b.call(a)},merge:function(){var e=b.call(arguments),d=[],c,f;for(c=0,f=e.length;c<f;c++){d=d.concat(e[c])}return a.unique(d)},intersect:function(){var m=[],f=b.call(arguments),g,o,r,e,k,j,q,n,p,l,c,h,i;if(!f.length){return m}g=f.length;for(c=k=0;c<g;c++){j=f[c];if(!e||j.length<e.length){e=j;k=c}}e=a.unique(e);d(f,k,1);q=e.length;g=f.length;for(c=0;c<q;c++){n=e[c];l=0;for(h=0;h<g;h++){o=f[h];r=o.length;for(i=0;i<r;i++){p=o[i];if(n===p){l++;break}}}if(l===g){m.push(n)}}return m},difference:function(i,f){var c=b.call(i),h=c.length,e,a,g;for(e=0,g=f.length;e<g;e++){for(a=0;a<h;a++){if(c[a]===f[e]){d(c,a,1);a--;h--}}}return c},reduce:Array.prototype.reduce?function(b,a,c){if(arguments.length===3){return Array.prototype.reduce.call(b,a,c)}return Array.prototype.reduce.call(b,a)}:function(a,f,e){a=Object(a);var b=0,d=a.length>>>0,c=e;if(arguments.length<3){while(!0){if(b in a){c=a[b++];break}if(++b>=d){throw new TypeError('Reduce of empty array with no initial value')}}}for(;b<d;++b){if(b in a){c=f(c,a[b],b,a)}}return c},slice:[1,2].slice(1,undefined).length?function(a,c,d){return b.call(a,c,d)}:function(a,c,d){if(typeof c==='undefined'){return b.call(a)}if(typeof d==='undefined'){return b.call(a,c)}return b.call(a,c,d)},sort:function(c,b){return stableSort(c,b||a.lexicalCompare)},flatten:function(b){var a=[];function rFlatten(f){var c,e,d;for(c=0,e=f.length;c<e;c++){d=f[c];if(Ext.isArray(d)){rFlatten(d)}else {a.push(d)}}return a}return rFlatten(b)},min:function(d,e){var b=d[0],c,f,a;for(c=0,f=d.length;c<f;c++){a=d[c];if(e){if(e(b,a)===1){b=a}}else {if(a<b){b=a}}}return b},max:function(d,e){var b=d[0],c,f,a;for(c=0,f=d.length;c<f;c++){a=d[c];if(e){if(e(b,a)===-1){b=a}}else {if(a>b){b=a}}}return b},mean:function(b){return b.length>0?a.sum(b)/b.length:undefined},sum:function(b){var d=0,a,e,c;for(a=0,e=b.length;a<e;a++){c=b[a];d+=c}return d},toMap:function(c,b,e){var d={},a=c.length;if(!b){while(a--){d[c[a]]=a+1}}else {if(typeof b==='string'){while(a--){d[c[a][b]]=a+1}}else {while(a--){d[b.call(e,c[a])]=a+1}}}return d},toValueMap:function(g,d,k,f){var b={},e=g.length,j,i,h,l,c,a;if(!d){while(e--){a=g[e];b[a]=a}}else {if(!(l=typeof d!=='string')){f=k}i=f===1;j=f===2;while(e--){a=g[e];c=l?d.call(k,a):a[d];if(i){if(c in b){b[c].push(a)}else {b[c]=[a]}}else {if(j&&c in b){if((h=b[c]) instanceof Array){h.push(a)}else {b[c]=[h,a]}}else {b[c]=a}}}}return b},erase:d,insert:function(a,b,c){return j(a,b,0,c)},move:function(c,b,d){if(d===b){return}var f=c[b],e=d>b?1:-1,a;for(a=b;a!=d;a+=e){c[a]=c[a+e]}c[d]=f},replace:j,splice:p,push:function(a){var d=arguments.length,c=1,b;if(a===undefined){a=[]}else {if(!Ext.isArray(a)){a=[a]}}for(;c<d;c++){b=arguments[c];Array.prototype.push[Ext.isIterable(b)?'apply':'call'](a,b)}return a},numericSortFn:function(a,b){return a-b}};Ext.each=a.each;a.union=a.merge;Ext.min=a.min;Ext.max=a.max;Ext.sum=a.sum;Ext.mean=a.mean;Ext.flatten=a.flatten;Ext.clean=a.clean;Ext.unique=a.unique;Ext.pluck=a.pluck;Ext.toArray=function(){return a.toArray.apply(a,arguments)};return a}();Ext.String=function(){var m=/^[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u2028\u2029\u202f\u205f\u3000]+|[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u2028\u2029\u202f\u205f\u3000]+$/g,n=/('|\\)/g,i=/([-.*+?\^${}()|\[\]\/\\])/g,k=/^\s+|\s+$/g,j=/\s+/,l=/(^[^a-z]*|[^\w])/gi,c,a,b,d,h=function(b,a){return c[a]},g=function(c,b){return b in a?a[b]:String.fromCharCode(parseInt(b.substr(2),10))},e=function(b,a){if(b===null||b===undefined||a===null||a===undefined){return !1}return a.length<=b.length},f;return f={insert:function(b,c,a){if(!b){return c}if(!c){return b}var d=b.length;if(!a&&a!==0){a=d}if(a<0){a*=-1;if(a>=d){a=0}else {a=d-a}}if(a===0){b=c+b}else {if(a>=b.length){b+=c}else {b=b.substr(0,a)+c+b.substr(a)}}return b},startsWith:function(b,a,d){var c=e(b,a);if(c){if(d){b=b.toLowerCase();a=a.toLowerCase()}c=b.lastIndexOf(a,0)===0}return c},endsWith:function(b,a,d){var c=e(b,a);if(c){if(d){b=b.toLowerCase();a=a.toLowerCase()}c=b.indexOf(a,b.length-a.length)!==-1}return c},createVarName:function(a){return a.replace(l,'')},htmlEncode:function(a){return !a?a:String(a).replace(b,h)},htmlDecode:function(a){return !a?a:String(a).replace(d,g)},hasHtmlCharacters:function(a){return b.test(a)},addCharacterEntities:function(g){var i=[],h=[],e,f;for(e in g){f=g[e];a[e]=f;c[f]=e;i.push(f);h.push(e)}b=new RegExp('('+i.join('|')+')','g');d=new RegExp('('+h.join('|')+'|&#[0-9]{1,5};)','g')},resetCharacterEntities:function(){c={};a={};this.addCharacterEntities({'&amp;':'&','&gt;':'>','&lt;':'<','&quot;':'"','&#39;':"'"})},urlAppend:function(a,b){if(!Ext.isEmpty(b)){return a+(a.indexOf('?')===-1?'?':'&')+b}return a},trim:function(a){if(a){a=a.replace(m,'')}return a||''},capitalize:function(a){if(a){a=a.charAt(0).toUpperCase()+a.substr(1)}return a||''},uncapitalize:function(a){if(a){a=a.charAt(0).toLowerCase()+a.substr(1)}return a||''},ellipsis:function(a,c,e){if(a&&a.length>c){if(e){var b=a.substr(0,c-2),d=Math.max(b.lastIndexOf(' '),b.lastIndexOf('.'),b.lastIndexOf('!'),b.lastIndexOf('?'));if(d!==-1&&d>=c-15){return b.substr(0,d)+'...'}}return a.substr(0,c-3)+'...'}return a},escapeRegex:function(a){return a.replace(i,'\\$1')},createRegex:function(b,d,e,c){var a=b;if(b!=null&&!b.exec){a=f.escapeRegex(String(b));if(d!==!1){a='^'+a}if(e!==!1){a+='$'}a=new RegExp(a,c!==!1?'i':'')}return a},escape:function(a){return a.replace(n,'\\$1')},toggle:function(b,a,c){return b===a?c:a},leftPad:function(c,d,b){var a=String(c);b=b||' ';while(a.length<d){a=b+a}return a},repeat:function(c,a,d){if(a<1){a=0}for(var b=[],e=a;e--;){b.push(c)}return b.join(d||'')},splitWords:function(a){if(a&&typeof a=='string'){return a.replace(k,'').split(j)}return a||[]}}}();Ext.String.resetCharacterEntities();Ext.htmlEncode=Ext.String.htmlEncode;Ext.htmlDecode=Ext.String.htmlDecode;Ext.urlAppend=Ext.String.urlAppend;Ext.Date=function(){var a,b=Date,d=/(\\.)/g,h=/([gGhHisucUOPZ]|MS)/,g=/([djzmnYycU]|MS)/,i=/\\/gi,e=/\{(\d+)\}/g,f=new RegExp('\\/Date\\(([-+])?(\\d+)(?:[+-]\\d{4})?\\)\\/'),c=Ext.String.leftPad,j=['var me = this, dt, y, m, d, h, i, s, ms, o, O, z, zz, u, v, W, year, jan4, week1monday, daysInMonth, dayMatched,','def = me.defaults,','from = Ext.Number.from,','results = String(input).match(me.parseRegexes[{0}]);','if(results){','{1}','if(u != null){','v = new Date(u * 1000);','}else{','dt = me.clearTime(new Date);','y = from(y, from(def.y, dt.getFullYear()));','m = from(m, from(def.m - 1, dt.getMonth()));','dayMatched = d !== undefined;','d = from(d, from(def.d, dt.getDate()));','if (!dayMatched) {','dt.setDate(1);','dt.setMonth(m);','dt.setFullYear(y);','daysInMonth = me.getDaysInMonth(dt);','if (d > daysInMonth) {','d = daysInMonth;','}','}','h  = from(h, from(def.h, dt.getHours()));','i  = from(i, from(def.i, dt.getMinutes()));','s  = from(s, from(def.s, dt.getSeconds()));','ms = from(ms, from(def.ms, dt.getMilliseconds()));','if(z >= 0 && y >= 0){','v = me.add(new Date(y < 100 ? 100 : y, 0, 1, h, i, s, ms), me.YEAR, y < 100 ? y - 100 : 0);','v = !strict? v : (strict === true && (z <= 364 || (me.isLeapYear(v) && z <= 365))? me.add(v, me.DAY, z) : null);','}else if(strict === true && !me.isValid(y, m + 1, d, h, i, s, ms)){','v = null;','}else{','if (W) {','year = y || (new Date()).getFullYear();','jan4 = new Date(year, 0, 4, 0, 0, 0);','d = jan4.getDay();','week1monday = new Date(jan4.getTime() - ((d === 0 ? 6 : d - 1) * 86400000));','v = Ext.Date.clearTime(new Date(week1monday.getTime() + ((W - 1) * 604800000 + 43200000)));','} else {','v = me.add(new Date(y < 100 ? 100 : y, m, d, h, i, s, ms), me.YEAR, y < 100 ? y - 100 : 0);','}','}','}','}','if(v){','if(zz != null){','v = me.add(v, me.SECOND, -v.getTimezoneOffset() * 60 - zz);','}else if(o){',"v = me.add(v, me.MINUTE, -v.getTimezoneOffset() + (sn == '+'? -1 : 1) * (hr * 60 + mn));",'}','}','return (v != null) ? v : null;'].join('\n');if(!Date.prototype.toISOString){Date.prototype.toISOString=function(){var a=this;return c(a.getUTCFullYear(),4,'0')+'-'+c(a.getUTCMonth()+1,2,'0')+'-'+c(a.getUTCDate(),2,'0')+'T'+c(a.getUTCHours(),2,'0')+':'+c(a.getUTCMinutes(),2,'0')+':'+c(a.getUTCSeconds(),2,'0')+'.'+c(a.getUTCMilliseconds(),3,'0')+'Z'}}function xf(a){var b=Array.prototype.slice.call(arguments,1);return a.replace(e,function(d,c){return b[c]})}return a={now:b.now,toString:function(a){if(!a){a=new b()}return a.getFullYear()+'-'+c(a.getMonth()+1,2,'0')+'-'+c(a.getDate(),2,'0')+'T'+c(a.getHours(),2,'0')+':'+c(a.getMinutes(),2,'0')+':'+c(a.getSeconds(),2,'0')},getElapsed:function(b,c){return Math.abs(b-(c||a.now()))},useStrict:!1,formatCodeToRegex:function(c,d){var b=a.parseCodes[c];if(b){b=typeof b==='function'?b():b;a.parseCodes[c]=b}return b?Ext.applyIf({c:b.c?xf(b.c,d||'{0}'):b.c},b):{g:0,c:null,s:Ext.String.escapeRegex(c)}},parseFunctions:{'MS':function(c,d){var a=(c||'').match(f);return a?new b(((a[1]||'')+a[2])*1):null},'time':function(c,d){var a=parseInt(c,10);if(a||a===0){return new b(a)}return null},'timestamp':function(c,d){var a=parseInt(c,10);if(a||a===0){return new b(a*1000)}return null}},parseRegexes:[],formatFunctions:{'MS':function(){return '\\/Date('+this.getTime()+')\\/'},'time':function(){return this.getTime().toString()},'timestamp':function(){return a.format(this,'U')}},y2kYear:50,MILLI:'ms',SECOND:'s',MINUTE:'mi',HOUR:'h',DAY:'d',MONTH:'mo',YEAR:'y',defaults:{},dayNames:['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],monthNames:['January','February','March','April','May','June','July','August','September','October','November','December'],monthNumbers:{January:0,Jan:0,February:1,Feb:1,March:2,Mar:2,April:3,Apr:3,May:4,June:5,Jun:5,July:6,Jul:6,August:7,Aug:7,September:8,Sep:8,October:9,Oct:9,November:10,Nov:10,December:11,Dec:11},defaultFormat:'m/d/Y',getShortMonthName:function(b){return a.monthNames[b].substring(0,3)},getShortDayName:function(b){return a.dayNames[b].substring(0,3)},getMonthNumber:function(b){return a.monthNumbers[b.substring(0,1).toUpperCase()+b.substring(1,3).toLowerCase()]},formatContainsHourInfo:function(a){return h.test(a.replace(d,''))},formatContainsDateInfo:function(a){return g.test(a.replace(d,''))},unescapeFormat:function(a){return a.replace(i,'')},formatCodes:{d:"Ext.String.leftPad(m.getDate(), 2, '0')",D:'Ext.Date.getShortDayName(m.getDay())',j:'m.getDate()',l:'Ext.Date.dayNames[m.getDay()]',N:'(m.getDay() ? m.getDay() : 7)',S:'Ext.Date.getSuffix(m)',w:'m.getDay()',z:'Ext.Date.getDayOfYear(m)',W:"Ext.String.leftPad(Ext.Date.getWeekOfYear(m), 2, '0')",F:'Ext.Date.monthNames[m.getMonth()]',m:"Ext.String.leftPad(m.getMonth() + 1, 2, '0')",M:'Ext.Date.getShortMonthName(m.getMonth())',n:'(m.getMonth() + 1)',t:'Ext.Date.getDaysInMonth(m)',L:'(Ext.Date.isLeapYear(m) ? 1 : 0)',o:'(m.getFullYear() + (Ext.Date.getWeekOfYear(m) == 1 && m.getMonth() > 0 ? +1 : (Ext.Date.getWeekOfYear(m) >= 52 && m.getMonth() < 11 ? -1 : 0)))',Y:"Ext.String.leftPad(m.getFullYear(), 4, '0')",y:"('' + m.getFullYear()).substring(2, 4)",a:"(m.getHours() < 12 ? 'am' : 'pm')",A:"(m.getHours() < 12 ? 'AM' : 'PM')",g:'((m.getHours() % 12) ? m.getHours() % 12 : 12)',G:'m.getHours()',h:"Ext.String.leftPad((m.getHours() % 12) ? m.getHours() % 12 : 12, 2, '0')",H:"Ext.String.leftPad(m.getHours(), 2, '0')",i:"Ext.String.leftPad(m.getMinutes(), 2, '0')",s:"Ext.String.leftPad(m.getSeconds(), 2, '0')",u:"Ext.String.leftPad(m.getMilliseconds(), 3, '0')",O:'Ext.Date.getGMTOffset(m)',P:'Ext.Date.getGMTOffset(m, true)',T:'Ext.Date.getTimezone(m)',Z:'(m.getTimezoneOffset() * -60)',c:function(){var e='Y-m-dTH:i:sP',d=[],b,f=e.length,c;for(b=0;b<f;++b){c=e.charAt(b);d.push(c==='T'?"'T'":a.getFormatCode(c))}return d.join(' + ')},C:function(){return 'm.toISOString()'},U:'Math.round(m.getTime() / 1000)'},isValid:function(d,i,j,h,f,g,e){h=h||0;f=f||0;g=g||0;e=e||0;var c=a.add(new b(d<100?100:d,i-1,j,h,f,g,e),a.YEAR,d<100?d-100:0);return d===c.getFullYear()&&i===c.getMonth()+1&&j===c.getDate()&&h===c.getHours()&&f===c.getMinutes()&&g===c.getSeconds()&&e===c.getMilliseconds()},parse:function(e,b,c){var d=a.parseFunctions;if(d[b]==null){a.createParser(b)}return d[b].call(a,e,Ext.isDefined(c)?c:a.useStrict)},parseDate:function(d,b,c){return a.parse(d,b,c)},getFormatCode:function(c){var b=a.formatCodes[c];if(b){b=typeof b==='function'?b():b;a.formatCodes[c]=b}return b||"'"+Ext.String.escape(c)+"'"},createFormat:function(f){var d=[],c=!1,b='',e;for(e=0;e<f.length;++e){b=f.charAt(e);if(!c&&b==='\\'){c=!0}else {if(c){c=!1;d.push("'"+Ext.String.escape(b)+"'")}else {if(b==='\n'){d.push("'\\n'")}else {d.push(a.getFormatCode(b))}}}}a.formatFunctions[f]=Ext.functionFactory('var m=this;return '+d.join('+'))},createParser:function(f){var k=a.parseRegexes.length,i=1,d=[],g=[],c=!1,e='',h=0,m=f.length,l=[],b;for(;h<m;++h){e=f.charAt(h);if(!c&&e==='\\'){c=!0}else {if(c){c=!1;g.push(Ext.String.escape(e))}else {b=a.formatCodeToRegex(e,i);i+=b.g;g.push(b.s);if(b.g&&b.c){if(b.calcAtEnd){l.push(b.c)}else {d.push(b.c)}}}}}d=d.concat(l);a.parseRegexes[k]=new RegExp('^'+g.join('')+'$','i');a.parseFunctions[f]=Ext.functionFactory('input','strict',xf(j,k,d.join('')))},parseCodes:{d:{g:1,c:'d = parseInt(results[{0}], 10);\n',s:'(3[0-1]|[1-2][0-9]|0[1-9])'},j:{g:1,c:'d = parseInt(results[{0}], 10);\n',s:'(3[0-1]|[1-2][0-9]|[1-9])'},D:function(){for(var c=[],b=0;b<7;c.push(a.getShortDayName(b)),++b){}return {g:0,c:null,s:'(?:'+c.join('|')+')'}},l:function(){return {g:0,c:null,s:'(?:'+a.dayNames.join('|')+')'}},N:{g:0,c:null,s:'[1-7]'},S:{g:0,c:null,s:'(?:st|nd|rd|th)'},w:{g:0,c:null,s:'[0-6]'},z:{g:1,c:'z = parseInt(results[{0}], 10);\n',s:'(\\d{1,3})'},W:{g:1,c:'W = parseInt(results[{0}], 10);\n',s:'(\\d{2})'},F:function(){return {g:1,c:'m = parseInt(me.getMonthNumber(results[{0}]), 10);\n',s:'('+a.monthNames.join('|')+')'}},M:function(){for(var c=[],b=0;b<12;c.push(a.getShortMonthName(b)),++b){}return Ext.applyIf({s:'('+c.join('|')+')'},a.formatCodeToRegex('F'))},m:{g:1,c:'m = parseInt(results[{0}], 10) - 1;\n',s:'(1[0-2]|0[1-9])'},n:{g:1,c:'m = parseInt(results[{0}], 10) - 1;\n',s:'(1[0-2]|[1-9])'},t:{g:0,c:null,s:'(?:\\d{2})'},L:{g:0,c:null,s:'(?:1|0)'},o:{g:1,c:'y = parseInt(results[{0}], 10);\n',s:'(\\d{4})'},Y:{g:1,c:'y = parseInt(results[{0}], 10);\n',s:'(\\d{4})'},y:{g:1,c:'var ty = parseInt(results[{0}], 10);\ny = ty > me.y2kYear ? 1900 + ty : 2000 + ty;\n',s:'(\\d{2})'},a:{g:1,c:'if (/(am)/i.test(results[{0}])) {\nif (!h || h == 12) { h = 0; }\n} else { if (!h || h < 12) { h = (h || 0) + 12; }}',s:'(am|pm|AM|PM)',calcAtEnd:!0},A:{g:1,c:'if (/(am)/i.test(results[{0}])) {\nif (!h || h == 12) { h = 0; }\n} else { if (!h || h < 12) { h = (h || 0) + 12; }}',s:'(AM|PM|am|pm)',calcAtEnd:!0},g:{g:1,c:'h = parseInt(results[{0}], 10);\n',s:'(1[0-2]|[0-9])'},G:{g:1,c:'h = parseInt(results[{0}], 10);\n',s:'(2[0-3]|1[0-9]|[0-9])'},h:{g:1,c:'h = parseInt(results[{0}], 10);\n',s:'(1[0-2]|0[1-9])'},H:{g:1,c:'h = parseInt(results[{0}], 10);\n',s:'(2[0-3]|[0-1][0-9])'},i:{g:1,c:'i = parseInt(results[{0}], 10);\n',s:'([0-5][0-9])'},s:{g:1,c:'s = parseInt(results[{0}], 10);\n',s:'([0-5][0-9])'},u:{g:1,c:'ms = results[{0}]; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n',s:'(\\d+)'},O:{g:1,c:['o = results[{0}];','var sn = o.substring(0,1),','hr = o.substring(1,3)*1 + Math.floor(o.substring(3,5) / 60),','mn = o.substring(3,5) % 60;',"o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + Ext.String.leftPad(hr, 2, '0') + Ext.String.leftPad(mn, 2, '0')) : null;\n"].join('\n'),s:'([+-]\\d{4})'},P:{g:1,c:['o = results[{0}];','var sn = o.substring(0,1),','hr = o.substring(1,3)*1 + Math.floor(o.substring(4,6) / 60),','mn = o.substring(4,6) % 60;',"o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + Ext.String.leftPad(hr, 2, '0') + Ext.String.leftPad(mn, 2, '0')) : null;\n"].join('\n'),s:'([+-]\\d{2}:\\d{2})'},T:{g:0,c:null,s:'[A-Z]{1,5}'},Z:{g:1,c:'zz = results[{0}] * 1;\nzz = (-43200 <= zz && zz <= 50400)? zz : null;\n',s:'([+-]?\\d{1,5})'},c:function(){var d=[],b=[a.formatCodeToRegex('Y',1),a.formatCodeToRegex('m',2),a.formatCodeToRegex('d',3),a.formatCodeToRegex('H',4),a.formatCodeToRegex('i',5),a.formatCodeToRegex('s',6),{c:"ms = results[7] || '0'; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n"},{c:['if(results[8]) {',"if(results[8] == 'Z'){",'zz = 0;',"}else if (results[8].indexOf(':') > -1){",a.formatCodeToRegex('P',8).c,'}else{',a.formatCodeToRegex('O',8).c,'}','}'].join('\n')}],c,e;for(c=0,e=b.length;c<e;++c){d.push(b[c].c)}return {g:1,c:d.join(''),s:[b[0].s,'(?:','-',b[1].s,'(?:','-',b[2].s,'(?:','(?:T| )?',b[3].s,':',b[4].s,'(?::',b[5].s,')?','(?:(?:\\.|,)(\\d+))?','(Z|(?:[-+]\\d{2}(?::)?\\d{2}))?',')?',')?',')?'].join('')}},U:{g:1,c:'u = parseInt(results[{0}], 10);\n',s:'(-?\\d+)'}},dateFormat:function(c,b){return a.format(c,b)},isEqual:function(a,b){if(a&&b){return a.getTime()===b.getTime()}return !(a||b)},format:function(d,b){var c=a.formatFunctions;if(!Ext.isDate(d)){return ''}if(c[b]==null){a.createFormat(b)}return c[b].call(d)+''},getTimezone:function(a){return a.toString().replace(/^.* (?:\((.*)\)|([A-Z]{1,5})(?:[\-+][0-9]{4})?(?: -?\d+)?)$/,'$1$2').replace(/[^A-Z]/g,'')},getGMTOffset:function(c,b){var a=c.getTimezoneOffset();return (a>0?'-':'+')+Ext.String.leftPad(Math.floor(Math.abs(a)/60),2,'0')+(b?':':'')+Ext.String.leftPad(Math.abs(a%60),2,'0')},getDayOfYear:function(c){var e=0,b=a.clone(c),f=c.getMonth(),d;for(d=0,b.setDate(1),b.setMonth(0);d<f;b.setMonth(++d)){e+=a.getDaysInMonth(b)}return e+c.getDate()-1},getWeekOfYear:function(){var a=86400000,c=7*a;return function(d){var f=b.UTC(d.getFullYear(),d.getMonth(),d.getDate()+3)/a,e=Math.floor(f/7),g=(new b(e*c)).getUTCFullYear();return e-Math.floor(b.UTC(g,0,7)/c)+1}}(),isLeapYear:function(b){var a=b.getFullYear();return !!((a&3)===0&&(a%100||a%400===0&&a))},getFirstDayOfMonth:function(b){var a=(b.getDay()-(b.getDate()-1))%7;return a<0?a+7:a},getLastDayOfMonth:function(b){return a.getLastDateOfMonth(b).getDay()},getFirstDateOfMonth:function(a){return new b(a.getFullYear(),a.getMonth(),1)},getLastDateOfMonth:function(c){return new b(c.getFullYear(),c.getMonth(),a.getDaysInMonth(c))},getDaysInMonth:function(){var b=[31,28,31,30,31,30,31,31,30,31,30,31];return function(c){var d=c.getMonth();return d===1&&a.isLeapYear(c)?29:b[d]}}(),getSuffix:function(a){switch(a.getDate()){case 1:case 21:case 31:return 'st';case 2:case 22:return 'nd';case 3:case 23:return 'rd';default:return 'th';}},clone:function(a){return new b(a.getTime())},isDST:function(a){return (new b(a.getFullYear(),0,1)).getTimezoneOffset()!==a.getTimezoneOffset()},clearTime:function(b,f){if(isNaN(b.getTime())){return b}if(f){return a.clearTime(a.clone(b))}var e=b.getDate(),c,d;b.setHours(0);b.setMinutes(0);b.setSeconds(0);b.setMilliseconds(0);if(b.getDate()!==e){for(c=1,d=a.add(b,a.HOUR,c);d.getDate()!==e;c++,d=a.add(b,a.HOUR,c)){}b.setDate(e);b.setHours(d.getHours())}return b},add:function(f,h,c){var b=a.clone(f),d,g,e=0;if(!h||c===0){return b}g=c-parseInt(c,10);c=parseInt(c,10);if(c){switch(h.toLowerCase()){case a.MILLI:b.setTime(b.getTime()+c);break;case a.SECOND:b.setTime(b.getTime()+c*1000);break;case a.MINUTE:b.setTime(b.getTime()+c*60*1000);break;case a.HOUR:b.setTime(b.getTime()+c*60*60*1000);break;case a.DAY:b.setDate(b.getDate()+c);break;case a.MONTH:d=f.getDate();if(d>28){d=Math.min(d,a.getLastDateOfMonth(a.add(a.getFirstDateOfMonth(f),a.MONTH,c)).getDate())};b.setDate(d);b.setMonth(f.getMonth()+c);break;case a.YEAR:d=f.getDate();if(d>28){d=Math.min(d,a.getLastDateOfMonth(a.add(a.getFirstDateOfMonth(f),a.YEAR,c)).getDate())};b.setDate(d);b.setFullYear(f.getFullYear()+c);break;}}if(g){switch(h.toLowerCase()){case a.MILLI:e=1;break;case a.SECOND:e=1000;break;case a.MINUTE:e=1000*60;break;case a.HOUR:e=1000*60*60;break;case a.DAY:e=1000*60*60*24;break;case a.MONTH:d=a.getDaysInMonth(b);e=1000*60*60*24*d;break;case a.YEAR:d=a.isLeapYear(b)?366:365;e=1000*60*60*24*d;break;}if(e){b.setTime(b.getTime()+e*g)}}return b},subtract:function(d,b,c){return a.add(d,b,-c)},between:function(c,b,d){var a=c.getTime();return b.getTime()<=a&&a<=d.getTime()},compat:function(){var c,g=['useStrict','formatCodeToRegex','parseFunctions','parseRegexes','formatFunctions','y2kYear','MILLI','SECOND','MINUTE','HOUR','DAY','MONTH','YEAR','defaults','dayNames','monthNames','monthNumbers','getShortMonthName','getShortDayName','getMonthNumber','formatCodes','isValid','parseDate','getFormatCode','createFormat','createParser','parseCodes'],h=['dateFormat','format','getTimezone','getGMTOffset','getDayOfYear','getWeekOfYear','isLeapYear','getFirstDayOfMonth','getLastDayOfMonth','getDaysInMonth','getSuffix','clone','isDST','clearTime','add','between'],j=g.length,i=h.length,f,e,d;for(d=0;d<j;d++){f=g[d];b[f]=a[f]}for(c=0;c<i;c++){e=h[c];b.prototype[e]=function(){var b=Array.prototype.slice.call(arguments);b.unshift(this);return a[e].apply(a,b)}}},diff:function(e,d,f){var b,c=+d-e;switch(f){case a.MILLI:return c;case a.SECOND:return Math.floor(c/1000);case a.MINUTE:return Math.floor(c/60000);case a.HOUR:return Math.floor(c/3600000);case a.DAY:return Math.floor(c/86400000);case 'w':return Math.floor(c/604800000);case a.MONTH:b=d.getFullYear()*12+d.getMonth()-(e.getFullYear()*12+e.getMonth());if(a.add(e,f,b)>d){return b-1};return b;case a.YEAR:b=d.getFullYear()-e.getFullYear();if(a.add(e,f,b)>d){return b-1}else {return b};}},align:function(e,f,d){var c=new b(+e);switch(f.toLowerCase()){case a.MILLI:return c;case a.SECOND:c.setUTCSeconds(c.getUTCSeconds()-c.getUTCSeconds()%d);c.setUTCMilliseconds(0);return c;case a.MINUTE:c.setUTCMinutes(c.getUTCMinutes()-c.getUTCMinutes()%d);c.setUTCSeconds(0);c.setUTCMilliseconds(0);return c;case a.HOUR:c.setUTCHours(c.getUTCHours()-c.getUTCHours()%d);c.setUTCMinutes(0);c.setUTCSeconds(0);c.setUTCMilliseconds(0);return c;case a.DAY:if(d===7||d===14){c.setUTCDate(c.getUTCDate()-c.getUTCDay()+1)};c.setUTCHours(0);c.setUTCMinutes(0);c.setUTCSeconds(0);c.setUTCMilliseconds(0);return c;case a.MONTH:c.setUTCMonth(c.getUTCMonth()-(c.getUTCMonth()-1)%d,1);c.setUTCHours(0);c.setUTCMinutes(0);c.setUTCSeconds(0);c.setUTCMilliseconds(0);return c;case a.YEAR:c.setUTCFullYear(c.getUTCFullYear()-c.getUTCFullYear()%d,1,1);c.setUTCHours(0);c.setUTCMinutes(0);c.setUTCSeconds(0);c.setUTCMilliseconds(0);return e;}}}}();Ext.Function=function(){var i=0,f,c=[],l=[],m=0,e={},d=window,b=Ext.global,h=!!(b.setImmediate&&b.clearImmediate),k=d.requestAnimationFrame||d.webkitRequestAnimationFrame||d.mozRequestAnimationFrame||d.oRequestAnimationFrame||function(c){var b=Ext.now(),a=Math.max(0,16-(b-i)),e=d.setTimeout(function(){c(b+a)},a);i=b+a;return e},g=function(){var h=c.length,g,d,a;f=null;for(d=0;d<h;d++){a=c[d];g=a[3];if(e[g]){a[0].apply(a[1]||b,a[2]||l);delete e[g]}}c=c.slice(h)},j=function(){Ext.elevateFunction(g)},a={flexSetter:function(a){return function(b,e){var c,d;if(b!==null){if(typeof b!=='string'){for(c in b){if(b.hasOwnProperty(c)){a.call(this,c,b[c])}}if(Ext.enumerables){for(d=Ext.enumerables.length;d--;){c=Ext.enumerables[d];if(b.hasOwnProperty(c)){a.call(this,c,b[c])}}}}else {a.call(this,b,e)}}return this}},bind:function(f,d,c,a){if(arguments.length===2){return function(){return f.apply(d,arguments)}}var g=f,e=Array.prototype.slice;return function(){var h=c||arguments;if(a===!0){h=e.call(arguments,0);h=h.concat(c)}else {if(typeof a==='number'){h=e.call(arguments,0);Ext.Array.insert(h,a,c)}}return g.apply(d||b,h)}},bindCallback:function(b,e,a,d,c){return function(){var f=Ext.Array.slice(arguments);return Ext.callback(b,e,a?a.concat(f):f,d,c)}},pass:function(c,a,b){if(!Ext.isArray(a)){if(Ext.isIterable(a)){a=Ext.Array.clone(a)}else {a=a!==undefined?[a]:[]}}return function(){var d=a.slice();d.push.apply(d,arguments);return c.apply(b||this,d)}},alias:function(a,b){return function(){return a[b].apply(a,arguments)}},clone:function(a){return function(){return a.apply(this,arguments)}},createInterceptor:function(c,d,e,a){if(!Ext.isFunction(d)){return c}else {a=Ext.isDefined(a)?a:null;return function(){var g=this,f=arguments;return d.apply(e||g||b,f)!==!1?c.apply(g||b,f):a}}},createDelayed:function(a,e,b,c,d){if(b||c){a=Ext.Function.bind(a,b,c,d)}return function(){var g=this,f=Array.prototype.slice.call(arguments);setTimeout(function(){if(Ext.elevateFunction){Ext.elevateFunction(a,g,f)}else {a.apply(g,f)}},e)}},defer:function(a,b,d,e,c){a=Ext.Function.bind(a,d,e,c);if(b>0){return setTimeout(function(){if(Ext.elevateFunction){Ext.elevateFunction(a)}else {a()}},b)}a();return 0},interval:function(a,c,d,e,b){a=Ext.Function.bind(a,d,e,b);return setInterval(function(){if(Ext.elevateFunction){Ext.elevateFunction(a)}else {a()}},c)},createSequence:function(a,b,c){if(!b){return a}else {return function(){var d=a.apply(this,arguments);b.apply(c||this,arguments);return d}}},createBuffered:function(b,c,d,e){var a;return function(){var f=e||Array.prototype.slice.call(arguments,0),g=d||this;if(a){clearTimeout(a)}a=setTimeout(function(){if(Ext.elevateFunction){Ext.elevateFunction(b,g,f)}else {b.apply(g,f)}},c)}},createAnimationFrame:function(f,d,e,c){var b;c=c||3;return function(){var g=e||Array.prototype.slice.call(arguments,0);d=d||this;if(c===3&&b){a.cancelAnimationFrame(b)}if(c&1||!b){b=a.requestAnimationFrame(function(){b=null;f.apply(d,g)})}}},requestAnimationFrame:function(i,d,h){var a=++m,b=Array.prototype.slice.call(arguments,0);b[3]=a;e[a]=1;c.push(b);if(!f){f=k(Ext.elevateFunction?j:g)}return a},cancelAnimationFrame:function(a){delete e[a]},createThrottled:function(h,f,a){var e=0,d,c,b,g=function(){if(Ext.elevateFunction){Ext.elevateFunction(h,a,c)}else {h.apply(a,c)}e=Ext.now();b=null};return function(){if(!a){a=this}d=Ext.now()-e;c=arguments;if(d>=f){clearTimeout(b);g()}else {if(!b){b=Ext.defer(g,f-d)}}}},createBarrier:function(a,c,b){return function(){if(!--a){c.apply(b,arguments)}}},interceptBefore:function(b,a,e,d){var c=b[a]||Ext.emptyFn;return b[a]=function(){var f=e.apply(d||this,arguments);c.apply(this,arguments);return f}},interceptAfter:function(b,a,e,d){var c=b[a]||Ext.emptyFn;return b[a]=function(){c.apply(this,arguments);return e.apply(d||this,arguments)}},makeCallback:function(b,a){return function(){return a[b].apply(a,arguments)}},memoize:function(e,c,a){var b={},d=a&&Ext.isFunction(a);return function(g){var f=d?a.apply(c,arguments):g;if(!(f in b)){b[f]=e.apply(c,arguments)}return b[f]}}};Ext.asap=h?function(b,d,c){if(d!=null||c!=null){b=a.bind(b,d,c)}return setImmediate(function(){if(Ext.elevateFunction){Ext.elevateFunction(b)}else {b()}})}:function(b,d,c){if(d!=null||c!=null){b=a.bind(b,d,c)}return setTimeout(function(){if(Ext.elevateFunction){Ext.elevateFunction(b)}else {b()}},0,!0)},Ext.asapCancel=h?function(a){clearImmediate(a)}:function(a){clearTimeout(a)};Ext.defer=a.defer;Ext.interval=a.interval;Ext.pass=a.pass;Ext.bind=a.bind;Ext.deferCallback=a.requestAnimationFrame;return a}();Ext.Number=new function(){var b=this,d=(0.9).toFixed()!=='1',c=Math,a={count:!1,inclusive:!1,wrap:!0};Ext.apply(b,{Clip:{DEFAULT:a,COUNT:Ext.applyIf({count:!0},a),INCLUSIVE:Ext.applyIf({inclusive:!0},a),NOWRAP:Ext.applyIf({wrap:!1},a)},clipIndices:function(d,c,f){f=f||a;var h=0,i=f.wrap,g,b,e;c=c||[];for(e=0;e<2;++e){g=b;b=c[e];if(b==null){b=h}else {if(e&&f.count){b+=g;b=b>d?d:b}else {if(i){b=b<0?d+b:b}if(e&&f.inclusive){++b}b=b<0?0:b>d?d:b}}h=d}c[0]=g;c[1]=b<g?g:b;return c},constrain:function(c,b,a){var d=parseFloat(c);if(b===null){b=c}if(a===null){a=c}return d<b?b:d>a?a:d},snap:function(a,c,e,f){var d;if(a===undefined||a<e){return e||0}if(c){d=a%c;if(d!==0){a-=d;if(d*2>=c){a+=c}else {if(d*2<-c){a-=c}}}}return b.constrain(a,e,f)},snapInRange:function(a,d,c,e){var f;c=c||0;if(a===undefined||a<c){return c}if(d&&(f=(a-c)%d)){a-=f;f*=2;if(f>=d){a+=d}}if(e!==undefined){if(a>(e=b.snapInRange(e,d,c))){a=e}}return a},sign:function(a){a=+a;if(a===0||isNaN(a)){return a}return a>0?1:-1},log10:Math.log10||function(a){return Math.log(a)*Math.LOG10E},isEqual:function(b,c,a){return Math.abs(b-c)<a},toFixed:d?function(d,a){a=a||0;var b=c.pow(10,a);return (c.round(d*b)/b).toFixed(a)}:function(b,a){return b.toFixed(a)},from:function(a,b){if(isFinite(a)){a=parseFloat(a)}return !isNaN(a)?a:b},randomInt:function(a,b){return c.floor(c.random()*(b-a+1)+a)},correctFloat:function(a){return parseFloat(a.toPrecision(14))}});Ext.num=function(){return b.from.apply(this,arguments)}}();(function(){var b=function(){},d=/^\?/,f=/(\[):?([^\]]*)\]/g,e=/^([^\[]+)/,c=/\+/g,a=Ext.Object={chain:Object.create||function(a){b.prototype=a;var c=new b();b.prototype=null;return c},clear:function(a){for(var b in a){delete a[b]}return a},freeze:Object.freeze?function(b,c){if(b&&typeof b==='object'&&!Object.isFrozen(b)){Object.freeze(b);if(c){for(var d in b){a.freeze(b[d],c)}}}return b}:Ext.identityFn,toQueryObjects:function(e,c,f){var g=a.toQueryObjects,d=[],b,h;if(Ext.isArray(c)){for(b=0,h=c.length;b<h;b++){if(f){d=d.concat(g(e+'['+b+']',c[b],!0))}else {d.push({name:e,value:c[b]})}}}else {if(Ext.isObject(c)){for(b in c){if(c.hasOwnProperty(b)){if(f){d=d.concat(g(e+'['+b+']',c[b],!0))}else {d.push({name:e,value:c[b]})}}}}else {d.push({name:e,value:c})}}return d},toQueryString:function(g,j){var c=[],h=[],d,e,i,f,b;for(d in g){if(g.hasOwnProperty(d)){c=c.concat(a.toQueryObjects(d,g[d],j))}}for(e=0,i=c.length;e<i;e++){f=c[e];b=f.value;if(Ext.isEmpty(b)){b=''}else {if(Ext.isDate(b)){b=Ext.Date.toString(b)}}h.push(encodeURIComponent(f.name)+'='+encodeURIComponent(String(b)))}return h.join('&')},fromQueryString:function(u,v){var s=u.replace(d,'').split('&'),i={},j,o,a,g,n,t,q,h,l,m,r,k,b,p;for(n=0,t=s.length;n<t;n++){q=s[n];if(q.length>0){o=q.split('=');a=o[0];a=a.replace(c,'%20');a=decodeURIComponent(a);g=o[1];if(g!==undefined){g=g.replace(c,'%20');g=decodeURIComponent(g)}else {g=''}if(!v){if(i.hasOwnProperty(a)){if(!Ext.isArray(i[a])){i[a]=[i[a]]}i[a].push(g)}else {i[a]=g}}else {m=a.match(f);r=a.match(e);a=r[0];k=[];if(m===null){i[a]=g;continue}for(h=0,l=m.length;h<l;h++){b=m[h];b=b.length===2?'':b.substring(1,b.length-1);k.push(b)}k.unshift(a);j=i;for(h=0,l=k.length;h<l;h++){b=k[h];if(h===l-1){if(Ext.isArray(j)&&b===''){j.push(g)}else {j[b]=g}}else {if(j[b]===undefined||typeof j[b]==='string'){p=k[h+1];j[b]=Ext.isNumeric(p)||p===''?[]:{}}j=j[b]}}}}}return i},each:function(a,f,c){var d=Ext.enumerables,e,b;if(a){c=c||a;for(b in a){if(a.hasOwnProperty(b)){if(f.call(c,b,a[b],a)===!1){return}}}if(d){for(e=d.length;e--;){if(a.hasOwnProperty(b=d[e])){if(f.call(c,b,a[b],a)===!1){return}}}}}},eachValue:function(a,f,c){var d=Ext.enumerables,e,b;c=c||a;for(b in a){if(a.hasOwnProperty(b)){if(f.call(c,a[b])===!1){return}}}if(d){for(e=d.length;e--;){if(a.hasOwnProperty(b=d[e])){if(f.call(c,a[b])===!1){return}}}}},merge:function(d){var g=1,j=arguments.length,i=a.merge,h=Ext.clone,f,c,b,e;for(;g<j;g++){f=arguments[g];for(c in f){b=f[c];if(b&&b.constructor===Object){e=d[c];if(e&&e.constructor===Object){i(e,b)}else {d[c]=h(b)}}else {d[c]=b}}}return d},mergeIf:function(c){var e=1,g=arguments.length,f=Ext.clone,d,b,a;for(;e<g;e++){d=arguments[e];for(b in d){if(!(b in c)){a=d[b];if(a&&a.constructor===Object){c[b]=f(a)}else {c[b]=a}}}}return c},getAllKeys:function(c){var b=[],a;for(a in c){b.push(a)}return b},getKey:function(b,c){for(var a in b){if(b.hasOwnProperty(a)&&b[a]===c){return a}}return null},getValues:function(b){var c=[],a;for(a in b){if(b.hasOwnProperty(a)){c.push(b[a])}}return c},getKeys:typeof Object.keys=='function'?function(a){if(!a){return []}return Object.keys(a)}:function(b){var c=[],a;for(a in b){if(b.hasOwnProperty(a)){c.push(a)}}return c},getSize:function(b){var c=0,a;for(a in b){if(b.hasOwnProperty(a)){c++}}return c},isEmpty:function(a){for(var b in a){if(a.hasOwnProperty(b)){return !1}}return !0},equals:function(){var a=function(b,c){var a;for(a in b){if(b.hasOwnProperty(a)){if(b[a]!==c[a]){return !1}}}return !0};return function(b,c){if(b===c){return !0}if(b&&c){return a(b,c)&&a(c,b)}else {if(!b&&!c){return b===c}else {return !1}}}}(),fork:function(c){var d,e,b;if(c&&c.constructor===Object){d=a.chain(c);for(e in c){b=c[e];if(b){if(b.constructor===Object){d[e]=a.fork(b)}else {if(b instanceof Array){d[e]=Ext.Array.clone(b)}}}}}else {d=c}return d},defineProperty:'defineProperty' in Object?Object.defineProperty:function(b,c,a){if(!Object.prototype.__defineGetter__){return}if(a.get){b.__defineGetter__(c,a.get)}if(a.set){b.__defineSetter__(c,a.set)}},classify:function(c){var h=c,e=[],f={},g=function(){var b=0,d=e.length,a;for(;b<d;b++){a=e[b];this[a]=new f[a]()}},b,d;for(b in c){if(c.hasOwnProperty(b)){d=c[b];if(d&&d.constructor===Object){e.push(b);f[b]=a.classify(d)}}}g.prototype=h;return g}};Ext.merge=Ext.Object.merge;Ext.mergeIf=Ext.Object.mergeIf})();Ext.apply(Ext,{_namedScopes:{'this':{isThis:1},controller:{isController:1},self:{isSelf:1},'self.controller':{isSelf:1,isController:1}},escapeId:function(){var c=/^[a-zA-Z_][a-zA-Z0-9_\-]*$/i,e=/([\W]{1})/g,a=/^(\d)/g,d=function(b,a){return '\\'+a},b=function(b,a){return '\\00'+a.charCodeAt(0).toString(16)+' '};return function(f){return c.test(f)?f:f.replace(e,d).replace(a,b)}}(),callback:function(b,a,d,h,c,g){if(!b){return}var f=a in Ext._namedScopes;if(b.charAt){if((!a||f)&&c){a=c.resolveListenerScope(f?a:g)}b=a[b]}else {if(f){a=g||c}else {if(!a){a=c}}}var e;if(b&&Ext.isFunction(b)){a=a||Ext.global;if(h){Ext.defer(b,h,a,d)}else {if(Ext.elevateFunction){e=Ext.elevateFunction(b,a,d)}else {if(d){e=b.apply(a,d)}else {e=b.call(a)}}}}return e},coerce:function(a,e){var d=Ext.typeOf(a),c=Ext.typeOf(e),b=typeof a==='string';if(d!==c){switch(c){case 'string':return String(a);case 'number':return Number(a);case 'boolean':return b&&(!a||a==='false'||a==='0')?!1:Boolean(a);case 'null':return b&&(!a||a==='null')?null:!1;case 'undefined':return b&&(!a||a==='undefined')?undefined:!1;case 'date':return b&&isNaN(a)?Ext.Date.parse(a,Ext.Date.defaultFormat):Date(Number(a));}}return a},copyTo:function(e,d,a,f){if(typeof a==='string'){a=a.split(Ext.propertyNameSplitRe)}for(var b,c=0,g=a?a.length:0;c<g;c++){b=a[c];if(f||d.hasOwnProperty(b)){e[b]=d[b]}}return e},copy:function(e,c,a,f){if(typeof a==='string'){a=a.split(Ext.propertyNameSplitRe)}for(var b,d=0,g=a?a.length:0;d<g;d++){b=a[d];if(c.hasOwnProperty(b)||f&&b in c){e[b]=c[b]}}return e},propertyNameSplitRe:/[,;\s]+/,copyToIf:function(c,e,a){if(typeof a==='string'){a=a.split(Ext.propertyNameSplitRe)}for(var b,d=0,f=a?a.length:0;d<f;d++){b=a[d];if(c[b]===undefined){c[b]=e[b]}}return c},copyIf:function(c,e,a){if(typeof a==='string'){a=a.split(Ext.propertyNameSplitRe)}for(var b,d=0,f=a?a.length:0;d<f;d++){b=a[d];if(!(b in c)&&b in e){c[b]=e[b]}}return c},extend:function(){var a=Object.prototype.constructor,b=function(b){var a;for(a in b){if(!b.hasOwnProperty(a)){continue}this[a]=b[a]}};return function(c,d,g){if(Ext.isObject(d)){g=d;d=c;c=g.constructor!==a?g.constructor:function(){d.apply(this,arguments)}}var h=function(){},e,f=d.prototype;h.prototype=f;e=c.prototype=new h();e.constructor=c;c.superclass=f;if(f.constructor===a){f.constructor=d}c.override=function(a){Ext.override(c,a)};e.override=b;e.proto=e;c.override(g);c.extend=function(a){return Ext.extend(c,a)};return c}}(),iterate:function(a,c,b){if(Ext.isEmpty(a)){return}if(b===undefined){b=a}if(Ext.isIterable(a)){Ext.Array.each.call(Ext.Array,a,c,b)}else {Ext.Object.each.call(Ext.Object,a,c,b)}},_resourcePoolRe:/^[<]([^<>@:]*)(?:[@]([^<>@:]+))?[>](.+)$/,resolveResource:function(b){var c=b,a;if(b&&b.charAt(0)==='<'){a=Ext._resourcePoolRe.exec(b);if(a){c=Ext.getResourcePath(a[3],a[1],a[2])}}return c},urlEncode:function(){var a=Ext.Array.from(arguments),b='';if(Ext.isString(a[1])){b=a[1]+'&';a[1]=!1}return b+Ext.Object.toQueryString.apply(Ext.Object,a)},urlDecode:function(){return Ext.Object.fromQueryString.apply(Ext.Object,arguments)},getScrollbarSize:function(d){var b=Ext._scrollbarSize;if(d||!b){var c=document.body,a=document.createElement('div');a.style.width=a.style.height='100px';a.style.overflow='scroll';a.style.position='absolute';c.appendChild(a);Ext._scrollbarSize=b={width:a.offsetWidth-a.clientWidth,height:a.offsetHeight-a.clientHeight};c.removeChild(a)}return b},typeOf:function(){var a=/\S/,d=Object.prototype.toString,c={number:1,string:1,'boolean':1,'undefined':1},b={'[object Array]':'array','[object Date]':'date','[object Boolean]':'boolean','[object Number]':'number','[object RegExp]':'regexp'};return function(e){if(e===null){return 'null'}var f=typeof e,g,h;if(c[f]){return f}g=b[h=d.call(e)];if(g){return g}if(f==='function'){return 'function'}if(f==='object'){if(e.nodeType!==undefined){if(e.nodeType===3){return a.test(e.nodeValue)?'textnode':'whitespace'}else {return 'element'}}return 'object'}return h}}(),factory:function(a,f,b,d){var e=Ext.ClassManager,c;if(!a||a.isInstance){if(b&&b!==a){b.destroy()}return a}if(d){if(typeof a==='string'){return e.instantiateByAlias(d+'.'+a)}else {if(Ext.isObject(a)&&'type' in a){return e.instantiateByAlias(d+'.'+a.type,a)}}}if(a===!0){return b||Ext.create(f)}if('xtype' in a){c=e.instantiateByAlias('widget.'+a.xtype,a)}else {if('xclass' in a){c=Ext.create(a.xclass,a)}}if(c){if(b){b.destroy()}return c}if(b){return b.setConfig(a)}return Ext.create(f,a)},log:function(){var a=function(){};a.info=a.warn=a.error=Ext.emptyFn;return a}()});(function(){var b=[''],c=/([^\d\.])/,f=/[^\d]/g,g=/[\-+]/g,h=/\s/g,e=/_/g,d={classic:1,modern:1},a;Ext.Version=a=function(k,p){var b=this,n=b.padModes,o,m,d,h,j,l,i;if(k.isVersion){k=k.version}b.version=i=String(k).toLowerCase().replace(e,'.').replace(g,'');o=i.charAt(0);if(o in n){i=i.substring(1);d=n[o]}else {d=p?n[p]:0}b.pad=d;l=i.search(c);b.shortVersion=i;if(l!==-1){b.release=j=i.substr(l,k.length);b.shortVersion=i.substr(0,l);j=a.releaseValueMap[j]||j}b.releaseValue=j||d;b.shortVersion=b.shortVersion.replace(f,'');b.parts=h=i.split('.');for(m=h.length;m--;){h[m]=parseInt(h[m],10)}if(d===Infinity){h.push(d)}b.major=h[0]||d;b.minor=h[1]||d;b.patch=h[2]||d;b.build=h[3]||d;return b};a.prototype={isVersion:!0,padModes:{'~':NaN,'^':Infinity},release:'',compareTo:function(f){var g=this,m=g.pad,j=g.parts,h=j.length,e=f.isVersion?f:new a(f),n=e.pad,k=e.parts,i=k.length,l=Math.max(h,i),b,c,d;for(b=0;b<l;b++){c=b<h?j[b]:m;d=b<i?k[b]:n;if(c<d){return -1}if(c>d){return 1}}c=g.releaseValue;d=e.releaseValue;if(c<d){return -1}if(c>d){return 1}return 0},toString:function(){return this.version},valueOf:function(){return this.version},getMajor:function(){return this.major},getMinor:function(){return this.minor},getPatch:function(){return this.patch},getBuild:function(){return this.build},getRelease:function(){return this.release},getReleaseValue:function(){return this.releaseValue},isGreaterThan:function(a){return this.compareTo(a)>0},isGreaterThanOrEqual:function(a){return this.compareTo(a)>=0},isLessThan:function(a){return this.compareTo(a)<0},isLessThanOrEqual:function(a){return this.compareTo(a)<=0},equals:function(a){return this.compareTo(a)===0},match:function(a){a=String(a);return this.version.substr(0,a.length)===a},toArray:function(){var a=this;return [a.getMajor(),a.getMinor(),a.getPatch(),a.getBuild(),a.getRelease()]},getShortVersion:function(){return this.shortVersion},gt:function(a){return this.compareTo(a)>0},lt:function(a){return this.compareTo(a)<0},gtEq:function(a){return this.compareTo(a)>=0},ltEq:function(a){return this.compareTo(a)<=0}};Ext.apply(a,{aliases:{from:{extjs:'ext',core:'core',touch:'modern'},to:{ext:['extjs'],'core':['core'],modern:['touch']}},releaseValueMap:{dev:-6,alpha:-5,a:-5,beta:-4,b:-4,rc:-3,'#':-2,p:-1,pl:-1},getComponentValue:function(a){return !a?0:isNaN(a)?this.releaseValueMap[a]||a:parseInt(a,10)},compare:function(b,c){var d=b.isVersion?b:new a(b);return d.compareTo(c)},set:function(g,f,c){var b=a.aliases.to[f],d=c.isVersion?c:new a(c),e;g[f]=d;if(b){for(e=b.length;e-->0;){g[b[e]]=d}}return d}});Ext.apply(Ext,{compatVersions:{},versions:{},lastRegisteredVersion:null,getCompatVersion:function(b){var c=Ext.compatVersions,d;if(!b){d=c.ext||c.touch||c.core}else {d=c[a.aliases.from[b]||b]}return d||Ext.getVersion(b)},setCompatVersion:function(b,c){a.set(Ext.compatVersions,b,c)},setVersion:function(b,c){if(b in d){Ext.toolkit=b}Ext.lastRegisteredVersion=a.set(Ext.versions,b,c);return this},getVersion:function(c){var b=Ext.versions;if(!c){return b.ext||b.touch||b.core}return b[a.aliases.from[c]||c]},checkVersion:function(o,j){var p=Ext.isArray(o),s=a.aliases.from,q=p?o:b,t=q.length,n=Ext.versions,r=n.ext||n.touch,l,c,f,i,g,m,d,e,k;if(!p){b[0]=o}for(l=0;l<t;++l){if(!Ext.isString(d=q[l])){f=Ext.checkVersion(d.and||d.or,!d.or);if(d.not){f=!f}}else {if(d.indexOf(' ')>=0){d=d.replace(h,'')}c=d.indexOf('@');if(c<0){e=d;k=r}else {m=d.substring(0,c);if(!(k=n[s[m]||m])){if(j){return !1}continue}e=d.substring(c+1)}c=e.indexOf('-');if(c<0){if(e.charAt(c=e.length-1)==='+'){i=e.substring(0,c);g=null}else {i=g=e}}else {if(c>0){i=e.substring(0,c);g=e.substring(c+1)}else {i=null;g=e.substring(c+1)}}f=!0;if(i){i=new a(i,'~');f=i.ltEq(k)}if(f&&g){g=new a(g,'~');f=g.gtEq(k)}}if(f){if(!j){return !0}}else {if(j){return !1}}}return !!j},deprecate:function(b,e,c,d){if(a.compare(Ext.getVersion(b),e)<1){c.call(d)}}})})();(function(c){var d=c&&c.packages||{},b=c&&c.compatibility,a,e;for(a in d){e=d[a];Ext.setVersion(a,e.version)}if(b){if(Ext.isString(b)){Ext.setCompatVersion('core',b)}else {for(a in b){Ext.setCompatVersion(a,b[a])}}}if(!d.ext&&!d.touch){Ext.setVersion('ext','6.0.2.437');Ext.setVersion('core','6.0.2.437')}})(Ext.manifest);Ext.Config=function(b){var c=this,a=b.charAt(0).toUpperCase()+b.substr(1);c.name=b;c.names={internal:'_'+b,initializing:'is'+a+'Initializing',apply:'apply'+a,update:'update'+a,get:'get'+a,set:'set'+a,initGet:'initGet'+a,changeEvent:b.toLowerCase()+'change'};c.root=c};Ext.Config.map={};Ext.Config.get=function(a){var b=Ext.Config.map,c=b[a]||(b[a]=new Ext.Config(a));return c};Ext.Config.prototype={self:Ext.Config,isConfig:!0,getGetter:function(){return this.getter||(this.root.getter=this.makeGetter())},getInitGetter:function(){return this.initGetter||(this.root.initGetter=this.makeInitGetter())},getSetter:function(){return this.setter||(this.root.setter=this.makeSetter())},getEventedSetter:function(){return this.eventedSetter||(this.root.eventedSetter=this.makeEventedSetter())},getInternalName:function(a){return a.$configPrefixed?this.names.internal:this.name},mergeNew:function(b,d,f,e){var a,c;if(!d){a=b}else {if(!b){a=d}else {a=Ext.Object.chain(d);for(c in b){if(!e||!(c in a)){a[c]=b[c]}}}}return a},mergeSets:function(a,f,e){var b=f?Ext.Object.chain(f):{},c,d;if(a instanceof Array){for(c=a.length;c--;){d=a[c];if(!e||!(d in b)){b[d]=!0}}}else {if(a){if(a.constructor===Object){for(c in a){d=a[c];if(!e||!(c in b)){b[c]=d}}}else {if(!e||!(a in b)){b[a]=!0}}}}return b},makeGetter:function(){var b=this.name,a=this.names.internal;return function(){var c=this.$configPrefixed?a:b;return this[c]}},makeInitGetter:function(){var e=this.name,a=this.names,d=a.set,c=a.get,b=a.initializing;return function(){var a=this;a[b]=!0;delete a[c];a[d](a.config[e]);delete a[b];return a[c].apply(a,arguments)}},makeSetter:function(){var g=this.name,a=this.names,e=a.internal,f=a.get,d=a.apply,c=a.update,b;b=function(b){var a=this,h=a.$configPrefixed?e:g,i=a[h];delete a[f];if(!a[d]||(b=a[d](b,i))!==undefined){if(b!==(i=a[h])){a[h]=b;if(a[c]){a[c](b,i)}}}return a};b.$isDefault=!0;return b},makeEventedSetter:function(){var i=this.name,a=this.names,f=a.internal,h=a.get,d=a.apply,b=a.update,e=a.changeEvent,g=function(a,c,e,d){a[d]=c;if(a[b]){a[b](c,e)}},c;c=function(c){var a=this,k=a.$configPrefixed?f:i,j=a[k];delete a[h];if(!a[d]||(c=a[d](c,j))!==undefined){if(c!==(j=a[k])){if(a.isConfiguring){a[k]=c;if(a[b]){a[b](c,j)}}else {a.fireEventedAction(e,[a,c,j],g,a,[a,c,j,k])}}}return a};c.$isDefault=!0;return c}};(function(){var c=Ext.Config,b=c.map,a=Ext.Object;Ext.Configurator=function(d){var b=this,e=d.prototype,c=d.superclass?d.superclass.self.$config:null;b.cls=d;b.superCfg=c;if(c){b.configs=a.chain(c.configs);b.cachedConfigs=a.chain(c.cachedConfigs);b.initMap=a.chain(c.initMap);b.values=a.chain(c.values);b.needsFork=c.needsFork}else {b.configs={};b.cachedConfigs={};b.initMap={};b.values={}}e.config=e.defaultConfig=b.values;d.$config=b};Ext.Configurator.prototype={self:Ext.Configurator,needsFork:!1,initList:null,add:function(t,l){var i=this,n=i.cls,k=i.configs,v=i.cachedConfigs,p=i.initMap,g=n.prototype,r=l&&l.$config.configs,u=i.values,m,f,s,h,b,j,e,q,o,d;for(e in t){d=t[e];m=d&&d.constructor===Object;f=m&&'$value' in d?d:null;if(f){s=!!f.cached;d=f.$value;m=d&&d.constructor===Object}h=f&&f.merge;b=k[e];if(b){if(l){h=b.merge;if(!h){continue}f=null}else {h=h||b.merge}j=u[e];if(h){d=h.call(b,d,j,n,l)}else {if(m){if(j&&j.constructor===Object){d=a.merge({},j,d)}}}}else {if(r){b=r[e];f=null}else {b=c.get(e)}k[e]=b;if(b.cached||s){v[e]=!0}q=b.names;if(!g[o=q.get]){g[o]=b.getter||b.getGetter()}if(!g[o=q.set]){g[o]=f&&f.evented?b.eventedSetter||b.getEventedSetter():b.setter||b.getSetter()}}if(f){if(b.owner!==n){k[e]=b=Ext.Object.chain(b);b.owner=n}Ext.apply(b,f);delete b.$value}if(!i.needsFork&&d&&(d.constructor===Object||d instanceof Array)){i.needsFork=!0}if(d!==null){p[e]=!0}else {if(g.$configPrefixed){g[k[e].names.internal]=null}else {g[k[e].name]=null}if(e in p){p[e]=!1}}u[e]=d}},configure:function(c,h){var k=this,u=k.configs,x=k.initMap,q=k.initListMap,o=k.initList,j=k.cls.prototype,i=k.values,r=0,v=!o,n,b,m,w,d,p,l,f,e,g,t,s,y;i=k.needsFork?a.fork(i):a.chain(i);c.isConfiguring=!0;if(v){k.initList=o=[];k.initListMap=q={};c.isFirstInstance=!0;for(e in x){w=x[e];b=u[e];t=b.cached;if(w){f=b.names;g=i[e];if(!j[f.set].$isDefault||j[f.apply]||j[f.update]||typeof g==='object'){if(t){(n||(n=[])).push(b)}else {o.push(b);q[e]=!0}c[f.get]=b.initGetter||b.getInitGetter()}else {j[b.getInternalName(j)]=g}}else {if(t){j[b.getInternalName(j)]=undefined}}}}l=n&&n.length;if(l){for(d=0;d<l;++d){p=n[d].getInternalName(j);c[p]=null}for(d=0;d<l;++d){f=(b=n[d]).names;m=f.get;if(c.hasOwnProperty(m)){c[f.set](i[b.name]);delete c[m]}}for(d=0;d<l;++d){p=n[d].getInternalName(j);j[p]=c[p];delete c[p]}}if(h&&h.platformConfig){h=k.resolvePlatformConfig(c,h)}if(v){if(c.afterCachedConfig&&!c.afterCachedConfig.$nullFn){c.afterCachedConfig(h)}}c.config=i;for(d=0,l=o.length;d<l;++d){b=o[d];c[b.names.get]=b.initGetter||b.getInitGetter()}if(c.transformInstanceConfig){h=c.transformInstanceConfig(h)}if(h){for(e in h){g=h[e];b=u[e];if(!b){c[e]=g}else {if(!b.lazy){++r}if(!q[e]){c[b.names.get]=b.initGetter||b.getInitGetter()}if(b.merge){g=b.merge(g,i[e],c)}else {if(g&&g.constructor===Object){s=i[e];if(s&&s.constructor===Object){g=a.merge(i[e],g)}else {g=Ext.clone(g)}}}}i[e]=g}}if(c.beforeInitConfig&&!c.beforeInitConfig.$nullFn){if(c.beforeInitConfig(h)===!1){return}}if(h){for(e in h){if(!r){break}b=u[e];if(b&&!b.lazy){--r;f=b.names;m=f.get;if(c.hasOwnProperty(m)){c[f.set](i[e]);delete c[f.get]}}}}for(d=0,l=o.length;d<l;++d){b=o[d];f=b.names;m=f.get;if(!b.lazy&&c.hasOwnProperty(m)){c[f.set](i[b.name]);delete c[m]}}delete c.isConfiguring},getCurrentConfig:function(c){var e=c.defaultConfig,d={},a;for(a in e){d[a]=c[b[a].names.get]()}return d},merge:function(g,c,f){var h=this.configs,b,a,d,e;for(b in f){a=f[b];e=h[b];if(e){if(e.merge){a=e.merge(a,c[b],g)}else {if(a&&a.constructor===Object){d=c[b];if(d&&d.constructor===Object){a=Ext.Object.merge(d,a)}else {a=Ext.clone(a)}}}}c[b]=a}return c},reconfigure:function(c,f,g){var n=c.config,i=[],p=c.$configStrict&&!(g&&g.strict===!1),l=this.configs,o=g&&g.defaults,d,j,h,m,a,e,k;for(a in f){if(o&&c.hasOwnProperty(a)){continue}n[a]=f[a];d=l[a];if(d){c[d.names.get]=d.initGetter||d.getInitGetter()}else {k=c.self.prototype[a];if(p){if(typeof k==='function'&&!k.$nullFn){continue}}}i.push(a)}for(h=0,m=i.length;h<m;h++){a=i[h];d=l[a];if(d){e=d.names;j=e.get;if(c.hasOwnProperty(j)){c[e.set](f[a]);delete c[j]}}else {d=b[a]||Ext.Config.get(a);e=d.names;if(c[e.set]){c[e.set](f[a])}else {c[a]=f[a]}}}},resolvePlatformConfig:function(g,e){var f=e&&e.platformConfig,b=e,c,a,d;if(f){a=Ext.getPlatformConfigKeys(f);d=a.length;if(d){b=Ext.merge({},b);for(c=0,d=a.length;c<d;++c){this.merge(g,b,f[a[c]])}}}return b}}})();Ext.Base=function(j){var c=[],d,g=[],k=function(d,f){var b=this,a,e,c;if(d){e=Ext.Config.map[d];c=e.names.get;if(f&&b.hasOwnProperty(c)){a=b.config[d]}else {a=b[c]()}}else {a=b.getCurrentConfig()}return a},i=function(a){return function(){return this[a].apply(this,arguments)}},l=Ext.Version,h=/^\d/,f={},e={},a=function(){},b=a.prototype;Ext.apply(a,{$className:'Ext.Base',$isClass:!0,create:function(){return Ext.create.apply(Ext,[this].concat(Array.prototype.slice.call(arguments,0)))},addDeprecations:function(o){var s=this,n=[],t=Ext.getCompatVersion(o.name),c,g,r,u,e,k,p,f,m,b,v,a,q,d;for(g in o){if(h.test(g)){d=new Ext.Version(g);d.deprecations=o[g];n.push(d)}}n.sort(l.compare);for(r=n.length;r--;){c=(d=n[r]).deprecations;e=s.prototype;q=c.statics;k=t&&t.lt(d);if(!k){break}while(c){m=c.methods;if(m){for(b in m){a=m[b];f=null;if(!a){}else {if(Ext.isString(a)){if(k){f=i(a)}}else {u='';if(a.message||a.fn){a=a.fn}p=e.hasOwnProperty(b)&&e[b];if(k&&a){a.$owner=s;a.$name=b;if(p){a.$previous=p}f=a}}}if(f){e[b]=f}}}c=q;q=null;e=s}}},extend:function(e){var c=this,h=e.prototype,d,a,i,g,f;d=c.prototype=Ext.Object.chain(h);d.self=c;c.superclass=d.superclass=h;if(!e.$isClass){for(a in b){if(a in d){d[a]=b[a]}}}f=h.$inheritableStatics;if(f){for(a=0,i=f.length;a<i;a++){g=f[a];if(!c.hasOwnProperty(g)){c[g]=e[g]}}}if(e.$onExtended){c.$onExtended=e.$onExtended.slice()}c.getConfigurator()},$onExtended:[],triggerExtended:function(){var c=this.$onExtended,d=c.length,a,b;if(d>0){for(a=0;a<d;a++){b=c[a];b.fn.apply(b.scope||this,arguments)}}},onExtended:function(b,a){this.$onExtended.push({fn:b,scope:a});return this},addStatics:function(a){this.addMembers(a,!0);return this},addInheritableStatics:function(g){var f=this,e=f.prototype,d,c,a,h,b;d=e.$inheritableStatics;c=e.$hasInheritableStatics;if(!d){d=e.$inheritableStatics=[];c=e.$hasInheritableStatics={}}for(a in g){if(g.hasOwnProperty(a)){h=g[a];b=f[a];if(typeof b==='function'&&!b.$isClass&&!b.$nullFn){h.$previous=b}f[a]=h;if(!c[a]){c[a]=!0;d.push(a)}}}return f},addMembers:function(d,f,q){var e=this,m=Ext.Function.clone,c=f?e:e.prototype,n=!f&&c.defaultConfig,l=Ext.enumerables,g=d.privates,h,i,p,a,b,o,k;if(g){delete d.privates;if(!f){k=g.statics;delete g.statics}e.addMembers(g,f,o);if(k){e.addMembers(k,!0,o)}}for(b in d){if(d.hasOwnProperty(b)){a=d[b];if(typeof a==='function'&&!a.$isClass&&!a.$nullFn){if(a.$owner){a=m(a)}if(c.hasOwnProperty(b)){a.$previous=c[b]}a.$owner=e;a.$name=b}else {if(n&&b in n&&!c.config.hasOwnProperty(b)){(h||(h={}))[b]=a;continue}}c[b]=a}}if(h){e.addConfig(h)}if(l){for(i=0,p=l.length;i<p;++i){if(d.hasOwnProperty(b=l[i])){a=d[b];if(a&&!a.$nullFn){if(a.$owner){a=m(a)}a.$owner=e;a.$name=b;if(c.hasOwnProperty(b)){a.$previous=c[b]}}c[b]=a}}}return this},addMember:function(a,b){f[a]=b;this.addMembers(f);delete f[a];return this},borrow:function(f,a){var g=f.prototype,d={},b,e,c;a=Ext.Array.from(a);for(b=0,e=a.length;b<e;b++){c=a[b];d[c]=g[c]}return this.addMembers(d)},override:function(a){var b=this,d=a.statics,c=a.inheritableStatics,e=a.config,g=a.mixins,f=a.cachedConfig;if(d||c||e){a=Ext.apply({},a)}if(d){b.addMembers(d,!0);delete a.statics}if(c){b.addInheritableStatics(c);delete a.inheritableStatics}if(e){b.addConfig(e);delete a.config}if(f){b.addCachedConfig(f);delete a.cachedConfig}delete a.mixins;b.addMembers(a);if(g){b.mixin(g)}return b},callParent:function(b){var a;return (a=this.callParent.caller)&&(a.$previous||(a=a.$owner?a:a.caller)&&a.$owner.superclass.self[a.$name]).apply(this,b||c)},callSuper:function(b){var a;return (a=this.callSuper.caller)&&((a=a.$owner?a:a.caller)&&a.$owner.superclass.self[a.$name]).apply(this,b||c)},mixin:function(o,g){var c=this,a,b,d,i,e,k,n,h,m,f,l;if(typeof o!=='string'){f=o;if(f instanceof Array){for(e=0,k=f.length;e<k;e++){a=f[e];c.mixin(a.prototype.mixinId||a.$className,a)}}else {for(n in f){c.mixin(n,f[n])}}return}a=g.prototype;b=c.prototype;if(a.onClassMixedIn){a.onClassMixedIn.call(g,c)}if(!b.hasOwnProperty('mixins')){if('mixins' in b){b.mixins=Ext.Object.chain(b.mixins)}else {b.mixins={}}}for(d in a){m=a[d];if(d==='mixins'){Ext.applyIf(b.mixins,m)}else {if(!(d==='mixinId'||d==='config'||d==='$inheritableStatics')&&b[d]===undefined){b[d]=m}}}i=a.$inheritableStatics;if(i){l={};for(e=0,k=i.length;e<k;e++){h=i[e];if(!c.hasOwnProperty(h)){l[h]=g[h]}}c.addInheritableStatics(l)}if('config' in a){c.addConfig(a.config,g)}b.mixins[o]=a;if(a.afterClassMixedIn){a.afterClassMixedIn.call(g,c)}return c},addConfig:function(b,a){var c=this.$config||this.getConfigurator();c.add(b,a)},addCachedConfig:function(c,d){var b={},a;for(a in c){b[a]={cached:!0,$value:c[a]}}this.addConfig(b,d)},getConfigurator:function(){return this.$config||new Ext.Configurator(this)},getName:function(){return Ext.getClassName(this)},createAlias:j(function(a,b){e[a]=function(){return this[b].apply(this,arguments)};this.override(e);delete e[a]})});for(d in a){if(a.hasOwnProperty(d)){g.push(d)}}a.$staticMembers=g;a.getConfigurator();a.addMembers({$className:'Ext.Base',isInstance:!0,$configPrefixed:!0,$configStrict:!0,isConfiguring:!1,isFirstInstance:!1,destroyed:!1,statics:function(){var a=this.statics.caller,b=this.self;if(!a){return b}return a.$owner},callParent:function(d){var a,b=(a=this.callParent.caller)&&(a.$previous||(a=a.$owner?a:a.caller)&&a.$owner.superclass[a.$name]);return b.apply(this,d||c)},callSuper:function(d){var a,b=(a=this.callSuper.caller)&&((a=a.$owner?a:a.caller)&&a.$owner.superclass[a.$name]);return b.apply(this,d||c)},self:a,constructor:function(){return this},getConfigurator:function(){return this.$config||this.self.getConfigurator()},initConfig:function(b){var a=this,c=a.getConfigurator();a.initConfig=Ext.emptyFn;a.initialConfig=b||{};c.configure(a,b);return a},beforeInitConfig:Ext.emptyFn,getConfig:k,setConfig:function(b,e,d){var c=this,a;if(b){if(typeof b==='string'){a={};a[b]=e}else {a=b}c.getConfigurator().reconfigure(c,a,d)}return c},getCurrentConfig:function(){var a=this.getConfigurator();return a.getCurrentConfig(this)},hasConfig:function(a){return a in this.defaultConfig},getInitialConfig:function(b){var a=this.config;if(!b){return a}return a[b]},$links:null,link:function(c,b){var a=this,d=a.$links||(a.$links={});d[c]=!0;a[c]=b;return b},unlink:function(e){var d=this,b,f,c,a;for(b=0,f=e.length;b<f;b++){c=e[b];a=d[c];if(a){if(a.isInstance&&!a.destroyed){a.destroy()}else {if(a.parentNode&&'nodeType' in a){a.parentNode.removeChild(a)}}}d[c]=null}return d},destroy:function(){var a=this,b=a.$links;a.initialConfig=a.config=null;a.destroy=Ext.emptyFn;a.isDestroyed=a.destroyed=!0;if(b){a.$links=null;a.unlink(Ext.Object.getKeys(b))}}});b.callOverridden=b.callParent;return a}(Ext.Function.flexSetter);(function(b,a){(Ext.util||(Ext.util={})).Cache=b=function(e){var d=this,c;if(e){Ext.apply(d,e)}d.head=c={key:null,value:null};d.map={};c.next=c.prev=c};b.prototype=a={maxSize:100,count:0,clear:function(){var e=this,d=e.head,c=d.next;d.next=d.prev=d;if(!e.evict.$nullFn){for(;c!==d;c=c.next){e.evict(c.key,c.value)}}e.count=0},each:function(f,d){d=d||this;for(var e=this.head,c=e.next;c!==e;c=c.next){if(f.call(d,c.key,c.value)){break}}},get:function(e){var c=this,f=c.head,g=c.map,d=g[e];if(d){if(d.prev!==f){c.unlinkEntry(d);c.linkEntry(d)}}else {g[e]=d={key:e,value:c.miss.apply(c,arguments)};c.linkEntry(d);++c.count;while(c.count>c.maxSize){c.unlinkEntry(f.prev,!0);--c.count}}return d.value},evict:Ext.emptyFn,linkEntry:function(c){var d=this.head,e=d.next;c.next=e;c.prev=d;d.next=c;e.prev=c},unlinkEntry:function(c,f){var d=c.next,e=c.prev;e.next=d;d.prev=e;if(f){this.evict(c.key,c.value)}}};a.destroy=a.clear})();(function(){var a,d=Ext.Base,b=d.$staticMembers,c=function(a,b){return a.length-b.length||(a<b?-1:a>b?1:0)};function makeCtor(a){function constructor(){return this.constructor.apply(this,arguments)||null}return constructor}Ext.Class=a=function(b,c,d){if(typeof b!='function'){d=c;c=b;b=null}if(!c){c={}}b=a.create(b,c);a.process(b,c,d);return b};Ext.apply(a,{makeCtor:makeCtor,onBeforeCreated:function(a,c,b){a.addMembers(c);b.onCreated.call(a,a)},create:function(a,f){var e=b.length,c;if(!a){a=makeCtor()}while(e--){c=b[e];a[c]=d[c]}return a},process:function(l,f,k){var j=f.preprocessors||a.defaultPreprocessors,o=this.preprocessors,e={onBeforeCreated:this.onBeforeCreated},d=[],b,c,g,n,h,m,i;delete f.preprocessors;l._classHooks=e;for(g=0,n=j.length;g<n;g++){b=j[g];if(typeof b=='string'){b=o[b];c=b.properties;if(c===!0){d.push(b.fn)}else {if(c){for(h=0,m=c.length;h<m;h++){i=c[h];if(f.hasOwnProperty(i)){d.push(b.fn);break}}}}}else {d.push(b)}}e.onCreated=k?k:Ext.emptyFn;e.preprocessors=d;this.doProcess(l,f,e)},doProcess:function(f,g,b){var c=this,d=b.preprocessors,a=d.shift(),e=c.doProcess;for(;a;a=d.shift()){if(a.call(c,f,g,b,e)===!1){return}}b.onBeforeCreated.apply(c,arguments)},preprocessors:{},registerPreprocessor:function(a,e,b,c,d){if(!c){c='last'}if(!b){b=[a]}this.preprocessors[a]={name:a,properties:b||!1,fn:e};this.setDefaultPreprocessorPosition(a,c,d);return this},getPreprocessor:function(a){return this.preprocessors[a]},getPreprocessors:function(){return this.preprocessors},defaultPreprocessors:[],getDefaultPreprocessors:function(){return this.defaultPreprocessors},setDefaultPreprocessors:function(a){this.defaultPreprocessors=Ext.Array.from(a);return this},setDefaultPreprocessorPosition:function(d,a,e){var b=this.defaultPreprocessors,c;if(typeof a=='string'){if(a==='first'){b.unshift(d);return this}else {if(a==='last'){b.push(d);return this}}a=a==='after'?1:-1}c=Ext.Array.indexOf(b,e);if(c!==-1){Ext.Array.splice(b,Math.max(0,c+a),0,d)}return this}});a.registerPreprocessor('extend',function(b,c,i){var h=Ext.Base,g=h.prototype,f=c.extend,a,e,d;delete c.extend;if(f&&f!==Object){a=f}else {a=h}e=a.prototype;if(!a.$isClass){for(d in g){if(!e[d]){e[d]=g[d]}}}b.extend(a);b.triggerExtended.apply(b,arguments);if(c.onClassExtended){b.onExtended(c.onClassExtended,b);delete c.onClassExtended}},!0);a.registerPreprocessor('privates',function(d,e){var a=e.privates,c=a.statics,b=a.privacy||!0;delete e.privates;delete a.statics;d.addMembers(a,!1,b);if(c){d.addMembers(c,!0,b)}});a.registerPreprocessor('statics',function(b,a){b.addStatics(a.statics);delete a.statics});a.registerPreprocessor('inheritableStatics',function(b,a){b.addInheritableStatics(a.inheritableStatics);delete a.inheritableStatics});Ext.createRuleFn=function(a){return new Function('$c','with($c) { return ('+a+'); }')};Ext.expressionCache=new Ext.util.Cache({miss:Ext.createRuleFn});Ext.ruleKeySortFn=c;Ext.getPlatformConfigKeys=function(e){var b=[],a,d;for(a in e){d=Ext.expressionCache.get(a);if(d(Ext.platformTags)){b.push(a)}}b.sort(c);return b};a.registerPreprocessor('platformConfig',function(n,g,o){var k=g.platformConfig,e=g.config,b,l,i,d,c,j,a,f,h,m;delete g.platformConfig;d=n.getConfigurator();l=d.configs;j=Ext.getPlatformConfigKeys(k);for(h=0,m=j.length;h<m;++h){i=k[j[h]];c=b=null;for(a in i){f=i[a];if(e&&a in e){(b||(b={}))[a]=f;(c||(c={}))[a]=e[a];delete e[a]}else {if(a in l){(b||(b={}))[a]=f}else {g[a]=f}}}if(c){d.add(c)}if(b){d.add(b)}}});a.registerPreprocessor('config',function(b,a){if(a.hasOwnProperty('$configPrefixed')){b.prototype.$configPrefixed=a.$configPrefixed}b.addConfig(a.config);delete a.config});a.registerPreprocessor('cachedConfig',function(b,a){if(a.hasOwnProperty('$configPrefixed')){b.prototype.$configPrefixed=a.$configPrefixed}b.addCachedConfig(a.cachedConfig);delete a.cachedConfig});a.registerPreprocessor('mixins',function(e,b,a){var d=b.mixins,c=a.onCreated;delete b.mixins;a.onCreated=function(){a.onCreated=c;e.mixin(d);return a.onCreated.apply(this,arguments)}});Ext.extend=function(d,c,b){if(arguments.length===2&&Ext.isObject(c)){b=c;c=d;d=null}var e;if(!c){throw new Error('[Ext.extend] Attempting to extend from a class which has not been loaded on the page.')}b.extend=c;b.preprocessors=['extend','statics','inheritableStatics','mixins','platformConfig','config'];if(d){e=new a(d,b);e.prototype.constructor=d}else {e=new a(b)}e.prototype.override=function(e){for(var a in e){if(e.hasOwnProperty(a)){this[a]=e[a]}}};return e}})();Ext.Inventory=function(){var a=this;a.names=[];a.paths={};a.alternateToName={};a.aliasToName={};a.nameToAliases={};a.nameToAlternates={}};Ext.Inventory.prototype={_array1:[0],prefixes:null,dotRe:/\./g,wildcardRe:/\*/g,addAlias:function(a,c,b){return this.addMapping(a,c,this.aliasToName,this.nameToAliases,b)},addAlternate:function(b,a){return this.addMapping(b,a,this.alternateToName,this.nameToAlternates)},addMapping:function(h,m,k,j,n){var f=h.$className||h,c=f,l=this._array1,d,a,b,e,i,g;if(Ext.isString(f)){c={};c[f]=m}for(b in c){a=c[b];if(Ext.isString(a)){l[0]=a;a=l}i=a.length;g=j[b]||(j[b]=[]);for(e=0;e<i;++e){if(!(d=a[e])){continue}if(k[d]!==b){k[d]=b;g.push(d)}}}},getAliasesByName:function(a){return this.nameToAliases[a]||null},getAlternatesByName:function(a){return this.nameToAlternates[a]||null},getNameByAlias:function(a){return this.aliasToName[a]||''},getNameByAlternate:function(a){return this.alternateToName[a]||''},getNamesByExpression:function(k,e,r){var g=this,q=g.aliasToName,p=g.alternateToName,m=g.nameToAliases,o=g.nameToAlternates,i=r?e:{},l=[],n=Ext.isString(k)?[k]:k,t=n.length,s=g.wildcardRe,f,j,c,b,d,a,h;for(j=0;j<t;++j){if((f=n[j]).indexOf('*')<0){if(!(a=q[f])){if(!(a=p[f])){a=f}}if(!(a in i)&&!(e&&a in e)){i[a]=1;l.push(a)}}else {h=new RegExp('^'+f.replace(s,'(.*?)')+'$');for(a in m){if(!(a in i)&&!(e&&a in e)){if(!(b=h.test(a))){d=(c=m[a]).length;while(!b&&d-->0){b=h.test(c[d])}c=o[a];if(c&&!b){d=c.length;while(!b&&d-->0){b=h.test(c[d])}}}if(b){i[a]=1;l.push(a)}}}}}return l},getPath:function(a){var e=this,d=e.paths,b='',c;if(a in d){b=d[a]}else {c=e.getPrefix(a);if(c){a=a.substring(c.length+1);b=d[c];if(b){b+='/'}}b+=a.replace(e.dotRe,'/')+'.js'}return b},getPrefix:function(a){if(a in this.paths){return a}var d=this.getPrefixes(),e=d.length,b,c;while(e-->0){b=(c=d[e]).length;if(b<a.length&&a.charAt(b)==='.'&&c===a.substring(0,b)){return c}}return ''},getPrefixes:function(){var b=this,a=b.prefixes;if(!a){b.prefixes=a=b.names.slice(0);a.sort(b._compareNames)}return a},removeName:function(a){var c=this,j=c.aliasToName,i=c.alternateToName,h=c.nameToAliases,g=c.nameToAlternates,f=h[a],e=g[a],b,d;delete h[a];delete g[a];if(f){for(b=f.length;b--;){if(a===(d=f[b])){delete j[d]}}}if(e){for(b=e.length;b--;){if(a===(d=e[b])){delete i[d]}}}},resolveName:function(a){var c=this,b;if(!(a in c.nameToAliases)){if(!(b=c.aliasToName[a])){b=c.alternateToName[a]}}return b||a},select:function(b,f){var e=this,a={},d={excludes:a,exclude:function(){e.getNamesByExpression(arguments,a,!0);return this}},c;for(c in b){d[c]=e.selectMethod(a,b[c],f||b)}return d},selectMethod:function(a,c,b){var d=this;return function(f){var e=Ext.Array.slice(arguments,1);e.unshift(d.getNamesByExpression(f,a));return c.apply(b,e)}},setPath:Ext.Function.flexSetter(function(b,c){var a=this;a.paths[b]=c;a.names.push(b);a.prefixes=null;return a}),_compareNames:function(b,c){var a=b.length-c.length;if(!a){a=b<c?-1:1}return a}};Ext.ClassManager=function(n,e,o,g,r){var q=Ext.Class.makeCtor,i=[],b={Ext:{name:'Ext',value:Ext}},a=Ext.apply(new Ext.Inventory(),{classes:{},classState:{},existCache:{},instantiators:[],isCreated:function(b){if(a.classes[b]||a.existCache[b]){return !0}if(!a.lookupName(b,!1)){return !1}a.triggerCreated(b);return !0},createdListeners:[],nameCreatedListeners:{},existsListeners:[],nameExistsListeners:{},overrideMap:{},triggerCreated:function(b,c){a.existCache[b]=c||1;a.classState[b]+=40;a.notify(b,a.createdListeners,a.nameCreatedListeners)},onCreated:function(d,c,b){a.addListener(d,c,b,a.createdListeners,a.nameCreatedListeners)},notify:function(k,c,m){var l=a.getAlternatesByName(k),f=[k],b,i,j,p,d,h;for(b=0,i=c.length;b<i;b++){d=c[b];d.fn.call(d.scope,k)}while(f){for(b=0,i=f.length;b<i;b++){h=f[b];c=m[h];if(c){for(j=0,p=c.length;j<p;j++){d=c[j];d.fn.call(d.scope,h)}delete m[h]}}f=l;l=null}},addListener:function(b,f,a,h,c){if(Ext.isArray(a)){b=Ext.Function.createBarrier(a.length,b,f);for(d=0;d<a.length;d++){this.addListener(b,null,a[d],h,c)}return}var d,i={fn:b,scope:f};if(a){if(this.isCreated(a)){b.call(f,a);return}if(!c[a]){c[a]=[]}c[a].push(i)}else {h.push(i)}},$namespaceCache:b,addRootNamespaces:function(c){for(var a in c){b[a]={name:a,value:c[a]}}},clearNamespaceCache:function(){i.length=0;for(var a in b){if(!b[a].value){delete b[a]}}},getNamespaceEntry:function(c){if(typeof c!=='string'){return c}var d=b[c],f;if(!d){f=c.lastIndexOf('.');if(f<0){d={name:c}}else {d={name:c.substring(f+1),parent:a.getNamespaceEntry(c.substring(0,f))}}b[c]=d}return d},lookupName:function(j,h){var k=a.getNamespaceEntry(j),c=Ext.global,d=0,b,f;for(b=k;b;b=b.parent){i[d++]=b}while(c&&d-->0){b=i[d];f=c;c=b.value||c[b.name];if(!c&&h){f[b.name]=c={}}}return c},setNamespace:function(f,d){var b=a.getNamespaceEntry(f),c=Ext.global;if(b.parent){c=a.lookupName(b.parent,!0)}c[b.name]=d;return d},setXType:function(i,d){var f=i.$className,k=f?i:a.get(f=i),b=k.prototype,j=b.xtypes,c=b.xtypesChain,h=b.xtypesMap;if(!b.hasOwnProperty('xtypes')){b.xtypes=j=[];b.xtypesChain=c=c?c.slice(0):[];b.xtypesMap=h=Ext.apply({},h)}a.addAlias(f,'widget.'+d,!0);j.push(d);c.push(d);h[d]=!0},set:function(b,d){var c=a.getName(d);a.classes[b]=a.setNamespace(b,d);if(c&&c!==b){a.addAlternate(c,b)}return a},get:function(b){return a.classes[b]||a.lookupName(b,!1)},addNameAliasMappings:function(b){a.addAlias(b)},addNameAlternateMappings:function(b){a.addAlternate(b)},getByAlias:function(b){return a.get(a.getNameByAlias(b))},getByConfig:function(c,d){var f=c.xclass,b;if(f){b=f}else {b=c.xtype;if(b){d='widget.'}else {b=c.type}b=a.getNameByAlias(d+b)}return a.get(b)},getName:function(a){return a&&a.$className||''},getClass:function(a){return a&&a.self||null},create:function(c,b,f){var d=q(c);if(typeof b==='function'){b=b(d)}b.$className=c;return new n(d,b,function(){var m=b.postprocessors||a.defaultPostprocessors,s=a.postprocessors,i=[],d,j,q,k,p,h,l;delete b.postprocessors;for(j=0,q=m.length;j<q;j++){d=m[j];if(typeof d==='string'){d=s[d];h=d.properties;if(h===!0){i.push(d.fn)}else {if(h){for(k=0,p=h.length;k<p;k++){l=h[k];if(b.hasOwnProperty(l)){i.push(d.fn);break}}}}}else {i.push(d)}}b.postprocessors=i;b.createdFn=f;a.processCreate(c,this,b)})},processCreate:function(a,b,d){var c=this,f=d.postprocessors.shift(),h=d.createdFn;if(!f){if(a){c.set(a,b)}delete b._classHooks;if(h){h.call(b,b)}if(a){c.triggerCreated(a)}return}if(f.call(c,a,b,d,c.processCreate)!==!1){c.processCreate(a,b,d)}},createOverride:function(i,c,m){var h=this,f=c.override,p=c.requires,q=c.uses,b=c.mixins,l,d=1,k,j=function(){var a,s,d,t,u;if(!k){s=p?p.slice(0):[];if(b){if(!(l=b instanceof Array)){for(t in b){if(Ext.isString(a=b[t])){s.push(a)}}}else {for(d=0,u=b.length;d<u;++d){if(Ext.isString(a=b[d])){s.push(a)}}}}k=!0;if(s.length){Ext.require(s,j);return}}if(l){for(d=0,u=b.length;d<u;++d){if(Ext.isString(a=b[d])){b[d]=Ext.ClassManager.get(a)}}}else {if(b){for(t in b){if(Ext.isString(a=b[t])){b[t]=Ext.ClassManager.get(a)}}}}a=f.$isClass?f:h.get(f);delete c.override;delete c.compatibility;delete c.requires;delete c.uses;Ext.override(a,c);Ext.Loader.history.push(i);if(q){Ext['Loader'].addUsedClasses(q)}if(m){m.call(a,a)}};if(i){a.overrideMap[i]=!0}if('compatibility' in c){d=c.compatibility;if(!d){d=!1}else {if(typeof d==='number'){d=!0}else {if(typeof d!=='boolean'){d=Ext.checkVersion(d)}}}}if(d){if(f.$isClass){j()}else {h.onCreated(j,h,f)}}h.triggerCreated(i,2);return h},instantiateByAlias:function(){var c=arguments[0],a=o.call(arguments),b=this.getNameByAlias(c);a[0]=b;return Ext.create.apply(Ext,a)},instantiate:function(){return Ext.create.apply(Ext,arguments)},dynInstantiate:function(b,a){a=g(a,!0);a.unshift(b);return Ext.create.apply(Ext,a)},getInstantiator:function(c){var f=this.instantiators,b,a,d;b=f[c];if(!b){a=c;d=[];for(a=0;a<c;a++){d.push('a['+a+']')}b=f[c]=new Function('c','a','return new c('+d.join(',')+')')}return b},postprocessors:{},defaultPostprocessors:[],registerPostprocessor:function(a,f,b,c,d){if(!c){c='last'}if(!b){b=[a]}this.postprocessors[a]={name:a,properties:b||!1,fn:f};this.setDefaultPostprocessorPosition(a,c,d);return this},setDefaultPostprocessors:function(a){this.defaultPostprocessors=g(a);return this},setDefaultPostprocessorPosition:function(d,a,f){var b=this.defaultPostprocessors,c;if(typeof a==='string'){if(a==='first'){b.unshift(d);return this}else {if(a==='last'){b.push(d);return this}}a=a==='after'?1:-1}c=Ext.Array.indexOf(b,f);if(c!==-1){Ext.Array.splice(b,Math.max(0,c+a),0,d)}return this}});a.registerPostprocessor('alias',function(h,f,d){var b=Ext.Array.from(d.alias),a,c;for(a=0,c=b.length;a<c;a++){e=b[a];this.addAlias(f,e)}},['xtype','alias']);a.registerPostprocessor('singleton',function(b,c,a,d){if(a.singleton){d.call(this,b,new c(),a)}else {return !0}return !1});a.registerPostprocessor('alternateClassName',function(i,h,f){var a=f.alternateClassName,b,d,c;if(!(a instanceof Array)){a=[a]}for(b=0,d=a.length;b<d;b++){c=a[b];this.set(c,h)}});a.registerPostprocessor('debugHooks',function(d,a,c){var b=a.isInstance?a.self:a;delete b.prototype.debugHooks});a.registerPostprocessor('deprecated',function(d,a,c){var b=a.isInstance?a.self:a;b.addDeprecations(c.deprecated);delete b.prototype.deprecated});Ext.apply(Ext,{create:function(){var b=arguments[0],f=typeof b,c=o.call(arguments,1),d;if(f==='function'){d=b}else {if(f!=='string'&&c.length===0){c=[b];if(!(b=b.xclass)){b=c[0].xtype;if(b){b='widget.'+b}}}b=a.resolveName(b);d=a.get(b)}if(!d){Ext.syncRequire(b);d=a.get(b)}return a.getInstantiator(c.length)(d,c)},widget:function(i,b){var f=i,d,c,h;if(typeof f!=='string'){b=i;f=b.xtype;c=b.xclass}else {b=b||{}}if(b.isComponent){return b}if(!c){d='widget.'+f;c=a.getNameByAlias(d)}if(c){h=a.get(c)}if(!h){return Ext.create(c||d,b)}return new h(b)},createByAlias:e(a,'instantiateByAlias'),define:function(b,c,d){if(c.override){a.classState[b]=20;return a.createOverride.apply(a,arguments)}a.classState[b]=10;return a.create.apply(a,arguments)},undefine:function(b){var f=a.classes;delete f[b];delete a.existCache[b];delete a.classState[b];a.removeName(b);var c=a.getNamespaceEntry(b),d=c.parent?a.lookupName(c.parent,!1):Ext.global;if(d){try{delete d[c.name]}catch(t){d[c.name]=undefined}}},getClassName:e(a,'getName'),getDisplayName:function(a){if(a){if(a.displayName){return a.displayName}if(a.$name&&a.$class){return Ext.getClassName(a.$class)+'#'+a.$name}if(a.$className){return a.$className}}return 'Anonymous'},getClass:e(a,'getClass'),namespace:function(){var c=r,b;for(b=arguments.length;b-->0;){c=a.lookupName(arguments[b],!0)}return c}});Ext.addRootNamespaces=a.addRootNamespaces;Ext.createWidget=Ext.widget;Ext.ns=Ext.namespace;n.registerPreprocessor('className',function(b,a){if('$className' in a){b.$className=a.$className}},!0,'first');n.registerPreprocessor('alias',function(q,d){var l=q.prototype,c=g(d.xtype),i=g(d.alias),j='widget.',p=j.length,k=Array.prototype.slice.call(l.xtypesChain||[]),h=Ext.merge({},l.xtypesMap||{}),a,f,m,b;for(a=0,f=i.length;a<f;a++){m=i[a];if(m.substring(0,p)===j){b=m.substring(p);Ext.Array.include(c,b)}}q.xtype=d.xtype=c[0];d.xtypes=c;for(a=0,f=c.length;a<f;a++){b=c[a];if(!h[b]){h[b]=!0;k.push(b)}}d.xtypesChain=k;d.xtypesMap=h;Ext.Function.interceptAfter(d,'onClassCreated',function(){var i=l.mixins,j,m;for(j in i){if(i.hasOwnProperty(j)){m=i[j];c=m.xtypes;if(c){for(a=0,f=c.length;a<f;a++){b=c[a];if(!h[b]){h[b]=!0;k.push(b)}}}}}});for(a=0,f=c.length;a<f;a++){b=c[a];Ext.Array.include(i,j+b)}d.alias=i},['xtype','alias']);if(Ext.manifest){var k=Ext.manifest,m=k.classes,d=k.paths,l={},j={},c,f,s,h,p;if(d){if(k.bootRelative){p=Ext.Boot.baseUrl;for(h in d){if(d.hasOwnProperty(h)){d[h]=p+d[h]}}}a.setPath(d)}if(m){for(c in m){j[c]=[];l[c]=[];f=m[c];if(f.alias){l[c]=f.alias}if(f.alternates){j[c]=f.alternates}}}a.addAlias(l);a.addAlternate(j)}return a}(Ext.Class,Ext.Function.alias,Array.prototype.slice,Ext.Array.from,Ext.global);(Ext.env||(Ext.env={})).Browser=function(e,r){var n=this,s=Ext.Boot.browserPrefixes,j=Ext.Boot.browserNames,t=n.enginePrefixes,k=n.engineNames,i=e.match(new RegExp('((?:'+Ext.Object.getValues(s).join(')|(?:')+'))([\\w\\._]+)')),p=e.match(new RegExp('((?:'+Ext.Object.getValues(t).join(')|(?:')+'))([\\w\\._]+)')),c=j.other,g=k.other,f='',l='',a='',q=!1,d,o,b,h,u;n.userAgent=e;this.is=function(a){return !!this.is[a]};if(/Edge\//.test(e)){i=e.match(/(Edge\/)([\w.]+)/)}if(i){c=j[Ext.Object.getKey(s,i[1])];if(c==='Safari'&&/^Opera/.test(e)){c='Opera'}f=new Ext.Version(i[2])}if(p){g=k[Ext.Object.getKey(t,p[1])];l=new Ext.Version(p[2])}if(g==='Trident'&&c!=='IE'){c='IE';var m=e.match(/.*rv:(\d+.\d+)/);if(m&&m.length){m=m[1];f=new Ext.Version(m)}}if(c&&f){Ext.setVersion(c,f)}if(e.match(/FB/)&&c==='Other'){c=j.safari;g=k.webkit}if(e.match(/Android.*Chrome/g)){c='ChromeMobile'}if(e.match(/OPR/)){c='Opera';i=e.match(/OPR\/(\d+.\d+)/);f=new Ext.Version(i[1])}Ext.apply(this,{engineName:g,engineVersion:l,name:c,version:f});this.setFlag(c,!0,r);if(f){a=f.getMajor()||'';if(n.is.IE){a=parseInt(a,10);b=document.documentMode;if(b===7||a===7&&b!==8&&b!==9&&b!==10){a=7}else {if(b===8||a===8&&b!==8&&b!==9&&b!==10){a=8}else {if(b===9||a===9&&b!==7&&b!==8&&b!==10){a=9}else {if(b===10||a===10&&b!==7&&b!==8&&b!==9){a=10}else {if(b===11||a===11&&b!==7&&b!==8&&b!==9&&b!==10){a=11}}}}}u=Math.max(a,Ext.Boot.maxIEVersion);for(d=7;d<=u;++d){o='isIE'+d;if(a<=d){Ext[o+'m']=!0}if(a===d){Ext[o]=!0}if(a>=d){Ext[o+'p']=!0}}}if(n.is.Opera&&parseInt(a,10)<=12){Ext.isOpera12m=!0}Ext.chromeVersion=Ext.isChrome?a:0;Ext.firefoxVersion=Ext.isFirefox?a:0;Ext.ieVersion=Ext.isIE?a:0;Ext.operaVersion=Ext.isOpera?a:0;Ext.safariVersion=Ext.isSafari?a:0;Ext.webKitVersion=Ext.isWebKit?a:0;this.setFlag(c+a,!0,r);this.setFlag(c+f.getShortVersion())}for(d in j){if(j.hasOwnProperty(d)){h=j[d];this.setFlag(h,c===h)}}this.setFlag(h);if(l){this.setFlag(g+(l.getMajor()||''));this.setFlag(g+l.getShortVersion())}for(d in k){if(k.hasOwnProperty(d)){h=k[d];this.setFlag(h,g===h,r)}}this.setFlag('Standalone',!!navigator.standalone);this.setFlag('Ripple',!!document.getElementById('tinyhippos-injected')&&!Ext.isEmpty(window.top.ripple));this.setFlag('WebWorks',!!window.blackberry);if(window.PhoneGap!==undefined||window.Cordova!==undefined||window.cordova!==undefined){q=!0;this.setFlag('PhoneGap');this.setFlag('Cordova')}if(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)(?!.*FBAN)/i.test(e)){q=!0}this.setFlag('WebView',q);this.isStrict=Ext.isStrict=document.compatMode==='CSS1Compat';this.isSecure=Ext.isSecure;this.identity=c+a+(this.isStrict?'Strict':'Quirks')};Ext.env.Browser.prototype={constructor:Ext.env.Browser,engineNames:{webkit:'WebKit',gecko:'Gecko',presto:'Presto',trident:'Trident',other:'Other'},enginePrefixes:{webkit:'AppleWebKit/',gecko:'Gecko/',presto:'Presto/',trident:'Trident/'},styleDashPrefixes:{WebKit:'-webkit-',Gecko:'-moz-',Trident:'-ms-',Presto:'-o-',Other:''},stylePrefixes:{WebKit:'Webkit',Gecko:'Moz',Trident:'ms',Presto:'O',Other:''},propertyPrefixes:{WebKit:'webkit',Gecko:'moz',Trident:'ms',Presto:'o',Other:''},name:null,version:null,engineName:null,engineVersion:null,setFlag:function(b,a,c){if(a===undefined){a=!0}this.is[b]=a;this.is[b.toLowerCase()]=a;if(c){Ext['is'+b]=a}return this},getStyleDashPrefix:function(){return this.styleDashPrefixes[this.engineName]},getStylePrefix:function(){return this.stylePrefixes[this.engineName]},getVendorProperyName:function(b){var a=this.propertyPrefixes[this.engineName];if(a.length>0){return a+Ext.String.capitalize(b)}return b},getPreferredTranslationMethod:function(a){if(typeof a==='object'&&'translationMethod' in a&&a.translationMethod!=='auto'){return a.translationMethod}else {return 'csstransform'}}};(function(a){Ext.browser=new Ext.env.Browser(a,!0);Ext.userAgent=a.toLowerCase();Ext.SSL_SECURE_URL=Ext.isSecure&&Ext.isIE?"javascript:''":'about:blank'})(Ext.global.navigator.userAgent);Ext.env.OS=function(j,k,b){var n=this,g=Ext.Boot.osNames,h=Ext.Boot.osPrefixes,a,c='',m=n.is,d,l,f,i,e;b=b||Ext.browser;for(d in h){if(h.hasOwnProperty(d)){l=h[d];f=j.match(new RegExp('(?:'+l+')([^\\s;]+)'));if(f){a=g[d];e=f[1];if(e&&e==='HTC_'){c=new Ext.Version('2.3')}else {if(e&&e==='Silk/'){c=new Ext.Version('2.3')}else {c=new Ext.Version(f[f.length-1])}}break}}}if(!a){a=g[(j.toLowerCase().match(/mac|win|linux/)||['other'])[0]];c=new Ext.Version('')}this.name=a;this.version=c;if(k){this.setFlag(k.replace(/ simulator$/i,''))}this.setFlag(a);if(c){this.setFlag(a+(c.getMajor()||''));this.setFlag(a+c.getShortVersion())}for(d in g){if(g.hasOwnProperty(d)){i=g[d];if(!m.hasOwnProperty(a)){this.setFlag(i,a===i)}}}if(this.name==='iOS'&&window.screen.height===568){this.setFlag('iPhone5')}if(b.is.Safari||b.is.Silk){if(this.is.Android2||this.is.Android3||b.version.shortVersion===501){b.setFlag('AndroidStock')}if(this.is.Android4){b.setFlag('AndroidStock');b.setFlag('AndroidStock4')}}};Ext.env.OS.prototype={constructor:Ext.env.OS,is:function(a){return !!this[a]},name:null,version:null,setFlag:function(b,a){if(a===undefined){a=!0}if(this.flags){this.flags[b]=a}this.is[b]=a;this.is[b.toLowerCase()]=a;return this}};(function(){var h=Ext.global.navigator,i=h.userAgent,e=Ext.env.OS,f=Ext.is||(Ext.is={}),a,c,b;e.prototype.flags=f;Ext.os=a=new e(i,h.platform);c=a.name;Ext['is'+c]=!0;Ext.isMac=f.Mac=f.MacOS;var d=window.location.search.match(/deviceType=(Tablet|Phone)/),g=window.deviceType;if(d&&d[1]){b=d[1]}else {if(g==='iPhone'){b='Phone'}else {if(g==='iPad'){b='Tablet'}else {if(!a.is.Android&&!a.is.iOS&&!a.is.WindowsPhone&&/Windows|Linux|MacOS/.test(c)){b='Desktop';Ext.browser.is.WebView=!!Ext.browser.is.Ripple}else {if(a.is.iPad||a.is.RIMTablet||a.is.Android3||Ext.browser.is.Silk||a.is.Android&&i.search(/mobile/i)===-1){b='Tablet'}else {b='Phone'}}}}}a.setFlag(b,!0);a.deviceType=b;delete e.prototype.flags})();Ext.feature={has:function(a){return !!this.has[a]},testElements:{},getTestElement:function(a,b){if(a===undefined){a='div'}else {if(typeof a!=='string'){return a}}if(b){return document.createElement(a)}if(!this.testElements[a]){this.testElements[a]=document.createElement(a)}return this.testElements[a]},isStyleSupported:function(a,d){var b=this.getTestElement(d).style,c=Ext.String.capitalize(a);if(typeof b[a]!=='undefined'||typeof b[Ext.browser.getStylePrefix(a)+c]!=='undefined'){return !0}return !1},isStyleSupportedWithoutPrefix:function(b,c){var a=this.getTestElement(c).style;if(typeof a[b]!=='undefined'){return !0}return !1},isEventSupported:function(e,d){if(d===undefined){d=window}var a=this.getTestElement(d),b='on'+e.toLowerCase(),c=b in a;if(!c){if(a.setAttribute&&a.removeAttribute){a.setAttribute(b,'');c=typeof a[b]==='function';if(typeof a[b]!=='undefined'){a[b]=undefined}a.removeAttribute(b)}}return c},getStyle:function(a,c){var b=a.ownerDocument.defaultView,d=b?b.getComputedStyle(a,null):a.currentStyle;return (d||a.style)[c]},getSupportedPropertyName:function(c,a){var b=Ext.browser.getVendorProperyName(a);if(b in c){return b}else {if(a in c){return a}}return null},detect:function(h){var c=this,g=document,m=c.toRun||c.tests,i=m.length,f=g.createElement('div'),k=[],j=Ext.supports,n=c.has,a,e,b,l,d;f.innerHTML='<div style="height:30px;width:50px;"><div style="height:20px;width:20px;"></div></div><div style="width: 200px; height: 200px; position: relative; padding: 5px;"><div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"></div></div><div style="position: absolute; left: 10%; top: 10%;"></div><div style="float:left; background-color:transparent;"></div>';if(h){g.body.appendChild(f)}l=c.preDetected[Ext.browser.identity]||[];while(i--){b=m[i];d=l[i];a=b.name;e=b.names;if(d===undefined){if(!h&&b.ready){k.push(b);continue}d=b.fn.call(c,g,f)}if(a){j[a]=n[a]=d}else {if(e){while(e.length){a=e.pop();j[a]=n[a]=d}}}}if(h){g.body.removeChild(f)}c.toRun=k},report:function(){var b=[],c=this.tests.length,a;for(a=0;a<c;++a){b.push(this.has[this.tests[a].name]?1:0)}Ext.log(Ext.browser.identity+': ['+b.join(',')+']')},preDetected:{},tests:[{name:'CloneNodeCopiesExpando',fn:function(){var a=document.createElement('div');a.expandoProp={};return a.cloneNode().expandoProp===a.expandoProp}},{name:'CSSPointerEvents',fn:function(a){return 'pointerEvents' in a.documentElement.style}},{name:'CSS3BoxShadow',fn:function(a){return 'boxShadow' in a.documentElement.style||'WebkitBoxShadow' in a.documentElement.style||'MozBoxShadow' in a.documentElement.style}},{name:'CSS3NegationSelector',fn:function(a){try{a.querySelectorAll('foo:not(bar)')}catch(b){return !1}return !0}},{name:'ClassList',fn:function(a){return !!a.documentElement.classList}},{name:'Canvas',fn:function(){var a=this.getTestElement('canvas');return !!(a&&a.getContext&&a.getContext('2d'))}},{name:'Svg',fn:function(a){return !!(a.createElementNS&&!!a.createElementNS('http://www.w3.org/2000/svg','svg').createSVGRect)}},{name:'Vml',fn:function(){var a=this.getTestElement(),b=!1;a.innerHTML='<!--[if vml]><br><![endif]-->';b=a.childNodes.length===1;a.innerHTML='';return b}},{name:'touchScroll',fn:function(){var a=0;if(Ext.os.is.Desktop&&(navigator.maxTouchPoints||navigator.msMaxTouchPoints)){a=1}else {if(Ext.supports.Touch){a=2}}return a}},{name:'Touch',fn:function(){var a=navigator.msMaxTouchPoints||navigator.maxTouchPoints;if(Ext.browser.is.Chrome&&Ext.browser.version.isLessThanOrEqual(39)){return Ext.supports.TouchEvents&&a!==1||a>1}else {return Ext.supports.TouchEvents||a>0}}},{name:'TouchEvents',fn:function(){return this.isEventSupported('touchend')}},{name:'PointerEvents',fn:function(){return navigator.pointerEnabled}},{name:'MSPointerEvents',fn:function(){return navigator.msPointerEnabled}},{name:'Orientation',fn:function(){return 'orientation' in window&&this.isEventSupported('orientationchange')}},{name:'OrientationChange',fn:function(){return this.isEventSupported('orientationchange')}},{name:'DeviceMotion',fn:function(){return this.isEventSupported('devicemotion')}},{names:['Geolocation','GeoLocation'],fn:function(){return 'geolocation' in window.navigator}},{name:'SqlDatabase',fn:function(){return 'openDatabase' in window}},{name:'WebSockets',fn:function(){return 'WebSocket' in window}},{name:'Range',fn:function(){return !!document.createRange}},{name:'CreateContextualFragment',fn:function(){var a=!!document.createRange?document.createRange():!1;return a&&!!a.createContextualFragment}},{name:'History',fn:function(){return 'history' in window&&'pushState' in window.history}},{name:'Css3dTransforms',fn:function(){return this.has('CssTransforms')&&this.isStyleSupported('perspective')}},{name:'CssTransforms',fn:function(){return this.isStyleSupported('transform')}},{name:'CssTransformNoPrefix',fn:function(){return this.isStyleSupportedWithoutPrefix('transform')}},{name:'CssAnimations',fn:function(){return this.isStyleSupported('animationName')}},{names:['CssTransitions','Transitions'],fn:function(){return this.isStyleSupported('transitionProperty')}},{names:['Audio','AudioTag'],fn:function(){return !!this.getTestElement('audio').canPlayType}},{name:'Video',fn:function(){return !!this.getTestElement('video').canPlayType}},{name:'LocalStorage',fn:function(){try{if('localStorage' in window&&window['localStorage']!==null){localStorage.setItem('sencha-localstorage-test','test success');localStorage.removeItem('sencha-localstorage-test');return !0}}catch(b){}return !1}},{name:'XHR2',fn:function(){return window.ProgressEvent&&window.FormData&&window.XMLHttpRequest&&'withCredentials' in new XMLHttpRequest()}},{name:'XHRUploadProgress',fn:function(){if(window.XMLHttpRequest&&!Ext.browser.is.AndroidStock){var a=new XMLHttpRequest();return a&&'upload' in a&&'onprogress' in a.upload}return !1}},{name:'NumericInputPlaceHolder',fn:function(){return !(Ext.browser.is.AndroidStock4&&Ext.os.version.getMinor()<2)}},{name:'matchesSelector',fn:function(){var a=document.documentElement,d='matches',e='webkitMatchesSelector',b='msMatchesSelector',c='mozMatchesSelector';return a[d]?d:a[e]?e:a[b]?b:a[c]?c:null}},{name:'RightMargin',ready:!0,fn:function(c,b){var a=c.defaultView;return !(a&&a.getComputedStyle(b.firstChild.firstChild,null).marginRight!=='0px')}},{name:'DisplayChangeInputSelectionBug',fn:function(){var a=Ext.webKitVersion;return 0<a&&a<533}},{name:'DisplayChangeTextAreaSelectionBug',fn:function(){var a=Ext.webKitVersion;return 0<a&&a<534.24}},{name:'TransparentColor',ready:!0,fn:function(c,b,a){a=c.defaultView;return !(a&&a.getComputedStyle(b.lastChild,null).backgroundColor!=='transparent')}},{name:'ComputedStyle',ready:!0,fn:function(b,c,a){a=b.defaultView;return a&&a.getComputedStyle}},{name:'Float',fn:function(a){return 'cssFloat' in a.documentElement.style}},{name:'CSS3BorderRadius',ready:!0,fn:function(d){var b=['borderRadius','BorderRadius','MozBorderRadius','WebkitBorderRadius','OBorderRadius','KhtmlBorderRadius'],c=!1,a;for(a=0;a<b.length;a++){if(d.documentElement.style[b[a]]!==undefined){c=!0}}return c&&!Ext.isIE9}},{name:'CSS3LinearGradient',fn:function(i,c){var a='background-image:',e='-webkit-gradient(linear, left top, right bottom, from(black), to(white))',b='linear-gradient(left top, black, white)',g='-moz-'+b,h='-ms-'+b,f='-o-'+b,d=[a+e,a+b,a+g,a+h,a+f];c.style.cssText=d.join(';');return (''+c.style.backgroundImage).indexOf('gradient')!==-1&&!Ext.isIE9}},{name:'MouseEnterLeave',fn:function(a){return 'onmouseenter' in a.documentElement&&'onmouseleave' in a.documentElement}},{name:'MouseWheel',fn:function(a){return 'onmousewheel' in a.documentElement}},{name:'Opacity',fn:function(b,a){if(Ext.isIE8){return !1}a.firstChild.style.cssText='opacity:0.73';return a.firstChild.style.opacity=='0.73'}},{name:'Placeholder',fn:function(a){return 'placeholder' in a.createElement('input')}},{name:'Direct2DBug',fn:function(a){return Ext.isString(a.documentElement.style.msTransformOrigin)&&Ext.isIE9m}},{name:'BoundingClientRect',fn:function(a){return 'getBoundingClientRect' in a.documentElement}},{name:'RotatedBoundingClientRect',ready:!0,fn:function(e){var d=e.body,c=!1,b=e.createElement('div'),a=b.style;if(b.getBoundingClientRect){a.position='absolute';a.top='0';a.WebkitTransform=a.MozTransform=a.msTransform=a.OTransform=a.transform='rotate(90deg)';a.width='100px';a.height='30px';d.appendChild(b);c=b.getBoundingClientRect().height!==100;d.removeChild(b)}return c}},{name:'ChildContentClearedWhenSettingInnerHTML',ready:!0,fn:function(){var a=this.getTestElement(),b;a.innerHTML='<div>a</div>';b=a.firstChild;a.innerHTML='<div>b</div>';return b.innerHTML!=='a'}},{name:'IncludePaddingInWidthCalculation',ready:!0,fn:function(b,a){return a.childNodes[1].firstChild.offsetWidth===210}},{name:'IncludePaddingInHeightCalculation',ready:!0,fn:function(b,a){return a.childNodes[1].firstChild.offsetHeight===210}},{name:'TextAreaMaxLength',fn:function(a){return 'maxlength' in a.createElement('textarea')}},{name:'GetPositionPercentage',ready:!0,fn:function(b,a){return Ext.feature.getStyle(a.childNodes[2],'left')==='10%'}},{name:'PercentageHeightOverflowBug',ready:!0,fn:function(d){var c=!1,b,a;if(Ext.getScrollbarSize().height){a=this.getTestElement();b=a.style;b.height='50px';b.width='50px';b.overflow='auto';b.position='absolute';a.innerHTML=['<div style="display:table;height:100%;">','<div style="width:51px;"></div>','</div>'].join('');d.body.appendChild(a);if(a.firstChild.offsetHeight===50){c=!0}d.body.removeChild(a)}return c}},{name:'xOriginBug',ready:!0,fn:function(e,b){b.innerHTML='<div id="b1" style="height:100px;width:100px;direction:rtl;position:relative;overflow:scroll"><div id="b2" style="position:relative;width:100%;height:20px;"></div><div id="b3" style="position:absolute;width:20px;height:20px;top:0px;right:0px"></div></div>';var a=document.getElementById('b1').getBoundingClientRect(),c=document.getElementById('b2').getBoundingClientRect(),d=document.getElementById('b3').getBoundingClientRect();return c.left!==a.left&&d.right!==a.right}},{name:'ScrollWidthInlinePaddingBug',ready:!0,fn:function(c){var d=!1,a,b;b=c.createElement('div');a=b.style;a.height='50px';a.width='50px';a.padding='10px';a.overflow='hidden';a.position='absolute';b.innerHTML='<span style="display:inline-block;zoom:1;height:60px;width:60px;"></span>';c.body.appendChild(b);if(b.scrollWidth===70){d=!0}c.body.removeChild(b);return d}},{name:'rtlVertScrollbarOnRight',ready:!0,fn:function(d,c){c.innerHTML='<div style="height:100px;width:100px;direction:rtl;overflow:scroll"><div style="width:20px;height:200px;"></div></div>';var a=c.firstChild,b=a.firstChild;return b.offsetLeft+b.offsetWidth!==a.offsetLeft+a.offsetWidth}},{name:'rtlVertScrollbarOverflowBug',ready:!0,fn:function(c,b){b.innerHTML='<div style="height:100px;width:100px;direction:rtl;overflow:auto"><div style="width:95px;height:200px;"></div></div>';var a=b.firstChild;return a.clientHeight===a.offsetHeight}},{identity:'defineProperty',fn:function(){if(Ext.isIE8m){Ext.Object.defineProperty=Ext.emptyFn;return !1}return !0}},{identify:'nativeXhr',fn:function(){if(typeof XMLHttpRequest!=='undefined'){return !0}XMLHttpRequest=function(){try{return new ActiveXObject('MSXML2.XMLHTTP.3.0')}catch(b){return null}};return !1}},{name:'SpecialKeyDownRepeat',fn:function(){return Ext.isWebKit?parseInt(navigator.userAgent.match(/AppleWebKit\/(\d+)/)[1],10)>=525:!(!(Ext.isGecko||Ext.isIE)||Ext.isOpera&&Ext.operaVersion<12)}},{name:'EmulatedMouseOver',fn:function(){return Ext.os.is.iOS}},{name:'Hashchange',fn:function(){var a=document.documentMode;return 'onhashchange' in window&&(a===undefined||a>7)}},{name:'FixedTableWidthBug',ready:!0,fn:function(){if(Ext.isIE8){return !1}var a=document.createElement('div'),b=document.createElement('div'),c;a.setAttribute('style','display:table;table-layout:fixed;');b.setAttribute('style','display:table-cell;min-width:50px;');a.appendChild(b);document.body.appendChild(a);a.offsetWidth;a.style.width='25px';c=a.offsetWidth;document.body.removeChild(a);return c===50}},{name:'FocusinFocusoutEvents',fn:function(){return !Ext.isGecko}},{name:'AsyncFocusEvents',fn:function(){return Ext.asyncFocus=!!Ext.isIE}},{name:'accessibility',ready:!0,fn:function(f){var g=f.body,b,c,a,e,d;function getColor(a){var c=[],e=0,g,b;if(a.indexOf('rgb(')!==-1){c=a.replace('rgb(','').replace(')','').split(', ')}else {if(a.indexOf('#')!==-1){g=a.length===7?/^#(\S\S)(\S\S)(\S\S)$/:/^#(\S)(\S)(\S)$/;b=a.match(g);if(b){c=['0x'+b[1],'0x'+b[2],'0x'+b[3]]}}}for(var d=0;d<c.length;d++){e+=parseInt(c[d])}return e}b=f.createElement('div');c=f.createElement('img');a=b.style;Ext.apply(a,{width:'2px',position:'absolute',clip:'rect(1px,1px,1px,1px)',borderWidth:'1px',borderStyle:'solid',borderTopTolor:'#f00',borderRightColor:'#ff0',backgroundColor:'#fff',backgroundImage:'url('+Ext.BLANK_IMAGE_URL+')'});c.alt='';c.src=Ext.BLANK_IMAGE_URL;b.appendChild(c);g.appendChild(b);a=b.currentStyle||b.style;d=a.backgroundImage;e={Images:c.offsetWidth===1&&c.readyState!=='uninitialized',BackgroundImages:!(d!==null&&(d==='none'||d==='url(invalid-url:)')),BorderColors:a.borderTopColor!==a.borderRightColor,LightOnDark:getColor(a.color)-getColor(a.backgroundColor)>0};Ext.supports.HighContrastMode=!e.BackgroundImages;g.removeChild(b);b=c=null;return e}},0]};Ext.feature.tests.pop();Ext.supports={};Ext.feature.detect();Ext.env.Ready={blocks:(location.search||'').indexOf('ext-pauseReadyFire')>0?1:0,bound:0,delay:1,firing:!1,generation:0,listeners:[],nextId:0,sortGeneration:0,state:0,timer:null,bind:function(){var a=Ext.env.Ready,b=document;if(!a.bound){if(b.readyState==='complete'){a.onReadyEvent({type:b.readyState||'body'})}else {a.bound=1;if(Ext.browser.is.PhoneGap&&!Ext.os.is.Desktop){a.bound=2;b.addEventListener('deviceready',a.onReadyEvent,!1)}b.addEventListener('DOMContentLoaded',a.onReadyEvent,!1);window.addEventListener('load',a.onReadyEvent,!1)}}},block:function(){++this.blocks;Ext.isReady=!1},fireReady:function(){var a=Ext.env.Ready;if(!a.state){Ext._readyTime=Ext.ticks();Ext.isDomReady=!0;a.state=1;Ext.feature.detect(!0);if(!a.delay){a.handleReady()}else {if(navigator.standalone){a.timer=Ext.defer(function(){a.timer=null;a.handleReadySoon()},1)}else {a.handleReadySoon()}}}},handleReady:function(){var a=this;if(a.state===1){a.state=2;Ext._beforeReadyTime=Ext.ticks();a.invokeAll();Ext._afterReadyTime=Ext.ticks()}},handleReadySoon:function(b){var a=this;if(!a.timer){a.timer=Ext.defer(function(){a.timer=null;a.handleReady()},b||a.delay)}},invoke:function(a){var b=a.delay;if(b){Ext.defer(a.fn,b,a.scope)}else {if(Ext.elevateFunction){Ext.elevateFunction(a.fn,a.scope)}else {a.fn.call(a.scope)}}},invokeAll:function(){if(Ext.elevateFunction){Ext.elevateFunction(this.doInvokeAll,this)}else {this.doInvokeAll()}},doInvokeAll:function(){var a=this,b=a.listeners,c;if(!a.blocks){Ext.isReady=!0}a.firing=!0;while(b.length){if(a.sortGeneration!==a.generation){a.sortGeneration=a.generation;b.sort(a.sortFn)}c=b.pop();if(a.blocks&&!c.dom){b.push(c);break}a.invoke(c)}a.firing=!1},makeListener:function(d,c,b){var a={fn:d,id:++this.nextId,scope:c,dom:!1,priority:0};if(b){Ext.apply(a,b)}a.phase=a.dom?0:1;return a},on:function(e,d,c){var a=Ext.env.Ready,b=a.makeListener(e,d,c);if(a.state===2&&!a.firing&&(b.dom||!a.blocks)){a.invoke(b)}else {a.listeners.push(b);++a.generation;if(!a.bound){a.bind()}}},onReadyEvent:function(b){var a=Ext.env.Ready;if(Ext.elevateFunction){Ext.elevateFunction(a.doReadyEvent,a,arguments)}else {a.doReadyEvent(b)}},doReadyEvent:function(b){var a=this;if(a.bound>0){a.unbind();a.bound=-1}if(!a.state){a.fireReady()}},sortFn:function(a,b){return -(a.phase-b.phase||b.priority-a.priority||a.id-b.id)},unblock:function(){var a=this;if(a.blocks){if(!--a.blocks){if(a.state===2&&!a.firing){a.invokeAll()}}}},unbind:function(){var a=this,b=document;if(a.bound>1){b.removeEventListener('deviceready',a.onReadyEvent,!1)}b.removeEventListener('DOMContentLoaded',a.onReadyEvent,!1);window.removeEventListener('load',a.onReadyEvent,!1)}};(function(){var a=Ext.env.Ready;if(Ext.isIE9m){Ext.apply(a,{scrollTimer:null,readyStatesRe:/complete/i,pollScroll:function(){var b=!0;try{document.documentElement.doScroll('left')}catch(c){b=!1}if(b&&document.body){a.onReadyEvent({type:'doScroll'})}else {a.scrollTimer=Ext.defer(a.pollScroll,20)}return b},bind:function(){if(a.bound){return}var b=document,c;try{c=window.frameElement===undefined}catch(d){}if(!c||!b.documentElement.doScroll){a.pollScroll=Ext.emptyFn}else {if(a.pollScroll()){return}}if(b.readyState==='complete'){a.onReadyEvent({type:'already '+(b.readyState||'body')})}else {b.attachEvent('onreadystatechange',a.onReadyStateChange);window.attachEvent('onload',a.onReadyEvent);a.bound=1}},unbind:function(){document.detachEvent('onreadystatechange',a.onReadyStateChange);window.detachEvent('onload',a.onReadyEvent);if(Ext.isNumber(a.scrollTimer)){clearTimeout(a.scrollTimer);a.scrollTimer=null}},onReadyStateChange:function(){var b=document.readyState;if(a.readyStatesRe.test(b)){a.onReadyEvent({type:b})}}})}Ext.onDocumentReady=function(e,d,b){var c={dom:!0};if(b){Ext.apply(c,b)}a.on(e,d,c)};Ext.onReady=function(d,c,b){a.on(d,c,b)};Ext.onInternalReady=function(d,c,b){a.on(d,c,Ext.apply({priority:1000},b))};a.bind()})();Ext.Loader=new function(){var a=this,b=Ext.ClassManager,i=Ext.Boot,o=Ext.Class,c=Ext.env.Ready,k=Ext.Function.alias,h=['extend','mixins','requires'],j={},m=[],f=[],g=[],l={},d={},e={enabled:!0,scriptChainDelay:!1,disableCaching:!0,disableCachingParam:'_dc',paths:b.paths,preserveScripts:!0,scriptCharset:undefined},n={disableCaching:!0,disableCachingParam:!0,preserveScripts:!0,scriptChainDelay:'loadDelay'};Ext.apply(a,{isInHistory:j,isLoading:!1,history:m,config:e,readyListeners:f,optionalRequires:g,requiresMap:l,hasFileLoadError:!1,scriptsLoading:0,syncModeEnabled:!1,missingQueue:d,init:function(){var k=document.getElementsByTagName('script'),m=k[k.length-1].src,n=m.substring(0,m.lastIndexOf('/')+1),l=Ext._classPathMetadata,h=Ext.Microloader,g=Ext.manifest,d,i,j,e,f;if(!b.getPath('Ext')){b.setPath('Ext',n+'src')}if(l){Ext._classPathMetadata=null;a.addClassPathMappings(l)}if(g){d=g.loadOrder;i=Ext.Boot.baseUrl;if(d&&g.bootRelative){for(j=d.length,e=0;e<j;e++){f=d[e];f.path=i+f.path}}}if(h){c.block();h.onMicroloaderReady(function(){c.unblock()})}},setConfig:Ext.Function.flexSetter(function(b,d){if(b==='paths'){a.setPath(d)}else {e[b]=d;var c=n[b];if(c){i.setConfig(c===!0?b:c,d)}}return a}),getConfig:function(a){return a?e[a]:e},setPath:function(){b.setPath.apply(b,arguments);return a},addClassPathMappings:function(c){b.setPath(c);return a},addBaseUrlClassPathMappings:function(a){for(var b in a){a[b]=i.baseUrl+a[b]}Ext.Loader.addClassPathMappings(a)},getPath:function(a){return b.getPath(a)},require:function(c,f,e,d){if(d){return a.exclude(d).require(c,f,e)}var g=b.getNamesByExpression(c);return a.load(g,f,e)},syncRequire:function(){var b=a.syncModeEnabled;a.syncModeEnabled=!0;var c=a.require.apply(a,arguments);a.syncModeEnabled=b;return c},exclude:function(d){var c=b.select({require:function(b,e,c){return a.load(b,e,c)},syncRequire:function(b,g,e){var c=a.syncModeEnabled;a.syncModeEnabled=!0;var f=a.load(b,g,e);a.syncModeEnabled=c;return f}});c.exclude(d);return c},load:function(h,c,k){if(c){if(c.length){c=a.makeLoadCallback(h,c)}c=c.bind(k||Ext.global)}var g=[],m=h.length,f,i,j,l=[],n=b.classState;for(i=0;i<m;++i){f=b.resolveName(h[i]);if(!b.isCreated(f)){g.push(f);d[f]=a.getPath(f);if(!n[f]){l.push(d[f])}}}j=g.length;if(j){a.missingCount+=j;b.onCreated(function(){if(c){Ext.callback(c,k,arguments)}a.checkReady()},a,g);if(!e.enabled){Ext.raise('Ext.Loader is not enabled, so dependencies cannot be resolved dynamically. Missing required class'+(g.length>1?'es':'')+': '+g.join(', '))}if(l.length){a.loadScripts({url:l,_classNames:g})}else {a.checkReady()}}else {if(c){c.call(k)}a.checkReady()}if(a.syncModeEnabled){if(m===1){return b.get(h[0])}}return a},makeLoadCallback:function(a,c){return function(){var e=[],d=a.length;while(d-->0){e[d]=b.get(a[d])}return c.apply(this,e)}},onLoadFailure:function(){var b=this,c=b.onError;a.hasFileLoadError=!0;--a.scriptsLoading;if(c){c.call(b.userScope,b)}a.checkReady()},onLoadSuccess:function(){var b=this,c=b.onLoad;--a.scriptsLoading;if(c){c.call(b.userScope,b)}a.checkReady()},onReady:function(g,e,h,d){if(h){c.on(g,e,d)}else {var b=c.makeListener(g,e,d);if(a.isLoading){f.push(b)}else {c.invoke(b)}}},addUsedClasses:function(b){var c,d,e;if(b){b=typeof b==='string'?[b]:b;for(d=0,e=b.length;d<e;d++){c=b[d];if(typeof c==='string'&&!Ext.Array.contains(g,c)){g.push(c)}}}return a},triggerReady:function(){var d,b=g;if(a.isLoading&&b.length){g=[];a.require(b)}else {a.isLoading=!1;f.sort(c.sortFn);while(f.length&&!a.isLoading){d=f.pop();c.invoke(d)}c.unblock()}},historyPush:function(c){if(c&&!j[c]&&!b.overrideMap[c]){j[c]=!0;m.push(c)}return a},loadScripts:function(g){var c=Ext.manifest,f=c&&c.loadOrder,d=c&&c.loadOrderMap,b;++a.scriptsLoading;if(f&&!d){c.loadOrderMap=d=i.createLoadOrderMap(f)}a.checkReady();b=Ext.apply({loadOrder:f,loadOrderMap:d,charset:e.scriptCharset,success:a.onLoadSuccess,failure:a.onLoadFailure,sync:a.syncModeEnabled,_classNames:[]},g);b.userScope=b.scope;b.scope=b;i.load(b)},loadScriptsSync:function(c){var b=a.syncModeEnabled;a.syncModeEnabled=!0;a.loadScripts({url:c});a.syncModeEnabled=b},loadScriptsSyncBasePrefix:function(c){var b=a.syncModeEnabled;a.syncModeEnabled=!0;a.loadScripts({url:c,prependBaseUrl:!0});a.syncModeEnabled=b},loadScript:function(b){var d=typeof b==='string',e=b instanceof Array,c=!e&&!d,j=c?b.url:b,f=c&&b.onError,h=c&&b.onLoad,i=c&&b.scope,g={url:j,scope:i,onLoad:h,onError:f,_classNames:[]};a.loadScripts(g)},flushMissingQueue:function(){var a,f,e=0,c=0;for(a in d){e++;f=d[a];if(b.isCreated(a)){delete d[a]}else {if(b.existCache[a]===2){delete d[a]}else {++c}}}this.missingCount=c},checkReady:function(){var d=a.isLoading,b;a.flushMissingQueue();b=a.missingCount+a.scriptsLoading;if(b&&!d){c.block();a.isLoading=!!b}else {if(!b&&d){a.triggerReady()}}}});Ext.require=k(a,'require');Ext.syncRequire=k(a,'syncRequire');Ext.exclude=k(a,'exclude');o.registerPreprocessor('loader',function(o,g,q,p){var r=this,j=[],t,k=b.getName(o),i,e,n,m,d,f,c,s;for(i=0,n=h.length;i<n;i++){f=h[i];if(g.hasOwnProperty(f)){c=g[f];if(typeof c==='string'){j.push(c)}else {if(c instanceof Array){for(e=0,m=c.length;e<m;e++){d=c[e];if(typeof d==='string'){j.push(d)}}}else {if(typeof c!=='function'){for(e in c){if(c.hasOwnProperty(e)){d=c[e];if(typeof d==='string'){j.push(d)}}}}}}}}if(j.length===0){return}if(k){l[k]=j}(k?a.exclude(k):a).require(j,function(){for(i=0,n=h.length;i<n;i++){f=h[i];if(g.hasOwnProperty(f)){c=g[f];if(typeof c==='string'){g[f]=b.get(c)}else {if(c instanceof Array){for(e=0,m=c.length;e<m;e++){d=c[e];if(typeof d==='string'){g[f][e]=b.get(d)}}}else {if(typeof c!=='function'){for(var a in c){if(c.hasOwnProperty(a)){d=c[a];if(typeof d==='string'){g[f][a]=b.get(d)}}}}}}}}p.call(r,o,g,q)});return !1},!0,'after','className');b.registerPostprocessor('uses',function(l,m,h){var d=Ext.manifest,e=d&&d.loadOrder,k=d&&d.classes,b,g,i,j,c,f;if(e){g=k[l];if(g&&!isNaN(c=g.idx)){i=e[c];b=i.uses;f={};for(j=b.length,c=0;c<j;c++){f[b[c]]=!0}b=Ext.Boot.getPathsFromIndexes(f,e,!0);if(b.length>0){a.loadScripts({url:b,sequential:!0})}}}if(h.uses){b=h.uses;a.addUsedClasses(b)}});b.onCreated(a.historyPush);a.init()}();Ext._endTime=Ext.ticks();if(Ext._beforereadyhandler){Ext._beforereadyhandler()}Ext.cmd.derive('Ext.Mixin',Ext.Base,function(a){return {statics:{addHook:function(e,c,d,h){var g=Ext.isFunction(e),b=function(){var b=arguments,i=g?e:h[e],f=this.callParent(b);i.apply(this,b);return f},f=c.hasOwnProperty(d)&&c[d];if(g){e.$previous=Ext.emptyFn}b.$name=d;b.$owner=c.self;if(f){b.$previous=f.$previous;f.$previous=b}else {c[d]=b}}},onClassExtended:function(k,c){var b=c.mixinConfig,d=c.xhooks,j=k.superclass,i=c.onClassMixedIn,h,f,g,e;if(d){delete c.xhooks;(b||(c.mixinConfig=b={})).on=d}if(b){h=j.mixinConfig;if(h){c.mixinConfig=b=Ext.merge({},h,b)}c.mixinId=b.id;f=b.before;g=b.after;d=b.on;e=b.extended}if(f||g||d||e){c.onClassMixedIn=function(b){var h=this.prototype,l=b.prototype,j;if(f){Ext.Object.each(f,function(e,d){b.addMember(e,function(){if(h[d].apply(this,arguments)!==!1){return this.callParent(arguments)}})})}if(g){Ext.Object.each(g,function(e,d){b.addMember(e,function(){var f=this.callParent(arguments);h[d].apply(this,arguments);return f})})}if(d){for(j in d){a.addHook(d[j],l,j,h)}}if(e){b.onExtended(function(){var d=Ext.Array.slice(arguments,0);d.unshift(b);return e.apply(this,d)},this)}if(i){i.apply(this,arguments)}}}}}},0,0,0,0,0,0,[Ext,'Mixin'],0);Ext.util=Ext.util||{};Ext.util.DelayedTask=function(e,c,d,b,g){var a=this,f,h=function(){var f=Ext.GlobalEvents;clearInterval(a.id);a.id=null;e.apply(c,d||[]);if(g!==!1&&f.hasListeners.idle){f.fireEvent('idle')}};b=typeof b==='boolean'?b:!0;a.id=null;a.delay=function(i,l,j,k){if(b){a.cancel()}if(typeof i==='number'){f=i}e=l||e;c=j||c;d=k||d;if(!a.id){a.id=Ext.interval(h,f)}};a.cancel=function(){if(a.id){clearInterval(a.id);a.id=null}}};Ext.cmd.derive('Ext.util.Event',Ext.Base,function(){var d=Array.prototype.slice,c=Ext.Array.insert,b=Ext.Array.toArray,a={};return {isEvent:!0,suspended:0,noOptions:{},constructor:function(a,b){this.name=b;this.observable=a;this.listeners=[]},addListener:function(r,q,g,t,s){var a=this,p=!1,l=a.observable,o=a.name,d,m,i,h,f,k,j,b,e,n;if(a.findListener(r,q)===-1){m=a.createListener(r,q,g,t,s);if(a.firing){a.listeners=a.listeners.slice(0)}d=a.listeners;b=j=d.length;i=g&&g.priority;f=a._highestNegativePriorityIndex;k=f!==undefined;if(i){h=i<0;if(!h||k){for(e=h?f:0;e<j;e++){n=d[e].o?d[e].o.priority||0:0;if(n<i){b=e;break}}}else {a._highestNegativePriorityIndex=b}}else {if(k){b=f}}if(!h&&b<=f){a._highestNegativePriorityIndex++}if(b===j){d[j]=m}else {c(d,b,[m])}if(l.isElement){l._getPublisher(o).subscribe(l,o,g.delegated!==!1,g.capture)}p=!0}return p},createListener:function(h,e,a,k,j){var f=this,i=Ext._namedScopes[e],b={fn:h,scope:e,ev:f,caller:k,manager:j,namedScope:i,defaultScope:i?e||f.observable:undefined,lateBound:typeof h==='string'},c=h,d=!1,g;if(a){b.o=a;if(a.single){c=f.createSingle(c,b,a,e);d=!0}if(a.target){c=f.createTargeted(c,b,a,e,d);d=!0}if(a.delay){c=f.createDelayed(c,b,a,e,d);d=!0}if(a.buffer){c=f.createBuffered(c,b,a,e,d);d=!0}if(f.observable.isElement){g=a.type;if(g){b.type=g}}}b.fireFn=c;b.wrapped=d;return b},findListener:function(e,d){var c=this.listeners,b=c.length,a;while(b--){a=c[b];if(a){if(a.fn===e&&a.scope==d){return b}}}return -1},removeListener:function(o,n,c){var a=this,m=!1,i=a.observable,j=a.name,b,f,l,h,k,d,e,g;c=c||a.findListener(o,n);if(c!==-1){b=a.listeners[c];l=b.o;f=a._highestNegativePriorityIndex;if(a.firing){a.listeners=a.listeners.slice(0)}if(b.task){b.task.cancel();delete b.task}h=b.tasks&&b.tasks.length;if(h){while(h--){b.tasks[h].cancel()}delete b.tasks}a.listeners.splice(c,1);k=b.manager;if(k){d=k.managedListeners;if(d){for(g=d.length;g--;){e=d[g];if(e.item===a.observable&&e.ename===j&&e.fn===o&&e.scope===n){d.splice(g,1)}}}}if(f){if(c<f){a._highestNegativePriorityIndex--}else {if(c===f&&c===a.listeners.length){delete a._highestNegativePriorityIndex}}}if(i.isElement){i._getPublisher(j).unsubscribe(i,j,l.delegated!==!1,l.capture)}m=!0}return m},clearListeners:function(){var b=this.listeners,c=b.length,a;while(c--){a=b[c];this.removeListener(a.fn,a.scope)}},suspend:function(){++this.suspended},resume:function(){if(this.suspended){--this.suspended}},isSuspended:function(){return this.suspended>0},fireDelegated:function(a,b){this.firingObservable=a;return this.fire.apply(this,b)},fire:function(){var e=this,x=Ext.ComponentQuery,r=e.listeners,t=r.length,o=e.observable,i=o.isElement,w=o.isComponent,v=e.firingObservable,b,j,f,l,c,k,u,h,m,p,g,n,a,s,q;if(!e.suspended&&t>0){e.firing=!0;c=arguments.length?d.call(arguments,0):[];u=c.length;if(i){a=c[0]}for(l=0;l<t;l++){k=r[l];b=k.o;if(i){if(m){a.setCurrentTarget(m)}p=k.type;if(p){g=a;a=c[0]=g.chain({type:p})}Ext.EventObject=a}n=c;if(b){j=b.delegate;if(j){if(i){h=a.getTarget('#'+a.currentTarget.id+' '+j);if(h){c[1]=h;m=a.currentTarget;a.setCurrentTarget(h)}else {continue}}else {if(w&&!x.is(v,j,o)){continue}}}if(i){if(b.preventDefault){a.preventDefault()}if(b.stopPropagation){a.stopPropagation()}if(b.stopEvent){a.stopEvent()}}c[u]=b;if(b.args){n=b.args.concat(c)}}f=e.getFireInfo(k);s=f.fn;q=f.scope;f.fn=f.scope=null;if(s.apply(q,n)===!1){Ext.EventObject=null;return e.firing=!1}if(g){a=c[0]=g;g=null}Ext.EventObject=null}}e.firing=!1;return !0},getFireInfo:function(b,g){var f=this.observable,h=b.fireFn,c=b.scope,d=b.namedScope,e;if(!g&&b.wrapped){a.fn=h;return a}e=g?b.fn:h;if(b.lateBound){if(!c||d){c=(b.caller||f).resolveListenerScope(b.defaultScope)}e=c[e]}else {if(d&&d.isController){c=(b.caller||f).resolveListenerScope(b.defaultScope)}else {if(!c||d){c=f}}}a.fn=e;a.scope=c;return a},createTargeted:function(b,a,e,c,d){return function(){if(e.target===arguments[0]){var f;if(!d){f=a.ev.getFireInfo(a,!0);b=f.fn;c=f.scope;f.fn=f.scope=null}return b.apply(c,arguments)}}},createBuffered:function(c,a,f,d,e){a.task=new Ext.util.DelayedTask();return function(){if(a.task){var g;if(!e){g=a.ev.getFireInfo(a,!0);c=g.fn;d=g.scope;g.fn=g.scope=null}a.task.delay(f.buffer,c,d,b(arguments))}}},createDelayed:function(c,a,f,d,e){return function(){var h=new Ext.util.DelayedTask(),g;if(!e){g=a.ev.getFireInfo(a,!0);c=g.fn;d=g.scope;g.fn=g.scope=null}if(!a.tasks){a.tasks=[]}a.tasks.push(h);h.delay(f.delay||10,c,d,b(arguments))}},createSingle:function(c,b,e,a,d){return function(){var g=b.ev,h=g.observable,i=b.fn,f;if(h){h.removeListener(g.name,i,a)}else {g.removeListener(i,a)}if(!d){f=g.getFireInfo(b,!0);c=f.fn;a=f.scope;f.fn=f.scope=null}return c.apply(a,arguments)}}}},1,0,0,0,0,0,[Ext.util,'Event'],0);Ext.cmd.derive('Ext.mixin.Identifiable',Ext.Base,{statics:{uniqueIds:{}},isIdentifiable:!0,mixinId:'identifiable',idCleanRegex:/\.|[^\w\-]/g,defaultIdPrefix:'ext-',defaultIdSeparator:'-',getOptimizedId:function(){return this.id},getUniqueId:function(){var e=this.id,c,b,f,d,a;if(!(e||e===0)){c=this.self.prototype;b=this.defaultIdSeparator;d=Ext.mixin.Identifiable.uniqueIds;if(!c.hasOwnProperty('identifiablePrefix')){f=this.xtype;if(f){a=this.defaultIdPrefix+f.replace(this.idCleanRegex,b)+b}else {if(!(a=c.$className)){a=this.defaultIdPrefix+'anonymous'+b}else {a=a.replace(this.idCleanRegex,b).toLowerCase()+b}}c.identifiablePrefix=a}a=this.identifiablePrefix;if(!d.hasOwnProperty(a)){d[a]=0}e=this.id=this.id=a+ ++d[a]}this.getUniqueId=this.getOptimizedId;return e},setId:function(a){this.id=this.id=a},getId:function(){var a=this.id;if(!a){a=this.getUniqueId()}this.getId=this.getOptimizedId;return a}},0,0,0,0,0,0,[Ext.mixin,'Identifiable'],0);Ext.cmd.derive('Ext.mixin.Observable',Ext.Mixin,function(c){var d=Ext.emptyFn,f=[],e=Array.prototype,b=e.slice,a=function(d){if(d instanceof a){return d}this.observable=d;if(arguments[1].isObservable){this.managedListeners=!0}this.args=b.call(arguments,1)};a.prototype.destroy=function(){this.destroy=Ext.emptyFn;var a=this.observable;a[this.managedListeners?'mun':'un'].apply(a,this.args)};return {mixinConfig:{id:'observable',after:{destroy:'clearListeners'}},statics:{releaseCapture:function(a){a.fireEventArgs=this.prototype.fireEventArgs},capture:function(e,d,a){var b=function(b,f){return d.apply(a,[b].concat(f))};this.captureArgs(e,b,a)},captureArgs:function(a,d,b){a.fireEventArgs=Ext.Function.createInterceptor(a.fireEventArgs,d,b)},observe:function(a,b){if(a){if(!a.isObservable){Ext.applyIf(a,new this());this.captureArgs(a.prototype,a.fireEventArgs,a)}if(Ext.isObject(b)){a.on(b)}}return a},prepareClass:function(a,d,l){var i=a.listeners=[],j=l||a.prototype,b=j.listeners,g=d?d.listeners:a.superclass.self.listeners,m,f,e;if(g){i.push(g)}if(b){f=b.scope;if(!f){b.scope='self'}else {e=Ext._namedScopes[f];if(e&&e.isController){b.scope='self.controller'}}i.push(b);j.listeners=null}if(!a.HasListeners){var h=function(){},k=a.superclass.HasListeners||d&&d.HasListeners||c.HasListeners;a.prototype.HasListeners=a.HasListeners=h;h.prototype=a.hasListeners=new k()}}},isObservable:!0,eventsSuspended:0,constructor:function(d){var a=this,h=a.self,f,b,g,i,e;if(a.$observableInitialized){return}a.$observableInitialized=!0;a.hasListeners=new a.HasListeners();a.eventedBeforeEventNames={};a.events=a.events||{};f=h.listeners;if(f&&!a._addDeclaredListeners(f)){h.listeners=null}b=d&&d.listeners||a.listeners;if(b){if(b instanceof Array){for(e=0,i=b.length;e<i;++e){a.addListener(b[e])}}else {a.addListener(b)}}g=d&&d.bubbleEvents||a.bubbleEvents;if(g){a.enableBubble(g)}if(a.$applyConfigs){if(d){Ext.apply(a,d)}}else {a.initConfig(d)}if(b){a.listeners=null}},onClassExtended:function(a,b){if(!a.HasListeners){c.prepareClass(a,a.prototype.$observableMixedIn?undefined:b)}},$eventOptions:{scope:1,delay:1,buffer:1,onFrame:1,single:1,args:1,destroyable:1,priority:1,order:1},$orderToPriority:{before:100,current:0,after:-100},_addDeclaredListeners:function(b){var a=this;if(b instanceof Array){Ext.each(b,a._addDeclaredListeners,a)}else {a._addedDeclaredListeners=!0;a.addListener(b)}return a._addedDeclaredListeners},addManagedListener:function(h,e,j,i,b,l){var f=this,m=f.managedListeners=f.managedListeners||[],g,k;if(typeof e!=='string'){k=arguments.length>4?b:e;b=e;for(e in b){if(b.hasOwnProperty(e)){g=b[e];if(!h.$eventOptions[e]){f.addManagedListener(h,e,g.fn||g,g.scope||b.scope||i,g.fn?g:k,!0)}}}if(b&&b.destroyable){return new a(f,h,b)}}else {if(j!==d){h.doAddListener(e,j,i,b,null,f,f);if(!l&&b&&b.destroyable){return new a(f,h,e,j,i)}}}},removeManagedListener:function(h,a,k,j){var e=this,b,d,g,i,f;if(typeof a!=='string'){b=a;for(a in b){if(b.hasOwnProperty(a)){d=b[a];if(!h.$eventOptions[a]){e.removeManagedListener(h,a,d.fn||d,d.scope||b.scope||j)}}}}else {g=e.managedListeners?e.managedListeners.slice():[];a=Ext.canonicalEventName(a);for(f=0,i=g.length;f<i;f++){e.removeManagedListenerItem(!1,g[f],h,a,k,j)}}},fireEvent:function(a){return this.fireEventArgs(a,b.call(arguments,1))},resolveListenerScope:function(a){var b=Ext._namedScopes[a];if(b){if(b.isSelf||b.isThis){a=null}}return a||this},fireEventArgs:function(a,h){a=Ext.canonicalEventName(a);var b=this,d=b.events,e=d&&d[a],g=!0;if(b.hasListeners[a]){g=b.doFireEvent(a,h||f,e?e.bubble:!1)}return g},fireAction:function(d,g,b,e,a,f){if(typeof b==='string'&&!e){b=this[b]}a=a?Ext.Object.chain(a):{};a.single=!0;a.priority=f==='after'?-99.5:99.5;this.doAddListener(d,b,e,a);this.fireEventArgs(d,g)},$eventedController:{_paused:1,pause:function(){++this._paused},resume:function(){var a=this,b=a.fn,d=a.scope,g=a.fnArgs,h=a.owner,e,f;if(!--a._paused){if(b){e=Ext.Array.slice(g||a.args);if(g===!1){e.shift()}a.fn=null;e.push(a);if(Ext.isFunction(b)){f=b.apply(d,e)}else {if(d&&Ext.isString(b)&&Ext.isFunction(d[b])){f=d[b].apply(d,e)}}if(f===!1){return !1}}if(!a._paused){return a.owner.fireEventArgs(a.eventName,a.args)}}}},fireEventedAction:function(a,b,k,j,i){var d=this,e=d.eventedBeforeEventNames,h=e[a]||(e[a]='before'+a),f=Ext.apply({owner:d,eventName:a,fn:k,scope:j,fnArgs:i,args:b},d.$eventedController),g;b.push(f);g=d.fireEventArgs(h,b);b.pop();if(g===!1){return !1}return f.resume()},doFireEvent:function(e,g,h){var a=this,f,b,d=!0;do{if(a.eventsSuspended){if(f=a.eventQueue){f.push([e,g])}return d}else {b=a.events&&a.events[e];if(b&&b!==!0){if((d=b.fire.apply(b,g))===!1){break}}}}while(h&&(a=a.getBubbleParent()));return d},getBubbleParent:function(){var b=this,a=b.getBubbleTarget&&b.getBubbleTarget();if(a&&a.isObservable){return a}return null},addListener:function(e,o,h,b,n,m){var d=this,l=Ext._namedScopes,g,f,j,i,k;if(typeof e!=='string'){b=e;h=b.scope;f=h&&l[h];j=f&&f.isSelf;k=(d.isComponent||d.isWidget)&&b.element?d.$elementEventOptions:d.$eventOptions;for(e in b){g=b[e];if(!k[e]){i=g.scope;if(i&&j){f=l[i];if(f&&f.isController){i='self.controller'}}d.doAddListener(e,g.fn||g,i||h,g.fn?g:b,n,m)}}if(b&&b.destroyable){return new a(d,b)}}else {d.doAddListener(e,o,h,b,n,m);if(b&&b.destroyable){return new a(d,e,o,h,b)}}return d},removeListener:function(a,h,g,f){var d=this,e,b;if(typeof a!=='string'){b=a;f=f||d.$eventOptions;for(a in b){if(b.hasOwnProperty(a)){e=b[a];if(!d.$eventOptions[a]){d.doRemoveListener(a,e.fn||e,e.scope||b.scope)}}}}else {d.doRemoveListener(a,h,g)}return d},onBefore:function(a,e,d,b){return this.addListener(a,e,d,b,'before')},onAfter:function(a,e,d,b){return this.addListener(a,e,d,b,'after')},unBefore:function(a,e,d,b){return this.removeListener(a,e,d,b,'before')},unAfter:function(a,e,d,b){return this.removeListener(a,e,d,b,'after')},addBeforeListener:function(){return this.onBefore.apply(this,arguments)},addAfterListener:function(){return this.onAfter.apply(this,arguments)},removeBeforeListener:function(){return this.unBefore.apply(this,arguments)},removeAfterListener:function(){return this.unAfter.apply(this,arguments)},clearListeners:function(){var d=this,a=d.events,f=d.hasListeners,e,b;if(a){for(b in a){if(a.hasOwnProperty(b)){e=a[b];if(e.isEvent){delete f[b];e.clearListeners()}}}d.events=null}d.clearManagedListeners()},clearManagedListeners:function(){var a=this,d=a.managedListeners?a.managedListeners.slice():[],b=0,e=d.length;for(;b<e;b++){a.removeManagedListenerItem(!0,d[b])}a.managedListeners=[]},removeManagedListenerItem:function(b,a,g,f,e,d){if(b||a.item===g&&a.ename===f&&(!e||a.fn===e)&&(!d||a.scope===d)){a.item.doRemoveListener(a.ename,a.fn,a.scope,a.options);if(!b){Ext.Array.remove(this.managedListeners,a)}}},hasListener:function(a){a=Ext.canonicalEventName(a);return !!this.hasListeners[a]},isSuspended:function(a){var b=this.eventsSuspended>0,d=this.events;if(!b&&a&&d){a=d[a];if(a&&a.isEvent){return a.isSuspended()}}return b},suspendEvents:function(a){++this.eventsSuspended;if(a&&!this.eventQueue){this.eventQueue=[]}},suspendEvent:function(){var e=this,f=e.events,g=arguments.length,d,b,a;for(d=0;d<g;d++){a=arguments[d];a=Ext.canonicalEventName(a);b=f[a];if(!b||!b.isEvent){b=e._initEvent(a)}b.suspend()}},resumeEvent:function(){var d=this.events||0,f=d&&arguments.length,b,a,e;for(b=0;b<f;b++){e=Ext.canonicalEventName(arguments[b]);a=d[e];if(a&&a.resume){a.resume()}}},resumeEvents:function(f){var a=this,d=a.eventQueue,e,b;if(a.eventsSuspended&&!--a.eventsSuspended){delete a.eventQueue;if(!f&&d){e=d.length;for(b=0;b<e;b++){a.fireEventArgs.apply(a,d[b])}}}},relayEvents:function(i,d,j){var g=this,k=d.length,b=0,f,h,e={};if(Ext.isObject(d)){for(b in d){h=d[b];e[b]=g.createRelayer(h)}}else {for(;b<k;b++){f=d[b];e[f]=g.createRelayer(j?j+f:f)}}g.mon(i,e,null,null,undefined);return new a(g,i,e)},createRelayer:function(e,a){var d=this;return function(){return d.fireEventArgs.call(d,e,a?b.apply(arguments,a):arguments)}},enableBubble:function(e){if(e){var f=this,h=typeof e=='string'?arguments:e,g=f.events,i=g&&h.length,a,b,d;for(d=0;d<i;++d){a=h[d];a=Ext.canonicalEventName(a);b=g[a];if(!b||!b.isEvent){b=f._initEvent(a)}f.hasListeners._incr_(a);b.bubble=!0}}},destroy:function(){this.clearListeners();this.callParent()},privates:{doAddListener:function(f,j,g,a,i,n,e){var b=this,m=a&&a.managedName,h,k,l;i=i||a&&a.order;if(i){l=a&&a.priority;if(!l){a=a?Ext.Object.chain(a):{};a.priority=b.$orderToPriority[i]}}f=Ext.canonicalEventName(f);if(!e&&(g&&g.isObservable&&g!==b)){e=g}if(e){k=e.managedListeners=e.managedListeners||[];k.push({item:b,ename:m||f,fn:j,scope:g,options:a})}h=(b.events||(b.events={}))[f];if(!h||!h.isEvent){h=b._initEvent(f)}if(j!==d){if(h.addListener(j,g,a,n,e)){b.hasListeners._incr_(f)}}},doRemoveListener:function(a,g,f){var e=this,d=e.events,b;a=Ext.canonicalEventName(a);b=d&&d[a];if(b&&b.isEvent){if(b.removeListener(g,f)){e.hasListeners._decr_(a)}}},_initEvent:function(a){return this.events[a]=new Ext.util.Event(this,a)}},deprecated:{'5.0':{methods:{addEvents:null}}}}},1,0,0,0,0,[[Ext.mixin.Identifiable.prototype.mixinId||Ext.mixin.Identifiable.$className,Ext.mixin.Identifiable]],[Ext.mixin,'Observable'],function(){var a=this,c=a.prototype,d=function(){},b=function(c){if(!c.HasListeners){var d=c.prototype;d.$observableMixedIn=1;a.prepareClass(c,this);c.onExtended(function(d,b){a.prepareClass(d,null,b)});if(d.onClassMixedIn){Ext.override(c,{onClassMixedIn:function(a){b.call(this,a);this.callParent(arguments)}})}else {d.onClassMixedIn=function(a){b.call(this,a)}}}e.call(this,c)},e=c.onClassMixedIn;d.prototype={_decr_:function(b,a){if(a==null){a=1}if(!(this[b]-=a)){delete this[b]}},_incr_:function(a){if(this.hasOwnProperty(a)){++this[a]}else {this[a]=1}}};c.HasListeners=a.HasListeners=d;a.createAlias({on:'addListener',un:'removeListener',mon:'addManagedListener',mun:'removeManagedListener',setListeners:'addListener'});a.observeClass=a.observe;function getMethodEvent(e){var a=(this.methodEvents=this.methodEvents||{})[e],c,b,d,g=this,f;if(!a){this.methodEvents[e]=a={};a.originalFn=this[e];a.methodName=e;a.before=[];a.after=[];f=function(h,a,f){if((b=h.apply(a||g,f))!==undefined){if(typeof b=='object'){if(b.returnValue!==undefined){c=b.returnValue}else {c=b}d=!!b.cancel}else {if(b===!1){d=!0}else {c=b}}}};this[e]=function(){var k=Array.prototype.slice.call(arguments,0),i,h,j;c=b=undefined;d=!1;for(h=0,j=a.before.length;h<j;h++){i=a.before[h];f(i.fn,i.scope,k);if(d){return c}}if((b=a.originalFn.apply(g,k))!==undefined){c=b}for(h=0,j=a.after.length;h<j;h++){i=a.after[h];f(i.fn,i.scope,k);if(d){return c}}return c}}return a}Ext.apply(c,{onClassMixedIn:b,beforeMethod:function(a,c,b){getMethodEvent.call(this,a).before.push({fn:c,scope:b})},afterMethod:function(a,c,b){getMethodEvent.call(this,a).after.push({fn:c,scope:b})},removeMethodListener:function(f,e,d){var b=this.getMethodEvent(f),a,c;for(a=0,c=b.before.length;a<c;a++){if(b.before[a].fn==e&&b.before[a].scope==d){Ext.Array.erase(b.before,a,1);return}}for(a=0,c=b.after.length;a<c;a++){if(b.after[a].fn==e&&b.after[a].scope==d){Ext.Array.erase(b.after,a,1);return}}},toggleEventLogging:function(a){Ext.util.Observable[a?'capture':'releaseCapture'](this,function(b){if(Ext.isDefined(Ext.global.console)){Ext.global.console.log(b,arguments)}})}})});Ext.cmd.derive('Ext.util.HashMap',Ext.Base,{generation:0,config:{keyFn:null},constructor:function(c){var a=this,b;a.mixins.observable.constructor.call(a,c);a.clear(!0);b=a.getKeyFn();if(b){a.getKey=b}},getCount:function(){return this.length},getData:function(b,a){if(a===undefined){a=b;b=this.getKey(a)}return [b,a]},getKey:function(a){return a.id},add:function(c,b){var a=this;if(arguments.length===1){b=c;c=a.getKey(b)}if(a.containsKey(c)){return a.replace(c,b)}a.map[c]=b;++a.length;a.generation++;if(a.hasListeners.add){a.fireEvent('add',a,c,b)}return b},replace:function(b,c){var a=this,d=a.map,e;if(arguments.length===1){c=b;b=a.getKey(c)}if(!a.containsKey(b)){a.add(b,c)}e=d[b];d[b]=c;a.generation++;if(a.hasListeners.replace){a.fireEvent('replace',a,b,c,e)}return c},remove:function(b){var a=this.findKey(b);if(a!==undefined){return this.removeAtKey(a)}return !1},removeAtKey:function(b){var a=this,c;if(a.containsKey(b)){c=a.map[b];delete a.map[b];--a.length;a.generation++;if(a.hasListeners.remove){a.fireEvent('remove',a,b,c)}return !0}return !1},get:function(a){var b=this.map;return b.hasOwnProperty(a)?b[a]:undefined},clear:function(b){var a=this;if(b||a.generation){a.map={};a.length=0;a.generation=b?0:a.generation+1}if(b!==!0&&a.hasListeners.clear){a.fireEvent('clear',a)}return a},containsKey:function(a){var b=this.map;return b.hasOwnProperty(a)&&b[a]!==undefined},contains:function(a){return this.containsKey(this.findKey(a))},getKeys:function(){return this.getArray(!0)},getValues:function(){return this.getArray(!1)},getArray:function(d){var c=[],a,b=this.map;for(a in b){if(b.hasOwnProperty(a)){c.push(d?a:b[a])}}return c},each:function(e,c){var b=Ext.apply({},this.map),a,d=this.length;c=c||this;for(a in b){if(b.hasOwnProperty(a)){if(e.call(c,a,b[a],d)===!1){break}}}return this},clone:function(){var a=new this.self(this.initialConfig),c=this.map,b;a.suspendEvents();for(b in c){if(c.hasOwnProperty(b)){a.add(b,c[b])}}a.resumeEvents();return a},findKey:function(c){var a,b=this.map;for(a in b){if(b.hasOwnProperty(a)&&b[a]===c){return a}}return undefined},destroy:function(){this.callParent();this.map=null}},1,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext.util,'HashMap'],function(b){var a=b.prototype;a.removeByKey=a.removeAtKey});Ext.cmd.derive('Ext.promise.Consequence',Ext.Base,function(a){return {promise:null,deferred:null,onFulfilled:null,onRejected:null,onProgress:null,constructor:function(c,e,d){var b=this;b.onFulfilled=c;b.onRejected=e;b.onProgress=d;b.deferred=new Ext.promise.Deferred();b.promise=b.deferred.promise},trigger:function(e,d){var b=this,c=b.deferred;switch(e){case 'fulfill':b.propagate(d,b.onFulfilled,c,c.resolve);break;case 'reject':b.propagate(d,b.onRejected,c,c.reject);break;}},update:function(b){if(Ext.isFunction(this.onProgress)){b=this.onProgress(b)}this.deferred.update(b)},propagate:function(d,b,c,e){if(Ext.isFunction(b)){this.schedule(function(){try{c.resolve(b(d))}catch(f){c.reject(f)}})}else {e.call(this.deferred,d)}},schedule:function(c){var b=a.queueSize++;a.queue[b]=c;if(!b){Ext.asap(a.dispatch)}},statics:{queue:new Array(10000),queueSize:0,dispatch:function(){var c=a.queue,d,b;for(b=0;b<a.queueSize;++b){d=c[b];c[b]=null;d()}a.queueSize=0}}}},1,0,0,0,0,0,[Ext.promise,'Consequence'],0);Ext.cmd.derive('Ext.promise.Deferred',Ext.Base,{promise:null,consequences:[],completed:!1,completionAction:null,completionValue:null,constructor:function(){var a=this;a.promise=new Ext.promise.Promise(a);a.consequences=[];a.completed=!1;a.completionAction=null;a.completionValue=null},then:function(c,e,d){var a=this,b=new Ext.promise.Consequence(c,e,d);if(a.completed){b.trigger(a.completionAction,a.completionValue)}else {a.consequences.push(b)}return b.promise},resolve:function(c){var a=this,b,d;if(a.completed){return}try{if(c===a.promise){throw new TypeError('A Promise cannot be resolved with itself.')}if((Ext.isObject(c)||Ext.isFunction(c))&&Ext.isFunction(d=c.then)){b=!1;try{d.call(c,function(d){if(!b){b=!0;a.resolve(d)}},function(d){if(!b){b=!0;a.reject(d)}})}catch(e){if(!b){a.reject(e)}}}else {a.complete('fulfill',c)}}catch(f){a.reject(f)}},reject:function(a){if(this.completed){return}this.complete('reject',a)},update:function(e){var b=this.consequences,c,a,d;if(this.completed){return}for(a=0,d=b.length;a<d;a++){c=b[a];c.update(e)}},complete:function(f,g){var a=this,c=a.consequences,d,b,e;a.completionAction=f;a.completionValue=g;a.completed=!0;for(b=0,e=c.length;b<e;b++){d=c[b];d.trigger(a.completionAction,a.completionValue)}a.consequences=null}},1,0,0,0,0,0,[Ext.promise,'Deferred'],0);Ext.cmd.derive('Ext.promise.Promise',Ext.Base,function(a){var b;return {statics:{CancellationError:Ext.global.CancellationError||Error,_ready:function(){b=Ext.promise.Deferred},all:function(c){return a.when(c).then(function(f){var g=new b(),e=f.length,h=new Array(e),d,j,k,i,l;if(!e){g.resolve(h)}else {k=function(d,b){return a.when(d).then(function(i){h[b]=i;if(!--e){g.resolve(h)}return i},function(e){return g.reject(e)})};for(d=i=0,l=f.length;i<l;d=++i){j=f[d];if(d in f){k(j,d)}else {e--}}}return g.promise})},is:function(b){return (Ext.isObject(b)||Ext.isFunction(b))&&Ext.isFunction(b.then)},rethrowError:function(b){Ext.asap(function(){throw b})},when:function(c){var b=new Ext.promise.Deferred();b.resolve(c);return b.promise}},owner:null,constructor:function(b){this.owner=b},then:function(b,d,c,e){var f;if(arguments.length===1&&Ext.isObject(arguments[0])){f=arguments[0];b=f.success;d=f.failure;c=f.progress;e=f.scope}if(e){if(b){b=Ext.Function.bind(b,e)}if(d){d=Ext.Function.bind(d,e)}if(c){c=Ext.Function.bind(c,e)}}return this.owner.then(b,d,c)},otherwise:function(b,c){var d;if(arguments.length===1&&Ext.isObject(arguments[0])){d=arguments[0];b=d.fn;c=d.scope}if(c!=null){b=Ext.Function.bind(b,c)}return this.owner.then(null,b)},always:function(b,c){var d;if(arguments.length===1&&Ext.isObject(arguments[0])){d=arguments[0];b=d.fn;c=d.scope}if(c!=null){b=Ext.Function.bind(b,c)}return this.owner.then(function(d){try{b()}catch(e){a.rethrowError(e)}return d},function(d){try{b()}catch(e){a.rethrowError(e)}throw d})},done:function(){this.owner.then(null,a.rethrowError)},cancel:function(b){if(b==null){b=null}this.owner.reject(new this.self.CancellationError(b))},log:function(b){if(b==null){b=''}return this._owner.then(function(c){Ext.log(''+(b||'Promise')+' resolved with value: '+c);return c},function(c){Ext.log(''+(b||'Promise')+' rejected with reason: '+c);throw c})}}},1,0,0,0,0,0,[Ext.promise,'Promise'],function(a){a._ready()});Ext.cmd.derive('Ext.Promise',Ext.Base,function(){var a;return {statics:{_ready:function(){a=Ext.promise.Promise},all:function(){return a.all.apply(a,arguments)},race:function(){},reject:function(b){var a=new Ext.promise.Deferred();a.reject(b);return a.promise},resolve:function(b){var a=new Ext.promise.Deferred();a.resolve(b);return a.promise}},constructor:function(b){var a=new Ext.promise.Deferred();b(a.resolve.bind(a),a.reject.bind(a));return a.promise}}},1,0,0,0,0,0,[Ext,'Promise'],function(b){var a=Ext.global.Promise;if(a&&a.resolve){Ext.Promise=a}else {b._ready()}});Ext.cmd.derive('Ext.Deferred',Ext.promise.Deferred,function(a){var b,c;return {statics:{_ready:function(){b=Ext.promise.Promise;c=Ext.Promise.resolve},all:function(){return b.all.apply(b,arguments)},any:function(b){return a.some(b,1).then(function(c){return c[0]},function(c){if(c instanceof Error&&c.message==='Too few Promises were resolved.'){Ext.raise('No Promises were resolved.')}else {throw c}})},delay:function(c,b){var d;if(arguments.length===1){b=c;c=undefined}b=Math.max(b,0);d=new a();setTimeout(function(){d.resolve(c)},b);return d.promise},map:function(b,c){return a.resolved(b).then(function(d){var e,g,j,h,k,f,i,l;h=d.length;f=new Array(d.length);e=new a();if(!h){e.resolve(f)}else {k=function(i,g){return a.resolved(i).then(function(e){return c(e,g,f)}).then(function(j){f[g]=j;if(!--h){e.resolve(f)}return j},function(f){return e.reject(f)})};for(g=i=0,l=d.length;i<l;g=++i){j=d[g];if(g in d){k(j,g)}else {h--}}}return e.promise})},memoize:function(e,b,d){var c=Ext.Function.memoize(e,b,d);return function(){return a.all(Ext.Array.slice(arguments)).then(function(f){return c.apply(b,f)})}},parallel:function(d,b){if(b==null){b=null}var c=Ext.Array.slice(arguments,2);return a.map(d,function(e){if(!Ext.isFunction(e)){throw new Error('Invalid parameter: expected a function.')}return e.apply(b,c)})},pipeline:function(d,c,b){if(b==null){b=null}return a.reduce(d,function(f,e){if(!Ext.isFunction(e)){throw new Error('Invalid parameter: expected a function.')}return e.call(b,f)},c)},reduce:function(e,d,c){var b=arguments.length===3;return a.resolved(e).then(function(f){var g=[f,function(b,g,h){return a.resolved(b).then(function(i){return a.resolved(g).then(function(j){return d(i,j,h,f)})})}];if(b){g.push(c)}return Ext.Array.reduce.apply(Ext.Array,g)})},rejected:function(c){var b=new Ext.Deferred();b.reject(c);return b.promise},resolved:function(c){var b=new Ext.Deferred();b.resolve(c);return b.promise},sequence:function(d,b){if(b==null){b=null}var c=Ext.Array.slice(arguments,2);return a.reduce(d,function(e,f){if(!Ext.isFunction(f)){throw new Error('Invalid parameter: expected a function.')}return a.resolved(f.apply(b,c)).then(function(c){e.push(c);return e})},[])},some:function(c,b){return a.resolved(c).then(function(e){var f,g,m,l,k,h,d,i,j,n;i=[];d=b;h=e.length-d+1;f=new a();if(e.length<b){f.reject(new Error('Too few Promises were resolved.'))}else {l=function(g){if(d>0){i.push(g)}d--;if(d===0){f.resolve(i)}return g};m=function(d){h--;if(h===0){f.reject(new Error('Too few Promises were resolved.'))}return d};for(g=j=0,n=e.length;j<n;g=++j){k=e[g];if(g in e){a.resolved(k).then(l,m)}}}return f.promise})},timeout:function(d,e){var c=new a(),b;b=setTimeout(function(){if(b){c.reject(new Error('Promise timed out.'))}},e);a.resolved(d).then(function(f){clearTimeout(b);b=null;c.resolve(f)},function(f){clearTimeout(b);b=null;c.reject(f)});return c.promise}}}},0,0,0,0,0,0,[Ext,'Deferred'],function(a){a._ready()});Ext.Factory=function(b){var a=this;a.aliasPrefix=b+'.';a.cache={};a.name=b.replace(a.fixNameRe,a.fixNameFn);a.type=b};Ext.Factory.prototype={defaultProperty:'type',instanceProp:'isInstance',create:function(a,i){var e=this,f=Ext.ClassManager,h=e.cache,g,d,b,c;if(a){if(a[e.instanceProp]){return a}if(typeof a==='string'){c=a;a={};a[e.defaultProperty]=c}d=a.xclass;c=a.type}if(d){if(!(b=f.get(d))){return f.instantiate(d,a)}}else {if(!(c=c||i||e.defaultType)){b=e.defaultClass}if(!b&&!(b=h[c])){g=e.aliasPrefix+c;d=f.getNameByAlias(g);if(!(b=d&&f.get(d))){return f.instantiateByAlias(g,a)}h[c]=b}}return b.isInstance?b:new b(a)},fixNameRe:/\.[a-z]/ig,fixNameFn:function(a){return a.substring(1).toUpperCase()},clearCache:function(){this.cache={}}};Ext.Factory.define=function(d,b){var c=Ext.Factory,f,a,e;if(d.constructor===Object){Ext.Object.each(d,c.define,c)}else {a=new Ext.Factory(d);if(b){if(b.constructor===Object){Ext.apply(a,b);if(typeof (f=a.xclass)==='string'){a.defaultClass=Ext.ClassManager.get(f)}}else {a.defaultType=b}}c[a.name]=e=a.create.bind(a);e.instance=a}return e};Ext.cmd.derive('Ext.mixin.Factoryable',Ext.Base,{mixinId:'factoryable',onClassMixedIn:function(c){var d=c.prototype,f=d.factoryConfig,a=d.alias,b={},e,g;a=a&&a.length&&a[0];if(a&&(e=a.lastIndexOf('.'))>0){b.type=a.substring(0,e);b.defaultType=a.substring(e+1)}if(f){delete d.factoryConfig;Ext.apply(b,f)}g=Ext.Factory.define(b.type,b);if(c.create===Ext.Base.create){c.create=g}}},0,0,0,0,0,0,[Ext.mixin,'Factoryable'],0);Ext.cmd.derive('Ext.data.request.Base',Ext.Base,{factoryConfig:{type:'request',defaultType:'ajax'},result:null,success:null,timer:null,constructor:function(a){var b=this;Ext.apply(b,a.options||{},a.ownerConfig);b.id=++Ext.data.Connection.requestId;b.owner=a.owner;b.options=a.options;b.requestOptions=a.requestOptions},start:function(){var a=this,b=a.getTimeout();if(b&&a.async){a.timer=Ext.defer(a.onTimeout,b,a)}},abort:function(){var a=this;a.clearTimer();if(!a.timedout){a.aborted=!0}a.abort=Ext.emptyFn},createDeferred:function(){return this.deferred=new Ext.Deferred()},getDeferred:function(){return this.deferred||this.createDeferred()},getPromise:function(){return this.getDeferred().promise},then:function(){var a=this.getPromise();return a.then.apply(a,arguments)},onComplete:function(){var a=this,b=a.deferred,c=a.result;a.clearTimer();if(b){if(a.success){b.resolve(c)}else {b.reject(c)}}},onTimeout:function(){var a=this;a.timedout=!0;a.timer=null;a.abort(!0)},getTimeout:function(){return this.timeout},clearTimer:function(){var a=this.timer;if(a){clearTimeout(a);this.timer=null}},destroy:function(){var a=this;a.abort();a.owner=a.options=a.requestOptions=a.result=null;a.callParent()},privates:{createException:function(){var a=this,b;b={request:a,requestId:a.id,status:a.aborted?-1:0,statusText:a.aborted?'transaction aborted':'communication failure',getResponseHeader:a._getHeader,getAllResponseHeaders:a._getHeaders};if(a.aborted){b.aborted=!0}if(a.timedout){b.timedout=!0}return b},_getHeader:function(b){var a=this.headers;return a&&a[b.toLowerCase()]},_getHeaders:function(){return this.headers}}},1,0,0,0,0,[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.request,'Base'],0);Ext.cmd.derive('Ext.data.flash.BinaryXhr',Ext.Base,{statics:{flashPluginActivated:function(){Ext.data.flash.BinaryXhr.flashPluginActive=!0;Ext.data.flash.BinaryXhr.flashPlugin=document.getElementById('ext-flash-polyfill');Ext.GlobalEvents.fireEvent('flashready')},flashPluginActive:!1,flashPluginInjected:!1,connectionIndex:1,liveConnections:{},flashPlugin:null,onFlashStateChange:function(b,c,d){var a;a=this.liveConnections[Number(b)];if(a){a.onFlashStateChange(c,d)}},registerConnection:function(b){var a=this.connectionIndex;this.conectionIndex=this.connectionIndex+1;this.liveConnections[a]=b;return a},injectFlashPlugin:function(){var c=this,b,a;c.flashPolyfillEl=Ext.getBody().appendChild({id:'ext-flash-polyfill',cn:[{tag:'p',html:'To view this page ensure that Adobe Flash Player version 11.1.0 or greater is installed.'},{tag:'a',href:'http://www.adobe.com/go/getflashplayer',cn:[{tag:'img',src:window.location.protocol+'//www.adobe.com/images/shared/download_buttons/get_flash_player.gif',alt:'Get Adobe Flash player'}]}]});b=[Ext.Loader.getPath('Ext.data.Connection'),'../../../plugins/flash/swfobject.js'].join('/');a='/plugins/flash/FlashPlugin.swf';if(Ext.flashPluginPath){a=Ext.flashPluginPath}Ext.Loader.loadScript({url:b,onLoad:function(){var d='11.4.0';var e='playerProductInstall.swf';var f={};var b={};b.quality='high';b.bgcolor='#ffffff';b.allowscriptaccess='sameDomain';b.allowfullscreen='true';var c={};c.id='ext-flash-polyfill';c.name='polyfill';c.align='middle';swfobject.embedSWF(a,'ext-flash-polyfill','0','0',d,e,f,b,c)},onError:function(){},scope:c});Ext.data.flash.BinaryXhr.flashPluginInjected=!0}},readyState:0,status:0,statusText:'',responseBytes:null,javascriptId:null,constructor:function(b){if(!Ext.data.flash.BinaryXhr.flashPluginInjected){Ext.data.flash.BinaryXhr.injectFlashPlugin()}var a=this;Ext.apply(a,b);a.requestHeaders={}},abort:function(){var a=this;if(a.readyState==4){return}a.aborted=!0;if(!Ext.data.flash.BinaryXhr.flashPluginActive){Ext.GlobalEvents.removeListener('flashready',a.onFlashReady,a);return}Ext.data.flash.BinaryXhr.flashPlugin.abortRequest(a.javascriptId);delete Ext.data.flash.BinaryXhr.liveConnections[a.javascriptId]},getAllResponseHeaders:function(){var a=[];Ext.Object.each(this.responseHeaders,function(c,b){a.push(c+': '+b)});return a.join('\r\n')},getResponseHeader:function(b){var a=this.responseHeaders;return a&&a[b]||null},open:function(c,f,d,e,b){var a=this;a.method=c;a.url=f;a.async=d!==!1;a.user=e;a.password=b},overrideMimeType:function(a){this.mimeType=a},send:function(b){var a=this;a.body=b;if(!Ext.data.flash.BinaryXhr.flashPluginActive){Ext.GlobalEvents.addListener('flashready',a.onFlashReady,a)}else {this.onFlashReady()}},onFlashReady:function(){var a=this,b,c;a.javascriptId=Ext.data.flash.BinaryXhr.registerConnection(a);b={method:a.method,url:a.url,user:a.user,password:a.password,mimeType:a.mimeType,requestHeaders:a.requestHeaders,body:a.body,javascriptId:a.javascriptId};c=Ext.data.flash.BinaryXhr.flashPlugin.postBinary(b)},setReadyState:function(b){var a=this;if(a.readyState!=b){a.readyState=b;a.onreadystatechange()}},setRequestHeader:function(a,b){this.requestHeaders[a]=b},onreadystatechange:Ext.emptyFn,parseData:function(a){var b=this;this.status=a.status||0;b.responseHeaders={};if(b.mimeType){b.responseHeaders['content-type']=b.mimeType}if(a.reason=='complete'){this.responseBytes=a.data;b.responseHeaders['content-length']=a.data.length}else {if(a.reason=='error'||a.reason=='securityError'){this.statusText=a.text;b.responseHeaders['content-length']=0}}},onFlashStateChange:function(b,c){var a=this;if(b==4){a.parseData(c);delete Ext.data.flash.BinaryXhr.liveConnections[a.javascriptId]}a.setReadyState(b)}},1,0,0,0,0,0,[Ext.data.flash,'BinaryXhr'],0);Ext.cmd.derive('Ext.data.request.Ajax',Ext.data.request.Base,{statics:{parseStatus:function(a,b){var c;if(b){if(b.responseType==='arraybuffer'){c=b.byteLength}else {if(b.responseText){c=b.responseText.length}}}a=a==1223?204:a;var e=a>=200&&a<300||a==304||a==0&&Ext.isNumber(c),d=!1;if(!e){switch(a){case 12002:case 12029:case 12030:case 12031:case 12152:case 13030:d=!0;break;}}return {success:e,isException:d}}},start:function(f){var a=this,e=a.options,c=a.requestOptions,d=a.isXdr,b,g;b=a.xhr=a.openRequest(e,c,a.async,a.username,a.password);if(!d){g=a.setupHeaders(b,e,c.data,c.params)}if(a.async){if(!d){b.onreadystatechange=Ext.Function.bind(a.onStateChange,a)}}if(d){a.processXdrRequest(a,b)}Ext.data.request.Base.prototype.start.call(this,f);b.send(f);if(!a.async){return a.onComplete()}return a},abort:function(c){var a=this,b=a.xhr;if(c||a.isLoading()){try{b.onreadystatechange=null}catch(d){b.onreadystatechange=Ext.emptyFn}b.abort();Ext.data.request.Base.prototype.abort.call(this,c);a.onComplete();a.cleanup()}},cleanup:function(){this.xhr=null;delete this.xhr},isLoading:function(){var c=this,a=c.xhr,b=a&&a.readyState,d=Ext.data.flash&&Ext.data.flash.BinaryXhr;if(!a||c.aborted||c.timedout){return !1}if(d&&a instanceof d){return b!==4}return b!==0&&b!==4},openRequest:function(d,b,f,e,g){var c=this,a=c.newRequest(d);if(e){a.open(b.method,b.url,f,e,g)}else {if(c.isXdr){a.open(b.method,b.url)}else {a.open(b.method,b.url,f)}}if(d.binary||c.binary){if(window.Uint8Array){a.responseType='arraybuffer'}else {if(a.overrideMimeType){a.overrideMimeType('text/plain; charset=x-user-defined')}}}if(d.withCredentials||c.withCredentials){a.withCredentials=!0}return a},newRequest:function(c){var a=this,b;if(c.binaryData){if(window.Uint8Array){b=a.getXhrInstance()}else {b=new Ext.data.flash.BinaryXhr()}}else {if(a.cors&&Ext.isIE9m){b=a.getXdrInstance();a.isXdr=!0}else {b=a.getXhrInstance();a.isXdr=!1}}return b},setupHeaders:function(m,f,j,l){var d=this,a=Ext.apply({},f.headers||{},d.defaultHeaders),e=d.defaultPostHeader,h=f.jsonData,i=f.xmlData,b='Content-Type',k=d.useDefaultXhrHeader,c,g;if(!a.hasOwnProperty(b)&&(j||l)){if(j){if(f.rawData){e='text/plain'}else {if(i&&Ext.isDefined(i)){e='text/xml'}else {if(h&&Ext.isDefined(h)){e='application/json'}}}}a[b]=e}if(k&&!a['X-Requested-With']){a['X-Requested-With']=d.defaultXhrHeader}if(a[b]===undefined||a[b]===null){delete a[b]}try{for(c in a){if(a.hasOwnProperty(c)){g=a[c];m.setRequestHeader(c,g)}}}catch(n){d.owner.fireEvent('exception',c,g)}return a},getXdrInstance:function(){var a;if(Ext.ieVersion>=8){a=new XDomainRequest()}else {Ext.raise({msg:'Your browser does not support CORS'})}return a},getXhrInstance:function(){var c=[function(){return new XMLHttpRequest()},function(){return new ActiveXObject('MSXML2.XMLHTTP.3.0')},function(){return new ActiveXObject('MSXML2.XMLHTTP')},function(){return new ActiveXObject('Microsoft.XMLHTTP')}],b=0,d=c.length,a;for(;b<d;++b){try{a=c[b];a();break}catch(e){}}return a}(),processXdrRequest:function(b,c){var a=this;delete b.headers;b.contentType=b.options.contentType||a.defaultXdrContentType;c.onload=Ext.Function.bind(a.onStateChange,a,[!0]);c.onerror=c.ontimeout=Ext.Function.bind(a.onStateChange,a,[!1])},processXdrResponse:function(a,b){a.getAllResponseHeaders=function(){return []};a.getResponseHeader=function(){return ''};a.contentType=b.contentType||this.defaultXdrContentType},onStateChange:function(d){var a=this,c=a.xhr,b=Ext.GlobalEvents;if(c&&c.readyState==4||a.isXdr){a.clearTimer();a.onComplete(d);a.cleanup();if(b.hasListeners.idle){b.fireEvent('idle')}}},onComplete:function(h){var a=this,f=a.owner,b=a.options,d=a.xhr,i={success:!1,isException:!1},e,g,c;if(!d||a.destroyed){return a.result=i}try{e=Ext.data.request.Ajax.parseStatus(d.status,d);if(e.success){e.success=d.readyState===4}}catch(j){e=i}g=a.success=a.isXdr?h:e.success;if(g){c=a.createResponse(d);f.fireEvent('requestcomplete',f,c,b);Ext.callback(b.success,b.scope,[c,b])}else {if(e.isException||a.aborted||a.timedout){c=a.createException(d)}else {c=a.createResponse(d)}f.fireEvent('requestexception',f,c,b);Ext.callback(b.failure,b.scope,[c,b])}a.result=c;Ext.callback(b.callback,b.scope,[b,g,c]);f.onRequestComplete(a);Ext.data.request.Base.prototype.onComplete.call(this,h);return c},createResponse:function(a){var d=this,h=d.isXdr,f={},i=h?[]:a.getAllResponseHeaders().replace(/\r\n/g,'\n').split('\n'),g=i.length,e,c,j,b,k;while(g--){e=i[g];c=e.indexOf(':');if(c>=0){j=e.substr(0,c).toLowerCase();if(e.charAt(c+1)==' '){++c}f[j]=e.substr(c+1)}}b={request:d,requestId:d.id,status:a.status,statusText:a.statusText,getResponseHeader:function(b){return f[b.toLowerCase()]},getAllResponseHeaders:function(){return f}};if(h){d.processXdrResponse(b,a)}if(d.binary){b.responseBytes=d.getByteArray(a)}else {b.responseText=a.responseText;b.responseXML=a.responseXML}return b},destroy:function(){this.xhr=null;Ext.data.request.Base.prototype.destroy.call(this)},privates:{getByteArray:function(b){var e=b.response,g=b.responseBody,h=Ext.data.flash&&Ext.data.flash.BinaryXhr,a,d,f,c;if(b instanceof h){a=b.responseBytes}else {if(window.Uint8Array){a=e?new Uint8Array(e):[]}else {if(Ext.isIE9p){try{a=(new VBArray(g)).toArray()}catch(i){a=[]}}else {if(Ext.isIE){if(!this.self.vbScriptInjected){this.injectVBScript()}getIEByteArray(b.responseBody,a=[])}else {a=[];d=b.responseText;f=d.length;for(c=0;c<f;c++){a.push(d.charCodeAt(c)&255)}}}}}return a},injectVBScript:function(){var a=document.createElement('script');a.type='text/vbscript';a.text=['Function getIEByteArray(byteArray, out)','Dim len, i','len = LenB(byteArray)','For i = 1 to len','out.push(AscB(MidB(byteArray, i, 1)))','Next','End Function'].join('\n');Ext.getHead().dom.appendChild(a);this.self.vbScriptInjected=!0}}},0,0,0,0,['request.ajax'],0,[Ext.data.request,'Ajax'],0);Ext.cmd.derive('Ext.data.request.Form',Ext.data.request.Base,{start:function(d){var a=this,c=a.options,b=a.requestOptions;Ext.data.request.Base.prototype.start.call(this,d);a.form=a.upload(c.form,b.url,b.data,c);return a},abort:function(c){var b=this,a;if(b.isLoading()){try{a=b.frame.dom;if(a.stop){a.stop()}else {a.document.execCommand('Stop')}}catch(d){}}Ext.data.request.Base.prototype.abort.call(this,c);b.onComplete();b.cleanup()},cleanup:function(){var a=this,b=a.frame;if(b){b.un('load',a.onComplete,a);Ext.removeNode(b)}a.frame=a.form=null},isLoading:function(){return !!this.frame},upload:function(a,s,o,n){a=Ext.getDom(a);n=n||{};var m=document.createElement('iframe'),e=Ext.get(m),g=e.id,j=[],l='multipart/form-data',r={target:a.target,method:a.method,encoding:a.encoding,enctype:a.enctype,action:a.action},k=function(c,b){d=document.createElement('input');Ext.fly(d).set({type:'hidden',value:b,name:c});a.appendChild(d);j.push(d)},d,f,b,c,q,i,p,h,t;e.set({name:g,cls:'x-hidden-display',src:Ext.SSL_SECURE_URL,tabIndex:-1});document.body.appendChild(m);if(document.frames){document.frames[g].name=g}Ext.fly(a).set({target:g,method:'POST',enctype:l,encoding:l,action:s||r.action});if(o){f=Ext.Object.fromQueryString(o)||{};for(c in f){if(f.hasOwnProperty(c)){b=f[c];if(Ext.isArray(b)){q=b.length;for(i=0;i<q;i++){k(c,b[i])}}else {k(c,b)}}}}this.frame=e;e.on({load:this.onComplete,scope:this,single:!Ext.isOpera});a.submit();Ext.fly(a).set(r);for(p=j.length,h=0;h<p;h++){Ext.removeNode(j[h])}return a},getDoc:function(){var a=this.frame.dom;return a&&(a.contentWindow.document||a.contentDocument)||(window.frames[a.id]||{}).document},getTimeout:function(){return this.options.timeout},onComplete:function(){var b=this,h=b.frame,i=b.owner,d=b.options,g,c,f,e,a;if(!h){return}if(b.aborted||b.timedout){b.result=a=b.createException();a.responseXML=null;a.responseText='{success:false,message:"'+Ext.String.trim(a.statusText)+'"}';a.request=b;g=d.failure;f=!1}else {try{c=b.getDoc();b.result=a={responseText:'',responseXML:null,request:b};if(c){if(Ext.isOpera&&c.location==Ext.SSL_SECURE_URL){return}if(c.body){if((e=c.body.firstChild)&&/pre/i.test(e.tagName)){a.responseText=e.textContent||e.innerText}else {if(e=c.getElementsByTagName('textarea')[0]){a.responseText=e.value}else {a.responseText=c.body.textContent||c.body.innerText}}}a.responseXML=c.XMLDocument||c;g=d.success;f=!0;a.status=200}else {Ext.raise('Could not acquire a suitable connection for the file upload service.')}}catch(j){b.result=a=b.createException();a.status=400;a.statusText=(j.message||j.description)+'';a.responseText='{success:false,message:"'+Ext.String.trim(a.statusText)+'"}';a.responseXML=null;g=d.failure;f=!1}}b.frame=null;b.success=f;i.fireEvent(f?'requestcomplete':'requestexception',i,a,d);Ext.callback(g,d.scope,[a,d]);Ext.callback(d.callback,d.scope,[d,f,a]);i.onRequestComplete(b);Ext.asap(h.destroy,h);Ext.data.request.Base.prototype.onComplete.call(this)},destroy:function(){this.cleanup();Ext.data.request.Base.prototype.destroy.call(this)}},0,0,0,0,['request.form'],0,[Ext.data.request,'Form'],0);Ext.cmd.derive('Ext.data.Connection',Ext.Base,{statics:{requestId:0},enctypeRe:/multipart\/form-data/i,config:{url:null,async:!0,username:'',password:'',disableCaching:!0,withCredentials:!1,binary:!1,cors:!1,isXdr:!1,defaultXdrContentType:'text/plain',disableCachingParam:'_dc',timeout:30000,extraParams:null,autoAbort:!1,method:null,defaultHeaders:null,defaultPostHeader:'application/x-www-form-urlencoded; charset=UTF-8',useDefaultXhrHeader:!0,defaultXhrHeader:'XMLHttpRequest'},constructor:function(a){this.mixins.observable.constructor.call(this,a);this.requests={}},request:function(a){a=a||{};var b=this,c,d;if(b.fireEvent('beforerequest',b,a)!==!1){c=b.setOptions(a,a.scope||Ext.global);d=b.createRequest(a,c);return d.start(c.data)}Ext.callback(a.callback,a.scope,[a,undefined,undefined]);return Ext.Deferred.rejected([a,undefined,undefined])},createRequest:function(c,e){var a=this,d=c.type||e.type,b;if(!d){d=a.isFormUpload(c)?'form':'ajax'}if(c.autoAbort||a.getAutoAbort()){a.abort()}b=Ext.Factory.request({type:d,owner:a,options:c,requestOptions:e,ownerConfig:a.getConfig()});a.requests[b.id]=b;a.latestId=b.id;return b},isFormUpload:function(a){var b=this.getForm(a);if(b){return a.isUpload||this.enctypeRe.test(b.getAttribute('enctype'))}return !1},getForm:function(a){return Ext.getDom(a.form)},setOptions:function(a,k){var e=this,b=a.params||{},g=e.getExtraParams(),f=a.urlParams,c=a.url||e.getUrl(),l=a.cors,i=a.jsonData,h,j,d;if(l!==undefined){e.setCors(l)}if(Ext.isFunction(b)){b=b.call(k,a)}if(Ext.isFunction(c)){c=c.call(k,a)}c=this.setupUrl(a,c);d=a.formData||a.rawData||a.binaryData||a.xmlData||i||null;if(i&&!Ext.isPrimitive(i)){d=Ext.encode(d)}if(a.binaryData){if(e.nativeBinaryPostSupport()){d=new Uint8Array(a.binaryData);if(Ext.isChrome&&Ext.chromeVersion<22||Ext.isSafari||Ext.isGecko){d=d.buffer}}}if(Ext.isObject(b)){b=Ext.Object.toQueryString(b)}if(Ext.isObject(g)){g=Ext.Object.toQueryString(g)}b=b+(g?(b?'&':'')+g:'');f=Ext.isObject(f)?Ext.Object.toQueryString(f):f;b=this.setupParams(a,b);h=(a.method||e.getMethod()||(b||d?'POST':'GET')).toUpperCase();this.setupMethod(a,h);j=a.disableCaching!==!1?a.disableCaching||e.getDisableCaching():!1;if(h==='GET'&&j){c=Ext.urlAppend(c,(a.disableCachingParam||e.getDisableCachingParam())+'='+(new Date()).getTime())}if((h=='GET'||d)&&b){c=Ext.urlAppend(c,b);b=null}if(f){c=Ext.urlAppend(c,f)}return {url:c,method:h,data:d||b||null}},setupUrl:function(c,a){var b=this.getForm(c);if(b){a=a||b.action}return a},setupParams:function(c,a){var d=this.getForm(c),b;if(d&&!this.isFormUpload(c)){b=Ext.Element.serializeForm(d);a=a?a+'&'+b:b}return a},setupMethod:function(a,b){if(this.isFormUpload(a)){return 'POST'}return b},isLoading:function(a){if(!a){a=this.getLatest()}return a?a.isLoading():!1},abort:function(a){if(!a){a=this.getLatest()}if(a&&a.isLoading()){a.abort()}},abortAll:function(){var a=this.requests,b;for(b in a){this.abort(a[b])}},getLatest:function(){var b=this.latestId,a;if(b){a=this.requests[b]}return a||null},clearTimeout:function(a){if(!a){a=this.getLatest()}if(a){a.clearTimer()}},onRequestComplete:function(a){delete this.requests[a.id]},nativeBinaryPostSupport:function(){return Ext.isChrome||Ext.isSafari&&Ext.isDefined(window.Uint8Array)||Ext.isGecko&&Ext.isDefined(window.Uint8Array)}},1,0,0,0,0,[['observable',Ext.mixin.Observable]],[Ext.data,'Connection'],0);Ext.cmd.derive('Ext.Ajax',Ext.data.Connection,{singleton:!0,autoAbort:!1},0,0,0,0,0,0,[Ext,'Ajax'],0);Ext.cmd.derive('Ext.AnimationQueue',Ext.Base,{singleton:!0,constructor:function(){var a=this;a.queue=[];a.taskQueue=[];a.runningQueue=[];a.idleQueue=[];a.isRunning=!1;a.isIdle=!0;a.run=Ext.Function.bind(a.run,a);if(Ext.os.is.iOS){Ext.interval(a.watch,500,a)}},start:function(d,b,c){var a=this;a.queue.push(arguments);if(!a.isRunning){if(a.hasOwnProperty('idleTimer')){clearTimeout(a.idleTimer);delete a.idleTimer}if(a.hasOwnProperty('idleQueueTimer')){clearTimeout(a.idleQueueTimer);delete a.idleQueueTimer}a.isIdle=!1;a.isRunning=!0;a.doStart()}},watch:function(){if(this.isRunning&&Ext.now()-this.lastRunTime>=500){this.run()}},run:function(){var a=this;if(!a.isRunning){return}var b=a.runningQueue,d=Ext.now(),c,e;a.lastRunTime=d;a.frameStartTime=d;b.push.apply(b,a.queue);for(c=0,e=b.length;c<e;c++){a.invoke(b[c])}b.length=0;a.doIterate()},doStart:function(){this.animationFrameId=Ext.Function.requestAnimationFrame(this.run);this.lastRunTime=Ext.now()},doIterate:function(){this.animationFrameId=Ext.Function.requestAnimationFrame(this.run)},doStop:function(){Ext.Function.cancelAnimationFrame(this.animationFrameId)},stop:function(h,f,g){var a=this;if(!a.isRunning){return}var d=a.queue,e=d.length,b,c;for(b=0;b<e;b++){c=d[b];if(c[0]===h&&c[1]===f&&c[2]===g){d.splice(b,1);b--;e--}}if(e===0){a.doStop();a.isRunning=!1;a.idleTimer=Ext.defer(a.whenIdle,100,a)}},onIdle:function(g,e,f){var c=this.idleQueue,b,d,a;for(b=0,d=c.length;b<d;b++){a=c[b];if(g===a[0]&&e===a[1]&&f===a[2]){return}}c.push(arguments);if(this.isIdle){this.processIdleQueue()}},unIdle:function(g,e,f){var c=this.idleQueue,a,d,b;for(a=0,d=c.length;a<d;a++){b=c[a];if(g===b[0]&&e===b[1]&&f===b[2]){c.splice(a,1);return !0}}return !1},queueTask:function(c,a,b){this.taskQueue.push(arguments);this.processTaskQueue()},dequeueTask:function(g,e,f){var c=this.taskQueue,a,d,b;for(a=0,d=c.length;a<d;a++){b=c[a];if(g===b[0]&&e===b[1]&&f===b[2]){c.splice(a,1);a--;d--}}},invoke:function(b){var a=b[0],c=b[1],d=b[2];a=typeof a=='string'?c[a]:a;if(Ext.isArray(d)){a.apply(c,d)}else {a.call(c,d)}},whenIdle:function(){this.isIdle=!0;this.processIdleQueue()},processIdleQueue:function(){if(!this.hasOwnProperty('idleQueueTimer')){this.idleQueueTimer=Ext.defer(this.processIdleQueueItem,1,this)}},processIdleQueueItem:function(){delete this.idleQueueTimer;if(!this.isIdle){return}var a=this.idleQueue,b;if(a.length>0){b=a.shift();this.invoke(b);this.processIdleQueue()}},processTaskQueue:function(){if(!this.hasOwnProperty('taskQueueTimer')){this.taskQueueTimer=Ext.defer(this.processTaskQueueItem,15,this)}},processTaskQueueItem:function(){delete this.taskQueueTimer;var a=this.taskQueue,b;if(a.length>0){b=a.shift();this.invoke(b);this.processTaskQueue()}}},1,0,0,0,0,0,[Ext,'AnimationQueue'],0);Ext.cmd.derive('Ext.ComponentManager',Ext.Base,{alternateClassName:'Ext.ComponentMgr',singleton:!0,count:0,typeName:'xtype',constructor:function(b){var a=this;Ext.apply(a,b||{});a.all={};a.references={};a.onAvailableCallbacks={}},create:function(a,b){if(typeof a==='string'){return Ext.widget(a)}if(a.isComponent){return a}if('xclass' in a){return Ext.create(a.xclass,a)}return Ext.widget(a.xtype||b,a)},get:function(a){return this.all[a]},register:function(b){var a=this,e=a.all,d=b.getId(),c=a.onAvailableCallbacks;e[d]=b;if(b.getReference&&b.getReference()){a.references[d]=b}++a.count;if(!a.hasFocusListener){Ext.on('focus',a.onGlobalFocus,a);a.hasFocusListener=!0}c=c&&c[d];if(c&&c.length){a.notifyAvailable(b)}},unregister:function(b){var a=b.getId();if(b.getReference&&b.getReference()){this.references[a]=null;delete this.references[a]}this.all[a]=null;delete this.all[a];this.count--},markReferencesDirty:function(){this.referencesDirty=!0},fixReferences:function(){var c=this,a=c.references,b;if(c.referencesDirty){for(b in a){if(a.hasOwnProperty(b)){a[b].fixReference()}}c.referencesDirty=!1}},onAvailable:function(a,f,d){var g=this,b=g.onAvailableCallbacks,e=g.all,c;if(a in e){c=e[a];f.call(d||c,c)}else {if(a){if(!Ext.isArray(b[a])){b[a]=[]}b[a].push(function(b){f.call(d||b,b)})}}},notifyAvailable:function(a){var b=this.onAvailableCallbacks[a&&a.getId()]||[];while(b.length){b.shift()(a)}},each:function(b,a){return Ext.Object.each(this.all,b,a)},getCount:function(){return this.count},getAll:function(){return Ext.Object.getValues(this.all)},getActiveComponent:function(){return Ext.Component.fromElement(Ext.dom.Element.getActiveElement())},onGlobalFocus:function(d){var h=this,g=d.toElement,f=d.fromElement,c=Ext.Component.fromElement(g),b=Ext.Component.fromElement(f),e,a;if(c===b){return}e=h.getCommonAncestor(b,c);if(b&&!(b.destroyed||b.destroying)){if(b.handleBlurEvent){b.handleBlurEvent(d)}for(a=b;a&&a!==e;a=a.getRefOwner()){if(!(a.destroyed||a.destroying)){a.onFocusLeave({event:d.event,type:'focusleave',target:f,relatedTarget:g,fromComponent:b,toComponent:c})}}}if(c&&!c.destroyed){if(c.handleFocusEvent){c.handleFocusEvent(d)}for(a=c;a&&a!==e;a=a.getRefOwner()){a.onFocusEnter({event:d.event,type:'focusenter',relatedTarget:f,target:g,fromComponent:b,toComponent:c})}}},getCommonAncestor:function(a,b){if(a===b){return a}while(a&&!(a.isAncestor(b)||a===b)){a=a.getRefOwner()}return a},privates:{clearAll:function(){this.all={};this.references={};this.onAvailableCallbacks={}},fromElement:function(i,b,e){var a=Ext.getDom(i),h=this.all,g=0,f,d,c;if(typeof b!=='number'){f=Ext.getDom(b);b=Number.MAX_VALUE}while(a&&a.nodeType===1&&g<b&&a!==f){d=a.getAttribute('data-componentid')||a.id;if(d){c=h[d];if(c&&(!e||Ext.ComponentQuery.is(c,e))){return c}g++}a=a.parentNode}return null}},deprecated:{5:{methods:{isRegistered:null,registerType:null}}}},1,0,0,0,0,0,[Ext,'ComponentManager',Ext,'ComponentMgr'],function(){Ext.getCmp=function(a){return Ext.ComponentManager.get(a)}});Ext.ns('Ext.util').Operators={'=':function(a,b){return a==b},'!=':function(a,b){return a!=b},'^=':function(a,b){return a&&a.substr(0,b.length)==b},'$=':function(a,b){return a&&a.substr(a.length-b.length)==b},'*=':function(a,b){return a&&a.indexOf(b)!==-1},'%=':function(a,b){return a%b===0},'|=':function(a,b){return a&&(a==b||a.substr(0,b.length+1)==b+'-')},'~=':function(a,b){return a&&(' '+a+' ').indexOf(' '+b+' ')!=-1}};Ext.cmd.derive('Ext.util.LruCache',Ext.util.HashMap,{config:{maxSize:null},add:function(d,e){var b=this,a,c;b.removeAtKey(d);c=b.last;a={prev:c,next:null,key:d,value:e};if(c){c.next=a}else {b.first=a}b.last=a;Ext.util.HashMap.prototype.add.call(this,d,a);b.prune();return e},insertBefore:function(f,d,a){var c=this,e,b;if(a=this.map[this.findKey(a)]){e=c.findKey(d);if(e){c.unlinkEntry(b=c.map[e])}else {b={prev:a.prev,next:a,key:f,value:d}}if(a.prev){b.prev.next=b}else {c.first=b}b.next=a;a.prev=b;c.prune();return d}else {return c.add(f,d)}},get:function(b){var a=this.map[b];if(a){if(a.next){this.moveToEnd(a)}return a.value}},removeAtKey:function(a){this.unlinkEntry(this.map[a]);return Ext.util.HashMap.prototype.removeAtKey.apply(this,arguments)},clear:function(a){this.first=this.last=null;return Ext.util.HashMap.prototype.clear.call(this,a)},unlinkEntry:function(a){if(a){if(a.next){a.next.prev=a.prev}else {this.last=a.prev}if(a.prev){a.prev.next=a.next}else {this.first=a.next}a.prev=a.next=null}},moveToEnd:function(a){this.unlinkEntry(a);if(a.prev=this.last){this.last.next=a}else {this.first=a}this.last=a},getArray:function(c){var b=[],a=this.first;while(a){b.push(c?a.key:a.value);a=a.next}return b},each:function(f,c,d){var b=this,a=d?b.last:b.first,e=b.length;c=c||b;while(a){if(f.call(c,a.key,a.value,e)===!1){break}a=d?a.prev:a.next}return b},findKey:function(c){var a,b=this.map;for(a in b){if(b.hasOwnProperty(a)&&b[a].value===c){return a}}return undefined},clone:function(){var a=new this.self(this.initialConfig),c=this.map,b;a.suspendEvents();for(b in c){if(c.hasOwnProperty(b)){a.add(b,c[b].value)}}a.resumeEvents();return a},prune:function(){var a=this,c=a.getMaxSize(),b=c?a.length-c:0;if(b>0){for(;a.first&&b;b--){a.removeAtKey(a.first.key)}}},destroy:function(){this.first=this.last=null;Ext.util.HashMap.prototype.destroy.call(this)}},0,0,0,0,0,0,[Ext.util,'LruCache'],0);Ext.cmd.derive('Ext.ComponentQuery',Ext.Base,{singleton:!0},0,0,0,0,0,0,[Ext,'ComponentQuery'],function(){var a=this,h=Ext.util.Operators,r=/(\d*)n\+?(\d*)/,q=/\D/,d=/^(\s)+/,c=/\\(.)/g,j=new Ext.util.LruCache({maxSize:100}),m=['var r = [],','i = 0,','it = items,','l = it.length,','c;','for (; i < l; i++) {','c = it[i];','if (c.{0}) {','r.push(c);','}','}','return r;'].join(''),b=function(b,a){return a.method.apply(this,[b].concat(a.args))},g=function(d,g){var b=[],c=0,e=d.length,a,f=g!=='>';for(;c<e;c++){a=d[c];if(a.getRefItems){b=b.concat(a.getRefItems(f))}}return b},e=function(d){var c=[],b=0,e=d.length,a;for(;b<e;b++){a=d[b];while(!!(a=a.getRefOwner())){c.push(a)}}return c},i=function(b,e,f){if(e==='*'){return b.slice()}else {var d=[],c=0,g=b.length,a;for(;c<g;c++){a=b[c];if(a.isXType(e,f)){d.push(a)}}return d}},l=function(n,c,f,d){var e=[],k=0,o=n.length,i,l,a,b,g,m,j;if(c.charAt(0)==='@'){i=!0;c=c.substr(1)}if(c.charAt(0)==='?'){i=!0;l=!0;c=c.substr(1)}for(;k<o;k++){a=n[k];j=a.getConfigurator&&a.self.$config.configs[c];if(j){b=a[j.names.get]()}else {if(i&&!a.hasOwnProperty(c)){continue}else {b=a[c]}}if(l){e.push(a)}else {if(f==='~='){if(b){if(!Ext.isArray(b)){b=b.split(' ')}for(g=0,m=b.length;g<m;g++){if(h[f](Ext.coerce(b[g],d),d)){e.push(a);break}}}}else {if(f==='/='){if(b!=null&&d.test(b)){e.push(a)}}else {if(!d?!!a[c]:h[f](Ext.coerce(b,d),d)){e.push(a)}}}}}return e},f=function(e,h,f){var c=[],b=0,g=e.length,a,d;for(;b<g;b++){a=e[b];d=f?a.id:a.getItemId();if(d===h){c.push(a)}}return c},n=function(b,d,c){return a.pseudos[d](b,c)},p=/^(\s?([>\^])\s?|\s|$)/,o=/^(#)?((?:\\\.|[\w\-])+|\*)(?:\((true|false)\))?/,k=[{re:/^\.((?:\\\.|[\w\-])+)(?:\((true|false)\))?/,method:i,argTransform:function(a){if(a[1]!==undefined){a[1]=a[1].replace(c,'$1')}return a.slice(1)}},{re:/^(?:\[((?:[@?$])?[\w\-]*)\s*(?:([\^$*~%!\/]?=)\s*(['"])?((?:\\\]|.)*?)\3)?(?!\\)\])/,method:l,argTransform:function(b){var g=b[0],f=b[1],e=b[2],a=b[4],d;if(a!==undefined){a=a.replace(c,'$1')}if(e==='/='){d=j.get(a);if(d){a=d}else {a=j.add(a,new RegExp(a))}}return [f,e,a]}},{re:/^#((?:\\\.|[\w\-])+)/,method:f},{re:/^\:([\w\-]+)(?:\(((?:\{[^\}]+\})|(?:(?!\{)[^\s>\/]*?(?!\})))\))?/,method:n,argTransform:function(a){if(a[2]!==undefined){a[2]=a[2].replace(c,'$1')}return a.slice(1)}},{re:/^(?:\{([^\}]+)\})/,method:m}];a.Query=Ext.extend(Object,{constructor:function(a){a=a||{};Ext.apply(this,a)},execute:function(f){var c=this.operations,b=[],e,a,d;for(a=0,d=c.length;a<d;a++){e=c[a];b=b.concat(this._execute(f,e))}return b},_execute:function(c,h){var f=0,i=h.length,d,a;if(!c){a=Ext.ComponentManager.getAll()}else {if(Ext.isIterable(c)){a=c}else {if(c.isMixedCollection){a=c.items}}}for(;f<i;f++){d=h[f];if(d.mode==='^'){a=e(a||[c])}else {if(d.mode){a=g(a||[c],d.mode)}else {a=b(a||g([c]),d)}}if(f===i-1){return a}}return []},is:function(f,g){var c=this.operations,b=!1,d=c.length,e,a;if(d===0){return !0}for(a=0;a<d;a++){e=c[a];b=this._is(f,g,e);if(b){return b}}return !1},_is:function(o,n,m){var l=m.length,a=[o],i,d,h,c,j,k;for(d=l-1;d>=0;--d){i=m[d];c=i.mode;if(c){if(c==='^'){a=g(a,' ')}else {if(c==='>'){j=[];for(h=0,l=a.length;h<l;++h){k=a[h].getRefOwner();if(k){j.push(k)}}a=j}else {a=e(a)}}}else {a=b(a,i)}if(a.length===0){return !1}}if(n){if(!c){a=e(a)}if(a.length>0){a=b(a,{method:f,args:[n.id,!0]})}if(a.length===0){return !1}}return !0},getMatches:function(a,d){var e=d.length,c;for(c=0;c<e;++c){a=b(a,d[c]);if(a.length===0){break}}return a},isMultiMatch:function(){return this.operations.length>1}});Ext.apply(a,{cache:new Ext.util.LruCache({maxSize:100}),pseudos:{not:function(d,f){var c=0,g=d.length,e=[],h=-1,b;for(;c<g;++c){b=d[c];if(!a.is(b,f)){e[++h]=b}}return e},first:function(a){var b=[];if(a.length>0){b.push(a[0])}return b},last:function(a){var b=a.length,c=[];if(b>0){c.push(a[b-1])}return c},focusable:function(d){var e=d.length,c=[],b=0,a;for(;b<e;b++){a=d[b];if(a.isFocusable&&a.isFocusable()){c.push(a)}}return c},canfocus:function(d,e){var f=d.length,c=[],b=0,a;for(;b<f;b++){a=d[b];if(a.canFocus&&a.canFocus(!1,e)){c.push(a)}}return c},'nth-child':function(i,a){var d=[],h=r.exec(a==='even'&&'2n'||a==='odd'&&'2n+1'||!q.test(a)&&'n+'+a||a),g=(h[1]||1)-0,e=h[2]-0,b,f,c;for(b=0;f=i[b];b++){c=b+1;if(g===1){if(e===0||c===e){d.push(f)}}else {if((c+e)%g===0){d.push(f)}}}return d},scrollable:function(d){var e=d.length,c=[],b=0,a;for(;b<e;b++){a=d[b];if(a.scrollable||a._scrollable){c.push(a)}}return c},visible:function(e,a){a=a==='true';var f=e.length,d=[],c=0,b;for(;c<f;c++){b=e[c];if(b.isVisible(a)){d.push(b)}}return d}},query:function(c,j){if(!c){return Ext.ComponentManager.all.getArray()}var b=[],g=[],h={},d=a.cache.get(c),i,e,f;if(!d){d=a.cache.add(c,a.parse(c))}b=d.execute(j);if(d.isMultiMatch()){i=b.length;for(f=0;f<i;f++){e=b[f];if(!h[e.id]){g.push(e);h[e.id]=!0}}b=g}return b},visitPreOrder:function(c,e,f,d,b){a._visit(!0,c,e,f,d,b)},visitPostOrder:function(c,e,f,d,b){a._visit(!1,c,e,f,d,b)},_visit:function(i,c,b,l,k,e){var j=a.cache.get(c),g=[b],h,m=0,d,f;if(!j){j=a.cache.add(c,a.parse(c))}f=j.is(b);if(b.getRefItems){h=b.getRefItems();m=h.length}if(e){Ext.Array.push(g,e)}if(i){if(f){if(l.apply(k||b,g)===!1){return !1}}}for(d=0;d<m;d++){if(a._visit.call(a,i,c,h[d],l,k,e)===!1){return !1}}if(!i){if(f){if(l.apply(k||b,g)===!1){return !1}}}},is:function(d,b,e){if(!b){return !0}var c=a.cache.get(b);if(!c){c=a.cache.add(b,a.parse(b))}return c.is(d,e)},parse:function(g){var d=[],c,f,b,e;c=Ext.splitAndUnescape(g,',');for(b=0,e=c.length;b<e;b++){f=Ext.String.trim(c[b]);d.push(a._parse(f))}return new a.Query({operations:d})},_parse:function(a){var h=[],v=Ext.String.trim,t=k.length,r,e,n,s,j,b,m,l,g,u,q;while(a&&r!==a){r=a;e=a.match(o);if(e){s=e[1];n=v(e[2]).replace(c,'$1');if(s==='#'){h.push({method:f,args:[n]})}else {h.push({method:i,args:[n,Boolean(e[3])]})}a=a.replace(e[0],'').replace(d,'$1')}while(!(j=a.match(p))){for(l=0;a&&l<t;l++){g=k[l];b=a.match(g.re);u=g.method;m=g.argTransform;if(b){if(m){q=m(b)}else {q=b.slice(1)}h.push({method:Ext.isString(g.method)?Ext.functionFactory('items',Ext.String.format.apply(Ext.String,[u].concat(b.slice(1)))):g.method,args:q});a=a.replace(b[0],'').replace(d,'$1');break}if(l===t-1){Ext.raise('Invalid ComponentQuery selector: "'+arguments[0]+'"')}}}if(j[1]){h.push({mode:j[2]||j[1]});a=a.replace(j[0],'').replace(d,'')}}return h}});Ext.all=function(){return a.query.apply(a,arguments)};Ext.first=function(){var b=a.query.apply(a,arguments);return b&&b[0]||null}});Ext.cmd.derive('Ext.Evented',Ext.Base,{alternateClassName:'Ext.EventedBase',initialized:!1,constructor:function(a){this.mixins.observable.constructor.call(this,a);this.initialized=!0},onClassExtended:function(f,b){if(!b.hasOwnProperty('eventedConfig')){return}var e=b.config,a=b.eventedConfig,d,c;if(e){Ext.applyIf(e,a)}else {f.addConfig(a)}for(d in a){if(a.hasOwnProperty(d)){c=Ext.Config.get(d);b[c.names.set]=c.eventedSetter||c.getEventedSetter()}}}},1,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext,'Evented',Ext,'EventedBase'],0);Ext.cmd.derive('Ext.util.Positionable',Ext.Base,{mixinId:'positionable',_positionTopLeft:['position','top','left'],_alignRe:/^([a-z]+)-([a-z]+)([?!])?$/,afterSetPosition:Ext.emptyFn,adjustForConstraints:function(a,c){var b=this.getConstrainVector(c,a);if(b){a[0]+=b[0];a[1]+=b[1]}return a},alignTo:function(e,d,f,b){var a=this,c=a.el;return a.setXY(a.getAlignToXY(e,d,f),c.anim&&!!b?c.anim(b):!1)},calculateAnchorXY:function(f,k,l,e){var g=this,j=g.el,i=document,h=j.dom===i.body||j.dom===i,d=Math.round,a,b,c;f=(f||'tl').toLowerCase();e=e||{};b=e.width||(h?Ext.Element.getViewportWidth():g.getWidth());c=e.height||(h?Ext.Element.getViewportHeight():g.getHeight());switch(f){case 'tl':a=[0,0];break;case 'bl':a=[0,c];break;case 'tr':a=[b,0];break;case 'c':a=[d(b*0.5),d(c*0.5)];break;case 't':a=[d(b*0.5),0];break;case 'l':a=[0,d(c*0.5)];break;case 'r':a=[b,d(c*0.5)];break;case 'b':a=[d(b*0.5),c];break;case 'tc':a=[d(b*0.5),0];break;case 'bc':a=[d(b*0.5),c];break;case 'br':a=[b,c];}return [a[0]+k,a[1]+l]},convertPositionSpec:Ext.identityFn,getAlignToXY:function(g,b,n){var d=this,h,a,i,r,q,k,j,c,p,o,w,l,m,t,s,v,u,e,f;g=Ext.get(g.el||g);if(!g||!g.dom){}n=n||[0,0];b=(!b||b==='?'?'tl-bl?':!/-/.test(b)&&b!==''?'tl-'+b:b||'tl-bl').toLowerCase();b=d.convertPositionSpec(b);i=b.match(d._alignRe);l=i[1];m=i[2];w=!!i[3];r=d.getAnchorXY(l,!0);q=d.getAnchorToXY(g,m,!1);e=q[0]-r[0]+n[0];f=q[1]-r[1]+n[1];if(w){if(i[3]==='!'){h=g}else {h=d.constrainTo||d.container||d.el.parent()}h=Ext.get(h.el||h);a=h.getConstrainRegion();a.right=a.left+h.el.dom.clientWidth;k=d.getWidth();j=d.getHeight();c=g.getRegion();t=l.charAt(0);s=l.charAt(l.length-1);v=m.charAt(0);u=m.charAt(m.length-1);p=e<c.right&&e+k>=c.left&&(t=='t'&&v=='b'||t=='b'&&v=='t');o=f<c.bottom&&f+j>=c.top&&(s=='r'&&u=='l'||s=='l'&&u=='r');if(e+k>a.right){if(o){e=c.left-k;o=!1}else {e=a.right-k}}if(e<a.left){e=o?c.right:a.left}if(f+j>a.bottom){if(p){f=c.top-j;p=!1}else {f=a.bottom-j}}if(f<a.top){f=p?c.bottom:a.top}}return [e,f]},getAnchorXY:function(h,e,k){var b=this,f=b.getXY(),a=b.el,g=document,c=a.dom==g.body||a.dom==g,d=a.getScroll(),i=c?d.left:e?0:f[0],j=c?d.top:e?0:f[1];return b.calculateAnchorXY(h,i,j,k)},getBox:function(j,k){var b=this,i=k?b.getLocalXY():b.getXY(),c=i[0],d=i[1],h=b.getWidth(),g=b.getHeight(),a,e,f;if(j){a=b.getBorderPadding();e=a.beforeX;f=a.beforeY;c+=e;d+=f;h-=e+a.afterX;g-=f+a.afterY}return {x:c,left:c,0:c,y:d,top:d,1:d,width:h,height:g,right:c+h,bottom:d+g}},calculateConstrainedPosition:function(h,c,j,l){var a=this,e,k=a.floatParent,i=k?k.getTargetEl():null,d,g,b,f=!1,m;if(j&&k){d=i.getXY();g=i.getBorderPadding();d[0]+=g.beforeX;d[1]+=g.beforeY;if(c){b=[c[0]+d[0],c[1]+d[1]]}}else {b=c}h=h||a.constrainTo||i||a.container||a.el.parent();if(j&&b){b=a.reverseTranslateXY(b)}e=(a.constrainHeader&&a.header.rendered?a.header:a).getConstrainVector(h,b,l);if(e){f=c||a.getPosition(j);f[0]+=e[0];f[1]+=e[1]}return f},getConstrainRegion:function(){var k=this,a=k.el,j=a.dom.nodeName==='BODY',h=a.dom,g=a.getBorders(),i=a.getXY(),e=i[0]+g.beforeX,f=i[1]+g.beforeY,c,d,b;if(j){c=a.getScroll();e=c.left;f=c.top;d=Ext.Element.getViewportWidth();b=Ext.Element.getViewportHeight()}else {d=h.clientWidth;b=h.clientHeight}return new Ext.util.Region(f,e+d,f+b,e)},getConstrainVector:function(a,h,i){var e=this,b=e.getRegion(),d=[0,0],g=e.shadow&&e.constrainShadow&&!e.shadowDisabled?e.el.shadow.getShadowSize():undefined,f=!1,c=e.constraintInsets;if(!(a instanceof Ext.util.Region)){a=Ext.get(a.el||a);a=a.getConstrainRegion()}if(c){c=Ext.isObject(c)?c:Ext.Element.parseBox(c);a.adjust(c.top,c.right,c.bottom,c.left)}if(h){b.translateBy(h[0]-b.x,h[1]-b.y)}if(i){b.right=b.left+i[0];b.bottom=b.top+i[1]}if(g){a.adjust(g[0],-g[1],-g[2],g[3])}if(b.right>a.right){f=!0;d[0]=a.right-b.right}if(b.left+d[0]<a.left){f=!0;d[0]=a.left-b.left}if(b.bottom>a.bottom){f=!0;d[1]=a.bottom-b.bottom}if(b.top+d[1]<a.top){f=!0;d[1]=a.top-b.top}return f?d:!1},getOffsetsTo:function(a){var c=this.getXY(),b=Ext.fly(a.el||a).getXY();return [c[0]-b[0],c[1]-b[1]]},getRegion:function(){var a=this.getBox();return new Ext.util.Region(a.top,a.right,a.bottom,a.left)},getClientRegion:function(){var d=this,b,a=d.getBox(),c=d.dom;b=c.offsetWidth-c.clientWidth;if(b){if(d.getStyle('direction')==='rtl'){a.left+=b}else {a.right-=b}}b=c.offsetHeight-c.clientHeight;if(b){a.bottom-=b}return new Ext.util.Region(a.top,a.right,a.bottom,a.left)},getViewRegion:function(){var a=this,i=a.el,j=i.dom.nodeName==='BODY',d,f,h,c,b,g,e;if(j){f=i.getScroll();b=f.left;c=f.top;g=Ext.Element.getViewportWidth();e=Ext.Element.getViewportHeight()}else {d=a.getBorderPadding();h=a.getXY();b=h[0]+d.beforeX;c=h[1]+d.beforeY;g=a.getWidth(!0);e=a.getHeight(!0)}return new Ext.util.Region(c,b+g,c+e,b)},getClientRegion:function(){var g=this.el,a,c,b,d,f,e;a=this.getBorderPadding();c=this.getXY();b=c[0]+a.beforeX;d=c[1]+a.beforeY;f=g.dom.clientWidth;e=g.dom.clientHeight;return new Ext.util.Region(d,b+f,d+e,b)},move:function(a,b,l){var j=this,k=j.getXY(),c=k[0],d=k[1],i=[c-b,d],g=[c+b,d],f=[c,d-b],e=[c,d+b],h={l:i,left:i,r:g,right:g,t:f,top:f,up:f,b:e,bottom:e,down:e};a=a.toLowerCase();j.setXY([h[a][0],h[a][1]],l)},setBox:function(a){var b=this,c,d;if(a.isRegion){a={x:a.left,y:a.top,width:a.right-a.left,height:a.bottom-a.top}}b.constrainBox(a);c=a.x;d=a.y;b.setXY([c,d]);b.setSize(a.width,a.height);b.afterSetPosition(c,d);return b},constrainBox:function(a){var c=this,b,d,e;if(c.constrain||c.constrainHeader){d='x' in a?a.x:a.left;e='y' in a?a.y:a.top;b=c.calculateConstrainedPosition(null,[d,e],!1,[a.width,a.height]);if(b){a.x=b[0];a.y=b[1]}}},translatePoints:function(b,c){var a=this.translateXY(b,c);return {left:a.x,top:a.y}},translateXY:function(a,g){var f=this,e=f.el,d=e.getStyle(f._positionTopLeft),h=d.position==='relative',b=parseFloat(d.left),c=parseFloat(d.top),i=f.getXY();if(Ext.isArray(a)){g=a[1];a=a[0]}if(isNaN(b)){b=h?0:e.dom.offsetLeft}if(isNaN(c)){c=h?0:e.dom.offsetTop}b=typeof a==='number'?a-i[0]+b:undefined;c=typeof g==='number'?g-i[1]+c:undefined;return {x:b,y:c}},reverseTranslateXY:function(d){var h=d,b=this.el,j=[],i=b.dom,a=i.offsetParent,g,c,e,f;if(a){g=b.isStyle('position','relative'),c=Ext.fly(a).getXY(),e=d[0]+c[0]+a.clientLeft;f=d[1]+c[1]+a.clientTop;if(g){e+=b.getPadding('l');f+=b.getPadding('t')}h=[e,f]}return h}},0,0,0,0,0,0,[Ext.util,'Positionable'],0);Ext.cmd.derive('Ext.dom.UnderlayPool',Ext.Base,{constructor:function(a){this.elementConfig=a;this.cache=[]},checkOut:function(){var a=this.cache.shift();if(!a){a=Ext.Element.create(this.elementConfig);a.setVisibilityMode(2)}return a},checkIn:function(a){this.cache.push(a)},reset:function(){var a=this.cache,b=a.length;while(b--){a[b].destroy()}this.cache=[]}},1,0,0,0,0,0,[Ext.dom,'UnderlayPool'],0);Ext.cmd.derive('Ext.dom.Underlay',Ext.Base,{constructor:function(a){Ext.apply(this,a)},beforeShow:Ext.emptyFn,getInsertionTarget:function(){return this.target},getPool:function(){return this.pool||(this.self.prototype.pool=new Ext.dom.UnderlayPool(this.elementConfig))},hide:function(){var a=this,b=a.el;if(b){b.hide();a.getPool().checkIn(b);a.el=null;a.hidden=!0}},realign:function(d,e,c,b){var h=this,g=h.el,f=h.target,a=h.offsets,i=Math.max;if(g){if(d==null){d=f.getX()}if(e==null){e=f.getY()}if(c==null){c=f.getWidth()}if(b==null){b=f.getHeight()}if(a){d=d+a.x;e=e+a.y;c=i(c+a.w,0);b=i(b+a.h,0)}g.setXY([d,e]);g.setSize(c,b)}},setZIndex:function(a){this.zIndex=a;if(this.el){this.el.setStyle('z-index',a)}},show:function(){var a=this,f=a.target,c=a.zIndex,b=a.el,e=a.getInsertionTarget().dom,d;if(!b){b=a.el=a.getPool().checkOut()}a.beforeShow();if(c==null){c=parseInt(f.getStyle('z-index'),10)}if(c){b.setStyle('z-index',c)}b.setStyle('position',a.fixed?'fixed':'');d=b.dom;if(d.nextSibling!==e){f.dom.parentNode.insertBefore(d,e)}b.show();a.realign();a.hidden=!1}},1,0,0,0,0,0,[Ext.dom,'Underlay'],0);Ext.cmd.derive('Ext.dom.Shadow',Ext.dom.Underlay,{alternateClassName:'Ext.Shadow',mode:'drop',offset:4,cls:'x-'+(!Ext.supports.CSS3BoxShadow?'ie':'css')+'-shadow',constructor:function(f){var d=this,e,c,a,b;Ext.dom.Underlay.prototype.constructor.call(this,f);d.elementConfig={cls:d.cls,role:'presentation'};a=d.offset;b=Math.floor(a/2);d.opacity=50;switch(d.mode.toLowerCase()){case 'drop':e={x:0,y:0,w:a,h:a};if(Ext.supports.CSS3BoxShadow){c={x:a,y:a,h:-a,w:-a}}else {c={x:-b,y:-b,h:-b,w:-b}};break;case 'sides':e={x:-a,y:0,w:a*2,h:a};if(Ext.supports.CSS3BoxShadow){c={x:0,y:a,h:-a,w:0}}else {c={x:1+b-2*a,y:-(1+b),h:-1,w:b-1}};break;case 'frame':e={x:-a,y:-a,w:a*2,h:a*2};if(Ext.supports.CSS3BoxShadow){c={x:0,y:0,h:0,w:0}}else {c={x:1+b-2*a,y:1+b-2*a,h:a-b-1,w:a-b-1}};break;case 'bottom':e={x:-a,y:0,w:a*2,h:a};if(Ext.supports.CSS3BoxShadow){c={x:0,y:a,h:-a,w:0}}else {c={x:0,y:a,h:0,w:0}};break;}d.offsets=c;d.outerOffsets=e},getShadowSize:function(){var b=this,a=b.el?b.offset:0,c=[a,a,a,a],d=b.mode.toLowerCase();if(b.el&&d!=='frame'){c[0]=0;if(d=='drop'){c[3]=0}}return c},boxShadowProperty:function(){var a='boxShadow',b=document.documentElement.style;if(!('boxShadow' in b)){if('WebkitBoxShadow' in b){a='WebkitBoxShadow'}else {if('MozBoxShadow' in b){a='MozBoxShadow'}}}return a}(),beforeShow:function(){var a=this,b=a.el.dom.style,c=a.shim;if(Ext.supports.CSS3BoxShadow){b[a.boxShadowProperty]='0 0 '+(a.offset+2)+'px #888'}else {b.filter='progid:DXImageTransform.Microsoft.alpha(opacity='+a.opacity+') progid:DXImageTransform.Microsoft.Blur(pixelradius='+a.offset+')'}if(c){c.realign()}},setOpacity:function(a){var b=this.el;if(b){if(Ext.isIE&&!Ext.supports.CSS3BoxShadow){a=Math.floor(a*100/2)/100}this.opacity=a;b.setOpacity(a)}}},1,0,0,0,0,0,[Ext.dom,'Shadow',Ext,'Shadow'],0);Ext.cmd.derive('Ext.dom.Shim',Ext.dom.Underlay,{cls:'x-shim',constructor:function(a){Ext.dom.Underlay.prototype.constructor.call(this,a);this.elementConfig={tag:'iframe',cls:this.cls,role:'presentation',frameBorder:'0',src:Ext.SSL_SECURE_URL,tabindex:'-1'}},getInsertionTarget:function(){var a=this.shadow;return a&&a.el||this.target}},1,0,0,0,0,0,[Ext.dom,'Shim'],0);Ext.cmd.derive('Ext.dom.ElementEvent',Ext.util.Event,{addListener:function(h,f,a,e,d){var b=this,c=!1,g=b.name,j=Ext.event.publisher.Dom.instance.directEvents[g],k,l,i;a=a||{};if(a.delegated===!1||j){if(j&&a.delegate){a.capture=!0}if(a.capture){i=b.directCaptures||(b.directCaptures=new Ext.util.Event(b.observable,g));c=i.addListener(h,f,a,e,d)}else {l=b.directs||(b.directs=new Ext.util.Event(b.observable,g));c=l.addListener(h,f,a,e,d)}}else {if(a.capture){k=b.captures||(b.captures=new Ext.util.Event(b.observable,g));c=k.addListener(h,f,a,e,d)}else {c=Ext.util.Event.prototype.addListener.call(this,h,f,a,e,d)}}return c},removeListener:function(c,b){var e=this,g=e.captures,h=e.directs,f=e.directCaptures,d=!1,a=e.findListener(c,b);if(a!==-1){d=Ext.util.Event.prototype.removeListener.call(this,c,b,a)}else {if(h){a=h.findListener(c,b)}if(a!==-1){d=h.removeListener(c,b,a)}else {if(g){a=g.findListener(c,b)}if(a!==-1){d=g.removeListener(c,b,a)}else {if(f){a=f.findListener(c,b);if(a!==-1){d=f.removeListener(c,b,a)}}}}}return d},clearListeners:function(){var a=this,b=a.directCaptures,d=a.directs,c=a.captures;if(b){b.clearListeners()}if(d){d.clearListeners()}if(c){c.clearListeners()}Ext.util.Event.prototype.clearListeners.call(this)},suspend:function(){var a=this,b=a.directCaptures,d=a.directs,c=a.captures;if(b){b.suspend()}if(d){d.suspend()}if(c){c.suspend()}Ext.util.Event.prototype.suspend.call(this)},resume:function(){var a=this,b=a.directCaptures,d=a.directs,c=a.captures;if(b){b.resume()}if(d){d.resume()}if(c){c.resume()}Ext.util.Event.prototype.resume.call(this)}},0,0,0,0,0,0,[Ext.dom,'ElementEvent'],0);Ext.cmd.derive('Ext.event.publisher.Publisher',Ext.Base,{handledEvents:[],statics:{publishers:{},publishersByEvent:{}},constructor:function(){var a=this,b=a.type;a.handles={};a.registerEvents();Ext.event.publisher.Publisher.publishers[b]=a},registerEvents:function(f){var c=this,e=Ext.event.publisher.Publisher.publishersByEvent,d=f||c.handledEvents,g=d.length,b,a;for(a=0;a<g;a++){b=d[a];c.handles[b]=1;e[b]=c}},fire:function(c,b,d){var a;if(c.hasListeners[b]){a=c.events[b];if(a){a.fire.apply(a,d)}}}},1,0,0,0,0,0,[Ext.event.publisher,'Publisher'],0);Ext.cmd.derive('Ext.util.Offset',Ext.Base,{statics:{fromObject:function(a){return new this(a.x,a.y)}},constructor:function(a,b){this.x=a!=null&&!isNaN(a)?a:0;this.y=b!=null&&!isNaN(b)?b:0;return this},copy:function(){return new Ext.util.Offset(this.x,this.y)},copyFrom:function(a){this.x=a.x;this.y=a.y},toString:function(){return 'Offset['+this.x+','+this.y+']'},equals:function(a){return this.x==a.x&&this.y==a.y},round:function(b){if(!isNaN(b)){var a=Math.pow(10,b);this.x=Math.round(this.x*a)/a;this.y=Math.round(this.y*a)/a}else {this.x=Math.round(this.x);this.y=Math.round(this.y)}},isZero:function(){return this.x==0&&this.y==0}},3,0,0,0,0,0,[Ext.util,'Offset'],0);Ext.cmd.derive('Ext.util.Region',Ext.Base,{isRegion:!0,statics:{getRegion:function(a){return Ext.fly(a).getRegion()},from:function(a){return new this(a.top,a.right,a.bottom,a.left)}},constructor:function(e,c,b,d){var a=this;a.y=a.top=a[1]=e;a.right=c;a.bottom=b;a.x=a.left=a[0]=d},contains:function(a){var b=this;return a.x>=b.x&&a.right<=b.right&&a.y>=b.y&&a.bottom<=b.bottom},intersect:function(a){var b=this,f=Math.max(b.y,a.y),e=Math.min(b.right,a.right),c=Math.min(b.bottom,a.bottom),d=Math.max(b.x,a.x);if(c>f&&e>d){return new this.self(f,e,c,d)}else {return !1}},union:function(a){var b=this,f=Math.min(b.y,a.y),e=Math.max(b.right,a.right),c=Math.max(b.bottom,a.bottom),d=Math.min(b.x,a.x);return new this.self(f,e,c,d)},constrainTo:function(b){var a=this,c=Ext.Number.constrain;a.top=a.y=c(a.top,b.y,b.bottom);a.bottom=c(a.bottom,b.y,b.bottom);a.left=a.x=c(a.left,b.x,b.right);a.right=c(a.right,b.x,b.right);return a},adjust:function(e,c,b,d){var a=this;a.top=a.y+=e;a.left=a.x+=d;a.right+=c;a.bottom+=b;return a},getOutOfBoundOffset:function(b,a){if(!Ext.isObject(b)){if(b=='x'){return this.getOutOfBoundOffsetX(a)}else {return this.getOutOfBoundOffsetY(a)}}else {a=b;var c=new Ext.util.Offset();c.x=this.getOutOfBoundOffsetX(a.x);c.y=this.getOutOfBoundOffsetY(a.y);return c}},getOutOfBoundOffsetX:function(a){if(a<=this.x){return this.x-a}else {if(a>=this.right){return this.right-a}}return 0},getOutOfBoundOffsetY:function(a){if(a<=this.y){return this.y-a}else {if(a>=this.bottom){return this.bottom-a}}return 0},isOutOfBound:function(b,a){if(!Ext.isObject(b)){if(b=='x'){return this.isOutOfBoundX(a)}else {return this.isOutOfBoundY(a)}}else {a=b;return this.isOutOfBoundX(a.x)||this.isOutOfBoundY(a.y)}},isOutOfBoundX:function(a){return a<this.x||a>this.right},isOutOfBoundY:function(a){return a<this.y||a>this.bottom},restrict:function(d,a,b){if(Ext.isObject(d)){var c;b=a;a=d;if(a.copy){c=a.copy()}else {c={x:a.x,y:a.y}}c.x=this.restrictX(a.x,b);c.y=this.restrictY(a.y,b);return c}else {if(d=='x'){return this.restrictX(a,b)}else {return this.restrictY(a,b)}}},restrictX:function(a,b){if(!b){b=1}if(a<=this.x){a-=(a-this.x)*b}else {if(a>=this.right){a-=(a-this.right)*b}}return a},restrictY:function(a,b){if(!b){b=1}if(a<=this.y){a-=(a-this.y)*b}else {if(a>=this.bottom){a-=(a-this.bottom)*b}}return a},getSize:function(){return {width:this.right-this.x,height:this.bottom-this.y}},copy:function(){return new this.self(this.y,this.right,this.bottom,this.x)},copyFrom:function(b){var a=this;a.top=a.y=a[1]=b.y;a.right=b.right;a.bottom=b.bottom;a.left=a.x=a[0]=b.x;return this},toString:function(){return 'Region['+this.top+','+this.right+','+this.bottom+','+this.left+']'},translateBy:function(b,c){if(arguments.length==1){c=b.y;b=b.x}var a=this;a.top=a.y+=c;a.right+=b;a.bottom+=c;a.left=a.x+=b;return a},round:function(){var a=this;a.top=a.y=Math.round(a.y);a.right=Math.round(a.right);a.bottom=Math.round(a.bottom);a.left=a.x=Math.round(a.x);return a},equals:function(a){return this.top===a.top&&this.right===a.right&&this.bottom===a.bottom&&this.left===a.left}},3,0,0,0,0,0,[Ext.util,'Region'],0);Ext.cmd.derive('Ext.util.Point',Ext.util.Region,{radianToDegreeConstant:180/Math.PI,origin:{x:0,y:0},statics:{fromEvent:function(b){var a=b.changedTouches,c=a&&a.length>0?a[0]:b;return this.fromTouch(c)},fromTouch:function(a){return new this(a.pageX,a.pageY)},from:function(a){if(!a){return new this(0,0)}if(!(a instanceof this)){return new this(a.x,a.y)}return a}},constructor:function(a,b){if(a==null){a=0}if(b==null){b=0}Ext.util.Region.prototype.constructor.call(this,b,a,b,a)},clone:function(){return new this.self(this.x,this.y)},copy:function(){return this.clone.apply(this,arguments)},copyFrom:function(a){this.x=a.x;this.y=a.y;return this},toString:function(){return 'Point['+this.x+','+this.y+']'},equals:function(a){return this.x===a.x&&this.y===a.y},isCloseTo:function(b,a){if(typeof a=='number'){return this.getDistanceTo(b)<=a}var e=b.x,f=b.y,c=a.x,d=a.y;return this.x<=e+c&&this.x>=e-c&&this.y<=f+d&&this.y>=f-d},isWithin:function(){return this.isCloseTo.apply(this,arguments)},isContainedBy:function(a){if(!(a instanceof Ext.util.Region)){a=Ext.get(a.el||a).getRegion()}return a.contains(this)},roundedEquals:function(a){if(!a||typeof a!=='object'){a=this.origin}return Math.round(this.x)===Math.round(a.x)&&Math.round(this.y)===Math.round(a.y)},getDistanceTo:function(a){if(!a||typeof a!=='object'){a=this.origin}var b=this.x-a.x,c=this.y-a.y;return Math.sqrt(b*b+c*c)},getAngleTo:function(a){if(!a||typeof a!=='object'){a=this.origin}var b=this.x-a.x,c=this.y-a.y;return Math.atan2(c,b)*this.radianToDegreeConstant}},3,0,0,0,0,0,[Ext.util,'Point'],function(){this.prototype.translate=this.prototype.translateBy});Ext.cmd.derive('Ext.event.Event',Ext.Base,{alternateClassName:'Ext.EventObjectImpl',isStopped:!1,defaultPrevented:!1,isEvent:!0,statics:{resolveTextNode:function(a){return a&&a.nodeType===3?a.parentNode:a},pointerEvents:{pointerdown:1,pointermove:1,pointerup:1,pointercancel:1,pointerover:1,pointerout:1,pointerenter:1,pointerleave:1,MSPointerDown:1,MSPointerMove:1,MSPointerUp:1,MSPointerOver:1,MSPointerOut:1,MSPointerCancel:1,MSPointerEnter:1,MSPointerLeave:1},mouseEvents:{mousedown:1,mousemove:1,mouseup:1,mouseover:1,mouseout:1,mouseenter:1,mouseleave:1},clickEvents:{click:1,dblclick:1},touchEvents:{touchstart:1,touchmove:1,touchend:1,touchcancel:1},focusEvents:{focus:1,blur:1,focusin:1,focusout:1,focusenter:1,focusleave:1},pointerTypes:{2:'touch',3:'pen',4:'mouse',touch:'touch',pen:'pen',mouse:'mouse'}},constructor:function(b){var a=this,c=a.self,h=a.self.resolveTextNode,i=b.changedTouches,g=i?i[0]:b,d=b.type,e,f;a.pageX=g.pageX;a.pageY=g.pageY;a.target=a.delegatedTarget=h(b.target);f=b.relatedTarget;if(f){a.relatedTarget=h(f)}a.browserEvent=a.event=b;a.type=d;a.button=b.button||0;a.shiftKey=b.shiftKey;a.ctrlKey=b.ctrlKey||b.metaKey||!1;a.altKey=b.altKey;a.charCode=b.charCode;a.keyCode=b.keyCode;a.buttons=b.buttons;if(a.button===0&&a.buttons===0){a.buttons=1}if(c.forwardTab!==undefined&&c.focusEvents[d]){a.forwardTab=c.forwardTab}if(c.mouseEvents[d]||c.clickEvents[d]){e='mouse'}else {if(c.pointerEvents[d]){e=c.pointerTypes[b.pointerType]}else {if(c.touchEvents[d]){e='touch'}}}if(e){a.pointerType=e}a.isMultitouch=b.isPrimary===!1||b.touches&&b.touches.length>1;a.timeStamp=a.time=+(b.timeStamp||new Date())},chain:function(b){var a=Ext.Object.chain(this);a.parentEvent=this;return Ext.apply(a,b)},correctWheelDelta:function(a){var c=this.WHEEL_SCALE,b=Math.round(a/c);if(!b&&a){b=a<0?-1:1}return b},getCharCode:function(){return this.charCode||this.keyCode},getKey:function(){return this.keyCode||this.charCode},getKeyName:function(){return this.keyCodes[this.keyCode]},getPoint:function(){var a=this.getXY();return new Ext.util.Point(a[0],a[1])},getRelatedTarget:function(d,e,c){var a=this.relatedTarget,b=null;if(a&&a.nodeType){if(d){b=Ext.fly(a).findParent(d,e,c)}else {b=c?Ext.get(a):a}}return b},getTarget:function(b,c,a){return b?Ext.fly(this.target).findParent(b,c,a):a?Ext.get(this.target):this.target},getTime:function(){return this.time},getWheelDelta:function(){var a=this.getWheelDeltas();return a.y},getWheelDeltas:function(){var d=this,a=d.browserEvent,c=0,b=0;if(Ext.isDefined(a.wheelDeltaX)){c=a.wheelDeltaX;b=a.wheelDeltaY}else {if(a.wheelDelta){b=a.wheelDelta}else {if(a.detail){b=-a.detail;if(b>100){b=3}else {if(b<-100){b=-3}}if(Ext.isDefined(a.axis)&&a.axis===a.HORIZONTAL_AXIS){c=b;b=0}}}}return {x:d.correctWheelDelta(c),y:d.correctWheelDelta(b)}},getX:function(){return this.getXY()[0]},getXY:function(){var d=this,c=d.xy;if(!c){c=d.xy=[d.pageX,d.pageY];var g=c[0],e,f,a,b;if(!g&&g!==0){e=d.browserEvent;f=document;a=f.documentElement;b=f.body;c[0]=e.clientX+(a&&a.scrollLeft||b&&b.scrollLeft||0)-(a&&a.clientLeft||b&&b.clientLeft||0);c[1]=e.clientY+(a&&a.scrollTop||b&&b.scrollTop||0)-(a&&a.clientTop||b&&b.clientTop||0)}}return c},getY:function(){return this.getXY()[1]},hasModifier:function(){var a=this;return !!(a.ctrlKey||a.altKey||a.shiftKey||a.metaKey)},isNavKeyPress:function(c){var a=this,b=a.keyCode,d=a.type==='keypress';return (!d||Ext.isGecko)&&b>=33&&b<=40||!c&&(b===a.RETURN||b===a.TAB||b===a.ESC)},isSpecialKey:function(){var b=this,a=b.keyCode,d=Ext.isGecko,c=b.type==='keypress';return d&&c&&b.charCode===0||this.isNavKeyPress()||a===b.BACKSPACE||a===b.ENTER||a>=16&&a<=20||(!c||d)&&a>=44&&a<=46},makeUnpreventable:function(){this.browserEvent.preventDefault=Ext.emptyFn},preventDefault:function(){var a=this,b=a.parentEvent;a.defaultPrevented=!0;if(b){b.defaultPrevented=!0}a.browserEvent.preventDefault();return a},setCurrentTarget:function(a){this.currentTarget=this.delegatedTarget=a},stopEvent:function(){return this.preventDefault().stopPropagation()},stopPropagation:function(){var a=this,b=a.browserEvent,c=a.parentEvent;a.isStopped=!0;if(c){c.isStopped=!0}if(!b.stopPropagation){b.cancelBubble=!0;return a}b.stopPropagation();return a},cancelGesture:function(){var a=this,b=a.parentEvent;a.gestureCancelled=!0;if(b){b.gestureCancelled=!0}return a},within:function(b,d,c){var a;if(b){a=d?this.getRelatedTarget():this.getTarget()}return a?Ext.fly(b).contains(a)||!!(c&&a===Ext.getDom(b)):!1},deprecated:{'4.0':{methods:{getPageX:'getX',getPageY:'getY'}}}},1,0,0,0,0,0,[Ext.event,'Event',Ext,'EventObjectImpl'],function(f){var b=f.prototype,a={BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,RETURN:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,WHEEL_SCALE:function(){var a;if(Ext.isGecko){a=3}else {if(Ext.isMac){if(Ext.isSafari&&Ext.webKitVersion>=532){a=120}else {a=12}a*=3}else {a=120}}return a}()},d={},c,e;Ext.apply(f,a);Ext.apply(b,a);delete a.WHEEL_SCALE;delete a.RETURN;for(c in a){e=a[c];d[e]=c}b.keyCodes=d;b.getTrueXY=b.getXY});Ext.cmd.derive('Ext.event.publisher.Dom',Ext.event.publisher.Publisher,{type:'dom',handledDomEvents:[],reEnterCount:0,captureEvents:{animationstart:1,animationend:1,resize:1,focus:1,blur:1},directEvents:{mouseenter:1,mouseleave:1,pointerenter:1,pointerleave:1,MSPointerEnter:1,MSPointerLeave:1,load:1,unload:1,beforeunload:1,error:1,DOMContentLoaded:1,DOMFrameContentLoaded:1,hashchange:1,scroll:1},blockedPointerEvents:{pointerover:1,pointerout:1,pointerenter:1,pointerleave:1,MSPointerOver:1,MSPointerOut:1,MSPointerEnter:1,MSPointerLeave:1},blockedCompatibilityMouseEvents:{mouseenter:1,mouseleave:1},constructor:function(){var a=this;a.bubbleSubscribers={};a.captureSubscribers={};a.directSubscribers={};a.directCaptureSubscribers={};a.delegatedListeners={};a.initHandlers();Ext.onInternalReady(a.onReady,a);Ext.event.publisher.Publisher.prototype.constructor.call(this)},registerEvents:function(){var b=this,e=Ext.event.publisher.Publisher.publishersByEvent,d=b.handledDomEvents,f=d.length,c=0,a;for(;c<f;c++){a=d[c];b.handles[a]=1;e[a]=b}Ext.event.publisher.Publisher.prototype.registerEvents.call(this)},onReady:function(){var a=this,c=a.handledDomEvents,d,b;if(c){for(b=0,d=c.length;b<d;b++){a.addDelegatedListener(c[b])}}Ext.getWin().on('unload',a.destroy,a)},initHandlers:function(){var a=this;a.onDelegatedEvent=Ext.bind(a.onDelegatedEvent,a);a.onDirectEvent=Ext.bind(a.onDirectEvent,a);a.onDirectCaptureEvent=Ext.bind(a.onDirectCaptureEvent,a)},addDelegatedListener:function(a){this.delegatedListeners[a]=1;this.target.addEventListener(a,this.onDelegatedEvent,!!this.captureEvents[a])},removeDelegatedListener:function(a){delete this.delegatedListeners[a];this.target.removeEventListener(a,this.onDelegatedEvent,!!this.captureEvents[a])},addDirectListener:function(b,c,a){c.dom.addEventListener(b,a?this.onDirectCaptureEvent:this.onDirectEvent,a)},removeDirectListener:function(b,c,a){c.dom.removeEventListener(b,a?this.onDirectCaptureEvent:this.onDirectEvent,a)},subscribe:function(f,b,g,e){var c=this,a,d;if(g&&!c.directEvents[b]){a=e?c.captureSubscribers:c.bubbleSubscribers;if(!c.handles[b]&&!c.delegatedListeners[b]){c.addDelegatedListener(b)}if(a[b]){++a[b]}else {a[b]=1}}else {a=e?c.directCaptureSubscribers:c.directSubscribers;d=f.id;a=a[b]||(a[b]={});if(a[d]){++a[d]}else {a[d]=1;c.addDirectListener(b,f,e)}}},unsubscribe:function(h,b,i,g){var c=this,e,f,a,d;if(i&&!c.directEvents[b]){e=c.captureSubscribers;f=c.bubbleSubscribers;a=g?e:f;if(a[b]){--a[b]}if(!c.handles[b]&&!f[b]&&!e[b]){this.removeDelegatedListener(b)}}else {a=g?c.directCaptureSubscribers:c.directSubscribers;d=h.id;a=a[b];if(a[d]){--a[d]}if(!a[d]){delete a[d];c.removeDirectListener(b,h,g)}}},getPropagatingTargets:function(d){var a=d,c=[],b;while(a){c.push(a);b=a.parentNode;if(!b){b=a.defaultView}a=b}return c},publish:function(e,g,f){var d=this,c,a,b,h;if(Ext.isArray(g)){c=g}else {if(d.captureEvents[e]){a=Ext.cache[g.id];c=a?[a]:[]}else {c=d.getPropagatingTargets(g)}}h=c.length;if(d.captureSubscribers[e]){for(b=h;b--;){a=Ext.cache[c[b].id];if(a){d.fire(a,e,f,!1,!0);if(f.isStopped){break}}}}if(!f.isStopped&&d.bubbleSubscribers[e]){for(b=0;b<h;b++){a=Ext.cache[c[b].id];if(a){d.fire(a,e,f,!1,!1);if(f.isStopped){break}}}}},fire:function(b,d,c,f,e){var a;if(b.hasListeners[d]){a=b.events[d];if(a){if(e&&f){a=a.directCaptures}else {if(e){a=a.captures}else {if(f){a=a.directs}}}if(a){c.setCurrentTarget(b.dom);a.fire(c,c.target)}}}},onDelegatedEvent:function(a){if(Ext.elevateFunction){Ext.elevateFunction(this.doDelegatedEvent,this,[a])}else {this.doDelegatedEvent(a)}},doDelegatedEvent:function(a,c){var b=this,d=a.timeStamp;a=new Ext.event.Event(a);if(b.isEventBlocked(a)){return !1}b.beforeEvent(a);Ext.frameStartTime=d;b.reEnterCount++;b.publish(a.type,a.target,a);b.reEnterCount--;if(c!==!1){b.afterEvent(a)}return a},onDirectEvent:function(a){if(Ext.elevateFunction){Ext.elevateFunction(this.doDirectEvent,this,[a,!1])}else {this.doDirectEvent(a,!1)}},onDirectCaptureEvent:function(a){if(Ext.elevateFunction){Ext.elevateFunction(this.doDirectEvent,this,[a,!0])}else {this.doDirectEvent(a,!0)}},doDirectEvent:function(a,f){var b=this,d=a.currentTarget,e=a.timeStamp,c;a=new Ext.event.Event(a);if(b.isEventBlocked(a)){return}b.beforeEvent(a);Ext.frameStartTime=e;c=Ext.cache[d.id];if(c){b.reEnterCount++;b.fire(c,a.type,a,!0,f);b.reEnterCount--}b.afterEvent(a)},beforeEvent:function(e){var c=e.browserEvent,d=Ext.event.publisher.Dom,a,b;if(c.type==='touchstart'){a=c.touches;if(a.length===1){b=a[0];d.lastTouchStartX=b.pageX;d.lastTouchStartY=b.pageY}}},afterEvent:function(c){var e=c.browserEvent,b=e.type,d=Ext.event.publisher.Dom,a=Ext.GlobalEvents;if(c.self.pointerEvents[b]&&c.pointerType!=='mouse'){d.lastScreenPointerEventTime=Ext.now()}if(b==='touchend'){d.lastTouchEndTime=Ext.now()}if(!this.reEnterCount&&a.hasListeners.idle&&!a.idleEventMask[b]){a.fireEvent('idle')}},isEventBlocked:function(a){var d=this,c=a.type,b=Ext.event.publisher.Dom,e=Ext.now();if(Ext.isGecko&&a.type==='click'&&a.button===2){return !0}return d.blockedPointerEvents[c]&&a.pointerType!=='mouse'||d.blockedCompatibilityMouseEvents[c]&&e-b.lastScreenPointerEventTime<1000||Ext.supports.TouchEvents&&a.self.mouseEvents[a.type]&&Math.abs(a.pageX-b.lastTouchStartX)<15&&Math.abs(a.pageY-b.lastTouchStartY)<15&&Ext.now()-b.lastTouchEndTime<1000},destroy:function(){var a;for(a in this.delegatedListeners){this.removeDelegatedListener(a)}this.callParent()},reset:function(){var a=Ext.event.publisher.Dom;a.lastScreenPointerEventTime=a.lastTouchEndTime=a.lastTouchStartX=a.lastTouchStartY=undefined}},1,0,0,0,0,0,[Ext.event.publisher,'Dom'],function(b){var d=document,a=d.defaultView,c=b.prototype;if(Ext.os.is.iOS&&Ext.os.version.getMajor()<5||Ext.browser.is.AndroidStock||!(a&&a.addEventListener)){c.target=d}else {c.target=a}b.instance=new b()});Ext.cmd.derive('Ext.event.publisher.Gesture',Ext.event.publisher.Dom,{type:'gesture',config:{async:!0},isCancelEvent:{touchcancel:1,pointercancel:1,MSPointerCancel:1},handledEvents:[],handledDomEvents:[],constructor:function(l){var a=this,d=a.handledDomEvents,j=Ext.supports,i=j.TouchEvents,k=Ext.Function,g=a.onTouchStart,h=a.onTouchMove,c=a.onTouchEnd,e=k.createAnimationFrame(a.onTouchStart,a,null,1),f=k.createAnimationFrame(a.onTouchMove,a),b=k.createAnimationFrame(a.onTouchEnd,a,null,1);a._handlers={touchstart:g,touchmove:h,touchend:c,touchcancel:c,pointerdown:g,pointermove:h,pointerup:c,pointercancel:c,MSPointerDown:g,MSPointerMove:h,MSPointerUp:c,MSPointerCancel:c,mousedown:g,mousemove:h,mouseup:c};a._asyncHandlers={touchstart:e,touchmove:f,touchend:b,touchcancel:b,pointerdown:e,pointermove:f,pointerup:b,pointercancel:b,MSPointerDown:e,MSPointerMove:f,MSPointerUp:b,MSPointerCancel:b,mousedown:e,mousemove:f,mouseup:b};a.activeTouchesMap={};a.activeTouches=[];a.changedTouches=[];a.recognizers=[];if(i){a.onTargetTouchMove=a.onTargetTouchMove.bind(a);a.onTargetTouchEnd=a.onTargetTouchEnd.bind(a)}if(j.PointerEvents){d.push('pointerdown','pointermove','pointerup','pointercancel');a.mousePointerType='mouse'}else {if(j.MSPointerEvents){d.push('MSPointerDown','MSPointerMove','MSPointerUp','MSPointerCancel');a.mousePointerType=4}else {if(i){d.push('touchstart','touchmove','touchend','touchcancel')}}}if(!d.length||i&&Ext.isWebKit&&Ext.os.is.Desktop){d.push('mousedown','mousemove','mouseup')}a.initConfig(l);return Ext.event.publisher.Dom.prototype.constructor.call(this)},onReady:function(){Ext.event.publisher.Dom.prototype.onReady.call(this);Ext.Array.sort(this.recognizers,function(c,d){var a=c.priority,b=d.priority;return a>b?1:a<b?-1:0})},registerRecognizer:function(b){var a=this,d=b.handledEvents,e=d.length,c;b.setOnRecognized(a.onRecognized);b.setCallbackScope(a);for(c=0;c<e;c++){a.handledEvents.push(d[c])}a.registerEvents(d);a.recognizers.push(b)},onRecognized:function(g,c,a){var j=this,b=c.changedTouches,i=b.length,e,f,d,h;a=a||{};a.type=g;a.target=b[0].target;a.isStopped=!1;c=c.chain(a);if(i>1){e=[];for(d=0;d<i;d++){h=b[d];e.push(h.targets)}f=j.getCommonTargets(e)}else {f=b[0].targets}j.publish(g,f,c)},getCommonTargets:function(e){var d=e[0],h=e.length;if(h===1){return d}var a=[],g=1,b,f,c;while(!0){b=d[d.length-g];if(!b){return a}for(c=1;c<h;c++){f=e[c];if(f[f.length-g]!==b){return a}}a.unshift(b);g++}return a},invokeRecognizers:function(e,d){var c=this.recognizers,f=c.length,a,b;if(e==='onStart'){for(a=0;a<f;a++){c[a].isActive=!0}}for(a=0;a<f;a++){b=c[a];if(b.isActive){if(d.gestureCancelled){b.onEventCancelled(d)}else {if(b[e].call(b,d)===!1){b.isActive=!1}}}}},updateTouches:function(i,p){var h=this,m=i.browserEvent,n=m.changedTouches||[m],f=h.activeTouches,e=h.activeTouchesMap,l=[],b,c,a,g,d,o,j,k;for(d=0,o=n.length;d<o;d++){b=n[d];if('identifier' in b){c=b.identifier}else {if('pointerId' in b){c=b.pointerId}else {c=1}}a=e[c];if(!a){g=Ext.event.Event.resolveTextNode(b.target);a=e[c]={identifier:c,target:g,targets:h.getPropagatingTargets(g)};f.push(a)}if(p){delete e[c];Ext.Array.remove(f,a)}j=b.pageX;k=b.pageY;a.pageX=j;a.pageY=k;a.point=new Ext.util.Point(j,k);l.push(a)}i.touches=Ext.Array.clone(f);i.changedTouches=l},doDelegatedEvent:function(a){var b=this;a=Ext.event.publisher.Dom.prototype.doDelegatedEvent.call(this,a,!1);if(a&&!a.gestureCancelled){if(!a.button||a.button<1){b.handlers[a.type].call(b,a)}b.afterEvent(a)}},onTouchStart:function(b){var a=this,d=b.target,c=b.browserEvent.touches;if(b.browserEvent.type==='touchstart'){d.addEventListener('touchmove',a.onTargetTouchMove);d.addEventListener('touchend',a.onTargetTouchEnd);d.addEventListener('touchcancel',a.onTargetTouchEnd)}if(c&&c.length<=a.activeTouches.length){a.removeGhostTouches(c)}a.updateTouches(b);if(!a.isStarted){a.isStarted=!0;a.invokeRecognizers('onStart',b);if(Ext.enableGarbageCollector){Ext.dom.GarbageCollector.pause()}}a.invokeRecognizers('onTouchStart',b)},onTouchMove:function(a){var b=this,c=b.mousePointerType;if(b.isStarted){if(c&&a.browserEvent.pointerType===c&&a.buttons===0){a.type=Ext.dom.Element.prototype.eventMap.touchend;a.button=0;b.onTouchEnd(a);return}b.updateTouches(a);if(a.changedTouches.length>0){b.invokeRecognizers('onTouchMove',a)}}},onTouchEnd:function(b){var a=this;if(!a.isStarted){return}a.updateTouches(b,!0);try{a.invokeRecognizers(a.isCancelEvent[b.type]?'onTouchCancel':'onTouchEnd',b)}finally{if(!a.activeTouches.length){a.isStarted=!1;a.invokeRecognizers('onEnd',b);if(Ext.enableGarbageCollector){Ext.dom.GarbageCollector.resume()}}}},onTargetTouchMove:function(a){if(Ext.elevateFunction){Ext.elevateFunction(this.doTargetTouchMove,this,[a])}else {this.doTargetTouchMove(a)}},doTargetTouchMove:function(a){if(!Ext.getBody().contains(a.target)){this.onTouchMove(new Ext.event.Event(a))}},onTargetTouchEnd:function(a){if(Ext.elevateFunction){Ext.elevateFunction(this.doTargetTouchEnd,this,[a])}else {this.doTargetTouchEnd(a)}},doTargetTouchEnd:function(c){var b=this,a=c.target;a.removeEventListener('touchmove',b.onTargetTouchMove);a.removeEventListener('touchend',b.onTargetTouchEnd);a.removeEventListener('touchcancel',b.onTargetTouchEnd);if(!Ext.getBody().contains(a)){b.onTouchEnd(new Ext.event.Event(c))}},updateAsync:function(a){this.handlers=a?this._asyncHandlers:this._handlers},reset:function(){var a=this,d=a.recognizers,e=d.length,b,c;a.activeTouchesMap={};a.activeTouches=[];a.changedTouches=[];a.isStarted=!1;for(b=0;b<e;b++){c=d[b];c.reset();c.isActive=!1}Ext.event.publisher.Dom.prototype.reset.call(this)},privates:{removeGhostTouches:function(c){var f={},g=c.length,b=this.activeTouches,h=this.activeTouchesMap,a,e,d;for(a=0;a<g;++a){f[c[a].identifier]=!0}a=b.length;while(a--){d=b[a];e=d.identifier;if(!c[e]){Ext.Array.remove(b,d);delete h[e]}}}}},1,0,0,0,0,0,[Ext.event.publisher,'Gesture'],function(a){a.instance=new a()});Ext.cmd.derive('Ext.mixin.Templatable',Ext.Mixin,{mixinConfig:{id:'templatable'},referenceAttributeName:'reference',referenceSelector:'[reference]',getElementConfig:function(){return {reference:'element'}},getElementTemplate:function(){var a=document.createDocumentFragment();a.appendChild(Ext.Element.create(this.getElementConfig(),!0));return a},initElement:function(){var a=this.self.prototype;a.elementTemplate=this.getElementTemplate();a.initElement=a.doInitElement;this.initElement.apply(this,arguments)},linkElement:function(a,b){this.link(a,b)},doInitElement:function(){var d=this.referenceAttributeName,e,c,b,g,a,f;e=this.elementTemplate.cloneNode(!0);c=e.querySelectorAll(this.referenceSelector);for(b=0,g=c.length;b<g;b++){a=c[b];f=a.getAttribute(d);a.removeAttribute(d);this.linkElement(f,a)}}},0,0,0,0,0,0,[Ext.mixin,'Templatable'],0);Ext.cmd.derive('Ext.TaskQueue',Ext.Base,{singleton:!0,pending:!1,mode:!0,constructor:function(){this.readQueue=[];this.writeQueue=[];this.run=Ext.Function.bind(this.run,this);if(Ext.os.is.iOS){Ext.interval(this.watch,500,this)}},requestRead:function(c,a,b){this.request(!0);this.readQueue.push(arguments)},requestWrite:function(c,a,b){this.request(!1);this.writeQueue.push(arguments)},request:function(a){if(!this.pending){this.pendingTime=Date.now();this.pending=!0;this.mode=a;if(a){Ext.defer(this.run,1,this)}else {Ext.Function.requestAnimationFrame(this.run)}}},watch:function(){if(this.pending&&Date.now()-this.pendingTime>=500){this.run()}},run:function(){this.pending=!1;var i=this.readQueue,h=this.writeQueue,c=null,d;if(this.mode){d=i;if(h.length>0){c=!1}}else {d=h;if(i.length>0){c=!0}}var g=d.slice(),f,j,b,a,e;d.length=0;for(f=0,j=g.length;f<j;f++){b=g[f];a=b[0];e=b[1];if(typeof a==='string'){a=e[a]}if(b.length>2){a.apply(e,b[2])}else {a.call(e)}}g.length=0;if(c!==null){this.request(c)}}},1,0,0,0,0,0,[Ext,'TaskQueue'],0);Ext.cmd.derive('Ext.util.sizemonitor.Abstract',Ext.Base,{config:{element:null,callback:Ext.emptyFn,scope:null,args:[]},width:0,height:0,contentWidth:0,contentHeight:0,constructor:function(a){this.refresh=Ext.Function.bind(this.refresh,this);this.info={width:0,height:0,contentWidth:0,contentHeight:0,flag:0};this.initElement();this.initConfig(a);this.bindListeners(!0)},bindListeners:Ext.emptyFn,applyElement:function(a){if(a){return Ext.get(a)}},updateElement:function(a){a.append(this.detectorsContainer);a.addCls('x-size-monitored')},applyArgs:function(a){return a.concat([this.info])},refreshMonitors:Ext.emptyFn,forceRefresh:function(){Ext.TaskQueue.requestRead('refresh',this)},getContentBounds:function(){return this.detectorsContainer.getBoundingClientRect()},getContentWidth:function(){return this.detectorsContainer.offsetWidth},getContentHeight:function(){return this.detectorsContainer.offsetHeight},refreshSize:function(){var b=this.getElement();if(!b||b.destroyed){return !1}var h=b.getWidth(),g=b.getHeight(),d=this.getContentWidth(),c=this.getContentHeight(),j=this.contentWidth,i=this.contentHeight,a=this.info,f=!1,e;this.width=h;this.height=g;this.contentWidth=d;this.contentHeight=c;e=(j!==d?1:0)+(i!==c?2:0);if(e>0){a.width=h;a.height=g;a.contentWidth=d;a.contentHeight=c;a.flag=e;f=!0;this.getCallback().apply(this.getScope(),this.getArgs())}return f},refresh:function(a){if(this.refreshSize()||a){Ext.TaskQueue.requestWrite('refreshMonitors',this)}},destroy:function(){var a=this,b=a.getElement();a.bindListeners(!1);if(b&&!b.destroyed){b.removeCls('x-size-monitored')}delete a._element;a.callParent()}},1,0,0,0,0,[[Ext.mixin.Templatable.prototype.mixinId||Ext.mixin.Templatable.$className,Ext.mixin.Templatable]],[Ext.util.sizemonitor,'Abstract'],0);Ext.cmd.derive('Ext.util.sizemonitor.Scroll',Ext.util.sizemonitor.Abstract,{getElementConfig:function(){return {reference:'detectorsContainer',classList:['x-size-monitors','scroll'],children:[{reference:'expandMonitor',className:'expand'},{reference:'shrinkMonitor',className:'shrink'}]}},constructor:function(a){this.onScroll=Ext.Function.bind(this.onScroll,this);Ext.util.sizemonitor.Abstract.prototype.constructor.apply(this,arguments)},bindListeners:function(b){var a=b?'addEventListener':'removeEventListener';this.expandMonitor[a]('scroll',this.onScroll,!0);this.shrinkMonitor[a]('scroll',this.onScroll,!0)},forceRefresh:function(){Ext.TaskQueue.requestRead('refresh',this,[!0])},onScroll:function(){Ext.TaskQueue.requestRead('refresh',this)},refreshMonitors:function(){var a=this.expandMonitor,b=this.shrinkMonitor,c=1000000;if(a&&!a.destroyed){a.scrollLeft=c;a.scrollTop=c}if(b&&!b.destroyed){b.scrollLeft=c;b.scrollTop=c}}},1,0,0,0,0,0,[Ext.util.sizemonitor,'Scroll'],0);Ext.cmd.derive('Ext.util.sizemonitor.OverflowChange',Ext.util.sizemonitor.Abstract,{constructor:function(a){this.onExpand=Ext.Function.bind(this.onExpand,this);this.onShrink=Ext.Function.bind(this.onShrink,this);Ext.util.sizemonitor.Abstract.prototype.constructor.apply(this,arguments)},getElementConfig:function(){return {reference:'detectorsContainer',classList:['x-size-monitors','overflowchanged'],children:[{reference:'expandMonitor',className:'expand',children:[{reference:'expandHelper'}]},{reference:'shrinkMonitor',className:'shrink',children:[{reference:'shrinkHelper'}]}]}},bindListeners:function(b){var a=b?'addEventListener':'removeEventListener';this.expandMonitor[a](Ext.browser.is.Firefox?'underflow':'overflowchanged',this.onExpand,!0);this.shrinkMonitor[a](Ext.browser.is.Firefox?'overflow':'overflowchanged',this.onShrink,!0)},onExpand:function(a){if(Ext.browser.is.Webkit&&a.horizontalOverflow&&a.verticalOverflow){return}Ext.TaskQueue.requestRead('refresh',this)},onShrink:function(a){if(Ext.browser.is.Webkit&&!a.horizontalOverflow&&!a.verticalOverflow){return}Ext.TaskQueue.requestRead('refresh',this)},refreshMonitors:function(){if(this.destroyed){return}var b=this.expandHelper,c=this.shrinkHelper,d=this.getContentBounds(),f=d.width,e=d.height,a;if(b&&!b.destroyed){a=b.style;a.width=f+1+'px';a.height=e+1+'px'}if(c&&!c.destroyed){a=c.style;a.width=f+'px';a.height=e+'px'}Ext.TaskQueue.requestRead('refresh',this)}},1,0,0,0,0,0,[Ext.util.sizemonitor,'OverflowChange'],0);Ext.cmd.derive('Ext.util.SizeMonitor',Ext.Base,{constructor:function(b){var a=Ext.util.sizemonitor;if(Ext.browser.is.Firefox){return new a.OverflowChange(b)}else {return new a.Scroll(b)}}},1,0,0,0,0,0,[Ext.util,'SizeMonitor'],0);Ext.cmd.derive('Ext.event.publisher.ElementSize',Ext.event.publisher.Publisher,{type:'size',handledEvents:['resize'],constructor:function(){this.monitors={};this.subscribers={};Ext.event.publisher.Publisher.prototype.constructor.apply(this,arguments)},subscribe:function(b){var a=b.id,c=this.subscribers,d=this.monitors;if(c[a]){++c[a]}else {c[a]=1;d[a]=new Ext.util.SizeMonitor({element:b,callback:this.onElementResize,scope:this,args:[b]})}b.on('painted','forceRefresh',d[a]);return !0},unsubscribe:function(e){var a=e.id,c=this.subscribers,d=this.monitors,b;if(c[a]&&!--c[a]){delete c[a];b=d[a];e.un('painted','forceRefresh',b);b.destroy();delete d[a]}},onElementResize:function(a,b){Ext.TaskQueue.requestRead('fire',this,[a,'resize',[a,b]])}},1,0,0,0,0,0,[Ext.event.publisher,'ElementSize'],function(a){a.instance=new a()});Ext.cmd.derive('Ext.util.paintmonitor.Abstract',Ext.Base,{config:{element:null,callback:Ext.emptyFn,scope:null,args:[]},eventName:'',monitorClass:'',constructor:function(a){this.onElementPainted=Ext.Function.bind(this.onElementPainted,this);this.initConfig(a)},bindListeners:function(a){this.monitorElement[a?'addEventListener':'removeEventListener'](this.eventName,this.onElementPainted,!0)},applyElement:function(a){if(a){return Ext.get(a)}},updateElement:function(a){this.monitorElement=Ext.Element.create({classList:['x-paint-monitor',this.monitorClass]},!0);a.appendChild(this.monitorElement);a.addCls('x-paint-monitored');this.bindListeners(!0)},onElementPainted:function(){},destroy:function(){var a=this,c=a.monitorElement,d=c.parentNode,b=a.getElement();a.bindListeners(!1);delete a.monitorElement;if(b&&!b.destroyed){b.removeCls('x-paint-monitored');delete a._element}if(d){d.removeChild(c)}a.callParent()}},1,0,0,0,0,0,[Ext.util.paintmonitor,'Abstract'],0);Ext.cmd.derive('Ext.util.paintmonitor.CssAnimation',Ext.util.paintmonitor.Abstract,{eventName:Ext.browser.is.WebKit?'webkitAnimationEnd':'animationend',monitorClass:'cssanimation',onElementPainted:function(a){if(a.animationName==='x-paint-monitor-helper'){this.getCallback().apply(this.getScope(),this.getArgs())}}},0,0,0,0,0,0,[Ext.util.paintmonitor,'CssAnimation'],0);Ext.cmd.derive('Ext.util.PaintMonitor',Ext.Base,{constructor:function(a){return new Ext.util.paintmonitor.CssAnimation(a)}},1,0,0,0,0,0,[Ext.util,'PaintMonitor'],0);Ext.cmd.derive('Ext.event.publisher.ElementPaint',Ext.event.publisher.Publisher,{type:'paint',handledEvents:['painted'],constructor:function(){this.monitors={};this.subscribers={};Ext.event.publisher.Publisher.prototype.constructor.apply(this,arguments)},subscribe:function(d){var b=this,a=d.id,c=b.subscribers;if(c[a]){++c[a]}else {c[a]=1;b.monitors[a]=new Ext.util.PaintMonitor({element:d,callback:b.onElementPainted,scope:b,args:[d]})}},unsubscribe:function(d){var a=d.id,b=this.subscribers,c=this.monitors;if(b[a]&&!--b[a]){delete b[a];c[a].destroy();delete c[a]}},onElementPainted:function(a){Ext.TaskQueue.requestRead('fire',this,[a,'painted',[a]])}},1,0,0,0,0,0,[Ext.event.publisher,'ElementPaint'],function(a){a.instance=new a()});Ext.cmd.derive('Ext.dom.Element',Ext.Base,function(a){var h=window,b=document,H='ext-window',F='ext-document',w='width',J='height',W='min-width',T='min-height',V='max-width',S='max-height',ag='top',ad='right',_='bottom',af='left',U='visibility',aa='hidden',I='display',x='none',ac='z-index',u='position',X='relative',ab='static',j='-',$=/\w/g,k=/\s+/,N=/[\s]+/,Q=/^(?:transparent|(?:rgba[(](?:\s*\d+\s*[,]){3}\s*0\s*[)]))$/i,M=/table-row|table-.*-group/,ae=/top/i,d={t:'border-top-width',r:'border-right-width',b:'border-bottom-width',l:'border-left-width'},f={t:'padding-top',r:'padding-right',b:'padding-bottom',l:'padding-left'},v={t:'margin-top',r:'margin-right',b:'margin-bottom',l:'margin-left'},R=[f.l,f.r,f.t,f.b],D=[d.l,d.r,d.t,d.b],Y=/\d+$/,K=/\d+(px|em|%|en|ex|pt|in|cm|mm|pc)$/i,E='px',Z=/(-[a-z])/gi,L=/([a-z0-9\-]+)\s*:\s*([^;\s]+(?:\s*[^;\s]+)*);?/gi,t=/^\d+(?:\.\d*)?px$/i,C={},A='originalDisplay',P=function(c,b){return b.charAt(1).toUpperCase()},G=function(d,e){var c,b,f;if(d.nodeType===1){d._extData=null;if(e){c=d.childNodes;for(b=0,f=c.length;b<f;++b){G(c[b],e)}}}},m='x-hidden-visibility',i='x-hidden-display',o='x-hidden-offsets',r='x-hidden-clip',q='x-sized',p='x-unsized',n='x-stretched',O='x-no-touch-scroll',g={style:'style',className:'className',cls:'cls',classList:'classList',text:'text',hidden:'hidden',html:'html',children:'children'},B=0,y=0,z=!1,l=!1,s,c,e;return {alternateClassName:['Ext.Element'],observableType:'element',isElement:!0,skipGarbageCollection:!0,$applyConfigs:!0,identifiablePrefix:'ext-element-',styleHooks:{},validIdRe:Ext.validIdRe,blockedEvents:Ext.supports.EmulatedMouseOver?{mouseover:1}:{},longpressEvents:{longpress:1,taphold:1},constructor:function(d){var c=this,e;if(typeof d==='string'){d=b.getElementById(d)}if(!d){return null}c.dom=d;e=d.id;if(e){c.id=e}else {e=d.id=c.getUniqueId()}c.el=c;Ext.cache[e]=c;c.mixins.observable.constructor.call(c)},inheritableStatics:{cache:Ext.cache={},editableSelector:'input,textarea,[contenteditable="true"]',VISIBILITY:1,DISPLAY:2,OFFSETS:3,CLIP:4,minKeyboardHeight:100,unitRe:K,useDelegatedEvents:!0,validNodeTypes:{1:1,9:1},addUnits:function(b,c){if(typeof b==='number'){return b+(c||E)}if(b===''||b==='auto'||b==null){return b||''}if(Y.test(b)){return b+(c||E)}if(!K.test(b)){return b||''}return b},create:function(c,m){var q=this,e,f,o,l,d,j,h,p,n;c=c||{};if(c.isElement){return m?c.dom:c}else {if('nodeType' in c){return m?c:Ext.get(c)}}if(typeof c==='string'){return b.createTextNode(c)}l=c.tag;if(!l){l='div'}if(c.namespace){f=b.createElementNS(c.namespace,l)}else {f=b.createElement(l)}o=f.style;for(j in c){if(j!=='tag'){d=c[j];switch(j){case g.style:if(typeof d==='string'){f.setAttribute(j,d)}else {for(h in d){if(d.hasOwnProperty(h)){o[h]=d[h]}}};break;case g.className:case g.cls:n=d.split(k);e=e?e.concat(n):n;break;case g.classList:e=e?e.concat(d):d;break;case g.text:f.textContent=d;break;case g.html:f.innerHTML=d;break;case g.hidden:if(e){e.push(i)}else {e=[i]};break;case g.children:for(h=0,p=d.length;h<p;h++){f.appendChild(q.create(d[h],!0))};break;default:if(d!=null){f.setAttribute(j,d)};}}}if(e){f.className=e.join(' ')}if(m){return f}else {return q.get(f)}},detach:function(){var b=this.dom;if(b&&b.parentNode&&b.tagName!=='BODY'){b.parentNode.removeChild(b)}return this},fly:function(c,b){return Ext.fly(c,b)},fromPoint:function(c,d){return Ext.get(b.elementFromPoint(c,d))},get:function(c){var m=this,g=Ext.cache,f,j,e,d,l,i,k;if(!c){return null}if(c.isFly){c=c.dom}if(typeof c==='string'){e=c;if(g.hasOwnProperty(e)){d=g[e];if(d.skipGarbageCollection||!Ext.isGarbage(d.dom)){return d}else {d.destroy()}}if(e===H){return a.get(h)}else {if(e===F){return a.get(b)}}j=Ext.getElementById?Ext.getElementById(e):b.getElementById(e);if(j){return new a(j)}}f=c.nodeType;if(f){l=f===9;k=m.validNodeTypes[f]}else {i=c.window==c}if(k||i){e=c.id;if(g.hasOwnProperty(e)){d=g[e];if(d.skipGarbageCollection||c===d.dom||!Ext.isGarbage(d.dom)){return d}else {d.destroy()}}if(c===b){c.id=F}if(c==h){c.id=H}c=new a(c);if(i||l){c.skipGarbageCollection=!0}return c}if(c.isElement){return c}if(c.isComposite){return c}if(Ext.isIterable(c)){return m.select(c)}return null},getActiveElement:function(d){var c=b.activeElement;if(!c||!c.focus){c=b.body}return d?Ext.get(c):c},getDocumentHeight:function(){return Math.max(!Ext.isStrict?b.body.scrollHeight:b.documentElement.scrollHeight,this.getViewportHeight())},getDocumentWidth:function(){return Math.max(!Ext.isStrict?b.body.scrollWidth:b.documentElement.scrollWidth,this.getViewportWidth())},getOrientation:function(){if(Ext.supports.OrientationChange){return h.orientation==0?'portrait':'landscape'}return h.innerHeight>h.innerWidth?'portrait':'landscape'},getViewportHeight:function(){var c=a._viewportHeight;if(Ext.isIE9m){return b.documentElement.clientHeight}return c!=null?c:h.innerHeight},getViewportWidth:function(){var c=a._viewportWidth;if(Ext.isIE9m){return b.documentElement.clientWidth}return c!=null?c:h.innerWidth},getViewSize:function(){return {width:a.getViewportWidth(),height:a.getViewportHeight()}},normalize:function(b){return C[b]||(C[b]=b.replace(Z,P))},_onWindowFocusChange:function(b){if(Ext.fly(b.target).is(a.editableSelector)){B=new Date();z=b.type==='focusin'||b.type==='pointerup'}},_onWindowResize:function(){var c=window.innerWidth,b=window.innerHeight,g=new Date(),f=1000,d,e;d=c-a._windowWidth;e=b-a._windowHeight;a._windowWidth=c;a._windowHeight=b;if(g-B<f||g-y<f){if(d===0&&(z&&e<=-a.minKeyboardHeight)){l=!0;return}}if(l&&d===0&&e>=a.minKeyboardHeight){l=!1;y=new Date()}if(l){return}a._viewportWidth=c;a._viewportHeight=b},parseBox:function(c){c=c||0;var e=typeof c,b,d;if(e==='number'){return {top:c,right:c,bottom:c,left:c}}else {if(e!=='string'){return c}}b=c.split(' ');d=b.length;if(d===1){b[1]=b[2]=b[3]=b[0]}else {if(d===2){b[2]=b[0];b[3]=b[1]}else {if(d===3){b[3]=b[1]}}}return {top:parseFloat(b[0])||0,right:parseFloat(b[1])||0,bottom:parseFloat(b[2])||0,left:parseFloat(b[3])||0}},parseStyles:function(c){var d={},b;if(c){L.lastIndex=0;while(b=L.exec(c)){d[b[1]]=b[2]||''}}return d},select:function(d,c,e){return Ext.fly(e||b).select(d,c)},query:function(c,d,e){return Ext.fly(e||b).query(c,d)},unitizeBox:function(b,d){var c=this;b=c.parseBox(b);return c.addUnits(b.top,d)+' '+c.addUnits(b.right,d)+' '+c.addUnits(b.bottom,d)+' '+c.addUnits(b.left,d)},serializeForm:function(l){var m=l.elements||(b.forms[l]||Ext.getDom(l)).elements,n=!1,f=encodeURIComponent,g='',q=m.length,c,h,d,k,o,i,j,p,e;for(i=0;i<q;i++){c=m[i];h=c.name;d=c.type;k=c.options;if(!c.disabled&&h){if(/select-(one|multiple)/i.test(d)){p=k.length;for(j=0;j<p;j++){e=k[j];if(e.selected){o=e.hasAttribute('value');g+=Ext.String.format('{0}={1}&',f(h),f(o?e.value:e.text))}}}else {if(!/file|undefined|reset|button/i.test(d)){if(!(/radio|checkbox/i.test(d)&&!c.checked)&&!(d=='submit'&&n)){g+=f(h)+'='+f(c.value)+'&';n=/submit/i.test(d)}}}}}return g.substr(0,g.length-1)},getCommonAncestor:function(c,d,b){e=e||new Ext.dom.Fly();e.attach(Ext.getDom(c));while(!e.isAncestor(d)){if(e.dom.parentNode){e.attach(e.dom.parentNode)}else {e.attach(document.body);break}}return b?e.dom:Ext.get(e)}},addCls:function(c,e,f){var d=this,h=d.getData(),m,n,l,i,g,o,b;if(!c){return d}if(!h.isSynchronized){d.synchronize()}n=d.dom;l=h.classMap;i=h.classList;e=e?e+j:'';f=f?j+f:'';if(typeof c==='string'){c=c.split(k)}for(g=0,o=c.length;g<o;g++){b=c[g];if(b){b=e+b+f;if(!l[b]){l[b]=!0;i.push(b);m=!0}}}if(m){n.className=i.join(' ')}return d},addStyles:function(i,h){var g=0,d=(i||'').match($),b,f=d.length,e,c=[];if(f===1){g=Math.abs(parseFloat(this.getStyle(h[d[0]]))||0)}else {if(f){for(b=0;b<f;b++){e=d[b];c.push(h[e])}c=this.getStyle(c);for(b=0;b<f;b++){e=d[b];g+=parseFloat(c[h[e]])||0}}}return g},addUnits:function(c,b){return a.addUnits(c,b)},adjustDirect2DDimension:function(e){var g=this,b=g.dom,c=g.getStyle('display'),i=b.style.display,h=b.style.position,j=e===w?0:1,d=b.currentStyle,f;if(c==='inline'){b.style.display='inline-block'}b.style.position=c.match(M)?'absolute':'static';f=(parseFloat(d[e])||parseFloat(d.msTransformOrigin.split(' ')[j])*2)%1;b.style.position=h;if(c==='inline'){b.style.display=i}return f},animate:function(b){b=new Ext.fx.Animation(b);b.setElement(this);this._activeAnimation=b;b.on({animationend:this._onAnimationEnd});Ext.Animator.run(b);return b},_onAnimationEnd:function(){this._activeAnimation=null},getActiveAnimation:function(){return this._activeAnimation},append:function(){this.appendChild.apply(this,arguments)},appendChild:function(b,d){var f=this,c,g,e;if(b.nodeType||b.dom||typeof b==='string'){b=Ext.getDom(b);f.dom.appendChild(b);return !d?Ext.get(b):b}else {if(b.length){c=Ext.fly(document.createDocumentFragment());g=b.length;for(e=0;e<g;e++){c.appendChild(b[e],d)}f.dom.appendChild(c.dom);return d?c.dom:c}else {return f.createChild(b,null,d)}}},appendTo:function(b){Ext.getDom(b).appendChild(this.dom);return this},applyStyles:function(b){if(b){if(typeof b==='function'){b=b.call()}if(typeof b==='string'){b=a.parseStyles(b)}if(typeof b==='object'){this.setStyle(b)}}return this},blur:function(){var d=this,c=d.dom;if(c!==b.body){try{c.blur()}catch(ah){}return d}else {return d.focus(undefined,c)}},cacheScrollValues:function(){var i=this,g=[],e=[],f,b,d,h;c=c||new Ext.dom.Fly();f=i.query('*');for(d=0,h=f.length;d<h;d++){b=f[d];if(b.scrollTop>0||b.scrollLeft!==0){e.push(b);g.push(c.attach(b).getScroll())}}return function(){var d,b,f;for(b=0,f=e.length;b<f;b++){d=g[b];c.attach(e[b]);c.setScrollLeft(d.left);c.setScrollTop(d.top)}}},center:function(c){return this.alignTo(c||b,'c-c')},child:function(d,c){var b=this,e=Ext.get(b).id;return b.selectNode(Ext.makeIdSelector(e)+' > '+d,!!c)},clone:function(c,d){var b=this.dom.cloneNode(c);if(Ext.supports.CloneNodeCopiesExpando){G(b,c)}return d?b:Ext.get(b)},constrainScrollLeft:function(c){var b=this.dom;return Math.max(Math.min(c,b.scrollWidth-b.clientWidth),0)},constrainScrollTop:function(c){var b=this.dom;return Math.max(Math.min(c,b.scrollHeight-b.clientHeight),0)},createChild:function(b,c,d){b=b||{tag:'div'};if(c){return Ext.DomHelper.insertBefore(c,b,d!==!0)}else {return Ext.DomHelper.append(this.dom,b,d!==!0)}},contains:function(b){if(!b){return !1}var d=this,c=Ext.getDom(b);return c===d.dom||d.isAncestor(c)},destroy:function(){var c=this,b=c.dom;if(b&&b.parentNode){b.parentNode.removeChild(b)}c.collect();if(!c.isFly){c.callParent()}},detach:function(){var b=this.dom;if(b&&b.parentNode&&b.tagName!=='BODY'){b.parentNode.removeChild(b)}return this},disableShadow:function(){var b=this.shadow;if(b){b.hide();b.disabled=!0}},disableShim:function(){var b=this.shim;if(b){b.hide();b.disabled=!0}},disableTouchContextMenu:function(){this._contextMenuListenerRemover=this.on({MSHoldVisual:function(b){b.preventDefault()},destroyable:!0,delegated:!1})},disableTouchScroll:function(){this.addCls(O);this.on({touchmove:function(b){b.preventDefault()},translate:!1})},doReplaceWith:function(c){var b=this.dom;b.parentNode.replaceChild(Ext.getDom(c),b)},doScrollIntoView:function(b,o,d,m,l,n){c=c||new Ext.dom.Fly();var e=this,k=e.dom,i=c.attach(b)[l](),j=b.scrollTop,h=e.getScrollIntoViewXY(b,i,j),f=h.x,g=h.y;if(m){if(d){d=Ext.apply({listeners:{afteranimate:function(){c.attach(k).highlight()}}},d)}else {c.attach(k).highlight()}}if(g!==j){c.attach(b).scrollTo('top',g,d)}if(o!==!1&&f!==i){c.attach(b)[n]('left',f,d)}return e},down:function(c,b){return this.selectNode(c,!!b)},enableShadow:function(f,e){var c=this,b=c.shadow||(c.shadow=new Ext.dom.Shadow(Ext.apply({target:c},f))),d=c.shim;if(d){d.offsets=b.outerOffsets;d.shadow=b;b.shim=d}if(e===!0||e!==!1&&c.isVisible()){b.show()}else {b.hide()}b.disabled=!1},enableShim:function(f,e){var c=this,b=c.shim||(c.shim=new Ext.dom.Shim(Ext.apply({target:c},f))),d=c.shadow;if(d){b.offsets=d.outerOffsets;b.shadow=d;d.shim=b}if(e===!0||e!==!1&&c.isVisible()){b.show()}else {b.hide()}b.disabled=!1},findParent:function(g,d,h){var i=this,c=i.dom,e=b.documentElement,f=0;if(d||d===0){if(typeof d!=='number'){e=Ext.getDom(d);d=Number.MAX_VALUE}}else {d=50}while(c&&c.nodeType===1&&f<d&&c!==e){if(Ext.fly(c).is(g)){return h?Ext.get(c):c}f++;c=c.parentNode}return null},findParentNode:function(c,e,d){var b=Ext.fly(this.dom.parentNode);return b?b.findParent(c,e,d):null},first:function(c,b){return this.matchNode('nextSibling','firstChild',c,b)},focus:function(d,b){var c=this;b=b||c.dom;if(Number(d)){Ext.defer(c.focus,d,c,[null,b])}else {Ext.GlobalEvents.fireEvent('beforefocus',b);b.focus()}return c},collect:function(){var b=this,e=b.dom,c=b.shadow,d=b.shim;if(!b.isFly){b.mixins.observable.destroy.call(b);delete Ext.cache[b.id];b.destroyed=!0;b.el=null}if(e){e._extData=b.dom=null}if(c){c.hide();b.shadow=null}if(d){d.hide();b.shim=null}},getAnchorToXY:function(e,b,d,c){return e.getAnchorXY(b,d,c)},getAttribute:function(b,d){var c=this.dom;return d?c.getAttributeNS(d,b)||c.getAttribute(d+':'+b):c.getAttribute(b)||c[b]||null},getAttributes:function(){var d=this.dom.attributes,e={},c,b,f;for(b=0,f=d.length;b<f;b++){c=d[b];e[c.name]=c.value}return e},getBottom:function(b){return (b?this.getLocalY():this.getY())+this.getHeight()},getById:function(d,e){var c=b.getElementById(d)||this.dom.querySelector(Ext.makeIdSelector(d));return e?c:c?Ext.get(c):null},getBorderPadding:function(){var c=this.getStyle(R),b=this.getStyle(D);return {beforeX:(parseFloat(b[d.l])||0)+(parseFloat(c[f.l])||0),afterX:(parseFloat(b[d.r])||0)+(parseFloat(c[f.r])||0),beforeY:(parseFloat(b[d.t])||0)+(parseFloat(c[f.t])||0),afterY:(parseFloat(b[d.b])||0)+(parseFloat(c[f.b])||0)}},getBorders:function(){var b=this.getStyle(D);return {beforeX:parseFloat(b[d.l])||0,afterX:parseFloat(b[d.r])||0,beforeY:parseFloat(b[d.t])||0,afterY:parseFloat(b[d.b])||0}},getBorderWidth:function(b){return this.addStyles(b,d)},getData:function(d){var c=this.dom,b;if(c){b=c._extData;if(!b&&!d){c._extData=b={}}}return b},getFirstChild:function(){return Ext.get(this.dom.firstElementChild)},getHeight:function(e,f){var c=this,g=c.isStyle('display','none'),b,d;if(g){return 0}b=c.dom.offsetHeight;if(Ext.supports.Direct2DBug){d=c.adjustDirect2DDimension(J);if(f){b+=d}else {if(d>0&&d<0.5){b++}}}if(e){b-=c.getBorderWidth('tb')+c.getPadding('tb')}return b<0?0:b},getHtml:function(){return this.dom?this.dom.innerHTML:''},getLeft:function(b){return b?this.getLocalX():this.getX()},getLocalX:function(){var d=this,c,b=d.getStyle('left');if(!b||b==='auto'){b=0}else {if(t.test(b)){b=parseFloat(b)}else {b=d.getX();c=d.dom.offsetParent;if(c){b-=Ext.fly(c).getX()}}}return b},getLocalXY:function(){var e=this,d,f=e.getStyle(['left','top']),b=f.left,c=f.top;if(!b||b==='auto'){b=0}else {if(t.test(b)){b=parseFloat(b)}else {b=e.getX();d=e.dom.offsetParent;if(d){b-=Ext.fly(d).getX()}}}if(!c||c==='auto'){c=0}else {if(t.test(c)){c=parseFloat(c)}else {c=e.getY();d=e.dom.offsetParent;if(d){c-=Ext.fly(d).getY()}}}return [b,c]},getLocalY:function(){var d=this,c,b=d.getStyle('top');if(!b||b==='auto'){b=0}else {if(t.test(b)){b=parseFloat(b)}else {b=d.getY();c=d.dom.offsetParent;if(c){b-=Ext.fly(c).getY()}}}return b},getMargin:function(){var c={t:'top',l:'left',r:'right',b:'bottom'},b=['margin-top','margin-left','margin-right','margin-bottom'];return function(g){var h=this,e,f,d;if(!g){e=h.getStyle(b);d={};if(e&&typeof e==='object'){d={};for(f in v){d[f]=d[c[f]]=parseFloat(e[v[f]])||0}}}else {d=h.addStyles(g,v)}return d}}(),getPadding:function(b){return this.addStyles(b,f)},getParent:function(){return Ext.get(this.dom.parentNode)},getRight:function(b){return (b?this.getLocalX():this.getX())+this.getWidth()},getScroll:function(){var h=this,d=h.dom,g=b.documentElement,e,f,c=document.body;if(d===b||d===c){e=g.scrollLeft||(c?c.scrollLeft:0);f=g.scrollTop||(c?c.scrollTop:0)}else {e=d.scrollLeft;f=d.scrollTop}return {left:e,top:f}},getScrollIntoViewXY:function(r,b,c){var p=this.dom,h=Ext.getDom(r),j=this.getOffsetsTo(h),o=p.offsetWidth,m=p.offsetHeight,f=j[0]+b,g=j[1]+c,l=g+m,n=f+o,d=h.clientHeight,e=h.clientWidth,i=b,k=c,q=k+d,s=i+e;if(m>d||g<k){c=g}else {if(l>q){c=l-d}}if(o>e||f<i){b=f}else {if(n>s){b=n-e}}return {x:b,y:c}},getScrollLeft:function(){var c=this.dom;if(c===b||c===document.body){return this.getScroll().left}else {return c.scrollLeft}},getScrollTop:function(){var c=this.dom;if(c===b||c===document.body){return this.getScroll().top}else {return c.scrollTop}},getSize:function(b){return {width:this.getWidth(b),height:this.getHeight(b)}},getStyle:function(n,i){var k=this,e=k.dom,m=typeof n!=='string',p=k.styleHooks,b=n,j=b,q=1,h,o,f,d,g,c,l;if(m){f={};b=j[0];l=0;if(!(q=j.length)){return f}}if(!e||e.documentElement){return f||''}h=e.style;if(i){c=h}else {c=e.ownerDocument.defaultView.getComputedStyle(e,null);if(!c){i=!0;c=h}}do{d=p[b];if(!d){p[b]=d={name:a.normalize(b)}}if(d.get){g=d.get(e,k,i,c)}else {o=d.name;g=c[o]}if(!m){return g}f[b]=g;b=j[++l]}while(l<q);return f},getStyleValue:function(b){return this.dom.style.getPropertyValue(b)},getTop:function(b){return b?this.getLocalY():this.getY()},getValue:function(c){var b=this.dom.value;return c?parseInt(b,10):b},getViewSize:function(){var c=this.dom;if(c===b||c===b.body){return {width:a.getViewportWidth(),height:a.getViewportHeight()}}else {return {width:c.clientWidth,height:c.clientHeight}}},getVisibilityMode:function(){var d=this,c=d.getData(),b=c.visibilityMode;if(b===undefined){c.visibilityMode=b=a.DISPLAY}return b},getWidth:function(h,f){var c=this,g=c.dom,i=c.isStyle('display','none'),d,b,e;if(i){return 0}if(Ext.supports.BoundingClientRect){d=g.getBoundingClientRect();b=c.vertical&&!Ext.supports.RotatedBoundingClientRect?d.bottom-d.top:d.right-d.left;b=f?b:Math.ceil(b)}else {b=g.offsetWidth}if(Ext.supports.Direct2DBug&&!c.vertical){e=c.adjustDirect2DDimension(w);if(f){b+=e}else {if(e>0&&e<0.5){b++}}}if(h){b-=c.getBorderWidth('lr')+c.getPadding('lr')}return b<0?0:b},getX:function(){return this.getXY()[0]},getXY:function(){var h=Math.round,e=this.dom,f=0,g=0,c,d;if(e!==b&&e!==b.body){try{c=e.getBoundingClientRect()}catch(ah){c={left:0,top:0}}f=h(c.left);g=h(c.top);d=Ext.getDoc().getScroll();f+=d.left;g+=d.top}return [f,g]},getY:function(){return this.getXY()[1]},getZIndex:function(){return parseInt(this.getStyle('z-index'),10)},hasCls:function(c){var b=this.getData();if(!b.isSynchronized){this.synchronize()}return b.classMap.hasOwnProperty(c)},hide:function(){this.setVisible(!1);return this},insertAfter:function(b){b=Ext.getDom(b);b.parentNode.insertBefore(this.dom,b.nextSibling);return this},insertBefore:function(b){b=Ext.getDom(b);b.parentNode.insertBefore(this.dom,b);return this},insertFirst:function(b,c){b=b||{};if(b.nodeType||b.dom||typeof b==='string'){b=Ext.getDom(b);this.dom.insertBefore(b,this.dom.firstChild);return !c?Ext.get(b):b}else {return this.createChild(b,this.dom.firstChild,c)}},insertHtml:function(d,e,c){var b=Ext.DomHelper.insertHtml(d,this.dom,e);return c?Ext.get(b):b},insertSibling:function(b,k,f){var d=this,j=Ext.DomHelper,h=(k||'before').toLowerCase()==='after',c,g,i,e;if(Ext.isIterable(b)){i=b.length;g=Ext.fly(document.createDocumentFragment());if(Ext.isArray(b)){for(e=0;e<i;e++){c=g.appendChild(b[e],f)}}else {for(e=0;e<i;e++){g.dom.appendChild(c=b[0])}if(f===!1){c=Ext.get(c)}}d.dom.parentNode.insertBefore(g.dom,h?d.dom.nextSibling:d.dom);return c}b=b||{};if(b.nodeType||b.dom){c=d.dom.parentNode.insertBefore(Ext.getDom(b),h?d.dom.nextSibling:d.dom);if(!f){c=Ext.get(c)}}else {if(h&&!d.dom.nextSibling){c=j.append(d.dom.parentNode,b,!f)}else {c=j[h?'insertAfter':'insertBefore'](d.dom,b,!f)}}return c},is:function(c){var d=this.dom,b;if(!c){b=!0}else {if(!d.tagName){b=!1}else {if(Ext.isFunction(c)){b=c(d)}else {b=d[Ext.supports.matchesSelector](c)}}}return b},isAncestor:function(e){var d=!1,c=this.dom,b=Ext.getDom(e);if(c&&b){if(c.contains){return c.contains(b)}else {if(c.compareDocumentPosition){return !!(c.compareDocumentPosition(b)&16)}else {while(b=b.parentNode){d=b===c||d}}}}return d},isPainted:function(){return !Ext.browser.is.IE?function(){var b=this.dom;return Boolean(b&&b.offsetParent)}:function(){var b=this.dom;return Boolean(b&&(b.offsetHeight!==0&&b.offsetWidth!==0))}}(),isScrollable:function(){var b=this.dom;return b.scrollHeight>b.clientHeight||b.scrollWidth>b.clientWidth},isStyle:function(b,c){return this.getStyle(b)===c},isVisible:function(d){var b=this.dom,c;if(!b){return !1}if(!s){s=new Ext.dom.Fly()}for(c=b.ownerDocument.documentElement;b!==c;b=b.parentNode){if(!b||b.nodeType===11||s.attach(b).isStyle(U,aa)||s.isStyle(I,x)){return !1}if(!d){break}}return !0},last:function(c,b){return this.matchNode('previousSibling','lastChild',c,b)},maskIframes:function(){var b=document.getElementsByTagName('iframe');Ext.each(b,function(c){var b=Ext.fly(c.parentNode),d=b.mask();d.setStyle('background-color','transparent')})},matchNode:function(g,f,c,e){var d=this.dom,b;if(!d){return null}b=d[f];while(b){if(b.nodeType===1&&(!c||Ext.fly(b,'_matchNode').is(c))){return !e?Ext.get(b):b}b=b[g]}return null},next:function(c,b){return this.matchNode('nextSibling','nextSibling',c,b)},parent:function(c,b){return this.matchNode('parentNode','parentNode',c,b)},position:function(c,d,e,f){var b=this;if(b.dom.tagName!=='BODY'){if(!c&&b.isStyle(u,ab)){b.setStyle(u,X)}else {if(c){b.setStyle(u,c)}}if(d){b.setStyle(ac,d)}if(e||f){b.setXY([e||!1,f||!1])}}},prev:function(c,b){return this.matchNode('previousSibling','previousSibling',c,b)},query:function(b,e,j){var i=this.dom,g,l,k,h,f,c,d;if(!i){return null}e=e!==!1;b=b.split(',');if(!j){g=[]}for(c=0,l=b.length;c<l;c++){if(typeof b[c]==='string'){if(j){h=i.querySelector(b[c]);return e?h:Ext.get(h)}f=i.querySelectorAll(b[c]);for(d=0,k=f.length;d<k;d++){g.push(e?f[d]:Ext.get(f[d]))}}}return g},radioCls:function(b){var e=this.dom.parentNode.childNodes,c;b=Ext.isArray(b)?b:[b];for(var d=0,f=e.length;d<f;d++){c=e[d];if(c&&c.nodeType===1){Ext.fly(c).removeCls(b)}}return this.addCls(b)},redraw:function(){var c=this.dom,b=c.style;b.display='none';c.offsetHeight;b.display=''},remove:function(){this.destroy()},removeChild:function(b){this.dom.removeChild(Ext.getDom(b));return this},removeCls:function(c,e,f){var d=this,h=d.getData(),m,n,l,i,g,o,b;if(!c){return d}if(!h.isSynchronized){d.synchronize()}n=d.dom;l=h.classMap;i=h.classList;e=e?e+j:'';f=f?j+f:'';if(typeof c==='string'){c=c.split(k)}for(g=0,o=c.length;g<o;g++){b=c[g];if(b){b=e+b+f;if(l[b]){delete l[b];Ext.Array.remove(i,b);m=!0}}}if(m){n.className=i.join(' ')}return d},repaint:function(){var b=this;b.addCls('x-repaint');Ext.defer(function(){if(b.dom){Ext.fly(b.dom).removeCls('x-repaint')}},1);return b},replace:function(b,f){b=Ext.getDom(b);var c=b.parentNode,e=b.id,d=this.dom;if(f!==!1&&e&&Ext.cache[e]){c.insertBefore(d,b);Ext.get(b).destroy()}else {c.replaceChild(d,b)}return this},replaceCls:function(c,b,h,e){var i=this,p,g,n,d,m,f,l=i.getData(),o;if(!c&&!b){return i}c=c||[];b=b||[];if(!l.isSynchronized){i.synchronize()}if(!e){e=''}p=i.dom;g=l.classMap;n=l.classList;h=h?h+j:'';e=e?j+e:'';if(typeof c==='string'){c=c.split(k)}if(typeof b==='string'){b=b.split(k)}for(d=0,m=c.length;d<m;d++){f=h+c[d]+e;if(g[f]){delete g[f];o=!0}}for(d=0,m=b.length;d<m;d++){f=h+b[d]+e;if(!g[f]){g[f]=!0;o=!0}}if(o){l.classList=n=Ext.Object.getKeys(g);p.className=n.join(' ')}return i},replaceWith:function(c){var b=this,e=b.dom,f=e.parentNode,g=Ext.cache,d;b.clearListeners();if(c.nodeType||c.dom||typeof c==='string'){c=Ext.get(c);d=f.insertBefore(c.dom,e)}else {d=Ext.DomHelper.insertBefore(e,c)}f.removeChild(e);b.dom=d;if(!b.isFly){delete g[b.id];g[b.id=Ext.id(d)]=b}return b},resolveListenerScope:function(c){var b=this.component;return b?b.resolveListenerScope(c):this},scroll:function(b,e,j){if(!this.isScrollable()){return !1}b=b.charAt(0);var f=this,i=f.dom,h=b==='r'||b==='l'?'left':'top',g=!1,c,d;if(b==='l'||b==='t'||b==='u'){e=-e}if(h==='left'){c=i.scrollLeft;d=f.constrainScrollLeft(c+e)}else {c=i.scrollTop;d=f.constrainScrollTop(c+e)}if(d!==c){this.scrollTo(h,d,j);g=!0}return g},scrollBy:function(b,c,e){var d=this,f=d.dom;if(b.length){e=c;c=b[1];b=b[0]}else {if(typeof b!='number'){e=c;c=b.y;b=b.x}}if(b){d.scrollTo('left',d.constrainScrollLeft(f.scrollLeft+b),e)}if(c){d.scrollTo('top',d.constrainScrollTop(f.scrollTop+c),e)}return d},scrollChildIntoView:function(c,b){Ext.fly(c).scrollIntoView(this,b)},scrollIntoView:function(b,e,d,c){b=Ext.getDom(b)||Ext.getBody().dom;return this.doScrollIntoView(b,e,d,c,'getScrollLeft','scrollTo')},scrollTo:function(h,e,d){var i=ae.test(h),c=this,f=i?'scrollTop':'scrollLeft',g=c.dom,b;if(!d||!c.anim){g[f]=e;g[f]=e}else {b={to:{}};b.to[f]=e;if(Ext.isObject(d)){Ext.applyIf(b,d)}c.animate(b)}return c},select:function(c,e){var d,b;if(typeof c==='string'){b=this.query(c,!e)}else {b=c;d=!0}return e?new Ext.CompositeElement(b,!d):new Ext.CompositeElementLite(b,!0)},selectNode:function(b,c){return this.query(b,c,!0)},set:function(e,g){var f=this,d=f.dom,b,c;for(b in e){if(e.hasOwnProperty(b)){c=e[b];if(b==='style'){f.applyStyles(c)}else {if(b==='cls'){d.className=c}else {if(g!==!1){if(c===undefined){d.removeAttribute(b)}else {d.setAttribute(b,c)}}else {d[b]=c}}}}}return f},setBottom:function(b){this.dom.style[_]=a.addUnits(b);return this},setCls:function(c){var f=this,e=f.getData(),d,h,i,g,b;if(!e.isSynchronized){f.synchronize()}if(typeof c==='string'){c=c.split(k)}e.classList=b=c.slice();e.classMap=g={};for(d=0,h=b.length;d<h;d++){g[b[d]]=!0}f.dom.className=b.join(' ')},setDisplayed:function(c){var b=this;if(typeof c==='boolean'){c=c?b._getDisplay():x}b.setStyle(I,c);if(b.shadow||b.shim){b.setUnderlaysVisible(c!==x)}return b},setHeight:function(c){var b=this;b.dom.style[J]=a.addUnits(c);if(b.shadow||b.shim){b.syncUnderlays()}return b},setHtml:function(b){if(this.dom){this.dom.innerHTML=b}return this},setId:function(c){var b=this,d=b.id,e=Ext.cache;if(d){delete e[d]}b.dom.id=c;b.id=c;e[c]=b;return b},setLeft:function(c){var b=this;b.dom.style[af]=a.addUnits(c);if(b.shadow||b.shim){b.syncUnderlays()}return b},setLocalX:function(d){var b=this,c=b.dom.style;c.right='auto';c.left=d===null?'auto':d+'px';if(b.shadow||b.shim){b.syncUnderlays()}return b},setLocalXY:function(b,e){var d=this,c=d.dom.style;c.right='auto';if(b&&b.length){e=b[1];b=b[0]}if(b===null){c.left='auto'}else {if(b!==undefined){c.left=b+'px'}}if(e===null){c.top='auto'}else {if(e!==undefined){c.top=e+'px'}}if(d.shadow||d.shim){d.syncUnderlays()}return d},setLocalY:function(c){var b=this;b.dom.style.top=c===null?'auto':c+'px';if(b.shadow||b.shim){b.syncUnderlays()}return b},setMargin:function(b){var d=this,c=d.dom.style;if(b||b===0){b=d.self.unitizeBox(b===!0?5:b);c.setProperty('margin',b,'important')}else {c.removeProperty('margin-top');c.removeProperty('margin-right');c.removeProperty('margin-bottom');c.removeProperty('margin-left')}},setMaxHeight:function(b){this.dom.style[S]=a.addUnits(b);return this},setMaxWidth:function(b){this.dom.style[V]=a.addUnits(b);return this},setMinHeight:function(b){this.dom.style[T]=a.addUnits(b);return this},setMinWidth:function(b){this.dom.style[W]=a.addUnits(b);return this},setOpacity:function(c){var b=this;if(b.dom){b.setStyle('opacity',c)}return b},setPadding:function(b){var d=this,c=d.dom.style;if(b||b===0){b=d.self.unitizeBox(b===!0?5:b);c.setProperty('padding',b,'important')}else {c.removeProperty('padding-top');c.removeProperty('padding-right');c.removeProperty('padding-bottom');c.removeProperty('padding-left')}},setRight:function(b){this.dom.style[ad]=a.addUnits(b);return this},setScrollLeft:function(b){this.dom.scrollLeft=b;return this},setScrollTop:function(b){this.dom.scrollTop=b;return this},setSize:function(b,d){var c=this,e=c.dom.style;if(Ext.isObject(b)){d=b.height;b=b.width}e.width=a.addUnits(b);e.height=a.addUnits(d);if(c.shadow||c.shim){c.syncUnderlays()}return c},setSizeState:function(d){var e=this,c,b;if(d===!0){c=q;b=[p,n]}else {if(d===!1){c=p;b=[q,n]}else {if(d===null){c=n;b=[q,p]}else {b=[q,p,n]}}}if(c){e.addCls(c)}e.removeCls(b);return e},setStyle:function(h,c){var e=this,f=e.dom,g=e.styleHooks,i=f.style,d=h,b;if(typeof d==='string'){b=g[d];if(!b){g[d]=b={name:a.normalize(d)}}c=c==null?'':c;if(b.set){b.set(f,c,e)}else {i[b.name]=c}if(b.afterSet){b.afterSet(f,c,e)}}else {for(d in h){if(h.hasOwnProperty(d)){b=g[d];if(!b){g[d]=b={name:a.normalize(d)}}c=h[d];c=c==null?'':c;if(b.set){b.set(f,c,e)}else {i[b.name]=c}if(b.afterSet){b.afterSet(f,c,e)}}}}return e},setText:function(b){this.dom.textContent=b},setTop:function(c){var b=this;b.dom.style[ag]=a.addUnits(c);if(b.shadow||b.shim){b.syncUnderlays()}return b},setUnderlaysVisible:function(d){var b=this.shadow,c=this.shim;if(b&&!b.disabled){if(d){b.show()}else {b.hide()}}if(c&&!c.disabled){if(d){c.show()}else {c.hide()}}},setVisibility:function(c){var b=this.dom.style;if(c){b.removeProperty('visibility')}else {b.setProperty('visibility','hidden','important')}},setVisibilityMode:function(b){this.getData().visibilityMode=b;return this},setVisible:function(d){var b=this,e=b.getVisibilityMode(),c=d?'removeCls':'addCls';switch(e){case a.DISPLAY:b.removeCls([m,o,r]);b[c](i);break;case a.VISIBILITY:b.removeCls([i,o,r]);b[c](m);break;case a.OFFSETS:b.removeCls([m,i,r]);b[c](o);break;case a.CLIP:b.removeCls([m,i,o]);b[c](r);break;}if(b.shadow||b.shim){b.setUnderlaysVisible(d)}return b},setWidth:function(c){var b=this;b.dom.style[w]=a.addUnits(c);if(b.shadow||b.shim){b.syncUnderlays()}return b},setX:function(b){return this.setXY([b,!1])},setXY:function(f){var b=this,d=b.translatePoints(f),e=b.dom.style,c;b.position();e.right='auto';for(c in d){if(!isNaN(d[c])){e[c]=d[c]+'px'}}if(b.shadow||b.shim){b.syncUnderlays()}return b},setY:function(b){return this.setXY([!1,b])},setZIndex:function(c){var b=this;if(b.shadow){b.shadow.setZIndex(c)}if(b.shim){b.shim.setZIndex(c)}return b.setStyle('z-index',c)},show:function(){this.setVisible(!0);return this},swapCls:function(h,g,c,b){if(c===undefined){c=!0}var f=this,e=c?h:g,d=c?g:h;if(d){f.removeCls(b?b+'-'+d:d)}if(e){f.addCls(b?b+'-'+e:e)}return f},synchronize:function(){var e=this,i=e.dom,f={},g=i.className,b,c,j,h,d=e.getData();if(g&&g.length>0){b=i.className.split(N);for(c=0,j=b.length;c<j;c++){h=b[c];f[h]=!0}}else {b=[]}d.classList=b;d.classMap=f;d.isSynchronized=!0;return e},syncUnderlays:function(){var b=this,c=b.shadow,d=b.shim,j=b.dom,e,h,i,g,f;if(b.isVisible()){e=b.getXY();h=e[0];i=e[1];g=j.offsetWidth;f=j.offsetHeight;if(c&&!c.hidden){c.realign(h,i,g,f)}if(d&&!d.hidden){d.realign(h,i,g,f)}}},toggleCls:function(b,c){if(typeof c!=='boolean'){c=!this.hasCls(b)}return c?this.addCls(b):this.removeCls(b)},toggle:function(){this.setVisible(!this.isVisible());return this},translate:function(){var c='webkitTransform' in b.createElement('div').style?'webkitTransform':'transform';return function(b,d,e){this.dom.style[c]='translate3d('+(b||0)+'px, '+(d||0)+'px, '+(e||0)+'px)'}}(),unmaskIframes:function(){var b=document.getElementsByTagName('iframe');Ext.each(b,function(c){var b=Ext.fly(c.parentNode);b.unmask()})},unwrap:function(){var h=this.dom,f=h.parentNode,c,e=Ext.fly(Ext.Element.getActiveElement()),b,g,d,i;b=Ext.cache[e.id];if(b){e=b}if(this.contains(e)){if(b){b.suspendFocusEvents()}g=!0}if(f){c=f.parentNode;if(g){i=c.getAttribute('tabIndex');d=Ext.fly(c);d.set({tabIndex:-1});d.suspendFocusEvents();d.focus()}c.insertBefore(h,f);c.removeChild(f)}else {c=document.createDocumentFragment();c.appendChild(h)}if(g){if(b){b.focus();b.resumeFocusEvents()}else {Ext.fly(e).focus()}if(d){d.resumeFocusEvents();d.set({tabIndex:i})}}return this},up:function(b,d,c){return this.findParentNode(b,d,!c)},update:function(b){return this.setHtml(b)},wrap:function(l,f,g){var k=this,j=k.dom,b=Ext.DomHelper.insertBefore(j,l||{tag:'div'},!f),i=b,d=Ext.Element.getActiveElement(),c,e,h;c=Ext.cache[d.id];if(c){d=c}if(g){i=b.selectNode(g,f)}if(k.contains(d)){if(c){c.suspendFocusEvents()}h=b.dom.getAttribute('tabIndex');b.set({tabIndex:-1});b.suspendFocusEvents();b.focus();e=!0}i.appendChild(j);if(e){if(c){c.focus();c.resumeFocusEvents()}else {Ext.fly(d).focus()}b.resumeFocusEvents();b.set({tabIndex:h})}return b},privates:{doAddListener:function(b,l,k,c,j,i,f){var d=this,m=b,g,h,e;b=Ext.canonicalEventName(b);if(!d.blockedEvents[b]){g=d.mixins.observable.doAddListener;c=c||{};if(d.longpressEvents[b]){d.disableTouchContextMenu()}if(a.useDelegatedEvents===!1){c.delegated=c.delegated||!1}if(c.translate!==!1){h=d.additiveEvents[b];if(h){c.type=b;b=h;g.call(d,b,l,k,c,j,i,f)}e=d.eventMap[b];if(e){c.type=c.type||b;if(f){c.managedName=m}b=e}}g.call(d,b,l,k,c,j,i,f);if(f&&e){delete c.managedName}delete c.type}},doRemoveListener:function(c,i,h){var b=this,d,f,g,e;if(!b.blockedEvents[c]){d=b.mixins.observable.doRemoveListener;if(b.longpressEvents[c]){e=this._contextMenuListenerRemover;if(e){e.destroy()}}g=b.additiveEvents[c];if(g){c=g;d.call(b,c,i,h)}f=b.eventMap[c];if(f){d.call(b,f,i,h)}d.call(b,c,i,h)}},_initEvent:function(b){return this.events[b]=new Ext.dom.ElementEvent(this,b)},_getDisplay:function(){var c=this.getData(),b=c[A];if(b===undefined){c[A]=b=''}return b},_getPublisher:function(d){var c=Ext.event.publisher.Publisher,b=c.publishersByEvent[d];if(!b||this.dom===window&&d==='resize'){b=c.publishers.dom}return b},isFocusSuspended:function(){return !!this.getData().suspendFocusEvents},suspendFocusEvents:function(){if(!this.isFly){this.suspendEvent('focus','blur')}this.getData().suspendFocusEvents=!0},resumeFocusEvents:function(){function resumeFn(){var b;if(!this.destroyed){b=this.getData();if(b){b.suspendFocusEvents=!1}if(!this.isFly){this.resumeEvent('focus','blur')}}}if(!this.destroyed&&this.getData().suspendFocusEvents){if(Ext.isIE){Ext.asap(resumeFn,this)}else {resumeFn.call(this)}}}},deprecated:{'5.0':{methods:{cssTranslate:null,getHTML:'getHtml',getOuterHeight:null,getOuterWidth:null,getPageBox:function(l){var e=this,c=e.dom,d=c.nodeName==='BODY',k=d?a.getViewportWidth():c.offsetWidth,g=d?a.getViewportHeight():c.offsetHeight,b=e.getXY(),j=b[1],i=b[0]+k,f=b[1]+g,h=b[0];if(l){return new Ext.util.Region(j,i,f,h)}else {return {left:h,top:j,width:k,height:g,right:i,bottom:f}}},getScrollParent:null,isDescendent:null,isTransparent:function(c){var b=this.getStyle(c);return b?Q.test(b):!1},purgeAllListeners:'clearListeners',removeAllListeners:'clearListeners',setHTML:'setHtml',setTopLeft:null}}}}},1,0,0,0,0,[[Ext.util.Positionable.prototype.mixinId||Ext.util.Positionable.$className,Ext.util.Positionable],[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext.dom,'Element',Ext,'Element'],function(d){var k=document,m=d.prototype,w=Ext.supports,n='pointerdown',o='pointermove',p='pointerup',q='pointercancel',r='MSPointerDown',s='MSPointerMove',t='MSPointerUp',z='MSPointerCancel',f='mousedown',g='mousemove',b='mouseup',A='mouseover',B='mouseout',D='mouseenter',E='mouseleave',h='touchstart',i='touchmove',j='touchend',l='touchcancel',x='click',v='dblclick',y='tap',u='doubletap',a=m.eventMap={},c=m.additiveEvents={},C=Ext.id,e;Ext.id=function(f,e){var b=Ext.getDom(f,!0),c,a;if(!b){a=C(f,e)}else {if(!(a=b.id)){a=C(null,e||d.prototype.identifiablePrefix);if(Ext.isSandboxed){c=Ext.sandboxPrefix||(Ext.sandboxPrefix=Ext.sandboxName.toLowerCase()+'-');a=c+a}b.id=a}}return a};if(w.PointerEvents){a[f]=n;a[g]=o;a[b]=p;a[h]=n;a[i]=o;a[j]=p;a[l]=q;a[x]=y;a[v]=u;a[A]='pointerover';a[B]='pointerout';a[D]='pointerenter';if(!Ext.isIE11){a[E]='pointerleave'}}else {if(w.MSPointerEvents){a[n]=r;a[o]=s;a[p]=t;a[q]=z;a[f]=r;a[g]=s;a[b]=t;a[h]=r;a[i]=s;a[j]=t;a[l]=z;a[x]=y;a[v]=u;a[A]='MSPointerOver';a[B]='MSPointerOut'}else {if(w.TouchEvents){a[n]=h;a[o]=i;a[p]=j;a[q]=l;a[f]=h;a[g]=i;a[b]=j;a[x]=y;a[v]=u;if(Ext.isWebKit&&Ext.os.is.Desktop){a[h]=f;a[i]=g;a[j]=b;a[l]=b;c[f]=f;c[g]=g;c[b]=b;c[h]=h;c[i]=i;c[j]=j;c[l]=l;c[n]=f;c[o]=g;c[p]=b;c[q]=b}}else {a[n]=f;a[o]=g;a[p]=b;a[q]=b;a[h]=f;a[i]=g;a[j]=b;a[l]=b}}}if(Ext.isWebKit){a.transitionend=Ext.browser.getVendorProperyName('transitionEnd');a.animationstart=Ext.browser.getVendorProperyName('animationStart');a.animationend=Ext.browser.getVendorProperyName('animationEnd')}if(!Ext.supports.MouseWheel&&!Ext.isOpera){a.mousewheel='DOMMouseScroll'}e=m.$eventOptions=Ext.Object.chain(m.$eventOptions);e.translate=e.capture=e.delegate=e.delegated=e.stopEvent=e.preventDefault=e.stopPropagation=e.element=1;m.styleHooks.opacity={name:'opacity',afterSet:function(e,b,c){var a=c.shadow;if(a){a.setOpacity(b)}}};m.getTrueXY=m.getXY;Ext.select=d.select;Ext.query=d.query;Ext.apply(Ext,{get:function(a){return d.get(a)},getDom:function(a){if(!a||!k){return null}return typeof a==='string'?Ext.getElementById(a):'dom' in a?a.dom:a},getBody:function(){if(!Ext._bodyEl){if(!k.body){throw new Error('[Ext.getBody] document.body does not yet exist')}Ext._bodyEl=Ext.get(k.body)}return Ext._bodyEl},getHead:function(){if(!Ext._headEl){Ext._headEl=Ext.get(k.head||k.getElementsByTagName('head')[0])}return Ext._headEl},getDoc:function(){if(!Ext._docEl){Ext._docEl=Ext.get(k)}return Ext._docEl},getWin:function(){if(!Ext._winEl){Ext._winEl=Ext.get(window)}return Ext._winEl},removeNode:function(a){a=a.dom||a;var e=a&&a.id,c=Ext.cache[e],b;if(c){c.destroy()}else {if(a&&(a.nodeType===3||a.tagName.toUpperCase()!=='BODY')){b=a.parentNode;if(b){b.removeChild(a)}}}}});Ext.isGarbage=function(a){return a&&a.nodeType===1&&a.tagName!=='BODY'&&a.tagName!=='HTML'&&(!a.parentNode||a.offsetParent===null&&(Ext.isIE8?k.all[a.id]:k.getElementById(a.id))!==a&&!(Ext.detachedBodyEl&&Ext.detachedBodyEl.isAncestor(a)))};if(Ext.os.is.Android||Ext.os.is.Windows&&Ext.supports.Touch){Ext.onReady(function(){var a=Ext.getWin();d._windowWidth=d._viewportWidth=window.innerWidth;d._windowHeight=d._viewportHeight=window.innerHeight;a.on({focusin:'_onWindowFocusChange',focusout:'_onWindowFocusChange',pointerup:'_onWindowFocusChange',capture:!0,delegated:!1,delay:1,scope:d});a.on({resize:'_onWindowResize',priority:2000,scope:d})})}});Ext.cmd.derive('Ext.GlobalEvents',Ext.mixin.Observable,{alternateClassName:'Ext.globalEvents',observableType:'global',singleton:!0,resizeBuffer:100,idleEventMask:{mousemove:1,touchmove:1,pointermove:1,MSPointerMove:1,unload:1},constructor:function(){var a=this;a.callParent();Ext.onInternalReady(function(){a.attachListeners()})},attachListeners:function(){Ext.get(window).on('resize',this.fireResize,this,{buffer:this.resizeBuffer});Ext.getDoc().on('mousedown',this.fireMouseDown,this)},fireMouseDown:function(a){this.fireEvent('mousedown',a)},fireResize:function(){var a=this,d=Ext.Element,c=d.getViewportWidth(),b=d.getViewportHeight();if(a.curHeight!==b||a.curWidth!==c){a.curHeight=b;a.curWidth=c;a.fireEvent('resize',c,b)}}},1,0,0,0,0,0,[Ext,'GlobalEvents',Ext,'globalEvents'],function(a){Ext.on=function(){return a.addListener.apply(a,arguments)};Ext.un=function(){return a.removeListener.apply(a,arguments)}});Ext.USE_NATIVE_JSON=!1;Ext.JSON=new function(){var me=this,hasNative=window.JSON&&JSON.toString()==='[object JSON]',useHasOwn=!!{}.hasOwnProperty,pad=function(a){return a<10?'0'+a:a},doDecode=function(json){return eval('('+json+')')},doEncode=function(a,b){if(a===null||a===undefined){return 'null'}else {if(Ext.isDate(a)){return me.encodeDate(a)}else {if(Ext.isString(a)){if(Ext.isMSDate(a)){return me.encodeMSDate(a)}else {return me.encodeString(a)}}else {if(typeof a==='number'){return isFinite(a)?String(a):'null'}else {if(Ext.isBoolean(a)){return String(a)}else {if(a.toJSON){return a.toJSON()}else {if(Ext.isArray(a)){return encodeArray(a,b)}else {if(Ext.isObject(a)){return encodeObject(a,b)}else {if(typeof a==='function'){return 'null'}}}}}}}}}return 'undefined'},m={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\','\v':'\\u000b'},charToReplace=/[\\\"\x00-\x1f\x7f-\uffff]/g,encodeString=function(a){return '"'+a.replace(charToReplace,function(b){var c=m[b];return typeof c==='string'?c:'\\u'+('0000'+b.charCodeAt(0).toString(16)).slice(-4)})+'"'},encodeMSDate=function(a){return '"'+a+'"'},encodeArrayPretty=function(e,d){var f=e.length,c=d+'   ',g=','+c,a=['[',c],b;for(b=0;b<f;b+=1){a.push(me.encodeValue(e[b],c),g)}a[a.length-1]=d+']';return a.join('')},encodeObjectPretty=function(e,f){var d=f+'   ',g=','+d,b=['{',d],c,a;for(c in e){a=e[c];if(!useHasOwn||e.hasOwnProperty(c)){if(typeof a==='function'||a===undefined){continue}b.push(me.encodeValue(c)+': '+me.encodeValue(a,d),g)}}b[b.length-1]=f+'}';return b.join('')},encodeArray=function(c,d){if(d){return encodeArrayPretty(c,d)}var a=['[',''],e=c.length,b;for(b=0;b<e;b+=1){a.push(me.encodeValue(c[b]),',')}a[a.length-1]=']';return a.join('')},encodeObject=function(d,e){if(e){return encodeObjectPretty(d,e)}var b=['{',''],c,a;for(c in d){a=d[c];if(!useHasOwn||d.hasOwnProperty(c)){if(typeof a==='function'||a===undefined){continue}b.push(me.encodeValue(c),':',me.encodeValue(a),',')}}b[b.length-1]='}';return b.join('')};me.encodeString=encodeString;me.encodeValue=doEncode;me.encodeDate=function(a){return '"'+a.getFullYear()+'-'+pad(a.getMonth()+1)+'-'+pad(a.getDate())+'T'+pad(a.getHours())+':'+pad(a.getMinutes())+':'+pad(a.getSeconds())+'"'};me.encode=function(a){if(hasNative&&Ext.USE_NATIVE_JSON){return JSON.stringify(a)}return me.encodeValue(a)};me.decode=function(a,b){try{if(hasNative&&Ext.USE_NATIVE_JSON){return JSON.parse(a)}return doDecode(a)}catch(c){if(b){return null}Ext.raise({sourceClass:'Ext.JSON',sourceMethod:'decode',msg:"You're trying to decode an invalid JSON String: "+a})}};me.encodeMSDate=encodeMSDate;if(!Ext.util){Ext.util={}}Ext.util.JSON=me;Ext.encode=me.encode;Ext.decode=me.decode}();Ext.cmd.derive('Ext.mixin.Inheritable',Ext.Mixin,{mixinConfig:{id:'inheritable'},getInherited:function(i){var a=this,b=i&&a.inheritedStateInner||a.inheritedState,h=a.getRefOwner(),f=a.isContainer,d,e,g,c;if(!b||b.invalid){d=a.getRefOwner();c=a.ownerLayout;if(h){g=c?c===h.layout:!0}a.inheritedState=b=Ext.Object.chain(d?d.getInherited(g):Ext.rootInheritedState);if(f){a.inheritedStateInner=e=Ext.Object.chain(b)}a.initInheritedState(b,e);b=f&&i?a.inheritedStateInner:a.inheritedState}return b},getInheritedConfig:function(b,e){var a=this.inheritedState,d,c;if(!a||a.invalid){a=this.getInherited()}c=a[b];if(e&&a.hasOwnProperty(b)){d=c;delete a[b];c=a[b];a[b]=d}return c},resolveListenerScope:function(f,d){var a=this,e=typeof d==='boolean',b=Ext._namedScopes[f],c;if(!b){c=a.getInheritedConfig('defaultListenerScope',e?d:!0)||f||a}else {if(b.isController){c=a.getInheritedConfig('controller',e?d:!b.isSelf)}else {if(b.isSelf){c=a.getInheritedConfig('defaultListenerScope',e&&d)||a}else {if(b.isThis){c=a}}}}return c||null},resolveSatelliteListenerScope:function(e,d){var c=this,b=Ext._namedScopes[d],a;if(!b){a=c.getInheritedConfig('defaultListenerScope')||d||c}else {if(b.isController){a=c.getInheritedConfig('controller')}else {if(b.isSelf){a=c.getInheritedConfig('defaultListenerScope')||e}else {if(b.isThis){a=e}}}}return a||null},lookupReferenceHolder:function(a){return this.getInheritedConfig('referenceHolder',a!==!1)||null},getRefOwner:function(){var a=this;return a.ownerCt||a.parent||a.$initParent||a.ownerCmp||a.floatParent},invalidateInheritedState:function(){var a=this.inheritedState;if(a){a.invalid=!0;delete this.inheritedState}},privates:{fixReference:function(){var b=this,a;if(b.getReference()){a=b.lookupReferenceHolder();if(a){a.attachReference(b)}}},onInheritedAdd:function(c,b){var a=this;if(a.inheritedState&&b){a.invalidateInheritedState()}if(a.getReference()){Ext.ComponentManager.markReferencesDirty()}},onInheritedRemove:function(c){var a=this,b;if(a.getReference()){b=a.lookupReferenceHolder();if(b){b.clearReference(a)}}if(a.inheritedState&&!c){a.invalidateInheritedState()}}}},0,0,0,0,0,0,[Ext.mixin,'Inheritable'],function(){Ext.rootInheritedState={}});Ext.cmd.derive('Ext.mixin.Bindable',Ext.Base,{mixinId:'bindable',config:{bind:{$value:null,lazy:!0},controller:null,defaultListenerScope:!1,publishes:{$value:null,lazy:!0,merge:function(a,b){return this.mergeSets(a,b)}},reference:null,session:{$value:null,lazy:!0},twoWayBindable:{$value:null,lazy:!0,merge:function(a,b){return this.mergeSets(a,b)}},viewModel:{$value:null,lazy:!0}},defaultBindProperty:null,validRefRe:/^[a-z_][a-z0-9_]*$/i,initInheritedState:function(b){var a=this,f=a.getReference(),c=a.getController(),d=a.getConfig('viewModel',!0),e=a.getConfig('session',!0),g=a.getDefaultListenerScope();if(c){b.controller=c}if(g){b.defaultListenerScope=a}else {if(c){b.defaultListenerScope=c}}if(d){if(!d.isViewModel){d=a}b.viewModel=d}if(e){if(!e.isSession){e=a}b.session=e}if(f){a.referenceKey=(b.referencePath||'')+f;a.viewModelKey=(b.viewModelPath||'')+f}},lookupController:function(a){return this.getInheritedConfig('controller',a)||null},lookupSession:function(b){var a=b?null:this.getSession();if(!a){a=this.getInheritedConfig('session',b);if(a&&!a.isSession){a=a.getInherited().session=a.getSession()}}return a||null},lookupViewModel:function(b){var a=b?null:this.getViewModel();if(!a){a=this.getInheritedConfig('viewModel',b);if(a&&!a.isViewModel){a=a.getInherited().viewModel=a.getViewModel()}}return a||null},publishState:function(b,a){var c=this,d=c.publishedState,i=c.getBind(),e=i&&b&&i[b],j=0,f,h,k,g;if(e&&!e.syncing&&!e.isReadOnly()){if(!(e.calls===0&&(a==null||a===c.getInitialConfig()[b]))){e.setValue(a)}}if(!(h=c.getPublishes())){return}if(!(k=c.lookupViewModel())){return}if(!(g=c.viewModelKey)){return}if(b&&d){if(!h[b]){return}if(!(a&&a.constructor===Object)&&!(a instanceof Array)){if(d[b]===a){return}}g+='.';g+=b}else {d=d||(c.publishedState={});for(f in h){++j;if(f===b){d[f]=a}else {d[f]=c[f]}}if(!j){return}a=d}k.set(g,a)},privates:{addBindableUpdater:function(d){var b=this,e=b.self.$config.configs,a=e[d],c;if(a&&!b.hasOwnProperty(c=a.names.update)){b[c]=a.bindableUpdater||(a.root.bindableUpdater=b.makeBindableUpdater(a))}},applyBind:function(b,e){if(!b){return b}var c=this,i=c.lookupViewModel(),g=c.getTwoWayBindable(),h=c._getBindTemplateScope,a,d,f;c.$hasBinds=!0;if(!e||typeof e==='string'){e={}}if(Ext.isString(b)){a=b;b={};b[c.defaultBindProperty]=a}for(d in b){f=b[d];a=e[d];if(a&&typeof a!=='string'){a.destroy();a=null}if(f){a=i.bind(f,c.onBindNotify,c);a._config=Ext.Config.get(d);a.getTemplateScope=h}e[d]=a;if(g&&g[d]&&!a.isReadOnly()){c.addBindableUpdater(d)}}return e},applyController:function(a){if(a){a=Ext.Factory.controller(a);a.setView(this)}return a},applyPublishes:function(a){if(this.lookupViewModel()){for(var b in a){this.addBindableUpdater(b)}}return a},applySession:function(a){if(!a){return null}if(!a.isSession){var b=this.lookupSession(!0),c=a===!0?{}:a;if(b){a=b.spawn(c)}else {a=new Ext.data['Session'](c)}}return a},applyViewModel:function(a){var c=this,b,d;if(!a){return null}if(!a.isViewModel){b={parent:c.lookupViewModel(!0)};b.session=c.getSession();if(!d&&!b.parent){b.session=c.lookupSession()}if(a){if(a.constructor===Object){Ext.apply(b,a)}else {if(typeof a==='string'){b.type=a}}}a=Ext.Factory.viewModel(b)}return a},_getBindTemplateScope:function(){return this.scope.resolveListenerScope()},destroyBindable:function(){var a=this,c=a.getConfig('viewModel',!0),b=a.getConfig('session',!0),d=a.getController();if(c&&c.isViewModel){c.destroy();a.setViewModel(null)}if(b&&b.isSession){if(b.getAutoDestroy()){b.destroy()}a.setSession(null)}if(d){a.setController(null);d.destroy()}},initBindable:function(){this.initBindable=Ext.emptyFn;this.getBind();this.getPublishes()},makeBindableUpdater:function(a){var b=a.names.update;return function(d,f){var c=this,e=c.self.prototype[b];if(e){e.call(c,d,f)}c.publishState(a.name,d)}},isSyncing:function(d){var b=this.getBind(),c=!1,a;if(b){a=b[d];if(a){c=a.syncing>0}}return c},onBindNotify:function(b,c,a){a.syncing=a.syncing+1||1;this[a._config.names.set](b);--a.syncing},removeBindings:function(){var c=this,a,d,b;if(c.$hasBinds){a=c.getBind();if(a&&typeof a!=='string'){for(d in a){b=a[d];b.destroy();b._config=b.getTemplateScope=null}}}c.setBind(null)},updateSession:function(a){var b=this.getInherited();if(a){b.session=a}else {delete b.session}},updateViewModel:function(a){var c=this.getInherited(),b=this.getController();if(a){c.viewModel=a;a.setView(this);if(b){b.initViewModel(a)}}else {delete c.viewModel}}}},0,0,0,0,0,0,[Ext.mixin,'Bindable'],0);Ext.define('TS.overrides.mixin.Bindable',{override:'Ext.mixin.Bindable',compatibility:'6.0.2',privates:{applyBind:function(d,e){if(!d){return d}var c=this,j=c.lookupViewModel(),h=c.getTwoWayBindable(),i=c._getBindTemplateScope,a,b,f,g;c.$hasBinds=!0;if(!e||typeof e==='string'){e={}}if(Ext.isString(d)){a=d;d={};d[c.defaultBindProperty]=a}for(b in d){f=d[b];a=e[b];if(a&&typeof a!=='string'){a.destroy();a=null;g=!0}if(f){a=j.bind(f,c.onBindNotify,c);a._config=Ext.Config.get(b);a.getTemplateScope=i}if(g){delete e[b]}else {e[b]=a}if(h&&h[b]){if(g){c.clearBindableUpdater(b)}else {if(!a.isReadOnly()){c.addBindableUpdater(b)}}}}return e},clearBindableUpdater:function(d){var a=this,e=a.self.$config.configs,c=e[d],b;if(c&&a.hasOwnProperty(b=c.names.update)){if(a[b].$bindableUpdater){delete a[b]}}},makeBindableUpdater:function(a){var c=a.names.update,b=function(d,f){var b=this,e=b.self.prototype[c];if(e){e.call(b,d,f)}b.publishState(a.name,d)};b.$bindableUpdater=!0;return b},removeBindings:function(){var c=this,a,d,b;if(c.$hasBinds){a=c.getBind();if(a&&typeof a!=='string'){for(d in a){b=a[d];if(b){b.destroy();b._config=b.getTemplateScope=null}}}}c.setBind(null)}}});Ext.cmd.derive('Ext.mixin.ComponentDelegation',Ext.Mixin,{mixinConfig:{id:'componentDelegation'},privates:{addDelegatedListener:function(b,k,j,a,d,i,h){var c=this,e,g,f;b=Ext.canonicalEventName(b);d=d||a.order;if(d){f=a&&a.priority;if(!f){a=a?Ext.Object.chain(a):{};a.priority=c.$orderToPriority[d]}}e=c.$delegatedEvents||(c.$delegatedEvents={});g=e[b]||(e[b]=new Ext.util.Event(c,b));if(g.addListener(k,j,a,i,h)){c.$hasDelegatedListeners._incr_(b)}},clearDelegatedListeners:function(){var e=this,a=e.$delegatedEvents,b,c,d;if(a){for(b in a){c=a[b];d=c.listeners.length;c.clearListeners();e.$hasDelegatedListeners._decr_(b,d);delete a[b]}}},doFireDelegatedEvent:function(f,g){var e=this,d=!0,a,b,c;if(e.$hasDelegatedListeners[f]){a=e.getRefOwner();while(a){b=a.$delegatedEvents;if(b){c=b[f];if(c){d=c.fireDelegated(e,g);if(d===!1){break}}}a=a.getRefOwner()}}return d},removeDelegatedListener:function(c,f,e){var d=this,b=d.$delegatedEvents,a;if(b){a=b[c];if(a&&a.removeListener(f,e)){d.$hasDelegatedListeners._decr_(c);if(a.listeners.length===0){delete b[c]}}}}},onClassMixedIn:function(a){function HasListeners(){}a.prototype.HasListeners=a.HasListeners=HasListeners;HasListeners.prototype=a.hasListeners=new Ext.mixin.ComponentDelegation.HasDelegatedListeners()}},0,0,0,0,0,0,[Ext.mixin,'ComponentDelegation'],function(a){function HasDelegatedListeners(){}a.HasDelegatedListeners=HasDelegatedListeners;HasDelegatedListeners.prototype=a.prototype.$hasDelegatedListeners=new Ext.mixin.Observable.HasListeners()});Ext.cmd.derive('Ext.Widget',Ext.Evented,{isWidget:!0,element:{reference:'element'},observableType:'component',cachedConfig:{style:null},config:{userCls:null},eventedConfig:{width:null,height:null},template:[],constructor:function(c){var a=this,b;a.initId(c);a.initElement();a.mixins.observable.constructor.call(a,c);Ext.ComponentManager.register(a);b=a.getController();if(b){b.init(a)}},afterCachedConfig:function(){var c=this,j=c.self.prototype,f=c.referenceList,i=c.renderElement,d,h,a,b,g,e;j.renderTemplate=d=document.createDocumentFragment();d.appendChild(i.clone(!0,!0));e=d.querySelectorAll('[id]');for(a=0,b=e.length;a<b;a++){h=e[a];h.removeAttribute('id')}for(a=0,b=f.length;a<b;a++){g=f[a];c[g].dom.removeAttribute('reference')}},addCls:function(a){this.el.addCls(a)},applyWidth:function(a){return this.filterLengthValue(a)},applyHeight:function(a){return this.filterLengthValue(a)},clearListeners:function(){var a=this;a.mixins.observable.clearListeners.call(a);a.mixins.componentDelegation.clearDelegatedListeners.call(a)},destroy:function(){var a=this,d=a.referenceList,c,e,b;for(c=0,e=d.length;c<e;c++){b=d[c];if(a.hasOwnProperty(b)){a[b].destroy();a[b]=null}}a.destroyBindable();Ext.Evented.prototype.destroy.call(this);Ext.ComponentManager.unregister(a)},doFireEvent:function(c,d,e){var a=this,b=a.mixins.observable.doFireEvent.call(a,c,d,e);if(b!==!1){b=a.mixins.componentDelegation.doFireDelegatedEvent.call(a,c,d)}return b},getElementConfig:function(){var b=this,a=b.element;if(!('children' in a)){a=Ext.apply({children:b.getTemplate()},a)}return a},getSize:function(){return {width:this.getWidth(),height:this.getHeight()}},getTemplate:function(){return this.template},initElement:function(){var a=this,j=a.self.prototype,k=a.getId(),m=a.referenceList=a.referenceList=[],i=!0,c,d,f,h,g,l,b,e;if(j.hasOwnProperty('renderTemplate')){c=a.renderTemplate.cloneNode(!0);d=c.firstChild}else {i=!1;c=document.createDocumentFragment();d=Ext.Element.create(a.processElementConfig.call(j),!0);c.appendChild(d)}h=c.querySelectorAll('[reference]');for(g=0,l=h.length;g<l;g++){b=h[g];e=b.getAttribute('reference');if(i){b.removeAttribute('reference')}if(e==='element'){b.id=k;f=a.el=a.addElementReference(e,b);f.dom.setAttribute('data-componentid',k)}else {a.addElementReferenceOnDemand(e,b)}m.push(e)}if(d===f.dom){a.renderElement=f}else {a.addElementReferenceOnDemand('renderElement',d)}},is:function(a){return Ext.ComponentQuery.is(this,a)},isXType:function(a,b){return b?Ext.Array.indexOf(this.xtypes,a)!==-1:!!this.xtypesMap[a]},removeCls:function(a){this.el.removeCls(a)},toggleCls:function(b,a){this.element.toggleCls(b,a)},resolveListenerScope:function(a,b){return this.mixins.inheritable.resolveListenerScope.call(this,a,b)},setSize:function(b,a){if(b!==undefined){this.setWidth(b)}if(a!==undefined){this.setHeight(a)}},applyStyle:function(a,b){if(b&&a===b&&Ext.isObject(b)){a=Ext.apply({},a)}return a},updateStyle:function(a){this.element.applyStyles(a)},updateWidth:function(a){this.element.setWidth(a)},updateHeight:function(a){this.element.setHeight(a)},onFocusEnter:Ext.emptyFn,onFocusLeave:Ext.emptyFn,isAncestor:function(){return !1},privates:{addElementReferenceOnDemand:function(a,b){if(this._elementListeners[a]){this.addElementReference(a,b)}else {Ext.Object.defineProperty(this,a,{get:function(){delete this[a];return this.addElementReference(a,b)},configurable:!0})}},addElementReference:function(f,g){var b=this,c=b[f]=Ext.get(g),a=b._elementListeners[f],e,d;c.skipGarbageCollection=!0;c.component=b;if(a){a=Ext.clone(a);for(e in a){d=a[e];if(typeof d==='object'){d.scope=b}}a.scope=b;c.on(a)}return c},detachFromBody:function(){Ext.getDetachedBody().appendChild(this.element);this.isDetached=!0},doAddListener:function(e,f,d,a,c,i,h){var b=this,g;if(a&&'element' in a){b[a.element].doAddListener(e,f,d||b,a,c)}if(a){g=a.delegate;if(g){b.mixins.componentDelegation.addDelegatedListener.call(b,e,f,d,a,c,i,h);return}}Ext.Evented.prototype.doAddListener.call(this,e,f,d,a,c,i,h)},doRemoveListener:function(b,d,c){var a=this;a.mixins.observable.doRemoveListener.call(a,b,d,c);a.mixins.componentDelegation.removeDelegatedListener.call(a,b,d,c)},filterLengthValue:function(a){if(a==='auto'||!a&&a!==0){return null}return a},getFocusEl:function(){return this.element},initElementListeners:function(a){var c=this,k=c.self.superclass,d=k._elementListeners,h=a.reference,i=a.children,f,b,g,j,e;if(c.hasOwnProperty('_elementListeners')){f=c._elementListeners}else {f=c._elementListeners=d?Ext.Object.chain(d):{}}if(h){b=a.listeners;if(b){if(d){g=d[h];if(g){b=Ext.Object.chain(g);Ext.apply(b,a.listeners)}}f[h]=b;a.listeners=null}}if(i){for(e=0,j=i.length;e<j;e++){c.initElementListeners(i[e])}}},initId:function(d){var a=this,c=a.config,b=d&&d.id||c&&c.id;if(b){a.setId(b);a.id=b}else {a.getId()}},processElementConfig:function(){var a=this,c=a.self.superclass,b;if(a.hasOwnProperty('_elementConfig')){b=a._elementConfig}else {b=a._elementConfig=a.getElementConfig();if(c.isWidget){a.processElementConfig.call(c)}a.initElementListeners(b)}return b},reattachToBody:function(){this.isDetached=!1},updateUserCls:function(a,b){this.element.replaceCls(b,a)}}},1,['widget'],['widget'],{'widget':!0},['widget.widget'],[[Ext.mixin.Inheritable.prototype.mixinId||Ext.mixin.Inheritable.$className,Ext.mixin.Inheritable],[Ext.mixin.Bindable.prototype.mixinId||Ext.mixin.Bindable.$className,Ext.mixin.Bindable],[Ext.mixin.ComponentDelegation.prototype.mixinId||Ext.mixin.ComponentDelegation.$className,Ext.mixin.ComponentDelegation]],[Ext,'Widget'],function(b){var a=b.prototype;(a.$elementEventOptions=Ext.Object.chain(Ext.Element.prototype.$eventOptions)).element=1;(a.$eventOptions=Ext.Object.chain(a.$eventOptions)).delegate=1});Ext.cmd.derive('Ext.mixin.Traversable',Ext.Mixin,{mixinConfig:{id:'traversable'},setParent:function(a){this.parent=a;return this},hasParent:function(){return Boolean(this.parent)},getParent:function(){return this.parent},getAncestors:function(){var b=[],a=this.getParent();while(a){b.push(a);a=a.getParent()}return b},getAncestorIds:function(){var b=[],a=this.getParent();while(a){b.push(a.getId());a=a.getParent()}return b}},0,0,0,0,0,0,[Ext.mixin,'Traversable'],0);Ext.define('Ext.overrides.Widget',{override:'Ext.Widget',mixins:[Ext.mixin.Traversable],config:{flex:{evented:!0,$value:null},itemId:undefined},constructor:function(a){(arguments.callee.$previous||Ext.Evented.prototype.constructor).call(this,a);this.initBindable()},applyFlex:function(a){if(a){a=Number(a);if(isNaN(a)){a=null}}else {a=null}return a},applyItemId:function(a){return a||this.getId()},render:function(b,a){this.renderTo(b,a)},renderTo:function(e,c){var d=this.renderElement.dom,b=Ext.getDom(e),a;if(Ext.isNumber(a)){c=b.childNodes[c]}a=Ext.getDom(c);if(b){if(a){b.insertBefore(d,a)}else {b.appendChild(d)}this.setRendered(Boolean(d.offsetParent))}},destroy:function(){var b=this,a=b.getParent();if(a&&a.remove){a.remove(b,!1)}b.removeBindings();(arguments.callee.$previous||Ext.Evented.prototype.destroy).call(this)},isInnerItem:function(){return !0},isCentered:function(){return !1},isDocked:function(){return Boolean(this.getDocked())},isFloating:function(){return !1},getDocked:function(){return this._docked},onAdded:function(c,d){var a=this,e=a.inheritedState,b=a.parent;if(b&&b!==c){b.remove(a,!1)}a.parent=c;a.onInheritedAdd(c,d)},onRemoved:function(a){if(!a){this.removeBindings()}this.onInheritedRemove(a);this.parent=null},setLayoutSizeFlags:Ext.emptyFn,setRendered:function(a){var b=this.rendered;if(a!==b){this.rendered=a;return !0}return !1},updateLayout:function(){var b=this.getParent(),a;if(b){a=b.getScrollable();if(a){a.refresh()}}}});Ext.cmd.derive('Ext.util.Format',Ext.Base,function(){var a;return {singleton:!0,defaultDateFormat:'m/d/Y',thousandSeparator:',',decimalSeparator:'.',currencyPrecision:2,currencySign:'$',percentSign:'%',currencyAtEnd:!1,stripTagsRe:/<\/?[^>]+>/gi,stripScriptsRe:/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/ig,nl2brRe:/\r?\n/g,hashRe:/#+$/,allHashes:/^#+$/,formatPattern:/[\d,\.#]+/,formatCleanRe:/[^\d\.#]/g,I18NFormatCleanRe:null,formatFns:{},constructor:function(){a=this},undef:function(a){return a!==undefined?a:''},defaultValue:function(a,b){return a!==undefined&&a!==''?a:b},substr:'ab'.substr(-1)!='b'?function(d,a,c){var b=String(d);return a<0?b.substr(Math.max(b.length+a,0),c):b.substr(a,c)}:function(c,b,a){return String(c).substr(b,a)},lowercase:function(a){return String(a).toLowerCase()},uppercase:function(a){return String(a).toUpperCase()},usMoney:function(b){return a.currency(b,'$',2)},currency:function(b,f,c,h){var d='',e=',0',g=0;b=b-0;if(b<0){b=-b;d='-'}c=Ext.isDefined(c)?c:a.currencyPrecision;e+=c>0?'.':'';for(;g<c;g++){e+='0'}b=a.number(b,e);if((h||a.currencyAtEnd)===!0){return Ext.String.format('{0}{1}{2}',d,b,f||a.currencySign)}else {return Ext.String.format('{0}{1}{2}',d,f||a.currencySign,b)}},date:function(a,b){if(!a){return ''}if(!Ext.isDate(a)){a=new Date(Date.parse(a))}return Ext.Date.dateFormat(a,b||Ext.Date.defaultFormat)},dateRenderer:function(b){return function(c){return a.date(c,b)}},hex:function(c,b){var a=parseInt(c||0,10).toString(16);if(b){if(b<0){b=-b;if(a.length>b){a=a.substring(a.length-b)}}while(a.length<b){a='0'+a}}return a},or:function(b,a){return b||a},pick:function(a,d,c){if(Ext.isNumber(a)){var b=arguments[a+1];if(b){return b}}return a?c:d},stripTags:function(b){return !b?b:String(b).replace(a.stripTagsRe,'')},stripScripts:function(b){return !b?b:String(b).replace(a.stripScriptsRe,'')},fileSize:function(){var a=1024,b=1048576,c=1073741824;return function(d){var e;if(d<a){if(d===1){e='1 byte'}else {e=d+' bytes'}}else {if(d<b){e=Math.round(d*10/a)/10+' KB'}else {if(d<c){e=Math.round(d*10/b)/10+' MB'}else {e=Math.round(d*10/c)/10+' GB'}}}return e}}(),math:function(){var a={};return function(c,b){if(!a[b]){a[b]=Ext.functionFactory('v','return v '+b+';')}return a[b](c)}}(),round:function(c,a){var b=Number(c);if(typeof a==='number'){a=Math.pow(10,a);b=Math.round(c*a)/a}else {if(a===undefined){b=Math.round(b)}}return b},number:function(k,c){if(!c){return k}if(isNaN(k)){return ''}var j=a.formatFns[c];if(!j){var n=c,o=a.thousandSeparator,g=a.decimalSeparator,d=0,l='',h,e,i,f,b,m;if(c.substr(c.length-2)==='/i'){if(!a.I18NFormatCleanRe||a.lastDecimalSeparator!==g){a.I18NFormatCleanRe=new RegExp('[^\\d\\'+g+'#]','g');a.lastDecimalSeparator=g}c=c.substr(0,c.length-2);h=c.indexOf(o)!==-1;e=c.replace(a.I18NFormatCleanRe,'').split(g)}else {h=c.indexOf(',')!==-1;e=c.replace(a.formatCleanRe,'').split('.')}i=c.replace(a.formatPattern,'');if(e.length>2){}else {if(e.length===2){d=e[1].length;f=e[1].match(a.hashRe);if(f){m=f[0].length;l='trailingZeroes=new RegExp(Ext.String.escapeRegex(utilFormat.decimalSeparator) + "*0{0,'+m+'}$")'}}}b=['var utilFormat=Ext.util.Format,extNumber=Ext.Number,neg,absVal,fnum,parts'+(h?',thousandSeparator,thousands=[],j,n,i':'')+(i?',formatString="'+c+'",formatPattern=/[\\d,\\.#]+/':'')+',trailingZeroes;return function(v){if(typeof v!=="number"&&isNaN(v=extNumber.from(v,NaN)))return"";neg=v<0;','absVal=Math.abs(v);','fnum=Ext.Number.toFixed(absVal, '+d+');',l,';'];if(h){if(d){b[b.length]='parts=fnum.split(".");';b[b.length]='fnum=parts[0];'}b[b.length]='if(absVal>=1000) {';b[b.length]='thousandSeparator=utilFormat.thousandSeparator;thousands.length=0;j=fnum.length;n=fnum.length%3||3;for(i=0;i<j;i+=n){if(i!==0){n=3;}thousands[thousands.length]=fnum.substr(i,n);}fnum=thousands.join(thousandSeparator);}';if(d){b[b.length]='fnum += utilFormat.decimalSeparator+parts[1];'}}else {if(d){b[b.length]='if(utilFormat.decimalSeparator!=="."){parts=fnum.split(".");fnum=parts[0]+utilFormat.decimalSeparator+parts[1];}'}}b[b.length]='if(neg&&fnum!=="'+(d?'0.'+Ext.String.repeat('0',d):'0')+'") { fnum="-"+fnum; }';if(f){b[b.length]='fnum=fnum.replace(trailingZeroes,"");'}b[b.length]='return ';if(i){b[b.length]='formatString.replace(formatPattern, fnum);'}else {b[b.length]='fnum;'}b[b.length]='};';j=a.formatFns[n]=Ext.functionFactory('Ext',b.join(''))(Ext)}return j(k)},numberRenderer:function(b){return function(c){return a.number(c,b)}},percent:function(c,b){return a.number(c*100,b||'0')+a.percentSign},attributes:function(a){if(typeof a==='object'){var c=[],b;for(b in a){if(a.hasOwnProperty(b)){c.push(b,'="',b==='style'?Ext.DomHelper.generateStyles(a[b],null,!0):Ext.htmlEncode(a[b]),'" ')}}a=c.join('')}return a||''},plural:function(c,a,b){return c+' '+(c===1?a:b?b:a+'s')},nl2br:function(b){return Ext.isEmpty(b)?'':b.replace(a.nl2brRe,'<br/>')},capitalize:Ext.String.capitalize,uncapitalize:Ext.String.uncapitalize,ellipsis:Ext.String.ellipsis,escape:Ext.String.escape,escapeRegex:Ext.String.escapeRegex,htmlDecode:Ext.String.htmlDecode,htmlEncode:Ext.String.htmlEncode,leftPad:Ext.String.leftPad,toggle:Ext.String.toggle,trim:Ext.String.trim,parseBox:function(b){b=b||0;if(typeof b==='number'){return {top:b,right:b,bottom:b,left:b}}var a=b.split(' '),c=a.length;if(c===1){a[1]=a[2]=a[3]=a[0]}else {if(c===2){a[2]=a[0];a[3]=a[1]}else {if(c===3){a[3]=a[1]}}}return {top:parseInt(a[0],10)||0,right:parseInt(a[1],10)||0,bottom:parseInt(a[2],10)||0,left:parseInt(a[3],10)||0}}}},1,0,0,0,0,0,[Ext.util,'Format'],0);Ext.cmd.derive('Ext.Template',Ext.Base,{inheritableStatics:{from:function(a,b){a=Ext.getDom(a);return new this(a.value||a.innerHTML,b||'')}},useEval:Ext.isGecko,constructor:function(g){var d=this,c=arguments,f=[],e,b=c.length,a;d.initialConfig={};if(b===1&&Ext.isArray(g)){c=g;b=c.length}if(b>1){for(e=0;e<b;e++){a=c[e];if(typeof a==='object'){Ext.apply(d.initialConfig,a);Ext.apply(d,a)}else {f.push(a)}}}else {f.push(g)}d.html=f.join('')},isTemplate:!0,disableFormats:!1,tokenRe:/\{(?:(?:(\d+)|([a-z_][\w\-]*))(?::([a-z_\.]+)(?:\(([^\)]*?)?\))?)?)\}/gi,apply:function(b){var a=this;if(a.compiled){if(!a.fn){a.compile()}return a.fn(b).join('')}return a.evaluate(b)},evaluate:function(a){var b=this,e=!b.disableFormats,c=Ext.util.Format,d=b;function fn(i,h,b,g,f){if(b==null||b===''){b=h}if(g&&e){if(f){f=[a[b]].concat(Ext.functionFactory('return ['+f+'];')())}else {f=[a[b]]}if(g.substr(0,5)==='this.'){return d[g.substr(5)].apply(d,f)}else {if(c[g]){return c[g].apply(c,f)}else {return i}}}else {return a[b]!==undefined?a[b]:''}}return b.html.replace(b.tokenRe,fn)},applyOut:function(c,b){var a=this;if(a.compiled){if(!a.fn){a.compile()}b.push.apply(b,a.fn(c))}else {b.push(a.apply(c))}return b},applyTemplate:function(){return this.apply.apply(this,arguments)},set:function(c,b){var a=this;a.html=c;a.compiled=!!b;a.fn=null;return a},compileARe:/\\/g,compileBRe:/(\r\n|\n)/g,compileCRe:/'/g,compile:function(){var a=this,b;b=a.html.replace(a.compileARe,'\\\\').replace(a.compileBRe,'\\n').replace(a.compileCRe,"\\'").replace(a.tokenRe,a.regexReplaceFn.bind(a));b=(this.disableFormats!==!0?'var fm=Ext.util.Format;':'')+(a.useEval?'$=':'return')+" function(v){return ['"+b+"'];};";a.fn=a.useEval?a.evalCompiled(b):(new Function('Ext',b))(Ext);a.compiled=!0;return a},evalCompiled:function($){eval($);return $},regexReplaceFn:function(d,b,e,a,c){if(b==null||b===''){b='"'+e+'"'}else {if(this.stringFormat){b=parseInt(b)+1}}if(a&&this.disableFormats!==!0){c=c?','+c:'';if(a.substr(0,5)==='this.'){a=a+'('}else {if(Ext.util.Format[a]){a='fm.'+a+'('}else {return d}}return "',"+a+'v['+b+']'+c+"),'"}else {return "',v["+b+"] == undefined ? '' : v["+b+"],'"}},insertFirst:function(c,b,a){return this.doInsert('afterBegin',c,b,a)},insertBefore:function(c,b,a){return this.doInsert('beforeBegin',c,b,a)},insertAfter:function(c,b,a){return this.doInsert('afterEnd',c,b,a)},append:function(c,b,a){return this.doInsert('beforeEnd',c,b,a)},doInsert:function(d,e,c,b){var a=Ext.DomHelper.insertHtml(d,Ext.getDom(e),this.apply(c));return b?Ext.get(a):a},overwrite:function(d,c,b){var a=Ext.DomHelper.overwrite(Ext.getDom(d),this.apply(c));return b?Ext.get(a):a}},1,0,0,0,0,0,[Ext,'Template'],function(d){var e=/\{\d+\}/,b=function(a){if(e.test(a)){a=new d(a,c);return function(){return a.apply(arguments)}}else {return function(){return a}}},c={useFormat:!1,compiled:!0,stringFormat:!0},a={};Ext.String.format=Ext.util.Format.format=function(c){var e=a[c]||(a[c]=b(c));return e.apply(this,arguments)};Ext.String.formatEncode=function(){return Ext.String.htmlEncode(Ext.String.format.apply(this,arguments))}});Ext.cmd.derive('Ext.util.XTemplateParser',Ext.Base,{constructor:function(a){Ext.apply(this,a)},doTpl:Ext.emptyFn,parse:function(g){var b=this,q=g.length,s={elseif:'elif'},p=b.topRe,r=b.actionsRe,j,e,d,c,h,n,l,m,i,f,a,k,o;b.level=0;b.stack=e=[];for(j=0;j<q;j=f){p.lastIndex=j;c=p.exec(g);if(!c){b.doText(g.substring(j,q));break}i=c.index;f=p.lastIndex;if(j<i){d=g.substring(j,i);if(!(o&&Ext.String.trim(d)==='')){b.doText(d)}}o=!1;if(c[1]){f=g.indexOf('%}',i+2);b.doEval(g.substring(i+2,f));f+=2}else {if(c[2]){f=g.indexOf(']}',i+2);b.doExpr(g.substring(i+2,f));f+=2}else {if(c[3]){b.doTag(c[3])}else {if(c[4]){a=null;while((m=r.exec(c[4]))!==null){d=m[2]||m[3];if(d){d=Ext.String.htmlDecode(d);h=m[1];h=s[h]||h;a=a||{};n=a[h];if(typeof n=='string'){a[h]=[n,d]}else {if(n){a[h].push(d)}else {a[h]=d}}}}if(!a){if(b.elseRe.test(c[4])){b.doElse()}else {if(b.defaultRe.test(c[4])){b.doDefault()}else {b.doTpl();e.push({type:'tpl'})}}}else {if(a['if']){b.doIf(a['if'],a);e.push({type:'if'})}else {if(a['switch']){b.doSwitch(a['switch'],a);e.push({type:'switch'});o=!0}else {if(a['case']){b.doCase(a['case'],a)}else {if(a['elif']){b.doElseIf(a['elif'],a)}else {if(a['for']){++b.level;if(k=b.propRe.exec(c[4])){a.propName=k[1]||k[2]}b.doFor(a['for'],a);e.push({type:'for',actions:a})}else {if(a['foreach']){++b.level;if(k=b.propRe.exec(c[4])){a.propName=k[1]||k[2]}b.doForEach(a['foreach'],a);e.push({type:'foreach',actions:a})}else {if(a.exec){b.doExec(a.exec,a);e.push({type:'exec',actions:a})}}}}}}}}}else {if(c[0].length===5){e.push({type:'tpl'})}else {l=e.pop();b.doEnd(l.type,l.actions);if(l.type=='for'||l.type=='foreach'){--b.level}}}}}}}},topRe:/(?:(\{\%)|(\{\[)|\{([^{}]+)\})|(?:<tpl([^>]*)\>)|(?:<\/tpl>)/g,actionsRe:/\s*(elif|elseif|if|for|foreach|exec|switch|case|eval|between)\s*\=\s*(?:(?:"([^"]*)")|(?:'([^']*)'))\s*/g,propRe:/prop=(?:(?:"([^"]*)")|(?:'([^']*)'))/,defaultRe:/^\s*default\s*$/,elseRe:/^\s*else\s*$/},1,0,0,0,0,0,[Ext.util,'XTemplateParser'],0);Ext.cmd.derive('Ext.util.XTemplateCompiler',Ext.util.XTemplateParser,{useEval:Ext.isGecko,useIndex:Ext.isIE8m,useFormat:!0,propNameRe:/^[\w\d\$]*$/,compile:function(c){var a=this,b=a.generate(c);return a.useEval?a.evalTpl(b):(new Function('Ext',b))(Ext)},generate:function(d){var a=this,b='var fm=Ext.util.Format,ts=Object.prototype.toString;',c;a.maxLevel=0;a.body=['var c0=values, a0='+a.createArrayTest(0)+', p0=parent, n0=xcount, i0=xindex, k0, v;\n'];if(a.definitions){if(typeof a.definitions==='string'){a.definitions=[a.definitions,b]}else {a.definitions.push(b)}}else {a.definitions=[b]}a.switches=[];a.parse(d);a.definitions.push((a.useEval?'$=':'return')+' function ('+a.fnArgs+') {',a.body.join(''),'}');c=a.definitions.join('\n');a.definitions.length=a.body.length=a.switches.length=0;delete a.definitions;delete a.body;delete a.switches;return c},doText:function(a){var b=this,c=b.body;a=a.replace(b.aposRe,"\\'").replace(b.newLineRe,'\\n');if(b.useIndex){c.push("out[out.length]='",a,"'\n")}else {c.push("out.push('",a,"')\n")}},doExpr:function(b){var a=this.body;a.push('if ((v='+b+') != null) out');if(this.useIndex){a.push("[out.length]=v+''\n")}else {a.push(".push(v+'')\n")}},doTag:function(b){var a=this.parseTag(b);if(a){this.doExpr(a)}else {this.doText('{'+b+'}')}},doElse:function(){this.body.push('} else {\n')},doEval:function(a){this.body.push(a,'\n')},doIf:function(b,c){var a=this;if(b==='.'){a.body.push('if (values) {\n')}else {if(a.propNameRe.test(b)){a.body.push('if (',a.parseTag(b),') {\n')}else {a.body.push('if (',a.addFn(b),a.callFn,') {\n')}}if(c.exec){a.doExec(c.exec)}},doElseIf:function(b,c){var a=this;if(b==='.'){a.body.push('else if (values) {\n')}else {if(a.propNameRe.test(b)){a.body.push('} else if (',a.parseTag(b),') {\n')}else {a.body.push('} else if (',a.addFn(b),a.callFn,') {\n')}}if(c.exec){a.doExec(c.exec)}},doSwitch:function(b){var a=this,c;if(b==='.'||b==='#'){c=b==='.'?'values':'xindex';a.body.push('switch (',c,') {\n')}else {if(a.propNameRe.test(b)){a.body.push('switch (',a.parseTag(b),') {\n')}else {a.body.push('switch (',a.addFn(b),a.callFn,') {\n')}}a.switches.push(0)},doCase:function(e){var a=this,c=Ext.isArray(e)?e:[e],d=a.switches.length-1,f,b;if(a.switches[d]){a.body.push('break;\n')}else {a.switches[d]++}for(b=0,d=c.length;b<d;++b){f=a.intRe.exec(c[b]);c[b]=f?f[1]:"'"+c[b].replace(a.aposRe,"\\'")+"'"}a.body.push('case ',c.join(': case '),':\n')},doDefault:function(){var a=this,b=a.switches.length-1;if(a.switches[b]){a.body.push('break;\n')}else {a.switches[b]++}a.body.push('default:\n')},doEnd:function(c,d){var a=this,b=a.level-1;if(c=='for'||c=='foreach'){if(d.exec){a.doExec(d.exec)}a.body.push('}\n');a.body.push('parent=p',b,';values=r',b+1,';xcount=n'+b+';xindex=i',b,'+1;xkey=k',b,';\n')}else {if(c=='if'||c=='switch'){a.body.push('}\n')}}},doFor:function(c,d){var b=this,f,a=b.level,e=a-1,g;if(c==='.'){f='values'}else {if(b.propNameRe.test(c)){f=b.parseTag(c)}else {f=b.addFn(c)+b.callFn}}if(b.maxLevel<a){b.maxLevel=a;b.body.push('var ')}if(c=='.'){g='c'+a}else {g='a'+e+'?c'+e+'[i'+e+']:c'+e}b.body.push('i',a,'=0,n',a,'=0,c',a,'=',f,',a',a,'=',b.createArrayTest(a),',r',a,'=values,p',a,',k',a,';\n','p',a,'=parent=',g,'\n','if (c',a,'){if(a',a,'){n',a,'=c',a,'.length;}else if (c',a,'.isMixedCollection){c',a,'=c',a,'.items;n',a,'=c',a,'.length;}else if(c',a,'.isStore){c',a,'=c',a,'.data.items;n',a,'=c',a,'.length;}else{c',a,'=[c',a,'];n',a,'=1;}}\n','for (xcount=n',a,';i',a,'<n'+a+';++i',a,'){\n','values=c',a,'[i',a,']');if(d.propName){b.body.push('.',d.propName)}b.body.push('\n','xindex=i',a,'+1\n');if(d.between){b.body.push('if(xindex>1){ out.push("',d.between,'"); } \n')}},doForEach:function(c,d){var b=this,f,a=b.level,e=a-1,g;if(c==='.'){f='values'}else {if(b.propNameRe.test(c)){f=b.parseTag(c)}else {f=b.addFn(c)+b.callFn}}if(b.maxLevel<a){b.maxLevel=a;b.body.push('var ')}if(c=='.'){g='c'+a}else {g='a'+e+'?c'+e+'[i'+e+']:c'+e}b.body.push('i',a,'=-1,n',a,'=0,c',a,'=',f,',a',a,'=',b.createArrayTest(a),',r',a,'=values,p',a,',k',a,';\n','p',a,'=parent=',g,'\n','for(k',a,' in c',a,'){\n','xindex=++i',a,'+1;\n','xkey=k',a,';\n','values=c',a,'[k',a,'];');if(d.propName){b.body.push('.',d.propName)}if(d.between){b.body.push('if(xindex>1){ out.push("',d.between,'"); } \n')}},createArrayTest:'isArray' in Array?function(a){return 'Array.isArray(c'+a+')'}:function(a){return 'ts.call(c'+a+')==="[object Array]"'},doExec:function(d,e){var a=this,c='f'+a.definitions.length,b=a.guards[a.strict?0:1];a.definitions.push('function '+c+'('+a.fnArgs+') {',b.doTry,' var $v = values; with($v) {','  '+d,' }',b.doCatch,'}');a.body.push(c+a.callFn+'\n')},guards:[{doTry:'',doCatch:''},{doTry:'try { ',doCatch:' } catch(e) {\n}'}],addFn:function(c){var a=this,b='f'+a.definitions.length,d=a.guards[a.strict?0:1];if(c==='.'){a.definitions.push('function '+b+'('+a.fnArgs+') {',' return values','}')}else {if(c==='..'){a.definitions.push('function '+b+'('+a.fnArgs+') {',' return parent','}')}else {a.definitions.push('function '+b+'('+a.fnArgs+') {',d.doTry,' var $v = values; with($v) {','  return('+c+')',' }',d.doCatch,'}')}}return b},parseTag:function(h){var e=this,f=e.tagRe.exec(h),a,c,d,g,b;if(!f){return null}a=f[1];c=f[2];d=f[3];g=f[4];if(a=='.'){if(!e.validTypes){e.definitions.push('var validTypes={string:1,number:1,boolean:1};');e.validTypes=!0}b='validTypes[typeof values] || ts.call(values) === "[object Date]" ? values : ""'}else {if(a=='#'){b='xindex'}else {if(a=='$'){b='xkey'}else {if(a.substr(0,7)=='parent.'){b=a}else {if(isNaN(a)&&a.indexOf('-')==-1&&a.indexOf('.')!=-1){b='values.'+a}else {b="values['"+a+"']"}}}}}if(g){b='('+b+g+')'}if(c&&e.useFormat){d=d?','+d:'';if(c.substr(0,5)!='this.'){c='fm.'+c+'('}else {c+='('}}else {return b}return c+b+d+')'},evalTpl:function($){eval($);return $},newLineRe:/\r\n|\r|\n/g,aposRe:/[']/g,intRe:/^\s*(\d+)\s*$/,tagRe:/^([\w-\.\#\$]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?(\s?[\+\-\*\/]\s?[\d\.\+\-\*\/\(\)]+)?$/},0,0,0,0,0,0,[Ext.util,'XTemplateCompiler'],function(){var a=this.prototype;a.fnArgs='out,values,parent,xindex,xcount,xkey';a.callFn='.call(this,'+a.fnArgs+')'});Ext.cmd.derive('Ext.XTemplate',Ext.Template,{isXTemplate:!0,emptyObj:{},fn:null,strict:!1,apply:function(b,a,d,c){return this.applyOut(b,[],a,d,c).join('')},applyOut:function(g,d,f,c,b){var a=this,e;if(!a.fn){e=new Ext.util.XTemplateCompiler({useFormat:a.disableFormats!==!0,definitions:a.definitions,strict:a.strict});a.fn=e.compile(a.html)}c=c||1;b=b||1;if(a.strict){a.fn(d,g,f||a.emptyObj,c,b)}else {try{a.fn(d,g,f||a.emptyObj,c,b)}catch(h){}}return d},compile:function(){return this},statics:{getTpl:function(c,d){var b=c[d],a;if(b&&!b.isTemplate){b=Ext.ClassManager.dynInstantiate('Ext.XTemplate',b);if(c.hasOwnProperty(d)){a=c}else {for(a=c.self.prototype;a&&!a.hasOwnProperty(d);a=a.superclass){}}a[d]=b;b.owner=a}return b||null}}},0,0,0,0,0,0,[Ext,'XTemplate'],0);Ext.cmd.derive('Ext.app.EventDomain',Ext.Base,{statics:{instances:{}},isEventDomain:!0,isInstance:!1,constructor:function(){var a=this;if(!a.isInstance){Ext.app.EventDomain.instances[a.type]=a}a.bus={};a.monitoredClasses=[]},dispatch:function(l,h,m){h=Ext.canonicalEventName(h);var j=this,n=j.bus,b=n[h],c,a,i,g,e,k,d,f;if(!b){return !0}for(c in b){if(b.hasOwnProperty(c)&&j.match(l,c,j.controller)){a=b[c];for(i in a){if(a.hasOwnProperty(i)){g=a[i];if(g.controller.isActive()){e=g.list;k=e.length;for(d=0;d<k;d++){f=e[d];if(f.fire.apply(f,m)===!1){return !1}}}}}}}return !0},listen:function(p,e){var i=this,r=i.bus,t=i.idProperty,n=i.monitoredClasses,s=n.length,o=e.getId(),m=i.type==='component',u=m?e.getRefMap():null,j,f,q,a,d,b,h,l,g,c,k;for(a in p){g=p[a];if(m){a=u[a]||a}if(g){if(t){a=a==='*'?a:a.substring(1)}for(c in g){d=null;b=g[c];h=e;c=Ext.canonicalEventName(c);l=new Ext.util.Event(e,c);if(Ext.isObject(b)){d=b;b=d.fn;h=d.scope||e;delete d.fn;delete d.scope}if(typeof b==='string'){b=h[b]}l.addListener(b,h,d);for(j=0;j<s;++j){k=n[j].hasListeners;if(k){k._incr_(c)}}f=r[c]||(r[c]={});f=f[a]||(f[a]={});q=f[o]||(f[o]={controller:e,list:[]});q.list.push(l)}}}},match:function(c,b){var a=this.idProperty;if(a){return b==='*'||c[a]===b}return !1},monitor:function(a){var c=this,b=a.isInstance?a:a.prototype,d=b.doFireEvent;c.monitoredClasses.push(a);b.doFireEvent=function(e,f){var b=d.apply(this,arguments);if(b!==!1&&!this.isSuspended(e)){b=c.dispatch(this,e,f)}return b}},unlisten:function(f){var k=this.bus,l=f,m=this.monitoredClasses,p=m.length,g,a,b,o,j,n,h,c,d,i,e;if(f.isController){l=f.getId()}for(a in k){a=Ext.canonicalEventName(a);if(k.hasOwnProperty(a)&&(h=k[a])){for(n in h){g=h[n];i=g[l];if(i){b=i.list;if(b){for(c=0,o=b.length;c<o;++c){j=b[c];j.clearListeners();for(d=0;d<p;++d){e=m[d].hasListeners;if(e){e._decr_(j.name)}}}delete g[l]}}}}}},destroy:function(){this.monitoredClasses=this.bus=null;this.callParent()}},1,0,0,0,0,0,[Ext.app,'EventDomain'],0);Ext.cmd.derive('Ext.app.domain.Component',Ext.app.EventDomain,{singleton:!0,type:'component',constructor:function(){this.callParent();this.monitor(Ext.Widget)},dispatch:function(d,f,e){var a=d.lookupController(!1),b,c;while(a){b=a.compDomain;if(b){if(b.dispatch(d,f,e)===!1){return !1}}c=a.getView();a=c?c.lookupController(!0):null}return this.callParent(arguments)},match:function(b,a){return b.is(a)}},1,0,0,0,0,0,[Ext.app.domain,'Component'],0);Ext.cmd.derive('Ext.app.EventBus',Ext.Base,{singleton:!0,constructor:function(){var a=this,b=Ext.app.EventDomain.instances;a.callParent();a.domains=b;a.bus=b.component.bus},control:function(b,a){return this.domains.component.listen(b,a)},listen:function(b,c){var d=this.domains,a;for(a in b){if(b.hasOwnProperty(a)){d[a].listen(b[a],c)}}},unlisten:function(c){var a=Ext.app.EventDomain.instances,b;for(b in a){a[b].unlisten(c)}}},1,0,0,0,0,0,[Ext.app,'EventBus'],0);Ext.cmd.derive('Ext.app.domain.Global',Ext.app.EventDomain,{singleton:!0,type:'global',constructor:function(){var a=this;a.callParent();a.monitor(Ext.GlobalEvents)},listen:function(b,a){this.callParent([{global:b},a])},match:Ext.returnTrue},1,0,0,0,0,0,[Ext.app.domain,'Global'],0);Ext.cmd.derive('Ext.app.BaseController',Ext.Base,{isController:!0,config:{id:undefined,control:null,listen:null,routes:null,before:null},constructor:function(b){var a=this;Ext.apply(a,b);delete a.control;delete a.listen;a.eventbus=Ext.app.EventBus;a.mixins.observable.constructor.call(a,b)},updateId:function(a){this.id=a},applyListen:function(a){if(Ext.isObject(a)){a=Ext.clone(a)}return a},applyControl:function(a){if(Ext.isObject(a)){a=Ext.clone(a)}return a},updateControl:function(a){this.getId();if(a){this.control(a)}},updateListen:function(a){this.getId();if(a){this.listen(a)}},updateRoutes:function(b){if(b){var e=this,f=e.getBefore()||{},g=Ext.app.route.Router,c,a,d;for(c in b){a=b[c];if(Ext.isString(a)){a={action:a}}d=a.action;if(!a.before){a.before=f[d]}g.connect(c,a,e)}}},isActive:function(){return !0},control:function(b,c,f){var e=this,d=f,a;if(Ext.isString(b)){a={};a[b]=c}else {a=b;d=c}e.eventbus.control(a,d||e)},listen:function(b,a){this.eventbus.listen(b,a||this)},destroy:function(){var a=this,b=a.eventbus;Ext.app.route.Router.disconnectAll(a);if(b){b.unlisten(a);a.eventbus=null}a.callParent()},redirectTo:function(a,d){if(a.isModel){a=a.toUrl()}var c=Ext.util.History.getToken()===a,b=!1;if(!c){b=!0;Ext.util.History.add(a)}else {if(d){b=!0;Ext.app.route.Router.onStateChange(a)}}return b}},1,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext.app,'BaseController'],0);Ext.cmd.derive('Ext.app.Util',Ext.Base,{},0,0,0,0,0,0,[Ext.app,'Util'],function(){Ext.apply(Ext.app,{namespaces:{Ext:{}},addNamespaces:function(a){var d=Ext.app.namespaces,b,c;if(!Ext.isArray(a)){a=[a]}for(b=0,c=a.length;b<c;b++){d[a[b]]=!0}},clearNamespaces:function(){Ext.app.namespaces={}},getNamespace:function(d){var c=Ext.apply({},Ext.ClassManager.paths,Ext.app.namespaces),b='',a;for(a in c){if(c.hasOwnProperty(a)&&a.length>b.length&&a+'.'===d.substring(0,a.length+1)){b=a}}return b===''?undefined:b},setupPaths:function(e,b,c){var a=Ext.manifest,d;if(e&&b!==null){a=a&&a.paths;if(!a||b!==undefined){Ext.Loader.setPath(e,b===undefined?'app':b)}}if(c){for(d in c){if(c.hasOwnProperty(d)){Ext.Loader.setPath(d,c[d])}}}}});Ext.getNamespace=Ext.app.getNamespace});Ext.cmd.derive('Ext.util.Filter',Ext.Base,{isFilter:!0,config:{property:null,value:null,filterFn:null,id:null,anyMatch:!1,exactMatch:!1,caseSensitive:!1,disabled:!1,disableOnEmpty:!1,operator:null,root:null,serializer:null,convert:null},scope:null,$configStrict:!1,statics:{createFilterFn:function(a){if(!a){return Ext.returnTrue}return function(f){var e=a.isCollection?a.items:a,g=e.length,d=!0,b,c;for(b=0;d&&b<g;b++){c=e[b];if(!c.getDisabled()){d=c.filter(f)}}return d}},isInvalid:function(a){if(!a.filterFn){if(!a.property){return 'A Filter requires either a property or a filterFn to be set'}if(!a.hasOwnProperty('value')&&!a.operator){return 'A Filter requires either a property and value, or a filterFn to be set'}}return !1}},constructor:function(a){this.initConfig(a)},preventConvert:{'in':1,notin:1},filter:function(e){var a=this,d=a._filterFn||a.getFilterFn(),c=a.getConvert(),b=a._value;a._filterValue=b;a.isDateValue=Ext.isDate(b);if(a.isDateValue){a.dateValue=b.getTime()}if(c&&!a.preventConvert[a.getOperator()]){a._filterValue=c.call(a.scope||a,b)}return d.call(a.scope||a,e)},getId:function(){var a=this._id;if(!a){a=this.getProperty();if(!a){a=Ext.id(null,'ext-filter-')}this._id=a}return a},getFilterFn:function(){var a=this,b=a._filterFn,c;if(!b){c=a.getOperator();if(c){b=a.operatorFns[c]}else {b=a.createRegexFilter()}a._filterFn=b;a.generatedFilterFn=!0}return b},createRegexFilter:function(){var a=this,b=!!a.getAnyMatch(),d=!!a.getExactMatch(),e=a.getValue(),c=Ext.String.createRegex(e,!b,!b&&d,!a.getCaseSensitive());return function(d){var b=a.getPropertyValue(d);return c?c.test(b):b==null}},getPropertyValue:function(a){var b=this._root,c=b==null?a:a[b];return c[this._property]},getState:function(){var c=this.getInitialConfig(),a={},b;for(b in c){if(c.hasOwnProperty(b)){a[b]=c[b]}}delete a.root;a.value=this.getValue();return a},getScope:function(){return this.scope},serialize:function(){var a=this.getState(),b=this.getSerializer();delete a.id;delete a.serializer;if(b){b.call(this,a)}return a},updateOperator:function(){if(this.generatedFilterFn){this._filterFn=null}},updateValue:function(a){if(this.generatedFilterFn){this._filterFn=null}if(this.getDisableOnEmpty()){this.setDisabled(Ext.isEmpty(a))}},updateFilterFn:function(a){delete this.generatedFilterFn},updateDisableOnEmpty:function(b){var a=!1;if(b){a=Ext.isEmpty(this.getValue())}this.setDisabled(a)},privates:{getCandidateValue:function(e,f,d){var b=this,c=b._convert,a=b.getPropertyValue(e);if(c){a=c.call(b.scope||b,a)}else {if(!d){a=Ext.coerce(a,f)}}return a}}},1,0,0,0,0,0,[Ext.util,'Filter'],function(){var b=this.prototype,a=b.operatorFns={'<':function(b){var a=this._filterValue;return this.getCandidateValue(b,a)<a},'<=':function(b){var a=this._filterValue;return this.getCandidateValue(b,a)<=a},'=':function(a){var b=this,c=b._filterValue;a=b.getCandidateValue(a,c);if(b.isDateValue&&a instanceof Date){a=a.getTime();c=b.dateValue}return a==c},'===':function(a){var b=this,c=b._filterValue;a=b.getCandidateValue(a,c,!0);if(b.isDateValue&&a instanceof Date){a=a.getTime();c=b.dateValue}return a===c},'>=':function(b){var a=this._filterValue;return this.getCandidateValue(b,a)>=a},'>':function(b){var a=this._filterValue;return this.getCandidateValue(b,a)>a},'!=':function(a){var b=this,c=b._filterValue;a=b.getCandidateValue(a,c);if(b.isDateValue&&a instanceof Date){a=a.getTime();c=b.dateValue}return a!=c},'!==':function(a){var b=this,c=b._filterValue;a=b.getCandidateValue(a,c,!0);if(b.isDateValue&&a instanceof Date){a=a.getTime();c=b.dateValue}return a!==c},'in':function(b){var a=this._filterValue;return Ext.Array.contains(a,this.getCandidateValue(b,a))},notin:function(b){var a=this._filterValue;return !Ext.Array.contains(a,this.getCandidateValue(b,a))},like:function(b){var a=this._filterValue;return a&&this.getCandidateValue(b,a).toLowerCase().indexOf(a.toLowerCase())>-1},'/=':function(c){var a=this,b=a._filterValue;c=a.getCandidateValue(c,b);if(b!==a.lastRegExpSource){a.lastRegExpSource=b;try{a.regex=new RegExp(b,'i')}catch(d){a.regex=null}}return a.regex?a.regex.test(c):!1}};a['==']=a['='];a.gt=a['>'];a.ge=a['>='];a.lt=a['<'];a.le=a['<='];a.eq=a['='];a.ne=a['!=']});Ext.cmd.derive('Ext.util.Observable',Ext.mixin.Observable,{$applyConfigs:!0},0,0,0,0,0,0,[Ext.util,'Observable'],function(a){var b=Ext.mixin.Observable;a.releaseCapture=b.releaseCapture;a.capture=b.capture;a.captureArgs=b.captureArgs;a.observe=a.observeClass=b.observe});Ext.cmd.derive('Ext.util.AbstractMixedCollection',Ext.Base,{isMixedCollection:!0,generation:0,indexGeneration:0,constructor:function(b,c){var a=this;if(arguments.length===1&&Ext.isObject(b)){a.initialConfig=b;Ext.apply(a,b)}else {a.allowFunctions=b===!0;if(c){a.getKey=c}a.initialConfig={allowFunctions:a.allowFunctions,getKey:a.getKey}}a.items=[];a.map={};a.keys=[];a.indexMap={};a.length=0;a.mixins.observable.constructor.call(a)},destroy:function(){var a=this;a.items=a.map=a.keys=a.indexMap=null;a.callParent()},allowFunctions:!1,add:function(b,d){var c=this.length,a;if(arguments.length===1){a=this.insert(c,b)}else {a=this.insert(c,b,d)}return a},getKey:function(a){return a.id},replace:function(b,c){var a=this,d,e;if(arguments.length==1){c=arguments[0];b=a.getKey(c)}d=a.map[b];if(typeof b=='undefined'||b===null||typeof d=='undefined'){return a.add(b,c)}a.generation++;e=a.indexOfKey(b);a.items[e]=c;a.map[b]=c;if(a.hasListeners.replace){a.fireEvent('replace',b,d,c)}return c},reorder:function(e){var b=this,f=b.items,a=0,h=f.length,c=[],g=[],d;b.suspendEvents();for(d in e){c[e[d]]=f[d]}for(a=0;a<h;a++){if(e[a]==undefined){g.push(f[a])}}for(a=0;a<h;a++){if(c[a]==undefined){c[a]=g.shift()}}b.clear();b.addAll(c);b.resumeEvents()},updateKey:function(b,c){var a=this,e=a.map,d=a.indexOfKey(b),f=a.indexMap,g;if(d>-1){g=e[b];delete e[b];delete f[b];e[c]=g;f[c]=d;a.keys[d]=c;a.indexGeneration=++a.generation}},addAll:function(a){var c=this,b;if(arguments.length>1||Ext.isArray(a)){c.insert(c.length,arguments.length>1?arguments:a)}else {for(b in a){if(a.hasOwnProperty(b)){if(c.allowFunctions||typeof a[b]!='function'){c.add(b,a[b])}}}}},each:function(f,e){var c=Ext.Array.push([],this.items),a=0,d=c.length,b;for(;a<d;a++){b=c[a];if(f.call(e||b,b,a,d)===!1){break}}},eachKey:function(f,e){var b=this.keys,d=this.items,a=0,c=b.length;for(;a<c;a++){f.call(e||window,b[a],d[a],a,c)}},findBy:function(f,c){var d=this.keys,b=this.items,a=0,e=b.length;for(;a<e;a++){if(f.call(c||window,b[a],d[a])){return b[a]}}return null},insert:function(c,b,d){var a;if(Ext.isIterable(b)){a=this.doInsert(c,b,d)}else {if(arguments.length>2){a=this.doInsert(c,[b],[d])}else {a=this.doInsert(c,[b])}a=a[0]}return a},doInsert:function(f,e,d){var b=this,c,i,a,g=e.length,j=g,o=b.hasListeners.add,k,h={},l,n,m;if(d!=null){b.useLinearSearch=!0}else {d=e;e=new Array(g);for(a=0;a<g;a++){e[a]=this.getKey(d[a])}}b.suspendEvents();for(a=0;a<g;a++){c=e[a];i=b.indexOfKey(c);if(i!==-1){if(i<f){f--}b.removeAt(i)}if(c!=null){if(h[c]!=null){l=!0;j--}h[c]=a}}b.resumeEvents();if(l){n=e;m=d;e=new Array(j);d=new Array(j);a=0;for(c in h){e[a]=n[h[c]];d[a]=m[h[c]];a++}g=j}k=f===b.length&&b.indexGeneration===b.generation;Ext.Array.insert(b.items,f,d);Ext.Array.insert(b.keys,f,e);b.length+=g;b.generation++;if(k){b.indexGeneration=b.generation}for(a=0;a<g;a++,f++){c=e[a];if(c!=null){b.map[c]=d[a];if(k){b.indexMap[c]=f}}if(o){b.fireEvent('add',f,d[a],c)}}return d},remove:function(d){var a=this,c,b;if(!a.useLinearSearch&&(c=a.getKey(d))){b=a.indexOfKey(c)}else {b=Ext.Array.indexOf(a.items,d)}return b===-1?!1:a.removeAt(b)},removeAll:function(b){var a=this,c;if(b||a.hasListeners.remove){if(b){for(c=b.length-1;c>=0;--c){a.remove(b[c])}}else {while(a.length){a.removeAt(0)}}}else {a.length=a.items.length=a.keys.length=0;a.map={};a.indexMap={};a.generation++;a.indexGeneration=a.generation}},removeAt:function(b){var a=this,d,c;if(b<a.length&&b>=0){a.length--;d=a.items[b];Ext.Array.erase(a.items,b,1);c=a.keys[b];if(typeof c!='undefined'){delete a.map[c]}Ext.Array.erase(a.keys,b,1);if(a.hasListeners.remove){a.fireEvent('remove',d,c)}a.generation++;return d}return !1},removeRange:function(c,b){var a=this,i,f,d,e,g,h;if(c<a.length&&c>=0){if(!b){b=1}e=Math.min(c+b,a.length);b=e-c;h=e===a.length;g=h&&a.indexGeneration===a.generation;for(d=c;d<e;d++){f=a.keys[d];if(f!=null){delete a.map[f];if(g){delete a.indexMap[f]}}}i=a.items[d-1];a.length-=b;a.generation++;if(g){a.indexGeneration=a.generation}if(h){a.items.length=a.keys.length=a.length}else {a.items.splice(c,b);a.keys.splice(c,b)}return i}return !1},removeAtKey:function(d){var b=this,c=b.keys,a;if(d==null){for(a=c.length-1;a>=0;a--){if(c[a]==null){b.removeAt(a)}}}else {return b.removeAt(b.indexOfKey(d))}},getCount:function(){return this.length},indexOf:function(b){var a=this,c;if(b!=null){if(!a.useLinearSearch&&(c=a.getKey(b))){return this.indexOfKey(c)}return Ext.Array.indexOf(a.items,b)}return -1},indexOfKey:function(a){if(!this.map.hasOwnProperty(a)){return -1}if(this.indexGeneration!==this.generation){this.rebuildIndexMap()}return this.indexMap[a]},rebuildIndexMap:function(){var b=this,d=b.indexMap={},c=b.keys,e=c.length,a;for(a=0;a<e;a++){d[c[a]]=a}b.indexGeneration=b.generation},get:function(a){var b=this,d=b.map[a],c=d!==undefined?d:typeof a=='number'?b.items[a]:undefined;return typeof c!='function'||b.allowFunctions?c:null},getAt:function(a){return this.items[a]},getByKey:function(a){return this.map[a]},contains:function(a){var c=this,b;if(a!=null){if(!c.useLinearSearch&&(b=c.getKey(a))){return this.map[b]!=null}return Ext.Array.indexOf(this.items,a)!==-1}return !1},containsKey:function(a){return this.map.hasOwnProperty(a)},clear:function(){var a=this;if(a.generation){a.length=0;a.items=[];a.keys=[];a.map={};a.indexMap={};a.generation++;a.indexGeneration=a.generation}if(a.hasListeners.clear){a.fireEvent('clear')}},first:function(){return this.items[0]},last:function(){return this.items[this.length-1]},sum:function(f,h,c,a){var d=this.extractValues(f,h),g=d.length,e=0,b;c=c||0;a=a||a===0?a:g-1;for(b=c;b<=a;b++){e+=d[b]}return e},collect:function(h,j,g){var e=this.extractValues(h,j),i=e.length,f={},d=[],a,c,b;for(b=0;b<i;b++){a=e[b];c=String(a);if((g||!Ext.isEmpty(a))&&!f[c]){f[c]=!0;d.push(a)}}return d},extractValues:function(c,b){var a=this.items;if(b){a=Ext.Array.pluck(a,b)}return Ext.Array.pluck(a,c)},hasRange:function(b,a){return a<this.length},getRange:function(b,a){var h=this,f=h.items,c=[],d=f.length,g,e;if(d<1){return c}if(b>a){e=!0;g=b;b=a;a=g}if(b<0){b=0}if(a==null||a>=d){a=d-1}c=f.slice(b,a+1);if(e&&c.length){c.reverse()}return c},filter:function(a,e,d,c){var b=[];if(Ext.isString(a)){b.push(new Ext.util.Filter({property:a,value:e,anyMatch:d,caseSensitive:c}))}else {if(Ext.isArray(a)||a instanceof Ext.util.Filter){b=b.concat(a)}}return this.filterBy(Ext.util.Filter.createFilterFn(b))},filterBy:function(h,g){var a=this,c=new a.self(a.initialConfig),e=a.keys,d=a.items,f=d.length,b;c.getKey=a.getKey;for(b=0;b<f;b++){if(h.call(g||a,d[b],e[b])){c.add(e[b],d[b])}}c.useLinearSearch=a.useLinearSearch;return c},findIndex:function(d,a,e,c,b){if(Ext.isEmpty(a,!1)){return -1}a=this.createValueMatcher(a,c,b);return this.findIndexBy(function(f){return f&&a.test(f[d])},null,e)},findIndexBy:function(h,d,e){var b=this,f=b.keys,c=b.items,a=e||0,g=c.length;for(;a<g;a++){if(h.call(d||b,c[a],f[a])){return a}}return -1},createValueMatcher:function(a,e,c,d){if(!a.exec){var b=Ext.String.escapeRegex;a=String(a);if(e===!0){a=b(a)}else {a='^'+b(a);if(d===!0){a+='$'}}a=new RegExp(a,c?'':'i')}return a},clone:function(){var a=this,b=new a.self(a.initialConfig);b.add(a.keys,a.items);b.useLinearSearch=a.useLinearSearch;return b}},1,0,0,0,0,[['observable',Ext.util.Observable]],[Ext.util,'AbstractMixedCollection'],0);Ext.cmd.derive('Ext.util.Sorter',Ext.Base,{isSorter:!0,config:{property:null,sorterFn:null,root:null,transform:null,direction:'ASC',id:undefined},statics:{createComparator:function(b,a){a=a||0;return function(f,g){var e=b.isCollection?b.items:b,h=e.length,d,c;for(c=0;c<h;++c){d=e[c].sort(f,g);if(d){return d}}return a&&a(f,g)}}},multiplier:1,constructor:function(a){this.initConfig(a)},getId:function(){var a=this._id;if(!a){a=this.getProperty();if(!a){a=Ext.id(null,'ext-sorter-')}this._id=a}return a},sort:function(a,b){return this.multiplier*this.sortFn(a,b)},sortFn:function(d,e){var g=this,c=g._transform,f=g._root,h=g._property,a,b;if(f){d=d[f];e=e[f]}a=d[h];b=e[h];if(c){a=c(a);b=c(b)}return a>b?1:a<b?-1:0},applyDirection:function(a){return a?a:'ASC'},updateDirection:function(a){this.multiplier=a.toUpperCase()==='DESC'?-1:1},updateProperty:function(a){if(a){delete this.sortFn}},updateSorterFn:function(a){this.sortFn=a},toggle:function(){this.setDirection(Ext.String.toggle(this.getDirection(),'ASC','DESC'))},getState:function(){var a=this,b={root:a.getRoot(),property:a.getProperty(),direction:a.getDirection()};if(a._id){b.id=a._id}return b},serialize:function(){return {property:this.getProperty(),direction:this.getDirection()}}},1,0,0,0,0,0,[Ext.util,'Sorter'],0);Ext.cmd.derive('Ext.util.Sortable',Ext.Base,{isSortable:!0,$configPrefixed:!1,$configStrict:!1,config:{sorters:null},defaultSortDirection:'ASC',multiSortLimit:3,statics:{createComparator:function(a){return a&&a.length?function(d,e){var c=a[0].sort(d,e),f=a.length,b=1;for(;!c&&b<f;b++){c=a[b].sort.call(a[b],d,e)}return c}:function(){return 0}}},applySorters:function(b){var c=this,a=c.getSorters()||new Ext.util.MixedCollection(!1,Ext.returnId);if(b){a.addAll(c.decodeSorters(b))}return a},sort:function(a,f,e,h){var b=this,d,g,c=b.getSorters();if(!c){b.setSorters(null);c=b.getSorters()}if(Ext.isArray(a)){h=e;e=f}else {if(Ext.isObject(a)){a=[a];h=e;e=f}else {if(Ext.isString(a)){d=c.get(a);if(!d){d={property:a,direction:f}}else {if(f==null){d.toggle()}else {d.setDirection(f)}}a=[d]}}}if(a&&a.length){a=b.decodeSorters(a);switch(e){case 'multi':c.insert(0,a[0]);g=c.getCount()-b.multiSortLimit;if(g>0){c.removeRange(b.multiSortLimit,g)};break;case 'prepend':c.insert(0,a);break;case 'append':c.addAll(a);break;case undefined:case null:case 'replace':c.clear();c.addAll(a);break;default:}}if(h!==!1){b.fireEvent('beforesort',b,a);b.onBeforeSort(a);if(b.getSorterCount()){b.doSort(b.generateComparator())}}return a},getSorterCount:function(){return this.getSorters().items.length},generateComparator:function(){var a=this.getSorters().getRange();return a.length?this.createComparator(a):this.emptyComparator},emptyComparator:function(){return 0},onBeforeSort:Ext.emptyFn,decodeSorters:function(b){if(!Ext.isArray(b)){if(b===undefined){b=[]}else {b=[b]}}var g=b.length,f=Ext.util.Sorter,e=this.getModel?this.getModel():this.model,d,a,c;for(c=0;c<g;c++){a=b[c];if(!(a instanceof f)){if(Ext.isString(a)){a={property:a}}Ext.applyIf(a,{root:this.sortRoot,direction:'ASC'});if(a.fn){a.sorterFn=a.fn}if(typeof a=='function'){a={sorterFn:a}}if(e&&!a.transform){d=e.getField(a.property);a.transform=d&&d.sortType!==Ext.identityFn?d.sortType:undefined}b[c]=new Ext.util.Sorter(a)}}return b},getFirstSorter:function(){var c=this.getSorters().items,d=c.length,b=0,a;for(;b<d;++b){a=c[b];if(!a.isGrouper){return a}}return null}},0,0,0,0,0,0,[Ext.util,'Sortable'],function(){this.prototype.createComparator=this.createComparator});Ext.cmd.derive('Ext.util.MixedCollection',Ext.util.AbstractMixedCollection,{constructor:function(){this.initConfig();Ext.util.AbstractMixedCollection.prototype.constructor.apply(this,arguments)},doSort:function(a){this.sortBy(a)},_sort:function(h,j,g){var b=this,a,d,k=String(j).toUpperCase()=='DESC'?-1:1,c=[],i=b.keys,f=b.items,e;g=g||function(a,b){return a-b};for(a=0,d=f.length;a<d;a++){c[c.length]={key:i[a],value:f[a],index:a}}Ext.Array.sort(c,function(a,b){return g(a[h],b[h])*k||(a.index<b.index?-1:1)});for(a=0,d=c.length;a<d;a++){e=c[a];f[a]=e.value;i[a]=e.key;b.indexMap[e.key]=a}b.generation++;b.indexGeneration=b.generation;b.fireEvent('sort',b)},sortBy:function(h){var b=this,c=b.items,d,g=b.keys,e,f=c.length,a;for(a=0;a<f;a++){c[a].$extCollectionIndex=a}Ext.Array.sort(c,function(a,b){return h(a,b)||(a.$extCollectionIndex<b.$extCollectionIndex?-1:1)});for(a=0;a<f;a++){d=c[a];e=b.getKey(d);g[a]=e;b.indexMap[e]=a;delete d.$extCollectionIndex}b.generation++;b.indexGeneration=b.generation;b.fireEvent('sort',b,c,g)},findInsertionIndex:function(h,d){var g=this,f=g.items,b=0,e=f.length-1,a,c;if(!d){d=g.generateComparator()}while(b<=e){a=b+e>>1;c=d(h,f[a]);if(c>=0){b=a+1}else {if(c<0){e=a-1}}}return b},reorder:function(a){Ext.util.AbstractMixedCollection.prototype.reorder.call(this,a);this.fireEvent('sort',this)},sortByKey:function(a,b){this._sort('key',a,b||function(e,f){var c=String(e).toUpperCase(),d=String(f).toUpperCase();return c>d?1:c<d?-1:0})}},1,0,0,0,0,[['sortable',Ext.util.Sortable]],[Ext.util,'MixedCollection'],0);Ext.cmd.derive('Ext.util.CollectionKey',Ext.Base,{isCollectionKey:!0,observerPriority:-200,config:{collection:null,keyFn:null,property:null,rootProperty:null,unique:!0},generation:0,map:null,mapRebuilds:0,constructor:function(a){this.initConfig(a)},get:function(a){var b=this.map||this.getMap();return b[a]||null},clear:function(){this.map=null},getRootProperty:function(){var b=this,a=(arguments.callee.$previous||Ext.Base.prototype.getRootProperty).call(this);return a!==null?a:b.getCollection().getRootProperty()},indexOf:function(i,b){var j=this.map||this.getMap(),c=j[i],e=this.getCollection(),h=e.length,d,a,f,g;if(!c){return -1}if(b===undefined){b=-1}if(c instanceof Array){f=c;a=h;for(g=f.length;g-->0;){d=e.indexOf(f[g]);if(d<a&&d>b){a=d}}if(a===h){return -1}}else {a=e.indexOf(c)}return a>b?a:-1},updateKey:function(e,d){var f=this,c=f.map,a,b;if(c){a=c[d];if(a instanceof Array){b=Ext.Array.indexOf(a,e);if(b>=0){if(a.length>2){a.splice(b,1)}else {c[d]=a[1-b]}}}else {if(a){delete c[d]}}f.add([e])}},onCollectionAdd:function(b,a){if(this.map){this.add(a.items)}},onCollectionItemChange:function(a,b){this.map=null},onCollectionRefresh:function(){this.map=null},onCollectionRemove:function(g,h){var a=this,f=a.map,d=h.items,c=d.length,b,i,e;if(f){if(a.getUnique()&&c<g.length/2){for(b=0;b<c;++b){e=a.getKey(i=d[b]);delete f[e]}}else {a.map=null}}},add:function(i){var f=this,c=f.map,b,d,e,a,g,h;g=i.length;h=f.getUnique();for(d=0;d<g;++d){a=f.getKey(e=i[d]);if(h||!(a in c)){c[a]=e}else {if(!((b=c[a]) instanceof Array)){c[a]=b=[b]}b.push(e)}}},applyKeyFn:function(a){if(Ext.isString(a)){this.getKey=function(b){return b[a]()}}else {this.getKey=a}},updateProperty:function(b){var a=this.getRootProperty();this.getKey=function(c){return (a?c[a]:c)[b]}},getMap:function(){var a=this,b=a.map;if(!b){a.map=b={};a.keysByItemKey={};++a.mapRebuilds;a.add(a.getCollection().items)}return b},updateCollection:function(a){a.addObserver(this)},clone:function(){return new Ext.util.CollectionKey(this.getCurrentConfig())}},1,0,0,0,0,[[Ext.mixin.Identifiable.prototype.mixinId||Ext.mixin.Identifiable.$className,Ext.mixin.Identifiable]],[Ext.util,'CollectionKey'],0);Ext.cmd.derive('Ext.util.Grouper',Ext.util.Sorter,{isGrouper:!0,config:{groupFn:null,sortProperty:null},constructor:function(a){Ext.util.Sorter.prototype.constructor.apply(this,arguments)},getGroupString:function(b){var a=this._groupFn(b);return a!=null?String(a):''},sortFn:function(d,e){var c=this,a=c._groupFn(d),b=c._groupFn(e),g=c._sortProperty,i=c._root,h=c._sorterFn,f=c._transform;if(a===b){return 0}if(g||h){if(h){return h.call(this,d,e)}if(i){d=d[i];e=e[i]}a=d[g];b=e[g];if(f){a=f(a);b=f(b)}}return a>b?1:a<b?-1:0},standardGroupFn:function(a){var b=this._root;return (b?a[b]:a)[this._property]},updateSorterFn:function(){},updateProperty:function(){if(!this.getGroupFn()){this.setGroupFn(this.standardGroupFn)}}},1,0,0,0,0,0,[Ext.util,'Grouper'],0);Ext.cmd.derive('Ext.util.Collection',Ext.Base,{isCollection:!0,config:{autoFilter:!0,autoSort:!0,autoGroup:!0,decoder:null,extraKeys:null,filters:null,grouper:null,groups:null,rootProperty:null,sorters:null,multiSortLimit:3,defaultSortDirection:'ASC',source:null,trackGroups:!0},generation:0,indices:null,indexRebuilds:0,updating:0,grouped:!1,sorted:!1,filtered:!1,$endUpdatePriority:1001,manageSorters:!0,constructor:function(b){var a=this;a.items=[];a.map={};a.length=0;if(b&&b.keyFn){a.getKey=b.keyFn}a.mixins.observable.constructor.call(a,b)},destroy:function(){var a=this,b=a._filters,c=a._sorters,d=a._groups;if(b){b.destroy();a._filters=null}if(c){a.grouped=a.sorted=!1;a.setSorters(null);if(a.manageSorters){c.destroy()}}if(d){d.destroy();a._groups=null}a.setSource(null);a.observers=a.items=a.map=null;a.callParent()},add:function(d){var b=this,a=b.decodeItems(arguments,0),c=a;if(a.length){b.splice(b.length,0,a);c=a.length===1?a[0]:a}return c},replaceAll:function(){var b=this,c,a;a=b.decodeItems(arguments,0);c=a;if(a.length){b.splice(0,b.length,a);c=a.length===1?a[0]:a}else {b.removeAll()}return c},aggregate:function(d,c,e,g,f){var a=this,b=Ext.Array.slice(arguments);b.unshift(a.items);return a.aggregateItems.apply(a,b)},aggregateByGroup:function(b,a,d){var c=this.getGroups();return this.aggregateGroups(c,b,a,d)},aggregateItems:function(a,m,b,c,d,p){var e=this,o=Ext.Number.clipIndices(a.length,[c,d]),k=c!==0&&d!==a.length,f,g,n,j,i,h,l;c=o[0];d=o[1];if(!Ext.isFunction(b)){b=e._aggregators[b];return b.call(e,a,c,d,m,e.getRootProperty())}j=e.getRootProperty();h=new Array(n);l=k?new Array(n):a;for(f=c,g=0;f<d;++f,g++){if(k){l[g]=i=a[f]}h[g]=(j?i[j]:i)[m]}return b.call(p||e,a,h,0)},aggregateGroups:function(i,e,c,j){var f=i.items,k=f.length,h=!Ext.isFunction(c),g={},b,a,d;for(b=0;b<k;++b){a=f[b];if(!h){d=this.aggregateItems(a.items,e,c,null,null,j)}else {d=a[c](e)}g[a.getGroupKey()]=d}return g},beginUpdate:function(){if(!this.updating++){this.notify('beginupdate')}},clear:function(){var a=this,c=a.generation,e=c?a.items:[],b,d;if(c){a.items=[];a.length=0;a.map={};a.indices={};a.generation++;b=a.getExtraKeys();if(b){for(d in b){b[d].clear()}}}return e},clone:function(){var a=this,b=new a.self(a.initialConfig);b.add(a.items);return b},collect:function(i,e,h){var d=this.items,j=d.length,f={},g=[],b,c,a;for(b=0;b<j;++b){a=d[b];a=(e?a[e]:a)[i];c=String(a);if((h||!Ext.isEmpty(a))&&!f[c]){f[c]=1;g.push(a)}}return g},contains:function(a){var c=!1,b;if(a!=null){b=this.getKey(a);c=this.map[b]===a}return c},containsKey:function(a){return a in this.map},createFiltered:function(a,j,n,l,m){var d=this,k=new d.self(d.initialConfig),h=d.getRootProperty(),g=d.items,e,b,c,i,f;if(Ext.isFunction(a)){i=a;f=j}else {if(Ext.isString(a)){c=[new Ext.util.Filter({property:a,value:j,root:h,anyMatch:n,caseSensitive:l,exactMatch:m})]}else {if(a instanceof Ext.util.Filter){c=[a];a.setRoot(h)}else {if(Ext.isArray(a)){c=a.slice(0);for(b=0,e=c.length;b<e;++b){c[b].setRoot(h)}}}}i=Ext.util.Filter.createFilterFn(c)}f=f||d;for(b=0,e=g.length;b<e;b++){if(i.call(f,g[b])){k.add(g[b])}}return k},filterBy:function(b,a){return this.createFiltered(b,a)},each:function(f,c){var b=this.items,d=b.length,a,e;if(d){c=c||this;b=b.slice(0);for(a=0;a<d;a++){e=f.call(c,b[a],a,d);if(e===!1){break}}}return e},eachKey:function(i,c){var f=this,b=f.items,d=b.length,a,g,h,e;if(d){c=c||f;b=b.slice(0);for(a=0;a<d;a++){h=f.getKey(g=b[a]);e=i.call(c,h,g,a,d);if(e===!1){break}}}return e},endUpdate:function(){if(!--this.updating){this.notify('endupdate')}},find:function(f,a,h,d,e,c){if(Ext.isEmpty(a,!1)){return null}var g=Ext.String.createRegex(a,d,e,c),b=this.getRootProperty();return this.findBy(function(i){return i&&g.test((b?i[b]:i)[f])},null,h)},findBy:function(i,c,g){var d=this,b=d.items,h=b.length,a,e,f;c=c||d;for(a=g||0;a<h;a++){f=d.getKey(e=b[a]);if(i.call(c,e,f)){return b[a]}}return null},findIndex:function(e,g,f,c,d,b){var a=this.find(e,g,f,c,d,b);return a?this.indexOf(a):-1},findIndexBy:function(d,b,c){var a=this.findBy(d,b,c);return a?this.indexOf(a):-1},first:function(b){var a=b?this.getGroups():undefined;return a?this.aggregateGroups(a,null,'first'):this.items[0]},last:function(b){var a=b?this.getGroups():undefined;return a?this.aggregateGroups(a,null,'last'):this.items[this.length-1]},get:function(a){return this.map[a]},getAt:function(a){return this.items[a]},getByKey:function(a){return this.map[a]},getCount:function(){return this.length},getKey:function(b){var a=b.id;return a===0||a?a:(a=b._id)===0||a?a:b.getId()},getRange:function(d,e){var c=this.items,b=c.length,a;if(!b){a=[]}else {a=Ext.Number.clipIndices(b,[d,e]);a=c.slice(a[0],a[1])}return a},getValues:function(h,f,i,c){var d=this.items,e=Ext.Number.clipIndices(d.length,[i,c]),g=[],b,a;for(b=e[0],c=e[1];b<c;++b){a=d[b];a=(f?a[f]:a)[h];g.push(a)}return g},indexOf:function(a){if(!a){return -1}var b=this.getKey(a);return this.indexOfKey(b)},indexOfKey:function(c){var b=this,a=b.indices;if(c in b.map){if(!a){a=b.getIndices()}return a[c]}return -1},insert:function(d,e){var c=this,a=c.decodeItems(arguments,1),b=a;if(a.length){c.splice(d,0,a);b=a.length===1?a[0]:a}return b},itemChanged:function(c,p,f,u){var a=this,j=f===0||!!f,s=a.filtered&&a.getAutoFilter(),n=!1,h=0,i=a.items,t=a.length-1,v=a.sorted&&t>0&&a.getAutoSort(),r=a.getSource(),q=0,g=!1,o=!1,e,l,k,m,b,d;if(r&&!r.updating){r.itemChanged(c,p,f,u)}else {l=a.getKey(c);if(s){b=a.indexOfKey(j?f:l);o=b<0;g=a.isItemFiltered(c);n=o!==g}if(n){if(g){q=[c];d=-1}else {m=[c];d=a.length}}else {if(v&&!g){if(!s){b=a.indexOfKey(j?f:l)}k=a.getSortFn();if(b!==-1){if(b&&k(i[b-1],i[b])>0){h=-1;d=Ext.Array.binarySearch(i,c,0,b,k)}else {if(b<t&&k(i[b],i[b+1])>0){h=1;d=Ext.Array.binarySearch(i,c,b+1,k)}}if(h){m=[c]}}}}e={item:c,key:l,index:d,filterChanged:n,keyChanged:j,indexChanged:!!h,filtered:g,oldIndex:b,newIndex:d,wasFiltered:o,meta:u};if(j){e.oldKey=f}if(p){e.modified=p}a.beginUpdate();a.notify('beforeitemchange',[e]);if(j){a.updateKey(c,f)}if(m||q){a.splice(d,q,m)}if(h>0){e.newIndex--}else {if(h<0){e.oldIndex++}}a.notify(g?'filtereditemchange':'itemchange',[e]);a.endUpdate()}},remove:function(d){var a=this,c=a.decodeRemoveItems(arguments,0),b=a.length;a.splice(0,c);return b-a.length},removeAll:function(){var a=this,b=a.length;if(a.generation&&b){a.splice(0,b)}return a},removeAt:function(j,f){var a=this,e=a.length,i=Ext.Number,g=i.clipIndices(e,[j,f===undefined?1:f],i.Clip.COUNT),c=g[0],d=g[1]-c,h=d===1&&a.getAt(c),b;a.splice(c,d);b=a.length-e;return h&&b?h:b},removeByKey:function(b){var a=this.getByKey(b);if(!a||!this.remove(a)){return !1}return a},replace:function(a){var b=this.indexOf(a);if(b===-1){this.add(a)}else {this.insert(b,a)}},splice:function(I,E,L){var b=this,D=b.sorted&&b.getAutoSort(),F=b.map,o=b.items,r=b.length,n=E instanceof Array?b.decodeRemoveItems(E):null,G=!n,K=Ext.Number,J=K.clipIndices(r,[I,G?E:0],K.Clip.COUNT),m=J[0],z=J[1],w=z-m,p=b.decodeItems(arguments,2),h=p?p.length:0,c,A,C,d=m,k=b.indices||(h||n?b.getIndices():null),e=null,i=w?[m]:null,l=null,t=b.getSource(),j,B,y,a,u,g,v,f,s,q,x,H;if(t&&!t.updating){if(G){n=[];for(a=0;a<w;++a){n.push(o[m+a])}}if(m<r){a=t.indexOf(o[m])}else {a=t.length}b.requestedIndex=I;t.splice(a,n,p);delete b.requestedIndex;return b}if(h){c=p;l=[];A={};if(D){H=b.getSorters();if(h>1){if(!c.$cloned){p=c=c.slice(0)}b.sortData(c)}}for(a=0;a<h;++a){f=b.getKey(u=p[a]);if((v=A[f])!==undefined){(x||(x={}))[v]=1}else {g=k[f];if(g<m||z<=g){(i||(i=[])).push(g)}}A[f]=a;l.push(f)}if(x){s=l;c=[];l=[];c.$cloned=!0;for(a=0;a<h;++a){if(!x[a]){u=p[a];c.push(u);l.push(s[a])}}h=c.length}e={items:c,keys:l}}for(a=n?n.length:0;a-->0;){f=b.getKey(n[a]);if((g=k[f])!==undefined){(i||(i=[])).push(g)}}if(!e&&!i){return b}b.beginUpdate();if(i){j=null;y=[];C={};if(i.length>1){i.sort(Ext.Array.numericSortFn)}for(a=0,q=i.length;a<q;++a){f=b.getKey(u=o[g=i[a]]);if(!(f in F)){continue}delete F[f];if(!j||g>j.at+B.length){y.push(j={at:g,items:B=[],keys:s=[],map:C,next:j,replacement:e});if(e){e.replaced=j}}B.push(C[f]=u);s.push(f);if(g<d-1){--d}if(w>1&&g===m){--w;i[a--]=++m}}if(e){e.at=d}for(v=y.length;v-->0;){j=y[v];a=j.at;q=j.items.length;if(a+q<r){b.indices=k=null}b.length=r-=q;o.splice(a,q);if(k){s=j.keys;for(a=0;a<q;++a){delete k[s[a]]}}++b.generation;b.notify('remove',[j])}}if(e){if(D&&h>1&&r){b.spliceMerge(c,l)}else {if(D){if(h>1){d=0;b.indices=k=null}else {d=H.findInsertionIndex(e.items[0],o,b.getSortFn())}}if(d===r){z=d;for(a=c.length-1;a>=0;--a){o[z+a]=c[a]}k=b.indices;if(k){for(a=0;a<h;++a){k[l[a]]=d+a}}}else {b.indices=null;Ext.Array.insert(o,d,c)}for(a=0;a<h;++a){F[l[a]]=c[a]}b.length+=h;e.at=d;e.atItem=d===0?null:o[d-1];++b.generation;b.notify('add',[e])}}b.endUpdate();return b},update:function(c,b){var a=this;a.beginUpdate();try{return c.call(b||a,a)}catch(d){throw d}finally{a.endUpdate()}},updateKey:function(d,b){var a=this,f=a.map,e=a.indices,g=a.getSource(),c;if(g&&!g.updating){g.updateKey(d,b)}else {if((c=a.getKey(d))!==b){if(f[b]===d&&!(c in f)){delete f[b];a.updating++;a.generation++;f[c]=d;if(e){e[c]=e[b];delete e[b]}a.notify('updatekey',[{item:d,newKey:c,oldKey:b}]);a.updating--}}}},findInsertIndex:function(f){var d=this.getSource(),e=d.items,b=d.indexOf(f)-1,c,a;while(b>-1){c=e[b];a=this.indexOf(c);if(a>-1){return a+1}--b}return 0},onCollectionAdd:function(l,i){var a=this,j=i.atItem,d=i.items,h=a.requestedIndex,c,b,e,f,g,k;if(!a.sorted){if(h!==undefined){b=h}else {if(j){b=a.indexOf(j);if(b===-1){b=a.findInsertIndex(d[0])}else {++b}}else {b=0}}}if(a.getAutoFilter()&&a.filtered){for(f=0,k=d.length;f<k;++f){g=d[f];if(a.isItemFiltered(g)){if(!e){e=d.slice(0,f)}if(!c){c=[]}c.push(g)}else {if(e){e.push(g)}}}}a.splice(b<0?a.length:b,0,e||d);if(c){a.notify('filteradd',[c])}},onCollectionBeforeItemChange:function(b,a){this.onCollectionUpdateKey=null},onCollectionBeginUpdate:function(){this.beginUpdate()},onCollectionEndUpdate:function(){this.endUpdate()},onCollectionItemChange:function(b,a){delete this.onCollectionUpdateKey;this.itemChanged(a.item,a.modified,a.oldKey,a.meta)},onCollectionFilteredItemChange:null,onCollectionRefresh:function(i){var a=this,h={},e={},c,g,b,d,f;b=i.items;b=a.filtered&&a.getAutoFilter()?Ext.Array.filter(b,a.getFilterFn()):b.slice(0);if(a.sorted){a.sortData(b)}a.items=b;a.length=f=b.length;a.map=h;a.indices=e;for(c=0;c<f;++c){d=a.getKey(g=b[c]);h[d]=g;e[d]=c}a.notify('refresh')},onCollectionRemove:function(b,a){this.splice(0,a.items)},onCollectionUpdateKey:function(b,a){this.updateKey(a.item,a.oldKey)},_aggregators:{average:function(e,a,b,d,f){var c=b-a;return c&&this._aggregators.sum.call(this,e,a,b,d,f)/c},bounds:function(h,g,i,f,e){for(var a,b,c,d=g;d<i;++d){a=h[d];a=(e?a[e]:a)[f];if(!(a<b)){b=a}if(!(a>c)){c=a}}return [c,b]},count:function(a){return a.length},extremes:function(k,j,l,i,f){var e=null,d=null,c,b,g,h,a;for(c=j;c<l;++c){b=k[c];a=(f?b[f]:b)[i];if(!(a<g)){g=a;e=b}if(!(a>h)){h=a;d=b}}return [d,e]},max:function(c,b,e,a,d){var f=this._aggregators.bounds.call(this,c,b,e,a,d);return f[1]},maxItem:function(c,b,e,a,d){var f=this._aggregators.extremes.call(this,c,b,e,a,d);return f[1]},min:function(c,b,e,a,d){var f=this._aggregators.bounds.call(this,c,b,e,a,d);return f[0]},minItem:function(c,b,e,a,d){var f=this._aggregators.extremes.call(this,c,b,e,a,d);return f[0]},sum:function(g,f,h,e,c){for(var a,d=0,b=f;b<h;++b){a=g[b];a=(c?a[c]:a)[e];d+=a}return d}},_eventToMethodMap:{add:'onCollectionAdd',beforeitemchange:'onCollectionBeforeItemChange',beginupdate:'onCollectionBeginUpdate',endupdate:'onCollectionEndUpdate',itemchange:'onCollectionItemChange',filtereditemchange:'onCollectionFilteredItemChange',refresh:'onCollectionRefresh',remove:'onCollectionRemove',beforesort:'beforeCollectionSort',sort:'onCollectionSort',filter:'onCollectionFilter',filteradd:'onCollectionFilterAdd',updatekey:'onCollectionUpdateKey'},addObserver:function(c){var b=this,a=b.observers;if(!a){b.observers=a=[]}a.push(c);if(a.length>1){Ext.Array.sort(a,b.prioritySortFn)}},prioritySortFn:function(a,b){var c=a.observerPriority||0,d=b.observerPriority||0;return c-d},applyExtraKeys:function(e,g){var d=this,f=g||{},b,c,a;for(c in e){a=e[c];if(!a.isCollectionKey){b={collection:d};if(Ext.isString(a)){b.property=a}else {b=Ext.apply(b,a)}a=new Ext.util.CollectionKey(b)}else {a.setCollection(d)}f[c]=d[c]=a;a.name=c}return f},applyGrouper:function(a){if(a){a=this.getSorters().decodeSorter(a,'Ext.util.Grouper')}return a},decodeItems:function(e,d){var g=this,a=d===undefined?e:e[d],b,f,c;if(!a||!a.$cloned){b=e.length>d+1||!Ext.isIterable(a);if(b){a=Ext.Array.slice(e,d);if(a.length===1&&a[0]===undefined){a.length=0}}f=g.getDecoder();if(f){if(!b){a=a.slice(0);b=!0}for(c=a.length;c-->0;){if((a[c]=f.call(g,a[c]))===!1){a.splice(c,1)}}}if(b){a.$cloned=!0}}return a},getIndices:function(){var a=this,c=a.indices,d=a.items,f=d.length,b,e;if(!c){a.indices=c={};++a.indexRebuilds;for(b=0;b<f;++b){e=a.getKey(d[b]);c[e]=b}}return c},notify:function(d,b){var a=this,e=a.observers,g=a._eventToMethodMap[d],j=0,c,i,f,h;b=b||[];if(e&&g){for(c=0,i=e.length;c<i;++c){f=(h=e[c])[g];if(f){if(!j++){b.unshift(a)}f.apply(h,b)}}}if(!a.hasListeners){return}if(a.hasListeners[d]){if(!j){b.unshift(a)}a.fireEventArgs(d,b)}},getFilterFn:function(){return this.getFilters().getFilterFn()},getFilters:function(b){var a=this._filters;if(!a&&b!==!1){a=new Ext.util.FilterCollection();this.setFilters(a)}return a},isItemFiltered:function(a){return !this.getFilters().filterFn(a)},onFilterChange:function(f){var a=this,b=a.getSource(),c,d,e;if(!b){c=a.getExtraKeys();if(c){d={};for(e in c){d[e]=c[e].clone(a)}}b=new Ext.util.Collection({keyFn:a.getKey,extraKeys:d,rootProperty:a.getRootProperty()});if(a.length){b.add(a.items)}a.setSource(b);a.autoSource=b}else {if(b.length||a.length){a.onCollectionRefresh(b)}}a.notify('filter')},applyFilters:function(b,a){if(!b||b.isFilterCollection){return b}if(b){if(!a){a=this.getFilters()}a.splice(0,a.length,b)}return a},updateFilters:function(b,c){var a=this;if(c){c.un('endupdate','onEndUpdateFilters',a)}if(b){b.on({endupdate:'onEndUpdateFilters',scope:a,priority:a.$endUpdatePriority});b.$filterable=a}a.onEndUpdateFilters(b)},onEndUpdateFilters:function(a){var b=this,d=b.filtered,c=!!a&&a.length>0;if(d||c){b.filtered=c;b.onFilterChange(a)}},getSortFn:function(){return this._sortFn||this.createSortFn()},getSorters:function(b){var a=this._sorters;if(!a&&b!==!1){a=new Ext.util.SorterCollection();this.setSorters(a)}return a},onSortChange:function(){if(this.sorted){this.sortItems()}},sort:function(c,b,d){var a=this.getSorters();a.addSort.apply(a,arguments);return this},sortData:function(a){Ext.Array.sort(a,this.getSortFn());return a},sortItems:function(b){var a=this;if(a.sorted){b=a.getSortFn()}a.indices=null;a.notify('beforesort',[a.getSorters(!1)]);if(a.length){Ext.Array.sort(a.items,b)}a.notify('sort')},sortBy:function(a){return this.sortItems(a)},findInsertionIndex:function(c,b,a){if(!b){b=this.items}if(!a){a=this.getSortFn()}return Ext.Array.binarySearch(b,c,a)},applySorters:function(b,a){if(!b||b.isSorterCollection){return b}if(b){if(!a){a=this.getSorters()}a.splice(0,a.length,b)}return a},createSortFn:function(){var d=this,b=d.getGrouper(),c=d.getSorters(!1),a=c?c.getSortFn():null;if(!b){return a}return function(d,e){var c=b.sort(d,e);if(!c&&a){c=a(d,e)}return c}},updateGrouper:function(c){var a=this,b=a.getGroups(),e=a.getSorters(),d;a.onSorterChange();a.grouped=!!c;if(c){if(a.getTrackGroups()){if(!b){b=new Ext.util.GroupCollection({itemRoot:a.getRootProperty()});b.$groupable=a;a.setGroups(b)}b.setGrouper(c);d=!0}}else {if(b){a.removeObserver(b);b.destroy()}a.setGroups(null)}if(!e.updating){a.onEndUpdateSorters(e)}if(d){b.onCollectionRefresh(a)}},updateSorters:function(b,c){var a=this;if(c){c.un('endupdate','onEndUpdateSorters',a)}if(b){b.on({endupdate:'onEndUpdateSorters',scope:a,priority:a.$endUpdatePriority});b.$sortable=a}a.onSorterChange();a.onEndUpdateSorters(b)},onSorterChange:function(){this._sortFn=null},onEndUpdateSorters:function(b){var a=this,d=a.sorted,c=a.grouped&&a.getAutoGroup()||b&&b.length>0;if(d||c){a.sorted=!!c;a.onSortChange(b)}},removeObserver:function(b){var a=this.observers;if(a){Ext.Array.remove(a,b)}},spliceMerge:function(i,q){var f=this,r=f.map,k=i.length,g=0,n=f.items,m=n.length,h=[],c=0,a=[],p=f.getSortFn(),l,j,d,b,o,e;f.items=a;for(e=0;e<k;e=j){b=i[e];for(;g<m;++g){if(p(b,o=n[g])<0){break}a.push(o)}if(g===m){h[c++]={at:a.length,itemAt:a[a.length-1],items:l=[]};if(c>1){h[c-2].next=h[c-1]}for(;e<k;++e){l.push(b=i[e]);a.push(b)}break}h[c++]={at:a.length,itemAt:a[a.length-1],items:l=[b]};if(c>1){h[c-2].next=h[c-1]}a.push(b);for(j=e+1;j<k;++j){if(p(b=i[j],o)>=0){break}a.push(b);l.push(b)}}for(;g<m;++g){a.push(n[g])}for(d=0;d<k;++d){r[q[d]]=i[d]}f.length=a.length;++f.generation;f.indices=null;for(d=0;d<c;++d){f.notify('add',[h[d]])}},getGroups:function(){return (arguments.callee.$previous||Ext.Base.prototype.getGroups).call(this)||null},updateAutoGroup:function(b){var a=this.getGroups();if(a){a.setAutoGroup(b)}this.onEndUpdateSorters(this._sorters)},updateGroups:function(a,b){if(b){this.removeObserver(b)}if(a){this.addObserver(a)}},updateSource:function(a,b){var c=this.autoSource;if(b){b.removeObserver(this);if(b===c){c.destroy();this.autoSource=null}}if(a){a.addObserver(this);if(a.length||this.length){this.onCollectionRefresh(a)}}}},1,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext.util,'Collection'],function(){var a=this.prototype;a.removeAtKey=a.removeByKey;a.decodeRemoveItems=a.decodeItems;Ext.Object.each(a._aggregators,function(b){a[b]=function(a,c,d){return this.aggregate(a,b,c,d)};a[b+'ByGroup']=function(a){return this.aggregateByGroup(a,b)}})});Ext.cmd.derive('Ext.util.ObjectTemplate',Ext.Base,{isObjectTemplate:!0,excludeProperties:{},valueRe:/^[{][a-z\.]+[}]$/i,statics:{create:function(a,b){return a.isObjectTemplate?a:new Ext.util.ObjectTemplate(a,b)}},constructor:function(a,b){Ext.apply(this,b);this.template=a},apply:function(b){var a=this;delete a.apply;a.apply=a.compile(a.template);return a.apply(b)},privates:{compile:function(a){var e=this,g=e.excludeProperties,d,b,f,c;if(Ext.isString(a)){if(a.indexOf('{')<0){c=function(){return a}}else {if(e.valueRe.test(a)){a=a.substring(1,a.length-1).split('.');c=function(d){for(var b=d,c=0;b&&c<a.length;++c){b=b[a[c]]}return b}}else {a=new Ext.XTemplate(a);c=function(b){return a.apply(b)}}}}else {if(!a||Ext.isPrimitive(a)||Ext.isFunction(a)){c=function(){return a}}else {if(a instanceof Array){d=[];for(b=0,f=a.length;b<f;++b){d[b]=e.compile(a[b])}c=function(e){var c=[],b;for(b=0;b<f;++b){c[b]=d[b](e)}return c}}else {d={};for(b in a){if(!g[b]){d[b]=e.compile(a[b])}}c=function(f){var e={},b,c;for(b in a){c=g[b]?a[b]:d[b](f);if(c!==undefined){e[b]=c}}return e}}}}return c}}},1,0,0,0,0,0,[Ext.util,'ObjectTemplate'],0);Ext.cmd.derive('Ext.data.schema.Role',Ext.Base,{isRole:!0,left:!0,owner:!1,side:'left',isMany:!1,defaultReaderType:'json',_internalReadOptions:{recordsOnly:!0,asRoot:!0},constructor:function(b,d){var a=this,c=d.extra;Ext.apply(a,d);if(c){delete c.type;Ext.apply(a,c);delete a.extra}a.association=b;if(b.owner===a.side){b.owner=a;a.owner=!0}},processUpdate:function(){Ext.raise('Only the "many" for an association may be processed. "'+this.role+'" is not valid.')},processLoad:function(d,b,a,c){return a},checkMembership:Ext.emptyFn,adoptAssociated:function(c,b){var a=this.getAssociatedItem(c);if(a){b.adopt(a)}},$roleFilterId:'$associationRoleFilter',createAssociationStore:function(e,k,i,l){var a=this,g=a.association,d=g.getFieldName(),j=g.isManyToMany,h=a.storeConfig,f=k.getId(),c={asynchronousLoad:!1,model:a.cls,role:a,session:e,associatedEntity:k,disableMetaChangeEvent:!0,pageSize:null,remoteFilter:!0,trackRemoved:!e},b;if(j){c.filters=[{id:a.$roleFilterId,property:a.inverse.field,value:f,exactMatch:!0}]}else {if(d){c.filters=[{id:a.$roleFilterId,property:d,value:f,exactMatch:!0}];c.foreignKeyName=d}}if(h){Ext.apply(c,h)}b=Ext.Factory.store(c);a.onStoreCreate(b,e,f);if(d||j&&e){b.on({scope:a,add:'onAddToMany',remove:'onRemoveFromMany',clear:'onRemoveFromMany'})}if(i){b.loadData(i)}b.complete=!!l;return b},onStoreCreate:Ext.emptyFn,getAssociatedStore:function(f,a,c,b,u){var k=this,n=k.getStoreName(),e=f[n],i=f.session,o=a&&a.reload,j=f.$source,h=!1,s=!1,r,d,l,t,p,q,g,m;if(!e){if(i){if(j){s=j.phantom}if(!b&&j){g=j[n];if(g&&!g.isLoading()){b=[];p=g.getData().items;for(l=0,t=p.length;l<t;++l){q=p[l];b.push(i.getRecord(q.self,q.id))}h=!!g.complete;r=!0}}if(!r){m=!!b;b=k.findRecords(i,f,b,u);if(!m&&(!b||!b.length)){b=null}h=s||m}}else {h=!!b}e=k.createAssociationStore(i,f,b,h||f.phantom);e.$source=g;if(!b&&(k.autoLoad||a)){o=!0}f[n]=e}if(a){if(o||e.isLoading()){e.on('load',function(h,i,e,g){d=[h,g];c=c||a.scope||f;if(e){Ext.callback(a.success,c,d)}else {Ext.callback(a.failure,c,d)}d.push(e);Ext.callback(a,c,d);Ext.callback(a.callback,c,d)},null,{single:!0})}else {d=[e,null];c=c||a.scope||f;Ext.callback(a.success,c,d);d.push(!0);Ext.callback(a,c,d);Ext.callback(a.callback,c,d)}}if(o&&!e.isLoading()){e.load()}return e},getAssociatedItem:function(b){var a=this.isMany?this.getStoreName():this.getInstanceName();return b[a]||null},onDrop:Ext.emptyFn,onIdChanged:Ext.emptyFn,getReaderRoot:function(){var a=this;return a.associationKey||(a.associationKey=a.association.schema.getNamer().readerRoot(a.role))},getReader:function(){var b=this,a=b.reader,d=b.cls,c=!b.associationKey,e=this.getReaderRoot();if(a&&!a.isReader){if(Ext.isString(a)){a={type:a}}Ext.applyIf(a,{model:d,rootProperty:e,useSimpleAccessors:c,type:b.defaultReaderType});a=b.reader=Ext.createByAlias('reader.'+a.type,a)}return a},getInstanceName:function(){var a=this;return a.instanceName||(a.instanceName=a.association.schema.getNamer().instanceName(a.role))},getOldInstanceName:function(){return this.oldInstanceName||(this.oldInstanceName='$old'+this.getInstanceName())},getStoreName:function(){var a=this;return a.storeName||(a.storeName=a.association.schema.getNamer().storeName(a.role))},constructReader:function(h){var b=this,a=b.getReader(),e=b.cls,g=!b.associationKey,f=b.getReaderRoot(),c,d;if(!a){d=e.getProxy();if(d){c=d.getReader();a=new c.self();a.copyFrom(c);a.setRootProperty(f)}else {a=new h.self({model:e,useSimpleAccessors:g,rootProperty:f})}b.reader=a}return a},read:function(f,e,d,c){var a=this.constructReader(d),b=a.getRoot(e);if(b){return a.readRecords(b,c,this._internalReadOptions)}},getCallbackOptions:function(a,c,b){if(typeof a==='function'){a={callback:a,scope:c||b}}else {if(a){a=Ext.apply({},a);a.scope=c||a.scope||b}}return a},doGetFK:function(d,b,f){var i=this,l=i.cls,j=i.association.getFieldName(),h=i.getInstanceName(),a=d[h],m=b&&b.reload,e=a!==undefined&&!m,k=d.session,c,g;if(!e){if(k){c=d.get(j);if(c||c===0){e=k.peekRecord(l,c,!0)&&!m;a=k.getRecord(l,c,!1)}else {e=!0;d[h]=a=null}}else {if(j){c=d.get(j);if(!c&&c!==0){e=!0;d[h]=a=null}else {if(!a){a=l.createWithId(c)}}}else {e=!0}}}else {if(a){e=!a.isLoading()}}if(e){if(b){g=[a,null];f=f||b.scope||d;Ext.callback(b.success,f,g);g.push(!0);Ext.callback(b,f,g);Ext.callback(b.callback,f,g)}}else {d[h]=a;b=i.getCallbackOptions(b,f,d);a.load(b)}return a},doSetFK:function(a,c,e,l){var f=this,i=f.association.getFieldName(),h=f.getInstanceName(),b=a[h],d=f.inverse,j=d.setterName,m=a.session,k,g;if(c&&c.isEntity){if(b!==c){g=f.getOldInstanceName();a[g]=b;a[h]=c;if(b&&b.isEntity){b[d.getInstanceName()]=undefined}if(i){a.set(i,c.getId())}delete a[g];if(j){c[j](a)}}}else {k=a.changingKey&&!d.isMany||a.set(i,c);if(k&&b&&b.isEntity&&!b.isEqual(b.getId(),c)){a[h]=undefined;if(!d.isMany){b[d.getInstanceName()]=undefined}}}if(e){if(Ext.isFunction(e)){e={callback:e,scope:l||a}}return a.save(e)}}},1,0,0,0,0,0,[Ext.data.schema,'Role'],0);Ext.define('TS.overrides.data.schema.Role',{override:'Ext.data.schema.Role',compatibility:'6.0.2',doSetFK:function(a,c,e,l){var f=this,i=f.association.getFieldName(),h=f.getInstanceName(),b=a[h],d=f.inverse,j=d.setterName,m=a.session,k,g;if(c&&c.isEntity){if(b!==c){g=f.getOldInstanceName();a[g]=b;a[h]=c;if(b&&b.isEntity){b[d.getInstanceName()]=undefined}if(i){a.set(i,c.getId())}delete a[g];a.onAssociatedRecordSet(c,f);if(j){c[j](a)}}}else {k=a.changingKey&&!d.isMany||a.set(i,c);if(k&&b&&b.isEntity&&!b.isEqual(b.getId(),c)){a[h]=undefined;if(!d.isMany){b[d.getInstanceName()]=undefined}}}if(e){if(Ext.isFunction(e)){e={callback:e,scope:l||a}}return a.save(e)}}});Ext.cmd.derive('Ext.data.schema.Association',Ext.Base,{isOneToOne:!1,isManyToOne:!1,isManyToMany:!1,owner:null,field:null,constructor:function(d){var a=this,c,b;Ext.apply(a,d);a.left=c=new a.Left(a,a.left);a.right=b=new a.Right(a,a.right);c.inverse=b;b.inverse=c},hasField:function(){return !!this.field},getFieldName:function(){var a=this.field;return a?a.name:''}},1,0,0,0,0,0,[Ext.data.schema,'Association'],0);Ext.cmd.derive('Ext.data.schema.OneToOne',Ext.data.schema.Association,{isOneToOne:!0,isToOne:!0,kind:'one-to-one',Left:Ext.define(null,{extend:'Ext.data.schema.Role',onDrop:function(a,c){var b=this.getAssociatedItem(a);a[this.getInstanceName()]=null;if(b){b[this.inverse.getInstanceName()]=null}},onIdChanged:function(a,e,d){var b=this.getAssociatedItem(a),c=this.association.getFieldName();if(!a.session&&b&&c){b.set(c,d)}},createGetter:function(){var a=this;return function(){return a.doGet(this)}},createSetter:function(){var a=this;return function(b){return a.doSet(this,b)}},doGet:function(a){var c=this.getInstanceName(),b=a[c],d=a.session;if(!b&&d){}return b||null},doSet:function(a,b){var d=this.getInstanceName(),e=a[d],c=this.inverse.setterName;if(e!==b){a[d]=b;if(c){b[c](a)}}return e},read:function(a,g,f,e){var c=this,d=c.callParent([a,g,f,e]),b;if(d){b=d[0];if(b){b[c.inverse.getInstanceName()]=a;a[c.getInstanceName()]=b;delete a.data[c.role]}}}}),Right:Ext.define(null,{extend:'Ext.data.schema.Role',left:!1,side:'right',createGetter:function(){var a=this;return function(b,c){return a.doGetFK(this,b,c)}},createSetter:function(){var a=this;return function(d,b,c){return a.doSetFK(this,d,b,c)}},onDrop:function(c,f){var b=this,e=b.association.field,a=b.getAssociatedItem(c),d;if(b.inverse.owner){if(f){d=c.get(e.name);if(d||d===0){a=f.getEntry(b.cls,d).record;if(a){a.drop()}}}else {if(a){a.drop()}}}if(e){c.set(e.name,null)}c[b.getInstanceName()]=null;if(a){a[b.inverse.getInstanceName()]=null}},onValueChange:function(b,f,c){var a=this,e=b[a.getOldInstanceName()]||a.getAssociatedItem(b),h=c||c===0,d=a.getInstanceName(),g=a.cls;b.changingKey=!0;a.doSetFK(b,c);if(!h){b[d]=null}else {if(f&&g){b[d]=f.peekRecord(g,c)||undefined}}if(a.inverse.owner&&e){a.association.schema.queueKeyCheck(e,a)}b.changingKey=!1},checkKeyForDrop:function(a){var b=this.inverse.getAssociatedItem(a);if(!b){a.drop()}},read:function(a,o,n,m){var f=this,l=f.callParent([a,o,n,m]),b,d,g,c,k,h,j,i,e;if(l){b=l[0];d=f.association.field;if(d){g=d.name}c=a.session;e=a.data;if(b){if(c){k=c.getRefs(b,this.inverse,!0);i=k&&k[a.id]||e[g]===undefined}else {i=!0}if(i){if(d){j=e[g];h=b.id;if(j!==h){e[g]=h;if(c){c.updateReference(a,d,h,j)}}}b[f.inverse.getInstanceName()]=a;a[f.getInstanceName()]=b}delete e[f.role]}}}})},0,0,0,0,0,0,[Ext.data.schema,'OneToOne'],0);Ext.define('TS.overrides.data.schema.OneToOne',{override:'Ext.data.schema.OneToOne',compatibility:'6.0.2',doSet:function(a,b){var d=this.getInstanceName(),e=a[d],c=this.inverse.setterName;if(e!==b){a[d]=b;if(c){b[c](a)}a.onAssociatedRecordSet(b,this)}return e}});Ext.cmd.derive('Ext.data.schema.ManyToOne',Ext.data.schema.Association,{isManyToOne:!0,isToOne:!0,kind:'many-to-one',Left:Ext.define(null,{extend:'Ext.data.schema.Role',isMany:!0,onDrop:function(d,f){var b=this,e=b.getAssociatedItem(d),a,g,c,i,h;if(e){a=e.removeAll();if(a&&b.inverse.owner){for(c=0,g=a.length;c<g;++c){a[c].drop()}}e.destroy();d[b.getStoreName()]=null}else {if(f){a=f.getRefs(d,b);if(a){for(h in a){a[h].drop()}}}}},onIdChanged:function(d,h,f){var e=this.association.getFieldName(),c=this.getAssociatedItem(d),b,a,g;if(c){c.getFilters().get(this.$roleFilterId).setValue(f);if(!d.session&&e){b=c.getDataSource().items;for(a=0,g=b.length;a<g;++a){b[a].set(e,f)}}}},processUpdate:function(f,i){var d=this,h=d.inverse.cls,g=i.R,c,a,b,e;if(g){for(c in g){a=f.peekRecord(h,c);if(a){e=f.getEntityList(d.cls,g[c]);b=d.getAssociatedItem(a);if(b){b.loadData(e);b.complete=!0}else {a[d.getterName](null,null,e)}}else {f.onInvalidAssociationEntity(h,c)}}}},findRecords:function(k,h,e,i){var d=e,b=k.getRefs(h,this,!0),l=this.association.field,j=l.name,a,c,g,m,f;if(b||i){d=[];if(e){f={};for(g=0,m=e.length;g<m;++g){a=e[g];c=a.id;if(b&&b[c]){d.push(a)}else {if(i&&a.data[j]===undefined){d.push(a);a.data[j]=h.id;k.updateReference(a,l,h.id,undefined)}}f[c]=!0}}if(b){for(c in b){if(!f||!f[c]){d.push(b[c])}}}}return d},processLoad:function(e,d,c,a){var b=c;if(a){b=this.findRecords(a,d,c,!0)}this.onLoadMany(d,b,a);return b},adoptAssociated:function(f,d){var c=this.getAssociatedItem(f),b,a,e;if(c){c.setSession(d);b=c.getData().items;for(a=0,e=b.length;a<e;++a){d.adopt(b[a])}}},createGetter:function(){var a=this;return function(c,d,b){return a.getAssociatedStore(this,c,d,b,!0)}},createSetter:null,onAddToMany:function(b,a){this.syncFK(a,b.getAssociatedEntity(),!1)},onLoadMany:function(i,h,j){var l=this.inverse.getInstanceName(),g=i.getId(),b=this.association.field,c,k,a,d,e,f;if(b){for(c=0,k=h.length;c<k;++c){a=h[c];a[l]=i;if(b){f=b.name;e=a.data;d=e[f];if(d!==g){e[f]=g;if(j){j.updateReference(a,b,g,d)}}}}}},onRemoveFromMany:function(b,a){this.syncFK(a,b.getAssociatedEntity(),!0)},read:function(b,j,i,h){var c=this,g=c.inverse.getInstanceName(),a=c.callParent([b,j,i,h]),e,f,d;if(a){e=b[c.getterName](null,null,a);delete b.data[c.role];a=e.getData().items;for(d=0,f=a.length;d<f;++d){a[d][g]=b}}},syncFK:function(c,d,f){var i=this.association.getFieldName(),g=this.inverse,k=g.setterName,j=g.getInstanceName(),h=c.length,l=d.getId(),e,a,b;while(h-->0){a=c[h];e=!a.isEqual(l,a.get(i));b=f?null:d;if(e!==f){a.changingKey=!0;a[k](b);a.changingKey=!1}else {a[j]=b}}}}),Right:Ext.define(null,{extend:'Ext.data.schema.Role',left:!1,side:'right',onDrop:function(a,c){var b=this.association.field;if(b){a.set(b.name,null)}a[this.getInstanceName()]=null},createGetter:function(){var a=this;return function(b,c){return a.doGetFK(this,b,c)}},createSetter:function(){var a=this;return function(b,c,d){return a.doSetFK(this,b,c,d)}},checkMembership:function(c,b){var d=this.association.field,a;a=this.getSessionStore(c,b.get(d.name));if(a&&!a.contains(b)){a.add(b)}},onValueChange:function(b,f,d,l){var c=this,j=c.getInstanceName(),m=c.cls,i,g,a,h,e,k;if(!b.changingKey){i=d||d===0;if(!i){b[j]=null}if(f){a=c.getSessionStore(f,l);if(a){a.remove(b)}if(i){a=c.getSessionStore(f,d);if(a&&!a.isLoading()){a.add(b)}if(m){k=f.peekRecord(m,d)}b[j]=k||undefined}}else {g=b.joined;if(g){for(h=g.length-1;h>=0;h--){a=g[h];if(a.isStore){e=a.getAssociatedEntity();if(e&&e.self===c.cls&&e.getId()===l){a.remove(b)}}}}}}if(c.owner&&d===null){c.association.schema.queueKeyCheck(b,c)}},checkKeyForDrop:function(a){var b=this.association.field;if(a.get(b.name)===null){a.drop()}},getSessionStore:function(c,d){var b=this.cls,a;if(b){a=c.peekRecord(b,d);if(a){return this.inverse.getAssociatedItem(a)}}},read:function(b,f,e,d){var c=this.callParent([b,f,e,d]),a;if(c){a=c[0];if(a){b[this.getInstanceName()]=a;delete b.data[this.role]}}}})},0,0,0,0,0,0,[Ext.data.schema,'ManyToOne'],0);Ext.cmd.derive('Ext.data.schema.ManyToMany',Ext.data.schema.Association,{isManyToMany:!0,isToMany:!0,kind:'many-to-many',Left:Ext.define(null,{extend:'Ext.data.schema.Role',isMany:!0,digitRe:/^\d+$/,findRecords:function(i,k,f){var l=i.getMatrixSlice(this.inverse,k.id),g=l.members,h=[],m=this.cls,d,e,j,a,c,b;if(f){d={};for(e=0,j=f.length;e<j;++e){b=f[e];a=b.id;c=g[a];if(!(c&&c[2]===-1)){h.push(b)}d[a]=!0}}for(a in g){c=g[a];if(!d||!d[a]&&(c&&c[2]!==-1)){b=i.peekRecord(m,a);if(b){h.push(b)}}}return h},onIdChanged:function(b,d,c){var a=this.getAssociatedItem(b);if(a){a.getFilters().get(this.$roleFilterId).setValue(c)}},processLoad:function(e,d,b,c){var a=b;if(c){a=this.findRecords(c,d,b);this.onAddToMany(e,a,!0)}return a},processUpdate:function(b,f){var a=this,i=a.inverse.cls,h=f.R,e,c,d,g;if(h){for(e in h){c=b.peekRecord(i,e);if(c){g=b.getEntityList(a.cls,h[e]);d=a.getAssociatedItem(c);if(d){d.loadData(g);d.complete=!0}else {c[a.getterName](null,null,g)}}else {b.onInvalidAssociationEntity(i,e)}}}a.processMatrixBlock(b,f.C,1);a.processMatrixBlock(b,f.D,-1)},checkMembership:function(l,i){var d=l.getMatrix(this.association,!0),g,j,k,f,e,h,c,m,b,a;if(!d){return}g=this.left?d.right:d.left;j=g.inverse.role.cls;k=this.inverse;e=g.slices;if(e){f=e[i.id];if(f){c=f.members;for(h in c){m=c[h];if(m[2]!==-1){b=l.peekRecord(j,h);if(b){a=k.getAssociatedItem(b);if(a){a.matrixUpdate=1;a.add(i);a.matrixUpdate=0}}}}}}},onStoreCreate:function(d,c,e){var b=this,a;if(c){a=c.getMatrixSlice(b.inverse,e);a.attach(d);a.notify=b.onMatrixUpdate;a.scope=b}},processMatrixBlock:function(f,b,g){var e=this.inverse,d=this.digitRe,c,a;if(b){for(a in b){if(d.test(a)){a=parseInt(a,10)}c=f.getMatrixSlice(e,a);c.update(b[a],g)}}},createGetter:function(){var a=this;return function(c,d,b){return a.getAssociatedStore(this,c,d,b,!1)}},onAddToMany:function(a,b,c){if(!a.matrixUpdate){a.matrixUpdate=1;a.matrix.update(b,c===!0?0:1);a.matrixUpdate=0}},onRemoveFromMany:function(a,b){if(!a.matrixUpdate){a.matrixUpdate=1;a.matrix.update(b,-1);a.matrixUpdate=0}},read:function(a,f,e,d){var b=this,c=b.callParent([a,f,e,d]);if(c){a[b.getterName](null,null,c);delete a.data[b.role]}},onMatrixUpdate:function(f,e,g){var a=f.store,b,c,d;if(a&&!a.loading&&!a.matrixUpdate){a.matrixUpdate=1;b=a.indexOfId(e);if(g<0){if(b>=0){a.remove([b])}}else {if(b<0){d=a.getSession().getEntry(this.type,e);c=d&&d.record;if(c){a.add(c)}}}a.matrixUpdate=0}},adoptAssociated:function(e,d){var a=this.getAssociatedItem(e),c,b,f;if(a){a.setSession(d);this.onStoreCreate(a,d,e.getId());c=a.getData().items;for(b=0,f=c.length;b<f;++b){d.adopt(c[b])}}}},function(){var a=this;Ext.ClassManager.onCreated(function(){Ext.data.schema.ManyToMany.prototype.Right=Ext.define(null,{extend:a,left:!1,side:'right'})},null,'Ext.data.schema.ManyToMany')})},0,0,0,0,0,0,[Ext.data.schema,'ManyToMany'],0);Ext.cmd.derive('Ext.util.Inflector',Ext.Base,{singleton:!0,plurals:[[/(quiz)$/i,'$1zes'],[/^(ox)$/i,'$1en'],[/([m|l])ouse$/i,'$1ice'],[/(matr|vert|ind)ix|ex$/i,'$1ices'],[/(x|ch|ss|sh)$/i,'$1es'],[/([^aeiouy]|qu)y$/i,'$1ies'],[/(hive)$/i,'$1s'],[/(?:([^f])fe|([lr])f)$/i,'$1$2ves'],[/sis$/i,'ses'],[/([ti])um$/i,'$1a'],[/(buffal|tomat|potat)o$/i,'$1oes'],[/(bu)s$/i,'$1ses'],[/(alias|status|sex)$/i,'$1es'],[/(octop|vir)us$/i,'$1i'],[/(ax|test)is$/i,'$1es'],[/^(p)erson$/i,'$1eople'],[/^(m)an$/i,'$1en'],[/(.*)(child)(ren)?$/i,'$1$2ren'],[/s$/i,'s'],[/$/,'s']],singulars:[[/(address)$/i,'$1'],[/(quiz)zes$/i,'$1'],[/(matr)ices$/i,'$1ix'],[/(vert|ind)ices$/i,'$1ex'],[/^(ox)en/i,'$1'],[/(alias|status)es$/i,'$1'],[/(octop|vir)i$/i,'$1us'],[/(cris|ax|test)es$/i,'$1is'],[/(shoe)s$/i,'$1'],[/(o)es$/i,'$1'],[/(bus)es$/i,'$1'],[/([m|l])ice$/i,'$1ouse'],[/(x|ch|ss|sh)es$/i,'$1'],[/(m)ovies$/i,'$1ovie'],[/(s)eries$/i,'$1eries'],[/([^aeiouy]|qu)ies$/i,'$1y'],[/([lr])ves$/i,'$1f'],[/(tive)s$/i,'$1'],[/(hive)s$/i,'$1'],[/([^f])ves$/i,'$1fe'],[/(^analy)ses$/i,'$1sis'],[/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$/i,'$1$2sis'],[/([ti])a$/i,'$1um'],[/(n)ews$/i,'$1ews'],[/(p)eople$/i,'$1erson'],[/s$/i,'']],uncountable:['sheep','fish','series','species','money','rice','information','equipment','grass','mud','offspring','deer','means'],singular:function(b,a){this.singulars.unshift([b,a])},plural:function(b,a){this.plurals.unshift([b,a])},clearSingulars:function(){this.singulars=[]},clearPlurals:function(){this.plurals=[]},isTransnumeral:function(a){return Ext.Array.indexOf(this.uncountable,a)!=-1},pluralize:function(a){if(this.isTransnumeral(a)){return a}var e=this.plurals,f=e.length,d,b,c;for(c=0;c<f;c++){d=e[c];b=d[0];if(b==a||b.test&&b.test(a)){return a.replace(b,d[1])}}return a},singularize:function(a){if(this.isTransnumeral(a)){return a}var e=this.singulars,f=e.length,d,b,c;for(c=0;c<f;c++){d=e[c];b=d[0];if(b==a||b.test&&b.test(a)){return a.replace(b,d[1])}}return a},classify:function(a){return Ext.String.capitalize(this.singularize(a))},ordinalize:function(a){var c=parseInt(a,10),d=c%10,b=c%100;if(11<=b&&b<=13){return a+'th'}else {switch(d){case 1:return a+'st';case 2:return a+'nd';case 3:return a+'rd';default:return a+'th';}}}},0,0,0,0,0,0,[Ext.util,'Inflector'],function(){var b={alumnus:'alumni',cactus:'cacti',focus:'foci',nucleus:'nuclei',radius:'radii',stimulus:'stimuli',ellipsis:'ellipses',paralysis:'paralyses',oasis:'oases',appendix:'appendices',index:'indexes',beau:'beaux',bureau:'bureaux',tableau:'tableaux',woman:'women',child:'children',man:'men',corpus:'corpora',criterion:'criteria',curriculum:'curricula',genus:'genera',memorandum:'memoranda',phenomenon:'phenomena',foot:'feet',goose:'geese',tooth:'teeth',antenna:'antennae',formula:'formulae',nebula:'nebulae',vertebra:'vertebrae',vita:'vitae'},a;for(a in b){if(b.hasOwnProperty(a)){this.plural(a,b[a]);this.singular(b[a],a)}}});Ext.cmd.derive('Ext.data.schema.Namer',Ext.Base,{isNamer:!0,capitalize:function(a){return Ext.String.capitalize(a)},fieldRole:function(a){var b=a.match(this.endsWithIdRe,'');if(b){a=a.substr(0,a.length-(b[1]||b[2]).length)}return this.apply('uncapitalize',a)},idField:function(a){return this.apply('uncapitalize,singularize',a)+'Id'},instanceName:function(a){return this.apply('underscore',a)},multiRole:function(a){return this.apply('undotted,uncapitalize,pluralize',a)},pluralize:function(a){return Ext.util.Inflector.pluralize(a)},readerRoot:function(a){return this.apply('uncapitalize',a)},singularize:function(a){return Ext.util.Inflector.singularize(a)},storeName:function(a){return this.apply('underscore',a)},uncapitalize:function(a){return Ext.String.uncapitalize(a)},underscore:function(a){return '_'+a},uniRole:function(a){return this.apply('undotted,uncapitalize,singularize',a)},undotted:function(c){if(c.indexOf('.')<0){return c}var a=c.split('.'),b=a.length;while(b-->1){a[b]=this.apply('capitalize',a[b])}return a.join('')},getterName:function(a){var b=a.role;if(a&&a.isMany){return b}return 'get'+this.apply('capitalize',b)},inverseFieldRole:function(e,f,c,d){var a=this,b=a.apply(f?'uniRole':'multiRole',e),g=a.apply('pluralize',c),h=a.apply('undotted,pluralize',d);if(g.toLowerCase()!==h.toLowerCase()){b=c+a.apply('capitalize',b)}return b},manyToMany:function(c,e,d){var b=this,a=b.apply('undotted,capitalize,singularize',e)+b.apply('undotted,capitalize,pluralize',d);if(c){a=b.apply('capitalize',c+a)}return a},manyToOne:function(d,b,a,c){return this.apply('capitalize,singularize',a)+this.apply('capitalize',b)},matrixRole:function(a,c){var b=this.apply(a?'multiRole,capitalize':'multiRole',c);return a?a+b:b},oneToOne:function(d,b,a,c){return this.apply('undotted,capitalize,singularize',a)+this.apply('capitalize',b)},setterName:function(a){return 'set'+this.apply('capitalize',a.role)},endsWithIdRe:/(?:(_id)|[^A-Z](Id))$/,cache:{},apply:function(b,c){var e=this,h=e.cache,i=h[c]||(h[c]={}),a=i[b],d,g,f;if(!a){if(b.indexOf(',')<0){a=e[b](c)}else {g=(f=b.split(',')).length;a=c;for(d=0;d<g;++d){a=e.apply(f[d],a)}}i[b]=a}return a}},0,0,0,0,['namer.default'],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.schema,'Namer'],0);Ext.cmd.derive('Ext.data.schema.Schema',Ext.Base,{aliasPrefix:'schema.',isSchema:!0,type:'default',statics:{instances:{},get:function(a){var f=this,g=f.instances,c='default',e=a&&Ext.isString(a),b,d;if(a){if(a.isSchema){return a}c=e?a:a.id||c}if(!(b=g[c])){g[c]=b=f.create(a);b.id=c}else {if(a&&!e){d=Ext.merge({},b.config);Ext.merge(d,a);b.setConfig(d);b.config=d}}return b},lookupEntity:function(b){var a=null,e=this.instances,c,d,f;if(b){if(b.isEntity){a=b.self}else {if(Ext.isFunction(b)){a=b}else {if(Ext.isString(b)){a=Ext.ClassManager.get(b);if(a&&(!a.prototype||!a.prototype.isEntity)){a=null}if(!a){for(d in e){f=e[d];c=f.getEntity(b);if(c){if(a){Ext.raise('Ambiguous entity name "'+b+'". Defined by schema "'+a.schema.type+'" and "'+d+'"')}a=c}}}if(!a){Ext.raise('No such Entity "'+b+'".')}}}}}return a}},assocCount:0,entityCount:0,config:{defaultIdentifier:null,keyCheckDelay:10,namer:'default',namespace:null,proxy:{type:'ajax',url:'{prefix}/{entityName}'},urlPrefix:''},onClassExtended:function(c,b){var a=b.alias;if(a&&!b.type){if(!Ext.isString(a)){a=a[0]}c.prototype.type=a.substring(this.prototype.aliasPrefix.length)}},constructor:function(a){this.initConfig(a);this.clear()},applyDefaultIdentifier:function(a){return a&&Ext.Factory.dataIdentifier(a)},applyNamer:function(b){var a=Ext.data.schema.Namer.create(b);a.schema=this;return a},applyNamespace:function(a){if(a){var b=a.length-1;if(a.charAt(b)!=='.'){a+='.'}}return a},applyProxy:function(a){return Ext.util.ObjectTemplate.create(a)},eachAssociation:function(d,c){var b=this.associations,a;for(a in b){if(b.hasOwnProperty(a)){if(d.call(c,a,b[a])===!1){break}}}},eachEntity:function(d,c){var b=this.entities,a;for(a in b){if(b.hasOwnProperty(a)){if(d.call(c,a,b[a].cls)===!1){break}}}},getAssociation:function(b){var a=this.associations[b];return a||null},getEntity:function(b){var a=this.entityClasses[b]||this.entities[b];return a&&a.cls||null},getEntityName:function(c){var d=this.getNamespace(),b,a;if(typeof c==='string'){a=c}else {a=c.$className||null}if(a){if(d){b=d.length;if(a.substring(0,b)!==d){return a}}if(b){a=a.substring(b)}}return a},hasAssociations:function(a){a=a.entityName||a;return !!this.associationEntityMap[a]},hasEntity:function(b){var a=this.getEntityName(b);return !!(this.entities[a]||this.entityClasses[a])},addMatrix:function(n,k,l,j,i){var a=this,h=a.getNamer(),m=a.associations,g=a.entities,c=j.type,b=i.type,p=j.field||h.apply('idField',c),o=i.field||h.apply('idField',b),r=j.role||h.matrixRole(l,c),q=i.role||h.matrixRole(l,b),d,f,e;f=g[c]||(g[c]={cls:null,name:c,associations:{}});e=g[b]||(g[b]={cls:null,name:b,associations:{}});++a.assocCount;m[k]=d=new Ext.data.schema.ManyToMany({name:k,schema:a,definedBy:n,left:{cls:f.cls,type:c,role:r,field:p,associationKey:j.associationKey},right:{cls:e.cls,type:b,role:q,field:o,associationKey:i.associationKey}});f.associations[d.right.role]=d.right;e.associations[d.left.role]=d.left;if(f.cls){a.associationEntityMap[f.cls.entityName]=!0}if(e.cls){a.associationEntityMap[e.cls.entityName]=!0}a.decorateModel(d)},addReference:function(g,f,b,m){var e=this,j=e.getNamer(),o=e.entities,s=e.associations,k=g.entityName,a=b.association,t=!!b.legacy,q=b.child,p=b.parent,c=b.role,d=b.type||p||q,l=b.inverse,n=Ext.isString(l)?{role:l}:l,h=n&&n.role,i,r;if(!c){if(t){c=j.apply('uncapitalize',d)}else {c=j.apply('fieldRole',f.name)}}if(!h){h=j.inverseFieldRole(k,m,c,d)}if(!a){if(m){a=j.oneToOne(g,h,d,c)}else {a=j.manyToOne(g,h,d,c)}}i=o[d]||(o[d]={cls:null,name:d,associations:{}});r=m?Ext.data.schema.OneToOne:Ext.data.schema.ManyToOne;a=new r({name:a,owner:q?'left':p?'right':null,definedBy:g,schema:e,field:f,nullable:f?!!f.allowBlank:!0,legacy:b.legacy,left:{cls:g,type:k,role:h,extra:n},right:{cls:i.cls,type:d,role:c,extra:b}});g.associations[c]=a.right;i.associations[h]=a.left;if(f){f.reference=a.right;g.references.push(f)}++e.assocCount;e.associationEntityMap[k]=!0;if(i.cls){e.associationEntityMap[i.cls.entityName]=!0}s[a.name]=a;if(a.right.cls){e.decorateModel(a)}},privates:{addEntity:function(a){var c=this,i=c.entities,e=a.entityName,b=i[e],j=a.fields,d,g,f,k,h;if(!b){i[e]=b={name:e,associations:{}}}else {d=b.associations;for(h in d){d[h].inverse.cls=a;c.associationEntityMap[e]=!0;c.decorateModel(d[h].association)}}b.cls=a;a.prototype.associations=a.associations=b.associations;c.entityClasses[a.$className]=b;++c.entityCount;for(f=0,k=j.length;f<k;++f){g=j[f];if(g.reference){c.addReferenceDescr(a,g)}}},addMatrices:function(c,a){var e=this,b,f,d;if(Ext.isString(a)){e.addMatrixDescr(c,null,a)}else {if(a[0]){for(b=0,f=a.length;b<f;++b){e.addMatrixDescr(c,null,a[b])}}else {for(d in a){e.addMatrixDescr(c,d,a[d])}}}},addMatrixDescr:function(i,f,a){var h=this,d=i.entityName,k=h.associations,e=h.getNamer(),c=a.left,b=a.right,j,g;if(Ext.isString(a)){if(a.charAt(0)==='#'){c={type:d};b={type:a.substring(1)}}else {if(a.charAt(j=a.length-1)==='#'){c={type:a.substring(0,j)};b={type:d}}else {if(e.apply('multiRole',d)<e.apply('multiRole',a)){c={type:d};b={type:a}}else {c={type:a};b={type:d}}}}}else {g=a.relation;if(c||!b&&e.apply('multiRole',d)<e.apply('multiRole',a.type)){if(!c||c===!0){c={type:d}}else {c=Ext.apply({type:d},c)}b=a}else {if(!b||b===!0){b={type:d}}else {b=Ext.apply({type:d},b)}c=a}}if(!f){f=e.manyToMany(g,c.type,b.type)}if(!(f in k)){h.addMatrix(i,f,g,c,b)}},addReferenceDescr:function(c,b){var d=this,a=b.$reference;if(Ext.isString(a)){a={type:a}}else {a=Ext.apply({},a)}if(a.legacy){if(a.single){d.addLegacySingle(c,a)}else {d.addLegacyHasMany(c,a)}}else {d.addReference(c,b,a,b.unique)}},addPending:function(b,c,d,e){var a=this.pending;if(!a[b]){a[b]=[]}a[b].push([c,d,e])},addLegacyBelongsTo:function(a,b){this.addLegacySingle(a,b)},addLegacyHasOne:function(a,b){this.addLegacySingle(a,b)},addLegacySingle:function(c,a){var d,e,b;a=this.constructLegacyAssociation(c,a);a.single=!0;e=a.type;d=a.foreignKey||e.toLowerCase()+'_id';b=c.getField(d);if(b){b.$reference=a}this.addReference(c,b,a,!0)},addLegacyHasMany:function(e,a){var h=this,k=h.entities,f=h.pending,i=a.associationKey,g,b,c,d,j;a=this.constructLegacyAssociation(e,a);b=a.type;d=k[b];if(d&&d.cls){a.type=e.entityName;j=a.foreignKey||a.type.toLowerCase()+'_id';g=d.cls;c=g.getField(j);a.inverse=Ext.apply({},a);delete a.role;if(i){a.inverse.associationKey=i}if(c){c.$reference=a}h.addReference(g,c,a,!1)}else {if(!f[b]){f[b]=[]}f[b].push([e,a])}},constructLegacyAssociation:function(c,a){if(Ext.isString(a)){a={model:a}}a.legacy=!0;a.type=this.getEntityName(a.model);var b=a.associatedName||a.name;if(b){a.role=b}return a},afterLegacyAssociations:function(f){var c=this.pending,d=f.entityName,b=c[d],a,e;if(b){for(a=0,e=b.length;a<e;++a){this.addLegacyHasMany.apply(this,b[a])}delete c[d]}},clear:function(c){var a=this,b=a.timer;delete a.setConfig;if(b){window.clearTimeout(b);a.timer=null}a.associations={};a.associationEntityMap={};a.entities={};a.entityClasses={};a.pending={};a.assocCount=a.entityCount=0;if(c){a.setNamespace(null)}},constructProxy:function(c){var b=this,a=Ext.Object.chain(c),d=b.getProxy();a.schema=b;a.prefix=b.getUrlPrefix();return d.apply(a)},applyDecoration:function(a){var g=this,f=a.inverse.cls,e=g.getNamer(),b,c,d;if(f&&!a.decorated){a.decorated=!0;d=f.prototype;if(!(b=a.getterName)){a.getterName=b=e.getterName(a)}d[b]=a.createGetter();if(a.createSetter){if(!(c=a.setterName)){a.setterName=c=e.setterName(a)}d[c]=a.createSetter()}}},decorateModel:function(a){this.applyDecoration(a.left);this.applyDecoration(a.right)},processKeyChecks:function(g){var a=this,b=a.keyCheckQueue,e=a.timer,f,c,d;if(e){window.clearTimeout(e);a.timer=null}if(!b){return}do{b=a.keyCheckQueue;a.keyCheckQueue=[];for(c=0,f=b.length;c<f;++c){d=b[c];d.role.checkKeyForDrop(d.record)}}while(g&&a.keyCheckQueue.length)},queueKeyCheck:function(d,e){var a=this,b=a.keyCheckQueue,c=a.timer;if(!b){a.keyCheckQueue=b=[]}b.push({record:d,role:e});if(!c){a.timer=c=Ext.Function.defer(a.processKeyChecks,a.getKeyCheckDelay(),a)}},rankEntities:function(){var d=this,e=d.entities,b=Ext.Object.getKeys(e),f=b.length,c,a;d.nextRank=1;b.sort();for(a=0;a<f;++a){c=e[b[a]].cls;if(!c.rank){d.rankEntity(c)}}},rankEntity:function(d){var c=d.associations,b,a,e;for(e in c){a=c[e];if(!a.left&&a.association.field){b=a.cls;if(!b.rank){this.rankEntity(b)}}}d.rank=this.nextRank++}}},1,0,0,0,['schema.default'],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.schema,'Schema'],0);Ext.cmd.derive('Ext.data.AbstractStore',Ext.Base,{factoryConfig:{defaultType:'store',type:'store'},$configPrefixed:!1,$configStrict:!1,config:{filters:null,autoDestroy:undefined,storeId:null,statefulFilters:!1,sorters:null,remoteSort:{lazy:!0,$value:!1},remoteFilter:{lazy:!0,$value:!1},groupField:undefined,groupDir:'ASC',grouper:null,pageSize:25,autoSort:null},currentPage:1,loading:!1,isStore:!0,updating:0,constructor:function(c){var a=this,b;a.isInitializing=!0;a.mixins.observable.constructor.call(a,c);a.isInitializing=!1;b=a.getStoreId();if(!b&&(c&&c.id)){a.setStoreId(b=c.id)}if(b){Ext.data.StoreManager.register(a)}},getCount:function(){var a=this.getData();return a?a.getCount():0},rangeCached:function(a,b){return this.getData().getCount()>=Math.max(a,b)},find:function(g,h,d,e,b,c){var a=!e,f=!!(a&&c);return this.getData().findIndex(g,h,d,a,f,!b)},findRecord:function(){var a=this,b=a.find.apply(a,arguments);return b!==-1?a.getAt(b):null},findExact:function(b,c,a){return this.getData().findIndexBy(function(d){return d.isEqual(d.get(b),c)},this,a)},findBy:function(c,a,b){return this.getData().findIndexBy(c,a,b)},getAt:function(a){return this.getData().getAt(a)||null},getRange:function(d,b,a){var c=this.getData().getRange(d,Ext.isNumber(b)?b+1:b);if(a&&a.callback){a.callback.call(a.scope||this,c,d,b,a)}return c},getFilters:function(b){var a=(arguments.callee.$previous||Ext.Base.prototype.getFilters).call(this);if(!a&&b!==!1){this.setFilters([]);a=(arguments.callee.$previous||Ext.Base.prototype.getFilters).call(this)}return a},applyFilters:function(c,a){var b;if(!a){a=this.createFiltersCollection();b=!0}a.add(c);if(b){this.onRemoteFilterSet(a,this.getRemoteFilter())}return a},getSorters:function(b){var a=(arguments.callee.$previous||Ext.Base.prototype.getSorters).call(this);if(!a&&b!==!1){this.setSorters([]);a=(arguments.callee.$previous||Ext.Base.prototype.getSorters).call(this)}return a},applySorters:function(c,a){var b;if(!a){a=this.createSortersCollection();b=!0}a.add(c);if(b){this.onRemoteSortSet(a,this.getRemoteSort())}return a},filter:function(a,c,b){if(Ext.isString(a)){a={property:a,value:c}}this.suppressNextFilter=!!b;this.getFilters().add(a);this.suppressNextFilter=!1},removeFilter:function(a,d){var b=this,c=b.getFilters();b.suppressNextFilter=!!d;if(a instanceof Ext.util.Filter){c.remove(a)}else {c.removeByKey(a)}b.suppressNextFilter=!1},updateAutoSort:function(a){this.getData().setAutoSort(a)},updateRemoteSort:function(a){this.onRemoteSortSet(this.getSorters(!1),a)},updateRemoteFilter:function(a){this.onRemoteFilterSet(this.getFilters(!1),a)},addFilter:function(b,a){this.suppressNextFilter=!!a;this.getFilters().add(b);this.suppressNextFilter=!1},filterBy:function(b,a){this.getFilters().add({filterFn:b,scope:a||this})},clearFilter:function(c){var b=this,a=b.getFilters(!1);if(!a||a.getCount()===0){return}b.suppressNextFilter=!!c;a.removeAll();b.suppressNextFilter=!1},isFiltered:function(){return this.getFilters().getCount()>0},isSorted:function(){var a=this.getSorters(!1);return !!(a&&a.length>0)||this.isGrouped()},addFieldTransform:function(b){if(b.getTransform()){return}var e=b.getProperty(),d=this.getModel(),c,a;if(d){c=d.getField(e);a=c?c.getSortType():null}if(a&&a!==Ext.identityFn){b.setTransform(a)}},beginUpdate:function(){if(!this.updating++){this.fireEvent('beginupdate')}},endUpdate:function(){if(this.updating&&!--this.updating){this.fireEvent('endupdate');this.onEndUpdate()}},getState:function(){var c=this,e=[],g=c.getFilters(),f=c.getGrouper(),a,d,b;c.getSorters().each(function(a){e[e.length]=a.getState();d=!0});if(c.statefulFilters&&c.saveStatefulFilters){d=!0;a=[];g.each(function(b){a[a.length]=b.getState()})}if(f){d=!0}if(d){b={};if(e.length){b.sorters=e}if(a){b.filters=a}if(f){b.grouper=f.getState()}}return b},applyState:function(b){var a=this,e=b.sorters,c=b.filters,d=b.grouper;if(e){a.getSorters().replaceAll(e)}if(c){a.saveStatefulFilters=!0;a.getFilters().replaceAll(c)}if(d){a.setGrouper(d)}},hasPendingLoad:Ext.emptyFn,isLoaded:Ext.emptyFn,isLoading:Ext.emptyFn,destroy:function(){var a=this;if(a.getStoreId()){Ext.data.StoreManager.unregister(a)}a.callParent();a.onDestroy()},sort:function(c,b,d){var a=this;if(arguments.length===0){if(a.getRemoteSort()){a.load()}else {a.forceLocalSort()}}else {a.getSorters().addSort(c,b,d)}},onBeforeCollectionSort:function(b,a){if(a){this.fireEvent('beforesort',this,a.getRange())}},onSorterEndUpdate:function(){var a=this,b;b=a.getSorters(!1);if(a.settingGroups||!b){return}b=b.getRange();if(b.length){if(a.getRemoteSort()){a.load({callback:function(){a.fireEvent('sort',a,b)}})}else {a.fireEvent('datachanged',a);a.fireEvent('refresh',a);a.fireEvent('sort',a,b)}}else {a.fireEvent('sort',a,b)}},onFilterEndUpdate:function(){var a=this,b=a.suppressNextFilter;if(a.getRemoteFilter()){a.currentPage=1;if(!b){a.load()}}else {if(!b){a.fireEvent('datachanged',a);a.fireEvent('refresh',a)}}if(a.trackStateChanges){a.saveStatefulFilters=!0}a.fireEvent('filterchange',a,a.getFilters().getRange())},updateGroupField:function(a){if(a){this.setGrouper({property:a,direction:this.getGroupDir()})}else {this.setGrouper(null)}},getGrouper:function(){return this.getData().getGrouper()},group:function(b,d){var a=this,c=a.getSorters(!1),e=b||c&&c.length;if(b&&typeof b==='string'){b={property:b,direction:d||a.getGroupDir()}}a.settingGroups=!0;a.getData().setGrouper(b);delete a.settingGroups;if(e){if(a.getRemoteSort()){a.load({scope:a,callback:a.fireGroupChange})}else {a.fireEvent('datachanged',a);a.fireEvent('refresh',a);a.fireGroupChange()}}else {a.fireGroupChange()}},fireGroupChange:function(){if(!this.destroyed){this.fireEvent('groupchange',this,this.getGrouper())}},clearGrouping:function(){this.group(null)},getGroupField:function(){var a=this.getGrouper(),b='';if(a){b=a.getProperty()}return b},isGrouped:function(){return !!this.getGrouper()},applyGrouper:function(a){this.group(a);return this.getData().getGrouper()},getGroups:function(){return this.getData().getGroups()},onEndUpdate:Ext.emptyFn,privates:{loadsSynchronously:Ext.privateFn,onRemoteFilterSet:function(a,b){if(a){a[b?'on':'un']('endupdate',this.onFilterEndUpdate,this)}},onRemoteSortSet:function(c,b){var a=this;if(c){c[b?'on':'un']('endupdate',a.onSorterEndUpdate,a);a.getData()[b?'un':'on']('beforesort',a.onBeforeCollectionSort,a)}}},deprecated:{5:{methods:{destroyStore:function(){this.destroy()}}}}},1,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable],[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data,'AbstractStore'],0);Ext.cmd.derive('Ext.data.Error',Ext.Base,{isError:!0,$configPrefixed:!1,config:{field:null,message:''},constructor:function(a){this.initConfig(a);this.msg=this.message}},1,0,0,0,0,0,[Ext.data,'Error'],0);Ext.cmd.derive('Ext.data.ErrorCollection',Ext.util.MixedCollection,{alternateClassName:'Ext.data.Errors',init:function(d){var b=this,h=d.fields,k=d.data,g,a,l,c,i,f,j,e;for(c=0,i=h.length;c<i;++c){a=h[c];e=a.name;j=k[e];if(a.validate&&!a.validate.$nullFn){g=b.length;f=a.validate(j,null,b,d);if(g===b.length&&f!==!0){b.add(e,f)}}}return b},add:function(b,f){var e=this,d=Ext.data.field.Field.defaultInvalidMessage,a=b,c;if(Ext.isString(b)){a=new Ext.data.Error({field:b,message:f||d})}else {if(!a.isError){a=new Ext.data.Error({field:a.field||a.name,message:a.error||a.message||a.msg||d})}b=a.field}c=e.get(b);if(c){if(Ext.isArray(c)){c.push(a);return c}e.removeAtKey(b);a=[c,a];a.field=b;a=[a]}return Ext.util.MixedCollection.prototype.add.call(this,a)},getKey:function(a){return a.field},isValid:function(){return this.length===0},getByField:function(b){var a=this.get(b);if(a&&!Ext.isArray(a)){a=[a]}return a||[]}},0,0,0,0,0,0,[Ext.data,'ErrorCollection',Ext.data,'Errors'],0);Ext.cmd.derive('Ext.data.operation.Operation',Ext.Base,{alternateClassName:'Ext.data.Operation',isOperation:!0,config:{synchronous:!1,url:'',params:undefined,callback:undefined,scope:undefined,resultSet:null,response:null,request:null,records:null,id:undefined,proxy:null,batch:null,recordCreator:null,internalCallback:null,internalScope:null},order:0,foreignKeyDirection:1,started:!1,running:!1,complete:!1,success:undefined,exception:!1,error:undefined,idPrefix:'ext-operation-',constructor:function(a){var b=a&&a.scope;this.initConfig(a);if(a){a.scope=b}if(b){this.setScope(b);this.initialConfig.scope=b}this._internalId=Ext.id(this,this.idPrefix)},getAction:function(){return this.action},execute:function(){var a=this,b;delete a.error;delete a.success;a.complete=a.exception=!1;a.setStarted();a.request=b=a.doExecute();if(b){b.setOperation(a)}return b},doExecute:Ext.emptyFn,abort:function(){var a=this,b=a.request;if(a.running&&b){a.getProxy().abort(b);a.request=null}},process:function(c,e,d,b){var a=this;b=b!==!1;a.setResponse(d);a.setResultSet(c);if(c.getSuccess()){a.doProcess(c,e,d);a.setSuccessful(b)}else {if(b){a.setException(c.getMessage())}}},_commitSetOptions:{convert:!0,commit:!0},doProcess:function(l,n,m){var j=this,i=j._commitSetOptions,e=j.getRecords(),k=e.length,g=e[0].clientIdProperty,f=l.getRecords(),h=f?f.length:0,d,c,b,a;if(h&&g){d=Ext.Array.toValueMap(e,'id');for(a=0;a<h;++a){c=f[a];b=d[c[g]];if(b){delete d[b.id];delete c[g];b.set(c,i)}}for(a in d){d[a].commit()}}else {for(a=0;a<k;++a){b=e[a];if(h===0||!(c=f[a])){b.commit()}else {b.set(c,i)}}}},setStarted:function(){this.started=this.running=!0},setCompleted:function(){var a=this,b=a.getProxy();a.complete=!0;a.running=!1;a.triggerCallbacks();if(b){b.completeOperation(a)}},setSuccessful:function(a){this.success=!0;if(a){this.setCompleted()}},setException:function(b){var a=this;a.exception=!0;a.success=a.running=!1;a.error=b;a.setCompleted()},triggerCallbacks:function(){var a=this,b=a.getInternalCallback();if(b){b.call(a.getInternalScope()||a,a);a.setInternalCallback(null);a.setInternalScope(null)}if(b=a.getCallback()){b.call(a.getScope()||a,a.getRecords(),a,a.wasSuccessful());a.setCallback(null);a.setScope(null)}},hasException:function(){return this.exception},getError:function(){return this.error},getRecords:function(){var a;return this._records||((a=this.getResultSet())?a.getRecords():null)},isStarted:function(){return this.started},isRunning:function(){return this.running},isComplete:function(){return this.complete},wasSuccessful:function(){return this.isComplete()&&this.success===!0},allowWrite:function(){return !0}},1,0,0,0,0,0,[Ext.data.operation,'Operation',Ext.data,'Operation'],0);Ext.cmd.derive('Ext.data.operation.Create',Ext.data.operation.Operation,{action:'create',isCreateOperation:!0,order:10,config:{recordCreator:Ext.identityFn},doExecute:function(){return this.getProxy().create(this)}},0,0,0,0,['data.operation.create'],0,[Ext.data.operation,'Create'],0);Ext.cmd.derive('Ext.data.operation.Destroy',Ext.data.operation.Operation,{action:'destroy',isDestroyOperation:!0,order:30,foreignKeyDirection:-1,doProcess:function(){var b=this.getRecords(),c=b.length,a;for(a=0;a<c;++a){b[a].setErased()}},doExecute:function(){return this.getProxy().erase(this)},getRecordData:function(a,e){var b={},d=a.idField,c=this.getNameProperty()||'name';b[d[c]]=a.id;return b}},0,0,0,0,['data.operation.destroy'],0,[Ext.data.operation,'Destroy'],0);Ext.cmd.derive('Ext.data.operation.Read',Ext.data.operation.Operation,{action:'read',isReadOperation:!0,config:{filters:undefined,sorters:undefined,grouper:undefined,start:undefined,limit:undefined,page:undefined,addRecords:!1},doExecute:function(){return this.getProxy().read(this)},doProcess:Ext.emptyFn,allowWrite:function(){return !1}},0,0,0,0,['data.operation.read'],0,[Ext.data.operation,'Read'],0);Ext.cmd.derive('Ext.data.operation.Update',Ext.data.operation.Operation,{action:'update',isUpdateOperation:!0,order:20,config:{recordCreator:Ext.identityFn},doExecute:function(){return this.getProxy().update(this)}},0,0,0,0,['data.operation.update'],0,[Ext.data.operation,'Update'],0);Ext.cmd.derive('Ext.data.SortTypes',Ext.Base,{singleton:!0,none:Ext.identityFn,stripCommasRe:/,/g,stripTagsRE:/<\/?[^>]+>/gi,asText:function(a){return a!=null?String(a).replace(this.stripTagsRe,''):'\x00'},asUCText:function(a){return a!=null?String(a).toUpperCase().replace(this.stripTagsRe,''):'\x00'},asUCString:function(a){return a!=null?String(a).toUpperCase():'\x00'},asDate:function(a){if(!a){return 0}if(Ext.isDate(a)){return a.getTime()}return Date.parse(String(a))},asFloat:function(b){var a=parseFloat(String(b).replace(this.stripCommasRe,''));return isNaN(a)?0:a},asInt:function(b){var a=parseInt(String(b).replace(this.stripCommasRe,''),10);return isNaN(a)?0:a}},0,0,0,0,0,0,[Ext.data,'SortTypes'],0);Ext.cmd.derive('Ext.data.validator.Validator',Ext.Base,{isValidator:!0,type:'base',statics:{all:{},register:function(a,c){var b=this.all;b[a.toUpperCase()]=b[a.toLowerCase()]=b[a]=c.prototype}},onClassExtended:function(b,a){if(a.type){Ext.data.validator.Validator.register(a.type,b)}},constructor:function(a){if(typeof a==='function'){this.fnOnly=!0;this.validate=a}else {this.initConfig(a)}},validate:function(){return !0},clone:function(){var a=this;if(a.fnOnly){return new Ext.data.validator.Validator(a.validate)}return new a.self(a.getCurrentConfig())}},1,0,0,0,['data.validator.base'],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.validator,'Validator'],function(){this.register(this.prototype.type,this)});Ext.cmd.derive('Ext.data.field.Field',Ext.Base,{alternateClassName:'Ext.data.Field',aliasPrefix:'data.field.',type:'auto',factoryConfig:{defaultProperty:'name'},isDataField:!0,isField:!0,allowBlank:!0,allowNull:!1,critical:!1,defaultInvalidMessage:'This field is invalid',defaultValue:undefined,definedBy:null,depends:null,dependents:null,mapping:null,name:null,ordinal:undefined,persist:null,reference:null,unique:!1,rank:null,stripRe:/[\$,%]/g,calculated:!1,evil:!1,identifier:!1,onClassExtended:function(f,d){var b=d.sortType,c=f.prototype,e=c.validators,a=d.validators;if(b&&Ext.isString(b)){c.sortType=Ext.data.SortTypes[b]}if(a){if(!Ext.isArray(a)){a=[a]}delete d.validators;if(e){a=e.concat(a)}c.validators=a}},argumentNamesRe:/^function\s*\(\s*([^,\)\s]+)/,calculateRe:/[^\.a-z0-9_]([a-z_][a-z_0-9]*)\.([a-z_][a-z_0-9]*)/gi,constructor:function(d){var a=this,n=a.calculateRe,c,l,f,h,b,j,e,m,k,i,g;if(d){if(Ext.isString(d)){a.name=d}else {g=d.validators;if(g){delete d.validators;a.instanceValidators=g}Ext.apply(a,d)}}if(!a.allowNull){a.allowNull=!!a.reference}c=a.calculate;b=a.depends;if(c){a.convert=a.doCalculate;if(!b){if(!(b=c.$depends)){j={};k=c.toString();c.$depends=b=[];e=a.argumentNamesRe.exec(k);m=e?e[1]:'data';while(e=n.exec(k)){if(m===e[1]&&!j[i=e[2]]){j[i]=1;b.push(i)}}}a.depends=b}}f=a.defaultValue;if(a.convert){a.calculated=l=a.convert.length>1;a.evil=l&&!b}if(a.persist===null){a.persist=!c}h=a.sortType;if(!a.sortType){a.sortType=Ext.data.SortTypes.none}else {if(Ext.isString(h)){a.sortType=Ext.data.SortTypes[h]}}if(b&&typeof b==='string'){a.depends=[b]}a.cloneDefaultValue=f!==undefined&&(Ext.isDate(f)||Ext.isArray(f)||Ext.isObject(f))},setModelValidators:function(a){this._validators=null;this.modelValidators=a},compileValidators:function(){var a=this;a._validators=[];a.constructValidators(a.validators);a.constructValidators(a.modelValidators);a.constructValidators(a.instanceValidators)},constructValidators:function(a){if(a){if(!(a instanceof Array)){a=[a]}var d=a.length,e=this._validators,c,b;for(c=0;c<d;++c){b=a[c];if(b.fn){b=b.fn}e.push(Ext.Factory.dataValidator(b))}}},collate:function(d,e){var c=this,a=d,b=e;if(c.sortType){a=c.sortType(a);b=c.sortType(b)}return a===b?0:a<b?-1:1},compare:function(a,b){return a===b?0:a<b?-1:1},isEqual:function(a,b){return this.compare(a,b)===0},convert:null,serialize:null,validate:function(k,f,h,j){var c=this,b='',a,g,e,i,d;if(!c._validators){c.compileValidators()}e=c._validators;for(d=0,i=e.length;d<i;++d){g=e[d];a=g.validate(k,j);if(a!==!0){a=a||c.defaultInvalidMessage;if(h){h.add(c.name,a);b=b||a}else {if(f){if(b){b+=f}b+=a}else {b=a;break}}}}return b||!0},doCalculate:function(b,a){return a?this.calculate(a.data):b},getName:function(){return this.name},getAllowBlank:function(){return this.allowBlank},getAllowNull:function(){return this.allowNull},getConvert:function(){return this.convert},getDefaultValue:function(){return this.defaultValue},getDepends:function(){return this.depends},getMapping:function(){return this.mapping},hasMapping:function(){var a=this.mapping;return !!(a||a===0)},getPersist:function(){return this.persist},getSortType:function(){return this.sortType},getType:function(){return 'auto'},deprecated:{'5.1':{methods:{getSortDir:function(){return this.sortDir}}}}},1,0,0,0,['data.field.auto'],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.field,'Field',Ext.data,'Field'],0);Ext.cmd.derive('Ext.data.field.Boolean',Ext.data.field.Field,{isBooleanField:!0,trueRe:/^\s*(?:true|yes|on|1)\s*$/i,convert:function(a){if(typeof a==='boolean'){return a}if(this.allowNull&&(a===undefined||a===null||a==='')){return null}return this.trueRe.test(String(a))},getType:function(){return 'bool'}},0,0,0,0,['data.field.bool','data.field.boolean'],0,[Ext.data.field,'Boolean'],0);Ext.cmd.derive('Ext.data.field.Date',Ext.data.field.Field,{sortType:'asDate',isDateField:!0,dateFormat:null,dateReadFormat:null,dateWriteFormat:null,compare:function(d,e){var b=d instanceof Date,c=e instanceof Date,a;if(c&&b){a=d.getTime()-e.getTime();if(a===0){a=0}else {a=a<0?-1:1}}else {if(b===c){a=0}else {a=b?1:-1}}return a},convert:function(a){if(!a){return null}if(a instanceof Date){return a}var c=this.dateReadFormat||this.dateFormat,b;if(c){return Ext.Date.parse(a,c)}b=Date.parse(a);return b?new Date(b):null},serialize:function(b){var c=null,a;if(Ext.isDate(b)){a=this.getDateWriteFormat();c=a?Ext.Date.format(b,a):b}return c},getDateFormat:function(){return this.dateFormat},getDateReadFormat:function(){return this.dateReadFormat},getDateWriteFormat:function(){var a=this;if(a.hasOwnProperty('dateWriteFormat')){return a.dateWriteFormat}if(a.hasOwnProperty('dateFormat')){return a.dateFormat}return a.dateWriteFormat||a.dateFormat||'timestamp'},getType:function(){return 'date'}},0,0,0,0,['data.field.date'],0,[Ext.data.field,'Date'],0);Ext.cmd.derive('Ext.data.field.Integer',Ext.data.field.Field,{isNumeric:!0,isIntegerField:!0,numericType:'int',convert:function(a){if(typeof a==='number'){return this.getNumber(a)}var d=a===undefined||a===null||a==='',c=this.allowNull,b;if(d){b=c?null:0}else {b=this.parse(a);if(c&&isNaN(b)){b=null}}return b},getNumber:function(a){return parseInt(a,10)},getType:function(){return this.numericType},parse:function(a){return parseInt(String(a).replace(this.stripRe,''),10)},sortType:function(a){if(a==null){a=Infinity}return a}},0,0,0,0,['data.field.int','data.field.integer'],0,[Ext.data.field,'Integer'],0);Ext.cmd.derive('Ext.data.field.Number',Ext.data.field.Integer,{isIntegerField:!1,isNumberField:!0,numericType:'float',getNumber:Ext.identityFn,parse:function(a){return parseFloat(String(a).replace(this.stripRe,''))}},0,0,0,0,['data.field.float','data.field.number'],0,[Ext.data.field,'Number'],0);Ext.cmd.derive('Ext.data.field.String',Ext.data.field.Field,{sortType:'asUCString',isStringField:!0,convert:function(a){var b=this.allowNull?null:'';return a===undefined||a===null?b:String(a)},getType:function(){return 'string'}},0,0,0,0,['data.field.string'],0,[Ext.data.field,'String'],0);Ext.cmd.derive('Ext.data.identifier.Generator',Ext.Base,{'abstract':!0,factoryConfig:{defaultType:'sequential'},isGenerator:!0,config:{id:null},constructor:function(c){var b=this,a;b.initConfig(c);a=b.getId();if(a){Ext.data.identifier.Generator.all[a]=b}},privates:{clone:function(b){var a=this.getInitialConfig();a=b?Ext.apply({},b,a):a;return new this.self(a)},statics:{all:{}}}},1,0,0,0,['data.identifier.default'],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.identifier,'Generator'],function(){var b=this,a=Ext.Factory,c=a.dataIdentifier;a.dataIdentifier=function(a){var d=Ext.isString(a)?a:a&&a.id,e=d&&b.all[d];return e||c(a)}});Ext.cmd.derive('Ext.data.identifier.Sequential',Ext.data.identifier.Generator,{config:{increment:1,prefix:null,seed:1},generate:function(){var a=this,c=a._seed,b=a._prefix;a._seed+=a._increment;return b!==null?b+c:c}},0,0,0,0,['data.identifier.sequential'],0,[Ext.data.identifier,'Sequential'],0);Ext.cmd.derive('Ext.data.Model',Ext.Base,{alternateClassName:'Ext.data.Record',isEntity:!0,isModel:!0,validIdRe:null,erasing:!1,observableType:'record',constructor:function(b,e){var a=this,c=a.self,g=c.identifier,n=Ext.data.Model,k=n.identifier,l=a.idField.name,j,d,h,m,o,f,i;a.data=a.data=b||(b={});a.session=e||null;a.internalId=m=k.generate();if((j=b) instanceof Array){a.data=b={};i=a.getFields();o=Math.min(i.length,j.length);for(f=0;f<o;++f){b[i[f].name]=j[f]}}if(!(h=c.initializeFn)){c.initializeFn=h=n.makeInitializeFn(c)}if(!h.$nullFn){c.initializeFn(a)}if(!(a.id=d=b[l])&&d!==0){if(e){g=e.getIdentifier(c);d=g.generate()}else {if(k===g){d=m}else {d=g.generate()}}b[l]=a.id=d;a.phantom=!0}if(e){e.add(a)}if(a.init&&Ext.isFunction(a.init)){a.init()}},editing:!1,dirty:!1,session:null,dropped:!1,erased:!1,clientIdProperty:null,evented:!1,phantom:!1,idProperty:'id',manyToMany:null,identifier:null,previousValues:undefined,proxy:undefined,schema:'default',versionProperty:null,generation:1,validationSeparator:null,convertOnSet:!0,beginEdit:function(){var a=this,c=a.modified,b=a.previousValues;if(!a.editing){a.editing=!0;a.editMemento={dirty:a.dirty,data:Ext.apply({},a.data),generation:a.generation,modified:c&&Ext.apply({},c),previousValues:b&&Ext.apply({},b)}}},cancelEdit:function(){var a=this,b=a.editMemento;if(b){a.editing=!1;Ext.apply(a,b);a.editMemento=null}},endEdit:function(d,b){var a=this,c=a.editMemento;if(c){a.editing=!1;a.editMemento=null;a.previousValues=c.previousValues;if(!d){if(!b){b=a.getModifiedFieldNames(c.data)}if(a.dirty||b&&b.length){a.callJoined('afterEdit',[b])}}}},getField:function(a){return this.self.getField(a)},getFields:function(){return this.self.getFields()},getFieldsMap:function(){return this.fieldsMap},getIdProperty:function(){return this.idProperty},getId:function(){return this.id},getObservableId:function(){return this.internalId},setId:function(b,a){this.set(this.idProperty,b,a)},getPrevious:function(b){var a=this.previousValues;return a&&a[b]},isModified:function(b){var a=this.modified;return !!(a&&a.hasOwnProperty(b))},getModified:function(a){var b;if(this.isModified(a)){b=this.modified[a]}return b},get:function(a){return this.data[a]},_singleProp:{},_rejectOptions:{convert:!1,silent:!0},set:function(i,A,K){var a=this,G=a.self,v=a.data,f=a.modified,B=a.previousValues,t=a.session,n=Ext.isString(i),e=n?K:A,y=e?e.convert!==!1:a.convertOnSet,J=a.fieldsMap,E=e&&e.silent,D=e&&e.commit,I=!(e&&e.refs===!1)&&t,F=!(e&&e.dirty===!1&&!D),k=null,d=0,q=a.associations,j,b,z,H,c,u,o,w,r,x,s,p,l,m,h,g,C;if(n){g=a._singleProp;g[i]=A}else {g=i}if(!(l=G.rankedFields)){l=G.rankFields()}s=l.length;do{for(c in g){h=g[c];j=v[c];o=a;b=J[c];if(b){if(y&&b.convert){h=b.convert(h,a)}o=b;m=b.reference}else {m=null}if(o.isEqual(j,h)){continue}v[c]=h;(k||(k=[])).push(c);(B||(a.previousValues=B={}))[c]=j;if(m&&m.cls){if(I){t.updateReference(a,b,h,j)}m.onValueChange(a,t,h,j)}x=(r=b&&b.dependents)&&r.length;while(x-->0){(w=r[x]).dirty=!0;d=d?Math.min(d,w.rank):w.rank}if(!b||b.persist){if(f&&f.hasOwnProperty(c)){if(!F||o.isEqual(f[c],h)){delete f[c];a.dirty=-1}}else {if(F){if(!f){a.modified=f={}}a.dirty=!0;f[c]=j}}}if(c===a.idField.name){z=!0;u=j;p=h}}if(!d){break}b=l[d-1];b.dirty=!1;if(n){delete g[i]}else {g=a._singleProp;n=!0}i=b.name;g[i]=v[i];y=!0;for(;d<s;++d){if(l[d].dirty){break}}if(d<s){++d}else {d=0}}while(1);if(a.dirty<0){a.dirty=!1;for(H in f){if(f.hasOwnProperty(H)){a.dirty=!0;break}}}if(n){delete g[i]}++a.generation;if(z){a.id=p;a.callJoined('onIdChanged',[u,p]);if(q){for(C in q){q[C].onIdChanged(a,u,p)}}}if(D){a.commit(E,k)}else {if(!E&&!a.editing&&k){a.callJoined('afterEdit',[k])}}return k},reject:function(c){var a=this,b=a.modified;if(b){a.set(b,a._rejectOptions)}a.dropped=!1;a.clearState();if(!c){a.callJoined('afterReject')}},commit:function(f,e){var a=this,b=a.versionProperty,d=a.data,c;a.clearState();if(b&&!a.phantom&&!isNaN(d[b])){++d[b]}a.phantom=!1;if(a.dropped){a.erased=c=!0}if(!f){if(c){a.callJoined('afterErase')}else {a.callJoined('afterCommit',[e])}}},clearState:function(){var a=this;a.dirty=a.editing=!1;a.editMemento=a.modified=null},drop:function(d){var a=this,b=a.associations,e=a.session,c;if(a.erased||a.dropped){return}a.dropped=!0;if(b&&d!==!1){for(c in b){b[c].onDrop(a,e)}}a.callJoined('afterDrop');if(a.phantom){a.setErased()}},join:function(b){var c=this,a=c.joined;if(!a){a=c.joined=[b]}else {if(!a.length){a[0]=b}else {Ext.Array.include(a,b)}}if(b.isStore&&!c.store){c.store=b}},unjoin:function(b){var f=this,a=f.joined,d=a&&a.length,c=f.store,e;if(d===1&&a[0]===b){a.length=0}else {if(d){Ext.Array.remove(a,b)}}if(c===b){c=null;if(a){for(e=0,d=a.length;e<d;++e){b=a[e];if(b.isStore){c=b;break}}}f.store=c}},clone:function(d){var a=this,c=a.modified,b=a.copy(a.id,d);if(c){b.modified=Ext.apply({},c)}b.dirty=a.dirty;b.dropped=a.dropped;b.phantom=a.phantom;return b},copy:function(a,e){var c=this,b=Ext.apply({},c.data),d=c.idProperty,f=c.self;if(a||a===0){b[d]=a}else {if(a===null){delete b[d]}}return new f(b,e)},getProxy:function(){return this.self.getProxy()},getValidation:function(c){var b=this,a=b.validation;if(!a){b.validation=a=new Ext.data.Validation();a.attach(b)}if(c===!0||c!==!1&&a.syncGeneration!==b.generation){a.refresh(c)}return a},validate:function(){return (new Ext.data.ErrorCollection()).init(this)},isValid:function(){return this.getValidation().isValid()},toUrl:function(){var a=this.$className.split('.'),b=a[a.length-1].toLowerCase();return b+'/'+this.getId()},erase:function(b){var a=this;a.erasing=!0;a.drop();a.erasing=!1;return a.save(b)},setErased:function(){this.erased=!0;this.callJoined('afterErase')},getChanges:function(){return this.getData(this._getChangesOptions)},getCriticalFields:function(){var a=this.self,b=a.criticalFields;if(!b){a.rankFields();b=a.criticalFields}return b},getAssociatedData:function(g,a){var c=this,n=c.associations,i,j,b,m,f,o,e,p,l,d,h,k;g=g||{};c.$gathering=1;if(a){a=Ext.Object.chain(a)}for(l in n){p=n[l];b=p.getAssociatedItem(c);if(!b||b.$gathering){continue}if(b.isStore){b.$gathering=1;m=b.getData().items;o=m.length;f=[];for(j=0;j<o;++j){e=m[j];i=!e.$gathering;e.$gathering=1;if(a){k=a.associated;if(k===undefined){a.associated=i;h=!0}else {if(!i){a.associated=!1;h=!0}}d=a}else {d=i?c._getAssociatedOptions:c._getNotAssociatedOptions}f.push(e.getData(d));if(h){a.associated=k;h=!1}delete e.$gathering}delete b.$gathering}else {d=a||c._getAssociatedOptions;if(a&&a.associated===undefined){d.associated=!0}f=b.getData(d)}g[l]=f}delete c.$gathering;return g},getData:function(m){var a=this,f={},e=m===!0?a._getAssociatedOptions:m||f,h=a.data,n=e.associated,k=e.changes,p=k&&e.critical,l=k?a.modified:h,o=a.fieldsMap,q=e.persist,j=e.serialize,g,b,i,d,c;if(l){for(d in l){c=h[d];b=o[d];if(b){if(q&&!b.persist){continue}if(j&&b.serialize){c=b.serialize(c,a)}}f[d]=c}}if(p){g=a.self.criticalFields||a.getCriticalFields();for(i=g.length;i-->0;){d=(b=g[i]).name;if(!(d in f)){c=h[d];if(j&&b.serialize){c=b.serialize(c,a)}f[d]=c}}}if(n){a.getAssociatedData(f,e)}return f},getTransientFields:function(){var a=this.self,b=a.transientFields;if(!b){a.rankFields();b=a.transientFields}return b},isLoading:function(){return !!this.loadOperation},abort:function(){var a=this.loadOperation;if(a){a.abort()}},load:function(a){a=Ext.apply({},a);var b=this,d=a.scope||b,g=b.getProxy(),f=a.callback,c=b.loadOperation,h=b.getId(),e;if(c){e=c.extraCalls;if(!e){e=c.extraCalls=[]}e.push(a);return c}a.id=h;a.recordCreator=function(e,f,c){var d=b.session;if(c){c.recordCreator=d?d.recordCreator:null}b.set(e,b._commitOptions);return b};a.internalCallback=function(e){var h=e.wasSuccessful()&&e.getRecords().length>0,l=b.loadOperation,i=l.extraCalls,c=[b,e],j=[b,e,h],g,k;b.loadOperation=null;if(h){Ext.callback(a.success,d,c)}else {Ext.callback(a.failure,d,c)}Ext.callback(f,d,j);if(i){for(g=0,k=i.length;g<k;++g){a=i[g];if(h){Ext.callback(a.success,d,c)}else {Ext.callback(a.failure,d,c)}Ext.callback(a.callback,d,j)}}b.callJoined('afterLoad')};delete a.callback;b.loadOperation=c=g.createOperation('read',a);c.execute();return c},save:function(a){a=Ext.apply({},a);var b=this,f=b.phantom,e=b.dropped,h=e?'destroy':f?'create':'update',d=a.scope||b,g=a.callback,i=b.getProxy(),c;a.records=[b];a.internalCallback=function(e){var c=[b,e],f=e.wasSuccessful();if(f){Ext.callback(a.success,d,c)}else {Ext.callback(a.failure,d,c)}c.push(f);Ext.callback(g,d,c)};delete a.callback;c=i.createOperation(h,a);if(e&&f){c.setResultSet(Ext.data.reader.Reader.prototype.nullResultSet);b.setErased();c.setSuccessful(!0)}else {c.execute()}return c},inheritableStatics:{addFields:function(a){this.replaceFields(a)},replaceFields:function(k,i){var c=this,m=c.prototype,n=Ext.data.field.Field,f=c.fields,j=c.fieldsMap,e=c.fieldOrdinals,d,a,g,h,b,l;if(i===!0){f.length=0;c.fieldsMap=j={};c.fieldOrdinals=e={}}else {if(i){for(a=i.length;a-->0;){b=i[a];if(b in e){delete e[b];delete j[b]}}for(a=0,h=f.length;a<h;++a){b=(d=f[a]).name;if(b in e){e[b]=a}else {f.splice(a,1);--a;--h}}}}for(a=0,h=k?k.length:0;a<h;a++){b=(d=k[a]).name;if(!(b in e)){e[b]=l=f.length;f.push(d=n.create(d));j[b]=d;d.ordinal=l;d.definedBy=d.owner=this}}c.idField=m.idField=g=j[m.idProperty];g.allowNull=g.critical=g.identifier=!0;g.defaultValue=null;c.initializeFn=c.rankedFields=c.transientFields=c.criticalFields=null},removeFields:function(a){this.replaceFields(null,a)},getIdFromData:function(b){var c=this,a=c.idField,d=a.calculated?(new c(b)).id:b[a.name];return d},createWithId:function(c,b,e){var a=b,d=this;if(c||c===0){a={};if(b){Ext.apply(a,b)}a[d.idField.name]=c}return new d(a,e)},getFields:function(){return this.fields},getFieldsMap:function(){return this.fieldsMap},getField:function(a){return this.fieldsMap[a]||null},getProxy:function(){var b=this,a=b.proxy,d=b.defaultProxy,c;if(!a){a=b.proxyConfig;if(!a&&d){a=d}if(!a||!a.isProxy){if(typeof a==='string'){a={type:a}}c=b.schema.constructProxy(b);a=a?Ext.merge(c,a):c}a=b.setProxy(a)}return a},setProxy:function(a){var b=this,c;if(a){if(!a.isProxy){a=Ext.Factory.proxy(a)}else {c=a.getModel();if(c&&c!==b){a=a.clone()}}a.setModel(b)}return b.prototype.proxy=b.proxy=a},load:function(e,c,d){var b={},a;b[this.prototype.idProperty]=e;a=new this(b,d);a.load(c);return a}},deprecated:{5:{methods:{hasId:null,markDirty:null,setDirty:null,eachStore:function(c,d){var f=this,b=f.stores,e=b.length,a;for(a=0;a<e;++a){c.call(d,b[a])}},join:function(b){var a=this,d=a.stores,c=a.joined;if(!c){c=a.joined=[b]}else {c.push(b)}if(b.isStore){a.store=a.store||b;if(!d){d=a.stores=[]}d.push(b)}},unjoin:function(b){var c=this,d=c.stores,a=c.joined;if(a.length===1){a.length=0}else {Ext.Array.remove(a,b)}if(b.isStore){Ext.Array.remove(d,b);c.store=d[0]||null}}},properties:{persistenceProperty:null},inheritableStatics:{methods:{setFields:null}}}},privates:{_commitOptions:{commit:!0},_getChangesOptions:{changes:!0},_getAssociatedOptions:{associated:!0},_getNotAssociatedOptions:{associated:!1},copyFrom:function(c){var a=this,i=a.fields,k=i.length,g=[],j,f=0,e,h,l=a.idProperty,b,d;if(c){e=a.data;h=c.data;for(;f<k;f++){j=i[f];b=j.name;if(b!==l){d=h[b];if(d!==undefined&&!a.isEqual(e[b],d)){e[b]=d;g.push(b)}}}if(a.phantom&&!c.phantom){a.beginEdit();a.setId(c.getId());a.endEdit(!0);a.commit(!0)}}return g},callJoined:function(h,a){var f=this,d=f.joined,c=f.session,g,i,b,e;if(!d&&!c){return}if(a){a.unshift(f)}else {a=[f]}if(d){for(g=0,i=d.length;g<i;++g){e=d[g];if(e&&(b=e[h])){b.apply(e,a)}}}b=c&&c[h];if(b){b.apply(c,a)}},setSession:function(a){this.session=a;if(a){a.add(this)}},getModifiedFieldNames:function(f){var c=this,b=c.data,d=[],e=f||c.editMemento.data,a;for(a in b){if(b.hasOwnProperty(a)){if(!c.isEqual(b[a],e[a],a)){d.push(a)}}}return d},isEqual:function(b,c,a){var d;if(a){d=a.isField?a:this.fieldsMap[a];if(d){return d.isEqual(b,c)}}if(b instanceof Date&&c instanceof Date){return b.getTime()===c.getTime()}return b===c},statics:{EDIT:'edit',REJECT:'reject',COMMIT:'commit',defaultProxy:'memory',rankFields:function(){var d=this,g=d.prototype,h=d.fields,f=h.length,c=[],j=[],i=[],e,a,b;d.rankedFields=g.rankedFields=c;d.criticalFields=g.criticalFields=j;d.transientFields=g.transientFields=i;for(b=0;b<f;++b){a=h[b];if(a.critical){j.push(a)}if(!a.persist){i.push(a)}if(a.evil){(e||(e=[])).push(a)}else {if(!a.depends){c.push(a);a.rank=c.length}}}for(b=0;b<f;++b){if(!(a=h[b]).rank&&!a.evil){d.topoAdd(a)}}if(e){for(b=0,f=e.length;b<f;++b){c.push(a=e[b]);a.rank=c.length}}return c},topoAdd:function(b){var d=this,e=b.depends,g=e?e.length:0,f=d.rankedFields,c,a;for(c=0;c<g;++c){a=d.fieldsMap[e[c]];(a.dependents||(a.dependents=[])).push(b);if(!a.rank){d.topoAdd(a)}}f.push(b);b.rank=f.length},initFields:function(u,g,j){var t=Ext.data.field.Field,q=u.fields,e=[],h={},f={},v=[],r=j.fields,p=u.versionProperty||j.versionProperty,l=g.idProperty,d,a,b,n,k,c,m,i,o,s;g.fields=j.fields=e;g.fieldOrdinals=j.fieldOrdinals=h;g.fieldsMap=j.fieldsMap=f;g.references=j.references=v;if(r){for(b=0,n=r.length;b<n;++b){e[b]=a=Ext.Object.chain(r[b]);a.dependents=null;a.owner=g;h[k=a.name]=b;f[k]=a;a.rank=null;if(a.generated){i=a;o=a.name}}}if(q){delete u.fields;for(b=0,n=q.length;b<n;++b){a=q[b];m=a.reference;if(m&&typeof m!=='string'){m=Ext.merge({},m)}a.$reference=m;a=t.create(q[b]);k=a.name;c=h[k];if(c===undefined){h[k]=c=e.length}f[k]=a;e[c]=a;a.definedBy=a.owner=g;a.ordinal=c;if(k===l){s=a}}}d=f[l];if(!d){if(i&&i.generated){c=i.ordinal}else {c=e.length}delete f[o];delete h[o];d=new t(l);e[c]=d;h[l]=c;f[l]=d;d.definedBy=g;d.ordinal=c;d.generated=!0}else {if(s&&i&&i.generated){Ext.Array.remove(e,i);delete f[o];delete h[o];f[l]=s;for(b=0,n=e.length;b<n;++b){a=e[b];e.ordinal=b;h[a.name]=b}}}d.allowNull=d.critical=d.identifier=!0;d.defaultValue=null;g.idField=j.idField=d;if(p){a=f[p];if(!a){c=e.length;a=new t({name:p,type:'int'});e[c]=a;h[p]=c;f[p]=a;a.definedBy=g;a.ordinal=c;a.generated=!0}a.defaultValue=1;a.critical=!0}},initValidators:function(j,n,m){var i=m.validators,b,e,g,c,h,l,d,a,k,f;if(i){b={};for(e in i){b[e]=Ext.Array.clone(i[e])}}c=j.validators||j.validations;if(c){delete j.validators;b=b||{};if(Ext.isArray(c)){g={};for(h=0,l=c.length;h<l;++h){f=c[h];a=f.field;if(!g[a]){g[a]=[]}f=f.fn||f;g[a].push(f)}c=g}for(a in c){d=c[a];if(!Ext.isArray(d)){d=[d]}k=b[a];if(b[a]){Ext.Array.push(k,d)}else {b[a]=d}}}if(b){for(a in b){e=n.getField(a);if(e){e.setModelValidators(b[a])}}}n.validators=m.validators=b},initAssociations:function(d,b,e){var f=b.associations,g=b.belongsTo,h=b.hasMany,i=b.hasOne,k=b.manyToMany,a,c,j;delete b.manyToMany;if(k){d.addMatrices(e,k)}delete b.associations;delete b.belongsTo;delete b.hasMany;delete b.hasOne;if(f){f=Ext.isArray(f)?f:[f];for(a=0,c=f.length;a<c;++a){j=f[a];switch(j.type){case 'belongsTo':d.addLegacyBelongsTo(e,j);break;case 'hasMany':d.addLegacyHasMany(e,j);break;case 'hasOne':d.addLegacyHasOne(e,j);break;}}}if(g){g=Ext.isArray(g)?g:[g];for(a=0,c=g.length;a<c;++a){d.addLegacyBelongsTo(e,g[a])}}if(h){h=Ext.isArray(h)?h:[h];for(a=0,c=h.length;a<c;++a){d.addLegacyHasMany(e,h[a])}}if(i){i=Ext.isArray(i)?i:[i];for(a=0,c=i.length;a<c;++a){d.addLegacyHasOne(e,i[a])}}d.afterLegacyAssociations(e)},initIdentifier:function(d,e,f){var a=d.identifier||d.idgen,b=f.identifier||e.schema._defaultIdentifier,c;if(a){delete d.identifier;delete d.idgen;a=Ext.Factory.dataIdentifier(a)}else {if(b){if(b.clone&&!b.getId()){a=b.clone()}else {if(b.isGenerator){a=b}else {a=Ext.Factory.dataIdentifier(b)}}}}e.identifier=f.identifier=a;if(!a){c=e.entityName;if(!c){c=Ext.id(null,'extModel')}e.identifier=Ext.Factory.dataIdentifier({type:'sequential',prefix:c+'-'})}},findValidator:function(f,g,d){var h=d.type||d,b=f[g],e,a,c;if(b){for(a=0,e=b.length;a<e;++a){c=b[a];if(c.type===h){return c}}}return null},makeInitializeFn:function(o){var a=['var '],g=['\nreturn function (e) {\n    var data = e.data, v;\n'],n=0,i,j,h,b,l,f,e,d,k,c,m;if(!(e=o.rankedFields)){e=o.rankFields()}for(c=0,m=e.length;c<m;++c){f=e[c];d='f'+c;h=f.convert;if(c){a.push(',  \n    ')}a.push(d,' = $fields['+c+']');if((k=f.defaultValue!==undefined)||h){b='data["'+f.name+'"]';++n;i=j='';if(f.cloneDefaultValue){i='Ext.clone(';j=')'}g.push('\n');if(h&&k){g.push('    v = ',b,';\n    if (v !== undefined) {\n        v = ',d,'.convert(v, e);\n    }\n    if (v === undefined) {\n        v = ',i,d,'.defaultValue',j,';\n    }\n    ',b,' = v;')}else {if(h){g.push('    v = ',d,'.convert(',b,',e);\n    if (v !== undefined) {\n        ',b,' = v;\n    }\n')}else {if(k){g.push('    if (',b,' === undefined) {\n        ',b,' = ',i,d,'.defaultValue',j,';\n    }\n')}}}}}if(!n){return Ext.emptyFn}a.push(';\n');a.push.apply(a,g);a.push('}');a=a.join('');l=new Function('$fields','Ext',a);return l(e,Ext)}}}},1,0,0,0,0,0,[Ext.data,'Model',Ext.data,'Record'],function(){var a=this,b=a.prototype,c=Ext.data.schema.Schema,d;a.proxyConfig=b.proxy;delete b.proxy;a.fields=[];a.fieldsMap=b.fieldsMap={};a.schema=b.schema=c.get(b.schema);b.idField=new Ext.data.field.Field(b.idProperty);a.identifier=new Ext.data.identifier.Sequential();a.onExtended(function(b,e){var f=b.prototype,k=e.schema,j=f.superclass.self,g,h,i;b.idProperty=e.idProperty||f.idProperty;if(k){delete e.schema;g=c.get(k)}else {if(!(g=f.schema)){g=d||(d=c.get('default'))}}b.rankFields=a.rankFields;b.topoAdd=a.topoAdd;f.schema=b.schema=g;if(!(h=e.entityName)){f.entityName=h=g.getEntityName(b)}b.entityName=h;b.fieldExtractors={};a.initIdentifier(e,b,f);a.initFields(e,b,f);a.initValidators(e,b,f);b.fields.items=b.fields;if(h){g.addEntity(b);a.initAssociations(g,e,b)}i=e.proxy;if(i){delete e.proxy}else {if(j!==a){i=j.proxyConfig||j.proxy}}b.proxyConfig=i})});Ext.define('TS.overrides.data.Model',{override:'Ext.data.Model',compatibility:'6.0.2',onAssociatedRecordSet:function(a,b){this.callJoined('afterAssociatedRecordSet',[a,b])},inheritableStatics:{createWithAssociations:function(a){var a=a||{},b=this.extractAssociations(),c=Ext.applyIf(a,b);return this.getProxy().getReader().read([c]).getRecords()[0]},extractAssociations:function(){var b=this.associations,a,c={};for(a in b){if(b[a].hasOwnProperty('model')&&a.indexOf('.')===-1){c[b[a].role]=b[a].single?{}:[]}}return c}}});Ext.cmd.derive('Ext.data.ResultSet',Ext.Base,{isResultSet:!0,$configPrefixed:!1,config:{loaded:!0,count:null,total:null,success:!1,records:null,message:null,metadata:null},constructor:function(a){this.initConfig(a)},getCount:function(){var b=(arguments.callee.$previous||Ext.Base.prototype.getCount).call(this),a;if(!b){a=this.getRecords();if(a){b=a.length}}return b}},1,0,0,0,0,0,[Ext.data,'ResultSet'],0);Ext.cmd.derive('Ext.data.reader.Reader',Ext.Base,{alternateClassName:['Ext.data.Reader','Ext.data.DataReader'],factoryConfig:{defaultType:null},config:{totalProperty:'total',successProperty:'success',rootProperty:'',messageProperty:'',typeProperty:'',implicitIncludes:!0,readRecordsOnFailure:!0,model:null,proxy:null,transform:null,keepRawData:null},isReader:!0,constructor:function(a){if(a&&a.hasOwnProperty('root')){a=Ext.apply({},a);a.rootProperty=a.root;delete a.root}var b=this;b.duringInit=1;b.mixins.observable.constructor.call(b,a);--b.duringInit;b.buildExtractors()},applyModel:function(a){return Ext.data.schema.Schema.lookupEntity(a)},applyTransform:function(a){if(a){if(Ext.isFunction(a)){a={fn:a}}else {if(a.charAt){a={fn:this[a]}}}return a.fn.bind(a.scope||this)}return a},forceBuildExtractors:function(){if(!this.duringInit){this.buildExtractors(!0)}},updateTotalProperty:function(){this.forceBuildExtractors()},updateMessageProperty:function(){this.forceBuildExtractors()},updateSuccessProperty:function(){this.forceBuildExtractors()},read:function(b,d){var c,a;if(b){if(b.responseText){a=this.getResponseData(b);if(a&&a.__$isError){return new Ext.data.ResultSet({total:0,count:0,records:[],success:!1,message:a.msg})}else {c=this.readRecords(a,d)}}else {c=this.readRecords(b,d)}}return c||this.nullResultSet},getNullResultSet:function(){return this.nullResultSet},createReadError:function(a){return {__$isError:!0,msg:a}},readRecords:function(b,m,f){var a=this,n=f&&f.recordsOnly,o=f&&f.asRoot,h,g,d,e,k,c,l,j,i;i=a.getMeta?a.getMeta(b):b.metaData;if(i){a.onMetaChange(i)}j=a.getTransform();if(j){b=j(b)}a.buildExtractors();if(a.getKeepRawData()){a.rawData=b}if(a.hasListeners.rawdata){a.fireEventArgs('rawdata',[b])}b=a.getData(b);h=!0;g=0;d=[];if(a.getSuccessProperty()){c=a.getSuccess(b);if(c===!1||c==='false'){h=!1}}if(a.getMessageProperty()){l=a.getMessage(b)}if(h||a.getReadRecordsOnFailure()){e=o||Ext.isArray(b)?b:a.getRoot(b);if(e){k=e.length}if(a.getTotalProperty()){c=parseInt(a.getTotal(b),10);if(!isNaN(c)){k=c}}if(e){d=a.extractData(e,m);g=d.length}}return n?d:new Ext.data.ResultSet({total:k||g,metadata:i,count:g,records:d,success:h,message:l})},extractData:function(f,c){var b=this,h=c&&c.model?Ext.data.schema.Schema.lookupEntity(c.model):b.getModel(),k=h.schema,o=k.hasAssociations(h)&&b.getImplicitIncludes(),n=b.getFieldExtractorInfo(h.fieldExtractors),i=f.length,m=new Array(i),l=b.getTypeProperty(),j,e,d,a,g;if(!i&&Ext.isObject(f)){f=[f];i=1}for(g=0;g<i;g++){a=f[g];if(!a.isModel){e=a;if(l&&(d=b.getChildType(k,e,l))){j=d.getProxy().getReader();a=j.extractRecord(e,c,d,k.hasAssociations(d)&&j.getImplicitIncludes(),j.getFieldExtractorInfo(d.fieldExtractors))}else {a=b.extractRecord(e,c,h,o,n)}if(a.isModel&&a.isNode){a.raw=e}}if(a.onLoad){a.onLoad()}m[g]=a}return m},getChildType:function(d,c,a){var b;switch(typeof a){case 'string':return d.getEntity(c[a]);case 'object':b=a.namespace;return d.getEntity((b?b+'.':'')+c[a.name]);case 'function':return d.getEntity(a(c));}},extractRecordData:function(d,a){var b=a&&a.model?Ext.data.schema.Schema.lookupEntity(a.model):this.getModel(),c=this.getFieldExtractorInfo(b.fieldExtractors);return this.extractRecord(d,a,b,!1,c)},extractRecord:function(e,b,g,i,f){var a=this,h=b&&b.recordCreator||a.defaultRecordCreator,d,c;d=a.extractModelData(e,f);c=h.call(a,d,g||a.getModel(),b);if(i&&c.isModel){a.readAssociated(c,e,b)}return c},getFieldExtractorInfo:function(a){if(!a){return}var c=this.$className,b=a[c];if(b===undefined){a[c]=b=this.buildFieldExtractors()}return b},buildFieldExtractors:function(){var f=this.getFields(),j=f.length,c=[],e=[],i=null,h=0,d,g,a,b;for(a=0;a<j;++a){d=f[a];b=this.createFieldAccessor(d);if(b){g=d.name;c.push('val = extractors['+h+"](raw); if (val !== undefined) { data['"+g+"'] = val; }");e.push(b);++h}}if(c.length){i={extractors:e,fn:new Function('raw','data','extractors','var val;'+c.join(''))}}return i},defaultRecordCreator:function(c,b){var a=new b(c);a.phantom=!1;return a},getModelData:function(a){return {}},extractModelData:function(c,a){var b=this.getModelData(c),d;if(a){d=a.fn;d(c,b,a.extractors)}return b},readAssociated:function(d,f,e){var a=d.associations,c,b;for(c in a){if(a.hasOwnProperty(c)){b=a[c];if(b.cls){b.read(d,f,this,e)}}}},getFields:function(){return this.getModel().fields},getData:Ext.identityFn,getRoot:Ext.identityFn,getResponseData:function(a){},onMetaChange:function(a){var b=this,g=a.fields,e,d,c,f;b.metaData=a;if(a.root){b.setRootProperty(a.root)}if(a.totalProperty){b.setTotalProperty(a.totalProperty)}if(a.successProperty){b.setSuccessProperty(a.successProperty)}if(a.messageProperty){b.setMessageProperty(a.messageProperty)}c=a.clientIdProperty;if(g){d=Ext.define(null,{extend:'Ext.data.Model',fields:g,clientIdProperty:c});b.setModel(d);f=b.getProxy();if(f){f.setModel(d)}}else {if(c){e=b.getModel();if(e){e.self.prototype.clientIdProperty=c}}}},buildExtractors:function(e){var a=this,d,c,b;if(e||!a.hasExtractors){d=a.getTotalProperty();c=a.getSuccessProperty();b=a.getMessageProperty();if(d){a.getTotal=a.getAccessor(d)}if(c){a.getSuccess=a.getAccessor(c)}if(b){a.getMessage=a.getAccessor(b)}a.hasExtractors=!0;return !0}},getAccessor:function(b){var c=this,e=c.extractorCache,a,d;if(typeof b==='string'){d=c.getAccessorKey(b);a=e.get(d);if(!a){a=c.createAccessor(b);e.add(d,a)}}else {a=c.createAccessor(b)}return a},getAccessorKey:function(a){return this.$className+a},createAccessor:Ext.emptyFn,createFieldAccessor:Ext.emptyFn,destroy:function(){var a=this;a.model=a.getTotal=a.getSuccess=a.getMessage=a.rawData=null;a.onMetaChange=null;a.transform=null;a.callParent()},privates:{copyFrom:function(b){var a=this;b.buildExtractors();a.getTotal=b.getTotal;a.getSuccess=b.getSuccess;a.getMessage=b.getMessage;++a.duringInit;a.setConfig(b.getConfig());--a.duringInit;a.hasExtractors=!0}}},1,0,0,0,['reader.base'],[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable],[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.reader,'Reader',Ext.data,'Reader',Ext.data,'DataReader'],function(b){var a=b.prototype;Ext.apply(a,{nullResultSet:new Ext.data.ResultSet({total:0,count:0,records:[],success:!0,message:''})});a.extractorCache=new Ext.util.LruCache()});Ext.cmd.derive('Ext.data.writer.Writer',Ext.Base,{factoryConfig:{defaultType:null},alternateClassName:['Ext.data.DataWriter','Ext.data.Writer'],config:{clientIdProperty:null,allDataOptions:{persist:!0},partialDataOptions:{changes:!0,critical:!0},writeAllFields:!1,dateFormat:null,nameProperty:'name',writeRecordId:!0,transform:null},isWriter:!0,constructor:function(a){this.initConfig(a)},applyTransform:function(a){if(a){if(Ext.isFunction(a)){a={fn:a}}return a.fn.bind(a.scope||this)}return a},write:function(d){var b=d.getOperation(),c=b.getRecords()||[],f=c.length,e=[],a;for(a=0;a<f;a++){e.push(this.getRecordData(c[a],b))}return this.writeRecords(d,e)},writeRecords:Ext.emptyFn,getRecordData:function(e,p){var d=this,j=d.getNameProperty(),l=j!=='name',h=e.self.idField,b=h[j]||h.name,a=e.id,q=d.getWriteAllFields(),c,k,n,m,i,o,f,g;if(h.serialize){a=h.serialize(a)}if(!q&&p&&p.isDestroyOperation){c={};c[b]=a}else {k=d.getDateFormat();n=e.phantom;m=n||q?d.getAllDataOptions():d.getPartialDataOptions();i=n&&d.getClientIdProperty();o=e.getFieldsMap();m.serialize=!1;f=e.getData(m);c=l?{}:f;if(i){c[i]=a;delete f[b]}else {if(!d.getWriteRecordId()){delete f[b]}}for(b in f){a=f[b];if(!(g=o[b])){if(l){c[b]=a}}else {if(g.isDateField&&k&&Ext.isDate(a)){a=Ext.Date.format(a,k)}else {if(g.serialize){a=g.serialize(a,e)}}if(l){b=g[j]||b}c[b]=a}}}return c}},1,0,0,0,['writer.base'],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.writer,'Writer',Ext.data,'DataWriter',Ext.data,'Writer'],0);Ext.cmd.derive('Ext.data.proxy.Proxy',Ext.Base,{$configPrefixed:!1,alternateClassName:['Ext.data.DataProxy','Ext.data.Proxy'],config:{batchOrder:'create,update,destroy',batchActions:!0,model:undefined,reader:{type:'json'},writer:{type:'json'}},isProxy:!0,isSynchronous:!1,constructor:function(a){this.mixins.observable.constructor.call(this,a);this.pendingOperations={}},applyModel:function(a){return Ext.data.schema.Schema.lookupEntity(a)},updateModel:function(b){if(b){var a=this.getReader();if(a&&!a.getModel()){a.setModel(b)}}},applyReader:function(a){if(this.isSynchronous){a=a||{};a.keepRawData=!0}return Ext.Factory.reader(a)},updateReader:function(b){if(b){var c=this,a=c.getModel();if(!a){a=b.getModel();if(a){c.setModel(a)}}else {b.setModel(a)}}},applyWriter:function(b){var a=this.getReader();b=Ext.Factory.writer(b);if(b.getRecord&&!b.getRecord()&&a&&a.getRecord){a=a.getRecord();if(a){b.setRecord(a)}}return b},abort:Ext.emptyFn,onMetaChange:function(a){this.fireEvent('metachange',this,a)},create:Ext.emptyFn,read:Ext.emptyFn,update:Ext.emptyFn,erase:Ext.emptyFn,batch:function(a,l){var c=this,m=c.getBatchActions(),b,d,h,j,e,f,g,k,i;if(a.operations===undefined){a={operations:a,listeners:l}}if(a.batch){if(Ext.isDefined(a.batch.runOperation)){b=Ext.applyIf(a.batch,{proxy:c,listeners:{}})}}else {a.batch={proxy:c,listeners:a.listeners||{}}}if(!b){b=new Ext.data.Batch(a.batch)}b.on('complete',Ext.bind(c.onBatchComplete,c,[a],0));h=c.getBatchOrder().split(',');j=h.length;for(f=0;f<j;f++){e=h[f];d=a.operations[e];if(d){if(m){b.add(c.createOperation(e,{records:d,params:a.params}))}else {k=d.length;for(g=0;g<k;g++){i=d[g];b.add(c.createOperation(e,{records:[i],params:a.params}))}}}}b.start();return b},onBatchComplete:function(a,b){var c=a.scope||this;if(b.hasException()){if(Ext.isFunction(a.failure)){Ext.callback(a.failure,c,[b,a])}}else {if(Ext.isFunction(a.success)){Ext.callback(a.success,c,[b,a])}}if(Ext.isFunction(a.callback)){Ext.callback(a.callback,c,[b,a])}},createOperation:function(b,c){var a=Ext.createByAlias('data.operation.'+b,c);a.setProxy(this);this.pendingOperations[a._internalId]=a;return a},completeOperation:function(a){delete this.pendingOperations[a._internalId]},clone:function(){return new this.self(this.getInitialConfig())},destroy:function(){var c=this.pendingOperations,b,a;for(b in c){a=c[b];if(a&&a.isRunning()){a.abort()}}this.pendingOperations=null;this.callParent()}},1,0,0,0,['proxy.proxy'],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable],[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext.data.proxy,'Proxy',Ext.data,'DataProxy',Ext.data,'Proxy'],0);Ext.cmd.derive('Ext.data.proxy.Client',Ext.data.proxy.Proxy,{alternateClassName:'Ext.data.ClientProxy',isSynchronous:!0,clear:function(){}},0,0,0,0,0,0,[Ext.data.proxy,'Client',Ext.data,'ClientProxy'],0);Ext.cmd.derive('Ext.data.proxy.Memory',Ext.data.proxy.Client,{alternateClassName:'Ext.data.MemoryProxy',isMemoryProxy:!0,config:{enablePaging:!1,data:{$value:null,merge:function(a,b,d,c){if(Ext.isArray(a)){return Ext.Array.clone(a)}else {return Ext.clone(a)}}}},finishOperation:function(b){var a=0,c=b.getRecords(),d=c.length;for(a;a<d;a++){c[a].commit()}b.setSuccessful(!0)},create:function(a){this.finishOperation(a)},update:function(a){this.finishOperation(a)},erase:function(a){this.finishOperation(a)},read:function(b){var f=this,a=f.getReader().read(f.getData()),d=a.getRecords(),c=b.getSorters(),h=b.getGrouper(),g=b.getFilters(),e=b.getStart(),i=b.getLimit(),j;if(b.process(a,null,null,!1)!==!1){if(g&&g.length){a.setRecords(d=Ext.Array.filter(d,Ext.util.Filter.createFilterFn(g)));a.setTotal(d.length)}if(h){c=c?c.concat(h):c}if(c&&c.length){a.setRecords(d=Ext.Array.sort(d,Ext.util.Sortable.createComparator(c)))}if(f.getEnablePaging()&&e!==undefined&&i!==undefined){if(e>=a.getTotal()){a.setConfig({success:!1,records:[],total:0})}else {a.setRecords(Ext.Array.slice(d,e,e+i))}}b.setCompleted();if(j=a.getMetadata()){f.onMetaChange(j)}}},clear:Ext.emptyFn},0,0,0,0,['proxy.memory'],0,[Ext.data.proxy,'Memory',Ext.data,'MemoryProxy'],0);Ext.cmd.derive('Ext.data.ProxyStore',Ext.data.AbstractStore,{config:{model:undefined,fields:null,proxy:undefined,autoLoad:undefined,autoSync:!1,batchUpdateMode:'operation',sortOnLoad:!0,trackRemoved:!0,asynchronousLoad:undefined},onClassExtended:function(e,d,b){var c=d.model,a;if(typeof c==='string'){a=b.onBeforeCreated;b.onBeforeCreated=function(){var g=this,f=arguments;Ext.require(c,function(){a.apply(g,f)})}}},implicitModel:'Ext.data.Model',autoSyncSuspended:0,constructor:function(b){var a=this;a.removed=[];Ext.data.AbstractStore.prototype.constructor.apply(this,arguments);if(a.getAsynchronousLoad()===!1){a.flushLoad()}},applyAsynchronousLoad:function(a){if(a==null){a=!this.loadsSynchronously()}return a},updateAutoLoad:function(a){this.getData();if(a){this.load(Ext.isObject(a)?a:undefined)}},getTotalCount:function(){return this.totalCount||0},applyFields:function(a){if(a){this.createImplicitModel(a)}},applyModel:function(a){if(a){a=Ext.data.schema.Schema.lookupEntity(a)}else {if(!this.destroying){this.getFields();a=this.getModel()||this.createImplicitModel()}}return a},applyProxy:function(a){var b=this.getModel();if(a!==null){if(a){if(a.isProxy){a.setModel(b)}else {if(Ext.isString(a)){a={type:a,model:b}}else {if(!a.model){a=Ext.apply({model:b},a)}}a=Ext.createByAlias('proxy.'+a.type,a);a.autoCreated=!0}}else {if(b){a=b.getProxy();this.useModelProxy=!0}}if(!a){a=Ext.createByAlias('proxy.memory');a.autoCreated=!0}}return a},applyState:function(b){var a=this;Ext.data.AbstractStore.prototype.applyState.call(this,b);if(a.getAutoLoad()||a.isLoaded()){a.load()}},updateProxy:function(b,a){this.proxyListeners=Ext.destroy(this.proxyListeners)},updateTrackRemoved:function(a){this.cleanRemoved();this.removed=a?[]:null},onMetaChange:function(b,a){this.fireEvent('metachange',this,a)},create:function(f,a){var b=this,e=b.getModel(),d=new e(f),c;a=Ext.apply({},a);if(!a.records){a.records=[d]}a.internalScope=b;a.internalCallback=b.onProxyWrite;c=b.createOperation('create',a);return c.execute()},read:function(){return this.load.apply(this,arguments)},update:function(a){var b=this,c;a=Ext.apply({},a);if(!a.records){a.records=b.getUpdatedRecords()}a.internalScope=b;a.internalCallback=b.onProxyWrite;c=b.createOperation('update',a);return c.execute()},onProxyWrite:function(a){var b=this,c=a.wasSuccessful(),d=a.getRecords();switch(a.getAction()){case 'create':b.onCreateRecords(d,a,c);break;case 'update':b.onUpdateRecords(d,a,c);break;case 'destroy':b.onDestroyRecords(d,a,c);break;}if(c){b.fireEvent('write',b,a);b.fireEvent('datachanged',b)}},onCreateRecords:Ext.emptyFn,onUpdateRecords:Ext.emptyFn,onDestroyRecords:function(c,b,a){if(a){this.cleanRemoved()}},erase:function(a){var b=this,c;a=Ext.apply({},a);if(!a.records){a.records=b.getRemovedRecords()}a.internalScope=b;a.internalCallback=b.onProxyWrite;c=b.createOperation('destroy',a);return c.execute()},onBatchOperationComplete:function(b,a){return this.onProxyWrite(a)},onBatchComplete:function(e,f){var a=this,c=e.operations,d=c.length,b;if(a.batchUpdateMode!=='operation'){a.suspendEvents();for(b=0;b<d;b++){a.onProxyWrite(c[b])}a.resumeEvents()}a.isSyncing=!1;a.fireEvent('datachanged',a)},onBatchException:function(b,a){},filterNew:function(a){return a.phantom===!0&&a.isValid()},getNewRecords:function(){return []},getUpdatedRecords:function(){return []},getModifiedRecords:function(){return [].concat(this.getNewRecords(),this.getUpdatedRecords())},filterUpdated:function(a){return a.dirty===!0&&a.phantom!==!0&&a.isValid()},getRemovedRecords:function(){var a=this.getRawRemovedRecords();return a?Ext.Array.clone(a):[]},sync:function(d){var a=this,b={},f=a.getNewRecords(),g=a.getUpdatedRecords(),e=a.getRemovedRecords(),c=!1;a.needsSync=!1;if(f.length>0){b.create=f;c=!0}if(g.length>0){b.update=g;c=!0}if(e.length>0){b.destroy=e;c=!0}if(c&&a.fireEvent('beforesync',b)!==!1){a.isSyncing=!0;d=d||{};a.proxy.batch(Ext.apply(d,{operations:b,listeners:a.getBatchListeners()}))}return a},getBatchListeners:function(){var a=this,b={scope:a,exception:a.onBatchException,complete:a.onBatchComplete};if(a.batchUpdateMode==='operation'){b.operationcomplete=a.onBatchOperationComplete}return b},save:function(){return this.sync.apply(this,arguments)},load:function(b){var a=this;if(typeof b==='function'){b={callback:b}}else {b=b?Ext.Object.chain(b):{}}a.pendingLoadOptions=b;if(a.getAsynchronousLoad()){if(!a.loadTimer){a.loadTimer=Ext.asap(a.flushLoad,a)}}else {a.flushLoad()}return a},flushLoad:function(){var a=this,c=a.pendingLoadOptions,b;a.clearLoadTask();if(!c){return}a.setLoadOptions(c);if(a.getRemoteSort()&&c.sorters){a.fireEvent('beforesort',a,c.sorters)}b=Ext.apply({internalScope:a,internalCallback:a.onProxyLoad,scope:a},c);a.lastOptions=b;b=a.createOperation('read',b);if(a.fireEvent('beforeload',a,b)!==!1){a.onBeforeLoad(b);a.loading=!0;b.execute()}},reload:function(a){return this.load(Ext.apply({},a,this.lastOptions))},onEndUpdate:function(){var a=this;if(a.needsSync&&a.autoSync&&!a.autoSyncSuspended){a.sync()}},afterReject:function(b){var a=this;if(a.contains(b)){a.onUpdate(b,Ext.data.Model.REJECT,null);a.fireEvent('update',a,b,Ext.data.Model.REJECT,null)}},afterCommit:function(c,a){var b=this;if(!a){a=null}if(b.contains(c)){b.onUpdate(c,Ext.data.Model.COMMIT,a);b.fireEvent('update',b,c,Ext.data.Model.COMMIT,a)}},afterErase:function(a){this.onErase(a)},onErase:Ext.emptyFn,onUpdate:Ext.emptyFn,onDestroy:function(){var a=this,b=a.getProxy();a.destroying=!0;a.clearLoadTask();a.getData().destroy();a.data=null;a.setProxy(null);if(b.autoCreated){b.destroy()}a.setModel(null);a.destroying=!1},hasPendingLoad:function(){return !!this.pendingLoadOptions||this.isLoading()},isLoading:function(){return !!this.loading},isLoaded:function(){return this.loadCount>0},suspendAutoSync:function(){++this.autoSyncSuspended},resumeAutoSync:function(b){var a=this;if(a.autoSyncSuspended&&!--a.autoSyncSuspended){if(b){a.sync()}}},removeAll:Ext.emptyFn,clearData:Ext.emptyFn,privates:{getRawRemovedRecords:function(){return this.removed},onExtraParamsChanged:function(){},clearLoadTask:function(){Ext.asapCancel(this.loadTimer);this.pendingLoadOptions=this.loadTimer=null},cleanRemoved:function(){var a=this.getRawRemovedRecords(),c,b;if(a){for(b=0,c=a.length;b<c;++b){a[b].unjoin(this)}a.length=0}},createOperation:function(e,d){var a=this,c=a.getProxy(),b;if(!a.proxyListeners){b={scope:a,destroyable:!0,beginprocessresponse:a.beginUpdate,endprocessresponse:a.endUpdate};if(!a.disableMetaChangeEvent){b.metachange=a.onMetaChange}a.proxyListeners=c.on(b)}return c.createOperation(e,d)},createImplicitModel:function(e){var b=this,d={extend:b.implicitModel,statics:{defaultProxy:'memory'}},c,a;if(e){d.fields=e}a=Ext.define(null,d);b.setModel(a);c=b.getProxy();if(c){a.setProxy(c)}else {b.setProxy(a.getProxy())}},loadsSynchronously:function(){return this.getProxy().isSynchronous},onBeforeLoad:Ext.privateFn,removeFromRemoved:function(b){var a=this.getRawRemovedRecords();if(a){Ext.Array.remove(a,b);b.unjoin(this)}},setLoadOptions:function(d){var c=this,a,b;if(c.getRemoteFilter()){a=c.getFilters(!1);if(a&&a.getCount()){d.filters=a.getRange()}}if(c.getRemoteSort()){b=c.getSorters(!1);if(b&&b.getCount()){d.sorters=b.getRange()}}}}},1,0,0,0,0,0,[Ext.data,'ProxyStore'],0);Ext.cmd.derive('Ext.data.LocalStore',Ext.Mixin,{mixinConfig:{id:'localstore'},config:{extraKeys:null},applyExtraKeys:function(a){var b,c=this.getData();c.setExtraKeys(a);a=c.getExtraKeys();for(b in a){this[b]=a[b]}},add:function(a){return this.insert(this.getCount(),arguments.length===1?a:arguments)},constructDataCollection:function(){return new Ext.util.Collection({rootProperty:'data'})},createModel:function(a){var c=this.getSession(),b;if(!a.isModel){b=this.getModel();a=new b(a,c)}return a},createFiltersCollection:function(){return this.getData().getFilters()},createSortersCollection:function(){var a=this.getData().getSorters();a.setSorterConfigure(this.addFieldTransform,this);return a},onCollectionBeginUpdate:function(){this.beginUpdate()},onCollectionEndUpdate:function(){this.endUpdate()},onCollectionSort:function(){this.onSorterEndUpdate()},onCollectionFilter:function(){this.onFilterEndUpdate()},notifySorterChange:function(){this.getData().onSorterChange()},forceLocalSort:function(){this.getData().onSortChange()},contains:function(a){return this.indexOf(a)>-1},each:function(g,f,c){var a=this.getData(),e,d,b;if(typeof c==='object'){c=c.filtered}if(c===!0&&a.filtered){a=a.getSource()}a=a.items.slice(0);e=a.length;for(b=0;b<e;++b){d=a[b];if(g.call(f||d,d,b,e)===!1){break}}},collect:function(d,a,c){var e=this,b=e.getData();if(typeof a==='object'){c=a.filtered;a=a.allowNull}if(c===!0&&b.filtered){b=b.getSource()}return b.collect(d,'data',a)},getById:function(b){var a=this.getData();if(a.filtered){a=a.getSource()}return a.get(b)||null},getByInternalId:function(c){var a=this.getData(),b;if(a.filtered){if(!a.$hasExtraKeys){b=this.makeInternalKeyCfg();a.setExtraKeys(b);a.$hasExtraKeys=!0}a=a.getSource()}if(!a.$hasExtraKeys){a.setExtraKeys(b||this.makeInternalKeyCfg());a.$hasExtraKeys=!0}return a.byInternalId.get(c)||null},getDataSource:function(){var a=this.getData();return a.getSource()||a},indexOf:function(a){return this.getData().indexOf(a)},indexOfId:function(a){return this.indexOf(this.getById(a))},insert:function(e,a){var d=this,c,b;if(a){if(!Ext.isIterable(a)){a=[a]}else {a=Ext.Array.clone(a)}c=a.length}if(!c){return []}for(b=0;b<c;++b){a[b]=d.createModel(a[b])}d.getData().insert(e,a);return a},queryBy:function(c,b){var a=this.getData();return (a.getSource()||a).createFiltered(c,b)},query:function(e,f,d,b,c){var a=this.getData();return (a.getSource()||a).createFiltered(e,f,d,b,c)},first:function(a){return this.getData().first(a)||null},last:function(a){return this.getData().last(a)||null},sum:function(a,c){var b=this.getData();return c&&this.isGrouped()?b.sumByGroup(a):b.sum(a)},count:function(b){var a=this.getData();return b&&this.isGrouped()?a.countByGroup():a.count()},min:function(a,c){var b=this.getData();return c&&this.isGrouped()?b.minByGroup(a):b.min(a)},max:function(a,c){var b=this.getData();return c&&this.isGrouped()?b.maxByGroup(a):b.max(a)},average:function(a,c){var b=this.getData();return c&&this.isGrouped()?b.averageByGroup(a):b.average(a)},aggregate:function(i,g,j,f){var a=this,c,h,e,d,b;if(j&&a.isGrouped()){c=a.getGroups().items;h=c.length;e={};for(b=0;b<h;++b){d=c[b];e[d.getGroupKey()]=a.getAggregate(i,g||a,d.items,f)}return e}else {return a.getAggregate(i,g,a.getData().items,f)}},getAggregate:function(g,e,b,d){var c=[],f=b.length,a;for(a=0;a<f;++a){c[a]=b[a].get(d)}return g.call(e||this,b,c)},addObserver:function(b){var a=this.observers;if(!a){this.observers=a=new Ext.util.Collection()}a.add(b)},removeObserver:function(b){var a=this.observers;if(a){a.remove(b)}},callObservers:function(h,a){var f=this.observers,g,e,c,d,b;if(f){e=f.items;if(a){a.unshift(this)}else {a=[this]}for(c=0,g=e.length;c<g;++c){b=e[c];d='onSource'+h;if(b[d]){b[d].apply(b,a)}}}},queryRecordsBy:function(g,d){var a=this.getData(),e=[],f,b,c;a=(a.getSource()||a).items;d=d||this;for(b=0,f=a.length;b<f;++b){c=a[b];if(g.call(d,c)===!0){e.push(c)}}return e},queryRecords:function(f,g){var a=this.getData(),d=[],e,b,c;a=(a.getSource()||a).items;for(b=0,e=a.length;b<e;++b){c=a[b];if(c.get(f)===g){d.push(c)}}return d},privates:{isLast:function(a){return a===this.last()},makeInternalKeyCfg:function(){return {byInternalId:{property:'internalId',rootProperty:''}}}}},0,0,0,0,0,0,[Ext.data,'LocalStore'],0);Ext.cmd.derive('Ext.data.proxy.Server',Ext.data.proxy.Proxy,{alternateClassName:'Ext.data.ServerProxy',isRemote:!0,config:{url:'',pageParam:'page',startParam:'start',limitParam:'limit',groupParam:'group',groupDirectionParam:'groupDir',sortParam:'sort',filterParam:'filter',directionParam:'dir',idParam:'id',simpleSortMode:!1,simpleGroupMode:!1,noCache:!0,cacheString:'_dc',timeout:30000,api:{create:undefined,read:undefined,update:undefined,destroy:undefined},extraParams:{}},create:function(){return this.doRequest.apply(this,arguments)},read:function(){return this.doRequest.apply(this,arguments)},update:function(){return this.doRequest.apply(this,arguments)},erase:function(){return this.doRequest.apply(this,arguments)},setExtraParam:function(c,b){var a=this.getExtraParams();a[c]=b;this.fireEvent('extraparamschanged',a)},updateExtraParams:function(a,b){this.fireEvent('extraparamschanged',a)},buildRequest:function(a){var c=this,g=Ext.apply({},a.getParams()),d=Ext.applyIf(g,c.getExtraParams()||{}),b,e,f;Ext.applyIf(d,c.getParams(a));e=a.getId();f=c.getIdParam();if(e!==undefined&&d[f]===undefined){d[f]=e}b=new Ext.data.Request({params:d,action:a.getAction(),records:a.getRecords(),url:a.getUrl(),operation:a,proxy:c});b.setUrl(c.buildUrl(b));a.setRequest(b);return b},processResponse:function(i,b,h,c){var a=this,e,f,d,g;a.fireEvent('beginprocessresponse',a,c,b);if(i===!0){f=a.getReader();if(c.status===204){d=f.getNullResultSet()}else {d=f.read(a.extractResponseData(c),{recordCreator:b.getRecordCreator()})}b.process(d,h,c);e=!b.wasSuccessful()}else {a.setException(b,c);e=!0}if(e){a.fireEvent('exception',a,c,b)}else {g=d.getMetadata();if(g){a.onMetaChange(g)}}a.afterRequest(h,i);a.fireEvent('endprocessresponse',a,c,b)},setException:function(b,a){b.setException({status:a.status,statusText:a.statusText,response:a})},extractResponseData:Ext.identityFn,applyEncoding:function(a){return Ext.encode(a)},encodeSorters:function(c,d){var b=[],e=c.length,a;for(a=0;a<e;a++){b[a]=c[a].serialize()}return this.applyEncoding(d?b[0]:b)},encodeFilters:function(c){var d=[],e=c.length,b,a;for(b=0;b<e;b++){a=c[b];a.getFilterFn();if(a.generatedFilterFn){d.push(a.serialize())}}return this.applyEncoding(d)},getParams:function(c){if(!c.isReadOperation){return {}}var a=this,b={},e=c.getGrouper(),d=c.getSorters(),j=c.getFilters(),q=c.getPage(),k=c.getStart(),p=c.getLimit(),u=a.getSimpleSortMode(),s=a.getSimpleGroupMode(),o=a.getPageParam(),n=a.getStartParam(),m=a.getLimitParam(),g=a.getGroupParam(),r=a.getGroupDirectionParam(),i=a.getSortParam(),l=a.getFilterParam(),t=a.getDirectionParam(),h,f;if(o&&q){b[o]=q}if(n&&(k||k===0)){b[n]=k}if(m&&p){b[m]=p}h=g&&e;if(h){if(s){b[g]=e.getProperty();b[r]=e.getDirection()}else {b[g]=a.encodeSorters([e],!0)}}if(i&&d&&d.length>0){if(u){f=0;if(d.length>1&&h){f=1}b[i]=d[f].getProperty();b[t]=d[f].getDirection()}else {b[i]=a.encodeSorters(d)}}if(l&&j&&j.length>0){b[l]=a.encodeFilters(j)}return b},buildUrl:function(c){var b=this,a=b.getUrl(c);if(b.getNoCache()){a=Ext.urlAppend(a,Ext.String.format('{0}={1}',b.getCacheString(),Ext.Date.now()))}return a},getUrl:function(a){var b;if(a){b=a.getUrl()||this.getApi()[a.getAction()]}return b?b:(arguments.callee.$previous||Ext.data.proxy.Proxy.prototype.getUrl).call(this)},doRequest:function(a){},afterRequest:Ext.emptyFn,destroy:function(){Ext.data.proxy.Proxy.prototype.destroy.call(this);Ext.destroy(this.getReader(),this.getWriter());this.reader=this.writer=null}},0,0,0,0,['proxy.server'],0,[Ext.data.proxy,'Server',Ext.data,'ServerProxy'],0);Ext.cmd.derive('Ext.data.proxy.Ajax',Ext.data.proxy.Server,{alternateClassName:['Ext.data.HttpProxy','Ext.data.AjaxProxy'],isAjaxProxy:!0,defaultActionMethods:{create:'POST',read:'GET',update:'POST',destroy:'POST'},config:{binary:!1,headers:undefined,paramsAsJson:!1,withCredentials:!1,useDefaultXhrHeader:!0,username:null,password:null,actionMethods:{create:'POST',read:'GET',update:'POST',destroy:'POST'}},doRequest:function(e){var a=this,g=a.getWriter(),b=a.buildRequest(e),f=a.getMethod(b),c,d;if(g&&e.allowWrite()){b=g.write(b)}b.setConfig({binary:a.getBinary(),headers:a.getHeaders(),timeout:a.getTimeout(),scope:a,callback:a.createRequestCallback(b,e),method:f,useDefaultXhrHeader:a.getUseDefaultXhrHeader(),disableCaching:!1});if(f.toUpperCase()!=='GET'&&a.getParamsAsJson()){d=b.getParams();if(d){c=b.getJsonData();if(c){c=Ext.Object.merge({},c,d)}else {c=d}b.setJsonData(c);b.setParams(undefined)}}if(a.getWithCredentials()){b.setWithCredentials(!0);b.setUsername(a.getUsername());b.setPassword(a.getPassword())}return a.sendRequest(b)},sendRequest:function(a){a.setRawRequest(Ext.Ajax.request(a.getCurrentConfig()));this.lastRequest=a;return a},abort:function(a){a=a||this.lastRequest;if(a){Ext.Ajax.abort(a.getRawRequest())}},getMethod:function(d){var a=this.getActionMethods(),b=d.getAction(),c;if(a){c=a[b]}return c||this.defaultActionMethods[b]},createRequestCallback:function(b,c){var a=this;return function(f,e,d){if(b===a.lastRequest){a.lastRequest=null}a.processResponse(e,c,b,d)}},destroy:function(){this.lastRequest=null;Ext.data.proxy.Server.prototype.destroy.call(this)}},0,0,0,0,['proxy.ajax'],0,[Ext.data.proxy,'Ajax',Ext.data,'HttpProxy',Ext.data,'AjaxProxy'],0);Ext.cmd.derive('Ext.data.reader.Json',Ext.data.reader.Reader,{alternateClassName:'Ext.data.JsonReader',config:{record:null,metaProperty:'metaData',useSimpleAccessors:!1,preserveRawData:!1},updateRootProperty:function(){this.forceBuildExtractors()},updateMetaProperty:function(){this.forceBuildExtractors()},getResponseData:function(b){var a;try{return Ext.decode(b.responseText)}catch(c){a=this.createReadError(c.message);Ext.Logger.warn('Unable to parse the JSON returned by the server');this.fireEvent('exception',this,b,a);return a}},buildExtractors:function(){var a=this,b,c;if(Ext.data.reader.Reader.prototype.buildExtractors.apply(this,arguments)){b=a.getMetaProperty();c=a.getRootProperty();if(c){a.getRoot=a.getAccessor(c)}else {a.getRoot=Ext.identityFn}if(b){a.getMeta=a.getAccessor(b)}}},extractData:function(a,f){var e=this.getRecord(),d=[],c,b;if(e){c=a.length;if(!c&&Ext.isObject(a)){c=1;a=[a]}for(b=0;b<c;b++){d[b]=a[b][e]}}else {d=a}return Ext.data.reader.Reader.prototype.extractData.call(this,d,f)},getModelData:function(a){return this.getPreserveRawData()?Ext.apply({},a):a},createAccessor:function(){var a=/[\[\.]/;return function(c){var r=this,o=r.getUseSimpleAccessors(),n,f,j,m,b,e,p,l,g,k,d,h,i,q;if(!(c||c===0)){return}if(typeof c==='function'){return c}if(!o){n=String(c).search(a)}if(o===!0||n<0){f=function(a){return a[c]}}else {j='raw';m=[];b='';e=0;q=c.length;for(h=0;h<=q;++h){d=c[h];p=d==='.';l=d==='[';g=d===']';k=p||l||g||!d;if(!k||e>1||e&&!g){b+=d}else {if(k){i=!1;if(l){++e}else {if(g){--e;i=!0}}if(b){if(i){b='['+b+']'}else {b='.'+b}j+=b;m.push(''+j);b=''}}}}f=m.join(' && ');f=Ext.functionFactory('raw','return '+f)}return f}}(),createFieldAccessor:function(b){var e=this,a=b.mapping,c=a||a===0,d=c?a:b.name;if(c){if(typeof d==='function'){return function(a){return b.mapping(a,e)}}else {return e.createAccessor(d)}}},getAccessorKey:function(b){var a=this.getUseSimpleAccessors()?'simple':'';return this.$className+a+b},privates:{copyFrom:function(a){Ext.data.reader.Reader.prototype.copyFrom.call(this,a);this.getRoot=a.getRoot}}},0,0,0,0,['reader.json'],0,[Ext.data.reader,'Json',Ext.data,'JsonReader'],0);Ext.cmd.derive('Ext.data.writer.Json',Ext.data.writer.Writer,{alternateClassName:'Ext.data.JsonWriter',config:{rootProperty:undefined,encode:!1,allowSingle:!0,expandData:!1},getExpandedData:function(f){var h=f.length,g=0,a,c,b,d,e,i=function(c,b){var a={};a[c]=b;return a};for(;g<h;g++){a=f[g];for(c in a){if(a.hasOwnProperty(c)){b=c.split('.');d=b.length-1;if(d>0){e=a[c];for(;d>0;d--){e=i(b[d],e)}a[b[0]]=a[b[0]]||{};Ext.Object.merge(a[b[0]],e);delete a[c]}}}}return f},writeRecords:function(b,a){var c=this,e=c.getRootProperty(),d,g,f;if(c.getExpandData()){a=c.getExpandedData(a)}if(c.getAllowSingle()&&a.length===1){a=a[0];g=!0}f=this.getTransform();if(f){a=f(a,b)}if(c.getEncode()){if(e){b.setParam(e,Ext.encode(a))}else {}}else {if(g||a&&a.length){d=b.getJsonData()||{};if(e){d[e]=a}else {d=a}b.setJsonData(d)}}return b}},0,0,0,0,['writer.json'],0,[Ext.data.writer,'Json',Ext.data,'JsonWriter'],0);Ext.cmd.derive('Ext.util.Group',Ext.util.Collection,{config:{groupKey:null},$endUpdatePriority:2001,manageSorters:!1},0,0,0,0,0,0,[Ext.util,'Group'],0);Ext.cmd.derive('Ext.util.SorterCollection',Ext.util.Collection,{isSorterCollection:!0,$sortable:null,sortFn:null,config:{sorterOptionsFn:null,sorterOptionsScope:null},constructor:function(b){var a=this;a.sortFn=Ext.util.Sorter.createComparator(a);Ext.util.Collection.prototype.constructor.call(this,b);a.setDecoder(a.decodeSorter)},addSort:function(b,c,d){var a=this,f,j,k,g,h,i,e;if(!b){a.beginUpdate();a.endUpdate()}else {g=a.getOptions();if(b instanceof Array){e=b;d=c;c=null}else {if(Ext.isString(b)){if(!(i=a.get(b))){e=[{property:b,direction:c||g.getDefaultSortDirection()}]}else {e=[i]}}else {if(Ext.isFunction(b)){e=[{sorterFn:b,direction:c||g.getDefaultSortDirection()}]}else {e=[b];d=c;c=null}}}d=a._sortModes[d||'replace'];h=a.getAt(0);f=a.length;j=d.append?f:0;a.beginUpdate();a.splice(j,d.replace?f:0,e);if(d.multi){f=a.length;k=g.getMultiSortLimit();if(f>k){a.removeAt(k,f)}}if(i&&c){i.setDirection(c)}else {if(j===0&&h&&h===a.getAt(0)){h.toggle()}}a.endUpdate()}},clear:function(){this.beginUpdate();Ext.util.Collection.prototype.clear.call(this);this.endUpdate(this.items)},getSortFn:function(){return this.sortFn},getByProperty:function(d){var c=this.items,e=c.length,a,b;for(a=0;a<e;++a){b=c[a];if(b.getProperty()===d){return b}}return null},_sortModes:{append:{append:1},multi:{multi:1},prepend:{prepend:1},replace:{replace:1}},decodeSorter:function(a,i){var c=this,g=c.getOptions(),h=g.getRootProperty(),f=c.getSorterOptionsFn(),d,b,e;if(a.isSorter){if(!a.getRoot()){a.setRoot(h)}}else {b={direction:g.getDefaultSortDirection(),root:h};e=typeof a;if(e==='string'){d=c.get(a);if(d){return d}b.property=a}else {if(e==='function'){b.sorterFn=a}else {b=Ext.apply(b,a);if(b.fn){b.sorterFn=b.fn;delete b.fn}}}a=Ext.create(i||'Ext.util.Sorter',b)}if(f){f.call(c.getSorterOptionsScope()||c,a)}return a},setSorterConfigure:function(b,a){this.setSorterOptionsFn(b);this.setSorterOptionsScope(a)},decodeRemoveItems:function(e,d){var k=this,b=d===undefined?e:e[d];if(!b||!b.$cloned){if(e.length>d+1||!Ext.isIterable(b)){b=Ext.Array.slice(e,d)}var j=k.items,l=b.length,c=[],f,g,i,a,h;for(f=0;f<l;f++){a=b[f];if(a&&a.isSorter){c.push(a)}else {h=typeof a;if(h==='string'){a=k.get(a);if(a){c.push(a)}}else {if(h==='function'){for(i=j.length;i-->0;){g=j[i];if(g.getSorterFn()===a){c.push(g)}}}}}}b=c;b.$cloned=!0}return b},getOptions:function(){return this.$sortable||this}},1,0,0,0,0,0,[Ext.util,'SorterCollection'],0);Ext.cmd.derive('Ext.util.FilterCollection',Ext.util.Collection,{isFilterCollection:!0,$filterable:null,filterFn:null,constructor:function(b){var a=this;a.filterFn=Ext.util.Filter.createFilterFn(a);Ext.util.Collection.prototype.constructor.call(this,b);a.setDecoder(a.decodeFilter)},filterData:function(a){return this.filtered?Ext.Array.filter(a,this.filterFn):a},getFilterFn:function(){return this.filterFn},isItemFiltered:function(a){return !this.filterFn(a)},decodeFilter:function(b){var d=this.getOptions(),c=d.getRootProperty(),a;if(b.isFilter){if(!b.getRoot()){b.setRoot(c)}}else {a={root:c};if(Ext.isFunction(b)){a.filterFn=b}else {a=Ext.apply(a,b);if(a.fn){a.filterFn=a.fn;delete a.fn}if(Ext.util.Filter.isInvalid(a)){return !1}}b=new Ext.util.Filter(a)}return b},decodeRemoveItems:function(f,e){var p=this,b=e===undefined?f:f[e];if(!b.$cloned){if(f.length>e+1||!Ext.isIterable(b)){b=Ext.Array.slice(f,e)}var k=p.items,o=b.length,h=[],a,g,l,n,m,c,d,j,i;for(g=0;g<o;g++){a=b[g];if(a&&a.isFilter){h.push(a)}else {i=typeof a;l=i==='function';n=a.property!==undefined&&a.value!==undefined;m=i==='string';for(j=k.length;j-->0;){c=k[j];d=!1;if(m){d=c.getProperty()===a}else {if(l){d=c.getFilterFn()===a}else {if(n){d=c.getProperty()===a.property&&c.getValue()===a.value}}}if(d){h.push(c)}}}}b=h;b.$cloned=!0}return b},getOptions:function(){return this.$filterable||this}},1,0,0,0,0,0,[Ext.util,'FilterCollection'],0);Ext.cmd.derive('Ext.util.GroupCollection',Ext.util.Collection,{isGroupCollection:!0,config:{grouper:null,itemRoot:null},observerPriority:-100,constructor:function(a){Ext.util.Collection.prototype.constructor.call(this,a);this.on('remove','onGroupRemove',this)},onCollectionAdd:function(b,a){this.addItemsToGroups(b,a.items)},onCollectionBeforeItemChange:function(b,a){this.changeDetails=a},onCollectionBeginUpdate:function(){this.beginUpdate()},onCollectionEndUpdate:function(){this.endUpdate()},onCollectionItemChange:function(b,a){var c=a.item;if(!a.indexChanged){this.syncItemGrouping(b,c,b.getKey(c),a.oldKey,a.oldIndex)}this.changeDetails=null},onCollectionRefresh:function(a){this.removeAll();this.addItemsToGroups(a,a.items)},onCollectionRemove:function(k,j){var d=this,g=d.changeDetails,b,h,a,e,i,c,f;if(g){f=g.item;a=d.findGroupForItem(f);b=[];if(a){b.push({group:a,items:[f]})}}else {b=d.groupItems(k,j.items,!1)}for(e=0,i=b.length;e<i;++e){a=(h=b[e]).group;if(a){a.remove(h.items);if(!a.length){(c||(c=[])).push(a)}}}if(c){d.remove(c)}},onCollectionSort:function(g){var f=this,b=g.getSorters(!1),e,d,a,c;if(b){e=f.items;d=f.length;for(a=0;a<d;++a){c=e[a];if(c.getSorters()!==b){c.setSorters(b)}}}},onCollectionUpdateKey:function(b,a){var c=a.index,d=a.item;if(!a.indexChanged){c=b.indexOf(d);this.syncItemGrouping(b,d,a.newKey,a.oldKey,c)}},addItemsToGroups:function(a,b){this.groupItems(a,b,!0)},groupItems:function(j,o,n){var d=this,m={},g=[],p=j.getGrouper(),e=d.itemGroupKeys,c,k,b,a,l,i,h,f;for(a=0,h=o.length;a<h;++a){b=p.getGroupString(l=o[a]);i=j.getKey(l);if(n){(e||(d.itemGroupKeys=e={}))[i]=b}else {if(e){delete e[i]}}if(!(c=m[b])){if(!(k=d.getByKey(b))&&n){(f||(f=[])).push(k=d.createGroup(j,b))}g.push(m[b]=c={group:k,items:[]})}c.items.push(l)}for(a=0,h=g.length;a<h;++a){c=g[a];c.group.add(c.items)}if(f){d.add(f)}return g},syncItemGrouping:function(j,e,n,d,o){var b=this,g=b.itemGroupKeys||(b.itemGroupKeys={}),q=j.getGrouper(),i=q.getGroupString(e),h=0,k=-1,p=n,m,a,f,c,l;if(d||d===0){c=g[d];delete g[d];p=d}else {c=g[n]}g[n]=i;if(!(a=b.get(i))){a=b.createGroup(j,i);m=[a]}if(a.get(p)!==e){if(a.getCount()>0&&j.getSorters().getCount()===0){l=j.indexOf(a.items[0]);if(o<l){k=0}else {k=o-l}}if(k===-1){a.add(e)}else {a.insert(k,e)}}else {a.itemChanged(e,null,d)}if(i!==c&&(c===0||c)){f=b.get(c);if(f){f.remove(e);if(!f.length){h=[f]}}}if(m){b.splice(0,h,m)}else {if(h){b.splice(0,h)}}},createGroup:function(a,c){var b=new Ext.util.Group({groupKey:c,rootProperty:this.getItemRoot(),sorters:a.getSorters()});return b},getKey:function(a){return a.getGroupKey()},createSortFn:function(){var c=this,b=c.getGrouper(),a=c.getSorters().getSortFn();if(!b){return a}return function(c,d){return b.sort(c.items[0],d.items[0])||a(c,d)}},updateGrouper:function(b){var a=this;a.grouped=!!(b&&a.$groupable.getAutoGroup());a.onSorterChange();a.onEndUpdateSorters(a.getSorters())},destroy:function(){this.$groupable=null;this.destroyGroups(this.items);Ext.util.Collection.prototype.destroy.call(this)},privates:{destroyGroups:function(b){var c=b.length,a;for(a=0;a<c;++a){b[a].destroy()}},findGroupForItem:function(d){var c=this.items,e=c.length,a,b;for(a=0;a<e;++a){b=c[a];if(b.contains(d)){return b}}},onGroupRemove:function(b,a){this.destroyGroups(a.items)}}},1,0,0,0,0,0,[Ext.util,'GroupCollection'],0);Ext.cmd.derive('Ext.data.Store',Ext.data.ProxyStore,{config:{data:0,clearRemovedOnLoad:!0,clearOnPageLoad:!0,associatedEntity:null,role:null,session:null},addRecordsOptions:{addRecords:!0},loadCount:0,complete:!1,moveMapCount:0,constructor:function(b){var a=this,c;if(b){if(b.buffered){return new Ext.data.BufferedStore(b)}}Ext.data.ProxyStore.prototype.constructor.call(this,b);a.getData().addObserver(a);c=a.inlineData;if(c){delete a.inlineData;a.loadInlineData(c)}},applyData:function(a,c){var b=this;b.getFields();b.getModel();if(a&&a.isCollection){c=a}else {if(!c){c=b.constructDataCollection()}if(a){if(b.isInitializing){b.inlineData=a}else {b.loadData(a)}}}return c},loadInlineData:function(c){var a=this,b=a.getProxy();if(b&&b.isMemoryProxy){b.setData(c);a.suspendEvents();a.read();a.resumeEvents()}else {a.removeAll(!0);a.suspendEvents();a.loadData(c);a.resumeEvents()}},onCollectionAdd:function(b,a){this.onCollectionAddItems(b,a.items,a)},onCollectionFilterAdd:function(a,b){this.onCollectionAddItems(a,b)},onCollectionAddItems:function(n,g,b){var a=this,m=g.length,k=b?!b.next:!1,h=a.removed,j=a.ignoreCollectionAdd,l=a.getSession(),e=b&&b.replaced,f,i,c,d;for(f=0;f<m;++f){c=g[f];if(l){l.adopt(c)}if(!j){c.join(a);if(h&&h.length){Ext.Array.remove(h,c)}i=i||c.phantom||c.dirty}}if(j){return}if(e){d=[];do{Ext.Array.push(d,e.items);e=e.next}while(e);a.setMoving(d,!0)}if(b){if(b.replaced){if(k){a.fireEvent('refresh',a)}}else {a.fireEvent('add',a,g,b.at);if(k){a.fireEvent('datachanged',a)}}}if(d){a.setMoving(d,!1)}a.needsSync=a.needsSync||i},onCollectionFilteredItemChange:function(){this.onCollectionItemChange.apply(this,arguments)},onCollectionItemChange:function(f,a){var b=this,c=a.item,d=a.modified||null,e=a.meta;if(b.fireChangeEvent(c)){b.onUpdate(c,e,d,a);b.fireEvent('update',b,c,e,d,a)}},fireChangeEvent:function(a){return this.getDataSource().contains(a)},afterChange:function(b,a,c){this.getData().itemChanged(b,a||null,undefined,c)},afterCommit:function(b,a){this.afterChange(b,a,Ext.data.Model.COMMIT)},afterEdit:function(a,b){this.needsSync=this.needsSync||a.dirty;this.afterChange(a,b,Ext.data.Model.EDIT)},afterReject:function(a){this.afterChange(a,null,Ext.data.Model.REJECT)},afterDrop:function(a){this.getData().remove(a)},afterErase:function(a){this.removeFromRemoved(a)},addSorted:function(c){var a=this,d=a.getRemoteSort(),b=a.getData(),e;if(d){b.setSorters(a.getSorters())}e=b.findInsertionIndex(c);if(d){b.setSorters(null)}return a.insert(e,c)},remove:function(c,h,i){var f=this,e=f.getDataSource(),d,g,b,a;if(c){if(c.isModel){if(e.indexOf(c)>-1){b=[c];d=1}else {d=0}}else {b=[];for(g=0,d=c.length;g<d;++g){a=c[g];if(a&&a.isEntity){if(!e.contains(a)){continue}}else {if(!(a=e.getAt(a))){continue}}b.push(a)}d=b.length}}if(!d){return []}f.removeIsMove=h===!0;f.removeIsSilent=i;e.remove(b);f.removeIsSilent=!1;return b},onCollectionRemove:function(n,f){var a=this,g=a.removed,e=f.items,m=e.length,i=f.at,b=f.replacement,h=a.removeIsMove||b&&Ext.Array.equals(e,b.items),k=a.removeIsSilent,j=!f.next,l=a.getDataSource(),d,c;if(a.ignoreCollectionRemove){return}if(b){a.setMoving(b.items,!0)}for(d=0;d<m;++d){c=e[d];if(!l.contains(c)){if(g&&!h&&!c.phantom&&!c.erasing){c.removedFrom=i+d;g.push(c);a.needsSync=!0}else {c.unjoin(a)}}}if(!k){if(!b||!b.items.length){a.fireEvent('remove',a,e,i,h);if(j){a.fireEvent('datachanged',a)}}}if(b){a.setMoving(b.items,!1)}},onFilterEndUpdate:function(){Ext.data.ProxyStore.prototype.onFilterEndUpdate.apply(this,arguments);this.callObservers('Filter')},removeAt:function(a,b){var c=this.getData();a=Math.max(a,0);if(a<c.length){if(arguments.length===1){b=1}else {if(!b){return}}c.removeAt(a,b)}},removeAll:function(d){var a=this,b=a.getData(),e=a.hasListeners.clear,c=b.getRange();if(b.length){a.removeIsSilent=!0;a.callObservers('BeforeRemoveAll');b.removeAll();a.removeIsSilent=!1;if(!d){a.fireEvent('clear',a,c);a.fireEvent('datachanged',a)}a.callObservers('AfterRemoveAll',[!!d])}return c},setRecords:function(a){var b=this.getCount();++this.loadCount;if(b){this.getData().splice(0,b,a)}else {this.add(a)}},splice:function(b,a,c){return this.getData().splice(b,a,c)},onProxyLoad:function(b){var a=this,e=b.getResultSet(),c=b.getRecords(),d=b.wasSuccessful();if(a.destroyed){return}if(e){a.totalCount=e.getTotal()}if(d){c=a.processAssociation(c);a.loadRecords(c,b.getAddRecords()?{addRecords:!0}:undefined)}else {a.loading=!1}if(a.hasListeners.load){a.fireEvent('load',a,c,d,b)}a.callObservers('AfterLoad',[c,d,b])},filterDataSource:function(f){var c=this.getDataSource(),b=c.items,e=b.length,d=[],a;for(a=0;a<e;a++){if(f.call(c,b[a])){d.push(b[a])}}return d},getNewRecords:function(){return this.filterDataSource(this.filterNew)},getRejectRecords:function(){return this.filterDataSource(this.filterRejects)},getUpdatedRecords:function(){return this.filterDataSource(this.filterUpdated)},loadData:function(d,e){var b=this,f=d.length,a=[],c;for(c=0;c<f;c++){a.push(b.createModel(d[c]))}a=b.processAssociation(a);b.loadRecords(a,e?b.addRecordsOptions:undefined)},loadRawData:function(g,f){var a=this,c=a.getSession(),b=a.getProxy().getReader().read(g,c?{recordCreator:c.recordCreator}:undefined),e=b.getRecords(),d=b.getSuccess();if(d){a.totalCount=b.getTotal();a.loadRecords(e,f?a.addRecordsOptions:undefined)}return d},loadRecords:function(c,g){var a=this,h=c.length,d=a.getData(),e,b,f;if(g){e=g.addRecords}if(!a.getRemoteSort()&&!a.getSortOnLoad()){f=!0;d.setAutoSort(!1)}if(!e){a.clearData(!0)}a.loading=!1;a.ignoreCollectionAdd=!0;a.callObservers('BeforePopulate');d.add(c);a.ignoreCollectionAdd=!1;if(f){d.setAutoSort(!0)}for(b=0;b<h;b++){c[b].join(a)}++a.loadCount;a.complete=!0;a.fireEvent('datachanged',a);a.fireEvent('refresh',a);a.callObservers('AfterPopulate')},loadPage:function(c,b){var a=this,d=a.getPageSize();a.currentPage=c;b=Ext.apply({page:c,start:(c-1)*d,limit:d,addRecords:!a.getClearOnPageLoad()},b);a.read(b)},nextPage:function(a){this.loadPage(this.currentPage+1,a)},previousPage:function(a){this.loadPage(this.currentPage-1,a)},clearData:function(h){var a=this,b=a.removed,f=a.getDataSource(),g=a.getClearRemovedOnLoad(),j=b&&h&&!g,d,e,c,i;if(f){d=f.items;for(c=0,i=d.length;c<i;++c){e=d[c];if(j&&Ext.Array.contains(b,e)){continue}e.unjoin(a)}a.ignoreCollectionRemove=!0;a.callObservers('BeforeClear');f.removeAll();a.ignoreCollectionRemove=!1;a.callObservers('AfterClear')}if(b&&(!h||g)){b.length=0}},onIdChanged:function(b,a,c){this.getData().updateKey(b,a);this.fireEvent('idchanged',this,b,a,c)},commitChanges:function(){var a=this,c=a.getModifiedRecords(),d=c.length,b=0;Ext.suspendLayouts();a.beginUpdate();for(;b<d;b++){c[b].commit()}a.cleanRemoved();a.endUpdate();Ext.resumeLayouts(!0)},filterNewOnly:function(a){return a.phantom===!0},filterRejects:function(a){return a.phantom||a.dirty},rejectChanges:function(){var b=this,c=b.getRejectRecords(),f=c.length,a,d,e,g,h,i;Ext.suspendLayouts();b.beginUpdate();for(a=0;a<f;a++){d=c[a];if(d.phantom){e=e||[];e.push(d)}else {d.reject()}}if(e){b.remove(e);for(a=0,f=e.length;a<f;++a){e[a].reject()}}c=b.getRawRemovedRecords();if(c){f=c.length;g=!b.getRemoteSort()&&b.isSorted();if(g){h=b.getData();i=h.getAutoSort();h.setAutoSort(!1)}for(a=f-1;a>=0;a--){d=c[a];d.reject();if(!g){b.insert(d.removedFrom||0,d)}}if(g){h.setAutoSort(i);b.add(c)}c.length=0}b.endUpdate();Ext.resumeLayouts(!0)},onDestroy:function(){var a=this,c=a.loadTask,d=a.getData(),b=d.getSource();a.clearData();Ext.data.ProxyStore.prototype.onDestroy.call(this);a.setSession(null);a.observers=null;if(c){c.cancel();a.loadTask=null}if(b){b.destroy()}},privates:{fetch:function(a){a=Ext.apply({},a);this.setLoadOptions(a);var b=this.createOperation('read',a);b.execute()},onBeforeLoad:function(a){this.callObservers('BeforeLoad',[a])},onRemoteFilterSet:function(a,b){if(a){this.getData().setFilters(b?null:a)}Ext.data.ProxyStore.prototype.onRemoteFilterSet.call(this,a,b)},onRemoteSortSet:function(b,a){var c=this.getData();if(b){c.setSorters(a?null:b)}c.setAutoGroup(!a);Ext.data.ProxyStore.prototype.onRemoteSortSet.call(this,b,a)},isMoving:function(a,f){var c=this.moveMap,b=0,e,d;if(c){if(a){if(Ext.isArray(a)){for(d=0,e=a.length;d<e;++d){b+=c[a[d].id]?1:0}}else {if(c[a.id]){++b}}}else {b=f?c:this.moveMapCount}}return b},setLoadOptions:function(a){var b=this,c=b.getPageSize(),e,d;if(b.getRemoteSort()&&!a.grouper){d=b.getGrouper();if(d){a.grouper=d}}if(c||'start' in a||'limit' in a||'page' in a){a.page=a.page!=null?a.page:b.currentPage;a.start=a.start!==undefined?a.start:(a.page-1)*c;a.limit=a.limit!=null?a.limit:c;b.currentPage=a.page}a.addRecords=a.addRecords||!1;if(!a.recordCreator){e=b.getSession();if(e){a.recordCreator=e.recordCreator}}Ext.data.ProxyStore.prototype.setLoadOptions.call(this,a)},setMoving:function(e,f){var b=this,c=b.moveMap||(b.moveMap={}),g=e.length,d,a;for(d=0;d<g;++d){a=e[d].id;if(f){if(c[a]){++c[a]}else {c[a]=1;++b.moveMapCount}}else {if(--c[a]===0){delete c[a];--b.moveMapCount}}}if(b.moveMapCount===0){b.moveMap=null}},processAssociation:function(b){var a=this,c=a.getAssociatedEntity();if(c){b=a.getRole().processLoad(a,c,b,a.getSession())}return b}}},1,0,0,0,['store.store'],[[Ext.data.LocalStore.prototype.mixinId||Ext.data.LocalStore.$className,Ext.data.LocalStore]],[Ext.data,'Store'],0);Ext.cmd.derive('Ext.data.reader.Array',Ext.data.reader.Json,{alternateClassName:'Ext.data.ArrayReader',config:{totalProperty:undefined,successProperty:undefined},createFieldAccessor:function(a){var b=a.mapping,d=a.hasMapping()?b:a.ordinal,c;a.mapping=d;c=Ext.data.reader.Json.prototype.createFieldAccessor.apply(this,arguments);a.mapping=b;return c},getModelData:function(a){return {}}},0,0,0,0,['reader.array'],0,[Ext.data.reader,'Array',Ext.data,'ArrayReader'],0);Ext.cmd.derive('Ext.data.ArrayStore',Ext.data.Store,{alternateClassName:['Ext.data.SimpleStore'],config:{proxy:{type:'memory',reader:'array'}},loadData:function(a,d){if(this.expandData){var c=[],b=0,e=a.length;for(;b<e;b++){c[c.length]=[a[b]]}a=c}Ext.data.Store.prototype.loadData.call(this,a,d)}},0,0,0,0,['store.array'],0,[Ext.data,'ArrayStore',Ext.data,'SimpleStore'],0);Ext.cmd.derive('Ext.data.StoreManager',Ext.util.MixedCollection,{alternateClassName:['Ext.StoreMgr','Ext.data.StoreMgr','Ext.StoreManager'],singleton:!0,register:function(){for(var a=0,b;b=arguments[a];a++){this.add(b)}},unregister:function(){for(var a=0,b;b=arguments[a];a++){this.remove(this.lookup(b))}},lookup:function(a,g){if(Ext.isArray(a)){var f=['field1'],e=!Ext.isArray(a[0]),d=a,b,c;if(e){d=[];for(b=0,c=a.length;b<c;++b){d.push([a[b]])}}else {for(b=2,c=a[0].length;b<=c;++b){f.push('field'+b)}}return new Ext.data.ArrayStore({data:d,fields:f,autoDestroy:!0,autoCreated:!0,expanded:e})}if(Ext.isString(a)){return this.get(a)}else {return Ext.Factory.store(a,g)}},getKey:function(a){return a.storeId}},0,0,0,0,0,0,[Ext.data,'StoreManager',Ext,'StoreMgr',Ext.data,'StoreMgr',Ext,'StoreManager'],function(){Ext.regStore=function(b,a){var c;if(Ext.isObject(b)){a=b}else {if(Ext.data.StoreManager.containsKey(b)){return Ext.data.StoreManager.lookup(b)}a.storeId=b}if(a instanceof Ext.data.Store){c=a}else {c=new Ext.data.Store(a)}Ext.data.StoreManager.register(c);return c};Ext.getStore=function(a){return Ext.data.StoreManager.lookup(a)};var a=Ext.regStore('ext-empty-store',{proxy:'memory',useModelWarning:!1});a.isEmptyStore=!0});Ext.cmd.derive('Ext.app.domain.Store',Ext.app.EventDomain,{singleton:!0,type:'store',prefix:'store.',idMatchRe:/^\#/,constructor:function(){var a=this;a.callParent();a.monitor(Ext.data.AbstractStore)},match:function(c,a){var b=!1,d=c.alias;if(a==='*'){b=!0}else {if(this.idMatchRe.test(a)){b=c.getStoreId()===a.substring(1)}else {if(d){b=Ext.Array.indexOf(d,this.prefix+a)>-1}}}return b}},1,0,0,0,0,0,[Ext.app.domain,'Store'],0);Ext.cmd.derive('Ext.app.route.Queue',Ext.Base,{queue:null,token:null,constructor:function(a){Ext.apply(this,a);this.queue=new Ext.util.MixedCollection()},queueAction:function(a,b){this.queue.add({route:a,args:b})},clearQueue:function(){this.queue.removeAll()},runQueue:function(){var c=this.queue,a=c.removeAt(0),b;if(a){b=a&&a.route;b.execute(this.token,a.args,this.onActionExecute,this)}},onActionExecute:function(a){if(a){this.clearQueue()}else {this.runQueue()}}},1,0,0,0,0,0,[Ext.app.route,'Queue'],0);Ext.cmd.derive('Ext.app.route.Route',Ext.Base,{action:null,conditions:null,controller:null,allowInactive:!1,url:null,before:null,caseInsensitive:!1,matcherRegex:null,paramMatchingRegex:null,paramsInMatchString:null,constructor:function(c){var a=this,b;Ext.apply(a,c,{conditions:{}});b=a.url;a.paramMatchingRegex=new RegExp(/:([0-9A-Za-z\_]*)/g);a.paramsInMatchString=b.match(a.paramMatchingRegex)||[];a.matcherRegex=a.createMatcherRegex(b)},recognize:function(b){var a=this,d=a.controller,e,c;if((a.allowInactive||d.isActive())&&a.recognizes(b)){e=a.matchesFor(b);c=b.match(a.matcherRegex);c.shift();return Ext.applyIf(e,{controller:d,action:a.action,historyUrl:b,args:c})}return !1},recognizes:function(a){return this.matcherRegex.test(a)},execute:function(h,d,f,g){var e=d.args||[],a=this.before,c=this.controller,b=this.createCallback(d,f,g);if(a){e.push(b);if(Ext.isString(a)){a=this.before=c[a]}if(a){a.apply(c,e)}}else {b.resume()}},matchesFor:function(f){var b={},d=this.paramsInMatchString,c=f.match(this.matcherRegex),a=0,e=d.length;c.shift();for(;a<e;a++){b[d[a].replace(':','')]=c[a]}return b},createMatcherRegex:function(b){var d=this.paramsInMatchString,g=this.conditions,c=0,j=d.length,i=Ext.util.Format.format,h=this.caseInsensitive?'i':'',a,f,e;for(;c<j;c++){a=d[c];f=g[a];e=i('{0}',f||'([%a-zA-Z0-9\\-\\_\\s,]+)');b=b.replace(new RegExp(a),e)}return new RegExp('^'+b+'$',h)},createCallback:function(a,b,c){var d=this;c=c||d;return {resume:function(){var g=d.controller,e=d.action,f;if(Ext.isString(e)){e=g[e]}a=a&&a.args?a.args:[];f=a.pop();if(f&&!Ext.isObject(f)){a.push(f)}if(e){d.action=e;e.apply(g,a)}if(b){b.call(c)}},stop:function(d){if(b){b.call(c,d)}}}}},1,0,0,0,0,0,[Ext.app.route,'Route'],0);Ext.cmd.derive('Ext.util.History',Ext.Base,{singleton:!0,alternateClassName:'Ext.History',useTopWindow:!1,constructor:function(){var a=this;a.hiddenField=null;a.ready=!1;a.currentToken=null;a.mixins.observable.constructor.call(a)},getHash:function(){return this.win.location.hash.substr(1)},setHash:function(a){try{this.win.location.hash=a;this.currentToken=a}catch(b){}},handleStateChange:function(a){this.currentToken=a;this.fireEvent('change',a)},startUp:function(){var a=this;a.currentToken=a.getHash();if(Ext.supports.Hashchange){Ext.get(a.win).on('hashchange',a.onHashChange,a)}else {Ext.TaskManager.start({fireIdleEvent:!1,run:a.onHashChange,interval:50,scope:a})}a.ready=!0;a.fireEvent('ready',a)},onHashChange:function(){var a=this,b=a.getHash();if(b!==a.hash){a.hash=b;a.handleStateChange(b)}},init:function(b,c){var a=this;if(a.ready){Ext.callback(b,c,[a]);return}if(!Ext.isReady){Ext.onInternalReady(function(){a.init(b,c)});return}a.win=a.useTopWindow?window.top:window;a.hash=a.getHash();if(b){a.on('ready',b,c,{single:!0})}a.startUp()},add:function(a,d){var c=this,b=!1;if(d===!1||c.getToken()!==a){c.setHash(a);b=!0}return b},back:function(){var a=this.useTopWindow?window.top:window;a.history.go(-1)},forward:function(){var a=this.useTopWindow?window.top:window;a.history.go(1)},getToken:function(){return this.ready?this.currentToken:this.getHash()}},1,0,0,0,0,[['observable',Ext.util.Observable]],[Ext.util,'History',Ext,'History'],0);Ext.cmd.derive('Ext.app.route.Router',Ext.Base,{singleton:!0,multipleToken:'|',queueRoutes:!0,constructor:function(){var a=Ext.util.History;if(!a.ready){a.init()}a.on('change',this.onStateChange,this);this.clear()},onStateChange:function(a){var d=this,l=d.application,j=d.routes,n=j.length,f=d.queueRoutes,k=a.split(d.multipleToken),i=0,m=k.length,e,h,b,c,g;for(;i<m;i++){a=k[i];g=!1;if(f){h=new Ext.app.route.Queue({token:a})}for(e=0;e<n;e++){b=j[e];c=b.recognize(a);if(c){g=!0;if(f){h.queueAction(b,c)}else {b.execute(a,c)}}}if(f){h.runQueue()}if(!g&&l){l.fireEvent('unmatchedroute',a)}}},connect:function(d,a,c){var b={url:d,action:a,controller:c};if(Ext.isObject(a)){Ext.merge(b,a)}this.routes.push(new Ext.app.route.Route(b))},disconnectAll:function(e){var d=this.routes,f=d.length,c=[],a,b;for(a=0;a<f;++a){b=d[a];if(b.controller!==e){c.push(b)}}this.routes=c},recognize:function(f){var d=this.routes||[],c=0,e=d.length,a,b;for(;c<e;c++){a=d[c];b=a.recognize(f);if(b){return {route:a,args:b}}}return !1},draw:function(a){a.call(this,this)},clear:function(){this.routes=[]}},1,0,0,0,0,0,[Ext.app.route,'Router'],0);Ext.cmd.derive('Ext.app.Controller',Ext.app.BaseController,{statics:{strings:{model:{getter:'getModel',upper:'Model'},view:{getter:'getView',upper:'View'},controller:{getter:'getController',upper:'Controller'},store:{getter:'getStore',upper:'Store'},profile:{getter:'getProfile',upper:'Profiles'}},controllerRegex:/^(.*)\.controller\./,profileRegex:/^(.*)\.profile\./,createGetter:function(a,b){return function(){return this[a](b)}},getGetterName:function(f,d){var b='get',c=f.split('.'),e=c.length,a;for(a=0;a<e;a++){b+=Ext.String.capitalize(c[a])}b+=d;return b},resolveNamespace:function(f,e){var b=Ext.app.Controller,g=f.prototype.isProfile?b.profileRegex:b.controllerRegex,a,c,d;a=Ext.getClassName(f);c=e.$namespace||e.namespace||Ext.app.getNamespace(a)||(d=g.exec(a))&&d[1];return c},processDependencies:function(m,p,o,f,a,n){if(!a||!a.length){return}var c=this,k=c.strings[f],h,i,j,g,b,l,d,e;if(!Ext.isArray(a)){a=[a]}for(b=0,l=a.length;b<l;b++){g=a[b];h=c.getFullName(g,f,o,n);a[b]=i=h.absoluteName;j=h.shortName;p.push(i);d=c.getGetterName(j,k.upper);if(!m[d]){m[d]=e=c.createGetter(k.getter,g)}if(e&&f!=='controller'){e['Ext.app.getter']=!0}}},getFullName:function(a,g,d,f){var c=a,e,b;if((e=a.indexOf('@'))>0){c=a.substring(0,e);b=a.substring(e+1)+'.'+c}else {if(a.indexOf('.')>0&&(Ext.ClassManager.isCreated(a)||this.hasRegisteredPrefix(a))){b=a;c=a.replace(d+'.'+g+'.','')}else {if(d){b=d+'.'+g+'.'+(f?f+'.'+a:a);c=a}else {b=a}}}return {absoluteName:b,shortName:c}},hasRegisteredPrefix:function(a){var c=Ext.ClassManager,b=c.getPrefix(a);return b&&b!==a}},models:null,views:null,stores:null,controllers:null,config:{application:null,refs:null,active:!0,moduleClassName:null},onClassExtended:function(d,c,a){var b=a.onBeforeCreated;a.onBeforeCreated=function(j,i){var g=Ext.app.Controller,h=[],e,f;f=j.prototype;e=g.resolveNamespace(j,i);if(e){f.$namespace=e}g.processDependencies(f,h,e,'model',i.models);g.processDependencies(f,h,e,'view',i.views);g.processDependencies(f,h,e,'store',i.stores);g.processDependencies(f,h,e,'controller',i.controllers);Ext.require(h,Ext.Function.pass(b,arguments,this))}},constructor:function(a){this.initAutoGetters();Ext.app.BaseController.prototype.constructor.call(this,a)},normalizeRefs:function(a){var c=this,b=[];if(a){if(Ext.isObject(a)){Ext.Object.each(a,function(d,c){if(Ext.isString(c)){c={selector:c}}c.ref=d;b.push(c)})}else {if(Ext.isArray(a)){b=Ext.Array.merge(b,a)}}}a=c.refs;if(a){c.refs=null;a=c.normalizeRefs(a);if(a){b=Ext.Array.merge(b,a)}}return b},getRefMap:function(){var e=this,a=e._refMap,b,d,f,c;if(!a){b=e.getRefs();a=e._refMap={};if(b){for(c=0,f=b.length;c<f;c++){d=b[c];a[d.ref]=d.selector}}}return a},applyId:function(a){return a||Ext.app.Controller.getFullName(this.$className,'controller',this.$namespace).shortName},applyRefs:function(a){return this.normalizeRefs(Ext.clone(a))},updateRefs:function(a){if(a){this.ref(a)}},initAutoGetters:function(){var b=this.self.prototype,c,a;for(c in b){a=b[c];if(a&&a['Ext.app.getter']){a.call(this)}}},doInit:function(b){var a=this;if(!a._initialized){a.init(b);a._initialized=!0}},finishInit:function(f){var c=this,a=c.controllers,d,b,e;if(c._initialized&&a&&a.length){for(b=0,e=a.length;b<e;b++){d=c.getController(a[b]);d.finishInit(f)}}},init:Ext.emptyFn,onLaunch:Ext.emptyFn,activate:function(){this.setActive(!0)},deactivate:function(){this.setActive(!1)},isActive:function(){return this.getActive()},ref:function(b){var a=this,f=0,g=b.length,d,c,e;b=Ext.Array.from(b);a.references=a.references||[];for(;f<g;f++){d=b[f];c=d.ref;e='get'+Ext.String.capitalize(c);if(!a[e]){a[e]=Ext.Function.pass(a.getRef,[c,d],a)}a.references.push(c.toLowerCase())}},addRef:function(a){this.ref(a)},getRef:function(d,a,e){var f=this,c=f.refCache||(f.refCache={}),b=c[d];a=a||{};e=e||{};Ext.apply(a,e);if(a.forceCreate){return Ext.ComponentManager.create(a,'component')}if(!b){if(a.selector){c[d]=b=Ext.ComponentQuery.query(a.selector)[0]}if(!b&&a.autoCreate){c[d]=b=Ext.ComponentManager.create(a,'component')}if(b){b.on('destroy',function(){c[d]=null})}}return b},hasRef:function(b){var a=this.references;return a&&Ext.Array.indexOf(a,b.toLowerCase())!==-1},getController:function(b){var a=this.getApplication();if(b===this.getId()){return this}return a&&a.getController(b)},getStore:function(a){var c,b;c=a.indexOf('@')===-1?a:a.split('@')[0];b=Ext.StoreManager.get(c);if(!b){a=Ext.app.Controller.getFullName(a,'store',this.$namespace);if(a){b=Ext.create(a.absoluteName,{id:c})}}return b},getModel:function(b){var c=Ext.app.Controller.getFullName(b,'model',this.$namespace),a=Ext.ClassManager.get(c.absoluteName);if(!a){a=Ext.data.schema.Schema.lookupEntity(b)}return a},getProfile:function(a){a=Ext.app.Controller.getFullName(a,'profile',this.$namespace);return a},getView:function(b){var a=Ext.app.Controller.getFullName(b,'view',this.$namespace);return a&&Ext.ClassManager.get(a.absoluteName)},destroy:function(e,f){var b=this,d=b.application,a,c;if(!f&&d){d.unregister(b)}b.application=null;if(e){a=b.refCache;for(c in a){if(a.hasOwnProperty(c)){Ext.destroy(a[c])}}}Ext.app.BaseController.prototype.destroy.call(this)}},1,0,0,0,0,0,[Ext.app,'Controller'],0);Ext.cmd.derive('Ext.app.Application',Ext.app.Controller,{isApplication:!0,scope:undefined,namespaces:[],paths:null,config:{name:'',appProperty:'app',profiles:[],currentProfile:null,mainView:{$value:null,lazy:!0},defaultToken:null,glyphFontFamily:null},onClassExtended:function(d,a,f){var h=Ext.app.Controller,g=d.prototype,c=[],e,i,b,j;b=a.name||d.superclass.name;if(b){a.$namespace=b;Ext.app.addNamespaces(b)}if(a.namespaces){Ext.app.addNamespaces(a.namespaces)}if(a['paths processed']){delete a['paths processed']}else {Ext.app.setupPaths(b,'appFolder' in a?a.appFolder:d.superclass.appFolder,a.paths)}h.processDependencies(g,c,b,'profile',a.profiles);g.getDependencies(d,a,c);if(c.length){e=f.onBeforeCreated;f.onBeforeCreated=function(h,g){var b=Ext.Array.clone(arguments);Ext.require(c,function(){return e.apply(this,b)})}}},getDependencies:Ext.emptyFn,constructor:function(b){var a=this;Ext.app.route.Router.application=a;Ext.app.Controller.prototype.constructor.call(this,b);a.doInit(a);a.initNamespace();Ext.on('appupdate',a.onAppUpdate,a,{single:!0});this.onProfilesReady()},applyId:function(a){return a||this.$className},onAppUpdate:Ext.emptyFn,onProfilesReady:function(){var a=this,e=a.getProfiles(),f=e.length,b,c,d;for(c=0;c<f;c++){d=Ext.create(e[c],{application:a});if(d.isActive()&&!b){b=d;a.setCurrentProfile(b)}}if(b){b.init()}a.initControllers();a.onBeforeLaunch();a.finishInitControllers()},initNamespace:function(){var b=this,c=b.getAppProperty(),a;a=Ext.namespace(b.getName());if(a){a.getApplication=function(){return b};if(c){if(!a[c]){a[c]=b}}}},initControllers:function(){var c=this,b=Ext.Array.from(c.controllers),e=c.getCurrentProfile(),a,d;c.controllers=new Ext.util.MixedCollection();for(a=0,d=b.length;a<d;a++){c.getController(b[a])}if(e){b=e.getControllers();for(a=0,d=b.length;a<d;a++){c.getController(b[a])}}},finishInitControllers:function(){var c=this,b,a,d;b=c.controllers.getRange();for(a=0,d=b.length;a<d;a++){b[a].finishInit(c)}},launch:Ext.emptyFn,onBeforeLaunch:function(){var a=this,b=Ext.util.History,e=a.getDefaultToken(),g=a.getCurrentProfile(),f,d,i,h,c;a.initMainView();if(g){g.launch()}a.launch.call(a.scope||a);a.launched=!0;a.fireEvent('launch',a);f=a.controllers.items;i=f.length;for(d=0;d<i;d++){h=f[d];h.onLaunch(a)}if(!b.ready){b.init()}c=b.getToken();if(c||c===e){Ext.app.route.Router.onStateChange(c)}else {if(e){b.add(e)}}if(Ext.Microloader&&Ext.Microloader.appUpdate&&Ext.Microloader.appUpdate.updated){Ext.Microloader.fireAppUpdate()}Ext.defer(Ext.ClassManager.clearNamespaceCache,2000,Ext.ClassManager)},getModuleClassName:function(b,a){return Ext.app.Controller.getFullName(b,a,this.getName()).absoluteName},initMainView:function(){var b=this,c=b.getCurrentProfile(),a;if(c){a=c.getMainView()}if(a){b.setMainView(a)}else {b.getMainView()}},applyMainView:function(a){var b=this.getView(a);return b.create()},createController:function(a){return this.getController(a)},destroyController:function(a){if(typeof a==='string'){a=this.getController(a,!0)}Ext.destroy(a)},getController:function(f,j){var c=this,e=c.controllers,b,a,i,d,h,g;a=e.get(f);if(!a){g=e.items;for(d=0,i=g.length;d<i;++d){h=g[d];b=h.getModuleClassName();if(b&&b===f){a=h;break}}}if(!a&&!j){b=c.getModuleClassName(f,'controller');a=Ext.create(b,{application:c,moduleClassName:b});e.add(a);if(c._initialized){a.doInit(c)}}return a},unregister:function(a){this.controllers.remove(a)},getApplication:function(){return this},destroy:function(d){var a=this,c=a.controllers,b=Ext.namespace(a.getName()),e=a.getAppProperty();Ext.destroy(a.viewport);if(c){c.each(function(a){a.destroy(d,!0)})}a.controllers=null;Ext.app.Controller.prototype.destroy.call(this,d,!0);if(b&&b[e]===a){delete b[e]}},updateGlyphFontFamily:function(a){Ext.setGlyphFontFamily(a)},applyProfiles:function(a){var b=this;return Ext.Array.map(a,function(c){return b.getModuleClassName(c,'profile')})}},1,0,0,0,0,0,[Ext.app,'Application'],0);Ext.application=function(a){var b=function(b){Ext.onReady(function(){var c=Ext.viewport;c=c&&c['Viewport'];if(c&&c.setup){c.setup(b.prototype.config.viewport)}Ext.app.Application.instance=new b()})};if(typeof a==='string'){Ext.require(a,function(){b(Ext.ClassManager.get(a))})}else {a=Ext.apply({extend:'Ext.app.Application'},a);Ext.app.setupPaths(a.name,a.appFolder,a.paths);a['paths processed']=!0;Ext.define(a.name+'.$application',a,function(){b(this)})}};Ext.cmd.derive('Ext.scroll.Scroller',Ext.Evented,{factoryConfig:{defaultType:'dom'},isScroller:!0,_spacerCls:'x-domscroller-spacer',config:{direction:undefined,directionLock:!1,disabled:null,element:undefined,indicators:null,maxPosition:{x:0,y:0},maxUserPosition:{x:0,y:0},minPosition:{x:0,y:0},minUserPosition:{x:0,y:0},momentumEasing:null,size:null,slotSnapSize:{x:0,y:0},x:!0,y:!0,scrollElement:null,spacerXY:null},statics:{create:function(a){return Ext.Factory.scroller(a,Ext.supports.Touch?'touch':'dom')},getScrollingElement:function(){var d=document,c=this.$standardScrollElement,e=d.scrollingElement,a,b;if(e){return e}if(c===undefined){a=document.createElement('iframe');a.style.height='1px';document.body.appendChild(a);b=a.contentWindow.document;b.write('<!DOCTYPE html><div style="height:9999em">x</div>');b.close();c=b.documentElement.scrollHeight>b.body.scrollHeight;a.parentNode.removeChild(a);this.$standardScrollElement=c}return c?d.documentElement:d.body}},constructor:function(b){var a=this;a.position={x:0,y:0};Ext.Evented.prototype.constructor.call(this,b);a.onDomScrollEnd=Ext.Function.createBuffered(a.onDomScrollEnd,100,a)},destroy:function(){var a=this;a.setX(Ext.emptyString);a.setY(Ext.emptyString);a.setElement(null);a.setScrollElement(null);a.onDomScrollEnd=a._partners=a.component=null;Ext.Evented.prototype.destroy.call(this)},addPartner:function(a,c){var b=this,e=b._partners||(b._partners={}),d=a._partners||(a._partners={});e[a.getId()]={scroller:a,axis:c};d[b.getId()]={scroller:b,axis:c}},applyElement:function(c,f){var b=this,a,d,e;if(f){b.scrollListener.destroy()}if(c){if(c.isElement){a=c}else {a=Ext.get(c)}if(a.dom===document.documentElement){d=Ext.getWin();e=Ext.scroll.Scroller.getScrollingElement()}else {e=d=a}b.setScrollElement(Ext.get(e));b.scrollListener=d.on({scroll:b.onDomScroll,scope:b,destroyable:!0});if(Ext.supports.touchScroll===1&&Ext.getScrollbarSize().width){b.clientRegion=a.getClientRegion()}return a}},getClientSize:function(){var a=this.getElement().dom;return {x:a.clientWidth,y:a.clientHeight}},getScrollbarSize:function(){var c=this,j=0,i=0,b,a,d,e,g,h,f;if(c.isDomScroller||Ext.supports.touchScroll===1){b=c.getElement();if(b&&!b.destroyed){d=c.getX();e=c.getY();a=b.dom;if(d||e){f=Ext.getScrollbarSize()}if(d==='scroll'){g=!0}else {if(d){g=a.scrollWidth>a.clientWidth}}if(e==='scroll'){h=!0}else {if(e){h=a.scrollHeight>a.clientHeight}}if(g){i=f.height}if(h){j=f.width}}}return {width:j,height:i}},getPosition:function(){return this.position},updateDirectionLock:Ext.emptyFn,updateDisabled:Ext.emptyFn,updateIndicators:Ext.emptyFn,updateMaxPosition:Ext.emptyFn,updateMaxUserPosition:Ext.emptyFn,updateMinPosition:Ext.emptyFn,updateMinUserPosition:Ext.emptyFn,updateMomenumEasing:Ext.emptyFn,updateX:Ext.emptyFn,updateY:Ext.emptyFn,onPartnerScrollStart:Ext.emptyFn,onPartnerScrollEnd:Ext.emptyFn,refresh:function(){this.positionDirty=!0;this.fireEvent('refresh',this);return this},removePartner:function(c){var b=this._partners,a=c._partners;if(b){delete b[c.getId()]}if(a){delete a[this.getId()]}},scrollBy:function(a,b,c){var d=this.getPosition();if(a){if(a.length){c=b;b=a[1];a=a[0]}else {if(typeof a!=='number'){c=b;b=a.y;a=a.x}}}a=typeof a==='number'?a+d.x:null;b=typeof b==='number'?b+d.y:null;return this.doScrollTo(a,b,c)},scrollIntoView:function(d,i,h,e){var a=this,c=a.getPosition(),b,f,g,j=a.getElement();if(d){b=Ext.fly(d).getScrollIntoViewXY(j,c.x,c.y);f=i===!1?c.x:b.x;g=b.y;if(e){a.on({scrollend:'doHighlight',scope:a,single:!0,args:[d,e]})}a.doScrollTo(f,g,h)}},isInView:function(a){return this.doIsInView(a)},scrollTo:function(a,b,d){var c;if(a){if(a.length){d=b;b=a[1];a=a[0]}else {if(typeof a!=='number'){d=b;b=a.y;a=a.x}}}if(a<0||b<0){c=this.getMaxPosition();if(a<0){a+=c.x}if(b<0){b+=c.y}}this.doScrollTo(a,b,d)},updateDirection:function(a){var d=this,b,c;if(!a){b=d.getX();c=d.getY();if(b&&c){a=c==='scroll'&&b==='scroll'?'both':'auto'}else {if(c){a='vertical'}else {if(b){a='horizontal'}}}d._direction=a}else {if(a==='auto'){b=!0;c=!0}else {if(a==='vertical'){b=!1;c=!0}else {if(a==='horizontal'){b=!0;c=!1}else {if(a==='both'){b='scroll';c='scroll'}}}}d.setX(b);d.setY(c)}},updateSize:function(a){var d=this,f=d.getElement(),e,b,c;if(f){d.positionDirty=!0;e=d.getSpacer();if(a==null){e.hide()}else {if(typeof a==='number'){b=a;c=a}else {b=a.x||0;c=a.y||0}if(b>0){b-=1}if(c>0){c-=1}d.setSpacerXY({x:b,y:c});e.show()}}},deprecated:{5:{methods:{getScroller:function(){return this}}},'5.1.0':{methods:{scrollToTop:function(a){return this.scrollTo(0,0,a)},scrollToEnd:function(a){return this.scrollTo(Infinity,Infinity,a)}}}},privates:{getSpacer:function(){var c=this,a=c._spacer,b;if(!a){b=c.getElement();a=c._spacer=b.createChild({cls:c._spacerCls,role:'presentation'},b.dom.firstChild);a.setVisibilityMode(2);a.hide();b.position()}return a},applySpacerXY:function(a,b){if(b&&a.x===b.x&&a.y===b.y){a=undefined}return a},updateSpacerXY:function(e){var d=this.getSpacer(),a=d.dom.style,c=e.y,b;a.marginTop='';d.translate(e.x,this.constrainScrollRange(c));a.lineHeight=Number(!parseInt(a.lineHeight,10))+'px';b=c-this.getElement().dom.scrollHeight;if(b>0){a.marginTop=Math.min(b,this.maxSpacerMargin||0)+'px'}},doIsInView:function(c,h){var f=this,g=f.component,d={x:!1,y:!1},b,e=f.getElement(),a;if(c&&(h||(e.contains(c)||g&&g.owns(c)))){a=e.getRegion();b=Ext.fly(c).getRegion();d.x=b.right>a.left&&b.left<a.right;d.y=b.bottom>a.top&&b.top<a.bottom}return d},constrainScrollRange:function(g){if(g<1000000){return g}if(!this.maxSpacerTranslate){var b=Math.pow(2,32),c=b,a=500,f=Ext.getBody().createChild({style:{position:'absolute',left:'-10000px',top:'0',width:'500px',height:'500px'},cn:{cls:'x-domscroller-spacer'}},null,!0),e=Ext.get(f.firstChild),d=e.dom.style;e.translate(0,b-1);d.lineHeight=Number(!parseInt(d.lineHeight,10))+'px';while(c!==a+1){e.translate(0,b=a+Math.floor((c-a)/2));d.lineHeight=Number(!parseInt(d.lineHeight,10))+'px';if(f.scrollHeight<b){c=b}else {a=b}}e.translate(0,Ext.scroll.Scroller.prototype.maxSpacerTranslate=a);c=a*2;while(c!==a+1){e.dom.style.marginTop=(b=a+Math.floor((c-a)/2))+'px';d.lineHeight=Number(!parseInt(d.lineHeight,10))+'px';if(f.scrollHeight<b){c=b}else {a=b}}Ext.fly(f).destroy();Ext.scroll.Scroller.prototype.maxSpacerMargin=a-Ext.scroll.Scroller.prototype.maxSpacerTranslate}return Math.min(g,this.maxSpacerTranslate)},convertX:function(a){return a},doHighlight:function(b,a){if(a!==!0){Ext.fly(b).highlight(a)}else {Ext.fly(b).highlight()}},fireScrollStart:function(b,c){var a=this,d=a.component;a.invokePartners('onPartnerScrollStart',b,c);if(a.hasListeners.scrollstart){a.fireEvent('scrollstart',a,b,c)}if(d&&d.onScrollStart){d.onScrollStart(b,c)}Ext.GlobalEvents.fireEvent('scrollstart',a,b,c)},fireScroll:function(b,c){var a=this,d=a.component;a.invokePartners('onPartnerScroll',b,c);if(a.hasListeners.scroll){a.fireEvent('scroll',a,b,c)}if(d&&d.onScrollMove){d.onScrollMove(b,c)}Ext.GlobalEvents.fireEvent('scroll',a,b,c)},fireScrollEnd:function(b,c){var a=this,d=a.component;a.invokePartners('onPartnerScrollEnd',b,c);if(a.hasListeners.scrollend){a.fireEvent('scrollend',a,b,c)}if(d&&d.onScrollEnd){d.onScrollEnd(b,c)}Ext.GlobalEvents.fireEvent('scrollend',a,b,c)},initXStyle:function(){var b=this.getElement(),a=this.getX();if(b&&b.dom){if(!a){a='hidden'}else {if(a===!0){a='auto'}}b.setStyle('overflow-x',a)}},initYStyle:function(){var b=this.getElement(),a=this.getY();if(b&&b.dom){if(!a){a='hidden'}else {if(a===!0){a='auto'}}b.setStyle('overflow-y',a)}},invokePartners:function(d,g,h){var b=this,c=b._partners,a,e,f=d==='onPartnerScrollEnd';if(!b.suspendSync&!b.isReflecting){for(e in c){a=c[e].scroller;a.isReflecting=!0;a[d](b,g,h);if(f){a.isReflecting=!1}}}},clearReflecting:function(){this.isReflecting=!1},suspendPartnerSync:function(){this.suspendSync=(this.suspendSync||0)+1},resumePartnerSync:function(c){var a=this,b;if(a.suspendSync){a.suspendSync--}if(!a.suspendSync&&c){b=a.getPosition();a.invokePartners('onPartnerScroll',b.x,b.y);a.invokePartners('onPartnerScrollEnd',b.x,b.y)}},updateDomScrollPosition:function(){var a=this,d=a.getScrollElement(),b,c=a.position;if(d&&!d.destroyed){b=a.getElementScroll(d);c.x=b.left;c.y=b.top}a.positionDirty=!1;return c},getElementScroll:function(a){return a.getScroll()},syncWithPartners:function(){var a=this,d=a._partners,e,c,b;a.isReflecting=!0;for(e in d){c=d[e].scroller;b=c.getPosition();a.onPartnerScroll(c,b.x,b.y)}a.isReflecting=!1},onDomScroll:function(){var a=this,b,c,d;b=a.updateDomScrollPosition();if(a.restoring){return}c=b.x;d=b.y;if(!a.isScrolling){a.isScrolling=Ext.isScrolling=!0;a.fireScrollStart(c,d)}a.fireScroll(c,d);a.onDomScrollEnd()},onDomScrollEnd:function(){var a=this,b=a.getPosition(),c=b.x,d=b.y;a.isScrolling=Ext.isScrolling=!1;a.trackingScrollLeft=c;a.trackingScrollTop=d;a.fireScrollEnd(c,d)},onPartnerScroll:function(d,b,c){var a=d._partners[this.getId()].axis;if(a){if(a==='x'){c=null}else {if(a==='y'){b=null}}}this.doScrollTo(b,c,!1,!0)},restoreState:function(){var a=this,c=a.getScrollElement(),b;if(c){b=c.dom;if(a.trackingScrollTop!==undefined){a.restoring=!0;Ext.defer(function(){a.restoring=!1},50);b.scrollTop=a.trackingScrollTop;b.scrollLeft=a.trackingScrollLeft;a.trackingScrollLeft=a.trackingScrollTop=undefined}}}}},1,0,0,0,['scroller.scroller'],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.scroll,'Scroller'],0);Ext.cmd.derive('Ext.fx.easing.Abstract',Ext.Base,{config:{startTime:0,startValue:0},isEasing:!0,isEnded:!1,constructor:function(a){this.initConfig(a);return this},applyStartTime:function(a){if(!a){a=Ext.Date.now()}return a},updateStartTime:function(a){this.reset()},reset:function(){this.isEnded=!1},getValue:Ext.emptyFn},1,0,0,0,0,0,[Ext.fx.easing,'Abstract'],0);Ext.cmd.derive('Ext.fx.easing.Momentum',Ext.fx.easing.Abstract,{config:{acceleration:30,friction:0,startVelocity:0},alpha:0,updateFriction:function(b){var a=Math.log(1-b/10);this.theta=a;this.alpha=a/this.getAcceleration()},updateStartVelocity:function(a){this.velocity=a*this.getAcceleration()},updateAcceleration:function(a){this.velocity=this.getStartVelocity()*a;this.alpha=this.theta/a},getValue:function(){return this.getStartValue()-this.velocity*(1-this.getFrictionFactor())/this.theta},getFrictionFactor:function(){var a=Ext.Date.now()-this.getStartTime();return Math.exp(a*this.alpha)},getVelocity:function(){return this.getFrictionFactor()*this.velocity}},0,0,0,0,0,0,[Ext.fx.easing,'Momentum'],0);Ext.cmd.derive('Ext.fx.easing.Bounce',Ext.fx.easing.Abstract,{config:{springTension:0.3,acceleration:30,startVelocity:0},getValue:function(){var b=Ext.Date.now()-this.getStartTime(),a=b/this.getAcceleration(),c=a*Math.pow(Math.E,-this.getSpringTension()*a);return this.getStartValue()+this.getStartVelocity()*c}},0,0,0,0,0,0,[Ext.fx.easing,'Bounce'],0);Ext.cmd.derive('Ext.fx.easing.BoundMomentum',Ext.fx.easing.Abstract,{config:{momentum:null,bounce:null,minMomentumValue:0,maxMomentumValue:0,minVelocity:0.01,startVelocity:0},applyMomentum:function(b,a){return Ext.factory(b,Ext.fx.easing.Momentum,a)},applyBounce:function(b,a){return Ext.factory(b,Ext.fx.easing.Bounce,a)},updateStartTime:function(a){this.getMomentum().setStartTime(a);Ext.fx.easing.Abstract.prototype.updateStartTime.apply(this,arguments)},updateStartVelocity:function(a){this.getMomentum().setStartVelocity(a)},updateStartValue:function(a){this.getMomentum().setStartValue(a)},reset:function(){this.lastValue=null;this.isBouncingBack=!1;this.isOutOfBound=!1;return Ext.fx.easing.Abstract.prototype.reset.apply(this,arguments)},getValue:function(){var d=this.getMomentum(),j=this.getBounce(),f=d.getStartVelocity(),b=f>0?1:-1,i=this.getMinMomentumValue(),h=this.getMaxMomentumValue(),g=b==1?h:i,c=this.lastValue,a,e;if(f===0){return this.getStartValue()}if(!this.isOutOfBound){a=d.getValue();e=d.getVelocity();if(Math.abs(e)<this.getMinVelocity()){this.isEnded=!0}if(a>=i&&a<=h){return a}this.isOutOfBound=!0;j.setStartTime(Ext.Date.now()).setStartVelocity(e).setStartValue(g)}a=j.getValue();if(!this.isEnded){if(!this.isBouncingBack){if(c!==null){if(b==1&&a<c||b==-1&&a>c){this.isBouncingBack=!0}}}else {if(Math.round(a)==g){this.isEnded=!0}}}this.lastValue=a;return a}},0,0,0,0,0,0,[Ext.fx.easing,'BoundMomentum'],0);Ext.cmd.derive('Ext.fx.easing.Linear',Ext.fx.easing.Abstract,{config:{duration:0,endValue:0},updateStartValue:function(a){this.distance=this.getEndValue()-a},updateEndValue:function(a){this.distance=a-this.getStartValue()},getValue:function(){var a=Ext.Date.now()-this.getStartTime(),b=this.getDuration();if(a>b){this.isEnded=!0;return this.getEndValue()}else {return this.getStartValue()+a/b*this.distance}}},0,0,0,0,['easing.linear'],0,[Ext.fx.easing,'Linear'],0);Ext.cmd.derive('Ext.fx.easing.EaseOut',Ext.fx.easing.Linear,{config:{exponent:4,duration:1500},getValue:function(){var a=Ext.Date.now()-this.getStartTime(),b=this.getDuration(),d=this.getStartValue(),f=this.getEndValue(),e=this.distance,i=a/b,h=1-i,g=1-Math.pow(h,this.getExponent()),c=d+g*e;if(a>=b){this.isEnded=!0;return f}return c}},0,0,0,0,['easing.ease-out'],0,[Ext.fx.easing,'EaseOut'],0);Ext.cmd.derive('Ext.util.translatable.Abstract',Ext.Evented,{config:{useWrapper:null,easing:null,easingX:null,easingY:null},x:0,y:0,activeEasingX:null,activeEasingY:null,isAnimating:!1,isTranslatable:!0,constructor:function(a){this.mixins.observable.constructor.call(this,a);this.position={x:0,y:0}},factoryEasing:function(a){return Ext.factory(a,Ext.fx.easing.Linear,null,'easing')},applyEasing:function(a){if(!this.getEasingX()){this.setEasingX(this.factoryEasing(a))}if(!this.getEasingY()){this.setEasingY(this.factoryEasing(a))}},applyEasingX:function(a){return this.factoryEasing(a)},applyEasingY:function(a){return this.factoryEasing(a)},doTranslate:Ext.emptyFn,translate:function(a,b,c){if(c){return this.translateAnimated(a,b,c)}if(this.isAnimating){this.stopAnimation()}if(!isNaN(a)&&typeof a=='number'){this.x=a}if(!isNaN(b)&&typeof b=='number'){this.y=b}this.doTranslate(a,b)},translateAxis:function(e,a,d){var b,c;if(e=='x'){b=a}else {c=a}return this.translate(b,c,d)},getPosition:function(){var b=this,a=b.position;a.x=-b.x;a.y=-b.y;return a},animate:function(a,b){this.activeEasingX=a;this.activeEasingY=b;this.isAnimating=!0;this.lastX=null;this.lastY=null;Ext.AnimationQueue.start(this.doAnimationFrame,this);this.fireEvent('animationstart',this,this.x,this.y);return this},translateAnimated:function(g,h,a){var b=this;if(!Ext.isObject(a)){a={}}if(b.isAnimating){b.stopAnimation()}b.callback=a.callback;b.callbackScope=a.scope;var f=Ext.Date.now(),e=a.easing,c=typeof g=='number'?a.easingX||e||b.getEasingX()||!0:null,d=typeof h=='number'?a.easingY||e||b.getEasingY()||!0:null;if(c){c=b.factoryEasing(c);c.setStartTime(f);c.setStartValue(b.x);c.setEndValue(g);if('duration' in a){c.setDuration(a.duration)}}if(d){d=b.factoryEasing(d);d.setStartTime(f);d.setStartValue(b.y);d.setEndValue(h);if('duration' in a){d.setDuration(a.duration)}}return b.animate(c,d)},doAnimationFrame:function(){var a=this,d=a.activeEasingX,e=a.activeEasingY,f=Date.now(),b,c;if(!a.isAnimating){return}a.lastRun=f;if(d===null&&e===null){a.stopAnimation();return}if(d!==null){a.x=b=Math.round(d.getValue());if(d.isEnded){a.activeEasingX=null;a.fireEvent('axisanimationend',a,'x',b)}}else {b=a.x}if(e!==null){a.y=c=Math.round(e.getValue());if(e.isEnded){a.activeEasingY=null;a.fireEvent('axisanimationend',a,'y',c)}}else {c=a.y}if(a.lastX!==b||a.lastY!==c){a.doTranslate(b,c);a.lastX=b;a.lastY=c}a.fireEvent('animationframe',a,b,c)},stopAnimation:function(){var a=this;if(!a.isAnimating){return}a.activeEasingX=null;a.activeEasingY=null;a.isAnimating=!1;Ext.AnimationQueue.stop(a.doAnimationFrame,a);a.fireEvent('animationend',a,a.x,a.y);if(a.callback){a.callback.call(a.callbackScope);a.callback=null}},refresh:function(){this.translate(this.x,this.y)},destroy:function(){if(this.isAnimating){this.stopAnimation()}Ext.Evented.prototype.destroy.call(this)}},1,0,0,0,0,0,[Ext.util.translatable,'Abstract'],0);Ext.cmd.derive('Ext.util.translatable.Dom',Ext.util.translatable.Abstract,{config:{element:null},applyElement:function(a){if(!a){return}return Ext.get(a)},updateElement:function(){this.refresh()}},0,0,0,0,0,0,[Ext.util.translatable,'Dom'],0);Ext.cmd.derive('Ext.util.translatable.CssTransform',Ext.util.translatable.Dom,{doTranslate:function(b,c){var a=this.getElement();if(!this.destroyed&&!a.destroyed){a.translate(b,c)}},destroy:function(){var a=this.getElement();if(a&&!a.destroyed){a.dom.style.webkitTransform=null}Ext.util.translatable.Dom.prototype.destroy.call(this)}},0,0,0,0,0,0,[Ext.util.translatable,'CssTransform'],0);Ext.cmd.derive('Ext.util.translatable.ScrollPosition',Ext.util.translatable.Dom,{type:'scrollposition',config:{useWrapper:!0},getWrapper:function(){var a=this.wrapper,c=this.getElement(),b;if(!a){b=c.getParent();if(!b){return null}if(b.hasCls('x-translatable-hboxfix')){b=b.getParent()}if(this.getUseWrapper()){a=c.wrap()}else {a=b}c.addCls('x-translatable');a.addCls('x-translatable-container');this.wrapper=a;a.on('painted',function(){if(!this.isAnimating){this.refresh()}},this);this.refresh()}return a},doTranslate:function(c,d){var b=this.getWrapper(),a;if(b){a=b.dom;if(typeof c=='number'){a.scrollLeft=500000-c}if(typeof d=='number'){a.scrollTop=500000-d}}},destroy:function(){var a=this,c=a.getElement(),b=a.wrapper;if(b){if(!c.destroyed){if(a.getUseWrapper()){b.doReplaceWith(c)}c.removeCls('x-translatable')}if(!b.destroyed){b.removeCls('x-translatable-container');b.un('painted','refresh',a)}delete a.wrapper;delete a._element}Ext.util.translatable.Dom.prototype.destroy.call(this)}},0,0,0,0,0,0,[Ext.util.translatable,'ScrollPosition'],0);Ext.cmd.derive('Ext.util.translatable.ScrollParent',Ext.util.translatable.Dom,{isScrollParent:!0,applyElement:function(b){var a=Ext.get(b);if(a){this.parent=a.parent()}return a},doTranslate:function(b,c){var a=this.parent;a.setScrollLeft(Math.round(-b));a.setScrollTop(Math.round(-c))},getPosition:function(){var c=this,a=c.position,b=c.parent;a.x=b.getScrollLeft();a.y=b.getScrollTop();return a}},0,0,0,0,0,0,[Ext.util.translatable,'ScrollParent'],0);Ext.cmd.derive('Ext.util.translatable.CssPosition',Ext.util.translatable.Dom,{doTranslate:function(b,c){var a=this.getElement().dom.style;if(typeof b=='number'){a.left=b+'px'}if(typeof c=='number'){a.top=c+'px'}},destroy:function(){var a=this.getElement().dom.style;a.left=null;a.top=null;Ext.util.translatable.Dom.prototype.destroy.call(this)}},0,0,0,0,0,0,[Ext.util.translatable,'CssPosition'],0);Ext.cmd.derive('Ext.util.Translatable',Ext.Base,{constructor:function(a){var b=Ext.util.translatable;switch(Ext.browser.getPreferredTranslationMethod(a)){case 'scrollposition':return new b.ScrollPosition(a);case 'scrollparent':return new b.ScrollParent(a);case 'csstransform':return new b.CssTransform(a);case 'cssposition':return new b.CssPosition(a);}}},1,0,0,0,0,0,[Ext.util,'Translatable'],0);Ext.cmd.derive('Ext.scroll.Indicator',Ext.Widget,{config:{axis:null,hideAnimation:!0,hideDelay:0,scroller:null,minLength:24},defaultHideAnimation:{to:{opacity:0},duration:300},names:{x:{side:'l',getSize:'getHeight',setLength:'setWidth',translate:'translateX'},y:{side:'t',getSize:'getWidth',setLength:'setHeight',translate:'translateY'}},oppositeAxis:{x:'y',y:'x'},cls:'x-scroll-indicator',hidden:!0,applyHideAnimation:function(a){if(a){a=Ext.mergeIf({onEnd:this.onHideAnimationEnd,scope:this},this.defaultHideAnimation,a)}return a},constructor:function(c){var a=this,b;Ext.Widget.prototype.constructor.call(this,c);b=a.getAxis();a.names=a.names[b];a.element.addCls(a.cls+' '+a.cls+'-'+b)},hide:function(){var a=this,b=a.getHideDelay();if(a.hidden){return}a.hidden=!0;if(b){a._hideTimer=Ext.defer(a.doHide,b,a)}else {a.doHide()}},setValue:function(c){var a=this,o=a.element,l=a.names,m=a.getAxis(),k=a.getScroller(),f=k.getMaxUserPosition()[m],g=k.getElementSize()[m],b=a.length,j=a.getMinLength(),e=b,i=g-b-a.sizeAdjust,h=Math.round,n=Math.max,d;if(c<0){e=h(n(b+b*c/g,j));d=0}else {if(c>f){e=h(n(b-b*(c-f)/g,j));d=i+b-e}else {d=h(c/f*i)}}a[l.translate](d);o[l.setLength](e)},show:function(){var a=this,b=a.element,c=b.getActiveAnimation();if(!a.hidden){return}a.hidden=!1;if(c){c.end()}if(b.stopAnimation){b.stopAnimation()}if(!a._inDom){a.getScroller().getElement().appendChild(b);a._inDom=!0;if(!a.size){a.cacheStyles()}}a.refreshLength();clearTimeout(a._hideTimer);b.setStyle('opacity','')},destroy:function(){Ext.Widget.prototype.destroy.call(this);clearTimeout(this._hideTimer)},privates:{cacheStyles:function(){var a=this,c=a.element,b=a.names;a.size=c[b.getSize]();a.margin=c.getMargin(b.side)},doHide:function(){var a=this.getHideAnimation(),b=this.element;if(a){b.animate(a)}else {b.setStyle('opacity',0)}},hasOpposite:function(){return this.getScroller().isAxisEnabled(this.oppositeAxis[this.getAxis()])},onHideAnimationEnd:function(){this.element.setStyle('opacity','0')},refreshLength:function(){var a=this,i=a.names,g=a.getAxis(),e=a.getScroller(),h=e.getSize()[g],c=e.getElementSize()[g],j=c/h,b=a.margin*2,d=a.hasOpposite()?b+a.size:b,f=Math.max(Math.round((c-d)*j),a.getMinLength());a.sizeAdjust=d;a.length=f;a.element[i.setLength](f)},translateX:function(a){this.element.translate(a)},translateY:function(a){this.element.translate(0,a)}}},1,['scrollindicator'],['widget','scrollindicator'],{'widget':!0,'scrollindicator':!0},['widget.scrollindicator'],0,[Ext.scroll,'Indicator'],0);Ext.define('TS.overrides.scroll.Indicator',{override:'Ext.scroll.Indicator',hidden:!0,hide:function(){var a=this,b=a.getHideDelay();if(a.hidden){return}a.hidden=!0;if(b){a._hideTimer=Ext.defer(a.doHide,b,a)}else {a.doHide()}},show:function(){var a=this,b=a.element,c=b.getActiveAnimation();if(!a.hidden){return}a.hidden=!1;if(c){c.end()}if(b.stopAnimation){b.stopAnimation()}if(!a._inDom){a.getScroller().getElement().appendChild(b);a._inDom=!0;if(!a.size){a.cacheStyles()}}a.refreshLength();clearTimeout(a._hideTimer);b.setStyle('opacity','')}});Ext.cmd.derive('Ext.scroll.TouchScroller',Ext.scroll.Scroller,{isTouchScroller:!0,config:{autoRefresh:!0,bounceEasing:{duration:400},elementSize:undefined,indicators:!0,fps:'auto',maxAbsoluteVelocity:6,momentumEasing:{momentum:{acceleration:30,friction:0.5},bounce:{acceleration:30,springTension:0.3},minVelocity:1},outOfBoundRestrictFactor:0.5,innerElement:null,size:undefined,slotSnapEasing:{duration:150},slotSnapOffset:{x:0,y:0},startMomentumResetTime:300,translatable:{translationMethod:'auto',useWrapper:!1}},cls:'x-scroll-container',scrollerCls:'x-scroll-scroller',dragStartTime:0,dragEndTime:0,isDragging:!1,isAnimating:!1,isMouseEvent:{mousedown:1,mousemove:1,mouseup:1},listenerMap:{touchstart:'onTouchStart',touchmove:'onTouchMove',dragstart:'onDragStart',drag:'onDrag',dragend:'onDragEnd'},refreshCounter:0,constructor:function(c){var a=this,b='onEvent';a.elementListeners={touchstart:b,touchmove:b,dragstart:b,drag:b,dragend:b,scope:a};a.minPosition={x:0,y:0};a.startPosition={x:0,y:0};a.velocity={x:0,y:0};a.isAxisEnabledFlags={x:!1,y:!1};a.flickStartPosition={x:0,y:0};a.flickStartTime={x:0,y:0};a.lastDragPosition={x:0,y:0};a.dragDirection={x:0,y:0};Ext.scroll.Scroller.prototype.constructor.call(this,c);a.refreshAxes();a.scheduleRefresh={idle:a.doRefresh,scope:a,single:!0,destroyable:!0}},applyBounceEasing:function(b){var a=Ext.fx.easing.EaseOut;return {x:Ext.factory(b,a),y:Ext.factory(b,a)}},applyElementSize:function(b){var e=this.getElement(),a,c,d;if(!e){return null}a=e.dom;if(!a){return}if(b==null){c=a.clientWidth;d=a.clientHeight}else {c=b.x;d=b.y}return {x:c,y:d}},applyIndicators:function(b,a){var g=this,c,d,e,f;if(b){if(b===!0){c=d={}}else {e=b.x;f=b.y;if(e||f){c=e==null||e===!0?{}:e;d=e==null||f===!0?{}:f}else {c=d=b}}if(a){if(c){a.x.setConfig(c)}else {a.x.destroy();a.x=null}if(d){a.y.setConfig(d)}else {a.y.destroy();a.y=null}b=a}else {b={x:null,y:null};if(c){b.x=new Ext.scroll.Indicator(Ext.applyIf({axis:'x',scroller:g,hideDelay:100},c))}if(d){b.y=new Ext.scroll.Indicator(Ext.applyIf({axis:'y',scroller:g,hideDelay:100},d))}}}else {if(a){if(a.x){a.x.destroy()}if(a.y){a.y.destroy()}a.x=a.y=null}}return b},applyMomentumEasing:function(b){var a=Ext.fx.easing.BoundMomentum;return {x:Ext.factory(b,a),y:Ext.factory(b,a)}},applyInnerElement:function(a){if(a){if(!a.isElement){a=Ext.get(a)}}return a},applyMaxPosition:function(a,c){if(c&&a.x===c.x&&a.y===c.y){return}var d=this.getTranslatable(),b;if(d.isAnimating){b=d.activeEasingY;if(b&&b.getStartVelocity&&b.getStartVelocity()<0&&a.y<c.y){b.setMinMomentumValue(-a.y)}}return a},applyMaxUserPosition:function(b,a){if(a&&b.x===a.x&&b.y===a.y){return}return b},applySize:function(a,e){var g=this.getElement(),f,d,b,c;if(typeof a==='number'){b=a;c=a}else {if(a){b=a.x;c=a.y}}if(g&&(b==null||c==null)){f=g.dom;d=this.getInnerElement().dom;if(b==null){b=Math.max(d.scrollWidth,f.clientWidth)}if(c==null){c=Math.max(d.scrollHeight,f.clientHeight)}}if(e&&(!g||e.x===b&&e.y===c)){a=undefined}else {a={x:b,y:c}}return a},applySlotSnapOffset:function(a){if(typeof a==='number'){a={x:a,y:a}}return a},applySlotSnapSize:function(a){if(typeof a==='number'){a={x:a,y:a}}return a},applySlotSnapEasing:function(b){var a=Ext.fx.easing.EaseOut;return {x:Ext.factory(b,a),y:Ext.factory(b,a)}},applyTranslatable:function(b,a){return Ext.factory(b,Ext.util.Translatable,a)},destroy:function(){var a=this,c=a.getElement(),b=a.getInnerElement(),d=a.sizeMonitors;if(d){d.element.destroy();d.container.destroy()}if(c&&!c.destroyed){c.removeCls(a.cls)}if(b&&!b.destroyed){b.removeCls(a.scrollerCls)}if(a._isWrapped){if(!c.destroyed){a.unwrapContent()}b.destroy()}a.setElement(null);a.setInnerElement(null);a.setIndicators(null);Ext.destroy(a.getTranslatable());Ext.scroll.Scroller.prototype.destroy.call(this)},refresh:function(c,b){var a=this;++a.refreshCounter;if(c){a.doRefresh(b)}else {if(!a.refreshScheduled){a.scheduleRefresh.args=[b];a.refreshScheduled=Ext.on(a.scheduleRefresh)}}a.positionDirty=!0},setSize:function(a){this.passedSize=a;(arguments.callee.$previous||Ext.scroll.Scroller.prototype.setSize).call(this,a)},updateAutoRefresh:function(a){this.toggleResizeListeners(a)},updateBounceEasing:function(a){this.getTranslatable().setEasingX(a.x).setEasingY(a.y)},updateElementSize:function(){if(!this.isConfiguring){this.refreshAxes()}},updateDisabled:function(a){if(!this.isConfiguring){if(a){this.detachListeners()}else {this.attachListeners()}}},updateElement:function(d,f){var a=this,b=a.getInnerElement(),e,c;if(!b){b=d.dom.firstChild;if(!b||b.nodeType!==1||!Ext.fly(b).hasCls(a.scrollerCls)){b=a.wrapContent(d)}a.setInnerElement(b)}d.addCls(a.cls);if(a.isConfiguring){if(!a.getTranslatable().isScrollParent){d.dom.style.overflowX=d.dom.style.overflowY='';e=a.elementListeners;e.mousewheel='onMouseWheel';e.scroll={fn:'onElementScroll',delegated:!1,scope:a}}}if(!a.getDisabled()){a.attachListeners()}if(!a.isConfiguring){c=a.getAutoRefresh();if(c!==!1){a.toggleResizeListeners(c);if(c){a.refresh()}else {if(c===null){a.setElementSize(null)}}}}},updateFps:function(a){if(a!=='auto'){this.getTranslatable().setFps(a)}},updateMaxUserPosition:function(){this.snapToBoundary()},updateMinUserPosition:function(){this.snapToBoundary()},updateInnerElement:function(a){if(a){a.addCls(this.scrollerCls)}this.getTranslatable().setElement(a)},updateSize:function(c,d){var a=this,b=a.passedSize;if(!a.isConfiguring){if(Ext.supports.touchScroll===1){if(b==null){c=b}Ext.scroll.Scroller.prototype.updateSize.call(this,c,d)}a.refreshAxes()}},updateTranslatable:function(a){a.setElement(this.getInnerElement());if(!a.isScrollParent){a.on({animationframe:'onAnimationFrame',animationend:'onAnimationEnd',scope:this})}},updateX:function(){if(!this.isConfiguring){this.refreshAxes()}},updateY:function(){if(!this.isConfiguring){this.refreshAxes()}},privates:{attachListeners:function(){this.getElement().on(this.elementListeners)},constrainX:function(a){return Math.min(this.getMaxPosition().x,Math.max(a,0))},constrainY:function(a){return Math.min(this.getMaxPosition().y,Math.max(a,0))},convertEasingConfig:function(a){return a},detachListeners:function(){this.getElement().un(this.elementListeners)},doRefresh:function(b){var a=this,d,c;if(a.refreshScheduled){a.refreshScheduled=a.refreshScheduled.destroy()}if(a.refreshCounter&&a.getElement()){a.stopAnimation();a.getTranslatable().refresh();if(b){d=b.size;c=b.elementSize}a.setSize(d);a.setElementSize(c);a.fireEvent('refresh',a);a.refreshCounter=0;if(a.clientRegion){a.clientRegion=a.getElement().getClientRegion()}}},doScrollTo:function(b,c,e,f){var a=this,m=a.isDragging,j=a.getTranslatable().isScrollParent,k=!a.isReflecting&&!j;if(a.destroyed||!a.getElement()){return a}f=f||a.isDragging;var l=a.getTranslatable(),d=a.position,g=!1,h,i;if(!m||a.isAxisEnabled('x')){if(isNaN(b)||typeof b!=='number'){b=d.x}else {if(!f){b=a.constrainX(b)}if(d.x!==b){d.x=b;g=!0}}h=a.convertX(-b)}if(!m||a.isAxisEnabled('y')){if(isNaN(c)||typeof c!=='number'){c=d.y}else {if(!f){c=a.constrainY(c)}if(d.y!==c){d.y=c;g=!0}}i=-c}if(g){if(k){a.onScrollStart()}if(e){l.translateAnimated(h,i,e)}else {if(!j){a.onScroll()}l.translate(h,i);if(k){a.onScrollEnd()}}}else {if(e&&e.callback){e.callback()}}return a},getAnimationEasing:function(b,m){if(!this.isAxisEnabled(b)){return null}var a=this,c=a.position[b],k=a.getMinUserPosition()[b],i=a.getMaxUserPosition()[b],g=a.getMaxAbsoluteVelocity(),d=null,j=a.dragEndTime,e=m.flick.velocity[b],l=b==='x',h,f;if(c<k){d=k}else {if(c>i){d=i}}if(l){c=a.convertX(c);d=a.convertX(d)}if(d!==null){f=a.getBounceEasing()[b];f.setConfig({startTime:j,startValue:-c,endValue:-d});return f}if(e===0){return null}if(e<-g){e=-g}else {if(e>g){e=g}}f=a.getMomentumEasing()[b];h={startTime:j,startValue:-c,startVelocity:e*1.5,minMomentumValue:-i,maxMomentumValue:0};if(l){a.convertEasingConfig(h)}f.setConfig(h);return f},getSnapPosition:function(d){var e=this,c=e.getSlotSnapSize()[d],f=null,b,h,g,a;if(c!==0&&e.isAxisEnabled(d)){b=e.position[d];h=e.getSlotSnapOffset()[d];g=e.getMaxUserPosition()[d];a=Math.floor((b-h)%c);if(a!==0){if(b!==g){if(Math.abs(a)>c/2){f=Math.min(g,b+(a>0?c-a:a-c))}else {f=b-a}}else {f=b-a}}}return f},hideIndicators:function(){var d=this,a=d.getIndicators(),b,c;if(a){if(d.isAxisEnabled('x')){b=a.x;if(b){b.hide()}}if(d.isAxisEnabled('y')){c=a.y;if(c){c.hide()}}}},isAxisEnabled:function(a){this.getX();this.getY();return this.isAxisEnabledFlags[a]},onAnimationEnd:function(){this.snapToBoundary();this.onScrollEnd()},onAnimationFrame:function(d,b,c){var a=this.position;a.x=this.convertX(-b);a.y=-c;this.onScroll()},onAxisDrag:function(a,k){if(k&&this.isAxisEnabled(a)){var b=this,o=b.flickStartPosition,g=b.flickStartTime,f=b.lastDragPosition,d=b.dragDirection,r=b.position[a],q=b.getMinUserPosition()[a],e=b.getMaxUserPosition()[a],p=b.startPosition[a],l=f[a],c=p-k,i=d[a],h=b.getOutOfBoundRestrictFactor(),n=b.getStartMomentumResetTime(),m=Ext.Date.now(),j;if(c<q){c*=h}else {if(c>e){j=c-e;c=e+j*h}}if(c>l){d[a]=1}else {if(c<l){d[a]=-1}}if(i!==0&&d[a]!==i||m-g[a]>n){o[a]=r;g[a]=m}f[a]=c;return !0}},onDomScroll:function(){var b=this,a,c;if(b.getTranslatable().isScrollParent){a=b.getScrollElement().dom;c=b.position;c.x=a.scrollLeft;c.y=a.scrollTop}if(Ext.supports.touchScroll===2){a=a||b.getScrollElement().dom;a.scrollTop=a.scrollLeft=0;return}Ext.scroll.Scroller.prototype.onDomScroll.call(this)},onDrag:function(c){var a=this,b=a.lastDragPosition;if(!a.isDragging){return}if(a.onAxisDrag('x',a.convertX(c.deltaX))|a.onAxisDrag('y',c.deltaY)){a.doScrollTo(b.x,b.y)}},onDragEnd:function(d){var a=this,b,c;if(!a.isDragging){return}a.dragEndTime=Ext.Date.now();a.onDrag(d);a.isDragging=!1;b=a.getAnimationEasing('x',d);c=a.getAnimationEasing('y',d);if(b||c){a.onScrollStart();a.getTranslatable().animate(b,c)}else {a.onScrollEnd()}},onDragStart:function(c){var a=this,m=c.absDeltaX,n=c.absDeltaY,k=a.startPosition,f=a.flickStartPosition,i=a.flickStartTime,g=a.lastDragPosition,h=a.position,j=a.dragDirection,d=h.x,e=h.y,b=Ext.Date.now(),l=a.getX(),o=a.getY();if(a.getDirectionLock()&&!(l&&o)){if(l&&m>n||o&&n>m){c.stopPropagation()}else {return}}g.x=d;g.y=e;f.x=d;f.y=e;k.x=d;k.y=e;i.x=b;i.y=b;j.x=0;j.y=0;a.dragStartTime=b;a.isDragging=!0;if(!a.isScrolling){a.onScrollStart()}},onElementResize:function(b,a){this.refresh(!0,{elementSize:{x:a.contentWidth,y:a.contentHeight},size:this.getAutoRefresh()?null:this.getSize()})},onElementScroll:function(b,a){a.scrollTop=a.scrollLeft=0},onEvent:function(b){var a=this,c=b.browserEvent;if((!a.self.isTouching||a.isTouching)&&(!a.getTranslatable().isScrollParent||!a.isMouseEvent[c.type]&&c.pointerType!=='mouse')&&(a.getY()||a.getX())){return a[a.listenerMap[b.type]](b)}},onInnerElementResize:function(b,a){this.refresh(!0,{size:{x:a.width,y:a.height}})},onMouseWheel:function(j){var a=this,g=j.getWheelDeltas(),c=-g.x,d=-g.y,b=a.position,e=a.getMaxUserPosition(),f=a.getMinUserPosition(),h=Math.max,i=Math.min,k=h(i(b.x+c,e.x),f.x),l=h(i(b.y+d,e.y),f.y);c=k-b.x;d=l-b.y;if(!c&&!d){return}j.stopEvent();a.onScrollStart();a.scrollBy(c,d);a.onScroll();a.onScrollEnd()},onPartnerScrollEnd:function(b,c){var a=this;if(!a.getTranslatable().isScrollParent){a.fireScrollEnd(b,c)}Ext.scroll.Scroller.prototype.onPartnerScrollEnd.call(this,b,c);a.isScrolling=!1;a.hideIndicators()},onPartnerScrollStart:function(b,c){var a=this;a.isScrolling=!0;if(!a.getTranslatable().isScrollParent){a.fireScrollStart(b,c)}a.showIndicators()},onScroll:function(){var a=this,e=a.position,f=e.x,g=e.y,b=a.getIndicators(),c,d;if(b){if(a.isAxisEnabled('x')){c=b.x;if(c){c.setValue(f)}}if(a.isAxisEnabled('y')){d=b.y;if(d){d.setValue(g)}}}a.fireScroll(f,g)},onScrollEnd:function(){var a=this,b=a.position;a.hideIndicators();if(a.isScrolling&&!a.isTouching&&!a.snapToSlot()){a.isScrolling=Ext.isScrolling=!1;a.fireScrollEnd(b.x,b.y)}},onScrollStart:function(){var a=this,b=a.position;a.showIndicators();if(!a.isScrolling){a.isScrolling=Ext.isScrolling=!0;a.fireScrollStart(b.x,b.y)}},onTouchEnd:function(){var a=this;a.isTouching=a.self.isTouching=!1;if(!a.isDragging&&a.snapToSlot()){a.onScrollStart()}},onTouchMove:function(a){a.preventDefault()},onTouchStart:function(b){var a=this;if(a.clientRegion&&!a.clientRegion.contains(b.getPoint())){b.cancelGesture();return !1}Ext.getDoc().on({touchend:'onTouchEnd',scope:a,single:!0});a.stopAnimation();a.isTouching=a.self.isTouching=!0},refreshAxes:function(){var a=this,b=a.isAxisEnabledFlags,k=a.getSize(),h=a.getElementSize(),e=a.getIndicators(),f,g,c,d,i,j;if(!k||!h){return}f=Math.max(0,k.x-h.x);g=Math.max(0,k.y-h.y);c=a.getX();d=a.getY();a.setMaxPosition({x:f,y:g});if(c===!0||c==='auto'){b.x=!!f}else {if(c===!1){b.x=!1;i=e&&e.x;if(i){i.hide()}}else {if(c==='scroll'){b.x=!0}}}if(d===!0||d==='auto'){b.y=!!g}else {if(d===!1){b.y=!1;j=e&&e.y;if(j){j.hide()}}else {if(d==='scroll'){b.y=!0}}}a.setMaxUserPosition({x:b.x?f:0,y:b.y?g:0});if(Ext.supports.touchScroll===1){a.initXStyle();a.initYStyle()}},showIndicators:function(){var d=this,a=d.getIndicators(),b,c;if(a){if(d.isAxisEnabled('x')){b=a.x;if(b){b.show()}}if(d.isAxisEnabled('y')){c=a.y;if(c){c.show()}}}},snapToBoundary:function(){var a=this,d=a.getPosition();if(a.isConfiguring||!(d.x||d.y)){return}var f=a.getMinUserPosition(),e=a.getMaxUserPosition(),i=f.x,j=f.y,g=e.x,h=e.y,b=Math.round(d.x),c=Math.round(d.y);if(b<i){b=i}else {if(b>g){b=g}}if(c<j){c=j}else {if(c>h){c=h}}a.doScrollTo(b,c)},snapToSlot:function(){var a=this,c=a.getSnapPosition('x'),d=a.getSnapPosition('y'),b=a.getSlotSnapEasing();if(c!==null||d!==null){a.doScrollTo(c,d,{easingX:b.x,easingY:b.y});return !0}return !1},stopAnimation:function(){this.getTranslatable().stopAnimation()},toggleResizeListeners:function(e){var c=this,f=c.getElement(),b,a,d;if(f){d=c.getInnerElement();if(e){b=a='on'}else {if(e===null){b='on';a='un'}else {b=a='un'}}f[b]('resize','onElementResize',c);d[a]('resize','onInnerElementResize',c)}},unwrapContent:function(){var a=this.getInnerElement().dom,c=this.getElement().dom,b;while(b=a.firstChild){c.insertBefore(b,a)}},wrapContent:function(d){var a=document.createElement('div'),c=d.dom,b;while(b=c.lastChild){a.insertBefore(b,a.firstChild)}c.appendChild(a);this.setInnerElement(a);this._isWrapped=!0;return this.getInnerElement()}}},1,0,0,0,['scroller.touch'],0,[Ext.scroll,'TouchScroller'],0);Ext.cmd.derive('Ext.scroll.DomScroller',Ext.scroll.Scroller,{isDomScroller:!0,getMaxPosition:function(){var b=this.getElement(),c=0,d=0,a;if(b&&!b.destroyed){a=b.dom;c=a.scrollWidth-a.clientWidth;d=a.scrollHeight-a.clientHeight}return {x:c,y:d}},getMaxUserPosition:function(){var c=this,b=c.getElement(),d=0,e=0,a;if(b&&!b.destroyed){a=b.dom;if(c.getX()){d=a.scrollWidth-a.clientWidth}if(c.getY()){e=a.scrollHeight-a.clientHeight}}return {x:d,y:e}},getPosition:function(){var a=this;if(a.positionDirty){a.updateDomScrollPosition()}return a.position},getSize:function(){var a=this.getElement(),b,c;if(a&&!a.destroyed){c=a.dom;b={x:c.scrollWidth,y:c.scrollHeight}}else {b={x:0,y:0}}return b},updateElement:function(b,a){this.initXStyle();this.initYStyle()},updateX:function(a){this.initXStyle()},updateY:function(a){this.initYStyle()},privates:{doScrollTo:function(a,b,j){var e=this,d=e.getScrollElement(),f,c,i,g,h,k;if(d&&!d.destroyed){c=d.dom;g=a===Infinity;h=b===Infinity;if(g||h){f=e.getMaxPosition();if(g){a=f.x}if(h){b=f.y}}a=e.convertX(a);if(j){i={};if(b!=null){i.scrollTop=b}if(a!=null){i.scrollLeft=a}d.animate(Ext.mergeIf({to:{scrollTop:b,scrollLeft:a}},j))}else {if(b!=null){c.scrollTop=b}if(a!=null){c.scrollLeft=a;if(Ext.isIE8){k=c.scrollLeft;c.scrollLeft=a}}}e.positionDirty=!0}},getElementScroll:function(a){return a.getScroll()},stopAnimation:function(){var a=this.getElement().getActiveAnimation();if(a){a.end()}}}},0,0,0,0,['scroller.dom'],0,[Ext.scroll,'DomScroller'],function(a){Ext.onDocumentReady(function(){a.document=new a({x:!0,y:!0,element:document.documentElement})})});Ext.define('Ext.overrides.scroll.DomScroller',{override:'Ext.scroll.DomScroller',_scrollerCls:'x-domscroller',updateElement:function(a,b){a.addCls(this._scrollerCls);arguments.callee.$previous.call(this,a,b)}});Ext.cmd.derive('Ext.behavior.Behavior',Ext.Base,{constructor:function(a){this.component=a;a.on('destroy','onComponentDestroy',this)},onComponentDestroy:Ext.emptyFn},1,0,0,0,0,0,[Ext.behavior,'Behavior'],0);Ext.cmd.derive('Ext.behavior.Translatable',Ext.behavior.Behavior,{setConfig:function(b){var a=this.translatable,c=this.component;if(b){if(!a){this.translatable=a=new Ext.util.Translatable(b);a.setElement(c.renderElement);a.on('destroy','onTranslatableDestroy',this)}else {if(Ext.isObject(b)){a.setConfig(b)}}}else {if(a){a.destroy()}}return this},getTranslatable:function(){return this.translatable},onTranslatableDestroy:function(){delete this.translatable},onComponentDestroy:function(){var a=this.translatable;if(a){a.destroy()}}},0,0,0,0,0,0,[Ext.behavior,'Translatable'],0);Ext.cmd.derive('Ext.util.Draggable',Ext.Base,{isDraggable:!0,config:{cls:'x-draggable',draggingCls:'x-dragging',element:null,constraint:'container',disabled:null,direction:'both',initialOffset:{x:0,y:0},translatable:{}},DIRECTION_BOTH:'both',DIRECTION_VERTICAL:'vertical',DIRECTION_HORIZONTAL:'horizontal',defaultConstraint:{min:{x:-Infinity,y:-Infinity},max:{x:Infinity,y:Infinity}},containerWidth:0,containerHeight:0,width:0,height:0,constructor:function(a){var b;this.extraConstraint={};this.initialConfig=a;this.offset={x:0,y:0};this.elementListeners={dragstart:'onDragStart',drag:'onDrag',dragend:'onDragEnd',resize:'onElementResize',touchstart:'onPress',touchend:'onRelease',scope:this};if(a&&a.element){b=a.element;delete a.element;this.setElement(b)}return this},applyElement:function(a){if(!a){return}return Ext.get(a)},updateElement:function(a){a.on(this.elementListeners);this.mixins.observable.constructor.call(this,this.initialConfig)},updateInitialOffset:function(a){if(typeof a=='number'){a={x:a,y:a}}var b=this.offset,c,d;b.x=c=a.x;b.y=d=a.y;this.getTranslatable().translate(c,d)},updateCls:function(a){this.getElement().addCls(a)},applyTranslatable:function(a,b){a=Ext.factory(a,Ext.util.Translatable,b);if(a){a.setElement(this.getElement())}return a},setExtraConstraint:function(a){this.extraConstraint=a||{};this.refreshConstraint();return this},addExtraConstraint:function(a){Ext.merge(this.extraConstraint,a);this.refreshConstraint();return this},applyConstraint:function(a){this.currentConstraint=a;if(!a){a=this.defaultConstraint}if(a==='container'){return Ext.merge(this.getContainerConstraint(),this.extraConstraint)}return Ext.merge({},this.extraConstraint,a)},updateConstraint:function(){this.refreshOffset()},getContainerConstraint:function(){var a=this.getContainer(),b=this.getElement();if(!a||!b.dom){return this.defaultConstraint}return {min:{x:0,y:0},max:{x:this.containerWidth-this.width,y:this.containerHeight-this.height}}},getContainer:function(){var a=this.container;if(!a){a=this.getElement().getParent();if(a){this.container=a;a.on({resize:'onContainerResize',destroy:'onContainerDestroy',scope:this})}}return a},onElementResize:function(b,a){this.width=a.width;this.height=a.height;this.refresh()},onContainerResize:function(b,a){this.containerWidth=a.width;this.containerHeight=a.height;this.refresh()},onContainerDestroy:function(){delete this.container;delete this.containerSizeMonitor},detachListeners:function(){this.getElement().un(this.elementListeners)},isAxisEnabled:function(b){var a=this.getDirection();if(b==='x'){return a===this.DIRECTION_BOTH||a===this.DIRECTION_HORIZONTAL}return a===this.DIRECTION_BOTH||a===this.DIRECTION_VERTICAL},onPress:function(a){this.fireEvent('touchstart',this,a)},onRelease:function(a){this.fireEvent('touchend',this,a)},onDragStart:function(c){var a=this,b=a.offset;if(a.getDisabled()){return !1}a.fireEventedAction('dragstart',[a,c,b.x,b.y],a.initDragStart,a)},initDragStart:function(c,d,a,b){this.dragStartOffset={x:a,y:b};this.isDragging=!0;this.getElement().addCls(this.getDraggingCls())},onDrag:function(a){if(!this.isDragging){return}var b=this.dragStartOffset;this.fireAction('drag',[this,a,b.x+a.deltaX,b.y+a.deltaY],this.doDrag)},doDrag:function(c,d,a,b){c.setOffset(a,b)},onDragEnd:function(a){if(!this.isDragging){return}this.onDrag(a);this.isDragging=!1;this.getElement().removeCls(this.getDraggingCls());this.fireEvent('dragend',this,a,this.offset.x,this.offset.y)},setOffset:function(a,b,i){var c=this.offset,d=this.getConstraint(),f=d.min,e=d.max,h=Math.min,g=Math.max;if(this.isAxisEnabled('x')&&typeof a=='number'){a=h(g(a,f.x),e.x)}else {a=c.x}if(this.isAxisEnabled('y')&&typeof b=='number'){b=h(g(b,f.y),e.y)}else {b=c.y}c.x=a;c.y=b;this.getTranslatable().translate(a,b,i)},getOffset:function(){return this.offset},refreshConstraint:function(){this.setConstraint(this.currentConstraint)},refreshOffset:function(){var a=this.offset;this.setOffset(a.x,a.y)},refresh:function(){this.refreshConstraint();this.getTranslatable().refresh();this.refreshOffset()},enable:function(){return this.setDisabled(!1)},disable:function(){return this.setDisabled(!0)},destroy:function(){var a=this,c=a.getTranslatable();var b=a.getElement();if(b&&!b.destroyed){b.removeCls(a.getCls())}a.detachListeners();if(c){c.destroy()}a.callParent()}},1,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext.util,'Draggable'],0);Ext.cmd.derive('Ext.behavior.Draggable',Ext.behavior.Behavior,{setConfig:function(b){var a=this.draggable,c=this.component,d=this.listeners;if(b){if(!a){c.setTranslatable(b.translatable);this.draggable=a=new Ext.util.Draggable(b);a.setTranslatable(c.getTranslatable());a.setElement(c.renderElement);a.on('destroy','onDraggableDestroy',this);if(d){c.on(d)}}else {if(Ext.isObject(b)){a.setConfig(b)}}}else {if(a){a.destroy()}}return this},getDraggable:function(){return this.draggable},onDraggableDestroy:function(){delete this.draggable},onComponentDestroy:function(){var a=this.draggable;if(a){a.destroy()}}},0,0,0,0,0,0,[Ext.behavior,'Draggable'],0);Ext.cmd.derive('Ext.Component',Ext.Widget,{alternateClassName:'Ext.lib.Component',cachedConfig:{baseCls:null,cls:null,floatingCls:'x-floating',hiddenCls:'x-item-hidden',ui:null,margin:null,padding:null,border:null,styleHtmlCls:'x-html',styleHtmlContent:null},eventedConfig:{left:null,top:null,right:null,bottom:null,minWidth:null,minHeight:null,maxWidth:null,maxHeight:null,scrollable:null,docked:null,centered:null,hidden:null,disabled:null},config:{html:null,draggable:null,translatable:null,renderTo:null,zIndex:null,tpl:null,enterAnimation:null,exitAnimation:null,showAnimation:null,hideAnimation:null,tplWriteMode:'overwrite',data:null,disabledCls:'x-item-disabled',contentEl:null,record:null,plugins:null,useBodyElement:null},defaultBindProperty:'html',alignmentRegex:/^([a-z]+)-([a-z]+)(\?)?$/,isComponent:!0,floating:!1,rendered:!1,isInner:!0,activeAnimation:null,dockPositions:{top:!0,right:!0,bottom:!0,left:!0},innerElement:null,element:{reference:'element',classList:['x-unsized']},widthLayoutSized:!1,heightLayoutSized:!1,layoutStretched:!1,sizeState:!1,sizeFlags:0,LAYOUT_WIDTH:1,LAYOUT_HEIGHT:2,LAYOUT_BOTH:3,LAYOUT_STRETCHED:4,_scrollableCfg:{x:{x:!0,y:!1},y:{x:!1,y:!0},horizontal:{x:!0,y:!1},vertical:{x:!1,y:!0},both:{x:!0,y:!0},'true':{x:!0,y:!0}},statics:{fromElement:function(c,b,a){return Ext.ComponentManager.fromElement(c,b,a)}},initialConfig:null,$initParent:null,constructor:function(b){var a=this,c=b&&b.plugins,f='responsive',d,e;a.onInitializedListeners=[];if(b){a.initialConfig=b;a.$initParent=b.$initParent}if(c){c=Ext.Array.from(c);for(d=c.length;d-->0;){e=c[d];if(e===f||e.type===f){a.initialConfig=b=Ext.apply({},b);b.plugins=c=c.slice(0);c[d]=a.createPlugin(e);b=a.initialConfig;break}}}Ext.Widget.prototype.constructor.call(this,b);a.refreshSizeState=a.doRefreshSizeState;a.refreshFloating=a.doRefreshFloating;if(a.refreshSizeStateOnInitialized){a.refreshSizeState()}if(a.refreshFloatingOnInitialized){a.refreshFloating()}a.initialize();a.triggerInitialized();if(a.fullscreen){a.fireEvent('fullscreen',a)}a.fireEvent('initialize',a)},beforeInitConfig:function(a){this.beforeInitialize.apply(this,arguments)},beforeInitialize:Ext.emptyFn,initialize:Ext.emptyFn,triggerInitialized:function(){var e=this.onInitializedListeners,g=e.length,a,c,b,f,d;if(!this.initialized){this.initialized=!0;if(g>0){for(d=0;d<g;d++){a=e[d];c=a.fn;b=a.scope;f=a.args;if(typeof c=='string'){b[c].apply(b,f)}else {c.apply(b,f)}}e.length=0}}},onInitialized:function(b,a,c){var d=this.onInitializedListeners;if(!a){a=this}if(this.initialized){if(typeof b=='string'){a[b].apply(a,c)}else {b.apply(a,c)}}else {d.push({fn:b,scope:a,args:c})}},initElement:function(){var a=this;Ext.Widget.prototype.initElement.call(this);if(!a.innerElement){a.innerElement=a.element}if(!a.bodyElement){a.bodyElement=a.innerElement}},applyPlugins:function(a){var d=this,e,c,b,f;if(!a){return a}a=[].concat(a);for(b=0,c=a.length;b<c;b++){a[b]=d.createPlugin(a[b])}return a},createPlugin:function(a){if(typeof a==='string'){a={type:a}}var b=a;if(!a.isInstance){a.cmp=this;b=Ext.factory(a,null,null,'plugin');delete a.cmp}if(b.setCmp){b.setCmp(this)}return b},updatePlugins:function(c,d){var b,a;if(c){for(a=0,b=c.length;a<b;a++){c[a].init(this)}}if(d){for(a=0,b=d.length;a<b;a++){Ext.destroy(d[a])}}},applyScrollable:function(a,g){var b=this,d,c,e,f,h;if(a){if(a===!0||typeof a==='string'){h=b._scrollableCfg[a];a=h}if(g){g.setConfig(a);a=g}else {c=Ext.supports.touchScroll;if(c&&!a.translatable){a.translatable={translationMethod:c===1?'scrollparent':'csstransform'}}if(c===1){a=Ext.Object.chain(a);a.indicators=!1}a=Ext.scroll.Scroller.create(a);a.component=b;b.setUseBodyElement(!0);d=b.bodyElement;if(c===2){a.setInnerElement(b.innerElement);a.setElement(d)}else {if(c===1){e=a.getX();f=a.getY();d.setStyle({overflowX:e===!0?'auto':!e?'hidden':e,overflowY:f===!0?'auto':!f?'hidden':f});d.disableTouchScroll()}a.setElement(d)}if(b.isPainted()){b.onPainted()}b.on('painted','onPainted',b)}}return a},onPainted:function(){var a=this.getScrollable();if(a&&a.isTouchScroller&&a.getAutoRefresh()){a.refresh()}},updateRenderTo:function(a){this.renderTo(a)},updateBorder:function(a){this.element.setStyle('border-width',a?'':'0')},updatePadding:function(a){this.innerElement.setPadding(a)},updateMargin:function(a){this.element.setMargin(a)},updateUi:function(c,e){var a=this.getBaseCls(),b=this.element,d=this.currentUi;if(a){if(e){if(d){b.removeCls(d)}else {b.removeCls(a+'-'+e)}}if(c){b.addCls(c,a);this.currentUi=a+'-'+c;if(!this.self.prototype.currentUi){this.self.prototype.currentUi=this.currentUi}}}},applyBaseCls:function(a){return a||'x-'+this.xtype},updateBaseCls:function(a,c){var d=this,b=d.getUi();if(c){this.element.removeCls(c);if(b){this.element.removeCls(this.currentUi)}}if(a){this.element.addCls(a);if(b){this.element.addCls(a,null,b);this.currentUi=a+'-'+b}}},addCls:function(a,c,d){var g=this.getCls(),b=g?g.slice():[],h,e,f;c=c||'';d=d||'';if(typeof a=='string'){a=[a]}h=a.length;if(!b.length&&c===''&&d===''){b=a}else {for(e=0;e<h;e++){f=c+a[e]+d;if(b.indexOf(f)==-1){b.push(f)}}}this.setCls(b)},removeCls:function(d,b,c){var f=this.getCls(),a=f?f.slice():[],g,e;b=b||'';c=c||'';if(typeof d=='string'){a=Ext.Array.remove(a,b+d+c)}else {g=d.length;for(e=0;e<g;e++){a=Ext.Array.remove(a,b+d[e]+c)}}this.setCls(a)},replaceCls:function(f,e,c,d){var i=this.getCls(),a=i?i.slice():[],g,b,h;c=c||'';d=d||'';if(typeof f=='string'){a=Ext.Array.remove(a,c+f+d)}else {if(f){g=f.length;for(b=0;b<g;b++){a=Ext.Array.remove(a,c+f[b]+d)}}}if(typeof e=='string'){a.push(c+e+d)}else {if(e){g=e.length;if(!a.length&&c===''&&d===''){a=e}else {for(b=0;b<g;b++){h=c+e[b]+d;if(a.indexOf(h)==-1){a.push(h)}}}}}this.setCls(a)},toggleCls:function(b,c){var d=this.getCls(),a=d?d.slice():[];if(typeof c!=='boolean'){c=a.indexOf(b)===-1}if(c){Ext.Array.include(a,b)}else {Ext.Array.remove(a,b)}this.setCls(a);return this},applyCls:function(a){if(typeof a=='string'){a=[a]}if(!a||!a.length){a=null}return a},updateCls:function(a,b){var c=this.element;if(c&&(a&&!b||!a&&b||a.length!=b.length||Ext.Array.difference(a,b).length>0)){c.replaceCls(b,a)}},updateStyleHtmlCls:function(c,a){var b=this.innerHtmlElement,d=this.innerElement;if(this.getStyleHtmlContent()&&a){if(b){b.replaceCls(a,c)}else {d.replaceCls(a,c)}}},applyStyleHtmlContent:function(a){return Boolean(a)},updateStyleHtmlContent:function(d){var b=this.getStyleHtmlCls(),c=this.innerElement,a=this.innerHtmlElement;if(d){if(a){a.addCls(b)}else {c.addCls(b)}}else {if(a){a.removeCls(b)}else {c.addCls(b)}}},applyContentEl:function(a){if(a){return Ext.get(a)}},updateContentEl:function(a,b){if(b){b.hide();Ext.getBody().append(b)}if(a){this.setHtml(a.dom);a.show()}},updateUseBodyElement:function(a){if(a){this.link('bodyElement',this.innerElement.wrap({cls:'x-body'}))}},isCentered:function(){return Boolean(this.getCentered())},isFloating:function(){return this.floating},isDocked:function(){return Boolean(this.getDocked())},isInnerItem:function(){return this.isInner},setIsInner:function(a){if(a!==this.isInner){this.isInner=a;if(this.initialized){this.fireEvent('innerstatechange',this,a)}}},applyTop:function(a){return this.filterLengthValue(a)},applyRight:function(a){return this.filterLengthValue(a)},applyBottom:function(a){return this.filterLengthValue(a)},applyLeft:function(a){return this.filterLengthValue(a)},applyMinWidth:function(a){return this.filterLengthValue(a)},applyMinHeight:function(a){return this.filterLengthValue(a)},applyMaxWidth:function(a){return this.filterLengthValue(a)},applyMaxHeight:function(a){return this.filterLengthValue(a)},updateTop:function(a){this.element.setTop(a);this.refreshFloating()},updateRight:function(a){this.element.setRight(a);this.refreshFloating()},updateBottom:function(a){this.element.setBottom(a);this.refreshFloating()},updateLeft:function(a){this.element.setLeft(a);this.refreshFloating()},updateWidth:function(a){this.element.setWidth(a);this.refreshSizeState()},updateHeight:function(a){this.element.setHeight(a);this.refreshSizeState()},updateFlex:Ext.emptyFn,refreshSizeState:function(){this.refreshSizeStateOnInitialized=!0},doRefreshSizeState:function(){var d=this.getWidth()!==null||this.widthLayoutSized||this.getLeft()!==null&&this.getRight()!==null,a=this.getHeight()!==null||this.heightLayoutSized||this.getTop()!==null&&this.getBottom()!==null,c=this.layoutStretched||this.hasCSSMinHeight||!a&&this.getMinHeight()!==null,b=d&&a,e=(d&&this.LAYOUT_WIDTH)|(a&&this.LAYOUT_HEIGHT)|(c&&this.LAYOUT_STRETCHED);if(!b&&c){b=null}this.setSizeState(b);this.setSizeFlags(e)},setLayoutSizeFlags:function(a){this.layoutStretched=!!(a&this.LAYOUT_STRETCHED);this.widthLayoutSized=!!(a&this.LAYOUT_WIDTH);this.heightLayoutSized=!!(a&this.LAYOUT_HEIGHT);this.refreshSizeState()},setSizeFlags:function(a){var b=this,f=b.element,e,c,d;if(a!==this.sizeFlags){b.sizeFlags=a;e=!!(a&this.LAYOUT_WIDTH);c=!!(a&this.LAYOUT_HEIGHT);d=!!(a&this.LAYOUT_STRETCHED);f.toggleCls('x-has-width',e&&!d&&!c);f.toggleCls('x-has-height',c&&!d&&!e);if(b.initialized){b.fireEvent('sizeflagschange',b,a)}}},getSizeFlags:function(){if(!this.initialized){this.doRefreshSizeState()}return this.sizeFlags},setSizeState:function(a){if(a!==this.sizeState){this.sizeState=a;this.element.setSizeState(a);if(this.initialized){this.fireEvent('sizestatechange',this,a)}}},getSizeState:function(){if(!this.initialized){this.doRefreshSizeState()}return this.sizeState},updateMinWidth:function(a){this.element.setMinWidth(a)},updateMinHeight:function(a){this.element.setMinHeight(a);this.refreshSizeState()},updateMaxWidth:function(a){this.element.setMaxWidth(a)},updateMaxHeight:function(a){this.element.setMaxHeight(a)},applyCentered:function(a){a=Boolean(a);if(a){this.refreshInnerState=Ext.emptyFn;if(this.isFloating()){this.resetFloating()}if(this.isDocked()){this.setDocked(!1)}this.setIsInner(!1);delete this.refreshInnerState}return a},updateCentered:function(a){this.toggleCls(this.getFloatingCls(),a);if(!a){this.refreshInnerState()}},applyDocked:function(a){if(!a){return null}this.refreshInnerState=Ext.emptyFn;if(this.isFloating()){this.resetFloating()}if(this.isCentered()){this.setCentered(!1)}this.setIsInner(!1);delete this.refreshInnerState;return a},updateDocked:function(a,b){this.fireEvent('afterdockedchange',this,a,b);if(!a){this.refreshInnerState()}},resetFloating:function(){this.setTop(null);this.setRight(null);this.setBottom(null);this.setLeft(null)},refreshInnerState:function(){this.setIsInner(!this.isCentered()&&!this.isFloating()&&!this.isDocked())},refreshFloating:function(){this.refreshFloatingOnInitialized=!0},doRefreshFloating:function(){var a=this,b=!0,c=this.getFloatingCls();if(a.getTop()===null&&a.getBottom()===null&&a.getRight()===null&&a.getLeft()===null){b=!1}else {a.refreshSizeState()}if(b!==this.floating){a.floating=b;if(b){a.refreshInnerState=Ext.emptyFn;if(a.isCentered()){a.setCentered(!1)}if(a.isDocked()){a.setDocked(!1)}a.setIsInner(!1);delete a.refreshInnerState}a.element.toggleCls(c,b);if(a.initialized){a.fireEvent('floatingchange',a,b)}if(!b){a.refreshInnerState()}}},updateFloatingCls:function(a,b){if(this.isFloating()){this.replaceCls(b,a)}},applyDisabled:function(a){return Boolean(a)},updateDisabled:function(a){this.element.toggleCls(this.getDisabledCls(),a)},updateDisabledCls:function(a,b){if(this.isDisabled()){this.element.replaceCls(b,a)}},disable:function(){this.setDisabled(!0)},enable:function(){this.setDisabled(!1)},isDisabled:function(){return this.getDisabled()},applyZIndex:function(a){if(!a&&a!==0){a=null}if(a!==null){a=Number(a);if(isNaN(a)){a=null}}return a},updateZIndex:function(c){var b=this.element,a;if(b&&!b.destroyed){a=b.dom.style;if(c!==null){a.setProperty('z-index',c,'important')}else {a.removeProperty('z-index')}}},getInnerHtmlElement:function(){var a=this.innerHtmlElement,b;if(!a||!a.dom||!a.dom.parentNode){this.innerHtmlElement=a=Ext.Element.create({cls:'x-innerhtml'});if(this.getStyleHtmlContent()){b=this.getStyleHtmlCls();this.innerHtmlElement.addCls(b);this.innerElement.removeCls(b)}this.innerElement.appendChild(a)}return a},updateHtml:function(b){if(!this.destroyed){var a=this.getInnerHtmlElement();if(Ext.isElement(b)){a.setHtml('');a.append(b)}else {a.setHtml(b)}}},applyHidden:function(a){return Boolean(a)},updateHidden:function(c){var a=this,b=a.renderElement;if(b.destroyed){return}if(c){b.hide()}else {b.show()}if(a.element){a.element.toggleCls(a.getHiddenCls(),c)}a.fireEvent(c?'hide':'show',a)},updateHiddenCls:function(a,b){if(this.isHidden()){this.element.replaceCls(b,a)}},isHidden:function(c){var b=!!this.getHidden(),a;if(!b&&c){a=this.getRefOwner();while(a){b=!!a.getHidden();if(b){break}a=a.getRefOwner()}}return b},isVisible:function(a){return !this.isHidden(a)},hide:function(a){var b=this,c=b.activeAnimation;b.setCurrentAlignmentInfo(null);if(c){c.on({animationend:function(){b.hide(a)},single:!0});return b}if(!b.getHidden()){if(a===undefined||a&&a.isComponent){a=b.getHideAnimation()}if(a){if(a===!0){a='fadeOut'}b.on({beforehiddenchange:'animateFn',scope:this,single:!0,args:[a]})}b.setHidden(!0)}return b},show:function(a){if(this.activeAnimation){this.activeAnimation.on({animationend:function(){this.show(a)},scope:this,single:!0});return this}var b=this.getHidden();if(b||b===null){if(a===!0){a='fadeIn'}else {if(a===undefined||a&&a.isComponent){a=this.getShowAnimation()}}if(a){this.beforeShowAnimation();this.on({beforehiddenchange:'animateFn',scope:this,single:!0,args:[a]})}this.setHidden(!1)}return this},beforeShowAnimation:function(){var a=this.element;if(a){this.renderElement.show();a.removeCls(this.getHiddenCls())}},animateFn:function(d,e,b,f,c){var a=this;if(d&&(!b||b&&a.isPainted())){a.activeAnimation=new Ext.fx.Animation(d);a.activeAnimation.setElement(e.element);if(!Ext.isEmpty(b)){a.activeAnimation.setOnEnd(function(){a.activeAnimation=null;c.resume()});c.pause()}Ext.Animator.run(a.activeAnimation)}},setVisibility:function(a){this.renderElement.setVisible(a)},isRendered:function(){return this.rendered},isPainted:function(){return this.renderElement.isPainted()},applyTpl:function(a){return Ext.isObject(a)&&a.isTemplate?a:new Ext.XTemplate(a)},applyData:function(a){if(Ext.isObject(a)){return Ext.apply({},a)}else {if(!a){a={}}}return a},updateData:function(b){var a=this;if(b){var c=a.getTpl(),d=a.getTplWriteMode();if(c){c[d](a.getInnerHtmlElement(),b)}this.fireEvent('updatedata',a,b)}},applyRecord:function(a){if(a&&Ext.isObject(a)&&a.isModel){return a}return null},updateRecord:function(b,c){var a=this;if(c){c.unjoin(a)}if(!b){a.updateData('')}else {b.join(a);a.updateData(b.getData(!0))}},afterEdit:function(){this.updateRecord(this.getRecord())},afterErase:function(){this.setRecord(null)},getXTypes:function(){return this.xtypesChain.join('/')},getDraggableBehavior:function(){var a=this.draggableBehavior;if(!a){a=this.draggableBehavior=new Ext.behavior.Draggable(this)}return a},applyDraggable:function(a){this.getDraggableBehavior().setConfig(a)},getDraggable:function(){return this.getDraggableBehavior().getDraggable()},getTranslatableBehavior:function(){var a=this.translatableBehavior;if(!a){a=this.translatableBehavior=new Ext.behavior.Translatable(this)}return a},applyTranslatable:function(a){this.getTranslatableBehavior().setConfig(a)},getTranslatable:function(){return this.getTranslatableBehavior().getTranslatable()},translateAxis:function(e,a,d){var b,c;if(e==='x'){b=a}else {c=a}return this.translate(b,c,d)},translate:function(){var a=this.getTranslatable();if(!a){this.setTranslatable(!0);a=this.getTranslatable()}a.translate.apply(a,arguments)},showBy:function(d,c){var a=this,b=Ext.Viewport,e=a.getParent();a.setVisibility(!1);if(e!==b){b.add(a)}a.show();a.on({hide:'onShowByErased',destroy:'onShowByErased',single:!0,scope:a});b.on('resize','alignTo',a,{args:[d,c]});a.alignTo(d,c);a.setVisibility(!0)},onShowByErased:function(){Ext.Viewport.un('resize','alignTo',this)},getAlignmentInfo:function(b,h){var g=b.isComponent?b.renderElement:b,a=g.getBox(),i=this.renderElement,f=i.getBox(),e={alignToBox:a,alignment:h,top:a.top,left:a.left,alignToWidth:a.width,alignToHeight:a.height,width:f.width,height:f.height},d=this.getCurrentAlignmentInfo(),c=!0;if(!Ext.isEmpty(d)){Ext.Object.each(e,function(e,a){if(!Ext.isObject(a)&&d[e]!=a){c=!1;return !1}return !0})}else {c=!1}return {isAligned:c,stats:e}},getCurrentAlignmentInfo:function(){return this.$currentAlignmentInfo},setCurrentAlignmentInfo:function(a){this.$currentAlignmentInfo=Ext.isEmpty(a)?null:Ext.merge({},a.stats?a.stats:a)},alignTo:function(y,d){var e=this.getAlignmentInfo(y,d);if(e.isAligned){return}var h=e.stats.alignToBox,a=this.getParent().element.getBox(),j=e.stats.alignToHeight,k=e.stats.alignToWidth,f=e.stats.height,g=e.stats.width;a.bottom-=5;a.height-=10;a.left+=5;a.right-=5;a.top+=5;a.width-=10;if(!d||d==='auto'){if(a.bottom-h.bottom<f){if(h.top-a.top<f){if(h.left-a.left<g){d='cl-cr?'}else {d='cr-cl?'}}else {d='bc-tc?'}}else {d='tc-bc?'}}var p=d.match(this.alignmentRegex);var t=p[1].split(''),u=p[2].split(''),x=p[3]==='?',q=t[0],v=t[1]||q,l=u[0],n=u[1]||l,c=h.top,b=h.left,i=j/2,w=k/2,m=g/2,o=f/2,r,s;switch(q){case 't':switch(l){case 'c':c+=i;break;case 'b':c+=j;};break;case 'b':switch(l){case 'c':c-=f-i;break;case 't':c-=f;break;case 'b':c-=f-j;};break;case 'c':switch(l){case 't':c-=o;break;case 'c':c-=o-i;break;case 'b':c-=o-j;};break;}switch(v){case 'l':switch(n){case 'c':b+=i;break;case 'r':b+=k;};break;case 'r':switch(n){case 'r':b-=g-k;break;case 'c':b-=g-m;break;case 'l':b-=g;};break;case 'c':switch(n){case 'l':b-=m;break;case 'c':b-=m-w;break;case 'r':b-=m-k;};break;}if(x){r=a.left+a.width-g;s=a.top+a.height-f;b=Math.max(a.left,Math.min(r,b));c=Math.max(a.top,Math.min(s,c))}this.setLeft(b);this.setTop(c);this.setCurrentAlignmentInfo(e)},up:function(b){var a=this.parent;if(b){for(;a;a=a.parent){if(Ext.ComponentQuery.is(a,b)){return a}}}return a},getBubbleTarget:function(){return this.getParent()},destroy:function(){var a=this;a.isDestroying=a.destroying=!0;if(a.hasListeners.destroy){a.fireEvent('destroy',a)}Ext.destroy(a.getTranslatable(),a.getPlugins(),a.innerHtmlElement,a.scrollerElement,a.getScrollable());a.setRecord(null);Ext.Widget.prototype.destroy.call(this);a.isDestroying=a.destroying=!1},privates:{doAddListener:function(a,e,d,b,c,g,f){if(a=='painted'||a=='resize'){this.element.doAddListener(a,e,d||this,b,c)}Ext.Widget.prototype.doAddListener.call(this,a,e,d,b,c,g,f)},doRemoveListener:function(a,c,b){if(a=='painted'||a=='resize'){this.element.doRemoveListener(a,c,b)}Ext.Widget.prototype.doRemoveListener.call(this,a,c,b)}}},1,['component'],['widget','component'],{'widget':!0,'component':!0},['widget.component'],[[Ext.mixin.Traversable.prototype.mixinId||Ext.mixin.Traversable.$className,Ext.mixin.Traversable]],[Ext,'Component',Ext.lib,'Component'],function(){});Ext.define('Ext.theme.neptune.Component',{override:'Ext.Component'},function(){Ext.namespace('Ext.theme.is').Neptune=!0;Ext.theme.name='Neptune';Ext.theme.getDocCls=function(){return Ext.platformTags.desktop?'':'x-big'}});Ext.define('Ext.theme.triton.Component',{override:'Ext.Component'},function(){Ext.namespace('Ext.theme.is').Triton=!0;Ext.theme.name='Triton';Ext.theme.getDocCls=function(){return Ext.platformTags.phone?'x-big':''}});Ext.define('TS.overrides.Component',{override:'Ext.Component',setLoading:function(a,b){a?this.mask({xtype:'loadmask',message:b||'Loading',indicator:!1}):this.unmask()},findPlugin:function(c){var b=0,a=this.getPlugins(),d=a&&a.length;for(;b<d;b++){if(a[b].type===c){return a[b]}}}});Ext.cmd.derive('Ext.layout.Abstract',Ext.Base,{isLayout:!0,constructor:function(a){this.initialConfig=a},setContainer:function(b){var a=this;a.container=b;a.mixins.observable.constructor.call(a,a.initialConfig);return a},onItemAdd:Ext.emptyFn,onItemRemove:Ext.emptyFn,onItemMove:Ext.emptyFn,onItemCenteredChange:Ext.emptyFn,onItemFloatingChange:Ext.emptyFn,onItemDockedChange:Ext.emptyFn,onItemInnerStateChange:Ext.emptyFn},1,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext.layout,'Abstract'],0);Ext.cmd.derive('Ext.mixin.Hookable',Ext.Mixin,{mixinConfig:{id:'hookable'},bindHook:function(g,c,a,h,f){if(!a){a=c}var b=g[c],e,d;if(b&&b.hasOwnProperty('$binding')){d=b.$binding;if(d.bindingMethod===a&&d.bindingScope===this){return this}}g[c]=e=function(){var b=e.$binding,i=b.bindingScope,d=Array.prototype.slice.call(arguments);d.push(arguments);if(f){d.push.apply(d,f)}if(!b.preventDefault&&i[b.bindingMethod].apply(i,d)!==!1){return b.boundFn.apply(this,arguments)}};e.$binding={preventDefault:!!h,boundFn:b,bindingMethod:a,bindingScope:this};return this},unbindHook:function(f,e,d){if(!d){d=e}var g=f[e],a=g.$binding,b,c;while(a){b=a.boundFn;if(a.bindingMethod===d&&a.bindingScope===this){if(c){c.boundFn=b}else {f[e]=b}return this}c=a;a=b.$binding}return this}},0,0,0,0,0,0,[Ext.mixin,'Hookable'],0);Ext.cmd.derive('Ext.util.Wrapper',Ext.Base,{constructor:function(b,a){var c=this.link('element',Ext.Element.create(b));if(a){c.insertBefore(a);this.wrap(a)}},bindSize:function(c){var a=this.wrappedElement,b;this.boundSizeName=c;this.boundMethodName=b=c==='width'?'setWidth':'setHeight';this.bindHook(a,b,'onBoundSizeChange');a[b].call(a,a.getStyleValue(c))},onBoundSizeChange:function(a,c){var b=this.element;if(typeof a==='string'&&a.substr(-1)==='%'){c[0]='100%'}else {a=''}b[this.boundMethodName].call(b,a)},wrap:function(b){var c=this.element,a;this.wrappedElement=b;a=c.dom;while(a.firstElementChild!==null){a=a.firstElementChild}a.appendChild(b.dom)},destroy:function(){var a=this,g=a.element,e=g.dom,b=a.wrappedElement,c=a.boundMethodName,f=e.parentNode,d;if(c){a.unbindHook(b,c,'onBoundSizeChange');d=g.getStyle(a.boundSizeName);if(d){b[c].call(b,d)}}if(f){if(!b.destroyed){f.replaceChild(e.firstElementChild,e)}delete a.wrappedElement}a.callParent()}},1,0,0,0,0,[[Ext.mixin.Hookable.prototype.mixinId||Ext.mixin.Hookable.$className,Ext.mixin.Hookable]],[Ext.util,'Wrapper'],0);Ext.cmd.derive('Ext.layout.wrapper.BoxDock',Ext.Base,{config:{direction:'horizontal',element:{className:'x-dock'},bodyElement:{className:'x-dock-body'},innerWrapper:null,sizeState:!1,container:null},positionMap:{top:'start',left:'start',bottom:'end',right:'end'},constructor:function(a){this.items={start:[],end:[]};this.itemsCount=0;this.initConfig(a)},addItems:function(b){var a,d,c;for(a=0,d=b.length;a<d;a++){c=b[a];this.addItem(c)}},addItem:function(a){var k=a.getDocked(),h=this.positionMap[k],j=a.$dockWrapper,g=this.getContainer(),m=g.indexOf(a),i=a.element,n=this.items,d=n[h],c,l,e,b,f;if(j){j.removeItem(a)}a.$dockWrapper=this;a.addCls('x-dock-item');a.addCls('x-docked-'+k);for(c=0,l=d.length;c<l;c++){e=d[c];f=g.indexOf(e);if(f>m){b=e.element;d.splice(c,0,a);break}}if(!b){d.push(a);b=this.getBodyElement()}this.itemsCount++;if(h==='start'){i.insertBefore(b)}else {i.insertAfter(b)}},removeItem:function(a,d){var b=this,c=d||a.getDocked(),e=b.items[b.positionMap[c]];Ext.Array.remove(e,a);a.element.detach();delete a.$dockWrapper;a.removeCls('x-dock-item');a.removeCls('x-docked-'+c);if(--b.itemsCount===0){b.destroy()}},getItemsSlice:function(g){var f=this.getContainer(),h=this.items,e=[],b,a,d,c;for(b=h.start,a=0,d=b.length;a<d;a++){c=b[a];if(f.indexOf(c)>g){e.push(c)}}for(b=h.end,a=0,d=b.length;a<d;a++){c=b[a];if(f.indexOf(c)>g){e.push(c)}}return e},applyElement:function(a){return Ext.Element.create(a)},updateElement:function(a){a.addCls('x-dock-'+this.getDirection())},applyBodyElement:function(a){return Ext.Element.create(a)},updateBodyElement:function(a){this.getElement().append(a)},updateInnerWrapper:function(b,a){var c=this.getBodyElement();if(a&&a.$outerWrapper===this){a.getElement().detach();delete a.$outerWrapper}if(b){b.setSizeState(this.getSizeState());b.$outerWrapper=this;c.append(b.getElement())}},updateSizeState:function(b){var a=this.getInnerWrapper();this.getElement().setSizeState(b);if(a){a.setSizeState(b)}},destroy:function(){var a=this,b=a.getInnerWrapper(),d=a.$outerWrapper,c;if(b){if(d){d.setInnerWrapper(b)}else {c=b.getElement();if(!c.destroyed){c.replace(a.getElement())}delete b.$outerWrapper}}delete a.$outerWrapper;a.setInnerWrapper(null);a.unlink(['_bodyElement','_element']);a.callParent()}},1,0,0,0,0,0,[Ext.layout.wrapper,'BoxDock'],0);Ext.cmd.derive('Ext.layout.wrapper.Inner',Ext.Base,{config:{sizeState:null,container:null},constructor:function(a){this.initConfig(a)},getElement:function(){return this.getContainer().bodyElement},setInnerWrapper:Ext.emptyFn,getInnerWrapper:Ext.emptyFn},1,0,0,0,0,0,[Ext.layout.wrapper,'Inner'],0);Ext.cmd.derive('Ext.layout.Default',Ext.layout.Abstract,{isAuto:!0,config:{animation:null},centerWrapperClass:'x-center',dockWrapperClass:'x-dock',positionMap:{top:'start',left:'start',middle:'center',bottom:'end',right:'end'},positionDirectionMap:{top:'vertical',bottom:'vertical',left:'horizontal',right:'horizontal'},setContainer:function(a){var b=this;b.dockedItems=[];Ext.layout.Abstract.prototype.setContainer.call(this,a);if(a.initialized){b.onContainerInitialized()}else {a.onInitialized('onContainerInitialized',b)}},onContainerInitialized:function(){var a=this;a.handleDockedItemBorders();a.container.on({delegate:'> component',beforecenteredchange:'onItemCenteredChange',beforefloatingchange:'onItemFloatingChange',afterdockedchange:'onAfterItemDockedChange',scope:a})},monitorSizeStateChange:function(){this.monitorSizeStateChange=Ext.emptyFn;this.container.on('sizestatechange','onContainerSizeStateChange',this)},monitorSizeFlagsChange:function(){this.monitorSizeFlagsChange=Ext.emptyFn;this.container.on('sizeflagschange','onContainerSizeFlagsChange',this)},onItemAdd:function(a){var b=a.getDocked();if(b!=null){this.dockItem(a)}else {if(a.isCentered()){this.onItemCenteredChange(a,!0)}else {if(a.isFloating()){this.onItemFloatingChange(a,!0)}else {this.onItemInnerStateChange(a,!0)}}}},onItemInnerStateChange:function(a,b,c){if(b){this.insertInnerItem(a,this.container.innerIndexOf(a))}else {this.removeInnerItem(a)}},insertInnerItem:function(h,e){var d=this.container,f=d.innerElement.dom,g=h.element.dom,b=e!==-1?d.getInnerAt(e+1):null,c=null,a;if(b){a=b.getTranslatable();if(a&&a.getUseWrapper()){c=a.getWrapper().dom}else {c=b?b.element.dom:null}}f.insertBefore(g,c);return this},insertBodyItem:function(a){var b=this.container.setUseBodyElement(!0),c=b.bodyElement.dom;if(a.getZIndex()===null){a.setZIndex((b.indexOf(a)+1)*2)}c.insertBefore(a.element.dom,c.firstChild);return this},removeInnerItem:function(a){a.element.detach()},removeBodyItem:function(a){a.setZIndex(null);a.element.detach()},onItemRemove:function(a,d,b){var c=a.getDocked();if(c){this.undockItem(a)}else {if(a.isCentered()){this.onItemCenteredChange(a,!1)}else {if(a.isFloating()){this.onItemFloatingChange(a,!1)}else {this.onItemInnerStateChange(a,!1,b)}}}},onItemMove:function(a,b,c){if(a.isCentered()||a.isFloating()){a.setZIndex((b+1)*2)}else {if(a.isInnerItem()){this.insertInnerItem(a,this.container.innerIndexOf(a))}else {this.undockItem(a);this.dockItem(a)}}},onItemCenteredChange:function(a,c){var b='$centerWrapper';if(c){this.insertBodyItem(a);a.link(b,new Ext.util.Wrapper({className:this.centerWrapperClass},a.element))}else {a.unlink([b]);this.removeBodyItem(a)}},onItemFloatingChange:function(a,b){if(b){this.insertBodyItem(a)}else {this.removeBodyItem(a)}},onAfterItemDockedChange:function(a,c,b){if(a.initialized){if(b){this.undockItem(a,b)}if(c){this.dockItem(a)}}},onContainerSizeStateChange:function(){var a=this.getDockWrapper();if(a){a.setSizeState(this.container.getSizeState())}},onContainerSizeFlagsChange:function(){var b=this.dockedItems,a,d,c;for(a=0,d=b.length;a<d;a++){c=b[a];this.refreshDockedItemLayoutSizeFlags(c)}},refreshDockedItemLayoutSizeFlags:function(b){var a=this.container,c=this.positionDirectionMap[b.getDocked()],d=c==='horizontal'?a.LAYOUT_HEIGHT:a.LAYOUT_WIDTH,e=a.getSizeFlags()&d;b.setLayoutSizeFlags(e)},dockItem:function(e){var c=this,n=Ext.layout.wrapper.BoxDock,g=c.dockedItems,p=g.length,d=c.container,u=d.indexOf(e),q=c.positionDirectionMap,o=q[e.getDocked()],j=c.dockInnerWrapper,l,i,m,v,t,k,h,s,b,a,f,r;c.monitorSizeStateChange();c.monitorSizeFlagsChange();if(!j){j=c.link('dockInnerWrapper',new Ext.layout.wrapper.Inner({container:d}))}if(p===0){g.push(e);a=new n({container:d,direction:o});a.addItem(e);a.getElement().replace(j.getElement(),!1);a.setInnerWrapper(j);d.onInitialized('onContainerSizeStateChange',c)}else {for(i=0;i<p;i++){m=g[i];v=d.indexOf(m);if(v>u){h=t||g[0];g.splice(i,0,e);break}t=m}if(!h){h=g[p-1];g.push(e)}s=h.getDocked();b=h.$dockWrapper;l=q[s];if(o===l){b.addItem(e)}else {k=b.getItemsSlice(u);a=new n({container:d,direction:o});if(k.length>0){if(k.length===b.itemsCount){f=b;a.setSizeState(f.getSizeState());a.getElement().replace(f.getElement(),!1)}else {f=new n({container:d,direction:l});f.setInnerWrapper(b.getInnerWrapper());f.addItems(k);b.setInnerWrapper(a)}a.setInnerWrapper(f)}else {r=b.getInnerWrapper();b.setInnerWrapper(null);a.setInnerWrapper(r);b.setInnerWrapper(a)}a.addItem(e)}}if(d.initialized){c.handleDockedItemBorders()}d.onInitialized('refreshDockedItemLayoutSizeFlags',c,[e])},getDockWrapper:function(){var a=this.dockedItems;if(a.length>0){return a[0].$dockWrapper}return null},undockItem:function(a,g){var b=this,f=b.dockedItems,d,c,e=a.$dockWrapper;if(e){e.removeItem(a,g)}if(b.container.initialized){d=a.lastBorderMask;c=a.lastBorderCollapse;if(d){a.lastBorderMask=0;a.removeCls(b.noBorderClassTable[d])}if(c){a.lastBorderCollapse=0;a.removeCls(b.getBorderCollapseTable()[c])}b.handleDockedItemBorders()}Ext.Array.remove(f,a);a.setLayoutSizeFlags(0)},destroy:function(){this.dockedItems=null;Ext.layout.Abstract.prototype.destroy.call(this)},noBorderClassTable:[0,'x-noborder-l','x-noborder-b','x-noborder-bl','x-noborder-r','x-noborder-rl','x-noborder-rb','x-noborder-rbl','x-noborder-t','x-noborder-tl','x-noborder-tb','x-noborder-tbl','x-noborder-tr','x-noborder-trl','x-noborder-trb','x-noborder-trbl'],edgeMasks:{top:8,right:4,bottom:2,left:1},handleDockedItemBorders:function(){var d=this,j=0,p=8,o=4,m=2,n=1,i=d.container,s=i.getBoodyBorder&&i.getBodyBorder(),k=i.getBorder(),x=d.collapsed,y=d.edgeMasks,l=d.noBorderClassTable,v=i.items.generation,a,r,u,b,t,w,h,q,g,c,f,e;if(d.initializedBorders===v||!i.manageBorders){return}f=[];e=[];r=d.getBorderCollapseTable();l=d.getBorderClassTable?d.getBorderClassTable():l;d.initializedBorders=v;d.collapsed=!1;u=i.getDockedItems();d.collapsed=x;for(t=0,w=u.length;t<w;t++){h=u[t];q=h.getDocked();c=b=0;f.length=0;e.length=0;if(q!=='bottom'){if(j&p){a=h.border}else {a=k;if(a!==!1){b+=p}}if(a===!1){c+=p}}if(q!=='left'){if(j&o){a=h.border}else {a=k;if(a!==!1){b+=o}}if(a===!1){c+=o}}if(q!=='top'){if(j&m){a=h.border}else {a=k;if(a!==!1){b+=m}}if(a===!1){c+=m}}if(q!=='right'){if(j&n){a=h.border}else {a=k;if(a!==!1){b+=n}}if(a===!1){c+=n}}if((g=h.lastBorderMask)!==c){h.lastBorderMask=c;if(g){e[0]=l[g]}if(c){f[0]=l[c]}}if((g=h.lastBorderCollapse)!==b){h.lastBorderCollapse=b;if(g){e[e.length]=r[g]}if(b){f[f.length]=r[b]}}if(e.length){h.removeCls(e)}if(f.length){h.addCls(f)}j|=y[q]}c=b=0;f.length=0;e.length=0;if(j&p){a=s}else {a=k;if(a!==!1){b+=p}}if(a===!1){c+=p}if(j&o){a=s}else {a=k;if(a!==!1){b+=o}}if(a===!1){c+=o}if(j&m){a=s}else {a=k;if(a!==!1){b+=m}}if(a===!1){c+=m}if(j&n){a=s}else {a=k;if(a!==!1){b+=n}}if(a===!1){c+=n}if((g=d.lastBodyBorderMask)!==c){d.lastBodyBorderMask=c;if(g){e[0]=l[g]}if(c){f[0]=l[c]}}if((g=d.lastBodyBorderCollapse)!==b){d.lastBodyBorderCollapse=b;if(g){e[e.length]=r[g]}if(b){f[f.length]=r[b]}}if(e.length&&i.removeBodyCls){i.removeBodyCls(e)}if(f.length&&i.addBodyCls){i.addBodyCls(f)}},borderCollapseMap:{},getBorderCollapseTable:function(){var f=this,c=f.borderCollapseMap,e=f.container,a=e.getBaseCls(),b=e.ui,g=b?'-'+b:'',d;b=b||'default';c=c[a]||(c[a]={});d=c[b];if(!d){a+=g+'-outer-border-';c[b]=d=[0,a+'l',a+'b',a+'bl',a+'r',a+'rl',a+'rb',a+'rbl',a+'t',a+'tl',a+'tb',a+'tbl',a+'tr',a+'trl',a+'trb',a+'trbl']}return d}},0,0,0,0,['layout.auto','layout.default'],0,[Ext.layout,'Default'],0);Ext.cmd.derive('Ext.layout.Box',Ext.layout.Default,{config:{orient:'horizontal',align:'start',pack:'start'},layoutBaseClass:'x-layout-tablebox',itemClass:'x-layout-tablebox-item',setContainer:function(a){Ext.layout.Default.prototype.setContainer.call(this,a);a.innerElement.addCls(this.layoutBaseClass);a.on('flexchange','onItemFlexChange',this,{delegate:'> component'})},onItemInnerStateChange:function(b,a){Ext.layout.Default.prototype.onItemInnerStateChange.apply(this,arguments);b.toggleCls(this.itemClass,a)},onItemFlexChange:Ext.emptyFn},0,0,0,0,['layout.tablebox'],0,[Ext.layout,'Box'],0);Ext.cmd.derive('Ext.fx.layout.card.Abstract',Ext.Evented,{isAnimation:!0,config:{direction:'left',duration:null,reverse:null,layout:null},updateLayout:function(a){if(a){this.enable()}},enable:function(){var a=this.getLayout();if(a){a.on('beforeactiveitemchange','onActiveItemChange',this)}},disable:function(){var a=this.getLayout();if(this.isAnimating){this.stopAnimation()}if(a){a.un('beforeactiveitemchange','onActiveItemChange',this)}},onActiveItemChange:Ext.emptyFn,destroy:function(){var a=this,b=a.getLayout();if(a.isAnimating){a.stopAnimation()}if(b){b.un('beforeactiveitemchange','onActiveItemChange',this)}a.setLayout(null);if(a.observableId){a.fireEvent('destroy',this)}Ext.Evented.prototype.destroy.call(this)}},0,0,0,0,0,0,[Ext.fx.layout.card,'Abstract'],0);Ext.cmd.derive('Ext.fx.State',Ext.Base,{isAnimatable:{'background-color':!0,'background-image':!0,'background-position':!0,'border-bottom-color':!0,'border-bottom-width':!0,'border-color':!0,'border-left-color':!0,'border-left-width':!0,'border-right-color':!0,'border-right-width':!0,'border-spacing':!0,'border-top-color':!0,'border-top-width':!0,'border-width':!0,'bottom':!0,'color':!0,'crop':!0,'font-size':!0,'font-weight':!0,'height':!0,'left':!0,'letter-spacing':!0,'line-height':!0,'margin-bottom':!0,'margin-left':!0,'margin-right':!0,'margin-top':!0,'max-height':!0,'max-width':!0,'min-height':!0,'min-width':!0,'opacity':!0,'outline-color':!0,'outline-offset':!0,'outline-width':!0,'padding-bottom':!0,'padding-left':!0,'padding-right':!0,'padding-top':!0,'right':!0,'text-indent':!0,'text-shadow':!0,'top':!0,'vertical-align':!0,'visibility':!0,'width':!0,'word-spacing':!0,'z-index':!0,'zoom':!0,'transform':!0},constructor:function(a){this.data={};this.set(a)},setConfig:function(a){this.set(a);return this},setRaw:function(a){this.data=a;return this},clear:function(){return this.setRaw({})},setTransform:function(d,a){var g=this.data,e=Ext.isArray(a),b=g.transform,c,f;if(!b){b=g.transform={translateX:0,translateY:0,translateZ:0,scaleX:1,scaleY:1,scaleZ:1,rotate:0,rotateX:0,rotateY:0,rotateZ:0,skewX:0,skewY:0}}if(typeof d=='string'){switch(d){case 'translate':if(e){c=a.length;if(c==0){break}b.translateX=a[0];if(c==1){break}b.translateY=a[1];if(c==2){break}b.translateZ=a[2]}else {b.translateX=a};break;case 'rotate':if(e){c=a.length;if(c==0){break}b.rotateX=a[0];if(c==1){break}b.rotateY=a[1];if(c==2){break}b.rotateZ=a[2]}else {b.rotate=a};break;case 'scale':if(e){c=a.length;if(c==0){break}b.scaleX=a[0];if(c==1){break}b.scaleY=a[1];if(c==2){break}b.scaleZ=a[2]}else {b.scaleX=a;b.scaleY=a};break;case 'skew':if(e){c=a.length;if(c==0){break}b.skewX=a[0];if(c==1){break}b.skewY=a[1]}else {b.skewX=a};break;default:b[d]=a;}}else {for(f in d){if(d.hasOwnProperty(f)){a=d[f];this.setTransform(f,a)}}}},set:function(b,a){var d=this.data,c;if(typeof b!='string'){for(c in b){a=b[c];if(c==='transform'){this.setTransform(a)}else {d[c]=a}}}else {if(b==='transform'){this.setTransform(a)}else {d[b]=a}}return this},unset:function(b){var a=this.data;if(a.hasOwnProperty(b)){delete a[b]}return this},getData:function(){return this.data}},1,0,0,0,0,0,[Ext.fx,'State'],0);Ext.cmd.derive('Ext.fx.animation.Abstract',Ext.Evented,{isAnimation:!0,config:{name:'',element:null,before:null,from:{},to:{},after:null,states:{},duration:300,easing:'linear',iteration:1,direction:'normal',delay:0,onBeforeStart:null,callback:null,onEnd:null,onBeforeEnd:null,scope:null,reverse:null,preserveEndState:!1,replacePrevious:!0},STATE_FROM:'0%',STATE_TO:'100%',DIRECTION_UP:'up',DIRECTION_DOWN:'down',DIRECTION_LEFT:'left',DIRECTION_RIGHT:'right',stateNameRegex:/^(?:[\d\.]+)%$/,constructor:function(){this.states={};Ext.Evented.prototype.constructor.apply(this,arguments);return this},applyElement:function(a){return Ext.get(a)},applyBefore:function(a,b){if(a){return Ext.factory(a,Ext.fx.State,b)}},applyAfter:function(a,b){if(a){return Ext.factory(a,Ext.fx.State,b)}},setFrom:function(a){return this.setState(this.STATE_FROM,a)},setTo:function(a){return this.setState(this.STATE_TO,a)},getFrom:function(){return this.getState(this.STATE_FROM)},getTo:function(){return this.getState(this.STATE_TO)},setStates:function(b){var c=this.stateNameRegex,a;for(a in b){if(c.test(a)){this.setState(a,b[a])}}return this},getStates:function(){return this.states},updateCallback:function(a){if(a){this.setOnEnd(a)}},end:function(){this.stop()},stop:function(){this.fireEvent('stop',this)},destroy:function(){this.stop();Ext.Evented.prototype.destroy.call(this)},setState:function(c,d){var b=this.getStates(),a;a=Ext.factory(d,Ext.fx.State,b[c]);if(a){b[c]=a}return this},getState:function(a){return this.getStates()[a]},getData:function(){var a=this,b=a.getStates(),d={},e=a.getBefore(),f=a.getAfter(),k=b[a.STATE_FROM],l=b[a.STATE_TO],i=k.getData(),j=l.getData(),h,c,g;for(c in b){if(b.hasOwnProperty(c)){g=b[c];h=g.getData();d[c]=h}}return {before:e?e.getData():{},after:f?f.getData():{},states:d,from:i,to:j,duration:a.getDuration(),iteration:a.getIteration(),direction:a.getDirection(),easing:a.getEasing(),delay:a.getDelay(),onEnd:a.getOnEnd(),onBeforeEnd:a.getOnBeforeEnd(),onBeforeStart:a.getOnBeforeStart(),scope:a.getScope(),preserveEndState:a.getPreserveEndState(),replacePrevious:a.getReplacePrevious()}}},1,0,0,0,0,0,[Ext.fx.animation,'Abstract'],0);Ext.cmd.derive('Ext.fx.animation.Slide',Ext.fx.animation.Abstract,{alternateClassName:'Ext.fx.animation.SlideIn',config:{direction:'left',out:!1,offset:0,easing:'auto',containerBox:'auto',elementBox:'auto',isElementBoxFit:!0,useCssTransform:!0},reverseDirectionMap:{up:'down',down:'up',left:'right',right:'left'},applyEasing:function(a){if(a==='auto'){return 'ease-'+(this.getOut()?'in':'out')}return a},getContainerBox:function(){var a=this._containerBox;if(a==='auto'){a=this.getElement().getParent().getBox()}return a},getElementBox:function(){var a=this._elementBox;if(this.getIsElementBoxFit()){return this.getContainerBox()}if(a==='auto'){a=this.getElement().getBox()}return a},getData:function(){var o=this.getElementBox(),b=this.getContainerBox(),a=o?o:b,j=this.getFrom(),m=this.getTo(),d=this.getOut(),c=this.getOffset(),g=this.getDirection(),n=this.getUseCssTransform(),p=this.getReverse(),e=0,f=0,h,i,k,l;if(p){g=this.reverseDirectionMap[g]}switch(g){case this.DIRECTION_UP:if(d){f=b.top-a.top-a.height-c}else {f=b.bottom-a.bottom+a.height+c};break;case this.DIRECTION_DOWN:if(d){f=b.bottom-a.bottom+a.height+c}else {f=b.top-a.height-a.top-c};break;case this.DIRECTION_RIGHT:if(d){e=b.right-a.right+a.width+c}else {e=b.left-a.left-a.width-c};break;case this.DIRECTION_LEFT:if(d){e=b.left-a.left-a.width-c}else {e=b.right-a.right+a.width+c};break;}h=d?0:e;i=d?0:f;if(n){j.setTransform({translateX:h,translateY:i})}else {j.set('left',h);j.set('top',i)}k=d?e:0;l=d?f:0;if(n){m.setTransform({translateX:k,translateY:l})}else {m.set('left',k);m.set('top',l)}return Ext.fx.animation.Abstract.prototype.getData.apply(this,arguments)}},0,0,0,0,['animation.slide','animation.slideIn'],0,[Ext.fx.animation,'Slide',Ext.fx.animation,'SlideIn'],0);Ext.cmd.derive('Ext.fx.animation.SlideOut',Ext.fx.animation.Slide,{config:{out:!0}},0,0,0,0,['animation.slideOut'],0,[Ext.fx.animation,'SlideOut'],0);Ext.cmd.derive('Ext.fx.animation.Fade',Ext.fx.animation.Abstract,{alternateClassName:'Ext.fx.animation.FadeIn',config:{out:!1,before:{display:null,opacity:0},after:{opacity:null},reverse:null},updateOut:function(c){var b=this.getTo(),a=this.getFrom();if(c){a.set('opacity',1);b.set('opacity',0)}else {a.set('opacity',0);b.set('opacity',1)}}},0,0,0,0,['animation.fade','animation.fadeIn'],0,[Ext.fx.animation,'Fade',Ext.fx.animation,'FadeIn'],0);Ext.cmd.derive('Ext.fx.animation.FadeOut',Ext.fx.animation.Fade,{config:{out:!0,before:{}}},0,0,0,0,['animation.fadeOut'],0,[Ext.fx.animation,'FadeOut'],0);Ext.cmd.derive('Ext.fx.animation.Flip',Ext.fx.animation.Abstract,{config:{easing:'ease-in',direction:'right',half:!1,out:null},getData:function(){var c=this,k=c.getFrom(),m=c.getTo(),j=c.getDirection(),b=c.getOut(),l=c.getHalf(),a=l?90:180,h=1,i=1,d=0,e=0,f=0,g=0;if(b){i=0.8}else {h=0.8}switch(j){case this.DIRECTION_UP:if(b){f=a}else {d=-a};break;case this.DIRECTION_DOWN:if(b){f=-a}else {d=a};break;case this.DIRECTION_RIGHT:if(b){g=a}else {e=-a};break;case this.DIRECTION_LEFT:if(b){g=-a}else {e=a};break;}k.setTransform({rotateX:d,rotateY:e,scale:h});m.setTransform({rotateX:f,rotateY:g,scale:i});return Ext.fx.animation.Abstract.prototype.getData.call(this)}},0,0,0,0,['animation.flip'],0,[Ext.fx.animation,'Flip'],0);Ext.cmd.derive('Ext.fx.animation.Pop',Ext.fx.animation.Abstract,{alternateClassName:'Ext.fx.animation.PopIn',config:{out:!1,before:{display:null,opacity:0},after:{opacity:null}},getData:function(){var b=this.getTo(),a=this.getFrom(),c=this.getOut();if(c){a.set('opacity',1);a.setTransform({scale:1});b.set('opacity',0);b.setTransform({scale:0})}else {a.set('opacity',0);a.setTransform({scale:0});b.set('opacity',1);b.setTransform({scale:1})}return Ext.fx.animation.Abstract.prototype.getData.apply(this,arguments)}},0,0,0,0,['animation.pop','animation.popIn'],0,[Ext.fx.animation,'Pop',Ext.fx.animation,'PopIn'],0);Ext.cmd.derive('Ext.fx.animation.PopOut',Ext.fx.animation.Pop,{config:{out:!0,before:{}}},0,0,0,0,['animation.popOut'],0,[Ext.fx.animation,'PopOut'],0);Ext.cmd.derive('Ext.fx.Animation',Ext.Base,{constructor:function(a){var c=Ext.fx.animation.Abstract,b;if(typeof a=='string'){b=a;a={}}else {if(a&&a.type){b=a.type}}if(b){c=Ext.ClassManager.getByAlias('animation.'+b)}return Ext.factory(a,c)}},1,0,0,0,0,0,[Ext.fx,'Animation'],0);Ext.cmd.derive('Ext.fx.layout.card.Style',Ext.fx.layout.card.Abstract,{config:{inAnimation:{before:{visibility:null},preserveEndState:!1,replacePrevious:!0},outAnimation:{preserveEndState:!1,replacePrevious:!0}},constructor:function(c){var b,a;Ext.fx.layout.card.Abstract.prototype.constructor.call(this,c);this.endAnimationCounter=0;b=this.getInAnimation();a=this.getOutAnimation();b.on('animationend','incrementEnd',this);a.on('animationend','incrementEnd',this)},updateDirection:function(a){this.getInAnimation().setDirection(a);this.getOutAnimation().setDirection(a)},updateDuration:function(a){this.getInAnimation().setDuration(a);this.getOutAnimation().setDuration(a)},updateReverse:function(a){this.getInAnimation().setReverse(a);this.getOutAnimation().setReverse(a)},incrementEnd:function(){this.endAnimationCounter++;if(this.endAnimationCounter>1){this.endAnimationCounter=0;this.fireEvent('animationend',this)}},applyInAnimation:function(b,a){return Ext.factory(b,Ext.fx.Animation,a)},applyOutAnimation:function(b,a){return Ext.factory(b,Ext.fx.Animation,a)},updateInAnimation:function(a){a.setScope(this)},updateOutAnimation:function(a){a.setScope(this)},onActiveItemChange:function(h,c,d,f){var e=this.getInAnimation(),a=this.getOutAnimation(),b,g;if(c&&d&&d.isPainted()){b=c.renderElement;g=d.renderElement;e.setElement(b);a.setElement(g);a.setOnEnd(function(){f.resume()});b.dom.style.setProperty('visibility','hidden','important');c.show();Ext.Animator.run([a,e]);f.pause()}},destroy:function(){Ext.destroy(this.getInAnimation(),this.getOutAnimation());Ext.fx.layout.card.Abstract.prototype.destroy.call(this)}},1,0,0,0,0,0,[Ext.fx.layout.card,'Style'],0);Ext.cmd.derive('Ext.fx.layout.card.Slide',Ext.fx.layout.card.Style,{config:{inAnimation:{type:'slide',easing:'ease-out'},outAnimation:{type:'slide',easing:'ease-out',out:!0}},updateReverse:function(a){this.getInAnimation().setReverse(a);this.getOutAnimation().setReverse(a)}},0,0,0,0,['fx.layout.card.slide'],0,[Ext.fx.layout.card,'Slide'],0);Ext.cmd.derive('Ext.fx.layout.card.Cover',Ext.fx.layout.card.Style,{config:{reverse:null,inAnimation:{before:{'z-index':100},after:{'z-index':0},type:'slide',easing:'ease-out'},outAnimation:{easing:'ease-out',from:{opacity:0.99},to:{opacity:1},out:!0}},updateReverse:function(a){this.getInAnimation().setReverse(a);this.getOutAnimation().setReverse(a)}},0,0,0,0,['fx.layout.card.cover'],0,[Ext.fx.layout.card,'Cover'],0);Ext.cmd.derive('Ext.fx.layout.card.Reveal',Ext.fx.layout.card.Style,{config:{inAnimation:{easing:'ease-out',from:{opacity:0.99},to:{opacity:1}},outAnimation:{before:{'z-index':100},after:{'z-index':0},type:'slide',easing:'ease-out',out:!0}},updateReverse:function(a){this.getInAnimation().setReverse(a);this.getOutAnimation().setReverse(a)}},0,0,0,0,['fx.layout.card.reveal'],0,[Ext.fx.layout.card,'Reveal'],0);Ext.cmd.derive('Ext.fx.layout.card.Fade',Ext.fx.layout.card.Style,{config:{reverse:null,inAnimation:{type:'fade',easing:'ease-out'},outAnimation:{type:'fade',easing:'ease-out',out:!0}}},0,0,0,0,['fx.layout.card.fade'],0,[Ext.fx.layout.card,'Fade'],0);Ext.cmd.derive('Ext.fx.layout.card.Flip',Ext.fx.layout.card.Style,{config:{duration:500,inAnimation:{type:'flip',half:!0,easing:'ease-out',before:{'backface-visibility':'hidden'},after:{'backface-visibility':null}},outAnimation:{type:'flip',half:!0,easing:'ease-in',before:{'backface-visibility':'hidden'},after:{'backface-visibility':null},out:!0}},onActiveItemChange:function(c,b,e,d){var a=b.element.getParent();a.addCls('x-layout-card-perspective');this.on('animationend',function(){a.removeCls('x-layout-card-perspective')},this,{single:!0});Ext.fx.layout.card.Style.prototype.onActiveItemChange.apply(this,arguments)},updateDuration:function(d){var a=d/2,b=this.getInAnimation(),c=this.getOutAnimation();b.setDelay(a);b.setDuration(a);c.setDuration(a)}},0,0,0,0,['fx.layout.card.flip'],0,[Ext.fx.layout.card,'Flip'],0);Ext.cmd.derive('Ext.fx.layout.card.Pop',Ext.fx.layout.card.Style,{config:{duration:500,inAnimation:{type:'pop',easing:'ease-out'},outAnimation:{type:'pop',easing:'ease-in',out:!0}},updateDuration:function(d){var a=d/2,b=this.getInAnimation(),c=this.getOutAnimation();b.setDelay(a);b.setDuration(a);c.setDuration(a)}},0,0,0,0,['fx.layout.card.pop'],0,[Ext.fx.layout.card,'Pop'],0);Ext.cmd.derive('Ext.fx.layout.card.Scroll',Ext.fx.layout.card.Abstract,{config:{duration:150},constructor:function(a){this.initConfig(a)},getEasing:function(){var a=this.easing;if(!a){this.easing=a=new Ext.fx.easing.Linear()}return a},updateDuration:function(a){this.getEasing().setDuration(a)},onActiveItemChange:function(l,e,j,k){var f=this.getDirection(),g=this.getEasing(),b,i,h,d,c,a;if(e&&j){if(this.isAnimating){this.stopAnimation()}e.setWidth('100%');e.setHeight('100%');b=this.getLayout().container.innerElement;d=b.getWidth();c=b.getHeight();i=e.renderElement;h=j.renderElement;this.oldItem=j;this.newItem=e;this.containerElement=b;this.currentEventController=k;this.isReverse=a=this.getReverse();e.show();if(f=='right'){f='left';this.isReverse=a=!a}else {if(f=='down'){f='up';this.isReverse=a=!a}}if(f=='left'){if(a){g.setConfig({startValue:d,endValue:0});b.dom.scrollLeft=d;h.setLeft(d)}else {g.setConfig({startValue:0,endValue:d});i.setLeft(d)}}else {if(a){g.setConfig({startValue:c,endValue:0});b.dom.scrollTop=c;h.setTop(c)}else {g.setConfig({startValue:0,endValue:c});i.setTop(c)}}this.startAnimation();k.pause()}},startAnimation:function(){this.isAnimating=!0;this.getEasing().setStartTime(Date.now());Ext.AnimationQueue.start(this.doAnimationFrame,this)},doAnimationFrame:function(){var b=this.getEasing(),a=this.getDirection(),c='scrollTop',d;if(a=='left'||a=='right'){c='scrollLeft'}if(b.isEnded){this.stopAnimation()}else {d=b.getValue();this.containerElement.dom[c]=d}},stopAnimation:function(){var a=this,e=a.getDirection(),d='setTop',c=a.oldItem,b=a.newItem;if(e=='left'||e=='right'){d='setLeft'}a.currentEventController.resume();if(a.isReverse&&c&&c.renderElement&&c.renderElement.dom){c.renderElement[d](null)}else {if(b&&b.renderElement&&b.renderElement.dom){b.renderElement[d](null)}}Ext.AnimationQueue.stop(this.doAnimationFrame,this);a.isAnimating=!1;a.fireEvent('animationend',a)}},1,0,0,0,['fx.layout.card.scroll'],0,[Ext.fx.layout.card,'Scroll'],0);Ext.cmd.derive('Ext.fx.layout.Card',Ext.Base,{constructor:function(a){var c=Ext.fx.layout.card.Abstract,b;if(!a){return null}if(typeof a=='string'){b=a;a={}}else {if(a.type){b=a.type}}a.elementBox=!1;if(b){c=Ext.ClassManager.getByAlias('fx.layout.card.'+b)}return Ext.factory(a,c)}},1,0,0,0,0,0,[Ext.fx.layout,'Card'],0);Ext.cmd.derive('Ext.layout.Card',Ext.layout.Default,{isCard:!0,layoutClass:'x-layout-card',itemClass:'x-layout-card-item',applyAnimation:function(a){return new Ext.fx.layout.Card(a)},updateAnimation:function(a,b){if(a&&a.isAnimation){a.setLayout(this)}if(b){b.destroy()}},setContainer:function(a){Ext.layout.Default.prototype.setContainer.apply(this,arguments);a.innerElement.addCls(this.layoutClass);a.onInitialized('onContainerInitialized',this)},onContainerInitialized:function(){var d=this,b=d.container,c=b.getInnerAt(0),a=b.getActiveItem();Ext.layout.Default.prototype.onContainerInitialized.call(this);if(a){a.show();if(c&&c!==a){c.hide()}}b.on('activeitemchange','onContainerActiveItemChange',d)},onContainerActiveItemChange:function(c,a,b){this.fireEventedAction('activeitemchange',[this,a,b],'doActiveItemChange',this)},onItemInnerStateChange:function(a,c,e){Ext.layout.Default.prototype.onItemInnerStateChange.apply(this,arguments);var b=this.container,d=b.getActiveItem();a.toggleCls(this.itemClass,c);a.setLayoutSizeFlags(c?b.LAYOUT_BOTH:0);if(c){if(d!==b.innerIndexOf(a)&&d!==a&&a!==b.pendingActiveItem){a.hide()}}else {if(!e&&!a.destroyed&&a.destroying!==!0){a.show()}}},doActiveItemChange:function(c,a,b){if(b){b.hide()}if(a){a.show()}},destroy:function(){Ext.layout.Default.prototype.destroy.call(this);Ext.destroy(this.getAnimation())}},0,0,0,0,['layout.card'],0,[Ext.layout,'Card'],0);Ext.cmd.derive('Ext.layout.Fit',Ext.layout.Default,{isFit:!0,layoutClass:'x-layout-fit',itemClass:'x-layout-fit-item',setContainer:function(a){Ext.layout.Default.prototype.setContainer.apply(this,arguments);a.innerElement.addCls(this.layoutClass);this.onContainerSizeFlagsChange();this.monitorSizeFlagsChange()},onContainerSizeFlagsChange:function(){var a=this.container,d=a.getSizeFlags(),g=Boolean(d&a.LAYOUT_STRETCHED),c=a.innerItems,b,f,e;Ext.layout.Default.prototype.onContainerSizeFlagsChange.call(this);for(b=0,f=c.length;b<f;b++){e=c[b];e.setLayoutSizeFlags(d)}a.innerElement.toggleCls('x-stretched',g)},onItemInnerStateChange:function(b,a){Ext.layout.Default.prototype.onItemInnerStateChange.apply(this,arguments);b.toggleCls(this.itemClass,a);b.setLayoutSizeFlags(a?this.container.getSizeFlags():0)}},0,0,0,0,['layout.fit'],0,[Ext.layout,'Fit'],0);Ext.cmd.derive('Ext.layout.FlexBox',Ext.layout.Box,{config:{align:'stretch'},layoutBaseClass:'x-layout-box',itemClass:'x-layout-box-item',setContainer:function(a){Ext.layout.Box.prototype.setContainer.apply(this,arguments);this.monitorSizeFlagsChange()},applyOrient:function(a){return a},updateOrient:function(c,b){var a=this.container,d={delegate:'> component'};if(c==='horizontal'){this.sizePropertyName='width'}else {this.sizePropertyName='height'}a.innerElement.swapCls('x-'+c,'x-'+b);if(b){a.un(b==='horizontal'?'widthchange':'heightchange','onItemSizeChange',this,d);this.redrawContainer()}a.on(c==='horizontal'?'widthchange':'heightchange','onItemSizeChange',this,d)},onItemInnerStateChange:function(a,d){Ext.layout.Box.prototype.onItemInnerStateChange.apply(this,arguments);var b,c;a.toggleCls(this.itemClass,d);if(d){b=a.getFlex();c=a.getConfig(this.sizePropertyName);if(b){this.doItemFlexChange(a,b)}else {if(c){this.doItemSizeChange(a,c)}}}this.refreshItemSizeState(a)},refreshItemSizeState:function(c){var h=c.isInnerItem(),b=this.container,e=b.LAYOUT_HEIGHT,f=b.LAYOUT_WIDTH,g=this.sizePropertyName,a=0,d=b.getSizeFlags();if(h){a|=b.LAYOUT_STRETCHED;if(this.getAlign()==='stretch'){a|=d&(g==='width'?e:f)}if(c.getFlex()){a|=d&(g==='width'?f:e)}}c.setLayoutSizeFlags(a)},refreshAllItemSizedStates:function(){var b=this.container.innerItems,a,d,c;for(a=0,d=b.length;a<d;a++){c=b[a];this.refreshItemSizeState(c)}},onContainerSizeFlagsChange:function(){this.refreshAllItemSizedStates();Ext.layout.Box.prototype.onContainerSizeFlagsChange.apply(this,arguments)},onItemSizeChange:function(a,b){if(a.isInnerItem()){this.doItemSizeChange(a,b)}},doItemSizeChange:function(a,b){if(b){a.setFlex(null);this.redrawContainer()}},onItemFlexChange:function(a,b){if(a.isInnerItem()){this.doItemFlexChange(a,b);this.refreshItemSizeState(a)}},doItemFlexChange:function(b,a){this.setItemFlex(b,a);if(a){b.setConfig(this.sizePropertyName,null)}else {this.redrawContainer()}},redrawContainer:function(){var b=this.container,a=b.element.dom.parentNode;if(a&&a.nodeType!==11){b.innerElement.redraw()}},setItemFlex:function(d,a){var c=d.element,b=c.dom.style;c.toggleCls('x-flexed',!!a);a=a?String(a):'';if(Ext.browser.is.WebKit){b.setProperty('-webkit-box-flex',a,null)}else {if(Ext.browser.is.IE){b.setProperty('-ms-flex',a+' 0 0px',null)}else {b.setProperty('flex',a+' 0 0px',null)}}},convertPosition:function(a){var b=this.positionMap;if(b.hasOwnProperty(a)){return b[a]}return a},applyAlign:function(a){return this.convertPosition(a)},updateAlign:function(c,a){var b=this.container;b.innerElement.swapCls(c,a,!0,'x-align');if(a!==undefined){this.refreshAllItemSizedStates()}},applyPack:function(a){return this.convertPosition(a)},updatePack:function(b,a){this.container.innerElement.swapCls(b,a,!0,'x-pack')}},0,0,0,0,['layout.box'],0,[Ext.layout,'FlexBox'],0);Ext.cmd.derive('Ext.layout.Float',Ext.layout.Default,{config:{direction:'left'},layoutClass:'layout-float',itemClass:'layout-float-item',setContainer:function(a){Ext.layout.Default.prototype.setContainer.apply(this,arguments);a.innerElement.addCls(this.layoutClass)},onItemInnerStateChange:function(b,a){Ext.layout.Default.prototype.onItemInnerStateChange.apply(this,arguments);b.toggleCls(this.itemClass,a)},updateDirection:function(c,b){var a='direction-';this.container.innerElement.swapCls(a+c,a+b)}},0,0,0,0,['layout.float'],0,[Ext.layout,'Float'],0);Ext.cmd.derive('Ext.layout.HBox',Ext.layout.FlexBox,{},0,0,0,0,['layout.hbox'],0,[Ext.layout,'HBox'],0);Ext.cmd.derive('Ext.layout.VBox',Ext.layout.FlexBox,{config:{orient:'vertical'}},0,0,0,0,['layout.vbox'],0,[Ext.layout,'VBox'],0);Ext.cmd.derive('Ext.layout.wrapper.Dock',Ext.Base,{config:{direction:'horizontal',element:{className:'x-dock'},bodyElement:{className:'x-dock-body'},innerWrapper:null,sizeState:!1,container:null},positionMap:{top:'start',left:'start',bottom:'end',right:'end'},constructor:function(a){this.items={start:[],end:[]};this.itemsCount=0;this.initConfig(a)},addItems:function(b){var a,d,c;for(a=0,d=b.length;a<d;a++){c=b[a];this.addItem(c)}},addItem:function(a){var l=a.getDocked(),j=this.positionMap[l],k=a.$dockWrapper,i=this.getContainer(),n=i.indexOf(a),o=this.items,e=o[j],d,f,c,m,g,b,h;if(k){k.removeItem(a)}a.$dockWrapper=this;d=a.link('$dockItemWrapper',new Ext.util.Wrapper({className:'x-dock-item'}));a.addCls('x-docked-'+l);f=d.element;for(c=0,m=e.length;c<m;c++){g=e[c];h=i.indexOf(g);if(h>n){b=g.element;e.splice(c,0,a);break}}if(!b){e.push(a);b=this.getBodyElement()}this.itemsCount++;if(j==='start'){f.insertBefore(b)}else {f.insertAfter(b)}d.wrap(a.element);d.bindSize(this.getDirection()==='horizontal'?'width':'height')},removeItem:function(a){var b=a.getDocked(),c=this.items[this.positionMap[b]];a.removeCls('x-docked-'+b);Ext.Array.remove(c,a);a.unlink(['$dockItemWrapper']);a.element.detach();delete a.$dockWrapper;if(--this.itemsCount===0){this.destroy()}},getItemsSlice:function(g){var f=this.getContainer(),h=this.items,e=[],b,a,d,c;for(b=h.start,a=0,d=b.length;a<d;a++){c=b[a];if(f.indexOf(c)>g){e.push(c)}}for(b=h.end,a=0,d=b.length;a<d;a++){c=b[a];if(f.indexOf(c)>g){e.push(c)}}return e},applyElement:function(a){return Ext.Element.create(a)},updateElement:function(a){a.addCls('x-dock-'+this.getDirection())},applyBodyElement:function(a){return Ext.Element.create(a)},updateBodyElement:function(a){this.getElement().append(a)},updateInnerWrapper:function(b,a){var c=this.getBodyElement();if(a&&a.$outerWrapper===this){c.remove(a.getElement());delete a.$outerWrapper}if(b){b.setSizeState(this.getSizeState());b.$outerWrapper=this;c.append(b.getElement())}},updateSizeState:function(b){var a=this.getInnerWrapper();this.getElement().setSizeState(b);if(a){a.setSizeState(b)}},destroy:function(){var a=this,b=a.getInnerWrapper(),c=a.$outerWrapper;if(b){if(c){c.setInnerWrapper(b)}else {b.getElement().replace(a.getElement());delete b.$outerWrapper}}delete a.$outerWrapper;a.setInnerWrapper(null);a.unlink(['_bodyElement','_element']);a.callParent()}},1,0,0,0,0,0,[Ext.layout.wrapper,'Dock'],0);Ext.cmd.derive('Ext.util.ItemCollection',Ext.util.MixedCollection,{alternateClassName:'Ext.ItemCollection',getKey:function(a){return a.getItemId&&a.getItemId()},has:function(a){return this.map.hasOwnProperty(a.getId())}},0,0,0,0,0,0,[Ext.util,'ItemCollection',Ext,'ItemCollection'],0);Ext.cmd.derive('Ext.util.InputBlocker',Ext.Base,{singleton:!0,blockInputs:function(){if(Ext.browser.is.ie){Ext.select('.x-field-text .x-field-input:not(.x-item-disabled) .x-input-el, .x-field-textarea .x-field-input:not(.x-item-disabled) .x-input-el, .x-field-search .x-field-input:not(.x-item-disabled) .x-input-el').each(function(a){if(a.dom.offsetWidth>0){a.dom.setAttribute('disabled',!0);a.dom.setAttribute('overlayfix',!0)}})}},unblockInputs:function(){if(Ext.browser.is.ie){Ext.select('[overlayfix]').each(function(a){a.dom.removeAttribute('disabled');a.dom.removeAttribute('overlayfix')})}}},0,0,0,0,0,0,[Ext.util,'InputBlocker'],0);Ext.cmd.derive('Ext.Mask',Ext.Component,{config:{baseCls:'x-mask',transparent:!1,top:0,left:0,right:0,bottom:0},initialize:function(){var a=this;Ext.Component.prototype.initialize.call(this);a.element.on('tap','onTap',a);a.on('hide','onHide',a)},onHide:function(){Ext.util.InputBlocker.unblockInputs();if(Ext.browser.is.AndroidStock4&&Ext.os.version.getMinor()===0){var a=this.element.getFirstChild();if(a){a.redraw()}}},onTap:function(a){this.fireEvent('tap',this,a)},updateTransparent:function(a){this.toggleCls(this.getBaseCls()+'-transparent',a)}},0,['mask'],['widget','component','mask'],{'widget':!0,'component':!0,'mask':!0},['widget.mask'],0,[Ext,'Mask'],0);Ext.cmd.derive('Ext.mixin.Queryable',Ext.Base,{mixinId:'queryable',isQueryable:!0,query:function(a){a=a||'*';return Ext.ComponentQuery.query(a,this.getQueryRoot())},queryBy:function(g,e){var d=[],c=this.getQueryRoot().getRefItems(!0),b=0,f=c.length,a;for(;b<f;++b){a=c[b];if(g.call(e||a,a)!==!1){d.push(a)}}return d},queryById:function(a){return this.down(Ext.makeIdSelector(a))},child:function(b){var a=this.getQueryRoot().getRefItems();if(b&&b.isComponent){return this.matchById(a,b.getItemId())}if(b){a=Ext.ComponentQuery.query(b,a)}if(a.length){return a[0]}return null},down:function(a){if(a&&a.isComponent){return this.matchById(this.getRefItems(!0),a.getItemId())}a=a||'';return this.query(a)[0]||null},visitPreOrder:function(b,d,c,a){Ext.ComponentQuery._visit(!0,b,this.getQueryRoot(),d,c,a)},visitPostOrder:function(b,d,c,a){Ext.ComponentQuery._visit(!1,b,this.getQueryRoot(),d,c,a)},getRefItems:function(){return []},getQueryRoot:function(){return this},privates:{matchById:function(c,e){var d=c.length,a,b;for(a=0;a<d;++a){b=c[a];if(b.getItemId()===e){return b}}return null}}},0,0,0,0,0,0,[Ext.mixin,'Queryable'],0);Ext.cmd.derive('Ext.mixin.Container',Ext.Mixin,{mixinConfig:{id:'container'},isContainer:!0,config:{referenceHolder:!1},getReferences:function(){Ext.ComponentManager.fixReferences();return this.refs||null},lookup:function(b){var a=this.getReferences();return a&&a[b]||null},lookupReference:function(a){return this.lookup(a)},privates:{attachReference:function(b){var a=this,d,c;if(a.destroying||a.destroyed){return}c=a.refs||(a.refs={});d=b.referenceKey;c[d]=b},clearReference:function(a){var b=this.refs,c=a.referenceKey;if(b&&c){a.viewModelKey=a.referenceKey=b[c]=null}},containerOnAdded:function(b,a){if(a){Ext.ComponentManager.markReferencesDirty()}},containerOnRemoved:function(b){var a;if(!b){a=this.lookupReferenceHolder();if(a){Ext.ComponentManager.markReferencesDirty();a.clearReferences()}}},clearReferences:function(){this.refs=null},initContainerInheritedState:function(b,h){var a=this,d=a.getController(),f=a.getSession(),g=a.getConfig('viewModel',!0),e=a.getReference(),c=a.getReferenceHolder();if(d){b.referenceHolder=d;c=!0}else {if(c){b.referenceHolder=a}}if(c){b.referencePath=''}else {if(e&&a.isParentReference){b.referencePath=a.referenceKey+'.'}}if(f){b.session=f}if(g){b.viewModelPath=''}else {if(e&&a.isParentReference){b.viewModelPath=a.viewModelKey+'.'}}},setupReference:function(a){var b;if(a&&a.charAt(b=a.length-1)==='>'){this.isParentReference=!0;a=a.substring(0,b)}return a}}},0,0,0,0,0,0,[Ext.mixin,'Container'],0);Ext.cmd.derive('Ext.Container',Ext.Component,{alternateClassName:['Ext.lib.Container','Ext.container.Container'],eventedConfig:{activeItem:0},config:{layout:'default',control:null,defaults:null,items:null,autoDestroy:!0,defaultType:null,masked:null,modal:null,hideOnMaskTap:null},manageBorders:!1,constructor:function(b){var a=this;a._items=a.items=new Ext.util.ItemCollection();a.innerItems=[];a.getReferences=a.getFirstReferences;a.onItemAdd=a.onFirstItemAdd;Ext.Component.prototype.constructor.apply(this,arguments);delete a.getReferences;if(a.manageBorders){a.element.addCls('x-managed-borders')}},initialize:function(){Ext.Component.prototype.initialize.call(this);this.getLayout()},getElementConfig:function(){return {reference:'element',classList:['x-container','x-unsized'],children:[{reference:'innerElement',className:'x-inner'}]}},applyMasked:function(b){var c=!0,a;if(b===!1){b=!0;c=!1}a=Ext.factory(b,Ext.Mask,this.getMasked());if(a){this.add(a);a.setHidden(!c)}return a},mask:function(a){this.setMasked(a||!0)},unmask:function(){this.setMasked(!1)},initInheritedState:function(b,a){Ext.Component.prototype.initInheritedState.call(this,b,a);this.initContainerInheritedState(b,a)},onAdded:function(c,d){var b=this,a;(arguments.callee.$previous||Ext.Component.prototype.onAdded).call(this,c,d);b.containerOnAdded(c,d);a=b.getModal();if(a){c.insertBefore(a,b);a.setZIndex(b.getZIndex()-1)}},onRemoved:function(a){this.containerOnRemoved(a);(arguments.callee.$previous||Ext.Component.prototype.onRemoved).call(this,a)},applyModal:function(b,a){var c=!0;if(b===!1){b=!0;c=!1}a=Ext.factory(b,Ext.Mask,a);if(a){a.setVisibility(c)}return a},updateModal:function(a){var b=this.getParent();if(b){if(a){b.insertBefore(a,this);a.setZIndex(this.getZIndex()-1)}else {b.remove(a)}}},updateHideOnMaskTap:function(b){var a=this.getModal();if(a){a[b?'on':'un'].call(a,'tap','hide',this)}},updateZIndex:function(b){var a=this.getModal();Ext.Component.prototype.updateZIndex.apply(this,arguments);if(a){a.setZIndex(b-1)}},updateBaseCls:function(a,e){var b=this,c=b.element,d=b.getUi();if(e){c.removeCls(e);b.innerElement.removeCls(a,null,'inner');if(d){c.removeCls(b.currentUi)}}if(a){c.addCls(a);b.innerElement.addCls(a,null,'inner');if(d){c.addCls(a,null,d);b.currentUi=a+'-'+d}}},applyItems:function(c,d){if(c){var a=this,b;a.getDefaultType();a.getDefaults();if(a.initialized&&d.length>0){a.removeAll()}a.add(c);if(a.initialized){b=a.initialConfig.activeItem||a.config.activeItem||0;a.setActiveItem(b)}}},applyControl:function(c){var b,e,d,a;for(b in c){a=c[b];for(e in a){d=a[e];if(Ext.isObject(d)){d.delegate=b}}a.delegate=b;this.addListener(a)}return c},onFirstItemAdd:function(){var a=this;delete a.onItemAdd;if(a.innerHtmlElement&&!a.getHtml()){a.innerHtmlElement.destroy();delete a.innerHtmlElement}a.on('innerstatechange','onItemInnerStateChange',a,{delegate:'> component'});return a.onItemAdd.apply(a,arguments)},getLayout:function(){var a=this.layout;if(!(a&&a.isLayout)){a=this.link('_layout',this.link('layout',Ext.factory(this._layout||'default',Ext.layout.Default,null,'layout')));a.setContainer(this)}return a},updateDefaultType:function(a){this.defaultItemClass=Ext.ClassManager.getByAlias('widget.'+a)},factoryItem:function(a){var b=this,d=b.getDefaults(),c;if(a.isComponent){c=a;if(d&&a.isInnerItem()&&!b.has(c)){c.setConfig(d,!0)}}else {if(d&&!a.ignoreDefaults){if(!(a.hasOwnProperty('left')&&a.hasOwnProperty('right')&&a.hasOwnProperty('top')&&a.hasOwnProperty('bottom')&&a.hasOwnProperty('docked')&&a.hasOwnProperty('centered'))){a=Ext.mergeIf({},a,d)}}if(!b.$hasCachedDefaultItemClass){b.getDefaultType();b.$hasCachedDefaultItemClass=!0}c=Ext.factory(a,b.defaultItemClass)}return c},add:function(c){var b=this,h=!0,f=[],e,i,a,d,g;if(!Ext.isArray(c)){c=[c];h=!1}for(e=0,i=c.length;e<i;e++){a=c[e];g=a.isWidget;if(!g){a.$initParent=b}a=b.factoryItem(a);b.doAdd(a,g);delete a.$initParent;if(!d&&!b.getActiveItem()&&b.innerItems.length>0&&a.isInnerItem()){d=a}f.push(a)}if(d){b.setActiveItem(d)}return h?f:f[0]},doAdd:function(a,e){var b=this,c=b.getItems(),d;if(!c.has(a)){d=c.length;c.add(a);if(a.isInnerItem()){b.insertInner(a)}a.onAdded(b,!!e);b.onItemAdd(a,d)}},remove:function(b,d){var a=this,e,c;b=a.getComponent(b);e=a.indexOf(b);c=a.getInnerItems();if(d===undefined){d=a.getAutoDestroy()}if(e!==-1){if(!a.removingAll&&c.length>1&&b===a.getActiveItem()){a.on({activeitemchange:'doRemove',scope:a,single:!0,order:'after',args:[b,e,d]});a.doResetActiveItem(c.indexOf(b))}else {a.doRemove(b,e,d);if(c.length===0){a.setActiveItem(null)}}}return b},doResetActiveItem:function(a){if(a===0){this.setActiveItem(1)}else {this.setActiveItem(0)}},doRemove:function(a,d,b){var c=this;c.items.remove(a);if(a.isInnerItem()){c.removeInner(a)}c.onItemRemove(a,d,b);a.onRemoved(a.destroying||b);if(b){a.destroy()}},removeAll:function(d,c){var f=this.items,e=[],g=f.length,b=0,a;if(typeof d!='boolean'){d=this.getAutoDestroy()}c=Boolean(c);this.removingAll=!0;for(;b<g;b++){a=f.getAt(b);if(a&&(c||a.isInnerItem())){this.doRemove(a,b,d);b--;g--}e.push(a)}this.setActiveItem(null);this.removingAll=!1;return e},getAt:function(a){return this.items.getAt(a)},getInnerAt:function(a){return this.innerItems[a]},removeAt:function(b){var a=this.getAt(b);if(a){this.remove(a)}return a},removeInnerAt:function(b){var a=this.getInnerItems()[b];if(a){this.remove(a)}return a},has:function(a){return this.getItems().indexOf(a)!=-1},hasInnerItem:function(a){return this.innerItems.indexOf(a)!=-1},indexOf:function(a){return this.getItems().indexOf(a)},innerIndexOf:function(a){return this.innerItems.indexOf(a)},insertInner:function(e,f){var g=this.getItems().items,a=this.innerItems,d=a.indexOf(e),b=-1,c;if(d!==-1){a.splice(d,1)}if(typeof f=='number'){do{c=g[++f]}while(c&&!c.isInnerItem());if(c){b=a.indexOf(c);a.splice(b,0,e)}}if(b===-1){a.push(e);b=a.length-1}if(d!==-1){this.onInnerItemMove(e,b,d)}return this},onInnerItemMove:Ext.emptyFn,removeInner:function(a){Ext.Array.remove(this.innerItems,a);return this},insert:function(e,a){var b=this,d,c;if(Ext.isArray(a)){for(c=a.length-1;c>=0;c--){b.insert(e,a[c])}return b}d=a.isWidget;if(!d){a.$initParent=b}a=b.factoryItem(a);b.doInsert(e,a,d);delete a.$initParent;return a},doInsert:function(b,a,h){var c=this,e=c.items,g=e.length,d,f;f=a.isInnerItem();if(b>g){b=g}if(e[b-1]===a){return c}d=c.indexOf(a);if(d!==-1){e.removeAt(d)}e.insert(b,a);if(d===-1){a.onAdded(c,!!h)}if(f){c.insertInner(a,b)}if(d!==-1){c.onItemMove(a,b,d)}else {c.onItemAdd(a,b)}},insertFirst:function(a){return this.insert(0,a)},insertLast:function(a){return this.insert(this.getItems().length,a)},insertBefore:function(c,b){var a=this.indexOf(b);if(a!==-1){this.insert(a,c)}return this},insertAfter:function(c,b){var a=this.indexOf(b);if(a!==-1){this.insert(a+1,c)}return this},onItemAdd:function(b,c){var a=this;a.doItemLayoutAdd(b,c);if(a.initialized){if(b.hasListeners.added){b.fireEvent('added',b,a,c)}if(a.hasListeners.add){a.fireEvent('add',a,b,c)}}},doItemLayoutAdd:function(a,c){var b=this.getLayout();if(this.isRendered()&&a.setRendered(!0)){a.fireAction('renderedchange',[this,a,!0],'onItemAdd',b,{args:[a,c]})}else {b.onItemAdd(a,c)}},onItemRemove:function(a,c,d){var b=this;b.doItemLayoutRemove(a,c,d);if(a.hasListeners.removed){a.fireEvent('removed',a,b,c)}if(b.hasListeners.remove){b.fireEvent('remove',b,a,c)}},doItemLayoutRemove:function(a,d,b){var c=this.getLayout();if(this.isRendered()&&a.setRendered(!1)){a.fireAction('renderedchange',[this,a,!1],'onItemRemove',c,{args:[a,d,b]})}else {c.onItemRemove(a,d,b)}},onItemMove:function(a,d,c){var b=this;if(a.isDocked()){a.setDocked(null)}b.doItemLayoutMove(a,d,c);if(a.hasListeners.moved){a.fireEvent('moved',a,b,d,c)}if(b.hasListeners.move){b.fireEvent('move',b,a,d,c)}},doItemLayoutMove:function(c,b,a){this.getLayout().onItemMove(c,b,a)},onItemInnerStateChange:function(a,c){var b=this.getLayout();if(c){this.insertInner(a,this.items.indexOf(a))}else {this.removeInner(a)}b.onItemInnerStateChange.apply(b,arguments)},getInnerItems:function(){return this.innerItems},getDockedItems:function(){var d=this.getItems().items,c=[],e=d.length,b,a;for(a=0;a<e;a++){b=d[a];if(b.isDocked()){c.push(b)}}return c},applyActiveItem:function(a,e){var c=this,d=c.getInnerItems();c.getItems();if(!a&&d.length===0){return 0}else {if(typeof a=='number'){a=Math.max(0,Math.min(a,d.length-1));a=d[a];if(a){return a}else {if(e){return null}}}else {if(a){var b;if(typeof a=='string'){b=c.child(a);a={xtype:a}}if(!b||!b.isComponent){a.$initParent=c;b=c.factoryItem(a)}c.pendingActiveItem=b;if(!c.has(b)){c.add(b)}delete b.$initParent;return b}}}},animateActiveItem:function(d,a){var c=this.getLayout(),b;if(this.activeItemAnimation){this.activeItemAnimation.destroy()}this.activeItemAnimation=a=new Ext.fx.layout.Card(a);if(a&&c.isCard){a.setLayout(c);b=c.getAnimation();if(b){b.disable()}a.on('animationend',function(){if(b){b.enable()}a.destroy()},this)}return this.setActiveItem(d)},updateActiveItem:function(a,b){delete this.pendingActiveItem;if(b){b.fireEvent('deactivate',b,this,a)}if(a){a.fireEvent('activate',a,this,b)}},show:function(){Ext.Component.prototype.show.apply(this,arguments);var a=this.getModal();if(a){a.setHidden(!1)}return this},hide:function(){Ext.Component.prototype.hide.apply(this,arguments);var a=this.getModal();if(a){a.setHidden(!0)}return this},updateHidden:function(b){var a=this.getModal();if(a&&a.getHidden()!==b){a.setHidden(b)}Ext.Component.prototype.updateHidden.apply(this,arguments)},setRendered:function(d){if((arguments.callee.$previous||Ext.Component.prototype.setRendered).apply(this,arguments)){var b=this.items.items,a,c;for(a=0,c=b.length;a<c;a++){b[a].setRendered(d)}return !0}return !1},getRefItems:function(d){var a=this.getItems().items.slice(),e=a.length,b,c;if(d){for(b=0;b<e;b++){c=a[b];if(c.getRefItems){a=a.concat(c.getRefItems(!0))}}}return a},getComponent:function(a){if(typeof a==='number'){return this.getItems().getAt(a)}if(Ext.isObject(a)){a=a.getItemId()}return this.getItems().get(a)},getDockedComponent:function(a){if(Ext.isObject(a)){a=a.getItemId()}var c=this.getDockedItems(),e=c.length,d,b;if(Ext.isNumber(a)){return c[a]}for(b=0;b<e;b++){d=c[b];if(d.id==a){return d}}return !1},destroy:function(){var a=this,b=a.getModal();if(b){b.destroy()}a.removeAll(!0,!0);Ext.Component.prototype.destroy.call(this);Ext.destroy(a.items);a.items=null},privates:{applyReference:function(a){return this.setupReference(a)},getFirstReferences:function(){var a=this;delete a.getReferences;a.getItems();return a.getReferences.apply(a,arguments)}}},1,['container'],['widget','component','container'],{'widget':!0,'component':!0,'container':!0},['widget.container'],[[Ext.mixin.Queryable.prototype.mixinId||Ext.mixin.Queryable.$className,Ext.mixin.Queryable],[Ext.mixin.Container.prototype.mixinId||Ext.mixin.Container.$className,Ext.mixin.Container]],[Ext,'Container',Ext.lib,'Container',Ext.container,'Container'],function(){this.prototype.defaultItemClass=this});Ext.cmd.derive('Ext.LoadMask',Ext.Mask,{config:{message:'Loading...',cls:'x-loading-mask',messageCls:'x-mask-message',indicator:!0},getTemplate:function(){var a='x-';return [{reference:'innerElement',cls:a+'mask-inner',children:[{reference:'indicatorElement',cls:a+'loading-spinner-outer',children:[{cls:a+'loading-spinner',children:[{tag:'span',cls:a+'loading-top'},{tag:'span',cls:a+'loading-right'},{tag:'span',cls:a+'loading-bottom'},{tag:'span',cls:a+'loading-left'}]}]},{reference:'messageElement'}]}]},updateMessage:function(a){var b='x-has-message';if(a){this.addCls(b)}else {this.removeCls(b)}this.messageElement.setHtml(a)},updateMessageCls:function(a,b){this.messageElement.replaceCls(b,a)},updateIndicator:function(a){this[a?'removeCls':'addCls']('x-indicator-hidden')}},0,['loadmask'],['widget','component','mask','loadmask'],{'widget':!0,'component':!0,'mask':!0,'loadmask':!0},['widget.loadmask'],0,[Ext,'LoadMask'],0);Ext.cmd.derive('Ext.viewport.Default',Ext.Container,{PORTRAIT:'portrait',LANDSCAPE:'landscape',stripQuoteRe:/"/g,config:{autoMaximize:!1,autoBlurInput:!0,preventPanning:!0,preventZooming:!1,autoRender:!0,layout:'card',width:'100%',height:'100%',useBodyElement:!0,menus:{},orientation:null},getElementConfig:function(){var a=Ext.Container.prototype.getElementConfig.apply(this,arguments);if(!Ext.feature.has.MatchMedia){a.children.unshift({reference:'orientationElement',className:'x-orientation-inspector'})}return a},isReady:!1,isViewport:!0,isMaximizing:!1,id:'ext-viewport',isInputRegex:/^(input|textarea|select|a)$/i,isInteractiveWebComponentRegEx:/^(audio|video)$/i,focusedElement:null,fullscreenItemCls:'x-fullscreen',constructor:function(d){var a=this,c=Ext.Component,b=Ext.scroll.DomScroller;if(b.document){b.document=b.document.destroy()}a.doPreventPanning=a.doPreventPanning.bind(a);a.doPreventZooming=a.doPreventZooming.bind(a);a.doBlurInput=a.doBlurInput.bind(a);a.maximizeOnEvents=['ready','orientationchange'];window.devicePixelRatio=window.devicePixelRatio||1;Ext.Container.prototype.constructor.call(this,d);a.windowWidth=a.getWindowWidth();a.windowHeight=a.getWindowHeight();a.windowOuterHeight=a.getWindowOuterHeight();a.stretchHeights=a.stretchHeights||{};if(Ext.feature.has.OrientationChange){a.addWindowListener('orientationchange',a.onOrientationChange.bind(a))}Ext.onReady(function(){a.addWindowListener('resize',a.onResize.bind(a))});document.addEventListener('focus',a.onElementFocus.bind(a),!0);document.addEventListener('blur',a.onElementBlur.bind(a),!0);Ext.onDocumentReady(a.onDomReady,a);if(!c.on){Ext.util.Observable.observe(c)}c.on('fullscreen','onItemFullscreenChange',a);return a},initialize:function(){var a=this;a.addMeta('apple-mobile-web-app-capable','yes');a.addMeta('apple-touch-fullscreen','yes');Ext.Container.prototype.initialize.call(this)},initInheritedState:function(c,d){var b=this,a=Ext.rootInheritedState;if(c!==a){b.initInheritedState(b.inheritedState=a,b.inheritedStateInner=Ext.Object.chain(a))}else {Ext.Container.prototype.initInheritedState.call(this,c,d)}},onAppLaunch:function(){var a=this;if(!a.isReady){a.onDomReady()}},onDomReady:function(){var a=this;if(a.isReady){return}a.isReady=!0;a.updateSize();a.onReady();a.fireEvent('ready',a);Ext.GlobalEvents.fireEvent('viewportready',a)},onReady:function(){if(this.getAutoRender()){this.render()}if(Ext.browser.name==='ChromeiOS'){this.setHeight('-webkit-calc(100% - '+(window.outerHeight-window.innerHeight)/2+'px)')}},onElementFocus:function(a){this.focusedElement=a.target},onElementBlur:function(){this.focusedElement=null},render:function(){if(!this.rendered){var g=Ext.getBody(),b='x-',a=[],c=Ext.os,f=c.name.toLowerCase(),h=Ext.browser.name.toLowerCase(),e=c.version.getMajor(),d;this.renderTo(g);a.push(b+c.deviceType.toLowerCase());if(c.is.iPad){a.push(b+'ipad')}a.push(b+f);a.push(b+h);if(Ext.toolkit){a.push(b+Ext.toolkit)}if(e){a.push(b+f+'-'+e)}if(c.is.BlackBerry){a.push(b+'bb');if(Ext.browser.userAgent.match(/Kbd/gi)){a.push(b+'bb-keyboard')}}if(Ext.browser.is.WebKit){a.push(b+'webkit')}if(Ext.browser.is.WebView){a.push(b+'webview')}if(Ext.browser.is.Standalone){a.push(b+'standalone')}if(Ext.browser.is.AndroidStock){a.push(b+'android-stock')}if(Ext.browser.is.GoogleGlass){a.push(b+'google-glass')}this.setOrientation(this.determineOrientation());a.push(b+this.getOrientation());g.addCls(a);d=Ext.theme;if(d&&d.getDocCls){Ext.fly(document.documentElement).addCls(d.getDocCls())}}},updateAutoBlurInput:function(a){var b=Ext.feature.has.TouchEvents?'touchstart':'mousedown';this.toggleWindowListener(a,b,this.doBlurInput,!1)},applyAutoMaximize:function(a){return Ext.browser.is.WebView?!1:a},updateAutoMaximize:function(b){var a=this;if(b){a.on('ready','doAutoMaximizeOnReady',a,{single:!0});a.on('orientationchange','doAutoMaximizeOnOrientationChange',a)}else {a.un('ready','doAutoMaximizeOnReady',a);a.un('orientationchange','doAutoMaximizeOnOrientationChange',a)}},updatePreventPanning:function(a){this.toggleWindowListener(a,'touchmove',this.doPreventPanning,!1)},updatePreventZooming:function(a){var b=Ext.feature.has.TouchEvents?'touchstart':'mousedown';this.toggleWindowListener(a,b,this.doPreventZooming,!1)},doAutoMaximizeOnReady:function(){var a=this;a.isMaximizing=!0;a.on('maximize',function(){a.isMaximizing=!1;a.updateSize();a.fireEvent('ready',a)},a,{single:!0});a.maximize()},doAutoMaximizeOnOrientationChange:function(){var a=this;a.isMaximizing=!0;a.on('maximize',function(){a.isMaximizing=!1;a.updateSize()},a,{single:!0});a.maximize()},doBlurInput:function(c){var b=c.target,a=this.focusedElement;if(a&&a.blur&&a.nodeName.toUpperCase()!='BODY'&&!this.isInputRegex.test(b.tagName)){delete this.focusedElement;a.blur()}},doPreventPanning:function(a){var b=a.target,c;if(this.isInteractiveWebComponentRegEx.test(b.tagName)&&a.touches&&a.touches.length>0){c=a.touches[0];if(c&&c.target&&this.isInputRegex.test(c.target.tagName)){return}}if(b&&b.nodeType===1&&!this.isInputRegex.test(b.tagName)){a.preventDefault()}},doPreventZooming:function(a){if('button' in a&&a.button!==0){return}var b=a.target,d=this.isInputRegex,c;if(this.isInteractiveWebComponentRegEx.test(b.tagName)&&a.touches&&a.touches.length>0){c=a.touches[0];if(c&&c.target&&d.test(c.target.tagName)){return}}if(b&&b.nodeType===1&&!d.test(b.tagName)){a.preventDefault()}},addWindowListener:function(b,c,a){window.addEventListener(b,c,Boolean(a))},removeWindowListener:function(b,c,a){window.removeEventListener(b,c,Boolean(a))},supportsOrientation:function(){return Ext.feature.has.Orientation},supportsMatchMedia:function(){return Ext.feature.has.MatchMedia},onOrientationChange:function(){this.setOrientation(this.determineOrientation())},determineOrientation:function(){var a=this,b;if(a.supportsOrientation()){b=a.getWindowOrientation();if(Math.abs(b)===90||b===270){return a.LANDSCAPE}else {return a.PORTRAIT}}else {if(a.supportsMatchMedia()){return window.matchMedia('(orientation : landscape)').matches?a.LANDSCAPE:a.PORTRAIT}else {if(a.orientationElement){return a.orientationElement.getStyle('content').replace(a.stripQuoteRe,'')}}}return null},updateOrientation:function(b,a){if(a){this.fireOrientationChangeEvent(b,a)}},fireOrientationChangeEvent:function(b,d){var a=this,e=Ext.getBody(),c='x-';e.replaceCls(c+d,c+b);a.updateSize();a.fireEvent('orientationchange',a,b,a.getWidth(),a.getHeight())},onResize:function(){var a=this;a.updateSize();a.setOrientation(a.determineOrientation())},updateSize:function(c,b){var a=this;a.windowWidth=c!==undefined?c:a.getWindowWidth();a.windowHeight=b!==undefined?b:a.getWindowHeight();return a},waitUntil:function(g,d,e,a,b){if(!a){a=50}if(!b){b=2000}var c=this,f=0;Ext.defer(function repeat(){f+=a;if(g.call(c)===!0){if(d){d.call(c)}}else {if(f>=b){if(e){e.call(c)}}else {Ext.defer(repeat,a)}}},a)},maximize:function(){this.fireMaximizeEvent()},fireMaximizeEvent:function(){this.updateSize();this.fireEvent('maximize',this)},updateHeight:function(a,b){Ext.getBody().setHeight(a);Ext.Container.prototype.updateHeight.call(this,a,b)},updateWidth:function(a,b){Ext.getBody().setWidth(a);Ext.Container.prototype.updateWidth.call(this,a,b)},scrollToTop:function(){window.scrollTo(0,-1)},getWindowWidth:function(){return window.innerWidth},getWindowHeight:function(){return window.innerHeight},getWindowOuterHeight:function(){return window.outerHeight},getWindowOrientation:function(){return window.orientation},getSize:function(){return {width:this.windowWidth,height:this.windowHeight}},onItemFullscreenChange:function(a){a.addCls(this.fullscreenItemCls);this.add(a)},setMenu:function(a,d){d=d||{};var b=this,c=d.side,e;if(Ext.os.is.iOS&&!b.hasiOSOrientationFix){b.hasiOSOrientationFix=!0;b.on('orientationchange',function(){window.scrollTo(0,0)},b)}e=b.getMenus();if(!e){e={}}if(!b.addedSwipeListener){b.attachSwipeListeners();b.addedSwipeListener=!0}if(!a.isComponent){if(!a.xclass&&!a.xtype){a=b.getMenuCfg(a,c)}a=Ext.create(a)}e[c]=a;a.$reveal=Boolean(d.reveal);a.$cover=d.cover!==!1&&!a.$reveal;a.$side=c;b.fixMenuSize(a,c);if(c=='left'){a.setLeft(0);a.setRight(null);a.setTop(0);a.setBottom(0)}else {if(c=='right'){a.setLeft(null);a.setRight(0);a.setTop(0);a.setBottom(0)}else {if(c=='top'){a.setLeft(0);a.setRight(0);a.setTop(0);a.setBottom(null)}else {if(c=='bottom'){a.setLeft(0);a.setRight(0);a.setTop(null);a.setBottom(0)}}}}b.setMenus(e);return a},attachSwipeListeners:function(){var a=this;a.element.on({tap:a.onTap,swipestart:a.onSwipeStart,edgeswipestart:a.onEdgeSwipeStart,edgeswipe:a.onEdgeSwipe,edgeswipeend:a.onEdgeSwipeEnd,scope:a})},getMenuCfg:function(a,b){return Ext.apply({xtype:'menu'},a)},removeMenu:function(b){var a=this.getMenus()||{},c=a[b];if(c){this.hideMenu(b)}delete a[b];this.setMenus(a)},fixMenuSize:function(b,a){if(a=='top'||a=='bottom'){b.setWidth('100%')}else {if(a=='left'||a=='right'){b.setHeight('100%')}}},showMenu:function(b){var f=this,i=f.getMenus(),a=i[b],e,h,g,d,c;if(!a||a.isAnimating){return}f.hideOtherMenus(b);e={translateX:0,translateY:0};h={translateX:0,translateY:0};g={translateX:0,translateY:0};d={translateX:0,translateY:0};if(a.$reveal){Ext.getBody().insertFirst(a.element)}else {Ext.Viewport.add(a)}a.show();a.addCls('x-'+b);c=b=='left'||b=='right'?a.element.getWidth():a.element.getHeight();if(b=='left'){e.translateX=-c;d.translateX=c}else {if(b=='right'){e.translateX=c;d.translateX=-c}else {if(b=='top'){e.translateY=-c;d.translateY=c}else {if(b=='bottom'){e.translateY=c;d.translateY=-c}}}}if(a.$reveal){if(Ext.browser.getPreferredTranslationMethod()!='scrollposition'){a.translate(0,0)}}else {a.translate(e.translateX,e.translateY)}if(a.$cover){a.getTranslatable().on('animationend',function(){a.isAnimating=!1},f,{single:!0});a.translate(h.translateX,h.translateY,{preserveEndState:!0,duration:200})}else {f.translate(g.translateX,g.translateY);f.getTranslatable().on('animationend',function(){a.isAnimating=!1},f,{single:!0});f.translate(d.translateX,d.translateY,{preserveEndState:!0,duration:200})}a.isAnimating=!0},hideMenu:function(c,g){var f=this,h=this.getMenus(),a=h[c],b,d,e;g=g!==!1;if(!a||(a.isHidden()||a.isAnimating)){return}b={translateX:0,translateY:0};d={translateX:0,translateY:0};e=c=='left'||c=='right'?a.element.getWidth():a.element.getHeight();if(c=='left'){b.translateX=-e}else {if(c=='right'){b.translateX=e}else {if(c=='top'){b.translateY=-e}else {if(c=='bottom'){b.translateY=e}}}}if(a.$cover){if(g){a.getTranslatable().on('animationend',function(){a.isAnimating=!1;a.hide()},f,{single:!0});a.translate(b.translateX,b.translateY,{preserveEndState:!0,duration:200})}else {a.translate(b.translateX,b.translateY);a.hide()}}else {if(g){f.getTranslatable().on('animationend',function(){a.isAnimating=!1;a.hide()},f,{single:!0});f.translate(d.translateX,d.translateY,{preserveEndState:!0,duration:200})}else {f.translate(d.translateX,d.translateY);a.hide()}}},hideAllMenus:function(b){var c=this.getMenus(),a;for(a in c){this.hideMenu(a,b)}},hideOtherMenus:function(d,b){var c=this.getMenus(),a;for(a in c){if(d!==a){this.hideMenu(a,b)}}},toggleMenu:function(a){var b=this.getMenus(),c;if(b[a]){c=b[a];if(c.isHidden()){this.showMenu(a)}else {this.hideMenu(a)}}},sideForDirection:function(a){if(a==='left'){return 'right'}else {if(a==='right'){return 'left'}else {if(a=='up'){return 'bottom'}else {if(a=='down'){return 'top'}}}}},sideForSwipeDirection:function(a){if(a=='up'){return 'top'}else {if(a=='down'){return 'bottom'}}return a},onTap:function(a){},onSwipeStart:function(b){var a=this.sideForSwipeDirection(b.direction);this.hideMenu(a)},onEdgeSwipeStart:function(l){var d=this,c=d.sideForDirection(l.direction),i=d.getMenus(),a=i[c],k,j,e,b,g,f,h;if(!a||!a.isHidden()){return}for(k in i){j=i[k];if(j.isHidden()!==!1){return}}d.$swiping=!0;d.hideAllMenus(!1);if(a.$reveal){Ext.getBody().insertFirst(a.element)}else {Ext.Viewport.add(a)}a.show();e=c=='left'||c=='right'?a.element.getWidth():a.element.getHeight();b={translateX:0,translateY:0};g={translateX:0,translateY:0};if(c=='left'){b.translateX=-e}else {if(c=='right'){b.translateX=e}else {if(c=='top'){b.translateY=-e}else {if(c=='bottom'){b.translateY=e}}}}f='webkitTransform' in document.createElement('div').style?'webkitTransform':'transform';h=a.element.dom.style[f];if(h){a.element.dom.style[f]=''}if(a.$reveal){if(Ext.browser.getPreferredTranslationMethod()!='scrollposition'){a.translate(0,0)}}else {a.translate(b.translateX,b.translateY)}if(!a.$cover){if(h){d.innerElement.dom.style[f]=''}d.translate(g.translateX,g.translateY)}},onEdgeSwipe:function(i){var g=this,c=g.sideForDirection(i.direction),f=g.getMenus()[c],h,b,a,e,d;if(!f||!g.$swiping){return}h=c=='left'||c=='right'?f.element.getWidth():f.element.getHeight();e=Math.min(i.distance-h,0);d=Math.min(i.distance,h);b={translateX:0,translateY:0};a={translateX:0,translateY:0};if(c=='left'){b.translateX=e;a.translateX=d}else {if(c=='right'){b.translateX=-e;a.translateX=-d}else {if(c=='top'){b.translateY=e;a.translateY=d}else {if(c=='bottom'){b.translateY=-e;a.translateY=-d}}}}if(f.$cover){f.translate(b.translateX,b.translateY)}else {g.translate(a.translateX,a.translateY)}},onEdgeSwipeEnd:function(k){var f=this,a=f.sideForDirection(k.direction),c=f.getMenus()[a],b=!1,j,i,h,g,e,d;if(!c){return}j=a=='left'||a=='right'?c.element.getWidth():c.element.getHeight();i=k.flick?k.flick.velocity:0;if(a=='right'){if(i.x>0){b=!0}}else {if(a=='left'){if(i.x<0){b=!0}}else {if(a=='top'){if(i.y<0){b=!0}}else {if(a=='bottom'){if(i.y>0){b=!0}}}}}h=b?j:0;g=b?0:-j;e={translateX:0,translateY:0};d={translateX:0,translateY:0};if(a=='left'){e.translateX=-h;d.translateX=-g}else {if(a=='right'){e.translateX=h;d.translateX=g}else {if(a=='top'){e.translateY=-h;d.translateY=-g}else {if(a=='bottom'){e.translateY=h;d.translateY=g}}}}if(c.$cover){c.getTranslatable().on('animationend',function(){if(b){c.hide()}},f,{single:!0});c.translate(e.translateX,e.translateY,{preserveEndState:!0,duration:200})}else {f.getTranslatable().on('animationend',function(){if(b){c.hide()}},f,{single:!0});f.translate(d.translateX,d.translateY,{preserveEndState:!0,duration:200})}f.$swiping=!1},privates:{addMeta:function(c,b){var a=document.createElement('meta');a.setAttribute('name',c);a.setAttribute('content',b);Ext.getHead().append(a)},doAddListener:function(b,d,c,f,h,g,e){var a=this;if(b==='ready'&&a.isReady&&!a.isMaximizing){d.call(c);return a}Ext.Container.prototype.doAddListener.call(this,b,d,c,f,h,g,e)},toggleWindowListener:function(d,b,c,a){if(d){this.addWindowListener(b,c,a)}else {this.removeWindowListener(b,c,a)}}}},1,['viewport'],['widget','component','container','viewport'],{'widget':!0,'component':!0,'container':!0,'viewport':!0},['widget.viewport'],0,[Ext.viewport,'Default'],0);Ext.cmd.derive('Ext.viewport.Ios',Ext.viewport.Default,{isFullscreen:function(){return this.isHomeScreen()},isHomeScreen:function(){return window.navigator.standalone===!0},constructor:function(){Ext.viewport.Default.prototype.constructor.apply(this,arguments);if(this.getAutoMaximize()&&!this.isFullscreen()){this.addWindowListener('touchstart',this.onTouchStart.bind(this))}},maximize:function(){if(this.isFullscreen()){return Ext.viewport.Default.prototype.maximize.call(this)}var b=this.stretchHeights,c=this.getOrientation(),d=this.getWindowHeight(),a=b[c];if(window.scrollY>0){this.scrollToTop();if(!a){b[c]=a=this.getWindowHeight()}this.setHeight(a);this.fireMaximizeEvent()}else {if(!a){a=this.getScreenHeight()}this.setHeight(a);this.waitUntil(function(){this.scrollToTop();return d!==this.getWindowHeight()},function(){if(!b[c]){a=b[c]=this.getWindowHeight();this.setHeight(a)}this.fireMaximizeEvent()},function(){a=b[c]=this.getWindowHeight();this.setHeight(a);this.fireMaximizeEvent()},50,1000)}},getScreenHeight:function(){return window.screen[this.getOrientation()===this.PORTRAIT?'height':'width']},onElementFocus:function(){if(this.getAutoMaximize()&&!this.isFullscreen()){clearTimeout(this.scrollToTopTimer)}Ext.viewport.Default.prototype.onElementFocus.apply(this,arguments)},onElementBlur:function(){if(this.getAutoMaximize()&&!this.isFullscreen()){this.scrollToTopTimer=Ext.defer(this.scrollToTop,500)}Ext.viewport.Default.prototype.onElementBlur.apply(this,arguments)},onTouchStart:function(){if(this.focusedElement===null){this.scrollToTop()}},scrollToTop:function(){window.scrollTo(0,0)}},1,0,['widget','component','container','viewport'],{'widget':!0,'component':!0,'container':!0,'viewport':!0},0,0,[Ext.viewport,'Ios'],function(){if(!Ext.os.is.iOS){return}if(Ext.os.version.lt('3.2')){this.override({constructor:function(){var a=this.stretchHeights={};a[this.PORTRAIT]=416;a[this.LANDSCAPE]=268;return this.callOverridden(arguments)}})}if(Ext.os.version.lt('5')){this.override({fieldMaskClsTest:'-field-mask',doPreventZooming:function(b){var a=b.target;if(a&&a.nodeType===1&&!this.isInputRegex.test(a.tagName)&&a.className.indexOf(this.fieldMaskClsTest)==-1){b.preventDefault()}}})}if(Ext.os.is.iPad){this.override({isFullscreen:function(){return !0}})}if(Ext.os.version.gtEq('7')&&Ext.os.version.lt('8')){if(Ext.os.deviceType==='Tablet'||!Ext.browser.is.Safari||window.navigator.standalone){this.override({constructor:function(){var a={},b={},f=this.determineOrientation(),c=window.screen.height,d=window.screen.width,e=f===this.PORTRAIT?c-window.innerHeight:d-window.innerHeight;a[this.PORTRAIT]=c-e;a[this.LANDSCAPE]=d-e;b[this.PORTRAIT]=d;b[this.LANDSCAPE]=c;this.stretchHeights=a;this.stretchWidths=b;this.callOverridden(arguments);this.on('ready',this.setViewportSizeToAbsolute,this);this.on('orientationchange',this.setViewportSizeToAbsolute,this)},getWindowHeight:function(){return this.stretchHeights[this.getOrientation()]},getWindowWidth:function(){return this.stretchWidths[this.getOrientation()]},setViewportSizeToAbsolute:function(){this.setWidth(this.getWindowWidth());this.setHeight(this.getWindowHeight())}})}if(Ext.os.deviceType==='Tablet'){this.override({constructor:function(){this.callOverridden(arguments);window.addEventListener('scroll',function(){if(window.scrollX!==0){window.scrollTo(0,window.scrollY)}},!1)},setViewportSizeToAbsolute:function(){window.scrollTo(0,0);this.callOverridden(arguments)},onElementBlur:function(){this.callOverridden(arguments);if(window.scrollY!==0){window.scrollTo(0,0)}}})}}});Ext.cmd.derive('Ext.viewport.Android',Ext.viewport.Default,{config:{translatable:{translationMethod:'csstransform'}},constructor:function(){Ext.viewport.Default.prototype.constructor.apply(this,arguments);this.on({orientationchange:'hideKeyboardIfNeeded',scope:this,priority:1001})},getWindowWidth:function(){return this.element.getWidth()},getWindowHeight:function(){return this.element.getHeight()},getDummyInput:function(){var a=this.dummyInput,c=this.focusedElement,b=Ext.fly(c).getBox();if(!a){this.dummyInput=a=document.createElement('input');a.style.position='absolute';a.style.opacity='0';a.style.pointerEvents='none';document.body.appendChild(a)}a.style.left=b.left+'px';a.style.top=b.top+'px';a.style.display='';return a},doBlurInput:function(d){var c=d.target,b=this.focusedElement,a;if(b&&!this.isInputRegex.test(c.tagName)){a=this.getDummyInput();delete this.focusedElement;a.focus();Ext.defer(function(){a.style.display='none'},100)}},hideKeyboardIfNeeded:function(){var a=this.focusedElement;if(a){delete this.focusedElement;if(Ext.os.version.lt('4')){a.style.display='none'}else {a.blur()}Ext.defer(function(){a.style.display=''},1000)}},doFireOrientationChangeEvent:function(){this.orientationChanging=!0;this.waitUntil(function(){return this.getWindowOuterHeight()!==this.windowOuterHeight},function(){this.windowOuterHeight=this.getWindowOuterHeight();this.updateSize();this.orientationChanging=!1},function(){});return this},getActualWindowOuterHeight:function(){return Math.round(this.getWindowOuterHeight()/window.devicePixelRatio)},maximize:function(){var b=this.stretchHeights,c=this.orientation,a;a=b[c];if(!a){b[c]=a=this.getActualWindowOuterHeight()}if(!this.addressBarHeight){this.addressBarHeight=a-this.getWindowHeight()}this.setHeight(a);var d=Ext.Function.bind(this.isHeightMaximized,this,[a]);this.scrollToTop();this.waitUntil(d,this.fireMaximizeEvent,this.fireMaximizeEvent)},isHeightMaximized:function(a){this.scrollToTop();return this.getWindowHeight()===a},doPreventZooming:function(a){if('button' in a&&a.button!==0){return}var b=a.target;if(b&&b.nodeType===1&&!this.isInputRegex.test(b.tagName)&&!this.focusedElement){a.preventDefault()}}},1,0,['widget','component','container','viewport'],{'widget':!0,'component':!0,'container':!0,'viewport':!0},0,0,[Ext.viewport,'Android'],function(){if(!Ext.os.is.Android){return}var a=Ext.os.version,b=Ext.browser.userAgent,c=/(htc|desire|incredible|ADR6300)/i.test(b)&&a.lt('2.3');if(c){this.override({constructor:function(a){if(!a){a={}}a.autoMaximize=!1;this.watchDogTick=Ext.Function.bind(this.watchDogTick,this);Ext.interval(this.watchDogTick,1000);return this.callParent([a])},watchDogTick:function(){this.watchDogLastTick=Ext.Date.now()},doPreventPanning:function(){var c=Ext.Date.now(),b=this.watchDogLastTick,a=c-b;if(a>=2000){return}return this.callParent(arguments)},doPreventZooming:function(){var c=Ext.Date.now(),b=this.watchDogLastTick,a=c-b;if(a>=2000){return}return this.callParent(arguments)}})}if(a.match('2')){this.override({onReady:function(){this.addWindowListener('resize',Ext.Function.bind(this.onWindowResize,this));this.callParent(arguments)},scrollToTop:function(){document.body.scrollTop=100},onWindowResize:function(){var c=this.windowWidth,a=this.windowHeight,d=this.getWindowWidth(),b=this.getWindowHeight();if(this.getAutoMaximize()&&!this.isMaximizing&&!this.orientationChanging&&window.scrollY===0&&c===d&&b<a&&(b>=a-this.addressBarHeight||!this.focusedElement)){this.scrollToTop()}}})}else {if(a.gtEq('3.1')){this.override({isHeightMaximized:function(a){this.scrollToTop();return this.getWindowHeight()===a-1}})}else {if(a.match('3')){this.override({isHeightMaximized:function(){this.scrollToTop();return !0}})}}}if(a.gtEq('4')){this.override({doBlurInput:Ext.emptyFn})}});Ext.cmd.derive('Ext.viewport.WindowsPhone',Ext.viewport.Default,{alternateClassName:'Ext.viewport.WP',config:{translatable:{translationMethod:'csstransform'}},initialize:function(){var a=function(c){var b=c.srcElement.nodeName.toUpperCase(),a=['INPUT','TEXTAREA'];if(a.indexOf(b)==-1){return !1}};document.body.addEventListener('onselectstart',a);this.addMeta('msapplication-tap-highlight','no');Ext.viewport.Default.prototype.initialize.call(this)},supportsOrientation:function(){return !1},onResize:function(){this.waitUntil(function(){var d=this.windowWidth,c=this.windowHeight,f=this.getWindowWidth(),e=this.getWindowHeight(),a=this.getOrientation(),b=this.determineOrientation();return d!==f&&c!==e&&a!==b},function(){var a=this.getOrientation(),b=this.determineOrientation();this.fireOrientationChangeEvent(b,a)},Ext.emptyFn,250)}},0,0,['widget','component','container','viewport'],{'widget':!0,'component':!0,'container':!0,'viewport':!0},0,0,[Ext.viewport,'WindowsPhone',Ext.viewport,'WP'],0);Ext.cmd.derive('Ext.viewport.Viewport',Ext.Base,{singleton:!0,setup:function(b){var c=Ext.os.name,a;switch(c){case 'Android':a=Ext.browser.name==='ChromeMobile'?'Default':'Android';break;case 'iOS':a='Ios';break;case 'Windows':a=Ext.browser.name==='IE'?'WindowsPhone':'Default';break;case 'WindowsPhone':a='WindowsPhone';break;default:a='Default';break;}Ext.Viewport=Ext.create('Ext.viewport.'+a,b)}},0,0,0,0,0,0,[Ext.viewport,'Viewport'],0);Ext.define('Ext.overrides.app.Application',{override:'Ext.app.Application',initMainView:function(){var c=this,b,a;c.viewport=b=Ext.Viewport;arguments.callee.$previous.call(this);a=c.getMainView();b.onAppLaunch();if(a){b.add(a)}}});Ext.cmd.derive('Ext.app.domain.View',Ext.app.EventDomain,{isInstance:!0,constructor:function(a){Ext.app.EventDomain.prototype.constructor.apply(this,arguments);this.controller=a;this.monitoredClasses=[Ext.Component]},match:function(c,b,d){var a=!1;if(b==='#'){a=d===c.getController()}else {a=c.is(b)}return a},destroy:function(){this.controller=null;Ext.app.EventDomain.prototype.destroy.call(this)}},1,0,0,0,0,0,[Ext.app.domain,'View'],0);Ext.cmd.derive('Ext.app.ViewController',Ext.app.BaseController,{isViewController:!0,factoryConfig:{type:'controller'},config:{closeViewAction:'destroy'},view:null,constructor:function(){this.compDomain=new Ext.app.domain.View(this);Ext.app.BaseController.prototype.constructor.apply(this,arguments)},beforeInit:Ext.emptyFn,init:Ext.emptyFn,initViewModel:Ext.emptyFn,destroy:function(){var a=this,b=a.compDomain;if(b){b.unlisten(a);b.destroy()}a.compDomain=a.view=null;Ext.app.BaseController.prototype.destroy.call(this)},closeView:function(){var b=this.getView(),a;if(b){a=this.getCloseViewAction();b[a]()}},control:function(a,c){var b=a;if(Ext.isString(a)){b={};b[a]=c}this.compDomain.listen(b,this)},listen:function(a,c){var b=a.component;if(b){a=Ext.apply({},a);delete a.component;this.control(b)}this.callParent([a,c])},applyId:function(a){if(!a){a=Ext.id(null,'controller-')}return a},getReferences:function(){var a=this.view;return a&&a.getReferences()},getView:function(){return this.view},lookup:function(b){var a=this.view;return a&&a.lookup(b)},lookupReference:function(a){return this.lookup(a)},getSession:function(){var a=this.view;return a&&a.lookupSession()},getViewModel:function(){var a=this.view;return a&&a.lookupViewModel()},getStore:function(b){var a=this.getViewModel();return a?a.getStore(b):null},fireViewEvent:function(e,d){var a=this.view,c=!1,b=arguments;if(a){if(a!==d){b=Ext.Array.slice(b);b.splice(1,0,a)}c=a.fireEvent.apply(a,b)}return c},privates:{view:null,attachReference:function(b){var a=this.view;if(a){a.attachReference(b)}},clearReference:function(b){var a=this.view;if(a){a.clearReference(b)}},clearReferences:function(){var a=this.view;if(a){a.clearReferences()}},setView:function(a){this.view=a;if(!this.beforeInit.$nullFn){this.beforeInit(a)}}}},1,0,0,0,0,[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.app,'ViewController'],0);Ext.cmd.derive('Ext.util.Bag',Ext.Base,{isBag:!0,constructor:function(){this.items=[];this.map={}},generation:0,length:0,add:function(b){var a=this,g=a.getKey(b),f=a.map,c=a.items,d=f[g],e;if(d===undefined){c.push(b);f[g]=a.length++;e=b}else {e=c[d];c[d]=b}++a.generation;return e},clear:function(){var a=this,b=a.generation||a.length,c=b?a.items:[];if(b){a.items=[];a.length=0;a.map={};++a.generation}return c},clone:function(){var a=this,b=new a.self(),c=a.length;if(c){Ext.apply(b.map,a.map);b.items=a.items.slice();b.length=a.length}return b},contains:function(a){var d=!1,c=this.map,b;if(a!=null){b=this.getKey(a);if(b in c){d=this.items[c[b]]===a}}return d},containsKey:function(a){return a in this.map},destroy:function(){this.items=this.map=null;this.callParent()},getAt:function(a){var b=null;if(a<this.length){b=this.items[a]}return b},getByKey:function(a){var b=this.map,c=null;if(a in b){c=this.items[b[a]]}return c},getCount:function(){return this.length},getKey:function(a){return a.id||a.getId()},remove:function(h){var a=this,e=a.map,c=a.items,f=null,b,g,d;if(a.length){b=e[g=a.getKey(h)];if(b!==undefined){delete e[g];f=c[b];d=c.pop();if(b<--a.length){c[b]=d;e[a.getKey(d)]=b}++a.generation}}return f},removeByKey:function(b){var a=this.getByKey(b);if(a){this.remove(a)}return a||null},sort:function(e){var a=this,c=a.items,b=c.length,d;if(b){Ext.Array.sort(c,e);a.map={};while(b-->0){d=c[b];a.map[a.getKey(d)]=b}++a.generation}}},1,0,0,0,0,0,[Ext.util,'Bag'],0);Ext.cmd.derive('Ext.util.Scheduler',Ext.Base,{busyCounter:0,lastBusyCounter:0,destroyed:!1,firing:null,notifyIndex:-1,nextId:0,orderedItems:null,passes:0,scheduledCount:0,validIdRe:null,config:{cycleLimit:5,preSort:null,tickDelay:5},suspendOnNotify:!0,constructor:function(a){this.mixins.observable.constructor.call(this,a);this.items=new Ext.util.Bag()},destroy:function(){var a=this,b=a.timer;if(b){window.clearTimeout(b);a.timer=null}a.items.destroy();a.items=a.orderedItems=null;a.callParent()},add:function(c){var a=this,b=a.items;if(b===a.firing){a.items=b=b.clone()}c.id=c.id||++a.nextId;c.scheduler=a;b.add(c);if(!a.sortMap){a.orderedItems=null}},remove:function(c){var a=this,b=a.items;if(a.destroyed){return}if(b===a.firing){a.items=b=b.clone()}if(c.scheduled){a.unscheduleItem(c);c.scheduled=!1}b.remove(c);a.orderedItems=null},sort:function(){var a=this,b=a.items,f={},e=a.getPreSort(),c,d;a.orderedItems=[];a.sortMap=f;if(e){b.sort(e)}b=b.items;for(c=0;c<b.length;++c){d=b[c];if(!f[d.id]){a.sortItem(d)}}a.sortMap=null},sortItem:function(a){var b=this,d=b.sortMap,e=b.orderedItems,c;if(!a.scheduler){b.add(a)}c=a.id;if(!(c in d)){d[c]=0;if(!a.sort.$nullFn){a.sort()}d[c]=1;a.order=b.orderedItems.length;e.push(a)}return b},sortItems:function(a){var b=this,c=b.sortItem;if(a){if(a instanceof Array){Ext.each(a,c,b)}else {Ext.Object.eachValue(a,c,b)}}return b},applyPreSort:function(e){if(typeof e==='function'){return e}var b=e.split(','),d=[],g=b.length,c,a,f;for(a=0;a<g;++a){d[a]=1;f=b[a];if((c=f.charAt(0))==='-'){d[a]=-1}else {if(c!=='+'){c=0}}if(c){b[a]=f.substring(1)}}return function(j,k){var f=0,a,c,h,i;for(a=0;!f&&a<g;++a){c=b[a];h=j[c];i=k[c];f=d[a]*(h<i?-1:i<h?1:0)}return f}},notify:function(){var a=this,k=a.timer,h=a.getCycleLimit(),f=Ext.GlobalEvents,j=a.suspendOnNotify,g,b,d,e,c,i;if(k){window.clearTimeout(k);a.timer=null}if(j){Ext.suspendLayouts()}while(a.scheduledCount){if(h){--h}else {a.firing=null;break}if(!i){i=!0;if(f.hasListeners.beforebindnotify){f.fireEvent('beforebindnotify',a)}}++a.passes;if(!(c=a.orderedItems)){a.sort();c=a.orderedItems}e=c.length;if(e){a.firing=a.items;for(b=0;b<e;++b){d=c[b];if(d.scheduled){d.scheduled=!1;--a.scheduledCount;a.notifyIndex=b;d.react();if(!a.scheduledCount){break}}}}}a.firing=null;a.notifyIndex=-1;if(j){Ext.resumeLayouts(!0)}if((g=a.busyCounter)!==a.lastBusyCounter){if(!(a.lastBusyCounter=g)){a.fireEvent('idle',a)}}},onTick:function(){this.timer=null;this.notify()},scheduleItem:function(b){var a=this;++a.scheduledCount;if(!a.timer&&!a.firing){a.scheduleTick()}},scheduleTick:function(){var a=this;if(!a.destroyed&&!a.timer){a.timer=Ext.Function.defer(a.onTick,a.getTickDelay(),a)}},unscheduleItem:function(a){if(this.scheduledCount){--this.scheduledCount}},adjustBusy:function(c){var a=this,b=a.busyCounter+c;a.busyCounter=b;if(b){if(!a.lastBusyCounter){a.lastBusyCounter=b;a.fireEvent('busy',a)}}else {if(a.lastBusyCounter&&!a.timer){a.scheduleTick()}}},isBusy:function(){return !this.isIdle()},isIdle:function(){return !(this.busyCounter+this.lastBusyCounter)}},1,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext.util,'Scheduler'],0);Ext.cmd.derive('Ext.data.Batch',Ext.Base,{config:{pauseOnException:!1},current:-1,total:0,running:!1,complete:!1,exception:!1,constructor:function(b){var a=this;a.mixins.observable.constructor.call(a,b);a.operations=[];a.exceptions=[]},add:function(a){var b=this,c,d;if(Ext.isArray(a)){for(c=0,d=a.length;c<d;++c){b.add(a[c])}}else {b.total++;a.setBatch(b);b.operations.push(a)}return b},sort:function(){this.operations.sort(this.sortFn)},sortFn:function(b,e){var f=b.order-e.order;if(f){return f}var a=b.entityType,d=e.entityType,c;if(!a||!d){return 0}if(!(c=a.rank)){a.schema.rankEntities();c=a.rank}return (c-d.rank)*b.foreignKeyDirection},start:function(b){var a=this;if(!a.operations.length||a.running){return a}a.exceptions.length=0;a.exception=!1;a.running=!0;return a.runOperation(Ext.isDefined(b)?b:a.current+1)},retry:function(){return this.start(this.current)},runNextOperation:function(){var a=this;if(a.running){a.runOperation(a.current+1)}return a},pause:function(){this.running=!1;return this},getOperations:function(){return this.operations},getExceptions:function(){return this.exceptions},getCurrent:function(){var b=null,a=this.current;if(!(a===-1||this.complete)){b=this.operations[a]}return b},getTotal:function(){return this.total},isRunning:function(){return this.running},isComplete:function(){return this.complete},hasException:function(){return this.exception},runOperation:function(d){var a=this,c=a.operations,b=c[d];if(b===undefined){a.running=!1;a.complete=!0;a.fireEvent('complete',a,c[c.length-1])}else {a.current=d;b.setInternalCallback(a.onOperationComplete);b.setInternalScope(a);b.execute()}return a},onOperationComplete:function(b){var a=this,c=b.hasException();if(c){a.exception=!0;a.exceptions.push(b);a.fireEvent('exception',a,b)}if(c&&a.getPauseOnException()){a.pause()}else {a.fireEvent('operationcomplete',a,b);a.runNextOperation()}}},1,0,0,0,0,[['observable',Ext.mixin.Observable]],[Ext.data,'Batch'],0);Ext.cmd.derive('Ext.data.matrix.Slice',Ext.Base,{constructor:function(a,b){this.id=b;this.side=a;this.members={}},attach:function(b){var a=this;a.store=b;b.matrix=a;b.on('load',a.onStoreLoad,a,{single:!0})},commit:function(){var a=this.members,b;for(b in a){a[b][2]=0}},onStoreLoad:function(a){this.update(a.getData().items,0)},update:function(l,d){var e=this,p=Ext.data.matrix.Slice,o=e.side,q=o.index,r=l.length,i=e.id,k=e.members,m=o.inverse,g=m.slices,c,f,j,h,b,a,n;for(j=0;j<r;++j){f=n=null;h=l[j];b=h.isEntity?(n=h).id:h;c=k[b];if(d<0&&c&&c[2]===1){delete k[b];a=g[b];if(a){delete a.members[i]}f=1}else {if(!c){c=[b,b,d];c[q]=i;k[b]=c;a=g[b];if(!a){g[b]=a=new p(m,b)}a.members[i]=c;f=1}else {if(d!==c[2]&&d!==0){c[2]=d;a=g[b];f=1}}}if(f){if(e.notify){e.notify.call(e.scope,e,b,d)}if(a&&a.notify){a.notify.call(a.scope,a,i,d)}}}},updateId:function(b){var g=this,c=g.id,f=g.side,e=f.slices,j=e[c],h=j.members,l=f.index,k=f.inverse.slices,i,d,a;g.id=b;e[b]=j;delete e[c];for(d in h){i=h[d];i[l]=b;a=k[d].members;a[b]=a[c];delete a[c]}},destroy:function(){var a=this,b=a.store;if(b){b.matrix=null;b.un('load',a.onStoreLoad,a)}a.notify=a.scope=a.store=a.side=a.members=null;a.callParent()}},1,0,0,0,0,0,[Ext.data.matrix,'Slice'],0);Ext.cmd.derive('Ext.data.matrix.Side',Ext.Base,{constructor:function(b,c,d){var a=this;a.matrix=b;a.index=c;a.role=d;a.slices={}},commit:function(){var a=this.slices,b;for(b in a){a[b].commit()}},get:function(a,b){var e=this,c=e.slices,d=c[a]||(c[a]=new Ext.data.matrix.Slice(e,a));return b||b===0?d.members[b]:d},update:function(c,d,b){var a=this.get(c);return a.update(d,b)},updateId:function(c,b){var a=this.get(c);if(a){a.updateId(b)}},destroy:function(){var a=this,b=a.slices,c;for(c in b){b[c].destroy()}a.inverse=a.matrix=a.role=a.slices=null;a.callParent()}},1,0,0,0,0,0,[Ext.data.matrix,'Side'],0);Ext.cmd.derive('Ext.data.matrix.Matrix',Ext.Base,{constructor:function(f,c){var a=this,b=c.isManyToMany?c:f.getSchema().getAssociation(c),g=Ext.data.matrix.Side,e=new g(a,0,b.left),d=new g(a,1,b.right);a.association=b;a.session=f;a.left=e;a.right=d;e.inverse=d;d.inverse=e},commit:function(){this.left.commit();this.right.commit()},update:function(b,c,a){return this.left.update(b,c,a)},updateId:function(e,g,f){var c=e.self,d=this.left,b=this.right,a;if(c===d.role.cls){a=d}if(c===b.role.cls){a=b}if(a){a.updateId(g,f)}},destroy:function(){var a=this;a.left.destroy();a.right.destroy();a.association=a.session=a.left=a.right=null;a.callParent()}},1,0,0,0,0,0,[Ext.data.matrix,'Matrix'],0);Ext.cmd.derive('Ext.data.session.ChangesVisitor',Ext.Base,{constructor:function(c){var a=this,b;a.session=c;b=c.getCrudProperties();a.result=null;a.writerOptions={};a.createKey=b.create;a.readKey=b.read;a.updateKey=b.update;a.dropKey=b.drop},onDirtyRecord:function(b){var c=this,j=c.crud,g=b.phantom,e=b.dropped,n=!g&&!e,m=b.$className,k=g||e?'allDataOptions':'partialDataOptions',d=c.writerOptions,l=b.entityName,a,f,h,i;if(g&&e){return !1}j=g?c.createKey:e?c.dropKey:c.updateKey;d=d[m]||(d[m]={});if(e){if(!(a=d.drop)){d.drop=a={all:b.getProxy().getWriter().getWriteAllFields()}}if(!a.all){h=b.id}}if(!h){if(!(a=d[k])){a=b.getProxy().getWriter().getConfig(k);d[k]=a=Ext.Object.chain(a);c.setupOptions(a)}h=b.getData(a)}i=c.result||(c.result={});f=i[l]||(i[l]={});f=f[j]||(f[j]=[]);f.push(h)},setupOptions:function(a){a.serialize=!0},onMatrixChange:function(d,h,j,i){var b=this,g=d.left.type,e=d.right.role,f=i<0?b.dropKey:b.createKey,a,c;c=b.result||(b.result={});a=c[g]||(c[g]={});a=a[e]||(a[e]={});a=a[f]||(a[f]={});a=a[h]||(a[h]=[]);a.push(j)}},1,0,0,0,0,0,[Ext.data.session,'ChangesVisitor'],0);Ext.cmd.derive('Ext.data.session.ChildChangesVisitor',Ext.data.session.ChangesVisitor,{constructor:function(){this.seen={};Ext.data.session.ChangesVisitor.prototype.constructor.apply(this,arguments)},setupOptions:function(a){Ext.data.session.ChangesVisitor.prototype.setupOptions.call(this,a);a.serialize=!1},onDirtyRecord:function(a){if(Ext.data.session.ChangesVisitor.prototype.onDirtyRecord.apply(this,arguments)!==!1){if(!a.$source&&(a.dropped||!a.phantom)){this.readEntity(a)}}},readEntity:function(b){var c=this,f=c.readKey,e=b.entityName,i=b.id,h=c.seen,g=e+i,d,a;if(h[g]){return}h[g]=!0;d=c.result||(c.result={});a=d[e]||(d[e]={});a=a[f]||(a[f]=[]);a.push(Ext.apply({},b.modified,b.data))}},1,0,0,0,0,0,[Ext.data.session,'ChildChangesVisitor'],0);Ext.cmd.derive('Ext.data.session.BatchVisitor',Ext.Base,{map:null,constructor:function(a){this.batch=a},getBatch:function(h){var e=this.map,b=this.batch,c,d,g,a,f;if(e){if(!b){b=new Ext.data.Batch()}for(g in e){c=e[g];d=c.entity;f=d.getProxy();delete c.entity;for(a in c){a=f.createOperation(a,{records:c[a]});a.entityType=d;b.add(a)}}}if(b&&h!==!1){b.sort()}return b},onDirtyRecord:function(a){var f=this,c=a.phantom?'create':a.dropped?'destroy':'update',d=a.$className,e=f.map||(f.map={}),b=e[d]||(e[d]={entity:a.self});b=b[c]||(b[c]=[]);b.push(a)}},1,0,0,0,0,0,[Ext.data.session,'BatchVisitor'],0);Ext.cmd.derive('Ext.data.Session',Ext.Base,{isSession:!0,config:{schema:'default',parent:null,autoDestroy:!0,crudProperties:{create:'C',read:'R',update:'U',drop:'D'}},destroyed:!1,crudOperations:[{type:'R',entityMethod:'readEntities'},{type:'C',entityMethod:'createEntities'},{type:'U',entityMethod:'updateEntities'},{type:'D',entityMethod:'dropEntities'}],crudKeys:{C:1,R:1,U:1,D:1},constructor:function(b){var a=this;a.data={};a.matrices={};a.identifierCache={};a.recordCreator=a.recordCreator.bind(a);a.initConfig(b)},destroy:function(){var a=this,f=a.matrices,g=a.data,e,d,b,c;for(c in f){f[c].destroy()}for(e in g){d=g[e];for(c in d){b=d[c].record;if(b){b.$source=b.session=null}}}a.identifierCache=a.recordCreator=a.matrices=a.data=null;a.setSchema(null);a.callParent()},adopt:function(a){var b=this,c=a.associations,d;if(a.session!==b){a.session=b;b.add(a);if(c){for(d in c){c[d].adoptAssociated(a,b)}}}},commit:function(){var f=this.data,e=this.matrices,d,b,a,c;for(d in f){b=f[d];for(a in b){c=b[a].record;if(c){c.commit()}}}for(a in e){e[a].commit()}},createRecord:function(c,b){var a=c.$isClass?c:this.getSchema().getEntity(c),e=this.getParent(),d;if(b&&e){d=a.getIdFromData(b);if(e.peekRecord(a,d)){Ext.raise('A parent session already contains an entry for '+a.entityName+': '+d)}}return new a(b,this)},getChanges:function(){var a=new Ext.data.session.ChangesVisitor(this);this.visitData(a);return a.result},getChangesForParent:function(){var a=new Ext.data.session.ChildChangesVisitor(this);this.visitData(a);return a.result},getRecord:function(b,f,g){var c=this,d=b.isModel,a,i,h,e;if(d){d=b;f=b.id;b=b.self}a=c.peekRecord(b,f);if(!a){i=b.$isClass?b:c.getSchema().getEntity(b);h=c.getParent();if(h){e=h.peekRecord(i,f)}if(e){if(e.isLoading()){d=!1}else {a=e.copy(undefined,c);a.$source=e}}if(!a){if(d){a=d;c.adopt(a)}else {a=i.createWithId(f,null,c);if(g!==!1){a.load(Ext.isObject(g)?g:undefined)}}}}return a},getSaveBatch:function(b){var a=new Ext.data.session.BatchVisitor();this.visitData(a);return a.getBatch(b)},onInvalidAssociationEntity:function(a,b){Ext.raise('Unable to read association entity: '+this.getModelIdentifier(a,b))},onInvalidEntityCreate:function(a,b){Ext.raise('Cannot create, record already not exists: '+this.getModelIdentifier(a,b))},onInvalidEntityDrop:function(a,b){Ext.raise('Cannot drop, record does not exist: '+this.getModelIdentifier(a,b))},onInvalidEntityRead:function(a,b){Ext.raise('Cannot read, record already not exists: '+this.getModelIdentifier(a,b))},onInvalidEntityUpdate:function(a,b,c){if(c){Ext.raise('Cannot update, record dropped: '+this.getModelIdentifier(a,b))}else {Ext.raise('Cannot update, record does not exist: '+this.getModelIdentifier(a,b))}},peekRecord:function(b,f,e){var h=b.$isClass?b:this.getSchema().getEntity(b),g=h.entityName,a=this.data[g],c,d;a=a&&a[f];c=a&&a.record;if(!c&&e){d=this.getParent();c=d&&d.peekRecord(b,f,e)}return c||null},save:function(){var a=new Ext.data.session.ChildChangesVisitor(this);this.visitData(a);this.getParent().update(a.result)},spawn:function(){return new this.self({schema:this.getSchema(),parent:this})},update:function(e){var b=this,n=b.getSchema(),l=b.crudOperations,p=l.length,o=b.crudKeys,a,d,c,f,g,h,m,j,i,k;b.getSchema().processKeyChecks(!0);for(a in e){d=n.getEntity(a);c=e[a];for(f=0;f<p;++f){g=l[f];h=c[g.type];if(h){b[g.entityMethod](d,h)}}}for(a in e){d=n.getEntity(a);m=d.associations;c=e[a];for(j in c){if(o[j]){continue}i=m[j];k=c[i.role];i.processUpdate(b,k)}}},privates:{add:function(a){var c=this,f=a.id,e=c.getEntry(a.self,f),b,d;e.record=a;c.registerReferences(a);b=a.associations;for(d in b){b[d].checkMembership(c,a)}},afterErase:function(a){this.evict(a)},applySchema:function(a){return Ext.data.schema.Schema.get(a)},createEntities:function(a,f){var g=f.length,c,d,b,e;for(c=0;c<g;++c){d=f[c];e=a.getIdFromData(d);b=this.peekRecord(a,e);if(!b){b=this.createRecord(a,d)}else {this.onInvalidEntityCreate(a,e)}b.phantom=!0}},dropEntities:function(c,d){var g=d.length,b,e,a,f;if(g){f=Ext.isObject(d[0])}for(b=0;b<g;++b){a=d[b];if(f){a=c.getIdFromData(a)}e=this.peekRecord(c,a);if(e){e.drop()}else {this.onInvalidEntityDrop(c,a)}}},evict:function(b){var c=b.entityName,a=this.data[c],d=b.id,e;if(a){delete a[d]}},getEntityList:function(e,a){var g=a.length,b,d,c,f;for(b=0;b<g;++b){d=a[b];c=this.peekRecord(e,d);if(c){a[b]=c}else {f=!0;a[b]=null;this.onInvalidAssociationEntity(e,d)}}if(f){a=Ext.Array.clean(a)}return a},getEntry:function(a,c){if(a.isModel){c=a.getId();a=a.self}var f=a.$isClass?a:this.getSchema().getEntity(a),d=f.entityName,e=this.data,b;b=e[d]||(e[d]={});b=b[c]||(b[c]={});return b},getRefs:function(h,d,i){var a=this.getEntry(h),c=a&&a.refs&&a.refs[d.role],g=i&&this.getParent(),b,f,e;if(g){b=g.getRefs(h,d);if(b){for(f in b){e=b[f];if(!c||!c[f]){this.getRecord(e.self,e.id)}}c=a&&a.refs&&a.refs[d.role]}}return c||null},getIdentifier:function(c){var f=this.getParent(),d,b,e,a;if(f){a=f.getIdentifier(c)}else {d=this.identifierCache;b=c.identifier;e=b.getId()||c.entityName;a=d[e];if(!a){if(b.clone){a=b.clone({id:null})}else {a=b}d[e]=a}}return a},getMatrix:function(a,e){var d=a.isManyToMany?a.name:a,c=this.matrices,b;b=c[d];if(!b&&!e){b=c[d]=new Ext.data.matrix.Matrix(this,a)}return b||null},getMatrixSlice:function(a,d){var b=this.getMatrix(a.association),c=b[a.side];return c.get(d)},getModelIdentifier:function(a,b){return b+'@'+a.entityName},onIdChanged:function(a,b,l){var c=this,j=c.matrices,q=a.entityName,s=a.id,g=c.data[q],k=g[b],p=a.associations,h=k.refs,r=c._setNoRefs,d,i,t,m,n,e,f,o;delete g[b];g[l]=k;for(o in j){j[o].updateId(a,b,l)}if(h){for(e in h){f=h[e];n=p[e];d=n.association;if(!d.isManyToMany){i=d.field.name;for(m in f){f[m].set(i,s,r)}}}}c.registerReferences(a,b)},processManyBlock:function(f,e,d,i){var c=this,b,a,g,h;if(d){for(b in d){a=c.peekRecord(f,b);if(a){g=c.getEntityList(e.cls,d[b]);h=e.getAssociatedItem(a);c[i](e,h,a,g)}else {c.onInvalidAssociationEntity(f,b)}}}},processManyCreate:function(d,b,c,a){if(b){b.add(a)}else {c[d.getterName](null,null,a)}},processManyDrop:function(d,a,c,b){if(a){a.remove(b)}},processManyRead:function(d,b,c,a){if(b){b.setRecords(a)}else {c[d.getterName](null,null,a)}},readEntities:function(a,f){var g=f.length,c,d,b,e;for(c=0;c<g;++c){d=f[c];e=a.getIdFromData(d);b=this.peekRecord(a,e);if(!b){b=this.createRecord(a,d)}else {this.onInvalidEntityRead(a,e)}b.phantom=!1}},recordCreator:function(d,b){var c=this,e=b.getIdFromData(d),a=c.peekRecord(b,e,!0);if(!a){a=new b(d,c)}else {a=c.getRecord(b,e)}return a},registerReferences:function(c,h){var k=c.entityName,n=c.id,l=c.data,m=h||h===0,g,e,d,j,a,i,b,f;j=(i=c.references).length;for(e=0;e<j;++e){a=i[e];d=l[a.name];if(d||d===0){a=a.reference;k=a.type;f=a.inverse.role;g=this.getEntry(a.cls,d);b=g.refs||(g.refs={});b=b[f]||(b[f]={});b[n]=c;if(m){delete b[h]}}}},updateEntities:function(c,d){var h=d.length,f,e,a,b,g;if(Ext.isArray(d)){for(f=0;f<h;++f){e=d[f];b=c.getIdFromData(e);a=this.peekRecord(c,b);if(a){a.set(e)}else {this.onInvalidEntityUpdate(c,b)}}}else {for(b in d){e=d[b];a=this.peekRecord(c,b);if(a&&!a.dropped){g=a.set(e)}else {this.onInvalidEntityUpdate(c,b,!!a)}}}},updateReference:function(h,j,b,c){var g=j.reference,f=g.type,d=g.inverse.role,i=h.id,e,a;if(c||c===0){a=this.getEntry(f,c).refs[d];delete a[i]}if(b||b===0){e=this.getEntry(f,b);a=e.refs||(e.refs={});a=a[d]||(a[d]={});a[i]=h}},visitData:function(b){var j=this,n=j.data,k=j.matrices,i,l,d,o,f,e,c,a,m,g,h;j.getSchema().processKeyChecks(!0);for(c in n){i=n[c];for(d in i){a=i[d].record;if(a){if(a.phantom||a.dirty||a.dropped){if(b.onDirtyRecord){b.onDirtyRecord(a)}}else {if(b.onCleanRecord){b.onCleanRecord(a)}}}}}if(b.onMatrixChange){for(c in k){f=k[c].left;g=f.slices;l=f.role.association;for(d in g){m=g[d];e=m.members;for(o in e){h=(a=e[o])[2];if(h){b.onMatrixChange(l,a[0],a[1],h)}}}}}return b},_setNoRefs:{refs:!1}}},1,0,0,0,0,0,[Ext.data,'Session'],0);Ext.cmd.derive('Ext.util.Schedulable',Ext.Base,{'abstract':!0,isSchedulable:!0,scheduled:!1,constructor:function(){this.getScheduler().add(this)},destroy:function(){var a=this,b=a.getScheduler();if(b){b.remove(a)}a.scheduler=null;a.schedule=a.react=Ext.emptyFn;a.callParent()},getFullName:function(){return this.name||this.id},privates:{getScheduler:function(){return this.scheduler},schedule:function(){var a=this,b;if(!a.scheduled){b=a.getScheduler();if(b){a.scheduled=!0;if(a.onSchedule){a.onSchedule()}b.scheduleItem(a)}}},unschedule:function(){var a=this,b;if(a.scheduled){b=a.getScheduler();if(b){b.unscheduleItem(a)}a.scheduled=!1}},sort:function(){}}},1,0,0,0,0,0,[Ext.util,'Schedulable'],0);Ext.cmd.derive('Ext.app.bind.BaseBinding',Ext.util.Schedulable,{calls:0,kind:20,defaultOptions:{},lastValue:undefined,constructor:function(d,c,e,b){var a=this;a.options=b;a.owner=d;a.scope=e;a.callback=c;a.lateBound=Ext.isString(c);if(b&&b.deep){a.deep=!0}Ext.util.Schedulable.prototype.constructor.call(this)},destroy:function(){var a=this,b=a.owner;Ext.util.Schedulable.prototype.destroy.call(this);if(b){b.onBindDestroy(a)}a.scope=a.callback=a.owner=null},isReadOnly:function(){return !0},privates:{getScheduler:function(){var a=this.owner;return a&&a.getScheduler()},getSession:function(){var a=this.owner;return a.isSession?a:a.getSession()},notify:function(b){var a=this,d=a.options||a.defaultOptions,c=a.lastValue;if(!a.calls||a.deep||a.valueChanged(b,c)){++a.calls;a.lastValue=b;if(a.lateBound){a.scope[a.callback](b,c,a)}else {a.callback.call(a.scope,b,c,a)}if(d.single){a.destroy()}}},valueChanged:function(a,b){var c=!0;if(b!==a){if(a&&b&&a instanceof Date&&b instanceof Date){c=a.getTime()!==b.getTime()}}else {c=Ext.isArray(a)}return c}}},1,0,0,0,0,0,[Ext.app.bind,'BaseBinding'],0);Ext.cmd.derive('Ext.app.bind.Binding',Ext.app.bind.BaseBinding,{constructor:function(a,c,e,d){var b=this;Ext.app.bind.BaseBinding.prototype.constructor.call(this,a.owner,c,e,d);b.stub=a;b.depth=a.depth;if(!a.isLoading()&&!a.scheduled){b.schedule()}},destroy:function(c){var a=this,b=a.stub;if(b&&!c){b.unbind(a);a.stub=null}Ext.app.bind.BaseBinding.prototype.destroy.call(this)},bindValidation:function(b,c){var a=this.stub;return a&&a.bindValidation(b,c)},bindValidationField:function(b,c){var a=this.stub;return a&&a.bindValidationField(b,c)},getFullName:function(){return this.fullName||(this.fullName='@('+this.stub.getFullName()+')')},getValue:function(){var b=this,c=b.stub,a=c&&c.getValue();if(b.transform){a=b.transform(a)}return a},isLoading:function(){var a=this.stub;return a&&a.isLoading()},isReadOnly:function(){var b=this.stub,a=this.options,c=!0;if(!(a&&a.twoWay===!1)){if(b){c=b.isReadOnly()}}return c},refresh:function(){},setValue:function(a){this.stub.set(a)},privates:{getDataObject:function(){var a=this.stub;return a&&a.getDataObject()},getRawValue:function(){var b=this,c=b.stub,a=c&&c.getRawValue();if(b.transform){a=b.transform(a)}return a},isDescendantOf:function(b){var a=this.stub;return a?b===a||a.isDescendantOf(b):!1},react:function(){this.notify(this.getValue())},schedule:function(){if(!this.stub.scheduled){Ext.app.bind.BaseBinding.prototype.schedule.call(this)}},sort:function(){var a=this.stub;a.scheduler.sortItem(a)}}},1,0,0,0,0,0,[Ext.app.bind,'Binding'],0);Ext.cmd.derive('Ext.app.bind.AbstractStub',Ext.util.Schedulable,{children:null,depth:0,generation:1,kind:10,parent:null,constructor:function(b,c){var a=this;a.owner=b;a.name=c;Ext.util.Schedulable.prototype.constructor.call(this)},destroy:function(){var a=this,d=a.children,c=a.bindings,f,b,e;if(c){for(b=0,f=c.length;b<f;++b){c[b].destroy(!0)}}for(e in d){d[e].destroy()}Ext.util.Schedulable.prototype.destroy.call(this);a.bindings=a.children=a.owner=null},add:function(a){var b=this;(b.children||(b.children={}))[a.name]=a;a.depth=b.depth+1;a.parent=b},getChild:function(b){var a=Ext.isString(b)?b.split('.'):b;if(a&&a.length){return this.descend(a,0)}return this},getFullName:function(){var b=this,a=b.fullName,d=b.parent,c;if(!a){a=b.name||b.id;if(d&&(c=d.getFullName())){a=(c.charAt(c.length-1)!==':'?c+'.':c)+a}b.fullName=a}return a},getSession:function(){var a=this.owner;return a.isSession?a:a.getSession()},bind:function(d,f,e){var a=this,b=new Ext.app.bind.Binding(a,d,f,e),c=a.bindings||(a.bindings=[]);b.depth=a.depth;c.push(b);return b},getValue:function(){return this.isLoading()?null:this.getRawValue()},graft:function(b){var a=this,c=a.bindings,e=a.name,d;a.parent=a.bindings=null;a.destroy();b.depth=a.depth;b.bindings=c;b.generation=a.generation+1;b.name=e;b.id=a.id;b.path=a.path;if(c){for(d=c.length;d-->0;){c[d].stub=b}}return b},isDescendantOf:function(b){for(var a=this;a=a.parent;){if(a===b){return !0}}return !1},onSchedule:function(){for(var c,e,b,a,d=this.parent;d;d=d.parent){a=d.bindings;if(a){for(c=0,e=a.length;c<e;++c){b=a[c];if(b.deep&&!b.scheduled){b.schedule()}}}}},react:function(){var b=this.bindings,c,a,d;if(b){for(a=0,d=b.length;a<d;++a){c=b[a];if(!c.scheduled){c.schedule()}}}},unbind:function(b){var a=this.bindings;if(a&&a.length){Ext.Array.remove(a,b)}},privates:{collect:function(){var a=this.children,f=this.bindings,b=0,d=0,c,e;if(a){for(e in a){c=a[e];d=c.collect();if(d===0){c.destroy();delete a[e]}b+=d}}if(f){b+=f.length}return b},getScheduler:function(){var a=this.owner;return a&&a.getScheduler()},sort:function(){var a=this.parent;if(a){this.scheduler.sortItem(a)}}}},1,0,0,0,0,0,[Ext.app.bind,'AbstractStub'],0);Ext.cmd.derive('Ext.app.bind.Stub',Ext.app.bind.AbstractStub,{isStub:!0,dirty:!0,formula:null,validationKey:'validation',constructor:function(e,c,a){var b=this,d=c;Ext.app.bind.AbstractStub.prototype.constructor.call(this,e,c);b.boundValue=null;if(a){a.add(b);if(!a.isRootStub){d=a.path+'.'+c}b.checkHadValue()}b.path=d},destroy:function(){var a=this,c=a.formula,d=a.parent,b=a.storeBinding;if(c){c.destroy()}if(b){b.destroy()}a.detachBound();a.parentValue=a.formula=a.storeBinding=null;Ext.app.bind.AbstractStub.prototype.destroy.call(this)},bindValidation:function(b,c){var a=this.parent;return a&&a.descend([this.validationKey,this.name]).bind(b,c)},bindValidationField:function(a,c){var b=this.parent,f=this.name,e=typeof a==='string',d;if(b){d=b.bind(function(b){var d=null;if(b&&b.isModel){d=b.getField(f)}if(e){c[a](d,b,this)}else {a.call(c,d,b,this)}})}return d||null},descend:function(c,g){var b=this,f=b.children||(b.children={}),d=g||0,e=c[d++],a;if(!(a=f[e])){a=new Ext.app.bind.Stub(b.owner,e,b)}if(d<c.length){a=a.descend(c,d)}return a},getChildValue:function(a){var c=this,d=c.name,b;if(!a&&!Ext.isString(a)){b=c.hadValue?null:undefined}else {b=c.inspectValue(a);if(!b){if(a.isEntity){b=a.data[d]}else {b=a[d]}}}return b},getDataObject:function(){var e=this,a=e.parent.getDataObject(),d=e.name,b=a?a[d]:null,c,f;if(!b&&a&&a.isEntity){c=a.associations;if(c&&d in c){b=a[c[d].getterName]()}}if(!b||!(b.$className||Ext.isObject(b))){a[d]=b={};e.hadValue=!0;e.invalidate(!0,!0)}return b},getRawValue:function(){return this.getChildValue(this.getParentValue())},graft:function(a){var c=this,d=c.parent,b=c.children,f=c.name,e;a.parent=d;a.children=b;if(d){d.children[f]=a}if(b){for(e in b){b[e].parent=a}}c.children=null;a.checkHadValue();return Ext.app.bind.AbstractStub.prototype.graft.call(this,a)},isLoading:function(){var a=this,g=a.parent,c=!1,d,b,e,f;if(g&&!(c=g.isLoading())){b=a.getParentValue();e=a.inspectValue(b);if(e){c=e.isLoading()}else {if(b&&b.isModel){d=b.associations;if(!(d&&a.name in d)){c=!1;f=!0}}if(!f){c=!a.hadValue&&a.getRawValue()===undefined}}}return c},invalidate:function(d,c){var a=this,b=a.children,e;a.checkHadValue();a.dirty=!0;if(!c&&!a.isLoading()){if(!a.scheduled){a.schedule()}}if(d&&b){for(e in b){b[e].invalidate(d,c)}}},isReadOnly:function(){var a=this.formula;return !!(a&&!a.set)},set:function(a){var c=this,i=c.parent,e=c.name,d=c.formula,b,f,h,g;if(d&&!d.settingValue&&d.set){d.setValue(a);return}else {if(c.isLinkStub){g=c.getLinkFormulaStub();d=g?g.formula:null;if(d){d.setValue(a);return}}}b=i.getDataObject();if(b.isEntity){f=b.associations;if(f&&e in f){h=f[e];b[h.setterName](a);c.invalidate(!0)}else {b.set(e,a)}}else {if(a&&a.constructor===Object||a!==b[e]){if(!c.setByLink(a)){if(a===undefined){delete b[e]}else {b[e]=a}c.inspectValue(b);c.invalidate(!0)}}}},onStoreLoad:function(){this.invalidate(!0)},afterLoad:function(a){this.invalidate(!0)},afterCommit:function(a){this.afterEdit(a,null)},afterEdit:function(h,c){var a=this.children,g=c&&c.length,f=h.associations,e,b,d,i;if(a){if(g){for(b=0;b<g;++b){d=a[c[b]];if(d){d.invalidate()}}}else {for(e in a){if(!(f&&e in f)){a[e].invalidate()}}}}this.invalidate()},afterReject:function(a){this.afterEdit(a,null)},setByLink:function(g){var f=this,e=0,d,b,c,a;for(a=f;a;a=a.parent){if(a.isLinkStub){b=a;if(e){for(c=[],d=0,a=f;a!==b;a=a.parent){++d;c[e-d]=a.name}}break}++e}if(!b||!(a=b.getTargetStub())){return !1}if(c){a=a.descend(c)}a.set(g);return !0},setFormula:function(c){var a=this,b=a.formula;if(b){b.destroy()}a.formula=new Ext.app.bind.Formula(a,c)},react:function(){var b=this,a=this.boundValue,d=b.children,c;if(a){if(a.isValidation){a.refresh();c=a.generation;if(b.lastValidationGeneration===c){return}b.lastValidationGeneration=c}else {if(a.isModel){if(d&&d[b.validationKey]){a.isValid()}}else {if(a.isStore){if(a.isLoading()&&!a.loadCount){return}}}}}Ext.app.bind.AbstractStub.prototype.react.call(this)},privates:{checkHadValue:function(){if(!this.hadValue){this.hadValue=this.getRawValue()!==undefined}},collect:function(){var a=this,d=Ext.app.bind.AbstractStub.prototype.collect.call(this),b=a.storeBinding?1:0,c=a.formula?1:0;return d+b+c},getLinkFormulaStub:function(){var a=this;while(a.isLinkStub){a=a.binding.stub}return a.formula?a:null},getParentValue:function(){var a=this;if(a.dirty){a.parentValue=a.parent.getValue();a.dirty=!1}return a.parentValue},setStore:function(a){this.storeBinding=a},inspectValue:function(c){var b=this,f=b.name,i=b.boundValue,a=null,e,d,h,g;if(c&&c.isEntity){e=c.associations;if(e&&f in e){a=c[e[f].getterName]();if(a&&a.isStore){a.$associatedStore=!0}}else {if(f===b.validationKey){a=c.getValidation();b.lastValidationGeneration=null}}}else {if(c){d=c[f];if(d&&(d.isModel||d.isStore)){a=d}}}h=i!==a;if(h){if(i){b.detachBound()}if(a){if(a.isModel){a.join(b)}else {g=a.associatedEntity;if(g&&!a.complete&&!a.hasPendingLoad()){a.load()}a.on('load',b.onStoreLoad,b,{single:!0})}}b.boundValue=a}return a},detachBound:function(){var b=this,a=b.boundValue;if(a){if(a.isModel){a.unjoin(b)}else {a.un('load',b.onStoreLoad,b)}}},sort:function(){var a=this,d=a.formula,c=a.scheduler,b=a.storeBinding;Ext.app.bind.AbstractStub.prototype.sort.call(this);if(b){c.sortItem(b)}if(d){c.sortItem(d)}}}},1,0,0,0,0,0,[Ext.app.bind,'Stub'],0);Ext.define('TS.overrides.app.bind.Stub',{override:'Ext.app.bind.Stub',compatibility:'6.0.2',afterAssociatedRecordSet:function(e,d,c){var a=this.children,b=c.role;if(a&&b in a){a[b].invalidate(!0)}}});Ext.cmd.derive('Ext.app.bind.LinkStub',Ext.app.bind.Stub,{isLinkStub:!0,binding:null,destroy:function(){var a=this,b=a.binding,c=a.owner;if(b){a.binding=null;b.destroy();if(c){delete c.linkData[a.name]}}a.target=null;Ext.app.bind.Stub.prototype.destroy.call(this)},getFullName:function(){var a=this;return a.fullName||(a.fullName='('+Ext.app.bind.Stub.prototype.getFullName.call(this)+' -> '+a.binding.getFullName()+')')},getDataObject:function(){var a=this.binding;return a&&a.getDataObject()},getRawValue:function(){var a=this.binding;return a&&a.getRawValue()},getValue:function(){var a=this.binding;return a&&a.getValue()},getTargetStub:function(){var a=this.binding;return a&&a.stub},isLoading:function(){var a=this.binding;return a?a.isLoading():!1},link:function(c,b){var a=this,d=a.binding;if(d){d.destroy()}b=a.target=b||a.owner;a.linkDescriptor=c;a.binding=b.bind(c,a.onChange,a);a.binding.deep=!0},onChange:function(){this.invalidate(!0)},react:function(){var a=this,b=a.owner.linkData;b[a.name]=a.getValue();Ext.app.bind.Stub.prototype.react.call(this)},privates:{collect:function(){var c=this,b=Ext.app.bind.Stub.prototype.collect.call(this),a=c.binding?1:0;return b+a},sort:function(){var a=this.binding;if(a){this.scheduler.sortItem(a)}}}},0,0,0,0,0,0,[Ext.app.bind,'LinkStub'],0);Ext.cmd.derive('Ext.app.bind.RootStub',Ext.app.bind.AbstractStub,{isRootStub:!0,depth:0,createRootChild:function(a,j){var e=this,d=e.owner,i=d.getData(),g=e.children,c=g&&g[a],f=c?null:e,h,b;if(j||i.hasOwnProperty(a)||!(h=d.getParent())){b=new Ext.app.bind.Stub(d,a,f)}else {b=new Ext.app.bind.LinkStub(d,a,c?null:f);b.link('{'+a+'}',h)}if(c){c.graft(b)}return b},createStubChild:function(a){return this.createRootChild(a,!0)},descend:function(a,g){var f=this,d=f.children,b=g||0,e=a[b++],c=d&&d[e]||f.createRootChild(e);if(b<a.length){c=c.descend(a,b)}return c},getFullName:function(){return this.fullName||(this.fullName=this.owner.id+':')},getDataObject:function(){return this.owner.data},getRawValue:function(){return this.owner.data},getValue:function(){return this.owner.data},isDescendantOf:function(){return !1},isLoading:function(){return !1},set:function(g){var c=this,e=c.children||(c.children={}),d=c.owner,h=d.data,j=d.getParent(),f,a,i,b;for(b in g){if((i=g[b])!==undefined){if(!(a=e[b])){a=new Ext.app.bind.Stub(d,b,c)}else {if(a.isLinkStub){if(!a.getLinkFormulaStub()){f=a;a=new Ext.app.bind.Stub(d,b);f.graft(a)}}}a.set(i)}else {if(h.hasOwnProperty(b)){delete h[b];a=e[b];if(a&&!a.isLinkStub&&j){a=c.createRootChild(b)}a.invalidate(!0)}}}},schedule:Ext.emptyFn,unschedule:Ext.emptyFn},0,0,0,0,0,0,[Ext.app.bind,'RootStub'],0);Ext.cmd.derive('Ext.app.bind.Multi',Ext.app.bind.BaseBinding,{isMultiBinding:!0,missing:1,deep:!0,constructor:function(b,f,e,g,c){var a=this,d=c&&c.trackStatics;Ext.app.bind.BaseBinding.prototype.constructor.call(this,f,e,g,c);a.bindings=[];a.literal=b.$literal;if(b.constructor===Object){if(d){a.staticKeys=[]}a.addObject(b,a.lastValue={},a.staticKeys)}else {a.addArray(b,a.lastValue=[])}if(!--a.missing&&!a.scheduled){a.schedule()}},destroy:function(){var a=this;a.bindings=Ext.destroy(a.bindings);Ext.app.bind.BaseBinding.prototype.destroy.call(this)},add:function(d,i,f){var a=this,h=a.owner,e=a.bindings,g=a.literal?d.reference?'bindEntity':'bindExpression':'bind',b,c;++a.missing;b=h[g](d,function(c){i[f]=c;if(b.calls===1){--a.missing}if(!a.missing&&!a.scheduled){a.schedule()}},a,null);c=b.depth;if(!e.length||c<a.depth){a.depth=c}e.push(b);return !this.isBindingStatic(b)},addArray:function(g,d){var f=this,h=g.length,e=!1,c,a,b;for(b=0;b<h;++b){a=g[b];if(a&&(a.reference||Ext.isString(a))){c=f.add(a,d,b)}else {if(Ext.isArray(a)){c=f.addArray(a,d[b]=[])}else {if(a&&a.constructor===Object){c=f.addObject(a,d[b]={})}else {d[b]=a;c=!1}}}e=e||c}return e},addObject:function(g,d,h){var f=this,e=!1,c,a,b;for(b in g){a=g[b];if(a&&(a.reference||Ext.isString(a))){c=f.add(a,d,b)}else {if(Ext.isArray(a)){c=f.addArray(a,d[b]=[])}else {if(a&&a.constructor===Object){c=f.addObject(a,d[b]={})}else {d[b]=a;c=!1}}}if(h&&!c){h.push(b)}e=e||c}return e},getFullName:function(){var c=this,a=c.fullName,d=c.bindings,e=d.length,b;if(!a){a='@[';for(b=0;b<e;++b){if(b){a+=','}a+=d[b].getFullName()}a+=']';c.fullName=a}return a},getRawValue:function(){return this.lastValue},isDescendantOf:function(){return !1},isLoading:function(){for(var a=this.bindings,b=a.length;b-->0;){if(a[b].isLoading()){return !0}}return !1},isBindingStatic:function(a){return a.isTemplateBinding&&a.isStatic},isStatic:function(){var b=this.bindings,d=b.length,a,c;for(a=0;a<d;++a){c=b[a];if(!this.isBindingStatic(c)){return !1}}return !0},pruneStaticKeys:function(){var b=Ext.apply({},this.lastValue),c=this.staticKeys,d=c.length,a;for(a=0;a<d;++a){delete b[c[a]]}return b},react:function(){this.notify(this.lastValue)},refresh:function(){},privates:{sort:function(){this.scheduler.sortItems(this.bindings)}}},1,0,0,0,0,0,[Ext.app.bind,'Multi'],0);Ext.cmd.derive('Ext.app.bind.Formula',Ext.util.Schedulable,{statics:{getFormulaParser:function(c){var b=this.formulaCache,a,d;if(!b){b=this.formulaCache=new Ext.util.LruCache({maxSize:20})}a=b.get(c);if(!a){d='[^\\.a-z0-9_]'+c+'\\(\\s*([\'"])(.*?)\\1\\s*\\)';a=new RegExp(d,'gi');b.add(c,a)}return a}},isFormula:!0,calculation:null,explicit:!1,set:null,single:!1,argumentNamesRe:/^function\s*\(\s*([^,\)\s]+)/,constructor:function(h,c){var a=this,g=h.owner,f,b,d,e;a.owner=g;a.stub=h;Ext.util.Schedulable.prototype.constructor.call(this);if(c instanceof Function){a.get=d=c}else {a.get=d=c.get;a.set=c.set;b=c.bind;if(c.single){a.single=c.single}if(b){f=b.bindTo;if(f){e=Ext.apply({},b);delete e.bindTo;b=f}}}if(b){a.explicit=!0}else {b=d.$expressions||a.parseFormula(d)}a.binding=g.bind(b,a.onChange,a,e)},destroy:function(){var a=this,b=a.binding,c=a.stub;if(b){b.destroy();a.binding=null}if(c){c.formula=null}Ext.util.Schedulable.prototype.destroy.call(this);a.getterFn=a.owner=null},getFullName:function(){return this.fullName||(this.fullName=this.stub.getFullName()+'='+Ext.util.Schedulable.prototype.getFullName.call(this)+')')},getRawValue:function(){return this.calculation},onChange:function(){if(!this.scheduled){this.schedule()}},parseFormula:function(f){var g=f.toString(),b={$literal:!0},a,d,e,c;a=this.argumentNamesRe.exec(g);d=a?a[1]:'get';e=Ext.app.bind.Formula.getFormulaParser(d);while(a=e.exec(g)){c=a[2];b[c]=c}b.$literal=!0;f.$expressions=b;return b},react:function(){var a=this,c=a.owner,d=a.binding.lastValue,e=a.getterFn,b;if(a.explicit){b=d}else {b=c.getFormulaFn(d)}a.settingValue=!0;a.stub.set(a.calculation=a.get.call(c,b));a.settingValue=!1;if(a.single){a.destroy()}},setValue:function(a){this.set.call(this.stub.owner,a)},privates:{getScheduler:function(){var a=this.owner;return a&&a.getScheduler()},sort:function(){var b=this,a=b.binding;if(!a.destroyed){b.scheduler.sortItem(a)}}}},1,0,0,0,0,0,[Ext.app.bind,'Formula'],0);Ext.cmd.derive('Ext.app.bind.Template',Ext.Base,{numberRe:/^(?:\d+(?:\.\d*)?)$/,stringRe:/^(?:["][^"]*["])$/,tokenRe:/\{[!]?(?:(?:(\d+)|([a-z_][\w\-\.]*))(?::([a-z_\.]+)(?:\(([^\)]*?)?\))?)?)\}/gi,formatRe:/^([a-z_]+)(?:\(([^\)]*?)?\))?$/i,buffer:null,slots:null,tokens:null,constructor:function(d){var b=this,c=b._initters,a;b.text=d;for(a in c){b[a]=c[a]}},_initters:{apply:function(a,b){return this.parse().apply(a,b)},getTokens:function(){return this.parse().getTokens()}},apply:function(h,i){var f=this,e=f.slots,d=f.buffer,g=e.length,c,b,a;for(c=0;c<g;++c){b=e[c];if(b){if((a=h[b.pos])==null){a=''}if(b.not){a=!a}if(b.format){a=b.format(a,i)}d[c]=a}}return d.join('')},getTokens:function(){return this.tokens},parse:function(){var b=this,g=b.text,j=[],m=[],k=[],i={},d=0,p=b.tokenRe,l=0,h,n,f,c,o,a,e;for(n in b._initters){delete b[n]}b.buffer=j;b.slots=m;b.tokens=k;while(c=p.exec(g)){f=c.index-d;if(f){j[l++]=g.substring(d,d+f);d+=f}d+=(o=c[0]).length;a={fmt:h=c[3]||null,index:c[1]?parseInt(c[1],10):null,not:o.charAt(1)==='!',token:c[2]||null};e=a.token||String(a.index);if(e in i){a.pos=i[e]}else {i[e]=a.pos=k.length;k.push(e)}if(h){if(h.substring(0,5)==='this.'){a.fmt=h.substring(5)}else {a.scope=Ext.util.Format}b.parseArgs(c[4],a)}m[l++]=a}if(d<g.length){j[l++]=g.substring(d)}return b},parseArgs:function(e,d){var f=this,h=f.numberRe,i=f.stringRe,b,a,c,g;if(!e){a=[]}else {if(e.indexOf(',')<0){a=[e]}else {a=e.split(',')}}d=d||{};g=a.length;d.args=a;for(c=0;c<g;++c){b=a[c];if(b==='true'){a[c]=!0}else {if(b==='false'){a[c]=!1}else {if(b==='null'){a[c]=null}else {if(h.test(b)){a[c]=parseFloat(b)}else {if(i.test(b)){a[c]=b.substring(1,b.length-1)}else {d.fn=Ext.functionFactory('return ['+e+'];');d.format=f._formatEval;break}}}}}}if(!d.format){a.unshift(0);d.format=f._formatArgs}return d},parseFormat:function(e){var c=this,d=c.formatRe.exec(e),a={fmt:e,scope:Ext.util.Format},b;b=d[2];if(b){a.fmt=d[1];c.parseArgs(b,a)}else {a.args=[0];a.format=c._formatArgs}return a},_formatArgs:function(b,a){a=this.scope||a;this.args[0]=b;return a[this.fmt].apply(a,this.args)},_formatEval:function(c,a){var b=this.fn();b.unshift(c);a=this.scope||a;return a[this.fmt].apply(a,b)}},1,0,0,0,0,0,[Ext.app.bind,'Template'],0);Ext.cmd.derive('Ext.app.bind.TemplateBinding',Ext.app.bind.BaseBinding,{isTemplateBinding:!0,lastValue:undefined,value:undefined,constructor:function(f,d,e,h,g){var a=this,c=new Ext.app.bind.Template(f),b=c.getTokens();Ext.app.bind.BaseBinding.prototype.constructor.call(this,d,e,h,g);a.tpl=c;a.tokens=b;b.$literal=!0;if(b.length){a.multiBinding=new Ext.app.bind.Multi(b,d,a.onBindData,a)}else {a.isStatic=!0;a.onData(c.text)}},destroy:function(){var a=this;Ext.destroy(a.multiBinding);a.tpl=a.multiBinding=null;Ext.app.bind.BaseBinding.prototype.destroy.call(this)},getFullName:function(){var a=this.multiBinding;return this.fullName||(this.fullName='$'+(a?a.getFullName():Ext.app.bind.BaseBinding.prototype.getFullName.call(this)))},getRawValue:function(){return this.value},getTemplateScope:function(){return null},isDescendantOf:function(){return !1},isLoading:function(){var a=this.multiBinding;return a?a.isLoading():!1},onBindData:function(a){this.onData(this.tpl.apply(a,this.getTemplateScope()))},onData:function(c){var a=this,b=a.value;if(b!==(a.value=c)){a.lastValue=b;a.schedule()}},react:function(){this.notify(this.value)},refresh:function(){var a=this.multiBinding;if(a){a.refresh()}},privates:{sort:function(){var a=this.multiBinding;if(a){this.scheduler.sortItem(a)}}}},1,0,0,0,0,0,[Ext.app.bind,'TemplateBinding'],0);Ext.cmd.derive('Ext.data.ChainedStore',Ext.data.AbstractStore,{config:{source:null,remoteFilter:!1,remoteSort:!1},constructor:function(){Ext.data.AbstractStore.prototype.constructor.apply(this,arguments);this.getData().addObserver(this)},remove:function(){var a=this.getSource();return a.remove.apply(a,arguments)},removeAll:function(){var a=this.getSource();return a.removeAll()},getData:function(){var b=this,a=b.data;if(!a){b.data=a=b.constructDataCollection()}return a},getSession:function(){return this.getSource().getSession()},applySource:function(a){if(a){a=Ext.data.StoreManager.lookup(a)}return a},updateSource:function(b,c){var a=this,d;if(c){c.removeObserver(a)}if(b){d=a.getData();d.setSource(b.getData());if(!a.isInitializing){a.fireEvent('refresh',a);a.fireEvent('datachanged',a)}b.addObserver(a)}},getModel:function(){return this.getSource().getModel()},getProxy:function(){return null},onCollectionAdd:function(e,b){var a=this,d=b.items,c=!b.next;if(a.ignoreCollectionAdd){return}a.fireEvent('add',a,d,b.at);if(c){a.fireEvent('datachanged',a)}},onCollectionItemChange:function(f,a){var b=this,d=a.item,c=a.modified||null,e=a.meta;b.onUpdate(d,e,c,a);b.fireEvent('update',b,d,e,c,a)},onCollectionUpdateKey:function(b,a){this.fireEvent('idchanged',this,a.item,a.oldKey,a.newKey)},onUpdate:Ext.emptyFn,onCollectionRemove:function(e,b){var a=this,d=b.items,c=!b.next;if(a.ignoreCollectionRemove){return}a.fireEvent('remove',a,d,b.at,!1);if(c){a.fireEvent('datachanged',a)}},onSourceBeforeLoad:function(b,a){this.fireEvent('beforeload',this,a)},onSourceAfterLoad:function(d,c,a,b){this.fireEvent('load',this,c,a,b)},onFilterEndUpdate:function(){Ext.data.AbstractStore.prototype.onFilterEndUpdate.apply(this,arguments);this.callObservers('Filter')},onSourceBeforePopulate:function(){this.ignoreCollectionAdd=!0;this.callObservers('BeforePopulate')},onSourceAfterPopulate:function(){var a=this;a.ignoreCollectionAdd=!1;a.fireEvent('datachanged',a);a.fireEvent('refresh',a);this.callObservers('AfterPopulate')},onSourceBeforeClear:function(){this.ignoreCollectionRemove=!0;this.callObservers('BeforeClear')},onSourceAfterClear:function(){this.ignoreCollectionRemove=!1;this.callObservers('AfterClear')},onSourceBeforeRemoveAll:function(){this.ignoreCollectionRemove=!0;this.callObservers('BeforeRemoveAll')},onSourceAfterRemoveAll:function(c,b){var a=this;a.ignoreCollectionRemove=!1;if(!b){a.fireEvent('clear',a);a.fireEvent('datachanged',a)}this.callObservers('AfterRemoveAll',[b])},onSourceFilter:function(){var a=this;a.fireEvent('refresh',a);a.fireEvent('datachanged',a)},hasPendingLoad:function(){return this.getSource().hasPendingLoad()},isLoaded:function(){return this.getSource().isLoaded()},isLoading:function(){return this.getSource().isLoading()},onDestroy:function(){var a=this;a.observers=null;a.setSource(null);a.getData().destroy(!0);a.data=null},privates:{isMoving:function(){var a=this.getSource();return a.isMoving?a.isMoving.apply(a,arguments):!1},loadsSynchronously:function(){return this.getSource().loadsSynchronously()}}},1,0,0,0,['store.chained'],[[Ext.data.LocalStore.prototype.mixinId||Ext.data.LocalStore.$className,Ext.data.LocalStore]],[Ext.data,'ChainedStore'],0);Ext.cmd.derive('Ext.app.ViewModel',Ext.Base,{isViewModel:!0,factoryConfig:{name:'viewModel'},collectTimeout:100,expressionRe:/^(?:\{[!]?(?:(\d+)|([a-z_][\w\-\.]*))\})$/i,$configStrict:!1,config:{data:!0,formulas:{$value:null,merge:function(c,a,d,b){return this.mergeNew(c,a,d,b)}},links:null,parent:null,root:!0,scheduler:null,schema:'default',session:null,stores:null,view:null},constructor:function(a){this.bindings={};this.initConfig(a)},destroy:function(){var a=this,d=a._scheduler,g=a.storeInfo,i=a.getParent(),j=a.collectTask,f=a.children,h=a.bindings,b,c,e;a.destroying=!0;if(j){j.cancel();a.collectTask=null}if(f){for(b in f){f[b].destroy()}}if(g){for(b in g){c=g[b];e=c.autoDestroy;if(e||!c.$wasInstance&&e!==!1){c.destroy()}Ext.destroy(c.$binding)}}if(i){i.unregisterChild(a)}a.getRoot().destroy();for(b in h){h[b].destroy()}if(d&&d.$owner===a){d.$owner=null;d.destroy()}a.children=a.storeInfo=a._session=a._view=a._scheduler=a.bindings=a._root=a._parent=a.formulaFn=a.$formulaData=null;a.destroying=!1;a.callParent()},bind:function(a,f,e,c){var d=this,b,g;e=e||d;if(!c&&a.bindTo!==undefined&&!Ext.isString(a)){c=a;a=c.bindTo}if(!Ext.isString(a)){b=new Ext.app.bind.Multi(a,d,f,e,c);g=!0}else {if(d.expressionRe.test(a)){a=a.substring(1,a.length-1);b=d.bindExpression(a,f,e,c)}else {b=new Ext.app.bind.TemplateBinding(a,d,f,e,c);g=!0}}if(g){d.bindings[b.id]=b}return b},getSession:function(){var b=this,a=b._session,c;if(!a&&(c=b.getParent())){b.setSession(a=c.getSession())}return a||null},getStore:function(c){var a=this.storeInfo,b;if(a){b=a[c]}return b||null},linkTo:function(i,a){var e=this,b,d,h,f,g,c;if(a.isModel){a={type:a.entityName,id:a.id}}f=a.type||a.reference;d=a.create;if(f){h=a.id;if(d){h=undefined}c=e.getRecord(f,h);if(Ext.isObject(d)){c.set(d);c.commit();c.phantom=!0}b=e.getRoot().createStubChild(i);b.set(c)}else {b=e.getStub(i);if(!b.isLinkStub){g=new Ext.app.bind.LinkStub(e,b.name);b.graft(g);b=g}b.link(a)}},notify:function(){this.getScheduler().notify()},get:function(a){return this.getStub(a).getValue()},set:function(a,b){var d=this,e,c;d.getData();if(b===undefined&&a&&a.constructor===Object){c=d.getRoot();b=a}else {if(a&&a.indexOf('.')<0){e={};e[a]=b;b=e;c=d.getRoot()}else {c=d.getStub(a)}}c.set(b)},privates:{registerChild:function(b){var a=this.children;if(!a){this.children=a={}}a[b.getId()]=b},unregisterChild:function(b){var a=this.children;if(!this.destroying&&a){delete a[b.getId()]}},getRecord:function(d,e){var c=this.getSession(),b=d,f=e!==undefined,a;if(c){if(f){a=c.getRecord(d,e)}else {a=c.createRecord(d)}}else {if(!b.$isClass){b=this.getSchema().getEntity(b)}if(f){a=b.createWithId(e);a.load()}else {a=new b()}}return a},notFn:function(a){return !a},bindExpression:function(a,d,f,e){var i=a.charAt(0),c=i==='!',g=c?a.substring(1):a,h=this.getStub(g),b;b=h.bind(d,f,e);if(c){b.transform=this.notFn}return b},applyScheduler:function(a){if(a&&!a.isInstance){a=new Ext.util.Scheduler(a);a.$owner=this}return a},getScheduler:function(){var b=this,a=b._scheduler,c;if(!a){if(!(c=b.getParent())){a=new Ext.util.Scheduler({preSort:'kind,-depth'});a.$owner=b}else {a=c.getScheduler()}b.setScheduler(a)}return a},getStub:function(a){var b=this.getRoot();return a?b.getChild(a):b},collect:function(){var a=this,c=a.getParent(),b=a.collectTask;if(c){c.collect();return}if(!b){b=a.collectTask=new Ext.util.DelayedTask(a.doCollect,a)}if(a.collectTimeout===0){a.doCollect()}else {b.delay(a.collectTimeout)}},doCollect:function(){var a=this.children,b;if(a){for(b in a){a[b].doCollect()}}this.getRoot().collect()},onBindDestroy:function(c,d){var a=this,b;if(a.destroying){return}if(!d){delete a.bindings[c.id]}b=a.getParent();if(b){b.onBindDestroy(c,!0)}else {a.collect()}},applyData:function(b,e){var a=this,d,c;a.getSession();if(!e){c=a.getParent();a.linkData=d=c?Ext.Object.chain(c.getData()):{};a.data=a._data=Ext.Object.chain(d)}if(b&&b.constructor===Object){a.getRoot().set(b)}},applyParent:function(a){if(a){a.registerChild(this)}return a},applyStores:function(f){var b=this,h=b.getRoot(),d,a,c,g,e,i;b.storeInfo={};b.listenerScopeFn=function(){return b.getView().getInheritedConfig('defaultListenerScope')};for(d in f){a=f[d];if(a.isStore){a.$wasInstance=!0;b.setupStore(a,d);continue}else {if(Ext.isString(a)){a={source:a}}else {a=Ext.apply({},a)}}e=a.listeners;delete a.listeners;c=b.bind(a,b.onStoreBind,b,{trackStatics:!0});if(c.isStatic()){c.destroy();b.createStore(d,a,e)}else {c.$storeKey=d;c.$listeners=e;g=h.createStubChild(d);g.setStore(c)}}},onStoreBind:function(a,g,c){var f=this.storeInfo,e=c.$storeKey,d=f[e],b;if(!d){this.createStore(e,a,c.$listeners,c)}else {a=Ext.merge({},c.pruneStaticKeys());b=a.proxy;delete a.type;delete a.model;delete a.fields;delete a.proxy;delete a.listeners;if(b){delete b.reader;delete b.writer;d.getProxy().setConfig(b)}d.setConfig(a)}},createStore:function(f,a,c,d){var e=this.getSession(),b;a=Ext.apply({},a);if(a.session){a.session=e}if(a.source){a.type=a.type||'chained'}a.listeners=c;b=Ext.Factory.store(a);b.$binding=d;this.setupStore(b,f)},setupStore:function(a,b){a.resolveListenerScope=this.listenerScopeFn;this.storeInfo[b]=a;this.set(b,a)},applyFormulas:function(b){var c=this,e=c.getRoot(),a,d;c.getData();for(a in b){e.createStubChild(a);d=c.getStub(a);d.setFormula(b[a])}return b},applyLinks:function(a){for(var b in a){this.linkTo(b,a[b])}},applySchema:function(a){return Ext.data.schema.Schema.get(a)},applyRoot:function(){var b=new Ext.app.bind.RootStub(this),a=this.getParent();if(a){b.depth=a.getRoot().depth-1000}return b},getFormulaFn:function(c){var a=this,b=a.formulaFn;if(!b){b=a.formulaFn=function(b){return a.$formulaData[b]}}a.$formulaData=c;return b}}},1,0,0,0,['viewmodel.default'],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable],[Ext.mixin.Identifiable.prototype.mixinId||Ext.mixin.Identifiable.$className,Ext.mixin.Identifiable]],[Ext.app,'ViewModel'],0);Ext.define('TS.overrides.app.ViewModel',{override:'Ext.app.ViewModel',compatibility:'6.0.2',constructor:function(a){this.bindings={};this.initConfig(a);this.init()},init:Ext.emptyFn});Ext.cmd.derive('Ext.app.domain.Controller',Ext.app.EventDomain,{singleton:!0,type:'controller',prefix:'controller.',idMatchRe:/^\#/,constructor:function(){var a=this;a.callParent();a.monitor(Ext.app.BaseController)},match:function(c,a){var b=!1,d=c.alias;if(a==='*'){b=!0}else {if(a==='#'){b=!!c.isApplication}else {if(this.idMatchRe.test(a)){b=c.getId()===a.substring(1)}else {if(d){b=Ext.Array.indexOf(d,this.prefix+a)>-1}}}}return b}},1,0,0,0,0,0,[Ext.app.domain,'Controller'],0);Ext.cmd.derive('Ext.direct.Manager',Ext.Base,{singleton:!0,exceptions:{TRANSPORT:'xhr',PARSE:'parse',DATA:'data',LOGIN:'login',SERVER:'exception'},providerClasses:{},remotingMethods:{},config:{varName:'Ext.REMOTING_API'},apiNotFoundError:'Ext Direct API was not found at {0}',constructor:function(){var a=this;a.mixins.observable.constructor.call(a);a.transactions=new Ext.util.MixedCollection();a.providers=new Ext.util.MixedCollection()},addProvider:function(a){var b=this,d=arguments,f=b.relayers||(b.relayers={}),c,e;if(d.length>1){for(c=0,e=d.length;c<e;++c){b.addProvider(d[c])}return}if(!a.isProvider){a=Ext.create('direct.'+a.type+'provider',a)}b.providers.add(a);a.on('data',b.onProviderData,b);if(a.relayedEvents){f[a.id]=b.relayEvents(a,a.relayedEvents)}if(!a.isConnected()){a.connect()}return a},loadProvider:function(a,d,e){var c=this,i=c.providerClasses,h,b,j,g,f,k;if(Ext.isArray(a)){for(f=0,k=a.length;f<k;f++){c.loadProvider(a[f],d,e)}return}h=a.type;b=a.url;if(i[h]&&i[h].checkConfig(a)){g=c.addProvider(a);c.fireEventArgs('providerload',[b,g]);Ext.callback(d,e,[b,g]);return}j=a.varName||c.getVarName();delete a.varName;delete a.url;Ext.Loader.loadScript({url:b,scope:c,onLoad:function(){this.onApiLoadSuccess({url:b,varName:j,config:a,callback:d,scope:e})},onError:function(){this.onApiLoadFailure({url:b,callback:d,scope:e})}})},getProvider:function(a){return a.isProvider?a:this.providers.get(a)},removeProvider:function(a){var c=this,e=c.providers,d=c.relayers,b;a=a.isProvider?a:e.get(a);if(a){a.un('data',c.onProviderData,c);b=a.id;if(d[b]){d[b].destroy();delete d[b]}e.remove(a);return a}return null},addTransaction:function(a){this.transactions.add(a);return a},removeTransaction:function(a){var b=this;a=b.getTransaction(a);b.transactions.remove(a);return a},getTransaction:function(a){return typeof a==='object'?a:this.transactions.get(a)},onProviderData:function(d,a){var b=this,c,e;if(Ext.isArray(a)){for(c=0,e=a.length;c<e;++c){b.onProviderData(d,a[c])}return}if(a.name&&a.name!=='event'&&a.name!=='exception'){b.fireEvent(a.name,a)}else {if(a.status===!1){b.fireEvent('exception',a)}}b.fireEvent('event',a,d)},parseMethod:function(c){var b=Ext.global,e=0,a,d,f;if(Ext.isFunction(c)){a=c}else {if(Ext.isString(c)){a=this.remotingMethods[c];if(!a){d=c.split('.');f=d.length;while(b&&e<f){b=b[d[e]];++e}a=Ext.isFunction(b)?b:null}}}return a||null},privates:{addProviderClass:function(a,b){this.providerClasses[a]=b},onApiLoadSuccess:function(options){var me=this,url=options.url,varName=options.varName,api,provider,error;try{api=Ext.apply(options.config,eval(varName));provider=me.addProvider(api)}catch(b){error=b+''}if(error){me.fireEventArgs('providerloaderror',[url,error]);Ext.callback(options.callback,options.scope,[url,error])}else {me.fireEventArgs('providerload',[url,provider]);Ext.callback(options.callback,options.scope,[url,provider])}},onApiLoadFailure:function(a){var c=a.url,b;b=Ext.String.format(this.apiNotFoundError,c);this.fireEventArgs('providerloaderror',[c,b]);Ext.callback(a.callback,a.scope,[c,b])},registerMethod:function(b,a){this.remotingMethods[b]=a},clearAllMethods:function(){this.remotingMethods={}}}},1,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext.direct,'Manager'],function(){Ext.Direct=Ext.direct.Manager});Ext.cmd.derive('Ext.direct.Provider',Ext.Base,{isProvider:!0,subscribers:0,constructor:function(b){var a=this;Ext.apply(a,b);Ext.applyIf(a,{id:Ext.id(null,'provider-')});a.mixins.observable.constructor.call(a,b)},destroy:function(){var a=this;a.disconnect(!0);a.callParent()},isConnected:function(){return this.subscribers>0},connect:function(){var a=this;if(a.subscribers===0){a.doConnect();a.fireEventArgs('connect',[a])}a.subscribers++},doConnect:Ext.emptyFn,disconnect:function(b){var a=this;if(a.subscribers>0){if(b){a.subscribers=0}else {a.subscribers--}if(a.subscribers===0){a.doDisconnect();a.fireEventArgs('disconnect',[a])}}},doDisconnect:Ext.emptyFn,inheritableStatics:{checkConfig:Ext.returnFalse},onClassExtended:function(b,a,c){if(a.type){Ext.direct.Manager.addProviderClass(a.type,b)}}},1,0,0,0,['direct.provider'],[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext.direct,'Provider'],0);Ext.cmd.derive('Ext.data.PageMap',Ext.util.LruCache,{config:{store:null,pageSize:0,rootProperty:''},clear:function(b){var a=this;a.pageMapGeneration=(a.pageMapGeneration||0)+1;a.indexMap={};Ext.util.LruCache.prototype.clear.call(this,b)},forEach:function(k,f){var d=this,b=Ext.Object.getKeys(d.map),h=b.length,j=d.getPageSize(),a,c,e,g,i;for(a=0;a<h;a++){b[a]=+b[a]}Ext.Array.sort(b,Ext.Array.numericSortFn);f=f||d;for(a=0;a<h;a++){e=b[a];g=d.getPage(e);i=g.length;for(c=0;c<i;c++){if(k.call(f,g[c],(e-1)*j+c)===!1){return}}}},findBy:function(d,a){var c=this,b=null;a=a||c;c.forEach(function(c,e){if(d.call(a,c,e)){b=c;return !1}});return b},findIndexBy:function(d,a){var c=this,b=-1;a=a||c;c.forEach(function(e,c){if(d.call(a,e)){b=c;return !1}});return b},find:function(f,a,h,d,e,c){if(Ext.isEmpty(a,!1)){return null}var g=Ext.String.createRegex(a,d,e,c),b=this.getRootProperty();return this.findBy(function(i){return i&&g.test((b?i[b]:i)[f])},null,h)},findIndex:function(f,a,h,d,e,c){if(Ext.isEmpty(a,!1)){return null}var g=Ext.String.createRegex(a,d,e,c),b=this.getRootProperty();return this.findIndexBy(function(i){return i&&g.test((b?i[b]:i)[f])},null,h)},getPageFromRecordIndex:function(a){return Math.floor(a/this.getPageSize())+1},addAll:function(a){this.addPage(1,a)},addPage:function(a,g){var c=this,d=c.getPageSize(),k=a+Math.floor((g.length-1)/d),i=(a-1)*d,j=c.indexMap,b,f,h,e;for(e=0;a<=k;a++,e+=d){b=Ext.Array.slice(g,e,e+d);for(f=0,h=b.length;f<h;f++){j[b[f].internalId]=i++}c.add(a,b);c.fireEvent('pageadd',c,a,b)}},getCount:function(){var a=Ext.util.LruCache.prototype.getCount.call(this);if(a){a=(a-1)*this.getPageSize()+this.last.value.length}return a},getByInternalId:function(b){var a=this.indexMap[b];if(a!=null){return this.getAt(a)}},indexOf:function(b){var a=-1;if(b){a=this.indexMap[b.internalId];if(a==null){a=-1}}return a},insert:function(){},remove:function(){},removeAt:function(){},removeAtKey:function(d){var b=this,a=b.getPage(d),f,c,e;if(a){if(b.fireEvent('beforepageremove',b,d,a)!==!1){f=a.length;for(c=0;c<f;c++){delete b.indexMap[a[c].internalId]}e=Ext.util.LruCache.prototype.removeAtKey.apply(this,arguments);b.fireEvent('pageremove',b,d,a);a.length=0}}return e},getPage:function(a){return this.get(a)},hasRange:function(e,d){var a=this,c=a.getPageFromRecordIndex(e),b=a.getPageFromRecordIndex(d);for(;c<=b;c++){if(!a.hasPage(c)){return !1}}return (b-1)*a._pageSize+a.getPage(b).length>d},hasPage:function(a){return !!this.get(a)},peekPage:function(a){return this.map[a]},getAt:function(a){return this.getRange(a,a+1)[0]},getRange:function(l,f){f--;if(!this.hasRange(l,f)){Ext.raise('PageMap asked for range which it does not have')}var c=this,k=Ext.Array,e=c.getPageSize(),g=c.getPageFromRecordIndex(l),h=c.getPageFromRecordIndex(f),m=(g-1)*e,n=h*e-1,a=g,j=[],d,i,b;for(;a<=h;a++){if(a===g){d=l-m;b=d>0}else {d=0;b=!1}if(a===h){i=e-(n-f);b=b||i<e}if(b){k.push(j,k.slice(c.getPage(a),d,i))}else {k.push(j,c.getPage(a))}}return j},destroy:function(){Ext.util.LruCache.prototype.destroy.call(this);this.indexMap={}}},0,0,0,0,0,0,[Ext.data,'PageMap'],0);Ext.cmd.derive('Ext.data.BufferedStore',Ext.data.ProxyStore,{isBufferedStore:!0,buffered:!0,config:{data:0,pageSize:25,remoteSort:!0,remoteFilter:!0,sortOnLoad:!1,purgePageCount:5,trailingBufferZone:25,leadingBufferZone:200,defaultViewSize:100,viewSize:0,trackRemoved:!1},applyData:function(b){var a=this.data||(this.data=this.createDataCollection());return a},applyProxy:function(a){a=Ext.data.ProxyStore.prototype.applyProxy.call(this,a);if(a&&a.setEnablePaging){a.setEnablePaging(!0)}return a},applyAutoSort:function(){},createFiltersCollection:function(){return new Ext.util.FilterCollection()},createSortersCollection:function(){return new Ext.util.SorterCollection()},updateGroupField:function(a){this.group(a)},getGrouper:function(){return this.grouper},isGrouped:function(){return !!this.grouper},createDataCollection:function(){var a=this,b=new Ext.data.PageMap({store:a,rootProperty:'data',pageSize:a.getPageSize(),maxSize:a.getPurgePageCount(),listeners:{clear:a.onPageMapClear,scope:a}});a.relayEvents(b,['beforepageremove','pageadd','pageremove']);a.pageRequests={};return b},removeAll:function(b){var a=this,c=a.getData();if(c){if(b){a.suspendEvent('clear')}c.clear();if(b){a.resumeEvent('clear')}}},flushLoad:function(){var b=this,a=b.pendingLoadOptions;b.clearLoadTask();if(!a){return}b.getData().clear();a.page=1;a.start=0;a.limit=b.getViewSize()||b.getDefaultViewSize();a.loadCallback=a.callback;a.callback=null;return b.loadToPrefetch(a)},reload:function(d){var a=this,f=a.getData(),i=Number.MAX_VALUE,c,b,j,k,g,e,h,l;if(!d){d={}}if(a.loading||a.fireEvent('beforeload',a,d)===!1){return}e=function(){var g=a.totalCount,h=b-c;if(b>=g){b=g-1;c=Math.max(b-h,0)}if(a.rangeCached(c,Math.min(b,a.totalCount))){a.loadCount=(a.loadCount||0)+1;a.loading=!1;f.un('pageadd',e);l=f.getRange(c,b+1);a.fireEvent('load',a,l,!0);a.fireEvent('refresh',a)}};h=Math.ceil((a.getLeadingBufferZone()+a.getTrailingBufferZone())/2);if(a.lastRequestStart&&a.preserveScrollOnReload){c=a.lastRequestStart;b=a.lastRequestEnd;i=a.getTotalCount()}else {c=d.start||0;b=c+(d.count||a.getPageSize())-1}f.clear(!0);delete a.totalCount;c=Math.max(c-h,0);b=Math.min(b+h,i);c=c===0?0:c-1;b=b===i?b:b+1;j=a.getPageFromRecordIndex(c);k=a.getPageFromRecordIndex(b);a.loading=!0;d.waitForReload=e;f.on('pageadd',e);for(g=j;g<=k;g++){a.prefetchPage(g,d)}},filter:function(){Ext.data.ProxyStore.prototype.filter.apply(this,arguments)},filterBy:function(b,a){},loadData:function(b,a){},loadPage:function(c,a){var b=this;a=a||{};a.page=b.currentPage=c;a.start=(c-1)*b.getPageSize();a.limit=b.getViewSize()||b.getDefaultViewSize();a.loadCallback=a.callback;a.callback=null;return b.loadToPrefetch(a)},clearData:function(c){var b=this,a=b.getData();if(a){a.clear()}},getCount:function(){return this.totalCount||0},getRange:function(c,b,d){var a=this,k=a.totalCount-1,m=a.lastRequestStart,l=[],f=a.getData(),e,i,j,g,h;d=Ext.apply({prefetchStart:c,prefetchEnd:b},d);b=b>=a.totalCount?k:b;i=c===0?0:c-1;j=b===k?b:b+1;a.lastRequestStart=c;a.lastRequestEnd=b;if(a.rangeCached(c,b)){a.onRangeAvailable(d);l=f.getRange(c,b+1)}else {a.fireEvent('cachemiss',a,c,b);g=a.getPageFromRecordIndex(i);h=a.getPageFromRecordIndex(j);e=function(j,i,k){if(i>=g&&i<=h&&a.rangeCached(c,b)){a.fireEvent('cachefilled',a,c,b);f.un('pageadd',e);a.onRangeAvailable(d)}};f.on('pageadd',e);a.prefetchRange(c,b)}a.primeCache(c,b,c<m?-1:1);return l},getById:function(b){var a=this.data.findBy(function(a){return a.getId()===b});return a},getAt:function(a){var b=this.getData();if(b.hasRange(a,a)){return b.getAt(a)}},getByInternalId:function(a){return this.data.getByInternalId(a)},contains:function(a){return this.indexOf(a)>-1},indexOf:function(a){return this.getData().indexOf(a)},indexOfId:function(a){return this.indexOf(this.getById(a))},group:function(b,d){var a=this,c;if(b&&typeof b==='string'){c=a.grouper;if(c&&d!==undefined){c.setDirection(d)}else {a.grouper=new Ext.util.Grouper({property:b,direction:d||'ASC',root:'data'})}}else {a.grouper=b?a.getSorters().decodeSorter(b,'Ext.util.Grouper'):null}a.getData().clear();a.loadPage(1,{callback:function(){a.fireEvent('groupchange',a,a.getGrouper())}})},getPageFromRecordIndex:function(a){return Math.floor(a/this.getPageSize())+1},calculatePageCacheSize:function(c){var a=this,b=a.getPurgePageCount();return b?Math.max(a.getData().getMaxSize()||0,Math.ceil((c+a.getTrailingBufferZone()+a.getLeadingBufferZone())/a.getPageSize())*2+b):0},loadToPrefetch:function(b){var a=this,f=b,h,d,i,e=b.start,k=b.start+b.limit-1,m=a.getViewSize()||b.limit,c=Math.min(k,b.start+m-1),p=a.getPageFromRecordIndex(Math.max(e-a.getTrailingBufferZone(),0)),q=a.getPageFromRecordIndex(k+a.getLeadingBufferZone()),g=a.getData(),j=function(){d=d||[];if(b.loadCallback){b.loadCallback.call(b.scope||a,d,o,!0)}if(b.callback){b.callback.call(b.scope||a,d,e||0,k||0,b)}},n=function(){a.loadCount=(a.loadCount||0)+1;a.fireEvent('datachanged',a);a.fireEvent('refresh',a);a.fireEvent('load',a,d,!0)},l=function(){if(a.rangeCached(e,c)){a.loading=!1;d=g.getRange(e,c+1);g.un('pageadd',l);if(a.hasListeners.guaranteedrange){a.guaranteeRange(e,c,b.callback,b.scope)}j();n()}},o;g.setMaxSize(a.calculatePageCacheSize(m));if(a.fireEvent('beforeload',a,b)!==!1){delete a.totalCount;a.loading=!0;if(b.callback){f=Ext.apply({},b);delete f.callback}a.on('prefetch',function(m,e,d,k){o=k;if(d){if(i=a.getTotalCount()){g.on('pageadd',l);c=Math.min(c,i-1);q=a.getPageFromRecordIndex(Math.min(c+a.getLeadingBufferZone(),i-1));for(h=p+1;h<=q;++h){a.prefetchPage(h,f)}}else {j();n()}}else {a.loading=!1;j();a.fireEvent('load',a,e,!1)}},null,{single:!0});a.prefetchPage(p,f)}},prefetch:function(b){var a=this,c=a.getPageSize(),d=a.getData(),e,f;if(c){if(a.lastPageSize&&c!=a.lastPageSize){Ext.raise('pageSize cannot be dynamically altered')}if(!d.getPageSize()){d.setPageSize(c)}}else {a.pageSize=d.setPageSize(c=b.limit)}a.lastPageSize=c;if(!b.page){b.page=a.getPageFromRecordIndex(b.start);b.start=(b.page-1)*c;b.limit=Math.ceil(b.limit/c)*c}f=a.pageRequests[b.page];if(!f||f.getOperation().pageMapGeneration!==d.pageMapGeneration){b=Ext.apply({action:'read',filters:a.getFilters().items,sorters:a.getSorters().items,grouper:a.getGrouper(),internalCallback:a.onProxyPrefetch,internalScope:a},b);e=a.createOperation('read',b);e.pageMapGeneration=d.pageMapGeneration;if(a.fireEvent('beforeprefetch',a,e)!==!1){a.pageRequests[b.page]=e.execute();if(a.getProxy().isSynchronous){delete a.pageRequests[b.page]}}}return a},onPageMapClear:function(){var a=this,e=a.wasLoading,d=a.pageRequests,b=a.getData(),c;b.clearListeners();b.on('clear',a.onPageMapClear,a);a.relayEvents(b,['beforepageremove','pageadd','pageremove']);a.loading=!0;a.totalCount=0;for(c in d){if(d.hasOwnProperty(c)){d[c].getOperation().abort()}}a.fireEvent('clear',a);a.loading=e},prefetchPage:function(d,e){var a=this,b=a.getPageSize(),f=(d-1)*b,c=a.totalCount;if(c!==undefined&&a.data.getCount()===c){return}a.prefetch(Ext.applyIf({page:d,start:f,limit:b},e))},onProxyPrefetch:function(b){if(this.destroyed){return}var a=this,g=b.getResultSet(),e=b.getRecords(),d=b.wasSuccessful(),i=b.getPage(),c=b.waitForReload,k=a.totalCount,h=a.pageRequests,j,f;if(b.pageMapGeneration===a.getData().pageMapGeneration){if(g){a.totalCount=g.getTotal();if(a.totalCount!==k){a.fireEvent('totalcountchange',a.totalCount)}}if(i!==undefined){delete a.pageRequests[i]}a.loading=!1;a.fireEvent('prefetch',a,e,d,b);if(d){if(a.totalCount===0){if(c){for(j in h){f=h[j].getOperation();if(f.waitForReload===c){delete f.waitForReload}}a.getData().un('pageadd',c);a.fireEvent('load',a,[],!0);a.fireEvent('refresh',a)}}else {a.cachePage(e,b.getPage())}}Ext.callback(b.getCallback(),b.getScope()||a,[e,b,d])}},cachePage:function(b,d){var a=this,e=b.length,c;if(!Ext.isDefined(a.totalCount)){a.totalCount=b.length;a.fireEvent('totalcountchange',a.totalCount)}for(c=0;c<e;c++){b[c].join(a)}a.getData().addPage(d,b)},rangeCached:function(b,a){var c=b===0?0:b-1,d=a===this.totalCount-1?a:a+1;return this.getData().hasRange(c,d)},pageCached:function(a){return this.getData().hasPage(a)},pagePending:function(a){return !!this.pageRequests[a]},rangeSatisfied:function(a,b){return this.rangeCached(a,b)},onRangeAvailable:function(a){var c=this,f=c.getTotalCount(),e=a.prefetchStart,b=a.prefetchEnd>f-1?f-1:a.prefetchEnd,d;b=Math.max(0,b);d=c.getData().getRange(e,b+1);if(a.fireEvent!==!1){c.fireEvent('guaranteedrange',d,e,b,a)}if(a.callback){a.callback.call(a.scope||c,d,e,b,a)}},guaranteeRange:function(d,e,b,c,a){a=Ext.apply({callback:b,scope:c},a);this.getRange(d,e+1,a)},prefetchRange:function(c,d){var a=this,e,f,b,g=a.getData();if(!a.rangeCached(c,d)){e=a.getPageFromRecordIndex(c);f=a.getPageFromRecordIndex(d);g.setMaxSize(a.calculatePageCacheSize(d-c+1));for(b=e;b<=f;b++){if(!a.pageCached(b)){a.prefetchPage(b)}}}},primeCache:function(a,b,g){var c=this,f=c.getLeadingBufferZone(),e=c.getTrailingBufferZone(),h=c.getPageSize(),d=c.totalCount;if(g===-1){a=Math.max(a-f,0);b=Math.min(b+e,d-1)}else {if(g===1){a=Math.max(Math.min(a-e,d-h),0);b=Math.min(b+f,d-1)}else {a=Math.min(Math.max(Math.floor(a-(f+e)/2),0),d-c.pageSize);b=Math.min(Math.max(Math.ceil(b+(f+e)/2),0),d-1)}}c.prefetchRange(a,b)},sort:function(b,a,c){if(arguments.length===0){this.clearAndLoad()}else {this.getSorters().addSort(b,a,c)}},onSorterEndUpdate:function(){var a=this,b=a.getSorters().getRange();if(b.length){a.fireEvent('beforesort',a,b);a.clearAndLoad({callback:function(){a.fireEvent('sort',a,b)}})}else {a.fireEvent('sort',a,b)}},clearAndLoad:function(b){var a=this;a.clearing=!0;a.getData().clear();a.clearing=!1;a.loadPage(1,b)},privates:{isLast:function(a){return this.indexOf(a)===this.getTotalCount()-1},isMoving:function(){return !1}}},0,0,0,0,['store.buffered'],0,[Ext.data,'BufferedStore'],0);Ext.cmd.derive('Ext.data.proxy.Direct',Ext.data.proxy.Server,{alternateClassName:'Ext.data.DirectProxy',config:{paramOrder:undefined,paramsAsHash:!0,directFn:undefined,api:undefined,metadata:undefined},paramOrderRe:/[\s,|]/,constructor:function(a){Ext.data.proxy.Server.prototype.constructor.call(this,a);this.canceledOperations={}},applyParamOrder:function(a){if(Ext.isString(a)){a=a.split(this.paramOrderRe)}return a},updateApi:function(){this.methodsResolved=!1},updateDirectFn:function(){this.methodsResolved=!1},resolveMethods:function(){var d=this,a=d.getDirectFn(),b=d.getApi(),e=Ext.direct.Manager,c;if(a){d.setDirectFn(c=e.parseMethod(a));if(!Ext.isFunction(c)){Ext.raise('Cannot resolve directFn '+a)}}if(b){for(a in b){if(b.hasOwnProperty(a)){c=b[a];b[a]=e.parseMethod(c);if(!Ext.isFunction(b[a])){Ext.raise('Cannot resolve Direct api '+a+' method '+c)}}}}d.methodsResolved=!0},doRequest:function(d){var a=this,g,b,e,f,h,i,c,j;if(!a.methodsResolved){a.resolveMethods()}b=a.buildRequest(d);e=b.getAction();i=a.getApi();if(i){c=i[e]}c=c||a.getDirectFn();g=a.getWriter();if(g&&d.allowWrite()){b=g.write(b)}if(e==='read'){f=b.getParams()}else {f=b.getJsonData()}h=c.directCfg.method.getArgs({params:f,paramOrder:a.getParamOrder(),paramsAsHash:a.getParamsAsHash(),metadata:a.getMetadata(),callback:a.createRequestCallback(b,d),scope:a});b.setConfig({args:h,directFn:c});c.apply(window,h);return b},abort:function(a){var b;if(!a){return}if(a.isOperation){b=a.id}else {if(a.operation.isOperation){b=a.operation.id}}if(b!=null){this.canceledOperations[b]=!0}},applyEncoding:Ext.identityFn,createRequestCallback:function(c,a){var b=this;return function(e,d){if(!b.canceledOperations[a.id]){b.processResponse(d.status,a,c,d)}delete b.canceledOperations[a.id]}},extractResponseData:function(a){return Ext.isDefined(a.result)?a.result:a.data},setException:function(a,b){a.setException(b.message)},buildUrl:function(){return ''}},1,0,0,0,['proxy.direct'],0,[Ext.data.proxy,'Direct',Ext.data,'DirectProxy'],0);Ext.define('TS.overrides.data.proxy.Direct',{override:'Ext.data.proxy.Direct',doRequest:function(d){var a=this,g,b,e,f,h,i,c,l,k,j;if(!a.methodsResolved){a.resolveMethods()}b=a.buildRequest(d);e=b.getAction();i=a.getApi();if(i){c=i[e]}c=c||a.getDirectFn();g=a.getWriter();if(g&&d.allowWrite()){b=g.write(b)}if(e==='read'){f=b.getParams();k=a.getParamOrder();j=a.getParamsAsHash()}else {f=b.getJsonData()}h=c.directCfg.method.getArgs({params:f,paramOrder:k,paramsAsHash:j,metadata:a.getMetadata(),callback:a.createRequestCallback(b,d),scope:a});b.setConfig({args:h,directFn:c});c.apply(window,h);return b}});Ext.cmd.derive('Ext.data.JsonP',Ext.Base,{singleton:!0,requestCount:0,requests:{},timeout:30000,disableCaching:!0,disableCachingParam:'_dc',callbackKey:'callback',request:function(a){a=Ext.apply({},a);var b=this,l=Ext.isDefined(a.disableCaching)?a.disableCaching:b.disableCaching,h=a.disableCachingParam||b.disableCachingParam,f=++b.requestCount,e=a.callbackName||'callback'+f,g=a.callbackKey||b.callbackKey,i=Ext.isDefined(a.timeout)?a.timeout:b.timeout,d=Ext.apply({},a.params),k=a.url,m=Ext.name,c,j;if(l&&!d[h]){d[h]=Ext.Date.now()}a.params=d;d[g]=m+'.data.JsonP.'+e;j=b.createScript(k,d,a);b.requests[f]=c={url:k,params:d,script:j,id:f,scope:a.scope,success:a.success,failure:a.failure,callback:a.callback,callbackKey:g,callbackName:e};if(i>0){c.timeout=Ext.defer(b.handleTimeout,i,b,[c])}b.setupErrorHandling(c);b[e]=Ext.bind(b.handleResponse,b,[c],!0);b.loadScript(c);return c},abort:function(a){var d=this,b=d.requests,c;if(a){if(!a.id){a=b[a]}d.handleAbort(a)}else {for(c in b){if(b.hasOwnProperty(c)){d.abort(b[c])}}}},setupErrorHandling:function(a){a.script.onerror=Ext.bind(this.handleError,this,[a])},handleAbort:function(a){a.errorType='abort';this.handleResponse(null,a)},handleError:function(a){a.errorType='error';this.handleResponse(null,a)},cleanupErrorHandling:function(a){a.script.onerror=null},handleTimeout:function(a){a.errorType='timeout';this.handleResponse(null,a)},handleResponse:function(d,a){var c=!0,b=Ext.GlobalEvents;if(a.timeout){clearTimeout(a.timeout)}delete this[a.callbackName];delete this.requests[a.id];this.cleanupErrorHandling(a);Ext.fly(a.script).destroy();if(a.errorType){c=!1;Ext.callback(a.failure,a.scope,[a.errorType])}else {Ext.callback(a.success,a.scope,[d])}Ext.callback(a.callback,a.scope,[c,d,a.errorType]);if(b.hasListeners.idle){b.fireEvent('idle')}},createScript:function(c,b,d){var a=document.createElement('script');a.setAttribute('src',Ext.urlAppend(c,Ext.Object.toQueryString(b)));a.setAttribute('async',!0);a.setAttribute('type','text/javascript');return a},loadScript:function(a){Ext.getHead().appendChild(a.script)}},0,0,0,0,0,0,[Ext.data,'JsonP'],0);Ext.cmd.derive('Ext.data.NodeInterface',Ext.Base,{statics:{decorate:function(f){var a=Ext.data.schema.Schema.lookupEntity(f),e=a.prototype,c,b,d;if(!a.prototype.isObservable){a.mixin(Ext.mixin.Observable.prototype.mixinId,Ext.mixin.Observable)}if(e.isNode){return}c=e.idProperty;b=a.getField(c);d=b.type;a.override(this.getPrototypeBody());a.addFields([{name:'parentId',type:d,defaultValue:null,allowNull:b.allowNull},{name:'index',type:'int',defaultValue:-1,persist:!1,convert:null},{name:'depth',type:'int',defaultValue:0,persist:!1,convert:null},{name:'expanded',type:'bool',defaultValue:!1,persist:!1,convert:null},{name:'expandable',type:'bool',defaultValue:!0,persist:!1,convert:null},{name:'checked',type:'auto',defaultValue:null,persist:!1,convert:null},{name:'leaf',type:'bool',defaultValue:!1},{name:'cls',type:'string',defaultValue:'',persist:!1,convert:null},{name:'iconCls',type:'string',defaultValue:'',persist:!1,convert:null},{name:'icon',type:'string',defaultValue:'',persist:!1,convert:null},{name:'root',type:'boolean',defaultValue:!1,persist:!1,convert:null},{name:'isLast',type:'boolean',defaultValue:!1,persist:!1,convert:null},{name:'isFirst',type:'boolean',defaultValue:!1,persist:!1,convert:null},{name:'allowDrop',type:'boolean',defaultValue:!0,persist:!1,convert:null},{name:'allowDrag',type:'boolean',defaultValue:!0,persist:!1,convert:null},{name:'loaded',type:'boolean',defaultValue:!1,persist:!1,convert:null},{name:'loading',type:'boolean',defaultValue:!1,persist:!1,convert:null},{name:'href',type:'string',defaultValue:'',persist:!1,convert:null},{name:'hrefTarget',type:'string',defaultValue:'',persist:!1,convert:null},{name:'qtip',type:'string',defaultValue:'',persist:!1,convert:null},{name:'qtitle',type:'string',defaultValue:'',persist:!1,convert:null},{name:'qshowDelay',type:'int',defaultValue:0,persist:!1,convert:null},{name:'children',type:'auto',defaultValue:null,persist:!1,convert:null},{name:'visible',type:'boolean',defaultValue:!0,persist:!1},{name:'text',type:'string',persist:!1}])},getPrototypeBody:function(){var a={idchanged:!0,append:!0,remove:!0,move:!0,insert:!0,beforeappend:!0,beforeremove:!0,beforemove:!0,beforeinsert:!0,expand:!0,collapse:!0,beforeexpand:!0,beforecollapse:!0,sort:!0},b={silent:!0};return {isNode:!0,firstChild:null,lastChild:null,parentNode:null,previousSibling:null,nextSibling:null,constructor:function(){var a=this;a.mixins.observable.constructor.call(a);a.callParent(arguments);a.childNodes=[];return a},createNode:function(a){var b=this,j=b.childType,h,f,g,c,d,e,i=b.self;if(!a.isModel){if(j){i=b.schema.getEntity(j)}else {h=b.getTreeStore();f=h&&h.getProxy().getReader();g=b.getProxy();c=g?g.getReader():null;d=!f||c&&c.initialConfig.typeProperty?c:f;if(d){e=d.getTypeProperty();if(e){i=d.getChildType(b.schema,a,e)}}}a=new i(a)}if(!a.childNodes){a.firstChild=a.lastChild=a.parentNode=a.previousSibling=a.nextSibling=null;a.childNodes=[]}return a},isLeaf:function(){return this.get('leaf')===!0},setFirstChild:function(a){this.firstChild=a},setLastChild:function(a){this.lastChild=a},updateInfo:function(o,k){var a=this,i=a.data,r=i.depth,m={},n=a.childNodes,q=n.length,s=a.phantom,t=a.fields,c=a.modified||(a.modified={}),b,e,j,d,p,l=k.parentId,g,h,f;for(b in k){j=t[a.fieldOrdinals[b]];e=k[b];h=j&&j.persist;d=i[b];g=h&&b==='index'&&d!==-1&&(l&&l!==c.parentId);if(!g&&a.isEqual(d,e)){continue}i[b]=e;if(h){if(!g&&c.hasOwnProperty(b)){if(a.isEqual(c[b],e)){delete c[b];a.dirty=!1;for(p in c){if(c.hasOwnProperty(p)){a.dirty=!0;break}}}}else {a.dirty=!0;c[b]=d}}}if(o){a.commit();a.phantom=s}if(a.data.depth!==r){m={depth:a.data.depth+1};for(f=0;f<q;f++){n[f].updateInfo(o,m)}}},isLast:function(){return this.get('isLast')},isFirst:function(){return this.get('isFirst')},hasChildNodes:function(){return !this.isLeaf()&&this.childNodes.length>0},isExpandable:function(){var a=this;if(a.get('expandable')){return !(a.isLeaf()||a.isLoaded()&&!a.phantom&&!a.hasChildNodes())}return !1},triggerUIUpdate:function(){this.callJoined('afterEdit',[])},appendChild:function(b,h,l){var a=this,j,m,c,e,f,k={isLast:!0,parentId:a.getId(),depth:(a.data.depth||0)+1},i,d=a.getTreeStore(),g=d&&d.bulkUpdate;Ext.suspendLayouts();if(Ext.isArray(b)){m=b.length;i=new Array(m);a.callTreeStore('beginFill');for(j=0;j<m;j++){i[j]=a.appendChild(b[j],h,l)}a.callTreeStore('endFill',[i])}else {b=a.createNode(b);if(h!==!0&&a.fireEventArgs('beforeappend',[a,b])===!1){Ext.resumeLayouts(!0);return !1}c=a.childNodes.length;e=b.parentNode;if(e){if(h!==!0&&b.fireEventArgs('beforemove',[b,e,a,c])===!1){Ext.resumeLayouts(!0);return !1}if(e.removeChild(b,!1,h,e.getTreeStore()===d)===!1){Ext.resumeLayouts(!0);return !1}}d&&d.beginUpdate();c=a.childNodes.length;if(c===0){a.setFirstChild(b)}a.childNodes[c]=b;b.parentNode=a;b.nextSibling=null;a.setLastChild(b);f=a.childNodes[c-1];if(f){b.previousSibling=f;f.nextSibling=b;f.updateInfo(l,{isLast:!1});if(!g){f.triggerUIUpdate()}}else {b.previousSibling=null}k.isFirst=c===0;k.index=c;b.updateInfo(l,k);if(a.isLeaf()){a.set('leaf',!1)}if(!a.isLoaded()){if(g){a.data.loaded=!0}else {a.set('loaded',!0)}}else {if(a.childNodes.length===1&&!g){a.triggerUIUpdate()}}if(c&&a.childNodes[c-1].isExpanded()&&!g){a.childNodes[c-1].cascadeBy(a.triggerUIUpdate)}if(d){d.registerNode(a,!g);if(g){d.registerNode(b)}}if(h!==!0){a.fireEventArgs('append',[a,b,c]);if(e){b.fireEventArgs('move',[b,e,a,c])}}a.callTreeStore('onNodeAppend',[b,c]);i=b;if(d){d.endUpdate()}}Ext.resumeLayouts(!0);return i},getOwnerTree:function(){var a=this.getTreeStore();if(a){return a.ownerTree}},getTreeStore:function(){var a=this;while(a&&!a.treeStore){a=a.parentNode}return a&&a.treeStore},removeChild:function(a,m,i,f){var c=this,h=c.indexOf(a),g,l,d,e=c.getTreeStore(),k=e&&e.bulkUpdate,j;if(h===-1||i!==!0&&c.fireEventArgs('beforeremove',[c,a,!!f])===!1){return !1}Ext.suspendLayouts();e&&e.beginUpdate();Ext.Array.erase(c.childNodes,h,1);if(c.firstChild===a){c.setFirstChild(a.nextSibling)}if(c.lastChild===a){c.setLastChild(a.previousSibling)}d=a.previousSibling;if(d){a.previousSibling.nextSibling=a.nextSibling}if(a.nextSibling){a.nextSibling.previousSibling=a.previousSibling;if(h===0){a.nextSibling.updateInfo(!1,{isFirst:!0})}for(g=h,l=c.childNodes.length;g<l;g++){c.childNodes[g].updateInfo(!1,{index:g})}}else {if(d){d.updateInfo(!1,{isLast:!0});if(!k){if(d.isExpanded()){d.cascadeBy(c.triggerUIUpdate)}else {d.triggerUIUpdate()}}}}if(!c.childNodes.length&&!k){c.triggerUIUpdate()}Ext.resumeLayouts(!0);if(i!==!0){j={parentNode:a.parentNode,previousSibling:a.previousSibling,nextSibling:a.nextSibling};c.callTreeStore('beforeNodeRemove',[[a],!!f]);a.previousSibling=a.nextSibling=a.parentNode=null;c.fireEventArgs('remove',[c,a,!!f,j]);c.callTreeStore('onNodeRemove',[[a],!!f])}if(m){a.erase(!0)}else {a.clear()}if(!f){a.set({parentId:null,lastParentId:c.getId()},b)}if(e){e.endUpdate()}return a},copy:function(d,e){var a=this,c=a.callParent([d]),f=a.childNodes?a.childNodes.length:0,b;if(e){for(b=0;b<f;b++){c.appendChild(a.childNodes[b].copy(undefined,!0))}}return c},clear:function(c,b){var a=this,d;a.parentNode=a.previousSibling=a.nextSibling=null;if(c){a.firstChild=a.lastChild=a.childNodes=null}if(b){a.firstChild=a.lastChild=null;a.childNodes.length=0;if(a.data){a.data.children=null}}},drop:function(){var b=this,d=b.childNodes,f=b.parentNode,g=d?d.length:0,c,e,a;b.callParent();if(f){a=b.getTreeStore();f.removeChild(b)}else {if(b.get('root')){a=b.getTreeStore();a.setRoot(null)}}a&&a.beginUpdate();for(c=0;c<g;c++){e=d[c];e.clear();e.drop()}a&&a.endUpdate()},erase:function(e){var a=this,c=a.childNodes,f=c&&c.length,b,d;a.remove();a.clear(!0);a.callParent([e]);for(b=0;b<f;b++){d=c[b];d.parentNode=null;d.erase(e)}},insertBefore:function(b,e,i){var a=this,k=a.indexOf(e),f=b.parentNode,d=k,l,h,g,c=a.getTreeStore(),j=c&&c.bulkUpdate;if(!e){return a.appendChild(b)}if(b===e){return !1}b=a.createNode(b);if(i!==!0&&a.fireEventArgs('beforeinsert',[a,b,e])===!1){return !1}if(f===a&&a.indexOf(b)<k){d--}if(f){if(i!==!0&&b.fireEventArgs('beforemove',[b,f,a,k,e])===!1){return !1}if(f.removeChild(b,!1,i,f.getTreeStore()===c)===!1){return !1}}c&&c.beginUpdate();if(d===0){a.setFirstChild(b)}Ext.Array.splice(a.childNodes,d,0,b);b.parentNode=a;b.nextSibling=e;e.previousSibling=b;h=a.childNodes[d-1];if(h){b.previousSibling=h;h.nextSibling=b}else {b.previousSibling=null}b.updateInfo(!1,{parentId:a.getId(),index:d,isFirst:d===0,isLast:!1,depth:(a.data.depth||0)+1});for(g=d+1,l=a.childNodes.length;g<l;g++){a.childNodes[g].updateInfo(!1,{index:g})}if(!a.isLoaded()){if(j){a.data.loaded=!0}else {a.set('loaded',!0)}}else {if(a.childNodes.length===1&&!j){a.triggerUIUpdate()}}if(c){c.registerNode(a,!j)}if(i!==!0){a.fireEventArgs('insert',[a,b,e]);if(f){b.fireEventArgs('move',[b,f,a,d,e])}}a.callTreeStore('onNodeInsert',[b,d]);if(c){c.endUpdate()}return b},insertChild:function(c,b){var a=this.childNodes[c];if(a){return this.insertBefore(b,a)}else {return this.appendChild(b)}},isLastVisible:function(){var b=this,c=b.data.isLast,a=b.nextSibling;if(!c&&b.getTreeStore().isFiltered()){while(a){if(a.data.visible){return !1}a=a.nextSibling}return !0}return c},remove:function(c,d){var a=this,b=a.parentNode;if(b){b.removeChild(a,c,d)}else {if(c){a.erase(!0)}}return a},removeAll:function(i,h,f){var a=this,d=a.childNodes,g=d.length,c,b,e;if(!g){return}if(!f){b=a.getTreeStore();if(b){b.beginUpdate();b.suspendEvent('remove');a.callTreeStore('beforeNodeRemove',[d,!1])}}for(e=0;e<g;++e){c=d[e];c.previousSibling=c.nextSibling=c.parentNode=null;a.fireEventArgs('remove',[a,c,!1]);if(i){c.erase(!0)}else {c.removeAll(!1,h,!0)}}if(!f&&b){b.resumeEvent('remove');a.callTreeStore('onNodeRemove',[d,!1]);b.endUpdate()}a.firstChild=a.lastChild=null;d.length=0;if(!f){a.triggerUIUpdate()}return a},getChildAt:function(a){return this.childNodes[a]},replaceChild:function(c,a,b){var d=a?a.nextSibling:null;this.removeChild(a,!1,b);this.insertBefore(c,d,b);return a},indexOf:function(a){return Ext.Array.indexOf(this.childNodes,a)},indexOfId:function(d){var b=this.childNodes,c=b.length,a=0;for(;a<c;++a){if(b[a].getId()===d){return a}}return -1},getPath:function(c,a){c=c||this.idProperty;a=a||'/';var d=[this.get(c)],b=this.parentNode;while(b){d.unshift(b.get(c));b=b.parentNode}return a+d.join(a)},getDepth:function(){return this.get('depth')},bubble:function(d,b,c){var a=this;while(a){if(d.apply(b||a,c||[a])===!1){break}a=a.parentNode}},cascadeBy:function(a,e,f,d){var b=this;if(arguments.length===1&&!Ext.isFunction(a)){d=a.after;e=a.scope;f=a.args;a=a.before}if(!a||a.apply(e||b,f||[b])!==!1){var g=b.childNodes,h=g.length,c;for(c=0;c<h;c++){g[c].cascadeBy.call(g[c],a,e,f,d)}if(d){d.apply(e||b,f||[b])}}},eachChild:function(f,d,e){var b=this.childNodes,c=b.length,a;for(a=0;a<c;a++){if(f.apply(d||this,e||[b[a]])===!1){break}}},findChild:function(a,b,c){return this.findChildBy(function(){return this.get(a)==b},null,c)},findChildBy:function(g,d,e){var f=this.childNodes,h=f.length,c=0,a,b;for(;c<h;c++){a=f[c];if(g.call(d||a,a)===!0){return a}else {if(e){b=a.findChildBy(g,d,e);if(b!==null){return b}}}}return null},contains:function(a){return a.isAncestor(this)},isAncestor:function(b){var a=this.parentNode;while(a){if(a===b){return !0}a=a.parentNode}return !1},sort:function(e,i,h){var c=this,a=c.childNodes,g=a.length,b,d,f={isFirst:!0};if(g>0){if(!e){e=c.getTreeStore().getSortFn()}Ext.Array.sort(a,e);c.setFirstChild(a[0]);c.setLastChild(a[g-1]);for(b=0;b<g;b++){d=a[b];d.previousSibling=a[b-1];d.nextSibling=a[b+1];f.isLast=b===g-1;f.index=b;d.updateInfo(!1,f);f.isFirst=!1;if(i&&!d.isLeaf()){d.sort(e,!0,!0)}}if(h!==!0){c.fireEventArgs('sort',[c,a]);c.callTreeStore('onNodeSort',[a])}}},isExpanded:function(){return this.get('expanded')},isLoaded:function(){return this.get('loaded')},isBranchLoaded:function(){var a=!this.isLeaf()&&this.isLoaded();if(a){this.cascadeBy(function(b){if(!b.isLeaf()){a=a||b.isBranchLoaded()}return a})}return a},isLoading:function(){return this.get('loading')},isRoot:function(){return !this.parentNode},isVisible:function(){var a=this.parentNode;while(a){if(!a.isExpanded()){return !1}a=a.parentNode}return !0},expand:function(e,c,d){var a=this,b,f;if(!a.isLeaf()){if(a.isLoading()){a.on('expand',function(){a.expand(e,c,d)},a,{single:!0})}else {if(!a.isExpanded()){if(a.fireEventArgs('beforeexpand',[a])!==!1){if(e){if(a.parentNode&&a.parentNode.isSynchronousRecursiveExpand){a.isSynchronousRecursiveExpand=!0}else {b=a.getTreeStore();if(b.getProxy().isSynchronous||a.isBranchLoaded()){a.isSynchronousRecursiveExpand=!0;b.suspendEvent('add');f=!0}}}a.callTreeStore('onBeforeNodeExpand',[a.onChildNodesAvailable,a,[e,c,d]]);if(f){b.resumeEvent('add');b.fireEvent('refresh',b)}a.isSynchronousRecursiveExpand=!1}}else {if(e){a.expandChildren(!0,c,d)}else {Ext.callback(c,d||a,[a.childNodes])}}}}else {Ext.callback(c,d||a)}},onChildNodesAvailable:function(h,j,g,i){var b=this,f=b.getTreeStore(),e=f&&f.bulkUpdate,a,d,c;Ext.suspendLayouts();for(a=b.parentNode;a;a=a.parentNode){if(!a.isExpanded()){(c||(c=[])).unshift(a)}}if(e){b.data.expanded=!0}else {b.set('expanded',!0)}if(c){for(d=1;d<c.length;d++){a=c[d];if(e){a.data.expanded=!0}else {a.set('expanded',!0)}}c[0].expand();for(d=1;d<c.length;d++){a=c[d];a.fireEventArgs('expand',[a,a.childNodes])}}else {b.callTreeStore('onNodeExpand',[h,!1])}b.fireEventArgs('expand',[b,h]);if(j){b.expandChildren(!0,g,i)}else {Ext.callback(g,i||b,[b.childNodes])}Ext.resumeLayouts(!0)},expandChildren:function(l,d,i,b){var g=this,k,a,e,c,f,j,h;if(Ext.isBoolean(d)){k=d;d=i;i=b;b=k}if(b===undefined){h=g.getTreeStore();b=h&&h.singleExpand}e=g.childNodes;c=[];f=b?Math.min(e.length,1):e.length;for(a=0;a<f;++a){j=e[a];if(!j.isLeaf()){c[c.length]=j}}f=c.length;for(a=0;a<f;++a){c[a].expand(l)}if(d){Ext.callback(d,i||g,[g.childNodes])}},collapse:function(f,b,d){var a=this,j=a.isExpanded(),g=a.getTreeStore(),i=g&&g.bulkUpdate,h=a.childNodes.length,c,e;if(!a.isLeaf()&&(!j&&f||a.fireEventArgs('beforecollapse',[a])!==!1)){Ext.suspendLayouts();if(a.isExpanded()){if(f){e=function(){for(c=0;c<h;c++){a.childNodes[c].setCollapsed(!0)}};if(b){b=Ext.Function.createSequence(e,Ext.Function.bind(b,d,[a.childNodes]))}else {b=e}}else {if(b){b=Ext.Function.bind(b,d,[a.childNodes])}}if(i){a.data.expanded=!1}else {a.set('expanded',!1)}a.callTreeStore('onNodeCollapse',[a.childNodes,b,d]);a.fireEventArgs('collapse',[a,a.childNodes]);b=null}else {if(f){for(c=0;c<h;c++){a.childNodes[c].setCollapsed(!0)}}}Ext.resumeLayouts(!0)}Ext.callback(b,d||a,[a.childNodes])},setCollapsed:function(c){var a=this,d=a.childNodes.length,b;if(!a.isLeaf()&&a.fireEventArgs('beforecollapse',[a])!==!1){a.data.expanded=!1;a.fireEventArgs('collapse',[a,a.childNodes]);if(c){for(b=0;b<d;b++){a.childNodes[b].setCollapsed(!0)}}}},collapseChildren:function(e,g,h){var i=this,a,f=i.childNodes,c=f.length,d=[],b;for(a=0;a<c;++a){b=f[a];if(!b.isLeaf()&&b.isLoaded()&&b.isExpanded()){d.push(b)}}c=d.length;if(c){for(a=0;a<c;++a){b=d[a];if(a===c-1){b.collapse(e,g,h)}else {b.collapse(e)}}}else {Ext.callback(g,h)}},fireEvent:function(a){return this.fireEventArgs(a,Ext.Array.slice(arguments,1))},fireEventArgs:function(c,g){var e=Ext.mixin.Observable.prototype.fireEventArgs,d,b,f;if(a[c]){for(b=this;d!==!1&&b;b=(f=b).parentNode){if(b.hasListeners&&b.hasListeners[c]){d=e.call(b,c,g)}}if(d!==!1){b=f.getTreeStore();if(b&&b.hasListeners&&b.hasListeners[c='node'+c]){d=b.fireEventArgs(c,g)}}return d}else {return e.apply(this,arguments)}},serialize:function(g){var e=g||new Ext.data.writer.Json({writeAllFields:!0}),d=e.getRecordData(this),b=this.childNodes,f=b.length,c,a;if(f>0){d.children=c=[];for(a=0;a<f;a++){c.push(b[a].serialize(e))}}return d},callTreeStore:function(e,a){var c=this,b=c.getTreeStore(),d=b&&b[e];if(b&&d){a=a||[];if(a[0]!==c){a.unshift(c)}d.apply(b,a)}},privates:{join:function(a){if(a.isTreeStore){if(this.isRoot()){this.treeStore=this.store=a}}else {this.callParent([a])}},callJoined:function(a,b){this.callParent([a,b]);this.callTreeStore(a,b)}}}}}},0,0,0,0,0,0,[Ext.data,'NodeInterface'],0);Ext.cmd.derive('Ext.data.TreeModel',Ext.data.Model,{getRefItems:function(){return this.childNodes},getRefOwner:function(){return this.parentNode},statics:{defaultProxy:'memory'}},0,0,0,0,0,[[Ext.mixin.Queryable.prototype.mixinId||Ext.mixin.Queryable.$className,Ext.mixin.Queryable]],[Ext.data,'TreeModel'],function(){Ext.data.NodeInterface.decorate(this)});Ext.cmd.derive('Ext.data.Request',Ext.Base,{config:{action:undefined,params:undefined,method:'GET',url:null,operation:null,proxy:null,disableCaching:!1,headers:{},callbackKey:null,rawRequest:null,jsonData:undefined,xmlData:undefined,withCredentials:!1,username:null,password:null,binary:!1,callback:null,scope:null,timeout:30000,records:null,directFn:null,args:null,useDefaultXhrHeader:null},constructor:function(a){this.initConfig(a)},getParam:function(b){var a=this.getParams(),c;if(a){return a[b]}return c},setParam:function(c,b){var a=this.getParams()||{};a[c]=b;this.setParams(a)}},1,0,0,0,0,0,[Ext.data,'Request'],0);Ext.cmd.derive('Ext.data.TreeStore',Ext.data.Store,{isTreeStore:!0,config:{root:null,rootVisible:!1,defaultRootProperty:'children',parentIdProperty:null,clearOnLoad:!0,clearRemovedOnLoad:!0,nodeParam:'node',defaultRootId:'root',defaultRootText:'Root',folderSort:!1,pageSize:null},filterer:'topdown',lazyFill:!1,fillCount:0,bulkUpdate:0,_silentOptions:{silent:!0},implicitModel:'Ext.data.TreeModel',constructor:function(a){var b=this;b.byIdMap={};Ext.data.Store.prototype.constructor.call(this,a)},applyFields:function(a,c){var b=this;if(a){if(b.defaultRootProperty!==b.self.prototype.config.defaultRootProperty){a=a.concat({name:b.defaultRootProperty,type:'auto',defaultValue:null,persist:!1})}}Ext.data.Store.prototype.applyFields.call(this,a,c)},onSorterEndUpdate:function(){var a=this,d=a.getSorters(),b=d.getRange(),c=a.getRoot(),e=a.getFolderSort();a.fireEvent('beforesort',a,b);if(c&&(e||b.length)){if(a.getRemoteSort()){if(b.length){a.load({callback:function(){a.fireEvent('sort',a,b)}})}}else {c.sort(this.getSortFn(),!0);a.fireEvent('datachanged',a);a.fireEvent('refresh',a);a.fireEvent('sort',a,b)}}else {a.fireEvent('sort',a,b)}},updateFolderSort:function(a){this.needsFolderSort=a;this.onSorterEndUpdate()},getSortFn:function(){return this._sortFn||(this._sortFn=this.createSortFn())},createSortFn:function(){var a=this,b=this.sorters.getSortFn();return function(d,e){var f,g,c=0;if(a.needsFolderSort){f=d.data.leaf?1:0;g=e.data.leaf?1:0;c=f-g}if(a.needsIndexSort&&c===0){c=d.data.index-e.data.index}return c||b(d,e)}},getTotalCount:function(){return this.getCount()},afterEdit:function(c,b){var a=this;if(a.getRoot()&&a.needsLocalFilter()){a.onFilterEndUpdate(a.getFilters())}Ext.data.Store.prototype.afterEdit.call(this,c,b)},afterReject:function(b){var a=this;if(a.contains(b)){a.onUpdate(b,Ext.data.Model.REJECT,null);a.fireEvent('update',a,b,Ext.data.Model.REJECT,null)}},afterCommit:function(c,a){var b=this;if(!a){a=null}if(b.contains(c)){b.onUpdate(c,Ext.data.Model.COMMIT,a);b.fireEvent('update',b,c,Ext.data.Model.COMMIT,a)}},fireChangeEvent:function(a){return !!this.byIdMap[a.id]},updateRootVisible:function(c){var a=this.getRoot(),b;if(a){b=this.getData();if(c){b.insert(0,a)}else {b.remove(a)}}},updateTrackRemoved:function(a){Ext.data.Store.prototype.updateTrackRemoved.apply(this,arguments);this.removedNodes=this.removed;this.removed=null},onDestroyRecords:function(c,b,a){if(a){this.removedNodes.length=0}},updateProxy:function(a){var b;if(a){if(a.setIdParam){a.setIdParam(this.getNodeParam())}b=a.getReader();if(Ext.isEmpty(b.getRootProperty())){b.setRootProperty(this.getDefaultRootProperty())}}},setProxy:function(a){this.changingProxy=!0;(arguments.callee.$previous||Ext.data.Store.prototype.setProxy).call(this,a);this.changingProxy=!1},updateModel:function(a){if(a){var b=a.prototype.isNode;Ext.data.NodeInterface.decorate(a);if(!b&&!this.changingProxy){this.getProxy().getReader().buildExtractors(!0)}}},onFilterEndUpdate:function(d){var a=this,e=d.length,b=a.getRoot(),g,h,c,f;if(!a.getRemoteFilter()){if(e){a.doFilter(b)}else {b.cascadeBy({after:function(b){b.set('visible',!0,a._silentOptions)}})}if(e){c=[];g=b.childNodes;for(f=0,e=g.length;f<e;f++){h=g[f];if(h.get('visible')){c.push(h)}}}else {c=b.childNodes}a.onNodeFilter(b,c);b.fireEvent('filterchange',b,c);a.fireEvent('filterchange',a,d);a.suppressNextFilter=!0;Ext.data.Store.prototype.onFilterEndUpdate.call(this,d);a.suppressNextFilter=!1}else {Ext.data.Store.prototype.onFilterEndUpdate.call(this,d)}},onNodeFilter:function(c,e){var a=this,d=a.getData(),b=[];if(a.getRootVisible()&&c.get('visible')){b.push(c)}a.handleNodeExpand(c,e,b);a.suspendEvents();d.splice(0,d.getCount(),b);a.resumeEvents();if(!a.suppressNextFilter){a.fireEvent('datachanged',a);a.fireEvent('refresh',a)}},onBeforeNodeExpand:function(a,f,h,c){var d=this,k,i,e,j,g,b;if(a.isLoaded()){b=[a.childNodes];if(c){b.push.apply(b,c)}Ext.callback(f,h||a,b)}else {if(a.isLoading()){d.on('load',function(){b=[a.childNodes];if(c){b.push.apply(b,c)}Ext.callback(f,h||a,b)},d,{single:!0,priority:1001})}else {k=d.getProxy().getReader();i=a.getProxy();e=i?i.getReader():null;j=e&&e.initialConfig.rootProperty?e:k;g=j.getRoot(a.raw||a.data);if(g||a.phantom&&!a.isRoot()){if(g){d.fillNode(a,j.extractData(g,{model:a.childType,recordCreator:d.recordCreator}))}b=[a.childNodes];if(c){b.push.apply(b,c)}Ext.callback(f,h||a,b)}else {d.read({node:a,onChildNodesAvailable:function(){delete d.lastOptions.onChildNodesAvailable;b=[a.childNodes];if(c){b.push.apply(b,c)}Ext.callback(f,h||a,b)}});d.flushLoad()}}}},onNodeExpand:function(b,e){var a=this,d=a.indexOf(b)+1,c=[];a.handleNodeExpand(b,e,c);if(!a.refreshCounter&&b.isRoot()&&!b.get('visible')){a.loadRecords(c)}else {a.insert(d,c)}},handleNodeExpand:function(d,c,e){var g=this,f=c?c.length:0,b,a;if(d!==this.getRoot()&&!g.isVisible(d)){return}if(f){for(b=0;b<f;b++){a=c[b];if(a.get('visible')){e.push(a);if(a.isExpanded()){if(a.isLoaded()){g.handleNodeExpand(a,a.childNodes,e)}else {a.set('expanded',!1);a.expand()}}}}}},onNodeCollapse:function(e,b,f,g){var a=this,d=a.indexOf(e)+1,c;if(a.needsLocalFilter()){b=Ext.Array.filter(b,a.filterVisible)}if(b.length&&a.data.contains(b[0])){c=a.indexOfNextVisibleNode(e);a.removeAt(d,c-d)}Ext.callback(f,g)},indexOfNextVisibleNode:function(b){var a;while(b.parentNode){for(a=b.nextSibling;a&&!a.get('visible');a=a.nextSibling){}if(a){return this.indexOf(a)}b=b.parentNode}return this.getCount()},indexOfPreviousVisibleNode:function(b){var a;for(a=b;a&&!a.get('visible');a=a.previousSibling){}if(a){if(a.isExpanded()&&a.lastChild){return this.indexOfPreviousVisibleNode(a.lastChild)}}else {a=b.parentNode}return this.indexOf(a)},filterNew:function(a){return !a.get('root')&&Ext.data.Store.prototype.filterNew.call(this,a)},filterRejects:function(a){return !a.get('root')&&Ext.data.Store.prototype.filterRejects.call(this,a)},getNewRecords:function(){return Ext.Array.filter(Ext.Object.getValues(this.byIdMap),this.filterNew,this)},getUpdatedRecords:function(){return Ext.Array.filter(Ext.Object.getValues(this.byIdMap),this.filterUpdated)},beforeNodeRemove:function(f,a){if(!Ext.isArray(a)){a=[a]}var b=this,e=a.length,c,d;for(c=0;!d&&c<e;c++){if(a[c].get('visible')){d=a[c]}}if(d){b.startRemoveIndex=b.indexOf(a[0]);b.lastRemoveIndexPlusOne=b.indexOfNextVisibleNode(a[a.length-1])}else {b.startRemoveIndex=-1;b.lastRemoveIndexPlusOne=0}},afterDrop:Ext.emptyFn,onNodeRemove:function(i,d,f){var a=this,e=a.removedNodes,h=d.length,c=a.startRemoveIndex,g=a.lastRemoveIndexPlusOne,b;a.suspendAutoSync();if(c!==-1){a.removeIsMove=f;a.removeAt(c,g-c);a.removeIsMove=!1}for(b=0;b<h;b++){d[b].cascadeBy(function(b){a.unregisterNode(b);if(e&&!f){if(!b.phantom&&!b.erasing&&!a.loading){b.removedFrom=a.indexOf(b);e.push(b);a.needsSync=!0}}})}a.resumeAutoSync()},onNodeAppend:function(a,c,b){this.onNodeInsert(a,c,b)},onNodeInsert:function(g,a,k){var b=this,l=a.raw||a.data,j=b.removedNodes,i,e,c,h,f,d;if(g&&b.needsLocalFilter()){b.doFilter(g)}b.beginUpdate();if(b.isVisible(a)){if(k===0||!a.previousSibling){d=b.indexOf(g)}else {d=b.indexOfPreviousVisibleNode(a.previousSibling)}b.insert(d+1,a);if(!a.isLeaf()&&a.isExpanded()){if(a.isLoaded()){b.onNodeExpand(a,a.childNodes)}else {if(!b.fillCount){a.set('expanded',!1);a.expand()}}}}Ext.Array.remove(j,a);b.needsSync=b.needsSync||a.phantom||a.dirty;if(!a.isLeaf()&&!a.isLoaded()&&!b.lazyFill){i=b.getProxy().getReader();e=a.getProxy();c=e?e.getReader():null;h=c&&c.initialConfig.rootProperty?c:i;f=h.getRoot(l);if(f){b.fillNode(a,h.extractData(f,{model:a.childType,recordCreator:b.recordCreator}))}}b.endUpdate()},registerNode:function(c,f){var e=this,b,d,a;e.byIdMap[c.id]=c;if(f===!0){b=c.childNodes;d=b.length;for(a=0;a<d;a++){e.registerNode(b[a],!0)}}},unregisterNode:function(d,f){var e=this,b,c,a;delete e.byIdMap[d.id];if(f===!0){b=d.childNodes;c=b.length;for(a=0;a<c;a++){e.unregisterNode(b[a],!0)}}},onNodeSort:function(b,c){var a=this;a.suspendAutoSync();if(a.indexOf(b)!==-1&&b.isExpanded()||b===a.getRoot()&&!a.getRootVisible()){Ext.suspendLayouts();a.onNodeCollapse(b,c);a.onNodeExpand(b,c);Ext.resumeLayouts(!0)}a.resumeAutoSync(a.autoSync)},applyRoot:function(a){var b=this,e=b.getModel(),d=e.prototype.idProperty,c=b.getDefaultRootId();if(a&&!a.isNode){a=Ext.apply({text:b.getDefaultRootText(),root:!0,isFirst:!0,isLast:!0,depth:0,index:0,parentId:null,allowDrag:!1},a);if(c&&a[d]===undefined){a[d]=c}a=new e(a)}return a},updateRoot:function(b,c){var a=this,d,f=!c,e;a.byIdMap={};a.getTrackRemoved();a.suspendEvent('add','remove');if(c&&c.isModel){if(a.getRootVisible()){e=[c]}else {e=c.childNodes}a.beforeNodeRemove(null,e);c.set('root',!1);a.onNodeRemove(null,e);c.fireEvent('remove',null,c,!1);c.fireEvent('rootchange',null);c.clearListeners();c.store=c.treeStore=null}a.getData().clear();if(b){if(b.fireEventArgs('beforeappend',[null,b])===!1){b=null}else {d=b.parentNode;if(d){if(!d.removeChild(b,!1,!1,d.getTreeStore()===a)){return}}else {if((d=b.getTreeStore())&&d!==a&&b===d.getRoot()){d.setRoot(null)}}b.store=b.treeStore=a;b.set('root',!0);b.updateInfo(!0,{isFirst:!0,isLast:!0,depth:0,index:0,parentId:null});a.registerNode(b,!0);b.fireEvent('append',null,b,!1);b.fireEvent('rootchange',b);a.onNodeAppend(null,b,0);b.phantom=!0}}a.fireEvent('rootchange',b,c);if(b&&(a.getAutoLoad()||b.isExpanded())){if(b.isLoaded()){a.onNodeExpand(b,b.childNodes);a.fireEvent('datachanged',a);a.fireEvent('refresh',a)}else {b.data.expanded=!1;b.expand(!1);if(b.isLoaded&&!a.getProxy().isSynchronous){a.fireEvent('datachanged',a);a.fireEvent('refresh',a)}}}else {if(!f){a.fireEvent('datachanged',a);a.fireEvent('refresh',a)}}a.resumeEvent('add','remove')},each:function(d,c,a){var b,e=0;if(a&&typeof a==='object'){b=a.collapsed;a=a.filtered}if(b){this.getRoot().cascadeBy(function(b){if(a===!0||b.get('visible')){return d.call(c||b,b,e++)}})}else {return Ext.data.Store.prototype.each.call(this,d,c,a)}},collect:function(g,a,b){var d,h={},f=[],e,c;if(a&&typeof a==='object'){d=a.collapsed;b=a.filtered;a=a.allowNull}if(d||b){this.getRoot().cascadeBy(function(i){if(b===!0||i.get('visible')){c=i.get(g);e=String(c);if((a||!Ext.isEmpty(c))&&!h[e]){h[e]=1;f.push(c)}}if(!d&&!i.isExpanded()){return !1}})}else {f=Ext.data.Store.prototype.collect.call(this,g,a,b)}return f},getNodeById:function(a){return this.byIdMap[a]||null},findNode:function(f,a,d,e,c){if(Ext.isEmpty(a,!1)){return null}if(a===this.model.idProperty&&arguments.length<3){return this.byIdMap[a]}var g=Ext.String.createRegex(a,d,e,c),b=null;Ext.Object.eachValue(this.byIdMap,function(h){if(h&&g.test(h.get(f))){b=h;return !1}});return b},load:function(b){var a=b&&b.node;if(!a&!(a=this.getRoot())){a=this.setRoot({expanded:!0});return}if(a.isLoading()){return}return Ext.data.Store.prototype.load.call(this,b)},reload:function(b){var a=Ext.apply({},b,this.lastOptions);a.node=this.getRoot();return this.load(a)},flushLoad:function(){var a=this,c=a.pendingLoadOptions,b,g,i,d=a.getClearOnLoad(),e,f,h;a.clearLoadTask();if(!c){return}b=c.node||a.getRoot();e=b&&b.isRoot();g=c.callback;i=c.scope;c.params=c.params||{};if(b.data.expanded&&!e){b.data.loaded=!1;if(d){b.data.expanded=!1}c.callback=function(a,c,e){if(!d){b.collapse()}b.expand();Ext.callback(g,i,[a,c,e])}}c.id=b.getId();a.setLoadOptions(c);if(a.getRemoteSort()&&c.sorters){a.fireEvent('beforesort',a,c.sorters)}c=Ext.apply({node:c.node||b,internalScope:a,internalCallback:a.onProxyLoad},c);a.lastOptions=Ext.apply({},c);c.isRootLoad=e;f=a.createOperation('read',c);if(a.fireEvent('beforeload',a,f)!==!1){a.loading=!0;if(e){if(a.getClearRemovedOnLoad()){a.removedNodes.length=0}if(d){a.unregisterNode(b,!0);b.clear(!1,!0);a.registerNode(b);h=!0}}else {if(a.getTrackRemoved()&&a.getClearRemovedOnLoad()){a.clearRemoved(b)}if(d){b.removeAll(!1)}}if(a.loading&&b){b.set('loading',!0)}if(h){a.clearData(!0);if(a.getRootVisible()){a.suspendEvents();a.add(b);a.resumeEvents()}}f.execute()}return a},onProxyLoad:function(c){var a=this,f=c.initialConfig,e=c.wasSuccessful(),b=c.getRecords(),d=f.node,g=f.isRootLoad,h=c.getScope()||a,i=[b,c,e];if(a.destroyed){return}a.loading=!1;d.set('loading',!1);if(e){++a.loadCount;if(!a.getClearOnLoad()){b=a.cleanRecords(d,b)}if(a.getParentIdProperty()){b=a.treeify(d,b)}if(g){a.suspendEvent('add','update')}b=a.fillNode(d,b)}Ext.callback(f.onChildNodesAvailable,h,i);if(g){a.resumeEvent('add','update');a.callObservers('BeforePopulate');a.fireEvent('datachanged',a);a.fireEvent('refresh',a);a.callObservers('AfterPopulate')}a.fireEvent('load',a,b,e,c,d)},clearRemoved:function(k){var d=this,e=d.removedNodes,l=k.getId(),f=e.length,b=f,h={},j=[],i={},a,c,g;if(k===d.getRoot()){d.removedNodes.length=0;return}for(;b--;){a=e[b];i[a.getId()]=a}for(b=f;b--;){a=e[b];c=a;while(c&&c.getId()!==l){g=c.get('parentId')||c.get('lastParentId');c=c.parentNode||d.getNodeById(g)||i[g]}if(c){h[a.getId()]=a}}for(b=0;b<f;b++){a=e[b];if(!h[a.getId()]){j.push(a)}}d.removedNodes=j},fillNode:function(c,a){var b=this,d=a?a.length:0;++b.bulkUpdate;if(d){b.setupNodes(a)}if(b.bulkUpdate===1){c.set('loaded',!0)}else {c.data.loaded=!0}if(a.length){c.appendChild(a,undefined,!0)}--b.bulkUpdate;return a},setupNodes:function(b){var a=this,j=a.getSorters(),f=!1,g=b.length,i=a.sortOnLoad&&g>1&&!a.getRemoteSort()&&a.getFolderSort()||j.length,e=a.needsLocalFilter(),d,h,c;if(e){a.doFilter(b[0])}for(c=1;c<g;c++){d=b[c];h=b[c-1];if(e){a.doFilter(d)}f=d.data.index!==h.data.index}if(i){a.needsIndexSort=!0;Ext.Array.sort(b,a.getSortFn());a.needsIndexSort=!1}else {if(f){Ext.Array.sort(b,a.sortByIndex)}}},beginFill:function(){var a=this;if(!a.fillCount++){a.beginUpdate();a.suspendEvent('add','update');a.suspendAutoSync();a.fillArray=[]}},endFill:function(g,f){var a=this,c=a.fillArray,b,e,d;c.push(f);if(!--a.fillCount){a.resumeAutoSync();a.resumeEvent('add','update');for(b=0,e=c.length;b<e;b++){d=a.indexOf(c[b][0]);if(d!==-1){a.fireEvent('add',a,c[b],d)}}a.fillArray=null;a.endUpdate()}},sortByIndex:function(a,b){return a.data.index-b.data.index},onIdChanged:function(d,e,c){var b=d.childNodes,f=b&&b.length,a;Ext.data.Store.prototype.onIdChanged.apply(this,arguments);delete this.byIdMap[e];this.byIdMap[c]=d;for(a=0;a<f;a++){b[a].set('parentId',c)}},treeify:function(n,h){var g=this,l=n.getId(),m=g.getParentIdProperty(),j=h.length,i=[],e={},b,a,c,f,k,d;for(b=0;b<j;b++){a=h[b];e[a.id]=a}for(b=0;b<j;b++){a=h[b];c=a.data[m];if(!(c||c===0)||c===l){i.push(a)}else {f=e[c];f.$children=f.$children||[];f.$children.push(a)}}for(k in e){a=e[k];d=a.$children;if(d){delete a.$children;g.setupNodes(d);a.appendChild(d)}g.registerNode(a)}g.setupNodes(i);return i},cleanRecords:function(h,f){var e={},d=h.childNodes,a=0,b=d.length,g=[],c;for(;a<b;++a){e[d[a].getId()]=!0}for(a=0,b=f.length;a<b;++a){c=f[a];if(!e[c.getId()]){g.push(c)}}return g},removeAll:function(){this.suspendEvents();this.setRoot(null);this.resumeEvents();Ext.data.Store.prototype.removeAll.call(this)},doSort:function(b){var a=this;if(a.getRemoteSort()){a.load()}else {a.tree.sort(b,!0);a.fireEvent('datachanged',a);a.fireEvent('refresh',a)}a.fireEvent('sort',a,a.sorters.getRange())},filterVisible:function(a){return a.get('visible')},isVisible:function(c){var a=c.parentNode,b=c.data.visible,d=this.getRoot();while(b&&a){b=a.data.expanded&&a.data.visible;a=a.parentNode}return b&&!(c===d&&!this.getRootVisible())},commitChanges:function(){var a=this.removedNodes;if(a){a.length=0}Ext.data.Store.prototype.commitChanges.call(this)},getRootNode:function(){return this.getRoot()},setRootNode:function(a){this.setRoot(a);return this.getRoot()},privates:{getRawRemovedRecords:function(){return this.removedNodes},createOperation:function(e,b){var d=this,c=b.node,a;if(d.useModelProxy&&c&&c!==d.getRootNode()){a=c.getProxy()}if(a&&a!==d.getProxy()){return a.createOperation(e,b)}else {return Ext.data.Store.prototype.createOperation.call(this,e,b)}},recordCreator:function(b,a){return new a(b)},doFilter:function(a){this.filterNodes(a,this.getFilters().getFilterFn(),!0)},filterNodes:function(b,h,j){var c=this,g=c.filterer==='bottomup',a=h(b)&&j||b.isRoot()&&!c.getRootVisible(),f=b.childNodes,i=f&&f.length,d,e;if(i){for(d=0;d<i;++d){e=c.filterNodes(f[d],h,a||g)||e}if(g){a=e||a}}b.set('visible',a,c._silentOptions);return a},needsLocalFilter:function(){return !this.getRemoteFilter()&&this.getFilters().length},onRemoteFilterSet:function(a,c){var b=this.getData();b.setFilters(null);if(a){a.on('endupdate',this.onFilterEndUpdate,this)}},onRemoteSortSet:function(a,c){var b=this.getData();b.setSorters(null);if(a){a.on('endupdate',this.onSorterEndUpdate,this)}}},deprecated:{5:{properties:{tree:null}}}},1,0,0,0,['store.tree'],0,[Ext.data,'TreeStore'],0);Ext.define('TS.overrides.data.TreeStore',{override:'Ext.data.TreeStore',compatibility:'6.0.2',onFilterEndUpdate:function(h){var b=this,d=h.length,a=b.getRoot(),f,g,c,e;if(!b.getRemoteFilter()){if(d){b.doFilter(a)}else {a.cascadeBy({after:function(a){a.set('visible',!0,b._silentOptions)}})}if(d){c=[];f=a.childNodes;for(e=0,d=f.length;e<d;e++){g=f[e];if(g.get('visible')){c.push(g)}}}else {c=a.childNodes}b.onNodeFilter(a,c);a.fireEvent('filterchange',a,c);b.suppressNextFilter=!0;(arguments.callee.$previous||Ext.data.Store.prototype.onFilterEndUpdate).call(this,h);b.suppressNextFilter=!1}else {(arguments.callee.$previous||Ext.data.Store.prototype.onFilterEndUpdate).call(this,h)}}});Ext.cmd.derive('Ext.data.Validation',Ext.data.Model,{isValidation:!0,syncGeneration:0,attach:function(a){this.record=a;this.isBase=a.self===Ext.data.Model;delete this.data.id},getValidation:function(){return null},isValid:function(){var a=this;if(a.syncGeneration!==a.record.generation){a.refresh()}return !a.dirty},refresh:function(q){if(this.isBase){return}var e=this,i=e.data,c=e.record,m=c.fields,l=c.generation,p=c.data,r=c.validationSeparator,f=null,k,h,a,d,s,g,u,t,n,j,o,b;if(q||e.syncGeneration!==l){e.syncGeneration=l;for(g=0,n=m.length;g<n;++g){d=m[g];b=d.name;o=p[b];k=d.defaultInvalidMessage;a=0;if(!(b in i)){i[b]=h=!0}else {h=i[b]}if(d.validate!==Ext.emptyFn){j=d.validate(o,r,null,c);if(j!==!0){a=j||k}}if(!a){a=!0}if(a!==h){(f||(f={}))[b]=a}}if(f){e.set(f)}}}},0,0,0,0,0,0,[Ext.data,'Validation'],0);Ext.cmd.derive('Ext.dom.Helper',Ext.Base,function(){var b='afterbegin',d='afterend',a='beforebegin',c='beforeend',g=['BeforeBegin','previousSibling'],f=['AfterEnd','nextSibling'],e={beforebegin:g,afterend:f},h={beforebegin:g,afterend:f,afterbegin:['AfterBegin','firstChild'],beforeend:['BeforeEnd','lastChild']};return {singleton:!0,alternateClassName:['Ext.DomHelper','Ext.core.DomHelper'],emptyTags:/^(?:br|frame|hr|img|input|link|meta|range|spacer|wbr|area|param|col)$/i,confRe:/^(?:tag|children|cn|html|tpl|tplData)$/i,endRe:/end/i,attributeTransform:{cls:'class',htmlFor:'for'},closeTags:{},detachedDiv:document.createElement('div'),decamelizeName:function(){var b=/([a-z])([A-Z])/g,a={};function decamel(c,a,b){return a+'-'+b.toLowerCase()}return function(c){return a[c]||(a[c]=c.replace(b,decamel))}}(),generateMarkup:function(a,b){var e=this,i=typeof a,d,c,f,g,h;if(i==='string'||i==='number'){b.push(a)}else {if(Ext.isArray(a)){for(g=0;g<a.length;g++){if(a[g]){e.generateMarkup(a[g],b)}}}else {f=a.tag||'div';b.push('<',f);for(d in a){if(a.hasOwnProperty(d)){c=a[d];if(c!==undefined&&!e.confRe.test(d)){if(typeof c==='object'){b.push(' ',d,'="');e.generateStyles(c,b,!0).push('"')}else {b.push(' ',e.attributeTransform[d]||d,'="',c,'"')}}}}if(e.emptyTags.test(f)){b.push('/>')}else {b.push('>');if(c=a.tpl){c.applyOut(a.tplData,b)}if(c=a.html){b.push(c)}if(c=a.cn||a.children){e.generateMarkup(c,b)}h=e.closeTags;b.push(h[f]||(h[f]='</'+f+'>'))}}}return b},generateStyles:function(c,d,f){var e=d||[],a,b;for(a in c){if(c.hasOwnProperty(a)){b=c[a];a=this.decamelizeName(a);if(f&&Ext.String.hasHtmlCharacters(b)){b=Ext.String.htmlEncode(b)}e.push(a,':',b,';')}}return d||e.join('')},markup:function(a){if(typeof a==='string'){return a}var b=this.generateMarkup(a,[]);return b.join('')},applyStyles:function(b,a){Ext.fly(b).applyStyles(a)},createContextualFragment:function(e){var d=this.detachedDiv,b=document.createDocumentFragment(),c,a;d.innerHTML=e;a=d.childNodes;c=a.length;while(c--){b.appendChild(a[0])}return b},createDom:function(e,f){var c=this,d=c.markup(e),b=c.detachedDiv,a;b.innerHTML=d;a=b.firstChild;return Ext.supports.ChildContentClearedWhenSettingInnerHTML?a.cloneNode(!0):a},insertHtml:function(g,f,j){var o=this,l,k,n,m,i;g=g.toLowerCase();if(f.insertAdjacentHTML){if(o.ieInsertHtml){i=o.ieInsertHtml(g,f,j);if(i){return i}}l=h[g];if(l){f.insertAdjacentHTML(l[0],j);return f[l[1]]}}else {if(f.nodeType===3){g=g===b?a:g;g=g===c?d:g}k=Ext.supports.CreateContextualFragment?f.ownerDocument.createRange():undefined;m='setStart'+(this.endRe.test(g)?'After':'Before');if(e[g]){if(k){k[m](f);i=k.createContextualFragment(j)}else {i=this.createContextualFragment(j)}f.parentNode.insertBefore(i,g===a?f:f.nextSibling);return f[(g===a?'previous':'next')+'Sibling']}else {n=(g===b?'first':'last')+'Child';if(f.firstChild){if(k){try{k[m](f[n]);i=k.createContextualFragment(j)}catch(p){i=this.createContextualFragment(j)}}else {i=this.createContextualFragment(j)}if(g===b){f.insertBefore(i,f.firstChild)}else {f.appendChild(i)}}else {f.innerHTML=j}return f[n]}}},insertBefore:function(c,d,b){return this.doInsert(c,d,b,a)},insertAfter:function(b,c,a){return this.doInsert(b,c,a,d)},insertFirst:function(c,d,a){return this.doInsert(c,d,a,b)},append:function(b,d,a){return this.doInsert(b,d,a,c)},overwrite:function(b,c,e){var d=this,a;b=Ext.getDom(b);c=d.markup(c);if(d.ieOverwrite){a=d.ieOverwrite(b,c)}if(!a){b.innerHTML=c;a=b.firstChild}return e?Ext.get(a):a},doInsert:function(f,j,k,g){var i=this,h;f=f.dom||Ext.getDom(f);if('innerHTML' in f){h=i.insertHtml(g,f,i.markup(j))}else {h=i.createDom(j,null);if(f.nodeType===3){g=g===b?a:g;g=g===c?d:g}if(e[g]){f.parentNode.insertBefore(h,g===a?f:f.nextSibling)}else {if(f.firstChild&&g===b){f.insertBefore(h,f.firstChild)}else {f.appendChild(h)}}}return k?Ext.get(h):h},createTemplate:function(b){var a=this.markup(b);return new Ext.Template(a)},createHtml:function(a){return this.markup(a)}}},0,0,0,0,0,0,[Ext.dom,'Helper',Ext,'DomHelper',Ext.core,'DomHelper'],0);Ext.cmd.derive('Ext.data.identifier.Uuid',Ext.data.identifier.Generator,{isUnique:!0,config:{id:null},constructor:function(a){Ext.data.identifier.Generator.prototype.constructor.call(this,a);this.reconfigure(a)},reconfigure:function(a){var b=this.self;this.generate=a&&a.version===1?b.createSequential(a.salt,a.timestamp,a.clockSeq):b.createRandom()},clone:null,statics:{createRandom:function(){var a='xxxxxxxx-xxxx-4xxx-Rxxx-xMxxxxxxxxxx'.split(''),d='0123456789abcdef'.split(''),c=a.length,b=[];return function(){for(var f,e,g=0;g<c;++g){e=a[g];if(e!=='-'&&e!=='4'){f=Math.random()*16;f=e==='R'?f&3|8:f|(e==='M'?1:0);e=d[f]}b[g]=e}return b.join('')}},createSequential:function(f,g,i){var b=[],c=Math.pow(2,32),j=f.lo,h=f.hi,e=g.lo,d=g.hi,a=function(c,b){var a=c.toString(16).toLowerCase();if(a.length>b){a=a.substring(a.length-b)}else {if(a.length<b){a=Ext.String.leftPad(a,b,'0')}}return a};if(typeof f==='number'){h=Math.floor(f/c);j=Math.floor(f-h*c)}if(typeof g==='number'){d=Math.floor(g/c);e=Math.floor(g-d*c)}h|=256;b[3]=a(128|i>>>8&63,2)+a(i&255,2);b[4]=a(h,4)+a(j,8);return function(){b[0]=a(e,8);b[1]=a(d&65535,4);b[2]=a(d>>>16&4095|1<<12,4);++e;if(e>=c){e=0;++d}return b.join('-')}}}},1,0,0,0,['data.identifier.uuid'],0,[Ext.data.identifier,'Uuid'],function(){this.Global=new this({id:'uuid'})});Ext.cmd.derive('Ext.direct.Event',Ext.Base,{status:!0,constructor:function(a){Ext.apply(this,a)},getName:function(){return this.name},getData:function(){return this.data}},1,0,0,0,['direct.event'],0,[Ext.direct,'Event'],0);Ext.cmd.derive('Ext.direct.RemotingEvent',Ext.direct.Event,{getTransaction:function(){var a=this;return a.transaction||Ext.direct.Manager.getTransaction(a.tid)}},0,0,0,0,['direct.rpc'],0,[Ext.direct,'RemotingEvent'],0);Ext.cmd.derive('Ext.direct.ExceptionEvent',Ext.direct.RemotingEvent,{status:!1},0,0,0,0,['direct.exception'],0,[Ext.direct,'ExceptionEvent'],0);Ext.cmd.derive('Ext.direct.JsonProvider',Ext.direct.Provider,{parseResponse:function(b){var a=b&&b.responseText;if(a){if(Ext.isObject(a)||Ext.isArray(a)){return a}return Ext.decode(a)}return null},createEvents:function(e){var d=this,a=null,c=[],f,b,g;try{a=d.parseResponse(e)}catch(h){f=new Ext.direct.ExceptionEvent({data:h,xhr:e,code:Ext.direct.Manager.exceptions.PARSE,message:'Error parsing json response: \n\n '+h});return [f]}if(Ext.isArray(a)){for(b=0,g=a.length;b<g;++b){c.push(d.createEvent(a[b]))}}else {if(Ext.isObject(a)){c.push(d.createEvent(a))}}return c},createEvent:function(a){if(typeof a!=='object'||!('type' in a)){return new Ext.direct.ExceptionEvent({data:a,code:Ext.direct.Manager.exceptions.DATA,message:'Invalid data: event type is not specified'})}return Ext.create('direct.'+a.type,a)}},0,0,0,0,['direct.jsonprovider'],0,[Ext.direct,'JsonProvider'],0);Ext.cmd.derive('Ext.util.TaskRunner',Ext.Base,{interval:10,timerId:null,constructor:function(b){var a=this;if(typeof b=='number'){a.interval=b}else {if(b){Ext.apply(a,b)}}a.tasks=[];a.timerFn=Ext.Function.bind(a.onTick,a)},newTask:function(b){var a=new Ext.util.TaskRunner.Task(b);a.manager=this;return a},start:function(a){var b=this,c=Ext.Date.now();if(!a.pending){b.tasks.push(a);a.pending=!0}a.stopped=!1;a.taskStartTime=c;a.taskRunTime=a.fireOnStart!==!1?0:a.taskStartTime;a.taskRunCount=0;if(!b.firing){if(a.fireOnStart!==!1){b.startTimer(0,c)}else {b.startTimer(a.interval,c)}}return a},stop:function(a){if(!a.stopped){a.stopped=!0;if(a.onStop){a.onStop.call(a.scope||a,a)}}return a},stopAll:function(){Ext.each(this.tasks,this.stop,this)},firing:!1,nextExpires:1.0E99,onTick:function(){var b=this,h=b.tasks,j=b.fireIdleEvent,g=Ext.Date.now(),k=1.0E99,m=h.length,l=Ext.GlobalEvents,f,c,e,a,i,d;b.timerId=null;b.firing=!0;for(e=0;e<m||e<(m=h.length);++e){a=h[e];if(!(d=a.stopped)){f=a.taskRunTime+a.interval;if(f<=g){i=1;if(a.hasOwnProperty('fireIdleEvent')){j=a.fireIdleEvent}else {j=b.fireIdleEvent}try{i=a.run.apply(a.scope||a,a.args||[++a.taskRunCount])}catch(n){try{if(a.onError){i=a.onError.call(a.scope||a,a,n)}}catch(o){}}a.taskRunTime=g;if(i===!1||a.taskRunCount===a.repeat){b.stop(a);d=!0}else {d=a.stopped;f=g+a.interval}}if(!d&&a.duration&&a.duration<=g-a.taskStartTime){b.stop(a);d=!0}}if(d){a.pending=!1;if(!c){c=h.slice(0,e)}}else {if(c){c.push(a)}if(k>f){k=f}}}if(c){b.tasks=c}b.firing=!1;if(b.tasks.length){b.startTimer(k-g,Ext.Date.now())}if(j!==!1&&l.hasListeners.idle){l.fireEvent('idle')}},startTimer:function(b,e){var a=this,d=e+b,c=a.timerId;if(c&&a.nextExpires-d>a.interval){clearTimeout(c);c=null}if(!c){if(b<a.interval){b=a.interval}a.timerId=Ext.defer(a.timerFn,b);a.nextExpires=d}}},1,0,0,0,0,0,[Ext.util,'TaskRunner'],function(){var b=this,a=b.prototype;a.destroy=a.stopAll;b.Task=new Ext.Class({isTask:!0,stopped:!0,fireOnStart:!1,constructor:function(a){Ext.apply(this,a)},restart:function(a){if(a!==undefined){this.interval=a}this.manager.start(this)},start:function(a){if(this.stopped){this.restart(a)}},stop:function(){this.manager.stop(this)}});a=b.Task.prototype;a.destroy=a.stop});Ext.cmd.derive('Ext.direct.RemotingMethod',Ext.Base,{constructor:function(a){var b=this,e=a.params,h=a.len,g=a.metadata,d={},j,i,c,f;b.name=a.name;b.disableBatching=a.batched!=null?!a.batched:!1;if(a.formHandler){b.formHandler=a.formHandler}else {if(Ext.isNumeric(h)){b.len=h;b.ordered=!0}else {b.named=!0;b.strict=a.strict!==undefined?a.strict:!0;b.params={};i=e&&e.length;for(c=0;c<i;c++){f=e[c];j=Ext.isObject(f)?f.name:f;b.params[j]=!0}}}if(g){e=g.params;h=g.len;if(Ext.isNumeric(h)){d.ordered=!0;d.len=h}else {if(Ext.isArray(e)){d.named=!0;d.params={};for(c=0,i=e.length;c<i;c++){f=e[c];d.params[f]=!0}d.strict=g.strict!==undefined?g.strict:!0}}b.metadata=d}},getArgs:function(a){var i=this,g=a.params,e=a.paramOrder,j=a.paramsAsHash,f=a.metadata,c=a.options,b=[],d,h;if(i.ordered){if(i.len>0){if(e){for(d=0,h=e.length;d<h;d++){b.push(g[e[d]])}}else {if(j){b.push(g)}}}}else {b.push(g)}b.push(a.callback,a.scope||window);if(c||f){c=Ext.apply({},c);if(f){c.metadata=f}b.push(c)}return b},getCallData:function(a){var b=this,f=null,g=b.len,k=b.params,l=b.strict,j,h,i,d,c,e;if(b.ordered){h=a[g];i=a[g+1];c=a[g+2];if(g!==0){f=a.slice(0,g)}}else {if(b.formHandler){j=a[0];h=a[1];i=a[2];c=a[3]}else {f=Ext.apply({},a[0]);h=a[1];i=a[2];c=a[3];if(l){for(d in f){if(f.hasOwnProperty(d)&&!k[d]){delete f[d]}}}}}if(b.metadata&&c&&c.metadata){if(b.metadata.ordered){e=c.metadata.slice(0,b.metadata.len)}else {e=Ext.apply({},c.metadata);if(b.metadata.strict){for(d in e){if(e.hasOwnProperty(d)&&!b.metadata.params[d]){delete e[d]}}}}delete c.metadata}return {form:j,data:f,metadata:e,callback:h,scope:i,options:c}}},1,0,0,0,0,0,[Ext.direct,'RemotingMethod'],0);Ext.define('TS.overrides.direct.RemotingMethod',{override:'Ext.direct.RemotingMethod',getArgs:function(a){var i=this,g=a.params,e=a.paramOrder,j=a.paramsAsHash,f=a.metadata,c=a.options,b=[],d,h;if(i.ordered){if(i.len>0){if(e){for(d=0,h=e.length;d<h;d++){b.push(g[e[d]])}}else {b.push(g)}}}else {b.push(g)}b.push(a.callback,a.scope||window);if(c||f){c=Ext.apply({},c);if(f){c.metadata=f}b.push(c)}return b}});Ext.cmd.derive('Ext.direct.Transaction',Ext.Base,{statics:{TRANSACTION_ID:0},constructor:function(b){var a=this;Ext.apply(a,b);a.id=a.tid=++a.self.TRANSACTION_ID;a.retryCount=0},send:function(){var a=this;a.provider.queueTransaction(a)},retry:function(){var a=this;a.retryCount++;a.send()},getProvider:function(){return this.provider}},1,0,0,0,['direct.transaction'],0,[Ext.direct,'Transaction'],0);Ext.cmd.derive('Ext.direct.RemotingProvider',Ext.direct.JsonProvider,{type:'remoting',enableBuffer:10,bufferLimit:Number.MAX_VALUE,maxRetries:1,constructor:function(b){var a=this;Ext.direct.JsonProvider.prototype.constructor.apply(this,arguments);a.namespace=Ext.isString(a.namespace)?Ext.ns(a.namespace):a.namespace||Ext.global;a.transactions=new Ext.util.MixedCollection();a.callBuffer=[]},doConnect:function(){if(!this.apiCreated){this.initAPI();this.apiCreated=!0}},getNamespace:function(a,f){var c,e,b,d;a=a||Ext.global;c=f.toString().split('.');for(b=0,d=c.length;b<d;b++){e=c[b];a=a[e];if(typeof a==='undefined'){return a}}return a},createNamespaces:function(a,f){var d,b,c,e;a=a||Ext.global;d=f.toString().split('.');for(c=0,e=d.length;c<e;c++){b=d[c];a[b]=a[b]||{};a=a[b]}return a},initAPI:function(){var c=this,f=c.actions,d=c.namespace,k=Ext.direct.Manager,a,b,h,e,j,i,g;for(a in f){if(f.hasOwnProperty(a)){if(c.disableNestedActions){b=d[a];if(!b){b=d[a]={}}}else {b=c.getNamespace(d,a);if(!b){b=c.createNamespaces(d,a)}}h=f[a];for(e=0,j=h.length;e<j;++e){i=new Ext.direct.RemotingMethod(h[e]);b[i.name]=g=c.createHandler(a,i);k.registerMethod(g.$name,g)}}}},createHandler:function(c,b){var e=this,d=Array.prototype.slice,a;if(!b.formHandler){a=function(){e.configureRequest(c,b,d.call(arguments,0))}}else {a=function(){e.configureFormRequest(c,b,d.call(arguments,0))}}a.name=a.$name=c+'.'+b.name;a.$directFn=!0;a.directCfg=a.$directCfg={action:c,method:b};return a},connect:function(){var a=this;Ext.direct.JsonProvider.prototype.connect.call(this)},runCallback:function(c,b){var e=!!b.status,g=e?'success':'failure',a,d,f;if(c&&c.callback){a=c.callback;d=c.callbackOptions;f=typeof b.result!=='undefined'?b.result:b.data;if(Ext.isFunction(a)){a(f,b,e,d)}else {Ext.callback(a[g],a.scope,[f,b,e,d]);Ext.callback(a.callback,a.scope,[f,b,e,d])}}},onData:function(i,j,h){var b=this,d,e,g,c,a,f;if(j){g=b.createEvents(h);for(d=0,e=g.length;d<e;++d){c=g[d];a=b.getTransaction(c);b.fireEvent('data',b,c);if(a&&b.fireEvent('beforecallback',b,c,a)!==!1){b.runCallback(a,c,!0)}Ext.direct.Manager.removeTransaction(a)}}else {f=[].concat(i.transaction);for(d=0,e=f.length;d<e;++d){a=b.getTransaction(f[d]);if(a&&a.retryCount<b.maxRetries){a.retry()}else {c=new Ext.direct.ExceptionEvent({data:null,transaction:a,code:Ext.direct.Manager.exceptions.TRANSPORT,message:'Unable to connect to the server.',xhr:h});b.fireEvent('data',b,c);if(a&&b.fireEvent('beforecallback',b,c,a)!==!1){b.runCallback(a,c,!1)}Ext.direct.Manager.removeTransaction(a)}}}},getTransaction:function(a){return a&&a.tid?Ext.direct.Manager.getTransaction(a.tid):null},getPayload:function(a){var b={action:a.action,method:a.method,data:a.data,type:'rpc',tid:a.id};if(a.metadata){b.metadata=a.metadata}return b},sendRequest:function(a){var b=this,d,c,g,f=b.enableUrlEncode,h,e,i;d={url:b.url,callback:b.onData,scope:b,transaction:a,timeout:b.timeout};if(a.timeout){d.timeout=a.timeout}if(Ext.isArray(a)){c=[];for(e=0,i=a.length;e<i;++e){h=b.getPayload(a[e]);c.push(h)}}else {c=b.getPayload(a)}if(f){g={};g[Ext.isString(f)?f:'data']=Ext.encode(c);d.params=g}else {d.jsonData=c}Ext.Ajax.request(d)},queueTransaction:function(b){var a=this,d=a.callBuffer,c=a.enableBuffer;if(b.form){a.sendFormRequest(b);return}if(c===!1||b.disableBatching||typeof b.timeout!=='undefined'){a.sendRequest(b);return}d.push(b);if(c&&d.length<a.bufferLimit){if(!a.callTask){a.callTask=new Ext.util.DelayedTask(a.combineAndSend,a)}a.callTask.delay(Ext.isNumber(c)?c:10)}else {a.combineAndSend()}},combineAndSend:function(){var b=this,a=b.callBuffer,c=a.length;if(c>0){b.sendRequest(c===1?a[0]:a);b.callBuffer=[]}},configureTransaction:function(h,d,g,i){var a,b,f,c,e;a=d.getCallData(g);b=a.callback;f=a.scope;c=a.options;b=b&&f?Ext.Function.bind(b,f):b;e=Ext.apply({},{provider:this,args:g,action:h,method:d.name,form:a.form,data:a.data,metadata:a.metadata,callbackOptions:c,callback:b,isForm:i,disableBatching:d.disableBatching});if(c&&c.timeout!=null){e.timeout=c.timeout}return new Ext.direct.Transaction(e)},configureRequest:function(d,c,e){var a=this,b;b=a.configureTransaction(d,c,e);if(a.fireEvent('beforecall',a,b,c)!==!1){Ext.direct.Manager.addTransaction(b);a.queueTransaction(b);a.fireEvent('call',a,b,c)}},configureFormRequest:function(g,c,h){var b=this,a,f,e,d;a=b.configureTransaction(g,c,h,!0);if(b.fireEvent('beforecall',b,a,c)!==!1){Ext.direct.Manager.addTransaction(a);f=a.form;e=String(f.getAttribute('enctype')).toLowerCase()==='multipart/form-data';d={extTID:a.id,extAction:g,extMethod:c.name,extType:'rpc',extUpload:String(e)};if(a.metadata){d.extMetadata=Ext.JSON.encode(a.metadata)}Ext.apply(a,{form:f,isUpload:e,params:d});b.sendFormRequest(a);b.fireEvent('call',b,a,c)}},sendFormRequest:function(a){var b=this;Ext.Ajax.request({url:b.url,params:a.params,callback:b.onData,scope:b,form:a.form,isUpload:a.isUpload,transaction:a})},inheritableStatics:{checkConfig:function(a){return a&&a.type==='remoting'&&a.url&&Ext.isArray(a.actions)}}},1,0,0,0,['direct.remotingprovider'],0,[Ext.direct,'RemotingProvider'],0);Ext.cmd.derive('Ext.ux.ajax.SimXhr',Ext.Base,{readyState:0,mgr:null,simlet:null,constructor:function(b){var a=this;Ext.apply(a,b);a.requestHeaders={}},abort:function(){var a=this;if(a.timer){clearTimeout(a.timer);a.timer=null}a.aborted=!0},getAllResponseHeaders:function(){var a=[];if(Ext.isObject(this.responseHeaders)){Ext.Object.each(this.responseHeaders,function(c,b){a.push(c+': '+b)})}return a.join('\r\n')},getResponseHeader:function(b){var a=this.responseHeaders;return a&&a[b]||null},open:function(c,f,d,e,b){var a=this;a.method=c;a.url=f;a.async=d!==!1;a.user=e;a.password=b;a.setReadyState(1)},overrideMimeType:function(a){this.mimeType=a},schedule:function(){var a=this,b=a.mgr.delay;if(b){a.timer=setTimeout(function(){a.onTick()},b)}else {a.onTick()}},send:function(b){var a=this;a.body=b;if(a.async){a.schedule()}else {a.onComplete()}},setReadyState:function(b){var a=this;if(a.readyState!=b){a.readyState=b;a.onreadystatechange()}},setRequestHeader:function(a,b){this.requestHeaders[a]=b},onreadystatechange:Ext.emptyFn,onComplete:function(){var me=this,callback;me.readyState=4;Ext.apply(me,me.simlet.exec(me));callback=me.jsonpCallback;if(callback){var text=callback+'('+me.responseText+')';eval(text)}},onTick:function(){var a=this;a.timer=null;a.onComplete();a.onreadystatechange&&a.onreadystatechange()}},1,0,0,0,0,0,[Ext.ux.ajax,'SimXhr'],0);Ext.cmd.derive('Ext.ux.ajax.Simlet',Ext.Base,function(){var d=/([^?#]*)(#.*)?$/,b=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)Z$/,c=/^[+-]?\d+$/,a=/^[+-]?\d+\.\d+$/;function parseParamValue(d){var e;if(Ext.isDefined(d)){d=decodeURIComponent(d);if(c.test(d)){d=parseInt(d,10)}else {if(a.test(d)){d=parseFloat(d)}else {if(!!(e=b.test(d))){d=new Date(Date.UTC(+e[1],+e[2]-1,+e[3],+e[4],+e[5],+e[6]))}}}}return d}return {isSimlet:!0,responseProps:['responseText','responseXML','status','statusText','responseHeaders'],status:200,statusText:'OK',constructor:function(a){Ext.apply(this,a)},doGet:function(c){var a=this,b={};Ext.Array.forEach(a.responseProps,function(d){if(d in a){b[d]=a[d]}});return b},doPost:function(c){var a=this,b={};Ext.Array.forEach(a.responseProps,function(d){if(d in a){b[d]=a[d]}});return b},doRedirect:function(a){return !1},doDelete:function(a){var d=this,c=a.xhr,b=c.options.records;d.removeFromData(a,b)},exec:function(a){var c=this,b={},e='do'+Ext.String.capitalize(a.method.toLowerCase()),d=c[e];if(d){b=d.call(c,c.getCtx(a.method,a.url,a))}else {b={status:405,statusText:'Method Not Allowed'}}return b},getCtx:function(b,a,c){return {method:b,params:this.parseQueryString(a),url:a,xhr:c}},openRequest:function(b,e,d,f){var g=this.getCtx(b,e),c=this.doRedirect(g),a;if(d.action==='destroy'){b='delete'}if(c){a=c}else {a=new Ext.ux.ajax.SimXhr({mgr:this.manager,simlet:this,options:d});a.open(b,e,f)}return a},parseQueryString:function(j){var g=d.exec(j),b={},a,e,f,i;if(g&&g[1]){var c,h=g[1].split('&');for(f=0,i=h.length;f<i;++f){if((c=h[f].split('='))[0]){a=decodeURIComponent(c.shift());e=parseParamValue(c.length>1?c.join('='):c[0]);if(!(a in b)){b[a]=e}else {if(Ext.isArray(b[a])){b[a].push(e)}else {b[a]=[b[a],e]}}}}}return b},redirect:function(b,a,c){switch(arguments.length){case 2:if(typeof a=='string'){break};c=a;case 1:a=b;b='GET';break;}if(c){a=Ext.urlAppend(a,Ext.Object.toQueryString(c))}return this.manager.openRequest(b,a)},removeFromData:function(a,e){var d=this,c=d.getData(a),f=a.xhr.options.proxy&&a.xhr.options.proxy.getModel()||{},b=f.idProperty||'id';Ext.each(e,function(g){var h=g.get(b);for(var f=c.length;f-->0;){if(c[f][b]===h){d.deleteRecord(f);break}}})}}}(),1,0,0,0,['simlet.basic'],0,[Ext.ux.ajax,'Simlet'],0);Ext.cmd.derive('Ext.ux.ajax.DataSimlet',Ext.ux.ajax.Simlet,function(){function makeSortFn(a,c){var b=a.direction,d=b&&b.toUpperCase()==='DESC'?-1:1;return function(e,b){var f=e[a.property],g=b[a.property],h=f<g?-1:g<f?1:0;if(h||!c){return h*d}return c(e,b)}}function makeSortFns(b,d){for(var a=d,c=b&&b.length;c;){a=makeSortFn(b[--c],a)}return a}return {buildNodes:function(g,e){var h=this,f={data:[]},i=g.length,c,b,a,d;h.nodes[e]=f;for(b=0;b<i;++b){f.data.push(a=g[b]);d=a.text||a.title;a.id=e?e+'/'+d:d;c=a.children;if(!(a.leaf=!c)){delete a.children;h.buildNodes(c,a.id)}}},deleteRecord:function(a){if(this.data&&typeof this.data!=='function'){Ext.Array.removeAt(this.data,a)}},fixTree:function(e,d){var a=this,b=e.params.node,c;if(!(c=a.nodes)){a.nodes=c={};a.buildNodes(d,'')}b=c[b];if(b){if(a.node){a.node.sortedData=a.sortedData;a.node.currentOrder=a.currentOrder}a.node=b;a.data=b.data;a.sortedData=b.sortedData;a.currentOrder=b.currentOrder}else {a.data=null}},getData:function(c){var d=this,b=c.params,g=(b.filter||'')+(b.group||'')+'-'+(b.sort||'')+'-'+(b.dir||''),j=d.tree,h,a,e,f;if(j){d.fixTree(c,j)}a=d.data;if(typeof a==='function'){h=!0;a=a.call(this,c)}if(!a||g==='--'){return a||[]}if(!h&&g==d.currentOrder){return d.sortedData}c.filterSpec=b.filter&&Ext.decode(b.filter);c.groupSpec=b.group&&Ext.decode(b.group);e=b.sort;if(b.dir){e=[{direction:b.dir,property:e}]}else {e=Ext.decode(b.sort)}if(c.filterSpec){var i=new Ext.util.FilterCollection();i.add(this.processFilters(c.filterSpec));a=Ext.Array.filter(a,i.getFilterFn())}f=makeSortFns(c.sortSpec=e);if(c.groupSpec){f=makeSortFns([c.groupSpec],f)}a=Ext.isArray(a)?a.slice(0):a;if(f){Ext.Array.sort(a,f)}d.sortedData=a;d.currentOrder=g;return a},processFilters:Ext.identityFn,getPage:function(c,e){var d=e,a=e.length,b=c.params.start||0,f=c.params.limit?Math.min(a,b+c.params.limit):a;if(b||f<a){d=d.slice(b,f)}return d},getGroupSummary:function(b,a,c){return a[0]},getSummary:function(g,h,i){var j=this,c=g.groupSpec.property,b,f={},d=[],a,e;Ext.each(i,function(b){a=b[c];f[a]=!0});function flush(){if(b){d.push(j.getGroupSummary(c,b,g));b=null}}Ext.each(h,function(j){a=j[c];if(e!==a){flush();e=a}if(!f[a]){return !d.length}if(b){b.push(j)}else {b=[j]}return !0});flush();return d}}}(),0,0,0,0,0,0,[Ext.ux.ajax,'DataSimlet'],0);Ext.cmd.derive('Ext.ux.ajax.JsonSimlet',Ext.ux.ajax.DataSimlet,{doGet:function(a){var f=this,e=f.getData(a),c=f.getPage(a,e),d=a.xhr.options.proxy&&a.xhr.options.proxy.getReader(),g=d&&d.getRootProperty(),h=Ext.ux.ajax.DataSimlet.prototype.doGet.apply(this,arguments),b={};if(g&&Ext.isArray(c)){b[g]=c;b[d.getTotalProperty()]=e.length}else {b=c}if(a.groupSpec){b.summaryData=f.getSummary(a,e,c)}h.responseText=Ext.encode(b);return h},doPost:function(a){return this.doGet(a)}},0,0,0,0,['simlet.json'],0,[Ext.ux.ajax,'JsonSimlet'],0);Ext.cmd.derive('Ext.ux.ajax.SimManager',Ext.Base,{singleton:!0,defaultType:'basic',delay:150,ready:!1,constructor:function(){this.simlets=[]},getSimlet:function(a){var h=this,c=a.indexOf('?'),g=h.simlets,i=g.length,d,e,b,f;if(c<0){c=a.indexOf('#')}if(c>0){a=a.substring(0,c)}for(d=0;d<i;++d){e=g[d];b=e.url;if(b instanceof RegExp){f=b.test(a)}else {f=b===a}if(f){return e}}return h.defaultSimlet},getXhr:function(d,b,c,e){var a=this.getSimlet(b);if(a){return a.openRequest(d,b,c,e)}return null},init:function(b){var a=this;Ext.apply(a,b);if(!a.ready){a.ready=!0;if(!('defaultSimlet' in a)){a.defaultSimlet=new Ext.ux.ajax.Simlet({status:404,statusText:'Not Found'})}a._openRequest=Ext.data.Connection.prototype.openRequest;Ext.data.request.Ajax.override({openRequest:function(e,d,f){var c=!e.nosim&&a.getXhr(d.method,d.url,e,f);if(!c){c=this.callParent(arguments)}return c}});if(Ext.data.JsonP){Ext.data.JsonP.self.override({createScript:function(g,f,d){var e=Ext.urlAppend(g,Ext.Object.toQueryString(f)),c=!d.nosim&&a.getXhr('GET',e,d,!0);if(!c){c=this.callParent(arguments)}return c},loadScript:function(a){var c=a.script;if(c.simlet){c.jsonpCallback=a.params[a.callbackKey];c.send(null);a.script=document.createElement('script')}else {this.callParent(arguments)}}})}}return a},openRequest:function(a,d,b){var c={method:a,url:d};return this._openRequest.call(Ext.data.Connection.prototype,{},c,b)},register:function(a){var b=this;b.init();function reg(d){var c=d;if(!c.isSimlet){c=Ext.create('simlet.'+(c.type||c.stype||b.defaultType),d)}b.simlets.push(c);c.manager=b}if(Ext.isArray(a)){Ext.each(a,reg)}else {if(a.isSimlet||a.url){reg(a)}else {Ext.Object.each(a,function(c,b){b.url=c;reg(b)})}}return b}},1,0,0,0,0,0,[Ext.ux.ajax,'SimManager'],0);Ext.define('TS.overrides.ux.ajax.SimManager',{override:'Ext.ux.ajax.SimManager',getXhr:function(c,e,a,d){if(IS_OFFLINE&&a.jsonData&&a.jsonData.action&&a.jsonData.method){var b=this._directCache.constructKey(a.jsonData);if(this._directCache.has(b)){return this.callParent(arguments)}else {return undefined}}else {return undefined}}});Ext.cmd.derive('TS.service.SynchronousCachedDirect',Ext.Base,{singleton:!0,constructor:function(){this.callParent(arguments);this._map=new Map()},_getLocalForage:function(){TS.localforage_direct=TS.localforage_direct||localforage.createInstance({driver:[localforage.WEBSQL,localforage.INDEXEDDB,localforage.LOCALSTORAGE],name:'CcgFieldApp',version:1,size:Math.pow(2,20),storeName:'Direct',description:'Caches Ext.Direct results'});return TS.localforage_direct},init:function(){var a=this;Ext.ux.ajax.SimManager._directCache=this;Ext.ux.ajax.SimManager.init({delay:10}).register({url:/.*/,type:'json',defaultSimlet:null,data:function(c){var d=a.constructKey(c.xhr.options.jsonData);var b=Ext.JSON.decode(a.get(d));if(b){b.tid=c.xhr.options.jsonData.tid}return b}});Ext.ux.ajax.SimManager.defaultSimlet.manager=Ext.ux.ajax.SimManager;return this._getLocalForage().iterate(function(b,c,d){a._map.set(c,b)})},constructKey:function(a){var b=a.action+'-'+a.method;var c=a.data?a.data.slice():'';if(!c){return ''+b}if(b==='Fwa-GetList'){c[5]=''}return b+'-'+Ext.JSON.encode(c)},keys:function(){return Array.from(this._map.keys())},set:function(b,a){this._getLocalForage().setItem(b,a);this._map.set(b,a);return this},get:function(a){return this._map.get(a)},has:function(a){return this._map.has(a)},length:function(){return this._map.size}},1,0,0,0,0,0,[TS.service,'SynchronousCachedDirect'],0);Ext.define('TS.overrides.direct.RemotingProvider',{override:'Ext.direct.RemotingProvider',onData:function(c,d,b){var a=c.transaction;if(!IS_OFFLINE&&navigator.onLine&&a&&a.action&&a.method){if(d){var e=TS.service.SynchronousCachedDirect.constructKey(a);TS.service.SynchronousCachedDirect.set(e,b.responseText)}}arguments.callee.$previous.apply(this,arguments)}});Ext.cmd.derive('Ext.dom.Fly',Ext.dom.Element,{alternateClassName:'Ext.dom.Element.Fly',validNodeTypes:{1:1,9:1,11:1},isFly:!0,constructor:function(a){this.dom=a;this.el=this},attach:function(b){var a=this;if(!b){return a.detach()}a.dom=b;if(!Ext.cache[b.id]){a.getData().isSynchronized=!1}return a},detach:function(){this.dom=null},addListener:null,removeListener:null},1,0,0,0,0,0,[Ext.dom,'Fly',Ext.dom.Element,'Fly'],function(b){var a={};b.cache=a;Ext.fly=function(c,e){var d=null,h=Ext.fly,f,g;e=e||h.caller&&h.caller.$name||'_global';c=Ext.getDom(c);if(c){f=c.nodeType;if(b.prototype.validNodeTypes[f]||!f&&c.window==c){d=Ext.cache[c.id];if(!d||d.dom!==c){d=a[e]||(a[e]=new b());d.dom=c;g=d.getData(!0);if(g){g.isSynchronized=!1}}}}return d}});Ext.cmd.derive('Ext.dom.CompositeElementLite',Ext.Base,{alternateClassName:['Ext.CompositeElementLite'],isComposite:!0,isLite:!0,statics:{importElementMethods:function(){var b=Ext.dom.Element,a=this.prototype;Ext.Object.each(b.prototype,function(b,c){if(typeof c==='function'&&!a[b]){a[b]=function(){return this.invoke(b,arguments)}}})}},constructor:function(a,b){if(b){this.elements=a||[]}else {this.elements=[];this.add(a)}},getElement:function(b){var a=this._fly||(this._fly=new Ext.dom.Fly());return a.attach(b)},transformElement:function(a){return Ext.getDom(a)},getCount:function(){return this.elements.length},add:function(a,e){var d=this.elements,b,c;if(!a){return this}if(typeof a=='string'){a=Ext.fly(e||document).query(a)}else {if(a.isComposite){a=a.elements}else {if(!Ext.isIterable(a)){a=[a]}}}for(b=0,c=a.length;b<c;++b){d.push(this.transformElement(a[b]))}return this},invoke:function(g,f){var b=this,e=b.elements,h=e.length,d,c,a;if(a!==0){d=(b.isLite?Ext.dom.Fly:Ext.dom.Element).prototype;for(a=0;a<h;a++){c=e[a];if(c){d[g].apply(b.getElement(c),f)}}}return b},item:function(c){var b=this.elements[c],a=null;if(b){a=this.getElement(b)}return a},slice:function(a,b){return Ext.Array.slice(this.elements,a,b)},each:function(g,e){var c=this,d=c.elements,f=d.length,b,a;for(b=0;b<f;b++){a=d[b];if(a){a=this.getElement(a);if(g.call(e||a,a,c,b)===!1){break}}}return c},fill:function(b){var a=this;a.elements=[];a.add(b);return a},insert:function(a,b){Ext.Array.insert(this.elements,a,b)},filter:function(e){var b=this,f=b.elements,i=f.length,g=[],d=0,h=typeof e=='function',c,a;for(;d<i;d++){a=f[d];c=!1;if(a){a=b.getElement(a);if(h){c=e.call(a,a,b,d)!==!1}else {c=a.is(e)}if(c){g.push(b.transformElement(a))}}}b.elements=g;return b},indexOf:function(a){return Ext.Array.indexOf(this.elements,this.transformElement(a))},replaceElement:function(d,a,e){var c=!isNaN(d)?d:this.indexOf(d),b;if(c>-1){a=Ext.getDom(a);if(e){b=this.elements[c];b.parentNode.insertBefore(a,b);Ext.removeNode(b)}Ext.Array.splice(this.elements,c,1,a)}return this},clear:function(c){var d=this,b=d.elements,a=b.length-1;if(c){for(;a>=0;a--){Ext.removeNode(b[a])}}this.elements=[]},addElements:function(a,d){if(!a){return this}if(typeof a==='string'){a=Ext.dom.Element.selectorFunction(a,d)}var e=this.elements,c=a.length,b;for(b=0;b<c;b++){e.push(Ext.get(a[b]))}return this},first:function(){return this.item(0)},last:function(){return this.item(this.getCount()-1)},contains:function(a){return this.indexOf(a)!=-1},removeElement:function(b,g){b=[].concat(b);var f=this,e=f.elements,h=b.length,a,c,d;for(d=0;d<h;d++){a=b[d];if(c=e[a]||e[a=f.indexOf(a)]){if(g){if(c.dom){c.destroy()}else {Ext.removeNode(c)}}Ext.Array.erase(e,a,1)}}return f},destroy:function(){return this.invoke('destroy',arguments);this.callParent()}},1,0,0,0,0,0,[Ext.dom,'CompositeElementLite',Ext,'CompositeElementLite'],function(a){var b=a.prototype;a.importElementMethods();b.on=b.addListener});Ext.cmd.derive('Ext.dom.CompositeElement',Ext.dom.CompositeElementLite,{alternateClassName:'Ext.CompositeElement',isLite:!1,getElement:function(a){return a},transformElement:function(a){return Ext.get(a)}},0,0,0,0,0,0,[Ext.dom,'CompositeElement',Ext,'CompositeElement'],0);Ext.cmd.derive('Ext.dom.GarbageCollector',Ext.Base,{singleton:!0,interval:30000,constructor:function(){var a=this;a.collect=Ext.Function.bind(a.collect,a);a.lastTime=Ext.now();a.resume()},collect:function(){var g=this,b=Ext.cache,a,f,c,d,e,h;for(a in b){if(!b.hasOwnProperty(a)){continue}c=b[a];if(c.skipGarbageCollection){continue}f=c.dom;try{e=Ext.isGarbage(f)}catch(i){delete b[a];continue}if(e){if(c&&c.dom){c.collect()}}}if(Ext.isIE9m){d={};for(a in b){if(b.hasOwnProperty(a)){d[a]=b[a]}}Ext.cache=Ext.dom.Element.cache=d}g.lastTime=Ext.now()},pause:function(){clearTimeout(this.timerId)},resume:function(){var a=this,b=a.lastTime;if(Ext.enableGarbageCollector&&Ext.now()-b>a.interval){a.collect()}a.timerId=Ext.interval(a.collect,a.interval)}},1,0,0,0,0,0,[Ext.dom,'GarbageCollector'],0);Ext.cmd.derive('Ext.event.gesture.Recognizer',Ext.Base,{priority:0,handledEvents:[],config:{onRecognized:Ext.emptyFn,callbackScope:null},constructor:function(a){this.initConfig(a);Ext.event.publisher.Gesture.instance.registerRecognizer(this)},onStart:Ext.emptyFn,onEnd:Ext.emptyFn,onEventCancelled:function(){this.reset()},onTouchStart:Ext.emptyFn,onTouchMove:Ext.emptyFn,onTouchEnd:Ext.emptyFn,onTouchCancel:Ext.emptyFn,fail:function(){return !1},fire:function(){this.getOnRecognized().apply(this.getCallbackScope(),arguments)},reset:Ext.emptyFn},1,0,0,0,0,[[Ext.mixin.Identifiable.prototype.mixinId||Ext.mixin.Identifiable.$className,Ext.mixin.Identifiable]],[Ext.event.gesture,'Recognizer'],0);Ext.cmd.derive('Ext.event.gesture.SingleTouch',Ext.event.gesture.Recognizer,{inheritableStatics:{NOT_SINGLE_TOUCH:'Not Single Touch',TOUCH_MOVED:'Touch Moved',EVENT_CANCELED:'Event Canceled'},onTouchStart:function(a){if(a.touches.length>1){return this.fail(this.self.NOT_SINGLE_TOUCH)}},onTouchCancel:function(){return !1}},0,0,0,0,0,0,[Ext.event.gesture,'SingleTouch'],0);Ext.cmd.derive('Ext.event.gesture.DoubleTap',Ext.event.gesture.SingleTouch,{priority:300,inheritableStatics:{DIFFERENT_TARGET:'Different Target'},config:{moveDistance:8,tapDistance:24,maxDuration:300},handledEvents:['singletap','doubletap'],singleTapTimer:null,startTime:0,lastTapTime:0,onTouchStart:function(c){var a=this,b;if(Ext.event.gesture.SingleTouch.prototype.onTouchStart.apply(this,arguments)===!1){return !1}b=a.lastStartPoint=c.changedTouches[0].point;a.startPoint=a.startPoint||b;a.startTime=c.time;clearTimeout(a.singleTapTimer)},onTouchMove:function(c){var a=this,b=c.changedTouches[0].point;if(Math.abs(b.getDistanceTo(a.lastStartPoint))>=a.getMoveDistance()){a.startPoint=null;return a.fail(a.self.TOUCH_MOVED)}},onTouchEnd:function(b){var a=this,f=a.getMaxDuration(),d=b.time,g=b.target,e=a.lastTapTime,h=a.lastTarget,i=b.changedTouches[0].point,c;a.lastTapTime=d;a.lastTarget=g;if(e){c=d-e;if(c<=f&&Math.abs(i.getDistanceTo(a.startPoint))<=a.getTapDistance()){if(g!==h){return a.fail(a.self.DIFFERENT_TARGET)}a.lastTarget=null;a.lastTapTime=0;a.fire('doubletap',b,{touch:b.changedTouches[0],duration:c});a.startPoint=null;return}}if(d-a.startTime>f){a.fireSingleTap(b)}else {a.setSingleTapTimer(b)}},setSingleTapTimer:function(b){var a=this;a.singleTapTimer=Ext.defer(function(){a.fireSingleTap(b)},a.getMaxDuration())},fireSingleTap:function(b,a){this.fire('singletap',b,{touch:a});this.startPoint=null},reset:function(){var a=this,b=a.singleTapTimer;if(b){clearTimeout(b)}a.startTime=a.lastTapTime=0;a.lastStartPoint=a.startPoint=a.singleTapTimer=null;Ext.event.gesture.SingleTouch.prototype.reset.call(this)}},0,0,0,0,0,0,[Ext.event.gesture,'DoubleTap'],function(a){var b=Ext.manifest.gestures;a.instance=new a(b&&b.doubleTap)});Ext.cmd.derive('Ext.event.gesture.Drag',Ext.event.gesture.SingleTouch,{priority:100,isStarted:!1,startPoint:null,previousPoint:null,lastPoint:null,handledEvents:['dragstart','drag','dragend','dragcancel'],config:{minDistance:8},constructor:function(){Ext.event.gesture.SingleTouch.prototype.constructor.apply(this,arguments);this.initInfo()},initInfo:function(){this.info={touch:null,previous:{x:0,y:0},x:0,y:0,delta:{x:0,y:0},absDelta:{x:0,y:0},flick:{velocity:{x:0,y:0}},direction:{x:0,y:0},time:0,previousTime:{x:0,y:0}}},onTouchStart:function(a){if(Ext.event.gesture.SingleTouch.prototype.onTouchStart.apply(this,arguments)===!1){if(this.isStarted&&this.lastMoveEvent!==null){this.lastMoveEvent.isStopped=!1;this.onTouchEnd(this.lastMoveEvent)}return !1}this.startTime=a.time;this.startPoint=a.changedTouches[0].point},tryDragStart:function(a){var f=this.startPoint,b=a.changedTouches[0],c=b.point,e=this.getMinDistance(),d=this.info;if(Math.abs(c.getDistanceTo(f))>=e){this.isStarted=!0;this.previousPoint=this.lastPoint=c;this.resetInfo('x',a,b);this.resetInfo('y',a,b);d.time=a.time;this.fire('dragstart',a,d)}},onTouchMove:function(a){if(!this.startPoint){return}if(!this.isStarted){this.tryDragStart(a)}if(!this.isStarted){return}var b=a.changedTouches[0],c=b.point;if(this.lastPoint){this.previousPoint=this.lastPoint}this.lastPoint=c;this.lastMoveEvent=a;this.updateInfo('x',a,b);this.updateInfo('y',a,b);this.info.time=a.time;this.fire('drag',a,this.info)},onAxisDragEnd:function(b,a){var c=a.time-a.previousTime[b];if(c>0){a.flick.velocity[b]=(a[b]-a.previous[b])/c}},resetInfo:function(b,h,g){var f=this.lastPoint[b],d=this.startPoint[b],e=f-d,c=b.toUpperCase(),a=this.info;a.touch=g;a.delta[b]=e;a.absDelta[b]=Math.abs(e);a.previousTime[b]=this.startTime;a.previous[b]=d;a[b]=f;a.direction[b]=0;a['start'+c]=this.startPoint[b];a['previous'+c]=a.previous[b];a['page'+c]=a[b];a['delta'+c]=a.delta[b];a['absDelta'+c]=a.absDelta[b];a['previousDelta'+c]=0;a.startTime=this.startTime},updateInfo:function(b,l,k){var e=this,d=e.lastPoint[b],g=e.previousPoint[b],f=e.startPoint[b],i=d-f,a=e.info,h=a.direction,c=b.toUpperCase(),j=a.previous[b];a.touch=k;a.delta[b]=i;a.absDelta[b]=Math.abs(i);if(d!==j&&d!==a[b]){a.previous[b]=a[b];a.previousTime[b]=a.time}a[b]=d;if(d>g){h[b]=1}else {if(d<g){h[b]=-1}}a['start'+c]=f;a['previous'+c]=a.previous[b];a['page'+c]=a[b];a['delta'+c]=a.delta[b];a['absDelta'+c]=a.absDelta[b];a['previousDelta'+c]=a.previous[b]-f;a.startTime=e.startTime},onTouchEnd:function(a){if(this.startPoint){this.doEnd(a)}},onTouchCancel:function(a){if(this.startPoint){this.doEnd(a,!0)}return !1},doEnd:function(b,f){var a=this,d,e,c;if(!a.isStarted){a.tryDragStart(b)}if(a.isStarted){d=b.changedTouches[0];e=d.point;c=a.info;a.isStarted=!1;a.lastPoint=e;a.updateInfo('x',b,d);a.updateInfo('y',b,d);c.time=b.time;a.onAxisDragEnd('x',c);a.onAxisDragEnd('y',c);a.fire(f?'dragcancel':'dragend',b,c);a.previousPoint=a.lastPoint=a.lastMoveEvent=null}a.startPoint=null},reset:function(){var a=this;a.isStarted=a.lastPoint=a.startPoint=a.previousPoint=a.lastPoint=a.lastMoveEvent=null;a.initInfo();Ext.event.gesture.SingleTouch.prototype.reset.call(this)}},1,0,0,0,0,0,[Ext.event.gesture,'Drag'],function(b){var a=Ext.manifest.gestures;b.instance=new b(a&&a.drag)});Ext.cmd.derive('Ext.event.gesture.Swipe',Ext.event.gesture.SingleTouch,{priority:500,handledEvents:['swipestart','swipe','swipecancel'],inheritableStatics:{MAX_OFFSET_EXCEEDED:'Max Offset Exceeded',MAX_DURATION_EXCEEDED:'Max Duration Exceeded',DISTANCE_NOT_ENOUGH:'Distance Not Enough'},config:{minDistance:80,maxOffset:35,maxDuration:1000},onTouchStart:function(b){if(Ext.event.gesture.SingleTouch.prototype.onTouchStart.apply(this,arguments)===!1){return !1}var a=b.changedTouches[0];this.startTime=b.time;this.isHorizontal=!0;this.isVertical=!0;this.startX=a.pageX;this.startY=a.pageY},onTouchMove:function(b){var f=b.changedTouches[0],h=f.pageX,i=f.pageY,k=h-this.startX,l=i-this.startY,c=Math.abs(h-this.startX),d=Math.abs(i-this.startY),j=b.time-this.startTime,g=this.getMinDistance(),m=b.time,a,e;if(m-this.startTime>this.getMaxDuration()){return this.fail(this.self.MAX_DURATION_EXCEEDED)}if(this.isHorizontal&&d>this.getMaxOffset()){this.isHorizontal=!1}if(this.isVertical&&c>this.getMaxOffset()){this.isVertical=!1}if(!this.isVertical||!this.isHorizontal){if(this.isHorizontal&&c<g){a=k<0?'left':'right';e=c}else {if(this.isVertical&&d<g){a=l<0?'up':'down';e=d}}}if(a&&!this.isStarted){this.isStarted=!0;this.fire('swipestart',b,{touch:f,direction:a,distance:e,duration:j})}if(!this.isHorizontal&&!this.isVertical){return this.fail(this.self.MAX_OFFSET_EXCEEDED)}},onTouchEnd:function(a){if(this.onTouchMove(a)===!1){return !1}var d=a.changedTouches[0],k=d.pageX,l=d.pageY,h=k-this.startX,i=l-this.startY,f=Math.abs(h),g=Math.abs(i),e=this.getMinDistance(),j=a.time-this.startTime,b,c;if(this.isVertical&&g<e){this.isVertical=!1}if(this.isHorizontal&&f<e){this.isHorizontal=!1}if(this.isHorizontal){b=h<0?'left':'right';c=f}else {if(this.isVertical){b=i<0?'up':'down';c=g}else {return this.fail(this.self.DISTANCE_NOT_ENOUGH)}}this.isStarted=!1;this.fire('swipe',a,{touch:d,direction:b,distance:c,duration:j})},onTouchCancel:function(a){this.fire('swipecancel',a);return !1},reset:function(){var a=this;a.isStarted=a.startTime=a.isHorizontal=a.isVertical=a.startX=a.startY=null;Ext.event.gesture.SingleTouch.prototype.reset.call(this)}},0,0,0,0,0,0,[Ext.event.gesture,'Swipe'],function(b){var a=Ext.manifest.gestures;b.instance=new b(a&&a.swipe)});Ext.cmd.derive('Ext.event.gesture.EdgeSwipe',Ext.event.gesture.Swipe,{priority:800,handledEvents:['edgeswipe','edgeswipestart','edgeswipeend','edgeswipecancel'],inheritableStatics:{NOT_NEAR_EDGE:'Not Near Edge'},config:{minDistance:60},onTouchStart:function(b){if(Ext.event.gesture.Swipe.prototype.onTouchStart.apply(this,arguments)===!1){return !1}var a=b.changedTouches[0];this.started=!1;this.direction=null;this.isHorizontal=!0;this.isVertical=!0;this.startX=a.pageX;this.startY=a.pageY},onTouchMove:function(c){var e=c.changedTouches[0],l=e.pageX,m=e.pageY,f=l-this.startX,g=m-this.startY,i=Math.abs(m-this.startY),h=Math.abs(l-this.startX),d=this.getMinDistance(),j=this.getMaxOffset(),k=c.time-this.startTime,o=Ext.Viewport&&Ext.Element.getViewportWidth(),n=Ext.Viewport&&Ext.Element.getViewportHeight(),a,b;if(this.isVertical&&h>j){this.isVertical=!1}if(this.isHorizontal&&i>j){this.isHorizontal=!1}if(this.isVertical&&this.isHorizontal){if(i>h){this.isHorizontal=!1}else {this.isVertical=!1}}if(this.isHorizontal){a=f<0?'left':'right';b=f}else {if(this.isVertical){a=g<0?'up':'down';b=g}}a=this.direction||(this.direction=a);if(a==='up'){b=g*-1}else {if(a==='left'){b=f*-1}}this.distance=b;if(!b){return this.fail(this.self.DISTANCE_NOT_ENOUGH)}if(!this.started){if(a==='right'&&this.startX>d){return this.fail(this.self.NOT_NEAR_EDGE)}else {if(a==='down'&&this.startY>d){return this.fail(this.self.NOT_NEAR_EDGE)}else {if(a==='left'&&o-this.startX>d){return this.fail(this.self.NOT_NEAR_EDGE)}else {if(a==='up'&&n-this.startY>d){return this.fail(this.self.NOT_NEAR_EDGE)}}}}this.started=!0;this.startTime=c.time;this.fire('edgeswipestart',c,{touch:e,direction:a,distance:b,duration:k})}else {this.fire('edgeswipe',c,{touch:e,direction:a,distance:b,duration:k})}},onTouchEnd:function(a){var b;if(this.onTouchMove(a)!==!1){b=a.time-this.startTime;this.fire('edgeswipeend',a,{touch:a.changedTouches[0],direction:this.direction,distance:this.distance,duration:b})}},onTouchCancel:function(a){this.fire('edgeswipecancel',a,{touch:a.changedTouches[0]});return !1},reset:function(){var a=this;a.started=a.direction=a.isHorizontal=a.isVertical=a.startX=a.startY=a.startTime=a.distance=null;Ext.event.gesture.Swipe.prototype.reset.call(this)}},0,0,0,0,0,0,[Ext.event.gesture,'EdgeSwipe'],function(a){var b=Ext.manifest.gestures;a.instance=new a(b&&b.edgeSwipe)});Ext.cmd.derive('Ext.event.gesture.LongPress',Ext.event.gesture.SingleTouch,{priority:400,inheritableStatics:{DURATION_NOT_ENOUGH:'Duration Not Enough'},config:{moveDistance:8,minDuration:1000},handledEvents:['longpress','taphold'],fireLongPress:function(a){this.fire('longpress',a,{touch:a.changedTouches[0],duration:this.getMinDuration()});this.isLongPress=!0},onTouchStart:function(a){if(Ext.event.gesture.SingleTouch.prototype.onTouchStart.apply(this,arguments)===!1){return !1}this.startPoint=a.changedTouches[0].point;this.isLongPress=!1;this.setLongPressTimer(a)},setLongPressTimer:function(b){var a=this;a.timer=Ext.defer(function(){a.fireLongPress(b)},a.getMinDuration())},onTouchMove:function(b){var a=b.changedTouches[0].point;if(Math.abs(a.getDistanceTo(this.startPoint))>=this.getMoveDistance()){return this.fail(this.self.TOUCH_MOVED)}},onTouchEnd:function(){if(!this.isLongPress){return this.fail(this.self.DURATION_NOT_ENOUGH)}},fail:function(a){clearTimeout(this.timer);return Ext.event.gesture.SingleTouch.prototype.fail.call(this,a)},reset:function(){var a=this,b=a.timer;if(b){clearTimeout(b)}a.timer=a.isLongPress=a.startPoint=null;Ext.event.gesture.SingleTouch.prototype.reset.call(this)},fire:function(b){if(b==='longpress'){var a=Array.prototype.slice.call(arguments);a[0]='taphold';this.fire.apply(this,a)}return Ext.event.gesture.SingleTouch.prototype.fire.apply(this,arguments)}},0,0,0,0,0,0,[Ext.event.gesture,'LongPress'],function(a){var b=Ext.manifest.gestures;a.instance=new a(b&&b.longPress)});Ext.cmd.derive('Ext.event.gesture.MultiTouch',Ext.event.gesture.Recognizer,{requiredTouchesCount:2,isTracking:!1,isStarted:!1,onTouchStart:function(a){var b=this.requiredTouchesCount,d=a.touches,c=d.length;if(c===b){this.start(a)}else {if(c>b){this.end(a)}}},onTouchEnd:function(a){this.end(a)},onTouchCancel:function(a){this.end(a,!0);return !1},start:function(){if(!this.isTracking){this.isTracking=!0;this.isStarted=!1}},end:function(b,a){if(this.isTracking){this.isTracking=!1;if(this.isStarted){this.isStarted=!1;this[a?'fireCancel':'fireEnd'](b)}}},reset:function(){this.isTracking=this.isStarted=!1}},0,0,0,0,0,0,[Ext.event.gesture,'MultiTouch'],0);Ext.cmd.derive('Ext.event.gesture.Pinch',Ext.event.gesture.MultiTouch,{priority:600,handledEvents:['pinchstart','pinch','pinchend','pinchcancel'],startDistance:0,lastTouches:null,onTouchMove:function(c){if(!this.isTracking){return}var b=c.touches,e,d,a;e=b[0].point;d=b[1].point;a=e.getDistanceTo(d);if(a===0){return}if(!this.isStarted){this.isStarted=!0;this.startDistance=a;this.fire('pinchstart',c,{touches:b,distance:a,scale:1})}else {this.fire('pinch',c,{touches:b,distance:a,scale:a/this.startDistance})}},fireEnd:function(a){this.fire('pinchend',a)},fireCancel:function(a){this.fire('pinchcancel',a)},reset:function(){this.lastTouches=null;this.startDistance=0;Ext.event.gesture.MultiTouch.prototype.reset.call(this)}},0,0,0,0,0,0,[Ext.event.gesture,'Pinch'],function(b){var a=Ext.manifest.gestures;b.instance=new b(a&&a.pinch)});Ext.cmd.derive('Ext.event.gesture.Rotate',Ext.event.gesture.MultiTouch,{priority:700,handledEvents:['rotatestart','rotate','rotateend','rotatecancel'],startAngle:0,lastTouches:null,lastAngle:null,onTouchMove:function(d){if(!this.isTracking||d.touches.length<2){return}var b=d.touches,c=this.lastAngle,i,h,a,f,e,g;i=b[0].point;h=b[1].point;a=i.getAngleTo(h);if(c!==null){g=Math.abs(c-a);f=a+360;e=a-360;if(Math.abs(f-c)<g){a=f}else {if(Math.abs(e-c)<g){a=e}}}this.lastAngle=a;if(!this.isStarted){this.isStarted=!0;this.startAngle=a;this.fire('rotatestart',d,{touches:b,angle:a,rotation:0})}else {this.fire('rotate',d,{touches:b,angle:a,rotation:a-this.startAngle})}this.lastTouches=Ext.Array.clone(b)},fireEnd:function(a){this.lastAngle=null;this.fire('rotateend',a)},fireCancel:function(a){this.lastAngle=null;this.fire('rotatecancel',a)},reset:function(){var a=this;a.lastTouches=a.lastAngle=a.startAngle=null;Ext.event.gesture.MultiTouch.prototype.reset.call(this)}},0,0,0,0,0,0,[Ext.event.gesture,'Rotate'],function(b){var a=Ext.manifest.gestures;b.instance=new b(a&&a.rotate)});Ext.cmd.derive('Ext.event.gesture.Tap',Ext.event.gesture.SingleTouch,{priority:200,handledEvents:['tap','tapcancel'],config:{moveDistance:8},onTouchStart:function(a){if(Ext.event.gesture.SingleTouch.prototype.onTouchStart.call(this,a)===!1){return !1}this.startPoint=a.changedTouches[0].point},onTouchMove:function(b){var a=b.changedTouches[0],c=a.point;if(Math.abs(c.getDistanceTo(this.startPoint))>=this.getMoveDistance()){this.fire('tapcancel',b,{touch:a});return this.fail(this.self.TOUCH_MOVED)}},onTouchEnd:function(a){this.fire('tap',a,{touch:a.changedTouches[0]})},onTouchCancel:function(a){this.fire('tapcancel',a,{touch:a.changedTouches[0]});return !1},reset:function(){this.startPoint=null;Ext.event.gesture.SingleTouch.prototype.reset.call(this)}},0,0,0,0,0,0,[Ext.event.gesture,'Tap'],function(b){var a=Ext.manifest.gestures;b.instance=new b(a&&a.tap)});Ext.cmd.derive('Ext.event.publisher.Focus',Ext.event.publisher.Dom,{type:'focus',handledEvents:['focusenter','focusleave','focusmove'],handledDomEvents:['focusin','focusout'],doDelegatedEvent:function(a,c){var d=this,b;a=Ext.event.publisher.Dom.prototype.doDelegatedEvent.call(this,a,!1);if(a){if(a.type==='focusout'){if(a.relatedTarget==null){d.processFocusIn(a,a.target,document.body,c)}}else {b=a.relatedTarget;if(b==null||!b.tagName){b=document.body}d.processFocusIn(a,b,a.target,c)}}},processFocusIn:function(i,d,e,l){var c=this,h,a,b=[],f,g,j,k;j=Ext.fly(d);k=Ext.fly(e);if(j&&j.isFocusSuspended()||k&&k.isFocusSuspended()){return}for(a=d,h=Ext.dom.Element.getCommonAncestor(e,d,!0);a&&a!==h;a=a.parentNode){b.push(a)}if(b.length){f=c.createSyntheticEvent('focusleave',i,d,e);c.publish('focusleave',b,f);if(f.isStopped){return}}b.length=0;for(a=e;a&&a!==h;a=a.parentNode){b.push(a)}g=c.createSyntheticEvent('focusenter',i,e,d);if(b.length){c.publish('focusenter',b,g);if(g.isStopped){return}}b=c.getPropagatingTargets(h);if(b.length){f=c.createSyntheticEvent('focusmove',i,e,d);c.publish('focusmove',b,f);if(f.isStopped){return}}if(l){c.afterEvent(i)}Ext.GlobalEvents.fireEvent('focus',{event:g,toElement:e,fromElement:d})},createSyntheticEvent:function(d,c,e,b){var a=new Ext.event.Event(c);a.type=d;a.relatedTarget=b;a.target=e;return a}},0,0,0,0,0,0,[Ext.event.publisher,'Focus'],function(a){var b;a.instance=new a();if(!Ext.supports.FocusinFocusoutEvents){this.override({handledDomEvents:['focus','blur'],doDelegatedEvent:function(c,f){var e=this,d;c=e.callSuper([c,!1]);if(c){d=c.target!==window&&c.target!==document;if(c.type==='blur'){if(!d){if(c.explicitOriginalTarget===a.previousActiveElement){if(c.target===window){clearTimeout(b);b=0;e.processFocusIn(c,a.previousActiveElement,document.body,f);a.previousActiveElement=null}}}else {b=setTimeout(function(){b=0;e.processFocusIn(c,c.target,document.body,f);a.previousActiveElement=null},0)}a.previousActiveElement=d?c.target:null}else {clearTimeout(b);b=0;e.processFocusIn(c,a.previousActiveElement||document.body,d?c.target:document.body,f)}}}})}});Ext.cmd.derive('Ext.fx.runner.Css',Ext.Evented,{prefixedProperties:{'transform':!0,'transform-origin':!0,'perspective':!0,'transform-style':!0,'transition':!0,'transition-property':!0,'transition-duration':!0,'transition-timing-function':!0,'transition-delay':!0,'animation':!0,'animation-name':!0,'animation-duration':!0,'animation-iteration-count':!0,'animation-direction':!0,'animation-timing-function':!0,'animation-delay':!0},lengthProperties:{'top':!0,'right':!0,'bottom':!0,'left':!0,'width':!0,'height':!0,'max-height':!0,'max-width':!0,'min-height':!0,'min-width':!0,'margin-bottom':!0,'margin-left':!0,'margin-right':!0,'margin-top':!0,'padding-bottom':!0,'padding-left':!0,'padding-right':!0,'padding-top':!0,'border-bottom-width':!0,'border-left-width':!0,'border-right-width':!0,'border-spacing':!0,'border-top-width':!0,'border-width':!0,'outline-width':!0,'letter-spacing':!0,'line-height':!0,'text-indent':!0,'word-spacing':!0,'font-size':!0,'translate':!0,'translateX':!0,'translateY':!0,'translateZ':!0,'translate3d':!0},durationProperties:{'transition-duration':!0,'transition-delay':!0,'animation-duration':!0,'animation-delay':!0},angleProperties:{rotate:!0,rotateX:!0,rotateY:!0,rotateZ:!0,skew:!0,skewX:!0,skewY:!0},lengthUnitRegex:/([a-z%]*)$/,DEFAULT_UNIT_LENGTH:'px',DEFAULT_UNIT_ANGLE:'deg',DEFAULT_UNIT_DURATION:'ms',formattedNameCache:{},transformMethods3d:['translateX','translateY','translateZ','rotate','rotateX','rotateY','rotateZ','skewX','skewY','scaleX','scaleY','scaleZ'],transformMethodsNo3d:['translateX','translateY','rotate','skewX','skewY','scaleX','scaleY'],constructor:function(){var a=this;a.transformMethods=Ext.feature.has.Css3dTransforms?a.transformMethods3d:a.transformMethodsNo3d;a.vendorPrefix=Ext.browser.getStyleDashPrefix();a.ruleStylesCache={};Ext.Evented.prototype.constructor.call(this)},getStyleSheet:function(){var c=this.styleSheet,a,b;if(!c){a=document.createElement('style');a.type='text/css';(document.head||document.getElementsByTagName('head')[0]).appendChild(a);b=document.styleSheets;this.styleSheet=c=b[b.length-1]}return c},applyRules:function(j){var i=this.getStyleSheet(),h=this.ruleStylesCache,k=i.cssRules,d,g,b,c,f,a,e;for(d in j){g=j[d];b=h[d];if(b===undefined){f=k.length;i.insertRule(d+'{}',f);b=h[d]=k.item(f).style}c=b.$cache;if(!c){c=b.$cache={}}for(a in g){e=this.formatValue(g[a],a);a=this.formatName(a);if(c[a]!==e){c[a]=e;if(e===null){b.removeProperty(a)}else {b.setProperty(a,e,'important')}}}}return this},applyStyles:function(f){var c,e,d,b,a,g;for(c in f){if(f.hasOwnProperty(c)){e=document.getElementById(c);if(!e){continue}d=e.style;b=f[c];for(a in b){if(b.hasOwnProperty(a)){g=this.formatValue(b[a],a);a=this.formatName(a);if(g===null){d.removeProperty(a)}else {d.setProperty(a,g,'important')}}}}}return this},formatName:function(b){var c=this.formattedNameCache,a=c[b];if(!a){if((Ext.os.is.Tizen||!Ext.feature.has.CssTransformNoPrefix)&&this.prefixedProperties[b]){a=this.vendorPrefix+b}else {a=b}c[b]=a}return a},formatValue:function(a,c){var j=typeof a,i=this.DEFAULT_UNIT_LENGTH,g,d,b,f,h,e,k;if(a===null){return ''}if(j=='string'){if(this.lengthProperties[c]){k=a.match(this.lengthUnitRegex)[1];if(k.length>0){}else {return a+i}}return a}else {if(j=='number'){if(a==0){return '0'}if(this.lengthProperties[c]){return a+i}if(this.angleProperties[c]){return a+this.DEFAULT_UNIT_ANGLE}if(this.durationProperties[c]){return a+this.DEFAULT_UNIT_DURATION}}else {if(c==='transform'){g=this.transformMethods;h=[];for(b=0,f=g.length;b<f;b++){d=g[b];h.push(d+'('+this.formatValue(a[d],d)+')')}return h.join(' ')}else {if(Ext.isArray(a)){e=[];for(b=0,f=a.length;b<f;b++){e.push(this.formatValue(a[b],c))}return e.length>0?e.join(', '):'none'}}}}return a}},1,0,0,0,0,0,[Ext.fx.runner,'Css'],0);Ext.cmd.derive('Ext.fx.runner.CssTransition',Ext.fx.runner.Css,{alternateClassName:'Ext.Animator',singleton:!0,listenersAttached:!1,constructor:function(){this.runningAnimationsData={};return this.callParent(arguments)},attachListeners:function(){this.listenersAttached=!0;Ext.getWin().on('transitionend','onTransitionEnd',this)},onTransitionEnd:function(c){var a=c.target,b=a.id;if(b&&this.runningAnimationsData.hasOwnProperty(b)){this.refreshRunningAnimationsData(Ext.get(a),[c.browserEvent.propertyName])}},onAnimationEnd:function(d,a,b,c,n){var l=d.getId(),j=this.runningAnimationsData[l],k={},h={},g,f,e,m,i;b.un('stop','onAnimationStop',this);if(j){g=j.nameMap}k[l]=h;if(a.onBeforeEnd){a.onBeforeEnd.call(a.scope||this,d,c)}b.fireEvent('animationbeforeend',b,d,c);this.fireEvent('animationbeforeend',this,b,d,c);if(n||!c&&!a.preserveEndState){f=a.toPropertyNames;for(e=0,m=f.length;e<m;e++){i=f[e];if(g&&!g.hasOwnProperty(i)){h[i]=null}}}if(a.after){Ext.merge(h,a.after)}this.applyStyles(k);if(a.onEnd){a.onEnd.call(a.scope||this,d,c)}b.fireEvent('animationend',b,d,c);this.fireEvent('animationend',this,b,d,c);Ext.AnimationQueue.stop(Ext.emptyFn,b)},onAllAnimationsEnd:function(b){var c=b.getId(),a={};delete this.runningAnimationsData[c];a[c]={'transition-property':null,'transition-duration':null,'transition-timing-function':null,'transition-delay':null};this.applyStyles(a);this.fireEvent('animationallend',this,b)},hasRunningAnimations:function(c){var b=c.getId(),a=this.runningAnimationsData;return a.hasOwnProperty(b)&&a[b].sessions.length>0},refreshRunningAnimationsData:function(i,m,f,g){var s=i.getId(),r=this.runningAnimationsData,e=r[s];if(!e){return}var o=e.nameMap,n=e.nameList,c=e.sessions,h,j,p,d,b,a,k,q,l=!1;f=Boolean(f);g=Boolean(g);if(!c){return this}h=c.length;if(h===0){return this}if(g){e.nameMap={};n.length=0;for(b=0;b<h;b++){a=c[b];this.onAnimationEnd(i,a.data,a.animation,f,g)}c.length=0}else {for(b=0;b<h;b++){a=c[b];k=a.map;q=a.list;for(j=0,p=m.length;j<p;j++){d=m[j];if(k[d]){delete k[d];Ext.Array.remove(q,d);a.length--;if(--o[d]==0){delete o[d];Ext.Array.remove(n,d)}}}if(a.length==0){c.splice(b,1);b--;h--;l=!0;this.onAnimationEnd(i,a.data,a.animation,f)}}}if(!g&&!f&&c.length==0&&l){this.onAllAnimationsEnd(i)}},getRunningData:function(b){var a=this.runningAnimationsData;if(!a.hasOwnProperty(b)){a[b]={nameMap:{},nameList:[],sessions:[]}}return a[b]},getTestElement:function(){var c=this.testElement,d,b,a;if(!c){d=document.createElement('iframe');d.setAttribute('tabIndex',-1);a=d.style;a.setProperty('visibility','hidden','important');a.setProperty('width','0px','important');a.setProperty('height','0px','important');a.setProperty('position','absolute','important');a.setProperty('border','0px','important');a.setProperty('zIndex','-1000','important');document.body.appendChild(d);b=d.contentDocument;b.open();b.writeln('</body>');b.close();this.testElement=c=b.createElement('div');c.style.setProperty('position','absolute','important');b.body.appendChild(c);this.testElementComputedStyle=window.getComputedStyle(c)}return c},getCssStyleValue:function(b,a){var c=this.getTestElement(),e=this.testElementComputedStyle,d=c.style;d.setProperty(b,a);if(Ext.browser.is.Firefox){c.offsetHeight}a=e.getPropertyValue(b);d.removeProperty(b);return a},run:function(t){var a=this,H=a.lengthProperties,E={},j={},d={},i,f,m,k,F,g,e,u,v,s,r,w,x,G,c,o,A,C,h,b,l,D,n,y,q,p,z,B;if(!a.listenersAttached){a.attachListeners()}t=Ext.Array.from(t);for(w=0,G=t.length;w<G;w++){c=t[w];c=Ext.factory(c,Ext.fx.Animation);i=c.getElement();Ext.AnimationQueue.start(Ext.emptyFn,c);C=window.getComputedStyle(i.dom);f=i.getId();d=Ext.merge({},c.getData());if(c.onBeforeStart){c.onBeforeStart.call(c.scope||a,i)}c.fireEvent('animationstart',c);a.fireEvent('animationstart',a,c);d[f]=d;F=d.before;m=d.from;k=d.to;d.fromPropertyNames=g=[];d.toPropertyNames=e=[];for(b in k){if(k.hasOwnProperty(b)){k[b]=l=a.formatValue(k[b],b);h=a.formatName(b);y=H.hasOwnProperty(b);if(!y){l=a.getCssStyleValue(h,l)}if(m.hasOwnProperty(b)){m[b]=n=a.formatValue(m[b],b);if(!y){n=a.getCssStyleValue(h,n)}if(l!==n){g.push(h);e.push(h)}}else {D=C.getPropertyValue(h);if(l!==D){e.push(h)}}}}o=e.length;if(o===0){a.onAnimationEnd(i,d,c);continue}s=a.getRunningData(f);z=s.sessions;if(z.length>0){a.refreshRunningAnimationsData(i,Ext.Array.merge(g,e),!0,d.replacePrevious)}q=s.nameMap;p=s.nameList;A={};for(x=0;x<o;x++){b=e[x];A[b]=!0;if(!q.hasOwnProperty(b)){q[b]=1;p.push(b)}else {q[b]++}}B={element:i,map:A,list:e.slice(),length:o,data:d,animation:c};z.push(B);c.on('stop','onAnimationStop',a);r=Ext.apply({},F);Ext.apply(r,m);if(p.length>0){g=Ext.Array.difference(p,g);e=Ext.Array.merge(g,e);r['transition-property']=g}E[f]=r;j[f]=Ext.apply({},k);j[f]['transition-property']=e;j[f]['transition-duration']=d.duration;j[f]['transition-timing-function']=d.easing;j[f]['transition-delay']=d.delay;c.startTime=Date.now()}v=a.$className;a.applyStyles(E);u=function(b){if(b.data===v&&b.source===window){window.removeEventListener('message',u,!1);a.applyStyles(j)}};if(window.requestAnimationFrame){window.requestAnimationFrame(function(){window.addEventListener('message',u,!1);window.postMessage(v,'*')})}else {Ext.defer(function(){window.addEventListener('message',u,!1);window.postMessage(v,'*')},1)}},onAnimationStop:function(h){var c=this.runningAnimationsData,e,f,d,b,g,a;for(e in c){if(c.hasOwnProperty(e)){f=c[e];d=f.sessions;for(b=0,g=d.length;b<g;b++){a=d[b];if(a.animation===h){this.refreshRunningAnimationsData(a.element,a.list.slice(),!1)}}}}}},1,0,0,0,0,0,[Ext.fx.runner,'CssTransition',Ext,'Animator'],0);Ext.cmd.derive('Ext.list.AbstractTreeItem',Ext.Widget,{isTreeListItem:!0,cachedConfig:{expandable:!1,expanded:!1,floated:!1,iconCls:'',leaf:!0,loading:!1,selected:!1,selectedParent:!1},config:{iconClsProperty:'iconCls',indent:null,owner:null,node:null,over:null,parentItem:null,text:{lazy:!0,$value:''},textProperty:'text'},updateNode:function(b){if(b){var a=this,g=a.itemMap,d,h,i,c,f,e;a.element.dom.setAttribute('data-recordId',b.internalId);if(!g){d=b.childNodes;h=a.getOwner();a.itemMap=g={};for(c=0,i=d.length;c<i;++c){e=d[c];f=h.createItem(e,a);g[e.internalId]=f;a.insertItem(f,null)}}a.setExpanded(b.isExpanded());a.doNodeUpdate(b)}},updateSelected:function(b){if(!this.isConfiguring){var a=this.getParentItem();while(a&&!a.isRootListItem){a.setSelectedParent(b);a=a.getParentItem()}}},collapse:function(){this.getNode().collapse()},expand:function(){this.getNode().expand()},getToolElement:Ext.emptyFn,insertItem:Ext.emptyFn,isExpanded:function(){return this.getExpanded()},isSelectionEvent:Ext.emptyFn,isToggleEvent:Ext.emptyFn,nodeCollapse:function(e,b){var a=this,d=a.getOwner(),c=a.preventAnimation?null:d.getAnimation();a.nodeCollapseBegin(c,b);if(!c){a.nodeCollapseEnd(b)}},nodeCollapseBegin:function(d,c){var a=this,b=a.getOwner();a.setExpanded(!1);b.fireEvent('itemcollapse',b,a)},nodeCollapseEnd:function(a){if(!a){this.getOwner().updateLayout()}},nodeExpand:function(e){var a=this,d=a.getOwner(),c=a.getFloated(),b=!c&&d.getAnimation();a.nodeExpandBegin(b);if(!b){a.nodeExpandEnd()}},nodeExpandBegin:function(c){var a=this,b=a.getOwner();a.setExpanded(!0);b.fireEvent('itemexpand',b,a)},nodeExpandEnd:function(){this.getOwner().updateLayout()},nodeInsert:function(f,g){var a=this,d=a.getOwner(),h=a.itemMap,i=f.internalId,b=d.getItem(f),e=null,c;if(b){c=b.getParentItem();c.removeItem(b);if(c!==a){c.doUpdateExpandable();b.setParentItem(a)}}else {b=a.getOwner().createItem(f,a)}h[i]=b;if(g){e=h[g.internalId]}a.insertItem(b,e);a.doUpdateExpandable();d.fireEvent('iteminsert',d,a,b,e);d.updateLayout()},nodeRemove:function(f){var a=this,d=a.itemMap,c=a.getOwner(),e=f.internalId,b=d[e];if(b){delete d[e];a.removeItem(b);b.destroy();a.doUpdateExpandable();c.fireEvent('itemremove',c,a,b);c.updateLayout()}},nodeUpdate:function(a,b){this.doNodeUpdate(a)},removeItem:Ext.emptyFn,updateFloated:function(f){var a=this,c=a.element,b=a.placeholder,e,d;if(f){b=c.clone(!1,!0);b.id+='-placeholder';a.placeholder=Ext.get(b);a.wasExpanded=a.getExpanded();a.setExpanded(!0);c.dom.parentNode.insertBefore(b,c.dom);a.floater=a.createFloater()}else {if(b){d=a.wasExpanded;e=a.getNode();a.setExpanded(d);if(!d&&e.isExpanded()){a.preventAnimation=!0;e.collapse();a.preventAnimation=!1}a.floater.remove(a,!1);b.dom.parentNode.insertBefore(c.dom,b.dom);b.destroy();a.floater.destroy();a.placeholder=a.floater=null;a.floatedByHover=!1}}},destroy:function(){var a=this,b=a.itemMap,c=a.getOwner(),d;if(b){for(d in b){b[d].destroy()}a.itemMap=null}if(c){c.removeItem(a.getNode())}a.setNode(null);a.setParentItem(null);a.setOwner(null);Ext.Widget.prototype.destroy.call(this)},privates:{doNodeUpdate:function(b){var a=this,d=this.getTextProperty(),c=this.getIconClsProperty();if(d){a.setText(b.data[d])}if(c){a.setIconCls(b.data[c])}a.setLoading(b.isLoading());a.setLeaf(b.isLeaf());a.doUpdateExpandable()},doUpdateExpandable:function(){var a=this.getNode();this.setExpandable(a.isExpandable())},onClick:function(d){var a=this,b=a.getOwner(),e=a.getNode(),c={event:d,item:a,node:e,tree:b,select:e.get('selectable')!==!1&&a.isSelectionEvent(d),toggle:a.isToggleEvent(d)};if(b.fireEvent('itemclick',b,c)!==!1){if(c.toggle){a.toggleExpanded()}if(c.select){b.setSelection(a.getNode())}}},toggleExpanded:function(){if(this.isExpanded()){this.collapse()}else {this.expand()}},updateIndent:function(c){var a=this.itemMap,b;for(b in a){a[b].setIndent(c)}}}},0,0,['widget'],{'widget':!0},0,0,[Ext.list,'AbstractTreeItem'],0);Ext.define('TS.overrides.list.AbstractTreeItem',{override:'Ext.list.AbstractTreeItem',compatibility:'6.0.2',updateNode:function(b){if(b){var a=this,g=a.itemMap,e,h,i,d,f,c;a.element.dom.setAttribute('data-recordId',b.internalId);if(!g){e=b.childNodes;h=a.getOwner();a.itemMap=g={};for(d=0,i=e.length;d<i;++d){c=e[d];if(c.data.visible){f=h.createItem(c,a);g[c.internalId]=f;a.insertItem(f,null)}}}a.setExpanded(b.isExpanded());a.doNodeUpdate(b)}}});Ext.cmd.derive('Ext.list.RootTreeItem',Ext.list.AbstractTreeItem,{isRootListItem:!0,element:{reference:'element',tag:'ul',cls:'x-treelist-root-container'},insertItem:function(b,a){if(a){b.element.insertBefore(a.element)}else {this.element.appendChild(b.element)}},isToggleEvent:function(a){return !1}},0,0,['widget'],{'widget':!0},0,0,[Ext.list,'RootTreeItem'],0);Ext.cmd.derive('Ext.list.TreeItem',Ext.list.AbstractTreeItem,{collapsedCls:'x-treelist-item-collapsed',expandedCls:'x-treelist-item-expanded',floatedCls:'x-treelist-item-floated',floatedToolCls:'x-treelist-item-tool-floated',leafCls:'x-treelist-item-leaf',expandableCls:'x-treelist-item-expandable',hideIconCls:'x-treelist-item-hide-icon',loadingCls:'x-treelist-item-loading',selectedCls:'x-treelist-item-selected',selectedParentCls:'x-treelist-item-selected-parent',withIconCls:'x-treelist-item-with-icon',hoverCls:'x-treelist-item-over',rowHoverCls:'x-treelist-row-over',isTreeListItem:!0,config:{rowCls:null},rowClsProperty:'rowCls',element:{reference:'element',tag:'li',cls:'x-treelist-item',children:[{reference:'rowElement',cls:'x-treelist-row',children:[{reference:'wrapElement',cls:'x-treelist-item-wrap',children:[{reference:'iconElement',cls:'x-treelist-item-icon'},{reference:'textElement',cls:'x-treelist-item-text'},{reference:'expanderElement',cls:'x-treelist-item-expander'}]}]},{reference:'itemContainer',tag:'ul',cls:'x-treelist-container'},{reference:'toolElement',cls:'x-treelist-item-tool'}]},constructor:function(b){Ext.list.AbstractTreeItem.prototype.constructor.call(this,b);var a=this.toolElement.dom;a.parentNode.removeChild(a)},getToolElement:function(){return this.toolElement},insertItem:function(b,a){if(a){b.element.insertBefore(a.element)}else {this.itemContainer.appendChild(b.element)}},isSelectionEvent:function(b){var a=this.getOwner();return !this.isToggleEvent(b)||!a.getExpanderOnly()||a.getSelectOnExpander()},isToggleEvent:function(b){var a=!1;if(this.getOwner().getExpanderOnly()){a=b.target===this.expanderElement.dom}else {a=!this.itemContainer.contains(b.target)}return a},nodeCollapseBegin:function(b,c){var a=this,d=a.itemContainer,e;if(a.expanding){a.stopAnimation(a.expanding)}e=b&&d.getHeight();Ext.list.AbstractTreeItem.prototype.nodeCollapseBegin.call(this,b,c);if(b){d.dom.style.display='block';a.collapsingForExpand=c;a.collapsing=this.runAnimation(Ext.merge({from:{height:e},to:{height:0},callback:a.nodeCollapseDone,scope:a},b))}},nodeCollapseDone:function(c){var a=this,b=a.itemContainer;a.collapsing=null;b.dom.style.display='';b.setHeight(null);a.nodeCollapseEnd(a.collapsingForExpand)},nodeExpandBegin:function(b){var a=this,c=a.itemContainer,d;if(a.collapsing){a.stopAnimation(a.collapsing)}Ext.list.AbstractTreeItem.prototype.nodeExpandBegin.call(this,b);if(b){d=c.getHeight();c.setHeight(0);a.expanding=a.runAnimation(Ext.merge({to:{height:d},callback:a.nodeExpandDone,scope:a},b))}},nodeExpandDone:function(){this.expanding=null;this.itemContainer.setHeight(null);this.nodeExpandEnd()},removeItem:function(a){this.itemContainer.removeChild(a.element)},updateNode:function(b,a){this.syncIndent();Ext.list.AbstractTreeItem.prototype.updateNode.call(this,b,a)},updateExpandable:function(){this.updateExpandCls()},updateExpanded:function(){this.updateExpandCls()},updateFloated:function(b,c){var a=this;Ext.list.AbstractTreeItem.prototype.updateFloated.call(this,b,c);a.element.toggleCls(a.floatedCls,b);a.toolElement.toggleCls(a.floatedToolCls,b)},updateIconCls:function(b,c){var a=this,d=a.element;a.doIconCls(a.iconElement,b,c);a.doIconCls(a.toolElement,b,c);d.toggleCls(a.withIconCls,!!b);d.toggleCls(a.hideIconCls,b===null)},updateLeaf:function(a){this.element.toggleCls(this.leafCls,a)},updateLoading:function(a){this.element.toggleCls(this.loadingCls,a)},updateOver:function(b){var a=this;a.element.toggleCls(a.hoverCls,!!b);a.rowElement.toggleCls(a.rowHoverCls,b>1)},updateRowCls:function(b,a){this.rowElement.replaceCls(a,b)},updateSelected:function(a,e){var b=this,d=b.selectedCls,c=b.getToolElement();Ext.list.AbstractTreeItem.prototype.updateSelected.call(this,a,e);b.element.toggleCls(d,a);if(c){c.toggleCls(d,a)}},updateSelectedParent:function(b){var a=this;a.element.toggleCls(a.selectedParentCls,b);var c=a.getToolElement();if(c){c.toggleCls(a.selectedCls,b)}},updateText:function(a){this.textElement.update(a)},privates:{doNodeUpdate:function(a){Ext.list.AbstractTreeItem.prototype.doNodeUpdate.call(this,a);this.setRowCls(a&&a.data[this.rowClsProperty])},doIconCls:function(b,c,a){if(a){b.removeCls(a)}if(c){b.addCls(c)}},syncIndent:function(){var a=this,d=a.getIndent(),c=a.getNode(),b;if(c){b=c.data.depth-1;a.wrapElement.dom.style.marginLeft=b*d+'px'}},updateExpandCls:function(){if(!this.updatingExpandCls){var a=this,e=a.getExpandable(),b=a.element,f=a.getExpanded(),d=a.expandedCls,c=a.collapsedCls;a.updatingExpandCls=!0;b.toggleCls(a.expandableCls,e);if(e){b.toggleCls(d,f);b.toggleCls(c,!f)}else {b.removeCls([d,c])}a.updatingExpandCls=!1}},updateIndent:function(b,a){this.syncIndent();Ext.list.AbstractTreeItem.prototype.updateIndent.call(this,b,a)}}},1,['treelistitem'],['widget','treelistitem'],{'widget':!0,'treelistitem':!0},['widget.treelistitem'],0,[Ext.list,'TreeItem'],0);Ext.define('Ext.overrides.list.TreeItem',{override:'Ext.list.TreeItem',createFloater:function(){var b=this,d=b.getOwner(),e=d.getUi(),c='x-treelist',a;if(e){c+=' '+c+'-'+e}b.floater=a=new Ext.Container({cls:c+' x-treelist-floater',width:200,top:0,listeners:{element:'element',click:function(a){return d.onClick(a)}}});Ext.Viewport.add(a);a.add(b);a.alignTo(b.getToolElement(),'tl-tr');return a},runAnimation:function(a){return this.itemContainer.animate(a)},stopAnimation:function(a){a.end()}});Ext.cmd.derive('Ext.list.Tree',Ext.Widget,{expanderFirstCls:'x-treelist-expander-first',expanderOnlyCls:'x-treelist-expander-only',highlightPathCls:'x-treelist-highlight-path',microCls:'x-treelist-micro',uiPrefix:'x-treelist-',element:{reference:'element',cls:'x-treelist x-unselectable',listeners:{click:'onClick',mouseenter:'onMouseEnter',mouseleave:'onMouseLeave',mouseover:'onMouseOver'},children:[{reference:'toolsElement',cls:'x-treelist-toolstrip',listeners:{click:'onToolStripClick',mouseover:'onToolStripMouseOver'}}]},cachedConfig:{animation:{duration:500,easing:'ease'},expanderFirst:!0,expanderOnly:!0},config:{defaults:{xtype:'treelistitem'},highlightPath:null,iconSize:null,indent:null,micro:!1,overItem:null,selection:null,selectOnExpander:!1,singleExpand:null,store:null,ui:null},twoWayBindable:{selection:1},publishes:{selection:1},defaultBindProperty:'store',constructor:function(a){Ext.Widget.prototype.constructor.call(this,a);this.publishState('selection',this.getSelection())},beforeLayout:function(){this.syncIconSize()},destroy:function(){var a=this;a.destroying=!0;a.unfloatAll();a.activeFloater=null;a.setSelection(null);a.setStore(null);Ext.Widget.prototype.destroy.call(this)},updateOverItem:function(f,c){var e={},d=2,a,b;for(a=f;a;a=this.getItem(b.parentNode)){b=a.getNode();e[b.internalId]=!0;a.setOver(d);d=1}if(c){for(a=c;a;a=this.getItem(b.parentNode)){b=a.getNode();if(e[b.internalId]){break}a.setOver(0)}}},applyMicro:function(a){return Boolean(a)},applySelection:function(a,b){var c=this.getStore();if(!c){a=null}if(a&&a.get('selectable')===!1){a=b}return a},updateSelection:function(c,d){var b=this,a;if(!b.destroying){a=b.getItem(d);if(a){a.setSelected(!1)}a=b.getItem(c);if(a){a.setSelected(!0)}b.fireEvent('selectionchange',b,c)}},applyStore:function(a){return a&&Ext.StoreManager.lookup(a,'tree')},updateStore:function(c,b){var a=this,d;if(b){if(b.getAutoDestroy()){b.destroy()}else {a.storeListeners.destroy()}a.removeRoot();a.storeListeners=null}if(c){a.storeListeners=c.on({destroyable:!0,scope:a,nodeappend:'onNodeAppend',nodecollapse:'onNodeCollapse',nodeexpand:'onNodeExpand',nodeinsert:'onNodeInsert',noderemove:'onNodeRemove',rootchange:'onRootChange',update:'onNodeUpdate'});d=c.getRoot();if(d){a.createRootItem(d)}}if(!a.destroying){a.updateLayout()}},updateExpanderFirst:function(a){this.element.toggleCls(this.expanderFirstCls,a)},updateExpanderOnly:function(a){this.element.toggleCls(this.expanderOnlyCls,!a)},updateHighlightPath:function(a){this.element.toggleCls(this.highlightPathCls,a)},updateMicro:function(b){var a=this;if(!b){a.unfloatAll();a.activeFloater=null}a.element.toggleCls(a.microCls,b)},updateUi:function(d,a){var c=this.element,b=this.uiPrefix;if(a){c.removeCls(b+a)}if(d){c.addCls(b+d)}delete this.iconSize;this.syncIconSize()},getItem:function(a){var b=this.itemMap,c;if(a&&b){c=b[a.internalId]}return c||null},getItemConfig:function(b,a){return Ext.apply({parentItem:a.isRootListItem?null:a,owner:this,node:b,indent:this.getIndent()},this.getDefaults())},privates:{checkForOutsideClick:function(b){var a=this.activeFloater;if(!a.element.contains(b.target)){this.unfloatAll()}},collapsingForExpand:!1,createItem:function(b,f){var d=this,e=Ext.create(d.getItemConfig(b,f)),g=d.toolsElement,a,c;if(f.isRootListItem){a=e.getToolElement();if(a){c=b.previousSibling;if(!c){g.insertFirst(a)}else {c=d.getItem(b.previousSibling);a.insertAfter(c.getToolElement())}a.dom.setAttribute('data-recordId',b.internalId);a.isTool=!0}}d.itemMap[b.internalId]=e;return e},createRootItem:function(c){var a=this,b;a.itemMap={};a.rootItem=b=new Ext.list.RootTreeItem({indent:a.getIndent(),node:c,owner:a});a.element.appendChild(b.element);a.itemMap[c.internalId]=b},floatItem:function(b,c){var a=this,d;if(b.getFloated()){return}a.unfloatAll();a.activeFloater=d=b;a.floatedByHover=c;b.setFloated(!0);if(c){b.getToolElement().on('mouseleave','checkForMouseLeave',a);d.element.on({scope:a,mouseleave:'checkForMouseLeave',mouseover:'onMouseOver'})}else {Ext.on('mousedown','checkForOutsideClick',a)}},onClick:function(c){var a=c.getTarget('[data-recordId]'),b;if(a){b=a.getAttribute('data-recordId');a=this.itemMap[b];if(a){a.onClick(c)}}},onMouseEnter:function(a){this.onMouseOver(a)},onMouseLeave:function(){this.setOverItem(null)},onMouseOver:function(b){var a=Ext.Component.fromElement(b.getTarget());this.setOverItem(a&&a.isTreeListItem&&a)},checkForMouseLeave:function(c){var a=this.activeFloater,b=c.getRelatedTarget();if(a){if(b!==a.getToolElement().dom&&!a.element.contains(b)){this.unfloatAll()}}},onNodeAppend:function(a,c){if(a){var b=this.itemMap[a.internalId];if(b){b.nodeInsert(c,null)}}},onNodeCollapse:function(b){var a=this.itemMap[b.internalId];if(a){a.nodeCollapse(b,this.collapsingForExpand)}},onNodeExpand:function(f){var a=this,b=a.itemMap[f.internalId],d,h,c,g,e;if(b){if(!b.isRootItem&&a.getSingleExpand()){a.collapsingForExpand=!0;g=(b.getParentItem()||a.rootItem).getNode();d=g.childNodes;for(c=0,h=d.length;c<h;++c){e=d[c];if(e!==f){e.collapse()}}a.collapsing=!1}b.nodeExpand(f)}},onNodeInsert:function(b,d,c){var a=this.itemMap[b.internalId];if(a){a.nodeInsert(d,c)}},onNodeRemove:function(a,d,c){if(a&&!c){var b=this.itemMap[a.internalId];if(b){b.nodeRemove(d)}}},onNodeUpdate:function(d,b,e,c){var a=this.itemMap[b.internalId];if(a){a.nodeUpdate(b,c)}},onRootChange:function(a){this.removeRoot();if(a){this.createRootItem(a)}this.updateLayout()},removeItem:function(e){var c=this.itemMap,d=e.internalId,b,a;if(c){b=c[d];if(b.getParentItem()===null){a=b.getToolElement();if(a){this.toolsElement.removeChild(a)}}delete c[d]}},removeRoot:function(){var a=this,b=a.rootItem;if(b){a.element.removeChild(b.element);a.rootItem=a.itemMap=Ext.destroy(b)}},onToolStripClick:function(c){var a=c.getTarget('[data-recordId]'),b;if(a){b=a.getAttribute('data-recordId');a=this.itemMap[b];if(a){if(a===this.activeFloater){this.unfloatAll()}else {this.floatItem(a,!1)}}}},onToolStripMouseOver:function(c){var a=c.getTarget('[data-recordId]'),b;if(a){b=a.getAttribute('data-recordId');a=this.itemMap[b];if(a){this.floatItem(a,!0)}}},syncIconSize:function(){var a=this,b=a.iconSize||(a.iconSize=parseInt(a.element.getStyle('background-position'),10));a.setIconSize(b)},unfloatAll:function(){var a=this,b=a.activeFloater;if(b){b.setFloated(!1);a.activeFloater=null;if(a.floatedByHover){b.getToolElement().un('mouseleave','checkForMouseLeave',a);b.element.un({scope:a,mouseleave:'checkForMouseLeave',mouseover:'onMouseOver'})}else {Ext.un('mousedown','checkForOutsideClick',a)}}},defaultIconSize:22,updateIconSize:function(a){this.setIndent(a||this.defaultIconSize)},updateIndent:function(b){var a=this.rootItem;if(a){a.setIndent(b)}}}},1,['treelist'],['widget','treelist'],{'widget':!0,'treelist':!0},['widget.treelist'],0,[Ext.list,'Tree'],0);Ext.define('Ext.overrides.list.Tree',{override:'Ext.list.Tree',constructor:function(c){var a=this,b;(arguments.callee.$previous||Ext.Widget.prototype.constructor).call(this,c);b=a.element;if(b.isPainted()){a.syncIconSize()}else {b.on({scope:a,painted:a.syncIconSize,single:!0})}}});Ext.define('TS.overrides.list.Tree',{override:'Ext.list.Tree',compatibility:'6.0.2',updateStore:function(c,b){var a=this,d;if(b){if(b.getAutoDestroy()){b.destroy()}else {a.storeListeners.destroy()}a.removeRoot();a.storeListeners=null}if(c){a.storeListeners=c.on({destroyable:!0,scope:a,filterchange:'onFilterChange',nodeappend:'onNodeAppend',nodecollapse:'onNodeCollapse',nodeexpand:'onNodeExpand',nodeinsert:'onNodeInsert',noderemove:'onNodeRemove',rootchange:'onRootChange',update:'onNodeUpdate'});d=c.getRoot();if(d){a.createRootItem(d)}}if(!a.destroying){a.updateLayout()}},privates:{createItem:function(d,f){var c=this,e=Ext.create(c.getItemConfig(d,f)),g=c.toolsElement,a,b;if(f.isRootListItem){a=e.getToolElement();if(a){b=c.findVisiblePreviousSibling(d);if(!b){g.insertFirst(a)}else {b=c.getItem(b);a.insertAfter(b.getToolElement())}a.dom.setAttribute('data-recordId',d.internalId);a.isTool=!0}}c.itemMap[d.internalId]=e;return e},findVisiblePreviousSibling:function(b){var a=b.previousSibling;while(a){if(a.data.visible){return a}a=a.previousSibling}return null},onFilterChange:function(a){this.onRootChange(a.getRoot())},onRootChange:function(b){var a=this;a.removeRoot();if(b){a.createRootItem(b)}a.updateLayout();a.fireEvent('refresh',a)}}});Ext.cmd.derive('Ext.mixin.Responsive',Ext.Mixin,function(a){return {mixinConfig:{id:'responsive',after:{destroy:'destroy'}},config:{responsiveConfig:{$value:undefined,merge:function(c,d,g,f){if(!c){return d}var e=d?Ext.Object.chain(d):{},b;for(b in c){if(!f||!(b in e)){e[b]={fn:null,config:c[b]}}}return e}},responsiveFormulas:{$value:0,merge:function(c,d,e,b){return this.mergeNew(c,d,e,b)}}},destroy:function(){a.unregister(this);this.callParent()},privates:{statics:{active:!1,all:{},context:Ext.Object.chain(Ext.platformTags),count:0,nextId:0,activate:function(){a.active=!0;a.updateContext();Ext.on('resize',a.onResize,a)},deactivate:function(){a.active=!1;Ext.un('resize',a.onResize,a)},notify:function(){var b=a.all,e=a.context,d=Ext.GlobalEvents,f=a.timer,c;if(f){a.timer=null;Ext.Function.cancelAnimationFrame(f)}a.updateContext();Ext.suspendLayouts();d.fireEvent('beforeresponsiveupdate',e);for(c in b){b[c].setupResponsiveContext()}d.fireEvent('beginresponsiveupdate',e);for(c in b){b[c].updateResponsiveState()}d.fireEvent('responsiveupdate',e);Ext.resumeLayouts(!0)},onResize:function(){if(!a.timer){a.timer=Ext.Function.requestAnimationFrame(a.onTimer)}},onTimer:function(){a.timer=null;a.notify()},processConfig:function(c,d,b){var g=d&&d[b],f=c.config,h,e;if(g){e=c.getConfigurator();h=e.configs[b];f[b]=h.merge(g,f[b],c)}},register:function(b){var c=b.$responsiveId;if(!c){b.$responsiveId=c=++a.nextId;a.all[c]=b;if(++a.count===1){a.activate()}}},unregister:function(b){var c=b.$responsiveId;if(c in a.all){b.$responsiveId=null;delete a.all[c];if(--a.count===0){a.deactivate()}}},updateContext:function(){var e=Ext.Element,d=e.getViewportWidth(),c=e.getViewportHeight(),b=a.context;b.width=d;b.height=c;b.tall=d<c;b.wide=!b.tall;b.landscape=b.portrait=!1;if(!b.platform){b.platform=Ext.platformTags}b[Ext.dom.Element.getOrientation()]=!0}},afterClassMixedIn:function(f){var c=f.prototype,e=c.responsiveConfig,d=c.responsiveFormulas,b;if(e||d){b={};if(e){delete c.responsiveConfig;b.responsiveConfig=e}if(d){delete c.responsiveFormulas;b.responsiveFormulas=d}f.getConfigurator().add(b)}},applyResponsiveConfig:function(b){for(var c in b){b[c].fn=Ext.createRuleFn(c)}return b},applyResponsiveFormulas:function(c){var e={},b,d;if(c){for(d in c){if(Ext.isString(b=c[d])){b=Ext.createRuleFn(b)}e[d]=b}}return e},getResponsiveState:function(){var f=a.context,c=this.getResponsiveConfig(),e={},b,d;if(c){for(d in c){b=c[d];if(b.fn.call(this,f)){Ext.merge(e,b.config)}}}return e},setupResponsiveContext:function(){var b=this.getResponsiveFormulas(),d=a.context,c;if(b){for(c in b){d[c]=b[c].call(this,d)}}},transformInstanceConfig:function(c){var d=this,b;a.register(d);if(c){a.processConfig(d,c,'responsiveConfig');a.processConfig(d,c,'responsiveFormulas')}d.setupResponsiveContext();b=d.getResponsiveState();if(c){b=Ext.merge({},c,b);delete b.responsiveConfig;delete b.responsiveFormulas}return b},updateResponsiveState:function(){var b=this.getResponsiveState();this.setConfig(b)}}}},0,0,0,0,0,0,[Ext.mixin,'Responsive'],0);Ext.cmd.derive('Ext.mixin.Selectable',Ext.Mixin,{mixinConfig:{id:'selectable',after:{updateStore:'updateStore'}},config:{disableSelection:null,mode:'SINGLE',allowDeselect:!1,lastSelected:null,lastFocused:null,deselectOnContainerClick:!0,selection:null,twoWayBindable:{selection:1},publishes:{selection:1}},modes:{SINGLE:!0,SIMPLE:!0,MULTI:!0},selectableEventHooks:{add:'onSelectionStoreAdd',remove:'onSelectionStoreRemove',update:'onSelectionStoreUpdate',clear:{fn:'onSelectionStoreClear',priority:1000},load:'refreshSelection',refresh:'refreshSelection'},constructor:function(){this.selected=new Ext.util.MixedCollection();this.callParent(arguments)},initSelectable:function(){this.publishState('selection',this.getSelection())},applyMode:function(a){a=a?a.toUpperCase():'SINGLE';return this.modes[a]?a:'SINGLE'},updateStore:function(d,a){var b=this,c=Ext.apply({},b.selectableEventHooks,{scope:b});if(a&&Ext.isObject(a)&&a.isStore){if(a.autoDestroy){a.destroy()}else {a.un(c)}}if(d){d.on(c);b.refreshSelection()}},selectAll:function(c){var a=this,b=a.getStore().getRange();a.select(b,!0,c)},deselectAll:function(c){var a=this,b=a.getStore().getRange();a.deselect(b,c);a.selected.clear();a.setLastSelected(null);a.setLastFocused(null)},updateSelection:function(a){if(this.changingSelection){return}if(a){this.select(a)}else {this.deselectAll()}},selectWithEvent:function(b){var a=this,c=a.isSelected(b);switch(a.getMode()){case 'MULTI':case 'SIMPLE':if(c){a.deselect(b)}else {a.select(b,!0)};break;case 'SINGLE':if(a.getAllowDeselect()&&c){a.deselect(b)}else {a.select(b,!1)};break;}},selectRange:function(a,b,g){var f=this,h=f.getStore(),d=[],e,c;if(f.getDisableSelection()){return}if(a>b){e=b;b=a;a=e}for(c=a;c<=b;c++){d.push(h.getAt(c))}this.doMultiSelect(d,g)},select:function(a,e,c){var b=this,d;if(b.getDisableSelection()){return}if(typeof a==='number'){a=[b.getStore().getAt(a)]}if(!a){return}if(b.getMode()=='SINGLE'&&a){d=a.length?a[0]:a;b.doSingleSelect(d,c)}else {b.doMultiSelect(a,e,c)}},doSingleSelect:function(b,c){var a=this,d=a.selected;if(a.getDisableSelection()){return}if(a.isSelected(b)){return}if(d.getCount()>0){a.deselect(a.getLastSelected(),c)}d.add(b);a.setLastSelected(b);a.onItemSelect(b,c);a.setLastFocused(b);if(!c){a.fireSelectionChange([b])}},doMultiSelect:function(a,g,d){if(a===null||this.getDisableSelection()){return}a=!Ext.isArray(a)?[a]:a;var b=this,h=b.selected,i=a.length,e=!1,f=0,c;if(!g&&h.getCount()>0){e=!0;b.deselect(b.getSelections(),!0)}for(;f<i;f++){c=a[f];if(g&&b.isSelected(c)){continue}e=!0;b.setLastSelected(c);h.add(c);if(!d){b.setLastFocused(c)}b.onItemSelect(c,d)}if(e&&!d){this.fireSelectionChange(a)}},deselect:function(b,e){var c=this;if(c.getDisableSelection()){return}b=Ext.isArray(b)?b:[b];var f=c.selected,g=!1,d=0,h=c.getStore(),i=b.length,a;for(;d<i;d++){a=b[d];if(typeof a==='number'){a=h.getAt(a)}if(f.remove(a)){if(c.getLastSelected()==a){c.setLastSelected(f.last())}g=!0}if(a){c.onItemDeselect(a,e)}}if(g&&!e){c.fireSelectionChange(b)}},updateLastFocused:function(a,b){this.onLastFocusChanged(b,a)},fireSelectionChange:function(b){var a=this;a.changingSelection=!0;a.setSelection(a.getLastSelected()||null);a.changingSelection=!1;a.fireAction('selectionchange',[a,b],'getSelections')},getSelections:function(){return this.selected.getRange()},isSelected:function(a){a=Ext.isNumber(a)?this.getStore().getAt(a):a;return this.selected.indexOf(a)!==-1},hasSelection:function(){return this.selected.getCount()>0},refreshSelection:function(){var a=this,b=a.getSelections();a.deselectAll(!0);if(b.length){a.select(b,!1,!0)}},onSelectionStoreRemove:function(h,e){var a=this,f=a.selected,g=e.length,b,c,d;if(a.getDisableSelection()){return}for(d=0;d<g;d++){c=e[d];if(f.remove(c)){if(a.getLastSelected()==c){a.setLastSelected(null)}if(a.getLastFocused()==c){a.setLastFocused(null)}b=b||[];b.push(c)}}if(b){a.fireSelectionChange([b])}},onSelectionStoreClear:function(a){var b=a.getData().items;this.onSelectionStoreRemove(a,b)},getSelectionCount:function(){return this.selected.getCount()},onSelectionStoreAdd:Ext.emptyFn,onSelectionStoreUpdate:Ext.emptyFn,onItemSelect:Ext.emptyFn,onItemDeselect:Ext.emptyFn,onLastFocusChanged:Ext.emptyFn,onEditorKey:Ext.emptyFn},1,0,0,0,0,0,[Ext.mixin,'Selectable'],function(){});Ext.cmd.derive('Ext.util.Base64',Ext.Base,{singleton:!0,_str:'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=',encode:function(a){var b=this;var g='',h,c,d,j,k,i,e,f=0;a=b._utf8_encode(a);var l=a.length;while(f<l){h=a.charCodeAt(f++);c=a.charCodeAt(f++);d=a.charCodeAt(f++);j=h>>2;k=(h&3)<<4|c>>4;i=(c&15)<<2|d>>6;e=d&63;if(isNaN(c)){i=e=64}else {if(isNaN(d)){e=64}}g=g+b._str.charAt(j)+b._str.charAt(k)+b._str.charAt(i)+b._str.charAt(e)}return g},decode:function(b){var c=this;var a='',h,i,j,k,f,e,g,d=0;b=b.replace(/[^A-Za-z0-9\+\/\=]/g,'');var l=b.length;while(d<l){k=c._str.indexOf(b.charAt(d++));f=c._str.indexOf(b.charAt(d++));e=c._str.indexOf(b.charAt(d++));g=c._str.indexOf(b.charAt(d++));h=k<<2|f>>4;i=(f&15)<<4|e>>2;j=(e&3)<<6|g;a=a+String.fromCharCode(h);if(e!==64){a=a+String.fromCharCode(i)}if(g!==64){a=a+String.fromCharCode(j)}}a=c._utf8_decode(a);return a},_utf8_encode:function(c){c=c.replace(/\r\n/g,'\n');var b='',d=0,e=c.length;for(;d<e;d++){var a=c.charCodeAt(d);if(a<128){b+=String.fromCharCode(a)}else {if(a>127&&a<2048){b+=String.fromCharCode(a>>6|192);b+=String.fromCharCode(a&63|128)}else {b+=String.fromCharCode(a>>12|224);b+=String.fromCharCode(a>>6&63|128);b+=String.fromCharCode(a&63|128)}}}return b},_utf8_decode:function(c){var d='',a=0,b=0,f=0,e=0,g=c.length;while(a<g){b=c.charCodeAt(a);if(b<128){d+=String.fromCharCode(b);a++}else {if(b>191&&b<224){e=c.charCodeAt(a+1);d+=String.fromCharCode((b&31)<<6|e&63);a+=2}else {e=c.charCodeAt(a+1);f=c.charCodeAt(a+2);d+=String.fromCharCode((b&15)<<12|(e&63)<<6|f&63);a+=3}}}return d}},0,0,0,0,0,0,[Ext.util,'Base64'],0);Ext.cmd.derive('Ext.util.TaskManager',Ext.util.TaskRunner,{alternateClassName:['Ext.TaskManager'],singleton:!0},0,0,0,0,0,0,[Ext.util,'TaskManager',Ext,'TaskManager'],0);Ext.cmd.derive('Ext.util.LineSegment',Ext.Base,{constructor:function(b,c){var a=Ext.util.Point;this.point1=a.from(b);this.point2=a.from(c)},intersects:function(l){var m=this.point1,n=this.point2,o=l.point1,p=l.point2,a=m.x,b=n.x,c=o.x,d=p.x,f=m.y,g=n.y,h=o.y,i=p.y,k=(a-b)*(h-i)-(f-g)*(c-d),e,j;if(k==0){return null}e=((c-d)*(a*g-f*b)-(a-b)*(c*i-h*d))/k;j=((h-i)*(a*g-f*b)-(f-g)*(c*i-h*d))/k;if(e<Math.min(a,b)||e>Math.max(a,b)||e<Math.min(c,d)||e>Math.max(c,d)||j<Math.min(f,g)||j>Math.max(f,g)||j<Math.min(h,i)||j>Math.max(h,i)){return null}return new Ext.util.Point(e,j)},getLength:function(){return Math.abs(this.point1.getDistanceTo(this.point2))},getAngleToX:function(){var a=this.point1,b=this.point2,d=b.y-a.y,c=b.x-a.x;return Math.atan2(d,c)},getInBetweenPoint:function(a){var b=this.point1,c=this.getAngleToX(),d=b.x+Math.cos(c)*a,e=b.y+Math.sin(c)*a;return new Ext.util.Point(d,e)},toString:function(){return this.point1.toString()+' '+this.point2.toString()}},3,0,0,0,0,0,[Ext.util,'LineSegment'],0);Ext.cmd.derive('Ext.Panel',Ext.Container,{alternateClassName:'Ext.panel.Panel',defaultBindProperty:'title',isPanel:!0,config:{baseCls:'x-panel',border:!1,bodyPadding:null,bodyBorder:null,header:null,icon:null,iconCls:null,title:null,tools:null},manageBorders:!0,getElementConfig:function(){return {reference:'element',classList:['x-container','x-unsized'],children:[{reference:'innerElement',className:'x-inner'},{reference:'tipElement',className:'x-anchor',hidden:!0}]}},addBodyCls:function(a){this.innerElement.addCls(a);return this},removeBodyCls:function(a){this.innerElement.removeCls(a);return this},applyBodyPadding:function(a){if(a===!0){a=5}if(a){a=Ext.dom.Element.unitizeBox(a)}return a},addTool:function(c){var b=this.ensureHeader(),a;if(b){a=b.createTools(Ext.Array.from(c),this);if(a&&a.length){a=b.add(a)}}return a},applyHeader:function(b,d){var c=this,a=d;if(b===!1){if(a){c.remove(a);a=null}}else {if(b){if(a){if(b!==!0){a.setConfig(b)}}else {a=c.add(c.createHeader(b))}}}return a||null},applyTools:function(c){var a=this.ensureHeader(),b;if(a){a.clearTools();b=a.createTools(c,this);if(b&&b.length){a.add(b)}}},createHeader:function(e){var d=this,c={xtype:'panelheader',docked:'top',ui:d.getUi()},b,a;if(e&&e!==!0){Ext.merge(c,e)}if(d.initialized){a=d.getTitle();if(a!=null){if(typeof a==='string'){a={text:a}}Ext.merge(c,{title:a})}b=d.getIconCls();if(b!=null){c.iconCls=b}else {b=d.getIcon();if(b!=null){c.icon=b}}}return c},updateBorder:function(a,b){Ext.Container.prototype.updateBorder.call(this,a,b);if(this.getBodyBorder()===null){this.setBodyBorderEnabled(a!==!1)}},updateBodyPadding:function(a){this.innerElement.setStyle('padding',a)},updateBodyBorder:function(a){var b=a===null?this.getBorder():a;this.setBodyBorderEnabled(a!==!1)},updateIcon:function(b){var a=this.ensureHeader();if(a){a.setIcon(b)}},updateIconCls:function(b){var a=this.ensureHeader();if(a){a.setIconCls(b)}},updateTitle:function(b){var a=this.ensureHeader();if(a){a.setTitle(b)}},updateUi:function(b,c){var a=this,f='x-panel-inner-',d=a.innerElement,e=!a.isConfiguring&&a.ensureHeader();if(c){d.removeCls(f+c)}if(b){d.addCls(f+b)}if(e){a.getTitle();e.setUi(b)}Ext.Container.prototype.updateUi.call(this,b,c)},alignTo:function(o,C){var B=this.getAlignmentInfo(o,C);if(B.isAligned){return}var b=this.tipElement;b.hide();if(this.currentTipPosition){b.removeCls('x-anchor-'+this.currentTipPosition)}Ext.Container.prototype.alignTo.apply(this,arguments);var i=Ext.util.LineSegment,z=o.isComponent?o.renderElement:o,F=this.renderElement,n=z.getBox(),h=F.getBox(),c=h.left,l=h.top,k=h.right,j=h.bottom,D=c+h.width/2,E=l+h.height/2,x={x:c,y:l},w={x:k,y:l},v={x:c,y:j},u={x:k,y:j},A={x:D,y:E},p=n.left+n.width/2,q=n.top+n.height/2,y={x:p,y:q},m=new i(A,y),r=0,s=0,t,a,e,d,f,g;b.setVisibility(!1);b.show();t=b.getSize();a=t.width;e=t.height;if(m.intersects(new i(x,w))){f=Math.min(Math.max(p,c+a),k-a);g=l;s=e+10;d='top'}else {if(m.intersects(new i(x,v))){f=c;g=Math.min(Math.max(q+a/2,a*1.6),j-a/2.2);r=e+10;d='left'}else {if(m.intersects(new i(v,u))){f=Math.min(Math.max(p,c+a),k-a);g=j;s=-e-10;d='bottom'}else {if(m.intersects(new i(w,u))){f=k;g=Math.max(Math.min(q-e,j-a*1.3),a/2);r=-e-10;d='right'}}}}if(f||g){this.currentTipPosition=d;b.addCls('x-anchor-'+d);b.setLeft(f-c);b.setTop(g-l);b.setVisibility(!0);this.setLeft(this.getLeft()+r);this.setTop(this.getTop()+s)}},privates:{ensureHeader:function(){var b=this,a;b.getViewModel();b.getItems();a=b.getHeader();if(!a&&a!==!1){b.setHeader(!0);a=b.getHeader()}return a},setBodyBorderEnabled:function(a){this.innerElement.setStyle('border-width',a?'':'0')}}},0,['panel'],['widget','component','container','panel'],{'widget':!0,'component':!0,'container':!0,'panel':!0},['widget.panel'],0,[Ext,'Panel',Ext.panel,'Panel'],0);Ext.cmd.derive('Ext.Button',Ext.Component,{isButton:!0,cachedConfig:{pressedCls:'x-button-pressed',pressingCls:'x-button-pressing',badgeCls:'x-badge',hasBadgeCls:'x-hasbadge',labelCls:'x-button-label',iconCls:null,textAlign:null},config:{allowDepress:!0,badgeText:null,text:null,icon:!1,iconAlign:'left',pressedDelay:0,handler:null,scope:null,autoEvent:null,ui:null,baseCls:'x-button',enableToggle:!1,value:null},eventedConfig:{pressed:!1},defaultBindProperty:'text',template:[{tag:'span',reference:'badgeElement',hidden:!0},{tag:'span',className:'x-button-icon',reference:'iconElement'},{tag:'span',reference:'textElement',hidden:!0}],initialize:function(){Ext.Component.prototype.initialize.call(this);this.element.on({scope:this,tap:'onTap',touchstart:'onPress',touchend:'onRelease'})},isPressed:function(){return Boolean(this.getPressed())},toggle:function(){this.setPressed(!this.isPressed())},updateBadgeText:function(b){var c=this.element,a=this.badgeElement;if(b){a.show();a.setText(b)}else {a.hide()}c[b?'addCls':'removeCls'](this.getHasBadgeCls())},updateText:function(b){var a=this.textElement;if(a){if(b){a.show();a.setHtml(b)}else {a.hide()}this.refreshIconAlign()}},updateHtml:function(b){var a=this.textElement;if(b){a.show();a.setHtml(b)}else {a.hide()}},updateBadgeCls:function(b,a){this.badgeElement.replaceCls(a,b)},updateHasBadgeCls:function(c,a){var b=this.element;if(b.hasCls(a)){b.replaceCls(a,c)}},updateLabelCls:function(b,a){this.textElement.replaceCls(a,b)},applyPressed:function(a){return Boolean(a)},updatePressed:function(a){this.element.toggleCls(this.getPressedCls(),a)},updatePressingCls:function(c,a){var b=this.element;if(b.hasCls(a)){b.replaceCls(a,c)}},updatePressedCls:function(c,a){var b=this.element;if(b.hasCls(a)){b.replaceCls(a,c)}},updateIcon:function(c){var a=this,b=a.iconElement;if(c){a.showIconElement();b.setStyle('background-image','url('+c+')');a.refreshIconAlign()}else {b.setStyle('background-image','');if(!a.getIconCls()){a.hideIconElement()}}},updateIconCls:function(d,b){var a=this,c=a.iconElement;if(d){a.showIconElement();c.replaceCls(b,d);a.refreshIconAlign()}else {c.removeCls(b);if(!a.getIcon()){a.hideIconElement()}}},updateIconAlign:function(c,d){var b=this.element,a='x-iconalign-';if(!this.getText()){c='center'}b.removeCls(a+'center');b.removeCls(a+d);if(this.getIcon()||this.getIconCls()){b.addCls(a+c)}},_textAlignCls:{left:'x-text-align-left',right:'x-text-align-right',center:''},updateTextAlign:function(b,c){var a=this._textAlignCls,e=a[b||'center'],d=a[c||'center'];this.replaceCls(d,e)},refreshIconAlign:function(){this.updateIconAlign(this.getIconAlign())},applyAutoEvent:function(a){var b=this;if(typeof a=='string'){a={name:a,scope:b.scope||b}}return a},updateAutoEvent:function(b){var c=b.name,a=b.scope;this.setHandler(function(){a.fireEvent(c,a,this)});this.setScope(a)},applyUi:function(a){if(a&&Ext.isString(a)){var b=a.split('-');if(b&&(b[1]=='back'||b[1]=='forward')){return b}}return a},getUi:function(){var a=this._ui;if(Ext.isArray(a)){return a.join('-')}return a},applyPressedDelay:function(a){if(Ext.isNumber(a)){return a}return a?100:0},onPress:function(){var a=this,b=a.element,c=a.getPressedDelay(),d=a.getPressingCls();if(!a.getDisabled()){if(c>0){a.pressedTimeout=Ext.defer(function(){delete a.pressedTimeout;if(b){b.addCls(d)}},c)}else {b.addCls(d)}}},onRelease:function(a){this.fireAction('release',[this,a],'doRelease')},doRelease:function(a,b){if(!a.getDisabled()){if(a.hasOwnProperty('pressedTimeout')){clearTimeout(a.pressedTimeout);delete a.pressedTimeout}else {a.element.removeCls(a.getPressingCls())}}},onTap:function(a){if(this.getDisabled()){return !1}this.fireAction('tap',[this,a],'doTap')},doTap:function(a,b){var c=a.getHandler();if(b&&b.preventDefault){b.preventDefault()}if(a.getEnableToggle()&&(a.getAllowDepress()||!a.isPressed())){a.toggle()}if(c){Ext.callback(c,a.getScope(),[a,b],0,a)}},destroy:function(){if(this.hasOwnProperty('pressedTimeout')){clearTimeout(this.pressedTimeout)}Ext.Component.prototype.destroy.call(this)},privates:{hideIconElement:function(){var a=this.iconElement;a.removeCls('x-shown');a.addCls('x-hidden');this.element.addCls('x-button-no-icon')},showIconElement:function(){var a=this.iconElement;a.addCls('x-shown');a.removeCls('x-hidden');this.element.removeCls('x-button-no-icon')}}},0,['button'],['widget','component','button'],{'widget':!0,'component':!0,'button':!0},['widget.button'],0,[Ext,'Button'],0);Ext.cmd.derive('Ext.Sheet',Ext.Panel,{config:{baseCls:'x-sheet',modal:!0,centered:!0,stretchX:null,stretchY:null,enter:'bottom',exit:'bottom',showAnimation:{type:'slideIn',duration:250,easing:'ease-out'},hideAnimation:{type:'slideOut',duration:250,easing:'ease-in'},border:null},manageBorders:!1,isInputRegex:/^(input|textarea|select|a)$/i,beforeInitialize:function(){var a=this;if(Ext.os.is.iOS){this.element.dom.addEventListener('touchstart',function(b){if(!a.isInputRegex.test(b.target.tagName)){b.preventDefault()}},!0)}},applyHideAnimation:function(a){var b=this.getExit(),c=b;if(b===null){return null}if(a===!0){a={type:'slideOut'}}if(Ext.isString(a)){a={type:a}}var d=Ext.factory(a,Ext.fx.Animation);if(d){if(b=='bottom'){c='down'}if(b=='top'){c='up'}d.setDirection(c)}return d},applyShowAnimation:function(a){var c=this.getEnter(),d=c;if(c===null){return null}if(a===!0){a={type:'slideIn'}}if(Ext.isString(a)){a={type:a}}var b=Ext.factory(a,Ext.fx.Animation);if(b){if(c=='bottom'){d='down'}if(c=='top'){d='up'}b.setBefore({display:null});b.setReverse(!0);b.setDirection(d)}return b},updateStretchX:function(a){this.getLeft();this.getRight();if(a){this.setLeft(0);this.setRight(0)}},updateStretchY:function(a){this.getTop();this.getBottom();if(a){this.setTop(0);this.setBottom(0)}}},0,['sheet'],['widget','component','container','panel','sheet'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'sheet':!0},['widget.sheet'],0,[Ext,'Sheet'],0);Ext.define('TS.overrides.Sheet',{override:'Ext.Sheet',config:{autoDestroy:!1},initialize:function(){var a=this;(arguments.callee.$previous||Ext.Panel.prototype.initialize).apply(this,arguments);if(a.getAutoDestroy()){a.getHideAnimation().on({animationend:a.destroy,scope:a})}}});Ext.cmd.derive('Ext.util.Geolocation',Ext.Evented,{alternateClassName:['Ext.util.GeoLocation'],config:{autoUpdate:!0,frequency:10000,latitude:null,longitude:null,accuracy:null,altitude:null,altitudeAccuracy:null,heading:null,speed:null,timestamp:null,allowHighAccuracy:!1,timeout:Infinity,maximumAge:0,provider:undefined},updateMaximumAge:function(){if(this.watchOperation){this.updateWatchOperation()}},updateTimeout:function(){if(this.watchOperation){this.updateWatchOperation()}},updateAllowHighAccuracy:function(){if(this.watchOperation){this.updateWatchOperation()}},applyProvider:function(a){if(Ext.feature.has.Geolocation){if(!a){if(navigator&&navigator.geolocation){a=navigator.geolocation}else {if(window.google){a=google.gears.factory.create('beta.geolocation')}}}}else {this.fireEvent('locationerror',this,!1,!1,!0,'This device does not support Geolocation.')}return a},updateAutoUpdate:function(c,d){var a=this,b=a.getProvider();if(d&&b){clearInterval(a.watchOperationId);a.watchOperationId=null}if(c){if(!b){a.fireEvent('locationerror',a,!1,!1,!0,null);return}try{a.updateWatchOperation()}catch(e){a.fireEvent('locationerror',a,!1,!1,!0,e.message)}}},updateWatchOperation:function(){var a=this,b=a.getProvider();if(a.watchOperationId){clearInterval(a.watchOperationId)}function pollPosition(){b.getCurrentPosition(Ext.bind(a.fireUpdate,a),Ext.bind(a.fireError,a),a.parseOptions())}pollPosition();a.watchOperationId=Ext.interval(pollPosition,this.getFrequency())},updateLocation:function(b,e,f){var a=this,d=a.getProvider();var c=function(d,c){if(c){a.fireError(c)}else {a.fireEvent('locationerror',a,!1,!1,!0,d)}if(b){b.call(e||a,null,a)}};if(!d){c(null);return}try{d.getCurrentPosition(function(c){a.fireUpdate(c);if(b){b.call(e||a,a,a)}},function(a){c(null,a)},f||a.parseOptions())}catch(g){c(g.message)}},fireUpdate:function(b){var c=this,a=b.coords;this.position=b;c.setConfig({timestamp:b.timestamp,latitude:a.latitude,longitude:a.longitude,accuracy:a.accuracy,altitude:a.altitude,altitudeAccuracy:a.altitudeAccuracy,heading:a.heading,speed:a.speed});c.fireEvent('locationupdate',c)},fireError:function(a){var b=a.code;this.fireEvent('locationerror',this,b==a.TIMEOUT,b==a.PERMISSION_DENIED,b==a.POSITION_UNAVAILABLE,a.message==undefined?null:a.message)},parseOptions:function(){var a=this.getTimeout(),b={maximumAge:this.getMaximumAge(),enableHighAccuracy:this.getAllowHighAccuracy()};if(a!==Infinity){b.timeout=a}return b},destroy:function(){this.setAutoUpdate(!1);Ext.Evented.prototype.destroy.call(this)}},0,0,0,0,0,0,[Ext.util,'Geolocation',Ext.util,'GeoLocation'],0);Ext.cmd.derive('Ext.Map',Ext.Container,{isMap:!0,config:{baseCls:'x-map',useCurrentLocation:!1,map:null,geo:null,mapOptions:{},mapListeners:null},constructor:function(){Ext.Container.prototype.constructor.apply(this,arguments);if(!(window.google||{}).maps){this.setHtml('Google Maps API is required')}},initialize:function(){Ext.Container.prototype.initialize.call(this);this.initMap();this.on({painted:'doResize',scope:this});this.innerElement.on('touchstart','onTouchStart',this)},initMap:function(){var c=this.getMap();if(!c){var d=(window.google||{}).maps;if(!d){return null}var f=this.mapContainer,a=this.getMapOptions(),e=d.event,b=this;if(f.dom.firstChild){Ext.fly(f.dom.firstChild).destroy()}if(Ext.os.is.iPad){Ext.merge({navigationControlOptions:{style:d.NavigationControlStyle.ZOOM_PAN}},a)}a.mapTypeId=a.mapTypeId||d.MapTypeId.ROADMAP;a.center=a.center||new d.LatLng(37.381592,-122.135672);if(a.center&&a.center.latitude&&!Ext.isFunction(a.center.lat)){a.center=new d.LatLng(a.center.latitude,a.center.longitude)}a.zoom=a.zoom||12;c=new d.Map(f.dom,a);this.setMap(c);e.addListener(c,'zoom_changed',Ext.bind(b.onZoomChange,b));e.addListener(c,'maptypeid_changed',Ext.bind(b.onTypeChange,b));e.addListener(c,'center_changed',Ext.bind(b.onCenterChange,b));e.addListenerOnce(c,'tilesloaded',Ext.bind(b.onTilesLoaded,b));this.addMapListeners()}return this.getMap()},renderMap:function(){this.initMap()},getElementConfig:function(){return {reference:'element',className:'x-container',children:[{reference:'innerElement',className:'x-inner',children:[{reference:'mapContainer',className:'x-map-container'}]}]}},onTouchStart:function(a){a.makeUnpreventable()},applyMapOptions:function(a){return Ext.merge({},this.options,a)},updateMapOptions:function(b){var c=(window.google||{}).maps,a=this.getMap();if(c&&a){a.setOptions(b)}},doMapCenter:function(){this.setMapCenter(this.getMapOptions().center)},getMapOptions:function(){return Ext.merge({},this.options||this.getInitialConfig('mapOptions'))},updateUseCurrentLocation:function(a){this.setGeo(a);if(!a){this.setMapCenter()}},applyGeo:function(a){return Ext.factory(a,Ext.util.Geolocation,this.getGeo())},updateGeo:function(a,c){var b={locationupdate:'onGeoUpdate',locationerror:'onGeoError',scope:this};if(c){c.un(b)}if(a){a.on(b);a.updateLocation()}},doResize:function(){var b=(window.google||{}).maps,a=this.getMap();if(b&&a){b.event.trigger(a,'resize')}},onTilesLoaded:function(){this.fireEvent('maprender',this,this.getMap())},addMapListeners:function(){var i=(window.google||{}).maps,j=this.getMap(),d=this.getMapListeners();if(i){var h=i.event,k=this,a,e,c,b,g;if(Ext.isSimpleObject(d)){for(var f in d){a=d[f];if(Ext.isSimpleObject(a)){e=a.scope;c=a.fn}else {if(Ext.isFunction(a)){e=null;c=a}}if(c){b=function(){this.fn.apply(this.scope,[k]);if(this.handle){h.removeListener(this.handle);delete this.handle;delete this.fn;delete this.scope}};g=h.addListener(j,f,Ext.bind(b,b));b.fn=c;b.scope=e;if(a.single===!0){b.handle=g}}}}}},onGeoUpdate:function(a){if(a){this.setMapCenter(new google.maps.LatLng(a.getLatitude(),a.getLongitude()))}},onGeoError:Ext.emptyFn,setMapCenter:function(a){var e=this,b=e.getMap(),d=e.getMapOptions(),c=(window.google||{}).maps;if(c){if(!a){if(b&&b.getCenter){a=b.getCenter()}else {if(d.hasOwnProperty('center')){a=d.center}else {a=new c.LatLng(37.381592,-122.135672)}}}if(a&&!(a instanceof c.LatLng)&&'longitude' in a){a=new c.LatLng(a.latitude,a.longitude)}if(!b){d.center=d.center||a;e.renderMap();b=e.getMap()}if(b&&a instanceof c.LatLng){b.panTo(a)}else {this.options=Ext.apply(this.getMapOptions(),{center:a})}}},onZoomChange:function(){var c=this.getMapOptions(),a=this.getMap(),b;b=a&&a.getZoom?a.getZoom():c.zoom||10;this.options=Ext.apply(c,{zoom:b});this.fireEvent('zoomchange',this,a,b)},onTypeChange:function(){var c=this.getMapOptions(),a=this.getMap(),b;b=a&&a.getMapTypeId?a.getMapTypeId():c.mapTypeId;this.options=Ext.apply(c,{mapTypeId:b});this.fireEvent('typechange',this,a,b)},onCenterChange:function(){var c=this.getMapOptions(),a=this.getMap(),b;b=a&&a.getCenter?a.getCenter():c.center;this.options=Ext.apply(c,{center:b});this.fireEvent('centerchange',this,a,b)},destroy:function(){Ext.destroy(this.getGeo());var a=this.getMap();if(a&&(window.google||{}).maps){google.maps.event.clearInstanceListeners(a)}Ext.Container.prototype.destroy.call(this)}},1,['map'],['widget','component','container','map'],{'widget':!0,'component':!0,'container':!0,'map':!0},['widget.map'],0,[Ext,'Map'],0);Ext.cmd.derive('Ext.Decorator',Ext.Component,{isDecorator:!0,config:{component:{}},statics:{generateProxySetter:function(a){return function(c){var b=this.getComponent();b[a].call(b,c);return this}},generateProxyGetter:function(a){return function(){var b=this.getComponent();return b[a].call(b)}}},onClassExtended:function(i,a){if(!a.hasOwnProperty('proxyConfig')){return}var h=Ext.Class,b=a.proxyConfig,g=a.config;a.config=g?Ext.applyIf(g,b):b;var f,d,e,c;for(f in b){if(b.hasOwnProperty(f)){d=Ext.Config.get(f).names;e=d.set;c=d.get;a[e]=this.generateProxySetter(e);a[c]=this.generateProxyGetter(c)}}},applyComponent:function(a){return Ext.factory(a,Ext.Component)},updateComponent:function(b,c){var a=this;if(c){if(a.isRendered()&&c.setRendered(!1)){c.fireEventedAction('renderedchange',[a,c,!1],a.doUnsetComponent,a,!1)}else {a.doUnsetComponent(c)}}if(b){if(a.isRendered()&&b.setRendered(!0)){b.fireEventedAction('renderedchange',[a,b,!0],a.doSetComponent,a,!1)}else {a.doSetComponent(b)}}},doUnsetComponent:function(a){var b=a.renderElement.dom;if(b){a.setLayoutSizeFlags(0);this.innerElement.dom.removeChild(b)}},doSetComponent:function(a){var b=a.renderElement.dom;if(b){a.setLayoutSizeFlags(this.getSizeFlags());this.innerElement.dom.appendChild(b)}},setRendered:function(b){var a;if((arguments.callee.$previous||Ext.Component.prototype.setRendered).apply(this,arguments)){a=this.getComponent();if(a){a.setRendered(b)}return !0}return !1},setDisabled:function(a){this.callParent(arguments);this.getComponent().setDisabled(a)},destroy:function(){Ext.destroy(this.getComponent());Ext.Component.prototype.destroy.call(this)}},0,0,['widget','component'],{'widget':!0,'component':!0},0,0,[Ext,'Decorator'],0);Ext.cmd.derive('Ext.Img',Ext.Component,{alternateClassName:'Ext.Image',config:{src:null,baseCls:'x-img',imageCls:'x-img-image',backgroundCls:'x-img-background',mode:'background'},beforeInitialize:function(){var a=this;a.onLoad=Ext.Function.bind(a.onLoad,a);a.onError=Ext.Function.bind(a.onError,a)},initialize:function(){var a=this;Ext.Component.prototype.initialize.call(this);a.relayEvents(a.renderElement,'*');a.element.on({tap:'onTap',scope:a})},hide:function(){Ext.Component.prototype.hide.apply(this,arguments);this.hiddenSrc=this.hiddenSrc||this.getSrc();this.setSrc(null)},show:function(){Ext.Component.prototype.show.apply(this,arguments);if(this.hiddenSrc){this.setSrc(this.hiddenSrc);delete this.hiddenSrc}},updateMode:function(d){var a=this,c=a.getImageCls(),b=a.getBackgroundCls();if(d==='background'){if(a.imageElement){a.imageElement.destroy();delete a.imageElement;a.updateSrc(a.getSrc())}a.replaceCls(c,b)}else {a.imageElement=a.element.createChild({tag:'img'});a.replaceCls(b,c)}},updateImageCls:function(a,b){this.replaceCls(b,a)},updateBackgroundCls:function(a,b){this.replaceCls(b,a)},onTap:function(a){this.fireEvent('tap',this,a)},onAfterRender:function(){this.updateSrc(this.getSrc())},applySrc:function(a){return a&&Ext.resolveResource(a)},updateSrc:function(c){var b=this,a;if(b.getMode()==='background'){a=this.imageObject||new Image()}else {a=b.imageElement.dom}this.imageObject=a;a.setAttribute('src',Ext.isString(c)?c:'');a.addEventListener('load',b.onLoad,!1);a.addEventListener('error',b.onError,!1)},detachListeners:function(){var a=this.imageObject;if(a){a.removeEventListener('load',this.onLoad,!1);a.removeEventListener('error',this.onError,!1)}},onLoad:function(a){this.detachListeners();if(this.getMode()==='background'){this.element.dom.style.backgroundImage='url("'+this.imageObject.src+'")'}this.fireEvent('load',this,a)},onError:function(a){this.detachListeners();if(this.getMode()==='background'){this.element.dom.style.backgroundImage='url("'+this.imageObject.src+'")'}this.fireEvent('error',this,a)},updateWidth:function(b){var a=this.getMode()==='background'?this.element:this.imageElement;a.setWidth(b);Ext.Component.prototype.updateWidth.apply(this,arguments)},updateHeight:function(b){var a=this.getMode()==='background'?this.element:this.imageElement;a.setHeight(b);Ext.Component.prototype.updateHeight.apply(this,arguments)},destroy:function(){var a=this;a.detachListeners();a.imageObject=a.imageElement=Ext.destroy(a.imageObject,a.imageElement);Ext.Component.prototype.destroy.call(this)}},0,['image','img'],['widget','component','image','img'],{'widget':!0,'component':!0,'image':!0,'img':!0},['widget.image','widget.img'],0,[Ext,'Img',Ext,'Image'],0);Ext.cmd.derive('Ext.Menu',Ext.Sheet,{config:{baseCls:'x-menu',left:0,right:0,bottom:0,height:'auto',width:'auto',defaultType:'button',showAnimation:null,hideAnimation:null,centered:!1,modal:!0,hidden:!0,hideOnMaskTap:!0,translatable:{translationMethod:null}},constructor:function(){this.config.translatable.translationMethod='csstransform';Ext.Sheet.prototype.constructor.apply(this,arguments)},updateUi:function(a,b){Ext.Sheet.prototype.updateUi.apply(this,arguments);if(a!=b&&Ext.theme.is.Blackberry){if(a=='context'){this.innerElement.swapCls('x-vertical','x-horizontal')}else {if(a=='application'){this.innerElement.swapCls('x-horizontal','x-vertical')}}}},updateHideOnMaskTap:function(b){var a=this.getModal();if(a){a[b?'on':'un'].call(a,'tap',function(){Ext.Viewport.hideMenu(this.$side)},this)}},updateHidden:function(){if(this.initialized){Ext.Sheet.prototype.updateHidden.apply(this,arguments)}}},1,['menu'],['widget','component','container','panel','sheet','menu'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'sheet':!0,'menu':!0},['widget.menu'],0,[Ext,'Menu'],0);Ext.cmd.derive('Ext.Title',Ext.Component,{config:{baseCls:'x-title',title:''},updateTitle:function(a){this.setHtml(a)}},0,['title'],['widget','component','title'],{'widget':!0,'component':!0,'title':!0},['widget.title'],0,[Ext,'Title'],0);Ext.cmd.derive('Ext.Spacer',Ext.Component,{config:{},constructor:function(a){a=a||{};if(!a.width){a.flex=1}Ext.Component.prototype.constructor.call(this,a)}},1,['spacer'],['widget','component','spacer'],{'widget':!0,'component':!0,'spacer':!0},['widget.spacer'],0,[Ext,'Spacer'],0);Ext.cmd.derive('Ext.Toolbar',Ext.Container,{isToolbar:!0,config:{baseCls:'x-toolbar',title:null,defaultType:'button',defaultButtonUI:null,minHeight:null,layout:{type:'hbox',align:'center'}},hasCSSMinHeight:!0,constructor:function(a){a=a||{};if(a.docked=='left'||a.docked=='right'){a.layout={type:'vbox',align:'stretch'}}Ext.Container.prototype.constructor.call(this,a)},applyTitle:function(a){if(typeof a=='string'){a={title:a,centered:Ext.theme.is.Tizen?!1:!0}}return Ext.factory(a,Ext.Title,this.getTitle())},updateTitle:function(a,b){if(a){this.add(a)}if(b){b.destroy()}},showTitle:function(){var a=this.getTitle();if(a){a.show()}},hideTitle:function(){var a=this.getTitle();if(a){a.hide()}},onItemAdd:function(a,c){var b=this.getDefaultButtonUI();if(b){if(a.isSegmentedButton){if(a.getDefaultUI()==null){a.setDefaultUI(b)}}else {if(a.isButton&&a.getUi()==null){a.setUi(b)}}}Ext.Container.prototype.onItemAdd.call(this,a,c)},factoryItem:function(a){if(a==='->'){a={xtype:'component',flex:1}}return Ext.Container.prototype.factoryItem.call(this,a)}},1,['toolbar'],['widget','component','container','toolbar'],{'widget':!0,'component':!0,'container':!0,'toolbar':!0},['widget.toolbar'],0,[Ext,'Toolbar'],0);Ext.define('Ext.theme.neptune.Toolbar',{override:'Ext.Toolbar',config:{defaultButtonUI:'action'}});Ext.define('Ext.theme.triton.Toolbar',{override:'Ext.Toolbar',config:{defaultButtonUI:null}});Ext.cmd.derive('Ext.field.Input',Ext.Component,{tag:'input',cachedConfig:{cls:'x-form-field',focusCls:'x-field-focus',maskCls:'x-field-mask',useMask:'auto',type:'text',checked:!1},config:{baseCls:'x-field-input',name:null,value:null,isFocused:!1,tabIndex:null,placeHolder:null,minValue:null,maxValue:null,stepValue:null,maxLength:null,autoComplete:null,autoCapitalize:null,autoCorrect:null,readOnly:null,maxRows:null,pattern:null,startValue:!1,fastFocus:!1},getTemplate:function(){var a=[{reference:'input',tag:this.tag},{reference:'mask',classList:[this.config.maskCls]},{reference:'clearIcon',cls:'x-clear-icon'}];return a},initElement:function(){var a=this;Ext.Component.prototype.initElement.call(this);a.input.on({scope:a,keyup:'onKeyUp',keydown:'onKeyDown',focus:'onFocus',blur:'onBlur',input:'onInput',paste:'onPaste',tap:'onInputTap'});if(Ext.browser.is.AndroidStock){a.input.dom.addEventListener('mousedown',function(a){if(document.activeElement!=a.target){a.preventDefault()}});a.input.dom.addEventListener('touchend',function(){a.focus()})}a.mask.on({scope:a,tap:'onMaskTap'});if(a.clearIcon){a.clearIcon.on({tap:'onClearIconTap',touchstart:'onClearIconPress',touchend:'onClearIconRelease',scope:a})}if(Ext.browser.is.ie&&Ext.browser.version.major>=10){a.input.on({scope:a,keypress:'onKeyPress'})}},updateFastFocus:function(a){if(a){if(this.getFastFocus()&&Ext.os.is.iOS){this.input.on({scope:this,touchstart:'onTouchStart'})}}else {this.input.un({scope:this,touchstart:'onTouchStart'})}},useManualMaxLength:function(){return Boolean(Ext.os.is.Android&&!Ext.browser.is.Chrome)},applyUseMask:function(a){if(a==='auto'){a=Ext.os.is.iOS&&Ext.os.version.lt('5')}return Boolean(a)},updateUseMask:function(a){this.mask[a?'show':'hide']()},updatePattern:function(a){this.updateFieldAttribute('pattern',a)},updateFieldAttribute:function(a,b){var c=this.input;if(!Ext.isEmpty(b,!0)){c.dom.setAttribute(a,b)}else {c.dom.removeAttribute(a)}},updateCls:function(a,b){this.input.addCls('x-input-el');this.input.replaceCls(b,a)},updateType:function(a,c){var b='x-input-';this.input.replaceCls(b+c,b+a);this.updateFieldAttribute('type',a)},updateName:function(a){this.updateFieldAttribute('name',a)},getValue:function(){var a=this.input;if(a){this._value=a.dom.value}return this._value},applyValue:function(a){return Ext.isEmpty(a)?'':a},updateValue:function(b){var a=this.input;if(a&&a.dom.value!==b){a.dom.value=b}},setValue:function(a){var b=this._value;this.updateValue(this.applyValue(a));a=this.getValue();if(String(a)!=String(b)&&this.initialized){this.onChange(this,a,b)}return this},updateTabIndex:function(a){this.updateFieldAttribute('tabIndex',a)},testAutoFn:function(a){return [!0,'on'].indexOf(a)!==-1},updateMaxLength:function(a){if(!this.useManualMaxLength()){this.updateFieldAttribute('maxlength',a)}},updatePlaceHolder:function(a){this.updateFieldAttribute('placeholder',a)},applyAutoComplete:function(a){return this.testAutoFn(a)},updateAutoComplete:function(a){var b=a?'on':'off';this.updateFieldAttribute('autocomplete',b)},applyAutoCapitalize:function(a){return this.testAutoFn(a)},updateAutoCapitalize:function(a){var b=a?'on':'off';this.updateFieldAttribute('autocapitalize',b)},applyAutoCorrect:function(a){return this.testAutoFn(a)},updateAutoCorrect:function(a){var b=a?'on':'off';this.updateFieldAttribute('autocorrect',b)},updateMinValue:function(a){this.updateFieldAttribute('min',a)},updateMaxValue:function(a){this.updateFieldAttribute('max',a)},updateStepValue:function(a){this.updateFieldAttribute('step',a)},checkedRe:/^(true|1|on)/i,getChecked:function(){var b=this.input,a;if(b){a=b.dom.checked;this._checked=a}return a},applyChecked:function(a){return !!this.checkedRe.test(String(a))},setChecked:function(a){this.updateChecked(this.applyChecked(a));this._checked=a},updateChecked:function(a){this.input.dom.checked=a},updateReadOnly:function(a){this.updateFieldAttribute('readonly',a?!0:null)},updateMaxRows:function(a){this.updateFieldAttribute('rows',a)},updateDisabled:function(a){Ext.Component.prototype.updateDisabled.apply(this,arguments);if(Ext.browser.is.Safari&&!Ext.os.is.BlackBerry){this.input.dom.tabIndex=a?-1:0}this.input.dom.disabled=Ext.browser.is.Safari&&!Ext.os.is.BlackBerry?!1:a;if(!a){this.blur()}},isDirty:function(){if(this.getDisabled()){return !1}return String(this.getValue())!==String(this.originalValue)},reset:function(){this.setValue(this.originalValue)},onInputTap:function(a){this.fireAction('inputtap',[this,a],'doInputTap')},doInputTap:function(a,b){if(a.getDisabled()){return !1}if(this.getFastFocus()&&Ext.os.is.iOS){a.focus()}},onMaskTap:function(a){this.fireAction('masktap',[this,a],'doMaskTap')},doMaskTap:function(a,b){if(a.getDisabled()){return !1}a.focus()},showMask:function(){if(this.getUseMask()){this.mask.setStyle('display','block')}},hideMask:function(){if(this.getUseMask()){this.mask.setStyle('display','none')}},focus:function(){var b=this,a=b.input;if(a&&a.dom.focus){a.dom.focus()}return b},blur:function(){var b=this,a=this.input;if(a&&a.dom.blur){a.dom.blur()}return b},select:function(){var b=this,a=b.input;if(a&&a.dom.setSelectionRange){a.dom.setSelectionRange(0,9999)}return b},onFocus:function(a){this.fireAction('focus',[a],'doFocus')},doFocus:function(b){var a=this;a.hideMask();if(!a.getIsFocused()){a.setStartValue(a.getValue())}a.setIsFocused(!0)},onTouchStart:function(a){if(document.activeElement!=a.target){a.preventDefault()}},onBlur:function(a){this.fireAction('blur',[a],'doBlur')},doBlur:function(d){var a=this,c=a.getValue(),b=a.getStartValue();a.showMask();a.setIsFocused(!1);if(String(c)!=String(b)){a.onChange(a,c,b)}},onClearIconTap:function(a){this.fireEvent('clearicontap',this,a);if(Ext.os.is.Android){this.focus()}},onClearIconPress:function(){this.clearIcon.addCls('x-pressing')},onClearIconRelease:function(){this.clearIcon.removeCls('x-pressing')},onClick:function(a){this.fireEvent('click',a)},onChange:function(c,b,a){if(this.useManualMaxLength()){this.trimValueToMaxLength()}this.fireEvent('change',c,b,a)},onPaste:function(a){if(this.useManualMaxLength()){this.trimValueToMaxLength()}this.fireEvent('paste',a)},onKeyUp:function(a){if(this.useManualMaxLength()){this.trimValueToMaxLength()}this.fireEvent('keyup',a)},onKeyDown:function(){this.ignoreInput=!0},onInput:function(b){var a=this;a.fireEvent('input',a,a.input.dom.value);if(a.ignoreInput){a.ignoreInput=!1;return}Ext.defer(function(){if(!a.ignoreInput){a.fireEvent('keyup',b);a.ignoreInput=!1}},10)},onKeyPress:function(a){if(a.browserEvent.keyCode==13){this.fireEvent('keyup',a)}},onMouseDown:function(a){this.fireEvent('mousedown',a)},trimValueToMaxLength:function(){var a=this.getMaxLength();if(a){var b=this.getValue();if(b.length>this.getMaxLength()){this.setValue(b.slice(0,a))}}}},0,['input'],['widget','component','input'],{'widget':!0,'component':!0,'input':!0},['widget.input'],0,[Ext.field,'Input'],0);Ext.define('TS.overrides.field.Input',{override:'Ext.field.Input',compatibility:'6.0.2',updateValue:function(b){var c=this.input,a=c&&c.dom;if(a&&a.value!==b){a.value=b}},doBlur:function(a){this.showMask();this.setIsFocused(!1)}});Ext.cmd.derive('Ext.field.Field',Ext.Decorator,{alternateClassName:'Ext.form.Field',isField:!0,isFormField:!0,config:{baseCls:'x-field',label:null,labelAlign:'left',labelWidth:'30%',labelWrap:!1,clearIcon:null,required:!1,inputType:null,name:null,value:null,tabIndex:null},cachedConfig:{labelCls:null,requiredCls:'x-field-required',inputCls:null},noWrapCls:'x-form-label-nowrap',getElementConfig:function(){var a='x-';return {reference:'element',className:'x-container',children:[{reference:'label',cls:a+'form-label',children:[{reference:'labelspan',tag:'span'}]},{reference:'innerElement',cls:a+'component-outer'}]}},updateLabel:function(b,d){var a=this.renderElement,c='x-';if(b){this.labelspan.setHtml(b);a.addCls(c+'field-labeled')}else {a.removeCls(c+'field-labeled')}},updateLabelAlign:function(a,b){var c=this.renderElement,d='x-';if(a){c.addCls(d+'label-align-'+a);if(a=='top'||a=='bottom'){this.label.setWidth('100%')}else {this.updateLabelWidth(this.getLabelWidth())}}if(b){c.removeCls(d+'label-align-'+b)}},updateLabelCls:function(a,b){if(a){this.label.addCls(a)}if(b){this.label.removeCls(b)}},updateLabelWidth:function(a){var b=this.getLabelAlign();if(a){if(b=='top'||b=='bottom'){this.label.setWidth('100%')}else {this.label.setWidth(a)}}},updateLabelWrap:function(a,b){this.toggleCls(this.noWrapCls,!a)},updateRequired:function(a){this.renderElement.toggleCls(this.getRequiredCls(),a)},updateRequiredCls:function(a,b){if(this.getRequired()){this.renderElement.replaceCls(b,a)}},initialize:function(){var a=this;Ext.Decorator.prototype.initialize.call(this);a.doInitValue()},doInitValue:function(){this.originalValue=this.getInitialConfig().value},reset:function(){this.setValue(this.originalValue);return this},resetOriginalValue:function(){this.originalValue=this.getValue()},isDirty:function(){return !1}},0,['field'],['widget','component','field'],{'widget':!0,'component':!0,'field':!0},['widget.field'],0,[Ext.field,'Field',Ext.form,'Field'],0);Ext.cmd.derive('Ext.field.Text',Ext.field.Field,{alternateClassName:'Ext.form.Text',config:{ui:'text',clearIcon:!0,placeHolder:null,maxLength:null,autoComplete:null,autoCapitalize:null,autoCorrect:null,readOnly:null,component:{xtype:'input',type:'text',fastFocus:!1},bubbleEvents:['action']},defaultBindProperty:'value',twoWayBindable:{value:1},publishes:{value:1},focusedCls:'x-field-focused',clearableCls:'x-field-clearable',emptyCls:'x-empty',initialize:function(){var a=this;Ext.field.Field.prototype.initialize.call(this);a.getComponent().on({scope:this,keyup:'onKeyUp',input:'onInput',focus:'onFocus',blur:'onBlur',paste:'onPaste',mousedown:'onMouseDown',clearicontap:'onClearIconTap'});a.originalValue=a.getValue()||'';a.getComponent().originalValue=a.originalValue;a.syncEmptyCls()},syncEmptyCls:function(){var a=this._value,b=a?a.length:!1;this.toggleCls(this.emptyCls,!b)},applyValue:function(a){return Ext.isEmpty(a)?'':a},updateValue:function(b,e){var a=this,c=a.getComponent(),d=b!==undefined&&b!==null&&b!=='';if(c){c.setValue(b)}a.toggleClearIcon(d&&a.isDirty());a.syncEmptyCls();if(a.initialized){a.fireEvent('change',a,b,e)}},updatePlaceHolder:function(a){this.getComponent().setPlaceHolder(a)},updateMaxLength:function(a){this.getComponent().setMaxLength(a)},updateAutoComplete:function(a){this.getComponent().setAutoComplete(a)},updateAutoCapitalize:function(a){this.getComponent().setAutoCapitalize(a)},updateAutoCorrect:function(a){this.getComponent().setAutoCorrect(a)},updateReadOnly:function(a){this.toggleClearIcon(!a);this.getComponent().setReadOnly(a)},updateInputType:function(b){var a=this.getComponent();if(a){a.setType(b)}},updateName:function(b){var a=this.getComponent();if(a){a.setName(b)}},updateTabIndex:function(b){var a=this.getComponent();if(a){a.setTabIndex(b)}},updateInputCls:function(b,c){var a=this.getComponent();if(a){a.replaceCls(c,b)}},updateDisabled:function(a,c){Ext.field.Field.prototype.updateDisabled.call(this,a,c);var b=this.getComponent();if(b){b.setDisabled(a)}this.toggleClearIcon(!a)},showClearIcon:function(){var a=this,b=a.getValue(),c=b!==undefined&&b!==null&&b!=='';if(a.getClearIcon()&&!a.getDisabled()&&!a.getReadOnly()&&c){a.element.addCls(a.clearableCls)}return a},hideClearIcon:function(){if(this.getClearIcon()){this.element.removeCls(this.clearableCls)}},onKeyUp:function(a){this.fireAction('keyup',[this,a],'doKeyUp')},doKeyUp:function(a,c){var b=a.getValue(),d=b!==undefined&&b!==null&&b!=='';a.toggleClearIcon(d);if(c.browserEvent.keyCode===13){a.fireAction('action',[a,c],'doAction')}},doAction:function(){this.blur()},onClearIconTap:function(a,b){this.fireAction('clearicontap',[this,a,b],'doClearIconTap')},doClearIconTap:function(a,b){a.setValue('')},onInput:function(b,a){this.setValue(a)},onFocus:function(b){var a=this;a.addCls(a.focusedCls);a.isFocused=!0;a.fireEvent('focus',a,b)},onBlur:function(b){var a=this;a.removeCls(a.focusedCls);a.isFocused=!1;a.fireEvent('blur',a,b);Ext.defer(function(){a.isFocused=!1},50)},onPaste:function(a){this.fireEvent('paste',this,a)},onMouseDown:function(a){this.fireEvent('mousedown',this,a)},focus:function(){this.getComponent().focus();return this},blur:function(){this.getComponent().blur();return this},select:function(){this.getComponent().select();return this},resetOriginalValue:function(){var a=this,b;Ext.field.Field.prototype.resetOriginalValue.call(this);component=a.getComponent();if(component&&component.hasOwnProperty('originalValue')){a.getComponent().originalValue=a.originalValue}a.reset()},reset:function(){var a=this;a.getComponent().reset();a.getValue();a.toggleClearIcon(a.isDirty())},isDirty:function(){var a=this.getComponent();if(a){return a.isDirty()}return !1},privates:{toggleClearIcon:function(a){if(a){this.showClearIcon()}else {this.hideClearIcon()}}}},0,['textfield'],['widget','component','field','textfield'],{'widget':!0,'component':!0,'field':!0,'textfield':!0},['widget.textfield'],0,[Ext.field,'Text',Ext.form,'Text'],0);Ext.define('TS.overrides.field.Text',{override:'Ext.field.Text',compatibility:'6.0.2',syncValueWithComponent:function(){this._value=this.getComponent().getValue()},reset:function(){var a=this;a.getComponent().reset();a.syncValueWithComponent();a.toggleClearIcon(a.isDirty())}});Ext.cmd.derive('Ext.field.TextAreaInput',Ext.field.Input,{tag:'textarea'},0,['textareainput'],['widget','component','input','textareainput'],{'widget':!0,'component':!0,'input':!0,'textareainput':!0},['widget.textareainput'],0,[Ext.field,'TextAreaInput'],0);Ext.cmd.derive('Ext.field.TextArea',Ext.field.Text,{alternateClassName:'Ext.form.TextArea',config:{ui:'textarea',autoCapitalize:!1,component:{xtype:'textareainput'},maxRows:null},updateMaxRows:function(a){this.getComponent().setMaxRows(a)},updateHeight:function(a,b){Ext.field.Text.prototype.updateHeight.call(this,a,b);this.getComponent().input.setHeight(a)},updateWidth:function(a,b){Ext.field.Text.prototype.updateWidth.call(this,a,b);this.getComponent().input.setWidth(a)},doKeyUp:function(a){this.toggleClearIcon(this.getValue())}},0,['textareafield'],['widget','component','field','textfield','textareafield'],{'widget':!0,'component':!0,'field':!0,'textfield':!0,'textareafield':!0},['widget.textareafield'],0,[Ext.field,'TextArea',Ext.form,'TextArea'],0);Ext.cmd.derive('Ext.MessageBox',Ext.Sheet,{config:{baseCls:'x-msgbox',iconCls:null,showAnimation:{type:'popIn',duration:250,easing:'ease-out'},hideAnimation:{type:'popOut',duration:250,easing:'ease-out'},zIndex:999,defaultTextHeight:75,title:null,buttons:null,message:null,prompt:null,modal:!0,layout:{type:'vbox',pack:'center'}},statics:{OK:{text:'OK',itemId:'ok',ui:'action'},YES:{text:'Yes',itemId:'yes',ui:'action'},NO:{text:'No',itemId:'no'},CANCEL:{text:'Cancel',itemId:'cancel'},INFO:'x-msgbox-info',WARNING:'x-msgbox-warning',QUESTION:'x-msgbox-question',ERROR:'x-msgbox-error',OKCANCEL:[{text:'Cancel',itemId:'cancel'},{text:'OK',itemId:'ok',ui:'action'}],YESNOCANCEL:[{text:'Cancel',itemId:'cancel'},{text:'No',itemId:'no'},{text:'Yes',itemId:'yes',ui:'action'}],YESNO:[{text:'No',itemId:'no'},{text:'Yes',itemId:'yes',ui:'action'}]},constructor:function(a){a=a||{};if(a.hasOwnProperty('multiline')||a.hasOwnProperty('multiLine')){a.prompt=a.prompt||{};Ext.applyIf(a.prompt,{multiLine:a.multiline||a.multiLine});delete a.multiline;delete a.multiLine}this.defaultAllowedConfig={};var d=['ui','showAnimation','hideAnimation','title','message','prompt','iconCls','buttons','defaultTextHeight'],e=d.length,b,c;for(b=0;b<e;b++){c=d[b];this.defaultAllowedConfig[c]=this.defaultConfig[c]}Ext.Sheet.prototype.constructor.call(this,a)},applyTitle:function(a){if(typeof a=='string'){a={title:a}}Ext.applyIf(a,{docked:'top',ui:Ext.filterPlatform('blackberry')?'light':null,cls:this.getBaseCls()+'-title'});if(Ext.theme.is.Tizen){Ext.applyIf(a,{centered:!1})}return Ext.factory(a,Ext.Toolbar,this.getTitle())},updateTitle:function(a){if(a){this.add(a)}},updateButtons:function(b){var a=this;b=!b||b.length===0?!1:b;if(b){if(a.buttonsToolbar){a.buttonsToolbar.show();a.buttonsToolbar.removeAll();a.buttonsToolbar.setItems(b)}else {var d={type:'hbox',pack:'center'};var c=Ext.theme.is.MountainView||Ext.theme.is.Blackberry;a.buttonsToolbar=Ext.create('Ext.Toolbar',{docked:'bottom',defaultType:'button',defaults:{flex:c?1:undefined,ui:Ext.theme.is.Blackberry?'action':undefined},layout:d,ui:a.getUi(),cls:a.getBaseCls()+'-buttons',items:b});a.add(a.buttonsToolbar)}}else {if(a.buttonsToolbar){a.buttonsToolbar.hide()}}},applyMessage:function(a){a={html:a,cls:this.getBaseCls()+'-text'};return Ext.factory(a,Ext.Component,this._message)},updateMessage:function(a){if(a){this.add(a)}},getMessage:function(){if(this._message){return this._message.getHtml()}return null},applyIconCls:function(a){a={xtype:'component',docked:'left',width:40,height:40,baseCls:'x-icon',hidden:a?!1:!0,cls:a};return Ext.factory(a,Ext.Component,this._iconCls)},updateIconCls:function(a,b){this.getTitle();this.getButtons();if(a){this.add(a)}else {this.remove(b)}},getIconCls:function(){var b=this._iconCls,a;if(b){a=b.getCls();return a?a[0]:null}return null},applyPrompt:function(b){if(b){var a={label:!1};if(Ext.isObject(b)){Ext.apply(a,b)}if(a.multiLine){a.height=Ext.isNumber(a.multiLine)?parseFloat(a.multiLine):this.getDefaultTextHeight();return Ext.factory(a,Ext.field.TextArea,this.getPrompt())}else {return Ext.factory(a,Ext.field.Text,this.getPrompt())}}return b},updatePrompt:function(a,b){if(a){this.add(a)}if(b){this.remove(b)}},onClick:function(b){if(b){var a=b.config.userConfig||{},c=b.getInitialConfig(),d=this.getPrompt();if(typeof a.fn=='function'){b.disable();this.on({hiddenchange:function(){a.fn.call(a.scope||null,c.itemId||c.text,d?d.getValue():null,a);b.enable()},single:!0,scope:this})}if(a.input){a.input.dom.blur()}}this.hide()},show:function(b){Ext.util.InputBlocker.blockInputs();if(!this.getParent()&&Ext.Viewport){Ext.Viewport.add(this)}if(!b){return Ext.Sheet.prototype.show.call(this)}var a=Ext.apply({},b),f=b.buttons||Ext.MessageBox.OK||[],c=[],e=b;Ext.each(f,function(a){if(!a){return}c.push(Ext.apply({userConfig:e,scope:this,handler:'onClick'},a))},this);a.buttons=c;a.prompt=a.prompt||null;if(a.multiLine){a.prompt=a.prompt||{};a.prompt.multiLine=a.multiLine;delete a.multiLine}delete a.value;delete a.fn;delete a.scope;a=Ext.merge({},this.defaultAllowedConfig,a);this.setConfig(a);var d=this.getPrompt();if(d){d.setValue(b.value||'')}Ext.Sheet.prototype.show.call(this);return this},alert:function(d,c,b,a){return this.show({title:d||null,message:c||null,buttons:Ext.MessageBox.OK,prompt:!1,fn:function(){if(b){Ext.callback(b,a,arguments)}},scope:a})},confirm:function(d,c,b,a){return this.show({title:d||null,message:c||null,buttons:Ext.MessageBox.YESNO,prompt:!1,scope:a,fn:function(){if(b){Ext.callback(b,a,arguments)}}})},prompt:function(f,d,b,a,c,g,e){return this.show({title:f||null,message:d||null,buttons:Ext.MessageBox.OKCANCEL,scope:a,prompt:e||!0,multiLine:c,value:g,fn:function(){if(b){Ext.callback(b,a,arguments)}}})}},1,['messagebox'],['widget','component','container','panel','sheet','messagebox'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'sheet':!0,'messagebox':!0},['widget.messagebox'],0,[Ext,'MessageBox'],function(a){Ext.onInternalReady(function(){Ext.Msg=new a()})});Ext.define('TS.overrides.MessageBox',{override:'Ext.MessageBox',show:function(a){if(a&&a.hasOwnProperty('icon')){delete a.icon}(arguments.callee.$previous||Ext.Sheet.prototype.show).apply(this,arguments)}});Ext.cmd.derive('Ext.SegmentedButton',Ext.Container,{alternateClassName:'Ext.button.Segmented',isSegmentedButton:!0,config:{baseCls:'x-segmentedbutton',allowMultiple:!1,allowDepress:!1,allowToggle:!0,forceSelection:!1,pressedButtons:null,layout:{type:'hbox',align:'stretch'},defaultType:'button',defaultUI:null,value:undefined},constructor:function(a){this.valueMap={};Ext.Container.prototype.constructor.call(this,a)},initialize:function(){var a=this;Ext.Container.prototype.initialize.call(this);a.onAfter({delegate:'> button',scope:a,hide:'onButtonHiddenChange',show:'onButtonHiddenChange'})},applyPressedButtons:function(a){var b=a,e,c,d;a=[];if(b){b=Ext.Array.from(b);for(c=0;c<e;++c){d=this.getComponent(b[c]);if(d){a.push(d)}}}return a},updatePressedButtons:function(a){this.setValue(a)},getPressedButtons:function(){var c=this.getItems().items,e=c.length,d=[],a,b;for(a=0;a<e;++a){b=c[a];if(b.getPressed()){d.push(b)}}return d},applyValue:function(f,h){var b=this,k=h===undefined,m=b.getAllowMultiple(),j=b.getItems(),l=j.getCount(),d=[],p=b.getForceSelection(),q=b.pressingItem,n,a,g,e,o,i,c;b.settingValue=!0;d=Ext.Array.from(f);h=Ext.Array.from(h);if(k){i={};for(c=j.getCount()-1;c>=0;--c){a=j.getAt(c);if(p&&!d.length&&c===0&&!n){a.setPressed(!0)}if(a.getPressed()){n=!0;g=a.getValue();if(g===null){g=j.indexOf(a)}if(!Ext.Array.contains(d,g)){d.unshift(g)}}}}else {i=b.getAllPressed(j)}l=d.length;for(c=0;c<l;c++){f=d[c];a=b.lookupButtonByValue(f);if(a){g=a.getValue();if(g!==null&&g!==f){d[c]=g}if(i[a.id]){delete i[a.id]}else {a.setPressed(!0);if(!k){(e||(e=[])).push(a)}}}}for(o in i){a=i[o];a.setPressed(!1);if(!k){(e||(e=[])).push(a)}}if(m){f=d=b.sortValues(d)}else {f=d.length?d[0]:null;h=h.length?h[0]:null}b.settingValue=!1;if(!k&&e){if(b.hasListeners.toggle){b.sortToggleItems(e);for(c=0,l=e.length;c<l;++c){a=e[c];b.fireEvent('toggle',b,a,a.getPressed())}}if(b.hasListeners.change){e=m?!Ext.Array.equals(f,h):f!==h;if(e){b.fireEvent('change',b,f,h)}}}return f},updateAllowMultiple:function(a){if(!this.initialized&&!this.getInitialConfig().hasOwnProperty('allowDepress')&&a){this.setAllowDepress(!0)}},onItemAdd:function(a,e){var b=this,c=b.getDefaultUI(),d=a.getValue();b.getAllowMultiple();if(c&&a.getUi()==null){a.setUi(c)}if(d!==null){b.valueMap[d]=a;b.useValueMap=!0}a.$segmentedListeners=a.on({scope:b,beforepressedchange:'onBeforePressedChange',pressedchange:'onPressedChange',order:'before',destroyable:!0});Ext.Container.prototype.onItemAdd.call(this,a,e);b.updateFirstAndLastCls(b.getItems());a.$enableToggle=a.getEnableToggle();a.$allowDepress=a.getAllowDepress();a.setEnableToggle(b.getAllowToggle());a.setAllowDepress(b.getAllowDepress())},onItemRemove:function(a,d,j){var b=this,e=a.getValue(),h=b.useValueMap,i=a.$segmentedListeners,g,c,f;Ext.Container.prototype.onItemRemove.call(this,a,d,j);if(!b.destroying){if(i){i.destroy()}b.updateFirstAndLastCls(this.getItems());if(h){e=button.getValue();delete b.valueMap[e]}else {e=d}if(a.getPressed()){g=b.getValue();if(b.getAllowMultiple()){d=g.indexOf(e);c=g.slice();if(!h){for(f=c.length-1;f>d;--f){--c[f]}}c.splice(d,1)}else {c=null}b.setValue(c)}a.setEnableToggle(a.$enableToggle);a.setAllowDepress(a.$allowDepress)}a.$segmentedListeners=null},isPressed:function(a){return a.getPressed()},updateDisabled:function(a,c){var b=this;b.items.each(function(b){b.setDisabled(a)},b);Ext.Container.prototype.updateDisabled.call(this,a,c)},updateDefaultUI:function(d){var c=this.items&&this.items.items,e=c.length,a,b;for(a=0;a<e;a++){b=c[a];if(b.getUi()==null){b.setUi(d)}}},destroy:function(){this.destroying=!0;this.valueMap=null;Ext.Container.prototype.destroy.call(this)},privates:{getAllPressed:function(b){b=b.items;var g=b.length,e={},f=this.pressingItem,c,a,d;for(c=0;c<g;++c){a=b[c];if(a===f){d=!a.getPressed()}else {d=a.getPressed()}if(d){e[a.id]=a}}return e},lookupButtonByValue:function(b){var a;if(this.useValueMap){a=this.valueMap[b]}else {a=this.getItems().getAt(b)}return a},onBeforePressedChange:function(c,b){var a;if(this.getForceSelection()&&!b){if(this.getAllowMultiple()){a=this.getValue().length===1}else {a=!1}}return a},onPressedChange:function(f,h){if(this.settingValue){return}var b=this,g=Ext.Array,e=b.getAllowMultiple(),c=b.useValueMap?f.getValue():b.items.indexOf(f),a=b.getValue(),d;if(e){d=g.indexOf(a,c)}if(h){if(e){if(d===-1){a=g.slice(a);a.push(c)}}else {a=c}}else {if(e){if(d>-1){a=g.slice(a);a.splice(d,1)}}else {if(a===c){a=null}}}b.pressingItem=f;b.setValue(a);b.pressingItem=null},onButtonHiddenChange:function(){this.updateFirstAndLastCls(this.getItems())},sortToggleItems:function(b){var a=this.getItems();Ext.Array.sort(b,function(d,e){var f=d.getPressed()?1:0,g=e.getPressed()?1:0,c=f-g;if(c===0){c=a.indexOf(d)-a.indexOf(e)}return c})},sortValues:function(a){var d=Ext.Array.numericSortFn,c=this.valueMap,b=this.getItems();a=Ext.Array.clone(a);if(this.useValueMap){d=function(d,e){d=b.indexOf(c[d]);e=b.indexOf(c[e]);return d-e}}Ext.Array.sort(a,d);return a},updateFirstAndLastCls:function(c){var d=c.length,e='x-',f=e+'first',g=e+'last',b,a;for(a=0;a<d;a++){b=c.items[a];b.removeCls(f);b.removeCls(g)}for(a=0;a<d;a++){b=c.items[a];if(!b.isHidden()){b.addCls(f);break}}for(a=d-1;a>=0;a--){b=c.items[a];if(!b.isHidden()){b.addCls(g);break}}}}},1,['segmentedbutton'],['widget','component','container','segmentedbutton'],{'widget':!0,'component':!0,'container':!0,'segmentedbutton':!0},['widget.segmentedbutton'],0,[Ext,'SegmentedButton',Ext.button,'Segmented'],0);Ext.cmd.derive('Ext.TitleBar',Ext.Container,{defaultBindProperty:'title',isToolbar:!0,config:{baseCls:'x-toolbar',cls:'x-navigation-bar',ui:'dark',title:null,titleAlign:'center',defaultType:'button',minHeight:null,layout:{type:'hbox'},items:[],maxButtonWidth:'40%'},hasCSSMinHeight:!0,beforeInitialize:function(){this.applyItems=this.applyInitialItems},initialize:function(){delete this.applyItems;this.add(this.initialItems);delete this.initialItems;this.on({painted:'refreshTitlePosition',single:!0})},applyInitialItems:function(d){var a=this,c=a.getTitleAlign(),b=a.getDefaults()||{};a.initialItems=d;a.leftBox=a.add({xtype:'container',style:'position: relative',layout:{type:'hbox',align:'center'},listeners:{resize:'refreshTitlePosition',scope:a}});a.spacer=a.add({xtype:'component',style:'position: relative',flex:1,listeners:{resize:'refreshTitlePosition',scope:a}});a.rightBox=a.add({xtype:'container',style:'position: relative',layout:{type:'hbox',align:'center'},listeners:{resize:'refreshTitlePosition',scope:a}});switch(c){case 'left':a.titleComponent=a.leftBox.add({xtype:'title',cls:'x-title-align-left',hidden:b.hidden});a.refreshTitlePosition=Ext.emptyFn;break;case 'right':a.titleComponent=a.rightBox.add({xtype:'title',cls:'x-title-align-right',hidden:b.hidden});a.refreshTitlePosition=Ext.emptyFn;break;default:a.titleComponent=a.add({xtype:'title',hidden:b.hidden,centered:!0});break;}a.doAdd=a.doBoxAdd;a.remove=a.doBoxRemove;a.doInsert=a.doBoxInsert},doBoxAdd:function(a){if(a.config.align=='right'){this.rightBox.add(a)}else {this.leftBox.add(a)}},doBoxRemove:function(a,b){if(a.config.align=='right'){this.rightBox.remove(a,b)}else {this.leftBox.remove(a,b)}},doBoxInsert:function(b,a){if(a.config.align=='right'){this.rightBox.insert(b,a)}else {this.leftBox.insert(b,a)}},calculateMaxButtonWidth:function(){var a=this.getMaxButtonWidth();if(Ext.isString(a)){a=parseInt(a.replace('%',''),10)}a=Math.round(this.element.getWidth()/100*a);return a},refreshTitlePosition:function(){if(this.destroyed){return}var a=this.titleComponent.renderElement;a.setWidth(null);a.setLeft(null);var i=this.leftBox,c=i.down('button'),n=i.getItems().getCount()==1,j,d;if(c&&n){if(c.getWidth()==null){c.renderElement.setWidth('auto')}j=i.renderElement.getWidth();d=this.calculateMaxButtonWidth();if(j>d){c.renderElement.setWidth(d)}}var b=this.spacer.renderElement.getBox();if(Ext.browser.is.IE){a.setWidth(b.width)}var h=a.getBox(),m=h.width-b.width,l=h.left,k=h.right,e,g,f;if(m>0){e=m/2;l+=e;k-=e;a.setWidth(b.width)}g=b.left-l;f=k-b.right;if(g>0){a.setLeft(g)}else {if(f>0){a.setLeft(-f)}}a.repaint()},updateTitle:function(a){this.getItems();this.titleComponent.setTitle(a);if(this.isPainted()){this.refreshTitlePosition()}}},0,['titlebar'],['widget','component','container','titlebar'],{'widget':!0,'component':!0,'container':!0,'titlebar':!0},['widget.titlebar'],0,[Ext,'TitleBar'],0);Ext.cmd.derive('Ext.dataview.component.DataItem',Ext.Container,{config:{baseCls:'x-data-item',defaultType:'component',record:null,itemCls:null,dataMap:{},dataview:null,width:'100%',items:[{xtype:'component'}]},updateBaseCls:function(a,b){var c=this;Ext.Container.prototype.updateBaseCls.apply(this,arguments)},updateItemCls:function(a,b){if(b){this.removeCls(b)}if(a){this.addCls(a)}},doMapData:function(f,c,g){var e,d,b,a;for(e in f){b=f[e];d=this[e]();if(d){for(a in b){if(c&&d[a]&&c[b[a]]!==undefined&&c[b[a]]!==null){d[a](c[b[a]])}}}}if(g){g.updateData(c)}},updateRecord:function(a){if(!a){return}this._record=a;var b=this,c=b.dataview||this.getDataview(),e=c.prepareData(a.getData(!0),c.getStore().indexOf(a),a),g=b.getItems(),f=g.first(),d=b.getDataMap();if(!f){return}if(d){this.doMapData(d,e,f)}b.fireEvent('updatedata',b,e)}},0,['dataitem'],['widget','component','container','dataitem'],{'widget':!0,'component':!0,'container':!0,'dataitem':!0},['widget.dataitem'],0,[Ext.dataview.component,'DataItem'],0);Ext.cmd.derive('Ext.dataview.component.Container',Ext.Container,{constructor:function(){this.itemCache=[];Ext.Container.prototype.constructor.apply(this,arguments)},doInitialize:function(){this.innerElement.on({touchstart:'onItemTouchStart',touchend:'onItemTouchEnd',tap:'onItemTap',taphold:'onItemTapHold',touchmove:'onItemTouchMove',singletap:'onItemSingleTap',doubletap:'onItemDoubleTap',swipe:'onItemSwipe',delegate:'> .x-data-item',scope:this})},initialize:function(){Ext.Container.prototype.initialize.call(this);this.doInitialize()},onItemTouchStart:function(c){var a=this,d=c.currentTarget,b=Ext.getCmp(d.id);b.on({touchmove:'onItemTouchMove',scope:a,single:!0});a.fireEvent('itemtouchstart',a,b,a.indexOf(b),c)},onItemTouchMove:function(c){var a=this,d=c.currentTarget,b=Ext.getCmp(d.id);a.fireEvent('itemtouchmove',a,b,a.indexOf(b),c)},onItemTouchEnd:function(c){var a=this,d=c.currentTarget,b=Ext.getCmp(d.id);b.un({touchmove:'onItemTouchMove',scope:a});a.fireEvent('itemtouchend',a,b,a.indexOf(b),c)},onItemTap:function(c){var a=this,d=c.currentTarget,b=Ext.getCmp(d.id);a.fireEvent('itemtap',a,b,a.indexOf(b),c)},onItemTapHold:function(c){var a=this,d=c.currentTarget,b=Ext.getCmp(d.id);a.fireEvent('itemtaphold',a,b,a.indexOf(b),c)},onItemSingleTap:function(c){var a=this,d=c.currentTarget,b=Ext.getCmp(d.id);a.fireEvent('itemsingletap',a,b,a.indexOf(b),c)},onItemDoubleTap:function(c){var a=this,d=c.currentTarget,b=Ext.getCmp(d.id);a.fireEvent('itemdoubletap',a,b,a.indexOf(b),c)},onItemSwipe:function(c){var a=this,d=c.currentTarget,b=Ext.getCmp(d.id);a.fireEvent('itemswipe',a,b,a.indexOf(b),c)},moveItemsToCache:function(g,l){var b=this,c=b.dataview,h=c.getMaxItemCache(),k=b.getViewItems(),e=b.itemCache,f=e.length,j=c.getPressedCls(),i=c.getSelectedCls(),d=l-g,a;for(;d>=0;d--){a=k[g+d];if(f!==h){b.remove(a,!1);a.removeCls([j,i]);e.push(a);f++}else {a.destroy()}}if(b.getViewItems().length==0){this.dataview.showEmptyText()}},moveItemsFromCache:function(b){var g=this,e=g.dataview,l=e.getStore(),f=b.length,m=e.getDefaultType(),j=e.getItemConfig(),h=g.itemCache,i=h.length,k=[],a,d,c;if(f){e.hideEmptyText()}for(a=0;a<f;a++){b[a]._tmpIndex=l.indexOf(b[a])}Ext.Array.sort(b,function(a,c){return a._tmpIndex>c._tmpIndex?1:-1});for(a=0;a<f;a++){c=b[a];if(i){i--;d=h.pop();this.updateListItem(c,d)}else {d=g.getDataItemConfig(m,c,j)}d=this.insert(c._tmpIndex,d);delete c._tmpIndex}return k},getViewItems:function(){return this.getInnerItems()},updateListItem:function(b,a){if(a.updateRecord){if(a.getRecord()===b){a.updateRecord(b)}else {a.setRecord(b)}}},getDataItemConfig:function(e,d,a){var b=this.dataview,c={xtype:e,record:d,itemCls:b.getItemCls(),defaults:a,dataview:b};return Ext.merge(c,a)},doRemoveItemCls:function(c){var b=this.getViewItems(),d=b.length,a=0;for(;a<d;a++){b[a].removeCls(c)}},doAddItemCls:function(c){var b=this.getViewItems(),d=b.length,a=0;for(;a<d;a++){b[a].addCls(c)}},updateAtNewIndex:function(a,c,b){this.moveItemsToCache(a,a);this.moveItemsFromCache([b])},destroy:function(){var d=this,b=d.itemCache,c=b.length,a=0;for(;a<c;a++){b[a].destroy()}Ext.Container.prototype.destroy.call(this)}},1,0,['widget','component','container'],{'widget':!0,'component':!0,'container':!0},0,0,[Ext.dataview.component,'Container'],0);Ext.cmd.derive('Ext.dataview.element.Container',Ext.Component,{doInitialize:function(){this.element.on({touchstart:'onItemTouchStart',touchend:'onItemTouchEnd',tap:'onItemTap',taphold:'onItemTapHold',touchmove:'onItemTouchMove',singletap:'onItemSingleTap',doubletap:'onItemDoubleTap',swipe:'onItemSwipe',delegate:'> div',scope:this})},initialize:function(){Ext.Component.prototype.initialize.call(this);this.doInitialize()},updateBaseCls:function(a,b){var c=this;Ext.Component.prototype.updateBaseCls.call(this,a+'-container',b)},onItemTouchStart:function(c){var a=this,b=c.currentTarget,d=a.getViewItems().indexOf(b);Ext.get(b).on({touchmove:'onItemTouchMove',scope:a,single:!0});a.fireEvent('itemtouchstart',a,Ext.get(b),d,c)},onItemTouchEnd:function(c){var a=this,b=c.currentTarget,d=a.getViewItems().indexOf(b);Ext.get(b).un({touchmove:'onItemTouchMove',scope:a});a.fireEvent('itemtouchend',a,Ext.get(b),d,c)},onItemTouchMove:function(c){var a=this,b=c.currentTarget,d=a.getViewItems().indexOf(b);a.fireEvent('itemtouchmove',a,Ext.get(b),d,c)},onItemTap:function(c){var a=this,b=c.currentTarget,d=a.getViewItems().indexOf(b);a.fireEvent('itemtap',a,Ext.get(b),d,c)},onItemTapHold:function(c){var a=this,b=c.currentTarget,d=a.getViewItems().indexOf(b);a.fireEvent('itemtaphold',a,Ext.get(b),d,c)},onItemDoubleTap:function(c){var a=this,b=c.currentTarget,d=a.getViewItems().indexOf(b);a.fireEvent('itemdoubletap',a,Ext.get(b),d,c)},onItemSingleTap:function(c){var a=this,b=c.currentTarget,d=a.getViewItems().indexOf(b);a.fireEvent('itemsingletap',a,Ext.get(b),d,c)},onItemSwipe:function(c){var a=this,b=c.currentTarget,d=a.getViewItems().indexOf(b);a.fireEvent('itemswipe',a,Ext.get(b),d,c)},updateListItem:function(a,f){var g=this,b=g.dataview,d=b.getStore(),c=d.indexOf(a),e=b.prepareData(a.getData(!0),c,a);f.innerHTML=this.renderItemTpl(c,e,d)},addListItem:function(a,f){var h=this,d=h.dataview,i=d.getStore(),j=d.prepareData(f.getData(!0),a,f),e=h.element,c=e.dom.childNodes,g=c.length,b;b=Ext.Element.create(this.getItemElementConfig(a,j,i));if(!g||a==g){b.appendTo(e)}else {b.insertBefore(c[a])}},getItemElementConfig:function(d,f,e){var a=this.dataview,b=a.getItemCls(),c=a.getBaseCls()+'-item';if(b){c+=' '+b}return {cls:c,html:this.renderItemTpl(d,f,e)}},renderItemTpl:function(e,a,b){var d=this.dataview,f=d.getItemTpl(),c;b=b||d.getStore();c=b.getData().items;a.xcount=typeof a.xcount==='number'?a.xcount:b.getCount();a.xindex=typeof a.xindex==='number'?a.xindex:e;return f.apply(a,c,e+1,c.length)},doRemoveItemCls:function(c){var b=this.getViewItems(),d=b.length,a=0;for(;a<d;a++){Ext.fly(b[a]).removeCls(c)}},doAddItemCls:function(c){var b=this.getViewItems(),d=b.length,a=0;for(;a<d;a++){Ext.fly(b[a]).addCls(c)}},moveItemsToCache:function(b,f){var d=this,e=d.getViewItems(),a=f-b,c;for(;a>=0;a--){c=e[b+a];Ext.get(c).destroy()}if(d.getViewItems().length==0){this.dataview.showEmptyText()}},moveItemsFromCache:function(b){var f=this,e=f.dataview,g=e.getStore(),d=b.length,a,c;if(d){e.hideEmptyText()}for(a=0;a<d;a++){b[a]._tmpIndex=g.indexOf(b[a])}Ext.Array.sort(b,function(a,c){return a._tmpIndex>c._tmpIndex?1:-1});for(a=0;a<d;a++){c=b[a];f.addListItem(c._tmpIndex,c);delete c._tmpIndex}},getViewItems:function(){return Array.prototype.slice.call(this.element.dom.childNodes)},updateAtNewIndex:function(a,c,b){this.moveItemsToCache(a,a);this.moveItemsFromCache([b])},destroy:function(){var b=this.getViewItems(),c=b.length,a=0;for(;a<c;a++){Ext.get(b[a]).destroy()}Ext.Component.prototype.destroy.call(this)}},0,0,['widget','component'],{'widget':!0,'component':!0},0,0,[Ext.dataview.element,'Container'],0);Ext.cmd.derive('Ext.dataview.DataView',Ext.Container,{alternateClassName:'Ext.DataView',config:{store:null,data:null,baseCls:'x-dataview',emptyText:null,deferEmptyText:!0,itemTpl:'<div>{text}</div>',pressedCls:'x-item-pressed',itemCls:null,selectedCls:'x-item-selected',triggerEvent:'itemtap',triggerCtEvent:'tap',deselectOnContainerClick:!0,scrollable:!0,inline:null,pressedDelay:100,loadingText:'Loading...',useComponents:null,itemConfig:{},maxItemCache:20,defaultType:'dataitem',scrollToTopOnRefresh:!0},defaultBindProperty:'store',constructor:function(b){var a=this;a.hasLoadedStore=!1;a.mixins.selectable.constructor.apply(a,arguments);a.indexOffset=0;Ext.Container.prototype.constructor.apply(this,arguments);a.initSelectable()},updateItemCls:function(b,c){var a=this.container;if(a){if(c){a.doRemoveItemCls(c)}if(b){a.doAddItemCls(b)}}},storeEventHooks:{beforeload:'onBeforeLoad',groupchange:'onStoreGroupChange',load:'onLoad',refresh:'refresh',add:'onStoreAdd',remove:'onStoreRemove',clear:'onStoreClear',update:'onStoreUpdate'},initialize:function(){Ext.Container.prototype.initialize.call(this);var a=this,b,c=a.getTriggerEvent();a.on(a.getTriggerCtEvent(),a.onContainerTrigger,a);b=a.container=this.add(new (Ext.dataview[a.getUseComponents()?'component':'element'].Container)({baseCls:this.getBaseCls()}));b.dataview=a;if(c){a.on(c,a.onItemTrigger,a)}b.on({itemtouchstart:'onItemTouchStart',itemtouchend:'onItemTouchEnd',itemtap:'onItemTap',itemtaphold:'onItemTapHold',itemtouchmove:'onItemTouchMove',itemsingletap:'onItemSingleTap',itemdoubletap:'onItemDoubleTap',itemswipe:'onItemSwipe',scope:a});if(a.getStore()){if(a.isPainted()){a.refresh()}else {a.on({painted:'refresh',single:!0})}}},applyInline:function(a){if(Ext.isObject(a)){a=Ext.apply({},a)}return a},updateInline:function(c,d){var b=this,a=b.getBaseCls();if(d){b.removeCls([a+'-inlineblock',a+'-nowrap'])}if(c){b.addCls(a+'-inlineblock');if(Ext.isObject(c)&&c.wrap===!1){b.addCls(a+'-nowrap')}else {b.removeCls(a+'-nowrap')}}},prepareData:function(a,c,b){return a},onContainerTrigger:function(b){var a=this;if(b.target!=a.element.dom){return}if(a.getDeselectOnContainerClick()&&a.getStore()){a.deselectAll()}},onItemTrigger:function(b,a){if(!this.destroyed){this.selectWithEvent(this.getStore().getAt(a))}},doAddPressedCls:function(c){var b=this,a=b.getItemAt(b.getStore().indexOf(c));if(Ext.isElement(a)){a=Ext.get(a)}if(a){if(a.isComponent){a.renderElement.addCls(b.getPressedCls())}else {a.addCls(b.getPressedCls())}}},onItemTouchStart:function(g,e,b,f){var a=this,c=a.getStore(),d=c&&c.getAt(b);a.fireAction('itemtouchstart',[a,b,e,d,f],'doItemTouchStart')},doItemTouchStart:function(a,e,d,b){var c=a.getPressedDelay();if(b){if(c>0){a.pressedTimeout=Ext.defer(a.doAddPressedCls,c,a,[b])}else {a.doAddPressedCls(b)}}},onItemTouchEnd:function(g,a,d,f){var b=this,e=b.getStore(),c=e&&e.getAt(d);if(this.hasOwnProperty('pressedTimeout')){clearTimeout(this.pressedTimeout);delete this.pressedTimeout}if(c&&a){if(a.isComponent){a.renderElement.removeCls(b.getPressedCls())}else {a.removeCls(b.getPressedCls())}}b.fireEvent('itemtouchend',b,d,a,c,f)},onItemTouchMove:function(g,b,d,f){var a=this,e=a.getStore(),c=e&&e.getAt(d);if(a.hasOwnProperty('pressedTimeout')){clearTimeout(a.pressedTimeout);delete a.pressedTimeout}if(c&&b){if(b.isComponent){b.renderElement.removeCls(a.getPressedCls())}else {b.removeCls(a.getPressedCls())}}a.fireEvent('itemtouchmove',a,d,b,c,f)},onItemTap:function(g,e,b,f){var a=this,c=a.getStore(),d=c&&c.getAt(b);a.fireEvent('itemtap',a,b,e,d,f)},onItemTapHold:function(g,e,b,f){var a=this,c=a.getStore(),d=c&&c.getAt(b);a.fireEvent('itemtaphold',a,b,e,d,f)},onItemSingleTap:function(g,e,b,f){var a=this,c=a.getStore(),d=c&&c.getAt(b);a.fireEvent('itemsingletap',a,b,e,d,f)},onItemDoubleTap:function(g,e,b,f){var a=this,c=a.getStore(),d=c&&c.getAt(b);a.fireEvent('itemdoubletap',a,b,e,d,f)},onItemSwipe:function(g,e,b,f){var a=this,c=a.getStore(),d=c&&c.getAt(b);a.fireEvent('itemswipe',a,b,e,d,f)},onItemSelect:function(b,c){var a=this;if(c){a.doItemSelect(a,b)}else {a.fireAction('select',[a,b],'doItemSelect')}},doItemSelect:function(b,c){if(b.container&&!b.destroyed){var a=b.getItemAt(b.getStore().indexOf(c));if(Ext.isElement(a)){a=Ext.get(a)}if(a){if(a.isComponent){a.renderElement.removeCls(b.getPressedCls());a.renderElement.addCls(b.getSelectedCls())}else {a.removeCls(b.getPressedCls());a.addCls(b.getSelectedCls())}}}},onItemDeselect:function(c,b){var a=this;if(a.container&&!a.destroyed){if(b){a.doItemDeselect(a,c)}else {a.fireAction('deselect',[a,c,b],'doItemDeselect')}}},doItemDeselect:function(b,c){var a=b.getItemAt(b.getStore().indexOf(c));if(Ext.isElement(a)){a=Ext.get(a)}if(a){if(a.isComponent){a.renderElement.removeCls([b.getPressedCls(),b.getSelectedCls()])}else {a.removeCls([b.getPressedCls(),b.getSelectedCls()])}}},updateData:function(b){var a=this.getStore();if(!a){this.setStore(Ext.create('Ext.data.Store',{data:b,autoDestroy:!0}))}else {a.add(b)}},applyStore:function(a){var d=this,e=Ext.apply({},d.storeEventHooks,{scope:d}),c,b;if(a){a=Ext.data.StoreManager.lookup(a);if(a&&Ext.isObject(a)&&a.isStore){a.on(e);c=a.getProxy();if(c){b=c.getReader();if(b){b.on('exception','handleException',this)}}}}return a},handleException:function(){this.setMasked(!1)},updateStore:function(c,a){var b=this,f=Ext.apply({},b.storeEventHooks,{scope:b}),e,d;if(a&&Ext.isObject(a)&&a.isStore){a.un(f);if(!b.destroyed){b.onStoreClear()}if(a.getAutoDestroy()){a.destroy()}else {e=a.getProxy();if(e){d=e.getReader();if(d){d.un('exception','handleException',this)}}}}if(c){if(c.isLoaded()){this.hasLoadedStore=!0}if(c.isLoading()){b.onBeforeLoad()}if(b.container){b.refresh()}}},onBeforeLoad:function(){var a=this,b=a.getLoadingText();if(b&&a.isPainted()){a.setMasked({xtype:'loadmask',message:b})}a.hideEmptyText()},updateEmptyText:function(c,d){var a=this,b;if(d&&a.emptyTextCmp){a.remove(a.emptyTextCmp,!0);delete a.emptyTextCmp}if(c){a.emptyTextCmp=a.add({xtype:'component',cls:a.getBaseCls()+'-emptytext',html:c,hidden:!0});b=a.getStore();if(b&&a.hasLoadedStore&&!b.getCount()){a.showEmptyText()}}},onLoad:function(a){this.hasLoadedStore=!0;this.setMasked(!1);if(!a.getCount()){this.showEmptyText()}},refresh:function(){var a=this,b=a.container;if(!a.getStore()){if(!a.hasLoadedStore&&!a.getDeferEmptyText()){a.showEmptyText()}return}if(a.initialized&&b){a.fireAction('refresh',[a],'doRefresh')}},applyItemTpl:function(a){return Ext.isObject(a)&&a.isTemplate?a:new Ext.XTemplate(a)},onAfterRender:function(){var a=this;a.updateStore(a.getStore())},getItemAt:function(a){return this.getViewItems()[a-this.indexOffset]},getItemIndex:function(b){var a=this.getViewItems().indexOf(b);return a===-1?a:this.indexOffset+a},getViewItems:function(){return this.container.getViewItems()},doRefresh:function(b){var e=b.container,k=b.getStore(),i=k.getRange(),d=b.getViewItems(),g=i.length,c=d.length,f=g-c,h=b.getScrollable(),a,l;if(this.getScrollToTopOnRefresh()&&h){h.scrollTo(0,0)}if(g<1){b.onStoreClear();return}else {b.hideEmptyText()}if(f<0){e.moveItemsToCache(c+f,c-1);d=b.getViewItems();c=d.length}else {if(f>0){e.moveItemsFromCache(k.getRange(c))}}for(a=0;a<c;a++){l=d[a];e.updateListItem(i[a],l)}if(this.hasSelection()){var n=this.getSelection(),m=this.getSelectionCount(),j;for(a=0;a<m;a++){j=n[a];this.doItemSelect(this,j)}}},showEmptyText:function(){if(this.getEmptyText()&&(this.hasLoadedStore||!this.getDeferEmptyText())){this.emptyTextCmp.show()}},hideEmptyText:function(){if(this.getEmptyText()){this.emptyTextCmp.hide()}},destroy:function(){var c=this.getStore(),b=c&&c.getProxy(),a=b&&b.getReader();if(a){a.clearListeners()}Ext.Container.prototype.destroy.call(this);this.setStore(null)},onStoreClear:function(){var a=this,b=a.container,c=a.getViewItems();b.moveItemsToCache(0,c.length-1);this.showEmptyText()},onStoreGroupChange:Ext.emptyFn,onStoreAdd:function(b,a){if(a){this.hideEmptyText();this.container.moveItemsFromCache(a)}},onStoreRemove:function(f,d,b){var c=this.container,e=d.length,a;for(a=0;a<e;a++){c.moveItemsToCache(b[a],b[a])}},onStoreUpdate:function(g,b,h,f,c){var a=this,e=a.container,d;if(c.indexChanged){e.updateAtNewIndex(c.oldIndex,c.newIndex,b);if(a.isSelected(b)){a.doItemSelect(a,b)}}else {d=a.getViewItems()[a.getStore().indexOf(b)];if(d){e.updateListItem(b,d)}}}},1,['dataview'],['widget','component','container','dataview'],{'widget':!0,'component':!0,'container':!0,'dataview':!0},['widget.dataview'],[[Ext.mixin.Selectable.prototype.mixinId||Ext.mixin.Selectable.$className,Ext.mixin.Selectable]],[Ext.dataview,'DataView',Ext,'DataView'],0);Ext.cmd.derive('Ext.dataview.IndexBar',Ext.Component,{alternateClassName:'Ext.IndexBar',config:{baseCls:'x-indexbar',letters:['A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z'],ui:'alphabet',listPrefix:null},eventedConfig:{direction:'vertical'},updateDirection:function(b,c){var a=this.getBaseCls();this.element.replaceCls(a+'-'+c,a+'-'+b)},getElementConfig:function(){return {reference:'wrapper',classList:['x-centered','x-indexbar-wrapper'],children:[Ext.Component.prototype.getElementConfig.call(this)]}},updateLetters:function(b){this.innerElement.setHtml('');if(b){var c=b.length,a;for(a=0;a<c;a++){this.innerElement.createChild({html:b[a]})}}},updateListPrefix:function(a){if(a&&a.length){this.innerElement.createChild({html:a},0)}},initialize:function(){var a=this;Ext.Component.prototype.initialize.call(this);a.innerElement.on({touchstart:a.onTouchStart,touchend:a.onTouchEnd,dragend:a.onDragEnd,drag:a.onDrag,scope:a})},isVertical:function(){return this.getDirection()==='vertical'},onTouchStart:function(b){var a=this;b.stopPropagation();a.innerElement.addCls(a.getBaseCls()+'-pressed');a.pageBox=a.innerElement.getBox();a.onDrag(b)},onTouchEnd:function(a){this.onDragEnd()},onDragEnd:function(){this.innerElement.removeCls(this.getBaseCls()+'-pressed')},onDrag:function(g){var c=this,f=c.element,d=Ext.util.Point.fromEvent(g),b,e,a=c.pageBox;if(!a){a=c.pageBox=c.el.getBox()}if(c.getDirection()==='vertical'){if(d.y>a.bottom||d.y<a.top){return}b=Ext.Element.fromPoint(a.left+a.width/2,d.y);e=b.getParent()===f;c.onVerticalDrag(d,b,e)}else {if(d.x>a.right||d.x<a.left){return}b=Ext.Element.fromPoint(d.x,a.top+a.height/2);e=b.getParent()===f}if(b&&e){c.fireEvent('index',c,b.dom.innerHTML,b)}},privates:{onVerticalDrag:Ext.privateFn}},0,0,['widget','component'],{'widget':!0,'component':!0},0,0,[Ext.dataview,'IndexBar',Ext,'IndexBar'],0);Ext.cmd.derive('Ext.dataview.ListItemHeader',Ext.Component,{config:{baseCls:'x-list-header'}},0,['listitemheader'],['widget','component','listitemheader'],{'widget':!0,'component':!0,'listitemheader':!0},['widget.listitemheader'],0,[Ext.dataview,'ListItemHeader'],0);Ext.cmd.derive('Ext.dataview.component.ListItem',Ext.dataview.component.DataItem,{config:{baseCls:'x-list-item',dataMap:null,body:{xtype:'component',cls:'x-list-item-body'},disclosure:{xtype:'component',cls:'x-list-disclosure',hidden:!0,docked:'right'},header:{xtype:'component',cls:'x-list-header',html:' '},tpl:null,items:null},applyBody:function(a){if(a&&!a.isComponent){a=Ext.factory(a,Ext.Component,this.getBody())}return a},updateBody:function(b,a){if(b){this.add(b)}else {if(a){a.destroy()}}},applyHeader:function(a){if(a&&!a.isComponent){a=Ext.factory(a,Ext.Component,this.getHeader())}return a},updateHeader:function(b,a){if(a){a.destroy()}},applyDisclosure:function(a){if(a&&!a.isComponent){a=Ext.factory(a,Ext.Component,this.getDisclosure())}return a},updateDisclosure:function(b,a){if(b){this.add(b)}else {if(a){a.destroy()}}},updateTpl:function(a){this.getBody().setTpl(a)},updateRecord:function(a){var b=this,d=b.dataview||this.getDataview(),c=a&&d.prepareData(a.getData(!0),d.getStore().indexOf(a),a),h=b.getDataMap(),e=this.getBody(),g=this.getDisclosure();b._record=a;if(h){b.doMapData(h,c,e)}else {if(e){e.updateData(c||null)}}if(g&&a&&d.getOnItemDisclosure()){var f=d.getDisclosureProperty();g[c.hasOwnProperty(f)&&c[f]===!1?'hide':'show']()}b.fireEvent('updatedata',b,c)},destroy:function(){Ext.destroy(this.getHeader());Ext.dataview.component.DataItem.prototype.destroy.call(this)}},0,['listitem'],['widget','component','container','dataitem','listitem'],{'widget':!0,'component':!0,'container':!0,'dataitem':!0,'listitem':!0},['widget.listitem'],0,[Ext.dataview.component,'ListItem'],0);Ext.cmd.derive('Ext.dataview.component.SimpleListItem',Ext.Component,{config:{baseCls:'x-list-item',disclosure:{xtype:'component',cls:'x-list-disclosure',hidden:!0},header:{xtype:'component',cls:'x-list-header',html:' '},dataview:null,record:null},initialize:function(){this.element.addCls(this.getBaseCls()+'-tpl')},applyHeader:function(a){if(a&&!a.isComponent){a=Ext.factory(a,Ext.Component,this.getHeader())}return a},updateHeader:function(b,a){if(a){a.destroy()}},applyDisclosure:function(a){if(a&&!a.isComponent){a=Ext.factory(a,Ext.Component,this.getDisclosure())}return a},updateDisclosure:function(b,a){if(b){this.element.appendChild(b.renderElement)}else {if(a){a.destroy()}}},updateRecord:function(a){var f=this,b=f.dataview||this.getDataview(),c=a&&b.prepareData(a.getData(!0),b.getStore().indexOf(a),a),e=this.getDisclosure();f.updateData(c||null);if(e&&a&&b.getOnItemDisclosure()){var d=b.getDisclosureProperty();e[c.hasOwnProperty(d)&&c[d]===!1?'hide':'show']()}},destroy:function(){Ext.destroy(this.getHeader(),this.getDisclosure());Ext.Component.prototype.destroy.call(this)}},0,['simplelistitem'],['widget','component','simplelistitem'],{'widget':!0,'component':!0,'simplelistitem':!0},['widget.simplelistitem'],0,[Ext.dataview.component,'SimpleListItem'],0);Ext.cmd.derive('Ext.util.PositionMap',Ext.Base,{config:{minimumHeight:null},constructor:function(b){var a=this;a.map=[];a.adjustments={};a.offset=0;a.initConfig(b)},populate:function(e,h){var c=this,b=c.map=c.map||[],g=c.getMinimumHeight(),a,d,f;c.adjustments={indices:[],heights:{}};if(g===null){return}h=h||0;e++;b.length=e;b[0]=0;for(a=h+1,f=e-1;a<=f;a++){d=a-1;b[a]=b[d]+g}c.offset=0;for(a=1,f=e-1;a<=f;a++){d=a-1;this.offset+=b[a]-b[d]-g}},setItemHeight:function(b,a){a=Math.max(a,this.getMinimumHeight());if(a!==this.getItemHeight(b)){var c=this.adjustments;c.indices.push(parseInt(b,10));c.heights[b]=a}},update:function(){var g=this.adjustments,e=g.indices,l=g.heights,b=this.map,m=e.length,k=this.getMinimumHeight(),d=0,c,f,j,a,i,h;if(!g.indices.length){return !1}Ext.Array.sort(e,function(a,b){return a-b});for(c=0;c<m;c++){a=e[c];i=e[c+1]||b.length-1;h=b[a+1]!==undefined?b[a+1]-b[a]+d:k;j=l[a];d+=j-h;for(f=a+1;f<=i;f++){b[f]+=d}}this.offset+=d;this.adjustments={indices:[],heights:{}};return !0},getItemHeight:function(a){return this.map[a+1]-this.map[a]},getTotalHeight:function(){return (this.map.length-1)*this.getMinimumHeight()+this.offset},findIndex:function(a){return this.map.length?this.binarySearch(this.map,a):0},binarySearch:function(b,d){var c=0,a=b.length;if(d<b[0]){return 0}if(d>b[a-1]){return a-1}while(c+1<a){var e=c+a>>1,f=b[e];if(f==d){return e}else {if(f<d){c=e}else {a=e}}}return c}},1,0,0,0,0,0,[Ext.util,'PositionMap'],0);Ext.cmd.derive('Ext.dataview.List',Ext.dataview.DataView,{alternateClassName:'Ext.List',config:{container:{lazy:!0,$value:{xtype:'container',scrollable:{}}},layout:'fit',indexBar:!1,icon:null,preventSelectionOnDisclose:!0,baseCls:'x-list',pinHeaders:!0,grouped:null,onItemDisclosure:null,disclosureProperty:'disclosure',defaultType:undefined,itemMap:{},itemHeight:null,variableHeights:!1,refreshHeightOnUpdate:!0,infinite:!1,useSimpleItems:!0,scrollable:null,bufferSize:20,minimumBufferDistance:5,striped:!1},topRenderedIndex:0,topVisibleIndex:0,visibleCount:0,beforeInitialize:function(){var a=this,b=a.container,e=a.getBaseCls(),d,c;Ext.apply(a,{listItems:[],headerItems:[],updatedItems:[],headerMap:[],recordMap:{},scrollDockItems:{top:[],bottom:[]}});a.translationMethod='csstransform';if(!b){b=a.container=a.createContainer()}a.add(b);d=a.scrollViewElement=b.bodyElement;a.scrollElement=b.innerElement;c=a.pinnedHeader=Ext.factory({xtype:'listitemheader',html:'&nbsp;',translatable:{translationMethod:a.translationMethod},cls:[e+'-header',e+'-header-swap']});c.translate(0,-10000);c.$position=-10000;d.insertFirst(c.renderElement);b.getScrollable().on({scroll:'onScroll',refresh:'onScrollerRefresh',scope:a})},createContainer:function(){var a=Ext.merge({scrollable:{autoRefresh:this.getInfinite()?null:!0}},this.getContainer());return Ext.create(a)},getScrollable:function(){return this.container.getScrollable()},initialize:function(){var a=this,b=a.container,e=a.getIndexBar(),d=a.getTriggerEvent(),c=a.getTriggerCtEvent();if(e){a.container.element.appendChild(e.renderElement)}if(d){a.on(d,a.onItemTrigger,a)}if(c){a.on(c,a.onContainerTrigger,a)}b.element.on({delegate:'.'+a.getBaseCls()+'-disclosure',tap:'handleItemDisclosure',scope:a});b.element.on({resize:'onContainerResize',scope:a});b.innerElement.on({touchstart:'onItemTouchStart',touchend:'onItemTouchEnd',tap:'onItemTap',taphold:'onItemTapHold',singletap:'onItemSingleTap',doubletap:'onItemDoubleTap',swipe:'onItemSwipe',delegate:'.x-list-item',scope:a});if(a.getStore()){if(a.isPainted()){a.refresh()}else {a.on({painted:'refresh',single:!0})}}},getRefItems:function(e){var c=[],d=Ext.dataview.DataView.prototype.getRefItems.call(this,e),f=d.length,b,a;for(b=0;b<f;b++){a=d[b];if(!a.hasOwnProperty('$position')||a.$position>-1){c[c.length]=a}}return c},onScroll:function(i,c,b){var a=this,d=a.pinnedHeader,e=a.getStore(),f=e&&e.getCount(),h=a.isGrouping(),g=a.getInfinite();if(c){c=-c}if(b){b=-b}if(!f){a.showEmptyText();a.showEmptyScrollDock();d.$position=-10000;d.translate(0,-10000)}else {if(g&&a.itemsCount){a.handleItemUpdates(b);a.handleItemHeights();a.handleItemTransforms();if(!a.onIdleBound){Ext.AnimationQueue.onIdle(a.onAnimationIdle,a);a.onIdleBound=!0}}}if(h&&a.groups&&a.groups.length&&a.getPinHeaders()){a.handlePinnedHeader(b)}a.handleIndexBarSize();a.onScrollBinder(c,b)},onScrollerRefresh:function(b){var a=b.getPosition();this.onScroll(b,a.x,a.y)},onScrollBinder:function(){},handleItemUpdates:function(q){var b=this,h=b.listItems,k=h.length,l=b.getListItemInfo(),p=b.getItemMap(),n=b.getBufferSize(),o=b.getStore().getCount()-1,i=b.getMinimumBufferDistance(),m=b.topVisibleIndex,e=b.topRenderedIndex,f,a,d,g,j,c;b.topVisibleIndex=g=Math.max(0,p.findIndex(-q)||0);if(m!==g){if(m>g){j=g-e;if(j<i){f=Math.min(k,i-j);if(f==k){b.topRenderedIndex=e=Math.max(0,g-(n-i));for(a=0;a<f;a++){c=e+a;d=h[a];b.updateListItem(d,c,l)}}else {for(a=0;a<f;a++){c=e-a-1;if(c<0){break}d=h.pop();h.unshift(d);b.updateListItem(d,c,l);b.topRenderedIndex--}}}}else {j=n-(g-e);if(j<i){f=Math.min(k,i-j);if(f==k){b.topRenderedIndex=e=Math.min(o-k,g-i);for(a=0;a<f;a++){c=e+a;d=h[a];b.updateListItem(d,c,l)}}else {for(a=0;a<f;a++){c=e+k+a;if(c>o){break}d=h.shift();h.push(d);b.updateListItem(d,c,l);b.topRenderedIndex++}}}}}},onAnimationIdle:function(){var a=this,k=a.getListItemInfo(),l=a.getBufferSize(),j=a.topVisibleIndex,h=a.topRenderedIndex,n=a.getStore().getCount()-1,e=a.listItems,m=e.length,g,f,b,i,d,c;g=j-h;f=h+l-j;if(g<f){if(j>0){i=f-g;for(b=0;b<i;b++){c=h-b-1;if(c<0){break}d=e.pop();e.unshift(d);a.updateListItem(d,c,k);a.topRenderedIndex--}}}else {i=g-f;for(b=0;b<i;b++){c=h+m+b;if(c>n){break}d=e.shift();e.push(d);a.updateListItem(d,c,k);a.topRenderedIndex++}}a.handleItemHeights();a.handleItemTransforms();a.onIdleBound=!1},handleItemHeights:function(){var a=this,l=a.updatedItems,p=l.length,i=a.getItemMap(),o=a.getUseSimpleItems(),k=i.getMinimumHeight(),g=a.headerIndices,m=a.headerMap,n=a.getVariableHeights(),h,e,d,j,c,b,f;for(e=0;e<p;e++){c=l[e];h=c.$dataIndex;if(h!==null){if(n){b=o?c.element.getHeight():c.element.getFirstChild().getHeight();b=Math.max(b,k)}else {b=k}c.$ownItemHeight=b;j=a.scrollDockItems.top.length;if(c.isFirst){a.totalScrollDockTopHeight=0;for(d=0;d<j;d++){f=a.scrollDockItems.top[d].$scrollDockHeight;b+=f;a.totalScrollDockTopHeight+=f}}j=a.scrollDockItems.bottom.length;if(c.isLast){for(d=0;d<j;d++){f=a.scrollDockItems.bottom[d].$scrollDockHeight;b+=f}}if(g&&g[h]){b+=a.headerHeight}i.setItemHeight(h,b);c.$height=b}}i.update();m.length=0;for(e in g){if(g.hasOwnProperty(e)){m.push(i.map[e])}}a.updatedItems.length=0;a.refreshScroller(!0)},handleItemTransforms:function(){var d=this,h=d.listItems,i=h.length,k=d.getItemMap(),e=d.scrollDockItems,j=d.isGrouping(),b,a,g,f,c;for(g=0;g<i;g++){b=h[g];a=k.map[b.$dataIndex];if(!b.$hidden&&b.$position!==a){b.$position=a;f=e.top.length;if(b.isFirst&&f){for(c=0;c<f;c++){e.top[c].translate(0,a);a+=e.top[c].$scrollDockHeight}}if(j&&d.headerIndices&&d.headerIndices[b.$dataIndex]){b.getHeader().translate(0,a);a+=d.headerHeight}b.translate(0,a);a+=b.$ownItemHeight;f=e.bottom.length;if(b.isLast&&f){for(c=0;c<f;c++){e.bottom[c].translate(0,a);a+=e.bottom[c].$scrollDockHeight}}}}},handlePinnedHeader:function(e){var a=this,c=a.pinnedHeader,l=a.getItemMap(),m=a.groups,h=a.headerMap,k=a.headerHeight,n=a.getStore(),j=a.totalScrollDockTopHeight,i,b,g,d,f;b=l.binarySearch(h,-e);i=m.getAt(b).getAt(0);if(i){g=e+h[b+1]-k;if(e>=0||b===0&&j+e>=0||b===0&&-e<=h[b]){d=-10000}else {if(g<0){d=g}else {d=Math.max(0,e)}}f=n.getGrouper().getGroupString(i);if(c.$currentHeader!=f){c.setHtml(f);c.$currentHeader=f}if(c.$position!=d){c.translate(0,d);c.$position=d}}},createItem:function(d){var b=this,h=b.container,i=b.listItems,f=b.getInfinite(),g=b.scrollElement,a,c,e;d.$initParent=b;a=Ext.factory(d);delete d.$initParent;a.dataview=b;a.$height=d.minHeight;if(!f){e=b.getBaseCls()+'-item-relative';a.addCls(e)}c=a.getHeader&&a.getHeader();if(c){if(!f){c.addCls(e)}else {c.setTranslatable({translationMethod:this.translationMethod});c.translate(0,-10000);g.insertFirst(c.renderElement)}}h.doAdd(a);i.push(a);return a},setItemsCount:function(d,f){var a=this,e=a.listItems,g=f||a.getListItemConfig(),c=d-e.length,b;for(b=0;b<c;b++){a.createItem(g)}for(b=c;b<0;b++){e.pop().destroy()}a.itemsCount=d;a.updateAllListItems();if(Ext.browser.is.AndroidStock&&a.container.element&&d===0&&c!==0){a.container.element.redraw()}return a.listItems},updateListItem:function(b,f,a){var j=this,o=j.recordMap,n=b.getRecord(),q=a.store,i=q.getAt(f),u=j.headerIndices,t=j.footerIndices,d=b.getHeader&&b.getHeader(),k=j.scrollDockItems,w=j.updatedItems,e=j.getInfinite(),r=q.getCount(),x=q.getGrouper(),h=[],m=[],v=[a.headerCls,a.footerCls,a.firstCls,a.lastCls,a.selectedCls,a.stripeCls],s=[a.headerCls,a.footerCls,a.firstCls,a.lastCls],l,c,g,p;if(e){b.$position=-10000}if(!i){b.setRecord(null);if(n){delete o[n.internalId]}if(e){b.translate(0,-10000)}else {b.hide()}if(d){if(e){d.translate(0,-10000)}else {d.hide()}}b.$hidden=!0;return}else {if(b.$hidden){if(!e){b.show()}b.$hidden=!1}}if(e){w.push(b)}if(b.isFirst&&f!==0){l=k.top.length;for(c=0;c<l;c++){g=k.top[c];if(e){g.translate(0,-10000)}}b.isFirst=!1}if(b.isLast&&f!==r-1){l=k.bottom.length;for(c=0;c<l;c++){g=k.bottom[c];if(e){g.translate(0,-10000)}}b.isLast=!1}if(b.$dataIndex!==f){b.$dataIndex=f;j.fireEvent('itemindexchange',j,i,f,b)}if(n===i){b.updateRecord(i)}else {if(n){delete o[n.internalId]}o[i.internalId]=b;b.setRecord(i);p=b.getViewModel();if(p){p.set('record',i)}}if(j.isSelected(i)){h.push(a.selectedCls)}if(a.grouped){if(u[f]){h.push(a.headerCls);m.push(a.headerCls);d.setHtml(x.getGroupString(i));if(!e){d.renderElement.insertBefore(b.renderElement)}d.show()}else {if(e){d.translate(0,-10000)}else {d.hide()}}if(t[f]){h.push(a.footerCls);m.push(a.footerCls)}}if(d&&!a.grouped){if(e){d.translate(0,-10000)}else {d.hide()}}if(f===0){b.isFirst=!0;h.push(a.firstCls);m.push(a.firstCls);if(!a.grouped){h.push(a.headerCls);m.push(a.headerCls)}if(!e){for(c=0,l=k.top.length;c<l;c++){g=k.top[c];if(a.grouped){g.renderElement.insertBefore(d.renderElement)}else {g.renderElement.insertBefore(b.renderElement)}}}}if(f===r-1){b.isLast=!0;h.push(a.lastCls);m.push(a.lastCls);if(!a.grouped){h.push(a.footerCls);m.push(a.footerCls)}if(!e){for(c=0,l=k.bottom.length;c<l;c++){g=k.bottom[c];g.renderElement.insertAfter(b.renderElement)}}}if(a.striped&&f%2===1){h.push(a.stripeCls)}b.renderElement.replaceCls(v,h);if(d){d.renderElement.replaceCls(s,m)}},updateAllListItems:function(){var a=this,c,d,f,e,b,g;if(!a.initialized){return}c=a.getStore();d=a.listItems;f=a.getListItemInfo();e=a.topRenderedIndex;if(c){for(b=0,g=d.length;b<g;b++){a.updateListItem(d[b],e+b,f)}}if(a.isPainted()){if(a.getInfinite()&&c&&c.getCount()){a.handleItemHeights()}a.refreshScroller()}},doRefresh:function(){var a=this,c=a.getInfinite(),d=a.container.getScrollable(),b=a.getStore().getCount();if(c){a.getItemMap().populate(b,this.topRenderedIndex)}if(a.getGrouped()){a.refreshHeaderIndices()}if(b){a.hideScrollDockItems();a.hideEmptyText();if(!c){a.setItemsCount(b);if(a.getScrollToTopOnRefresh()){d.scrollTo(0,0)}}else {if(a.getScrollToTopOnRefresh()){a.topRenderedIndex=0;a.topVisibleIndex=0;d.scrollTo(null,0)}a.updateAllListItems()}}else {a.onStoreClear()}},updateStore:function(d,c){var a=this,b=a.container;Ext.dataview.DataView.prototype.updateStore.call(this,d,c);if(a._fireResizeOnNextLoad&&a.hasLoadedStore){a._fireResizeOnNextLoad=!1;a.onContainerResize(b,{height:b.element.getHeight()})}},onLoad:function(c){var a=this,b=a.container;Ext.dataview.DataView.prototype.onLoad.call(this,c);if(a._fireResizeOnNextLoad){a._fireResizeOnNextLoad=!1;a.onContainerResize(b,{height:b.element.getHeight()})}},onContainerResize:function(j,i){var a=this,h=a.getStore(),e,b,c,d,g,f;if(!a.headerHeight){a.headerHeight=parseInt(a.pinnedHeader.renderElement.getHeight(),10)}if(a.getInfinite()){g=a.getItemMap();c=g.getMinimumHeight();if(!h||!h.getCount()&&!h.isLoaded()){a._fireResizeOnNextLoad=!0;return}if(!c){d=a.listItems;if(!d.length){f=a.getListItemConfig();a.createItem(f);a.updateListItem(d[0],0,a.getListItemInfo());a.visibleCount++}c=d[0].element.getHeight();g.setMinimumHeight(c);a.getItemMap().populate(a.getStore().getCount(),a.topRenderedIndex)}e=a.visibleCount;b=Math.ceil(i.height/c);if(b!=e){a.visibleCount=b;a.setItemsCount(b+a.getBufferSize(),f);a.fireEvent('updatevisiblecount',this,b,e)}}else {if(a.listItems.length&&a.getGrouped()&&a.getPinHeaders()){a.updateHeaderMap()}}},refreshScroller:function(e){var a=this,b=a.container.getScrollable(),f=a.getInfinite(),d,c;if(f){d=a.getItemMap().getTotalHeight();c=b.getSize();if(d!=c.y){b.setSize({x:b.isTouchScroller?c.x:null,y:d})}if(!e){a.onScrollerRefresh(b)}}else {if(a.getGrouped()&&a.getPinHeaders()){a.updateHeaderMap()}b.refresh()}},updateHeaderMap:function(){var a=this,d=a.headerMap,c=a.headerIndices,e,b;d.length=0;for(b in c){if(c.hasOwnProperty(b)){e=a.getItemAt(b).getHeader();d.push(e.renderElement.dom.offsetTop)}}},applyVariableHeights:function(a){if(!this.getInfinite()){return !0}return a},applyDefaultType:function(a){if(!a){a=this.getUseSimpleItems()?'simplelistitem':'listitem'}return a},applyItemMap:function(a){return Ext.factory(a,Ext.util.PositionMap,this.getItemMap())},updateItemHeight:function(a){this.getItemMap().setMinimumHeight(a)},applyIndexBar:function(a){return Ext.factory(a,Ext.dataview.IndexBar,this.getIndexBar())},updatePinHeaders:function(a){if(this.isPainted()){this.pinnedHeader.translate(0,a?this.pinnedHeader.$position:-10000)}},updateItemTpl:function(e){var d=this,b=d.listItems,f=b.length||0,a,c;for(a=0;a<f;a++){c=b[a];c.setTpl(e)}d.updateAllListItems()},updateItemCls:function(d,e){var c=this.listItems,f=c.length,a,b;for(a=0;a<f;a++){b=c[a];b.removeCls(e);b.addCls(d)}},updateIndexBar:function(b,c){var a=this,e=a.element,d=a.getBaseCls()+'-indexed';if(c){c.destroy();e.removeCls(d)}if(b){b.on({scope:a,index:a.onIndex,directionchange:a.handleIndexBarSize});e.addCls(d);a.container.element.appendChild(b.renderElement);a.handleIndexBarSize()}},updateGrouped:function(a){if(this.initialized){this.handleGroupChange()}},onStoreGroupChange:function(){if(this.initialized){this.handleGroupChange()}},onStoreAdd:function(){this.doRefresh()},onStoreRemove:function(){this.doRefresh()},onStoreUpdate:function(e,d,h,g,f){var a=this,b,c;if(a.getInfinite()||f.indexChanged){a.doRefresh()}else {b=e.indexOf(d);c=a.listItems[b];if(c){a.updateListItem(c,b,a.getListItemInfo())}}},onStoreClear:function(){var a=this,c=a.container.getScrollable(),b=a.getInfinite();if(a.pinnedHeader){a.pinnedHeader.translate(0,-10000)}a.getItemMap().populate(0,0);if(!b){a.setItemsCount(0)}else {a.topRenderedIndex=0;a.topVisibleIndex=0;a.updateAllListItems()}c.scrollTo(null,0);a.refreshScroller()},showEmptyScrollDock:function(){var g=this,f=g.getInfinite(),c=g.scrollDockItems,d=0,b,e,a;for(b=0,e=c.top.length;b<e;b++){a=c.top[b];if(f){a.translate(0,d);d+=a.$scrollDockHeight}else {this.scrollElement.appendChild(a.renderElement)}}for(b=0,e=c.bottom.length;b<e;b++){a=c.bottom[b];if(f){a.translate(0,d);d+=a.$scrollDockHeight}else {this.scrollElement.appendChild(a.renderElement)}}},hideScrollDockItems:function(){var e=this,f=e.getInfinite(),b=e.scrollDockItems,a,d,c;if(!f){return}for(a=0,d=b.top.length;a<d;a++){c=b.top[a];c.translate(0,-10000)}for(a=0,d=b.bottom.length;a<d;a++){c=b.bottom[a];c.translate(0,-10000)}},getItem:function(a){var b;if(a){b=this.recordMap[a.internalId]}return b||null},getItemAt:function(d){var c=this.listItems,e=c.length,a,b;for(a=0;a<e;a++){b=c[a];if(b.$dataIndex==d){return b}}},getItemIndex:function(a){return a.$dataIndex},getViewItems:function(){return this.listItems},getListItemInfo:function(){var a=this,b=a.getBaseCls();return {store:a.getStore(),grouped:a.isGrouping(),baseCls:b,selectedCls:a.getSelectedCls(),headerCls:b+'-header-wrap',footerCls:b+'-footer-wrap',firstCls:b+'-item-first',lastCls:b+'-item-last',stripeCls:b+'-item-odd',striped:a.getStriped(),itemMap:a.getItemMap(),defaultItemHeight:a.getItemHeight()}},getListItemConfig:function(){var a=this,c=a.getItemMap().getMinimumHeight(),b={xtype:a.getDefaultType(),tpl:a.getItemTpl(),minHeight:c,cls:a.getItemCls()};if(a.getInfinite()){b.translatable={translationMethod:this.translationMethod}}if(!a.getVariableHeights()){b.height=c}return Ext.merge(b,a.getItemConfig())},refreshHeaderIndices:function(){var b=this,a=b.getStore(),l=a&&a.getCount(),c=a.getGrouper()?a.getGroups():null,k=b.getGrouped(),i=b.headerIndices={},e=b.footerIndices={},d,f,h,g,j;if(!k||!c){return e}j=c.length;b.groups=c;for(d=0;d<j;d++){h=c.getAt(d).getAt(0);g=a.indexOf(h);i[g]=!0;f=g-1;if(f>=0){e[f]=!0}}e[l-1]=!0;return i},scrollToRecord:function(m,l,k){var b=this,c=b.container.getScrollable(),n=b.getStore(),i=n.indexOf(m),d,a,e,f,g,h,j;c.stopAnimation();f=c.getElement().getHeight();g=c.getSize().y;h=g-f;if(b.getInfinite()){a=b.getItemMap().map[i]}else {e=b.listItems[i];d=e.getHeader&&e.getHeader();j=d&&d.isPainted()?d:e;a=j.renderElement.dom.offsetTop}if(!k){a=Math.min(a,h)}c.scrollTo(0,a,!!l)},onItemAdd:function(a,d){var b=this,c=a.config;if(c.scrollDock){if(c.scrollDock=='bottom'){b.scrollDockItems.bottom.push(a)}else {b.scrollDockItems.top.push(a)}if(b.getInfinite()){a.on({resize:'onScrollDockItemResize',scope:this});a.addCls(b.getBaseCls()+'-scrolldockitem');a.setTranslatable({translationMethod:this.translationMethod});a.translate(0,-10000);a.$scrollDockHeight=0}b.container.doAdd(a)}else {Ext.dataview.DataView.prototype.onItemAdd.call(this,a,d)}},getScrollDockedItems:function(){return this.scrollDockItems.bottom.slice().concat(this.scrollDockItems.top.slice())},onScrollDockItemResize:function(e,f){var a=this,d=a.listItems,g=d.length,b,c;Ext.getCmp(e.id).$scrollDockHeight=f.height;for(b=0;b<g;b++){c=d[b];if(c.isLast){a.updatedItems.push(c);if(a.isPainted()){a.refreshScroller()}break}}},onItemTouchStart:function(a){this.container.innerElement.on({touchmove:'onItemTouchMove',delegate:'.x-list-item',single:!0,scope:this});Ext.dataview.DataView.prototype.onItemTouchStart.apply(this,this.parseEvent(a))},onItemTouchMove:function(a){Ext.dataview.DataView.prototype.onItemTouchMove.apply(this,this.parseEvent(a))},onItemTouchEnd:function(a){this.container.innerElement.un({touchmove:'onItemTouchMove',delegate:'.x-list-item',scope:this});Ext.dataview.DataView.prototype.onItemTouchEnd.apply(this,this.parseEvent(a))},onItemTap:function(a){Ext.dataview.DataView.prototype.onItemTap.apply(this,this.parseEvent(a))},onItemTapHold:function(a){Ext.dataview.DataView.prototype.onItemTapHold.apply(this,this.parseEvent(a))},onItemSingleTap:function(a){Ext.dataview.DataView.prototype.onItemSingleTap.apply(this,this.parseEvent(a))},onItemDoubleTap:function(a){Ext.dataview.DataView.prototype.onItemDoubleTap.apply(this,this.parseEvent(a))},onItemSwipe:function(a){Ext.dataview.DataView.prototype.onItemSwipe.apply(this,this.parseEvent(a))},parseEvent:function(b){var d=this,c=Ext.fly(b.currentTarget).findParent('.x-list-item',8),a=Ext.getCmp(c.id);return [d,a,a.$dataIndex,b]},applyOnItemDisclosure:function(a){if(Ext.isFunction(a)){return {scope:this,handler:a}}return a},handleItemDisclosure:function(d){var a=this,c=Ext.getCmp(Ext.get(d.currentTarget).up('.x-list-item').id),b=c.$dataIndex,e=a.getStore().getAt(b);a.fireAction('disclose',[a,e,c,b,d],'doDisclose')},doDisclose:function(b,c,e,d,f){var a=b.getOnItemDisclosure();if(a&&a.handler){a.handler.call(a.scope||b,c,e,d,f)}},onItemTrigger:function(e,d,c,b,a){if(!(this.getPreventSelectionOnDisclose()&&Ext.fly(a.target).hasCls(this.getBaseCls()+'-disclosure'))){Ext.dataview.DataView.prototype.onItemTrigger.apply(this,arguments)}},destroy:function(){var a=this,b=a.indexBarTask;if(b){b.cancel();a.indexBarTask=null}a.pinnedHeader=Ext.destroy(a.pinnedHeader);a.setIndexBar(null);Ext.dataview.DataView.prototype.destroy.call(this);if(a.onIdleBound){Ext.AnimationQueue.unIdle(a.onAnimationIdle,a)}a.recordMap=a.listItems=null},privates:{doHandleIndexBarSize:function(){var b=this,d=b.getScrollable(),c=b.getIndexBar(),a;if(c){if(c.isVertical()){a=d.getScrollbarSize().width;if(a!==b.lastScrollerSize){c.renderElement.setStyle('padding-right',a+'px');b.lastScrollerSize=a}}}},handleGroupChange:function(){var a=this,g=a.isGrouping(),d=this.getBaseCls(),c=a.getInfinite(),b=a.pinnedHeader,f=d+'-grouped',e=d+'-ungrouped';if(b){b.translate(0,-10000)}if(g){a.addCls(f);a.removeCls(e)}else {a.addCls(e);a.removeCls(f)}if(c){a.refreshHeaderIndices();a.handleItemHeights()}a.updateAllListItems();if(c){a.handleItemTransforms()}},handleIndexBarSize:function(){var a=this,b=a.indexBarTask;if(!b){a.indexBarTask=b=new Ext.util.DelayedTask(a.doHandleIndexBarSize,a)}b.delay(1)},isGrouping:function(){return Boolean(this.getGrouped()&&this.getStore().getGrouper())},onIndex:function(k,f){var j=this,h=f.toLowerCase(),g=j.getStore(),e=g.getGroups(),i=e.length,b,d,c,a;for(c=0;c<i;c++){b=e.getAt(c);d=b.getGroupKey().toLowerCase();if(d>=h){a=b;break}else {a=b}}if(a){this.scrollToRecord(a.getAt(0))}}}},0,['list'],['widget','component','container','dataview','list'],{'widget':!0,'component':!0,'container':!0,'dataview':!0,'list':!0},['widget.list'],[[Ext.mixin.Hookable.prototype.mixinId||Ext.mixin.Hookable.$className,Ext.mixin.Hookable]],[Ext.dataview,'List',Ext,'List'],0);Ext.define('TS.overrides.dataview.List',{override:'Ext.dataview.List',compatibility:'6.0.2',config:{itemHeight:48},privates:{isGrouping:function(){var a=this.getStore();return Boolean(a&&this.getGrouped()&&a.getGrouper())}},onContainerResize:function(j,i){var a=this,h=a.getStore(),e,b,c,d,g,f;if(!a.headerHeight){a.headerHeight=parseInt(a.pinnedHeader.renderElement.getHeight(),10)}if(a.getInfinite()){g=a.getItemMap();c=g.getMinimumHeight();if(!h||!h.getCount()&&!h.isLoaded()){a._fireResizeOnNextLoad=!0;return}if(!c){d=a.listItems;if(!d.length){f=a.getListItemConfig();a.createItem(f);a.updateListItem(d[0],0,a.getListItemInfo());a.visibleCount++}c=d[0].element.getHeight();g.setMinimumHeight(c);a.getItemMap().populate(a.getStore().getCount(),a.topRenderedIndex)}e=a.visibleCount;b=Math.ceil(i.height/(c||1));if(b!=e){a.visibleCount=b;a.setItemsCount(b+a.getBufferSize(),f);a.fireEvent('updatevisiblecount',this,b,e)}}else {if(a.listItems.length&&a.getGrouped()&&a.getPinHeaders()){a.updateHeaderMap()}}}});Ext.cmd.derive('Ext.field.Checkbox',Ext.field.Field,{alternateClassName:'Ext.form.Checkbox',qsaLeftRe:/[\[]/g,qsaRightRe:/[\]]/g,isCheckbox:!0,defaultBindProperty:'checked',twoWayBindable:{checked:1},publishes:{checked:1},config:{ui:'checkbox',value:'',checked:!1,tabIndex:-1,component:{xtype:'input',type:'checkbox',useMask:!0,cls:'x-input-checkbox'}},initialize:function(){var a=this,b=a.getComponent();Ext.field.Field.prototype.initialize.call(this);b.on({scope:a,order:'before',masktap:'onMaskTap'});b.doMaskTap=Ext.emptyFn;a.label.on({scope:a,tap:'onMaskTap'});a.publishState('checked',a.getChecked())},doInitValue:function(){var b=this,a=b.getInitialConfig();if(a.hasOwnProperty('value')){b.originalState=a.value}if(a.hasOwnProperty('checked')){b.originalState=a.checked}Ext.field.Field.prototype.doInitValue.apply(this,arguments)},updateInputType:function(b){var a=this.getComponent();if(a){a.setType(b)}},updateName:function(b){var a=this.getComponent();if(a){a.setName(b)}},getSubmitValue:function(){return this.getChecked()?Ext.isEmpty(this._value)?!0:this._value:null},updateChecked:function(b,d){var a=this,c;a.getComponent().setChecked(b);if(a.initialized){c=b?'check':'uncheck';a.fireEvent(c,a);a.fireEvent('change',a,b,d)}},onMaskTap:function(c,d){var b=this,a=b.getComponent().input.dom;if(b.getDisabled()){return !1}a.checked=!a.checked;b.setChecked(a.checked);return !1},isChecked:function(){return this.getChecked()},check:function(){return this.setChecked(!0)},uncheck:function(){return this.setChecked(!1)},getSameGroupFields:function(){var b=this,c=b.up('formpanel')||b.up('fieldset'),a=b.getName(),e=b.qsaLeftRe,d=b.qsaRightRe;if(!c){c=Ext.Viewport}a=a.replace(e,'\\[');a=a.replace(d,'\\]');return c.query('checkboxfield[name='+a+']')},getGroupValues:function(){var a=[];this.getSameGroupFields().forEach(function(b){if(b.getChecked()){a.push(b.getValue())}});return a},setGroupValues:function(a){this.getSameGroupFields().forEach(function(b){b.setChecked(a.indexOf(b.getValue())!==-1)});return this},resetGroupValues:function(){this.getSameGroupFields().forEach(function(a){a.setChecked(a.originalState)});return this},reset:function(){this.setChecked(this.originalState);return this}},0,['checkboxfield'],['widget','component','field','checkboxfield'],{'widget':!0,'component':!0,'field':!0,'checkboxfield':!0},['widget.checkboxfield'],0,[Ext.field,'Checkbox',Ext.form,'Checkbox'],0);Ext.cmd.derive('Ext.field.Picker',Ext.field.Text,{config:{component:{useMask:!0},clearIcon:!1,usePicker:'auto',defaultPhonePickerConfig:null,defaultTabletPickerConfig:null,pickerSlotAlign:'center'},initialize:function(){var b=this,a=b.getComponent();Ext.field.Text.prototype.initialize.call(this);a.on({scope:b,masktap:'onMaskTap'});a.doMaskTap=Ext.emptyFn},updateDefaultPhonePickerConfig:function(b){var a=this.phonePicker;if(a){a.setConfig(b)}},updateDefaultTabletPickerConfig:function(b){var a=this.tabletPicker;if(a){a.setConfig(b)}},applyUsePicker:function(a){if(a==='auto'){a=Ext.os.deviceType==='Phone'}return Boolean(a)},syncEmptyCls:Ext.emptyFn,onMaskTap:function(){if(!this.getDisabled()){this.onFocus()}return !1},updateDisabled:function(b){var a=this.getComponent();if(a){a.setDisabled(b)}Ext.Component.prototype.updateDisabled.apply(this,arguments)},setDisabled:function(){Ext.Component.prototype.setDisabled.apply(this,arguments)},onFocus:function(b){if(this.getDisabled()){return !1}var a=this.getComponent();this.fireEvent('focus',this,b);if(Ext.os.is.Android4){a.input.dom.focus()}a.input.dom.blur();this.isFocused=!0;this.showPicker()},destroy:function(){var a=this;Ext.field.Text.prototype.destroy.call(this);a.tabletPicker=a.phonePicker=Ext.destroy(a.tabletPicker,a.phonePicker)}},0,0,['widget','component','field','textfield'],{'widget':!0,'component':!0,'field':!0,'textfield':!0},0,0,[Ext.field,'Picker'],0);Ext.cmd.derive('Ext.picker.Slot',Ext.dataview.DataView,{isSlot:!0,config:{title:null,showTitle:!0,cls:'x-picker-slot',name:null,value:null,flex:1,align:'left',displayField:'text',valueField:'value',itemTpl:null,scrollable:{x:!1,indicators:!1,momentumEasing:{minVelocity:2},slotSnapEasing:{duration:100}},verticallyCenterItems:!0},constructor:function(){this.selectedIndex=0;Ext.dataview.DataView.prototype.constructor.apply(this,arguments)},applyTitle:function(a){if(a){a=Ext.create('Ext.Component',{cls:'x-picker-slot-title',docked:'top',html:a})}return a},updateTitle:function(a,b){if(a){this.add(a);this.setupBar()}if(b){this.remove(b)}},updateShowTitle:function(b){var a=this.getTitle(),c=b?'show':'hide';if(a){a.on(c,this.setupBar,this,{single:!0,delay:50});a[b?'show':'hide']()}},updateDisplayField:function(a){if(!this.config.itemTpl){this.setItemTpl('<div class="x-picker-item {cls} <tpl if="extra">x-picker-invalid</tpl>">{'+a+'}</div>')}},updateAlign:function(b,c){var a=this.element;a.addCls('x-picker-'+b);a.removeCls('x-picker-'+c)},applyData:function(c){var f=[],e=c&&c.length,d,a,b;if(c&&Ext.isArray(c)&&e){for(d=0;d<e;d++){a=c[d];b={};if(Ext.isArray(a)){b[this.valueField]=a[0];b[this.displayField]=a[1]}else {if(Ext.isString(a)){b[this.valueField]=a;b[this.displayField]=a}else {if(Ext.isObject(a)){b=a}}}f.push(b)}}return c},initialize:function(){Ext.dataview.DataView.prototype.initialize.call(this);var a=this.getScrollable();this.on({scope:this,painted:'onPainted',itemtap:'doItemTap',resize:{fn:'onResize',single:!0}});this.picker.on({scope:this,beforehiddenchange:'onBeforeHiddenChange'});this.element.on({scope:this,touchstart:'onTouchStart',touchend:'onTouchEnd'});a.on({scope:this,scrollend:'onScrollEnd'})},onPainted:function(){this.setupBar()},onResize:function(){var a=this.getValue();if(a){this.doSetValue(a)}},onBeforeHiddenChange:function(b,a){if(!a){this.doSetValue(this.getValue())}},getPicker:function(){if(!this.picker){this.picker=this.getParent()}return this.picker},setupBar:function(){if(!this.rendered){return}var h=this.element,f=this.innerElement,l=this.container.element,i=this.getPicker(),k=i.bar,j=this.getValue(),g=this.getShowTitle(),e=this.getTitle(),d=this.getScrollable(),c=0,a,b;a=k.dom.getBoundingClientRect().height;if(g&&e){c=e.element.getHeight()}b=Math.ceil((h.getHeight()-c-a)/2);if(this.getVerticallyCenterItems()){f.setStyle({padding:b+'px 0 '+b+'px'})}d.refresh();d.setSlotSnapSize(a);this.doSetValue(j)},doItemTap:function(d,c,b,e){var a=this;a.selectedIndex=c;a.selectedNode=b;a.scrollToItem(b,!0)},scrollToItem:function(b,c){var g=b.getY(),d=b.parent(),f=d.getY(),e=this.getScrollable(),a;a=g-f;e.scrollTo(0,a,c)},onTouchStart:function(){this.element.addCls('x-scrolling')},onTouchEnd:function(){this.element.removeCls('x-scrolling')},onScrollEnd:function(f,g,e){var a=this,b=Math.round(e/a.picker.bar.dom.getBoundingClientRect().height),d=a.getViewItems(),c=d[b];if(c){a.selectedIndex=b;a.selectedNode=c;a.fireEvent('slotpick',a,a.getValue(),a.selectedNode)}},getValue:function(d){var b=this.getStore(),a,c;if(!b){return}if(!this.rendered||!d){return this._value}if(this._value===!1){return null}a=b.getAt(this.selectedIndex);c=a?a.get(this.getValueField()):null;return c},setValue:function(a){return this.doSetValue(a)},setValueAnimated:function(a){return this.doSetValue(a,!0)},doSetValue:function(b,g){if(!this.rendered){this._value=b;return}var h=this.getStore(),f=this.getViewItems(),e=this.getValueField(),d=!0,a,c;a=h.findExact(e,b);if(a==-1){d=!1;a=0}c=Ext.get(f[a]);this.selectedIndex=a;if(c){this.scrollToItem(c,g?{duration:100}:!1);if(d){this.select(this.selectedIndex)}}this._value=b}},1,['pickerslot'],['widget','component','container','dataview','pickerslot'],{'widget':!0,'component':!0,'container':!0,'dataview':!0,'pickerslot':!0},['widget.pickerslot'],0,[Ext.picker,'Slot'],0);Ext.cmd.derive('Ext.picker.Picker',Ext.Sheet,{alternateClassName:'Ext.Picker',isPicker:!0,config:{baseCls:'x-picker',doneButton:!0,cancelButton:!0,useTitles:!1,slots:null,value:null,height:220,layout:{type:'hbox',align:'stretch'},centered:!1,left:0,right:0,bottom:0,defaultType:'pickerslot',toolbarPosition:'top',toolbar:{xtype:'titlebar'}},initialize:function(){var c=this,a='x-',b=this.innerElement;this.mask=b.insertFirst({cls:a+'picker-mask'});this.bar=this.mask.createChild({cls:a+'picker-bar'});c.on({scope:this,delegate:'pickerslot',slotpick:'onSlotPick'})},applyToolbar:function(a){if(a===!0){a={}}Ext.applyIf(a,{docked:this.getToolbarPosition()});return Ext.factory(a,'Ext.TitleBar',this.getToolbar())},updateToolbar:function(a,b){if(a){this.add(a)}if(b){this.remove(b)}},applyDoneButton:function(a){if(a){if(Ext.isBoolean(a)){a={}}if(typeof a=='string'){a={text:a}}Ext.applyIf(a,{ui:'action',align:'right',text:'Done'})}return Ext.factory(a,'Ext.Button',this.getDoneButton())},updateDoneButton:function(a,b){var c=this.getToolbar();if(a){c.add(a);a.on('tap',this.onDoneButtonTap,this)}else {if(b){c.remove(b)}}},applyCancelButton:function(a){if(a){if(Ext.isBoolean(a)){a={}}if(typeof a=='string'){a={text:a}}Ext.applyIf(a,{align:'left',text:'Cancel'})}return Ext.factory(a,'Ext.Button',this.getCancelButton())},updateCancelButton:function(a,b){var c=this.getToolbar();if(a){c.add(a);a.on('tap',this.onCancelButtonTap,this)}else {if(b){c.remove(b)}}},updateUseTitles:function(d){var c=this.getInnerItems(),f=c.length,e='x-use-titles',a,b;if(d){this.addCls(e)}else {this.removeCls(e)}for(a=0;a<f;a++){b=c[a];if(b.isSlot){b.setShowTitle(d)}}},applySlots:function(a){if(a){var c=a.length,b;for(b=0;b<c;b++){a[b].picker=this}}return a},updateSlots:function(b){var c='x-',a;this.removeAll();if(b){this.add(b)}a=this.getInnerItems();if(a.length>0){a[0].addCls(c+'first');a[a.length-1].addCls(c+'last')}this.updateUseTitles(this.getUseTitles())},onDoneButtonTap:function(){var b=this._value,a=this.getValue(!0);if(a!=b){this.fireEvent('change',this,a)}this.hide();Ext.util.InputBlocker.unblockInputs()},onCancelButtonTap:function(){this.fireEvent('cancel',this);this.hide();Ext.util.InputBlocker.unblockInputs()},onSlotPick:function(a){this.fireEvent('pick',this,this.getValue(!0),a)},show:function(){if(this.getParent()===undefined){Ext.Viewport.add(this)}Ext.Sheet.prototype.show.apply(this,arguments);if(!this.isHidden()){this.setValue(this._value)}Ext.util.InputBlocker.blockInputs()},setValue:function(b,i){var e=this,d=e.getInnerItems(),j=d.length,h,c,f,a,g;if(!b){b={};for(a=0;a<j;a++){b[d[a].config.name]=null}}for(h in b){c=null;g=b[h];for(a=0;a<d.length;a++){f=d[a];if(f.config.name==h){c=f;break}}if(c){if(i){c.setValueAnimated(g)}else {c.setValue(g)}}}e._values=e._value=b;return e},setValueAnimated:function(a){this.setValue(a,!0)},getValue:function(c){var d={},e=this.getItems().items,f=e.length,a,b;if(c){for(b=0;b<f;b++){a=e[b];if(a&&a.isSlot){d[a.getName()]=a.getValue(c)}}this._values=d}return this._values},getValues:function(){return this.getValue()},destroy:function(){var a=this;Ext.Sheet.prototype.destroy.call(this);a.mask=a.bar=Ext.destroy(a.mask,a.bar)}},0,['picker'],['widget','component','container','panel','sheet','picker'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'sheet':!0,'picker':!0},['widget.picker'],0,[Ext.picker,'Picker',Ext,'Picker'],0);Ext.cmd.derive('Ext.picker.Date',Ext.picker.Picker,{alternateClassName:'Ext.DatePicker',config:{yearFrom:1980,yearTo:(new Date()).getFullYear(),monthText:'Month',dayText:'Day',yearText:'Year',slotOrder:['month','day','year'],doneButton:!0},initialize:function(){Ext.picker.Picker.prototype.initialize.call(this);this.on({scope:this,delegate:'> slot',slotpick:this.onSlotPick});this.on({scope:this,show:this.onSlotPick})},setValue:function(a,b){if(Ext.isDate(a)){a={day:a.getDate(),month:a.getMonth()+1,year:a.getFullYear()}}(arguments.callee.$previous||Ext.picker.Picker.prototype.setValue).call(this,a,b);this.onSlotPick()},getValue:function(i){var a={},h=this.getItems().items,j=h.length,g,b,c,e,d,f;for(f=0;f<j;f++){d=h[f];if(d instanceof Ext.picker.Slot){a[d.getName()]=d.getValue(i)}}if(a.year===null&&a.month===null&&a.day===null){return null}e=Ext.isNumber(a.year)?a.year:1;c=Ext.isNumber(a.month)?a.month:1;b=Ext.isNumber(a.day)?a.day:1;if(c&&e&&c&&b){g=this.getDaysInMonth(c,e)}b=g?Math.min(b,g):b;return new Date(e,c-1,b)},updateYearFrom:function(){if(this.initialized){this.createSlots()}},updateYearTo:function(){if(this.initialized){this.createSlots()}},updateMonthText:function(e,c){var d=this.getInnerItems,f=d.length,a,b;if(this.initialized){for(b=0;b<f;b++){a=d[b];if(typeof a.title=='string'&&a.title==c||a.title.html==c){a.setTitle(e)}}}},updateDayText:function(e,d){var c=this.getInnerItems,f=c.length,a,b;if(this.initialized){for(b=0;b<f;b++){a=c[b];if(typeof a.title=='string'&&a.title==d||a.title.html==d){a.setTitle(e)}}}},updateYearText:function(d){var c=this.getInnerItems,e=c.length,b,a;if(this.initialized){for(a=0;a<e;a++){b=c[a];if(b.title==this.yearText){b.setTitle(d)}}}},constructor:function(){Ext.picker.Picker.prototype.constructor.apply(this,arguments);this.createSlots()},createSlots:function(){var c=this,k=c.getSlotOrder(),b=c.getYearFrom(),e=c.getYearTo(),h=[],i=[],f=[],l=b>e,j,a,d;while(b){h.push({text:b,value:b});if(b===e){break}if(l){b--}else {b++}}d=c.getDaysInMonth(1,(new Date()).getFullYear());for(a=0;a<d;a++){i.push({text:a+1,value:a+1})}for(a=0,j=Ext.Date.monthNames.length;a<j;a++){f.push({text:Ext.Date.monthNames[a],value:a+1})}var g=[];k.forEach(function(a){g.push(c.createSlot(a,i,f,h))});c.setSlots(g)},createSlot:function(a,d,b,c){switch(a){case 'year':return {name:'year',align:'center',data:c,title:this.getYearText(),flex:3};case 'month':return {name:a,align:'right',data:b,title:this.getMonthText(),flex:4};case 'day':return {name:'day',align:'center',data:d,title:this.getDayText(),flex:2};}},onSlotPick:function(){var b=this.getValue(!0),a=this.getDaySlot(),l=b.getFullYear(),j=b.getMonth(),e=[],f,c;if(!b||!Ext.isDate(b)||!a){return}Ext.picker.Picker.prototype.onSlotPick.apply(this,arguments);f=this.getDaysInMonth(j+1,l);for(c=0;c<f;c++){e.push({text:c+1,value:c+1})}if(a.getStore().getCount()==e.length){return}a.getStore().setData(e);var k=a.getStore(),i=a.getViewItems(),h=a.getValueField(),d,g;d=k.find(h,b.getDate());if(d==-1){return}g=Ext.get(i[d]);a.selectedIndex=d;a.scrollToItem(g);a.setValue(a.getValue(!0))},getDaySlot:function(){var c=this.getInnerItems(),d=c.length,b,a;if(this.daySlot){return this.daySlot}for(b=0;b<d;b++){a=c[b];if(a.isSlot&&a.getName()=='day'){this.daySlot=a;return a}}return null},getDaysInMonth:function(a,c){var b=[31,28,31,30,31,30,31,31,30,31,30,31];return a==2&&this.isLeapYear(c)?29:b[a-1]},isLeapYear:function(a){return !!((a&3)===0&&(a%100||a%400===0&&a))},onDoneButtonTap:function(){var b=this._value,a=this.getValue(!0),c=a;if(Ext.isDate(a)){c=a.toDateString()}if(Ext.isDate(b)){b=b.toDateString()}if(c!=b){this.fireEvent('change',this,a)}this.hide();Ext.util.InputBlocker.unblockInputs()}},1,['datepicker'],['widget','component','container','panel','sheet','picker','datepicker'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'sheet':!0,'picker':!0,'datepicker':!0},['widget.datepicker'],0,[Ext.picker,'Date',Ext,'DatePicker'],0);Ext.define('TS.overrides.picker.Date',{override:'Ext.picker.Date',setValue:function(a,b){if(!a){a=new Date()}if(Ext.isDate(a)){a={day:a.getDate(),month:a.getMonth()+1,year:a.getFullYear(),hours:a.getHours(),minutes:a.getMinutes()};this.preservedDate=a}(arguments.callee.$previous||Ext.picker.Picker.prototype.setValue).call(this,a,b);this.onSlotPick()},getValue:function(k){var a={},j=this.getItems().items,l=j.length,g,b,c,e,d,f,h=0,i=0;for(f=0;f<l;f++){d=j[f];if(d instanceof Ext.picker.Slot){a[d.getName()]=d.getValue(k)}}if(a.year===null&&a.month===null&&a.day===null){return null}e=Ext.isNumber(a.year)?a.year:1;c=Ext.isNumber(a.month)?a.month:1;b=Ext.isNumber(a.day)?a.day:1;if(c&&e&&c&&b){g=this.getDaysInMonth(c,e)}b=g?Math.min(b,g):b;if(this.preservedDate){h=this.preservedDate.minutes;i=this.preservedDate.hours}return new Date(e,c-1,b,i,h)}});Ext.cmd.derive('Ext.field.DatePicker',Ext.field.Picker,{alternateClassName:'Ext.form.DatePicker',config:{ui:'select',picker:!0,destroyPickerOnHide:!1,dateFormat:''},applyValue:function(a,b){if(!Ext.isDate(a)){if(a){a=Ext.Date.parse(a,this.getDateFormat())}else {a=null}}if(a&&b&&a.getTime()===b.getTime()){a=undefined}return a},updateValue:function(b,d){var a=this,c=a._picker;if(c&&c.isPicker){c.setValue(b)}if(b!==null){a.getComponent().setValue(Ext.Date.format(b,a.getDateFormat()))}else {a.getComponent().setValue('')}a.fireEvent('change',a,b,d)},applyDateFormat:function(a){return a||Ext.util.Format.defaultDateFormat},updateDateFormat:function(b){var a=this.getValue();if(Ext.isDate(a)){this.getComponent().setValue(Ext.Date.format(a,b))}},getFormattedValue:function(b){var a=this.getValue();return Ext.isDate(a)?Ext.Date.format(a,b||this.getDateFormat()):''},applyPicker:function(b,a){if(a&&a.isPicker){b=a.setConfig(b)}return b},getPicker:function(){var a=this._picker,b=this.getValue();if(a&&!a.isPicker){a=Ext.factory(a,Ext.picker.Date);if(b!==null){a.setValue(b)}}a.on({scope:this,change:'onPickerChange',hide:'onPickerHide'});this._picker=a;return a},onPickerChange:function(d,b){var a=this,c=a.getValue();a.setValue(b);a.fireEvent('select',a,b)},onPickerHide:function(){var a=this,b=a.getPicker();if(a.getDestroyPickerOnHide()&&b){b.destroy();a._picker=a.getInitialConfig().picker||!0}},reset:function(){this.setValue(this.originalValue)},onFocus:function(b){var a=this.getComponent();this.fireEvent('focus',this,b);if(Ext.os.is.Android4){a.input.dom.focus()}a.input.dom.blur();if(this.getReadOnly()){return !1}this.isFocused=!0;this.getPicker().show()},destroy:function(){var a=this._picker;if(a&&a.isPicker){a.destroy()}Ext.field.Picker.prototype.destroy.call(this)}},0,['datepickerfield'],['widget','component','field','textfield','datepickerfield'],{'widget':!0,'component':!0,'field':!0,'textfield':!0,'datepickerfield':!0},['widget.datepickerfield'],0,[Ext.field,'DatePicker',Ext.form,'DatePicker'],0);Ext.cmd.derive('Ext.field.Email',Ext.field.Text,{alternateClassName:'Ext.form.Email',config:{component:{type:'email'},autoCapitalize:!1}},0,['emailfield'],['widget','component','field','textfield','emailfield'],{'widget':!0,'component':!0,'field':!0,'textfield':!0,'emailfield':!0},['widget.emailfield'],0,[Ext.field,'Email',Ext.form,'Email'],0);Ext.cmd.derive('Ext.field.FileInput',Ext.field.Input,{config:{type:'file',accept:null,capture:null,name:null,multiple:!1},captureLookup:{video:'camcorder',image:'camera',audio:'microphone'},initialize:function(){var a=this;Ext.field.Input.prototype.initialize.call(this);a.input.on({scope:a,change:'onInputChange'})},getValue:function(){var a=this.input;if(a){this._value=a.dom.value}return this._value},setValue:function(b){var a=this._value;this._value=b;if(String(this._value)!=String(a)&&this.initialized){this.onChange(this,this._value,a)}return this},getFiles:function(){var a=this.input;if(a){this.$files=a.dom.files}return this.$files},onInputChange:function(a){this.setValue(a.target.value)},onChange:function(c,b,a){this.fireEvent('change',c,b,a)},applyName:function(a){if(this.getMultiple()&&a.substr(-2,2)!=='[]'){a+='[]'}else {if(!this.getMultiple()&&a.substr(-2,2)==='[]'){a=a.substr(0,a.length-2)}}return a},applyMultiple:function(a){this.updateFieldAttribute('multiple',a?'':null);return a},updateMultiple:function(){var a=this.getName();if(!Ext.isEmpty(a)){this.setName(a)}},applyAccept:function(a){switch(a){case 'video':case 'audio':case 'image':a=a+'/*';break;}this.updateFieldAttribute('accept',a)},applyCapture:function(a){this.updateFieldAttribute('capture',a);return a}},0,['fileinput'],['widget','component','input','fileinput'],{'widget':!0,'component':!0,'input':!0,'fileinput':!0},['widget.fileinput'],0,[Ext.field,'FileInput'],0);Ext.cmd.derive('Ext.field.File',Ext.field.Field,{config:{component:{xtype:'fileinput',fastFocus:!1}},proxyConfig:{name:null,value:null,files:null,multiple:!1,accept:null,capture:null},isFile:!0,initialize:function(){var a=this;Ext.field.Field.prototype.initialize.call(this);a.getComponent().on({scope:this,change:'onChange'})},onChange:function(c,b,a){c.fireEvent('change',this,b,a)}},0,['filefield'],['widget','component','field','filefield'],{'widget':!0,'component':!0,'field':!0,'filefield':!0},['widget.filefield'],0,[Ext.field,'File'],0);Ext.cmd.derive('Ext.field.Hidden',Ext.field.Text,{alternateClassName:'Ext.form.Hidden',config:{component:{xtype:'input',type:'hidden'},ui:'hidden',hidden:!0,tabIndex:-1}},0,['hiddenfield'],['widget','component','field','textfield','hiddenfield'],{'widget':!0,'component':!0,'field':!0,'textfield':!0,'hiddenfield':!0},['widget.hiddenfield'],0,[Ext.field,'Hidden',Ext.form,'Hidden'],0);Ext.cmd.derive('Ext.field.Number',Ext.field.Text,{alternateClassName:'Ext.form.Number',config:{component:{type:'number'},ui:'number'},proxyConfig:{minValue:null,maxValue:null,stepValue:null},applyPlaceHolder:function(a){this._enableNumericPlaceHolderHack=!Ext.feature.has.NumericInputPlaceHolder&&!Ext.isEmpty(a);return a},onFocus:function(a){if(this._enableNumericPlaceHolderHack){this.getComponent().input.dom.setAttribute('type','number')}Ext.field.Text.prototype.onFocus.apply(this,arguments)},onBlur:function(a){if(this._enableNumericPlaceHolderHack){this.getComponent().input.dom.setAttribute('type','text')}Ext.field.Text.prototype.onBlur.apply(this,arguments)},doInitValue:function(){var a=this.getInitialConfig().value;if(a){a=this.applyValue(a)}this.originalValue=a},applyValue:function(a){var c=this.getMinValue(),b=this.getMaxValue();if(Ext.isNumber(c)&&Ext.isNumber(a)){a=Math.max(a,c)}if(Ext.isNumber(b)&&Ext.isNumber(a)){a=Math.min(a,b)}a=parseFloat(a);return isNaN(a)?'':a},getValue:function(){var a=parseFloat((arguments.callee.$previous||Ext.field.Text.prototype.getValue).call(this),10);return isNaN(a)?null:a},doClearIconTap:function(a,b){a.getComponent().setValue('');a.getValue();a.hideClearIcon()}},0,['numberfield'],['widget','component','field','textfield','numberfield'],{'widget':!0,'component':!0,'field':!0,'textfield':!0,'numberfield':!0},['widget.numberfield'],0,[Ext.field,'Number',Ext.form,'Number'],0);Ext.cmd.derive('Ext.field.Radio',Ext.field.Checkbox,{alternateClassName:'Ext.form.Radio',isRadio:!0,config:{ui:'radio',component:{type:'radio',cls:'x-input-radio'}},getValue:function(){return this._value===undefined?null:this._value},setValue:function(a){this._value=a;return this},getSubmitValue:function(){var a=this._value;if(a===undefined||a===null){a=!0}return this.getChecked()?a:null},updateChecked:function(b,c){var a=this;Ext.field.Checkbox.prototype.updateChecked.call(this,b,c);if(a.initialized&&b){a.refreshGroupValues(a)}},onMaskTap:function(b,d){var a=this,c=a.getComponent().input.dom;if(a.getDisabled()){return !1}a.setChecked(!0);return !1},getGroupValue:function(){var c=this.getSameGroupFields(),d=c.length,b=0,a;for(;b<d;b++){a=c[b];if(a.getChecked()){return a.getValue()}}return null},setGroupValue:function(d){var c=this.getSameGroupFields(),e=c.length,b=0,a;for(;b<e;b++){a=c[b];if(a.getValue()===d){a.setChecked(!0);return a}}},refreshGroupValues:function(d){var c=this.getSameGroupFields(),e=c.length,b=0,a;for(;b<e;b++){a=c[b];if(a!==d){a.setChecked(!1)}}}},0,['radiofield'],['widget','component','field','checkboxfield','radiofield'],{'widget':!0,'component':!0,'field':!0,'checkboxfield':!0,'radiofield':!0},['widget.radiofield'],0,[Ext.field,'Radio',Ext.form,'Radio'],0);Ext.cmd.derive('Ext.field.Select',Ext.field.Picker,{alternateClassName:'Ext.form.Select',config:{ui:'select',valueField:'value',displayField:'text',store:null,options:null,hiddenName:null,autoSelect:!0,name:'picker',selection:null},twoWayBindable:{selection:1},publishes:{selection:1},applyValue:function(a){var d=this,e=a,c,b;d.getOptions();b=d.getStore();if((a||a===0)&&!a.isModel&&b){c=b.find(d.getValueField(),a,null,null,null,!0);if(c===-1){c=b.find(d.getDisplayField(),a,null,null,null,!0)}e=b.getAt(c)}return e},updateValue:function(b,e){var a=this,d=a.getComponent(),c='';if(b===null||b&&b.isModel){a.settingSelection=!0;a.setSelection(b);a.settingSelection=!1;if(b){c=b.get(a.getDisplayField())}}if(d){d.setValue(c)}if(a.initialized){a.fireEvent('change',a,b,e)}},getValue:function(){var a=this.getSelection();return a?a.get(this.getValueField()):null},applySelection:function(a){return a||null},updateSelection:function(a){if(!this.settingSelection){this.setValue(a?a.get(this.getValueField()):null)}},scrollToSelection:function(){var c=this,d=c.getTabletPicker(),b=d.down('list'),a=c.getSelection();if(a&&b.listItems.length){b.scrollToRecord(a)}},getPhonePicker:function(){var a=this,b=a.phonePicker,c;if(!b){c=a.getDefaultPhonePickerConfig();a.phonePicker=b=Ext.create('Ext.picker.Picker',Ext.apply({slots:[{align:a.getPickerSlotAlign(),name:a.getName(),valueField:a.getValueField(),displayField:a.getDisplayField(),value:a.getValue(),store:a.getStore()}],listeners:{change:a.onPickerChange,scope:a}},c))}return b},getTabletPicker:function(){var a=this,b=a.tabletPicker,c;if(!b){c=a.getDefaultTabletPickerConfig();a.tabletPicker=b=Ext.create('Ext.Panel',Ext.apply({left:0,top:0,modal:!0,cls:'x-select-overlay',layout:'fit',hideOnMaskTap:!0,width:Ext.os.is.Phone?'14em':'18em',height:Ext.os.is.BlackBerry&&Ext.os.version.getMajor()===10?'12em':Ext.os.is.Phone?'12.5em':'22em',listeners:{resize:{fn:'onTabletPickerResize',single:!0},hiddenchange:'onTabletPickerHiddenChange',scope:a},items:{xtype:'list',store:a.getStore(),itemTpl:'<span class="x-list-label">{'+a.getDisplayField()+':htmlEncode}</span>',listeners:{select:a.onListSelect,itemtap:a.onListTap,scope:a}}},c))}return b},showPicker:function(){var a=this,c=a.getStore(),f=a.getValue(),b,i,d,g,h,e;if(!c||c.getCount()===0){return}if(a.getReadOnly()){return}a.isFocused=!0;if(a.getUsePicker()){b=a.getPhonePicker();i=a.getName();d={};d[i]=f;b.setValue(d);if(!b.getParent()){Ext.Viewport.add(b)}b.show()}else {b=a.getTabletPicker();g=b.down('list');if(!b.getParent()){Ext.Viewport.add(b)}b.showBy(a.getComponent(),null);if(f||a.getAutoSelect()){c=g.getStore();h=c.find(a.getValueField(),f,null,null,null,!0);e=c.getAt(h);if(e){g.select(e,null,!0)}}}},onListSelect:function(c,a){var b=this;if(a){b.setValue(a)}},onTabletPickerResize:function(){this.scrollToSelection()},onTabletPickerHiddenChange:function(b,a){if(!a){this.scrollToSelection()}},onListTap:function(){this.tabletPicker.hide({type:'fade',out:!0,scope:this})},onPickerChange:function(g,f){var a=this,c=f[a.getName()],b=a.getStore(),e=b.find(a.getValueField(),c,null,null,null,!0),d=b.getAt(e);a.setValue(d)},updateOptions:function(b){var a=this.getStore();if(!a){this.setStore(!0);a=this._store}if(!b){a.clearData()}else {a.setData(b);this.onStoreDataChanged(a)}return this},applyStore:function(a){if(a===!0){a=Ext.create('Ext.data.Store',{fields:[this.getValueField(),this.getDisplayField()],autoDestroy:!0})}if(a){a=Ext.data.StoreManager.lookup(a)}return a},updateStore:function(a,c){var b=this,d=b.tabletPicker,e=b.phonePicker;if(c&&c.getAutoDestroy()){c.destroy()}if(a){a.on({scope:this,add:'onStoreDataChanged',remove:'onStoreDataChanged',update:'onStoreDataChanged',refresh:'onStoreDataChanged'});b.onStoreDataChanged(a)}if(b.getUsePicker()&&e){e.down('pickerslot').setStore(a)}else {if(d){d.down('dataview').setStore(a)}}},onStoreDataChanged:function(c){var b=this.getInitialConfig(),a=this.getValue();if(a||a===0){this.setValue(a)}if(this.getValue()===null){if(b.hasOwnProperty('value')){this.setValue(b.value)}if(this.getValue()===null&&this.getAutoSelect()){if(c.getCount()>0){this.setValue(c.getAt(0))}}}},reset:function(){var a=this,d,e,c,b;if(a.getAutoSelect()){e=a.getStore();d=a.originalValue?a.originalValue:e.getAt(0)}else {c=a.getUsePicker();b=c?a.phonePicker:a.tabletPicker;if(b){b=b.child(c?'pickerslot':'dataview');b.deselectAll()}d=null}a.setValue(d);return a},destroy:function(){var a=this.getStore();if(a&&a.getAutoDestroy()){a.destroy()}Ext.field.Picker.prototype.destroy.call(this)}},0,['selectfield'],['widget','component','field','textfield','selectfield'],{'widget':!0,'component':!0,'field':!0,'textfield':!0,'selectfield':!0},['widget.selectfield'],0,[Ext.field,'Select',Ext.form,'Select'],0);Ext.define('TS.overrides.field.Select',{override:'Ext.field.Select',compatibility:'6.0.2',applyValue:function(a){var c=(arguments.callee.$previous||Ext.field.Picker.prototype.applyValue).apply(this,arguments),b=this.getStore();if(c===null&&!b.isLoaded()){this.getInitialConfig().value=a}if(!b&&(a||a===0)){this.cachedValue=a}if(b&&b.isLoading){this.cachedValue=a}return c},publishState:function(b,a){var d=this,e=d.getBind(),c=e&&b&&e[b];if(c&&!c.syncing&&!c.isReadOnly()){if(!(c.calls===0&&(a==null||a===d.getInitialConfig()[b]))){if(a instanceof Ext.data.Model){a=a.get(d.getValueField())}}}(arguments.callee.$previous||Ext.field.Picker.prototype.publishState).call(this,b,a)},onStoreDataChanged:function(d){var a=this,c=a.getInitialConfig(),b=a.getValue();if(a.cachedValue){a.setValue(a.cachedValue);a.cachedValue=null}else {if(b||b===0){a.setValue(b)}}if(a.getValue()===null){if(a.cachedValue||a.cachedValue===0){a.setValue(a.cachedValue);a.cachedValue=null}else {if(c.hasOwnProperty('value')){a.setValue(c.value)}}if(a.getValue()===null&&a.getAutoSelect()){if(d.getCount()>0){a.setValue(d.getAt(0))}}}}});Ext.cmd.derive('Ext.form.FieldSet',Ext.Container,{config:{baseCls:'x-form-fieldset',title:null,instructions:null},applyTitle:function(a){if(typeof a=='string'){a={title:a}}Ext.applyIf(a,{docked:'top',baseCls:this.getBaseCls()+'-title'});return Ext.factory(a,Ext.Title,this._title)},updateTitle:function(a,b){if(a){this.add(a)}if(b){this.remove(b)}},getTitle:function(){var a=this._title;if(a&&a instanceof Ext.Title){return a.getTitle()}return a},applyInstructions:function(a){if(typeof a=='string'){a={title:a}}Ext.applyIf(a,{docked:'bottom',baseCls:this.getBaseCls()+'-instructions'});return Ext.factory(a,Ext.Title,this._instructions)},updateInstructions:function(a,b){if(a){this.add(a)}if(b){this.remove(b)}},getInstructions:function(){var a=this._instructions;if(a&&a instanceof Ext.Title){return a.getTitle()}return a},updateDisabled:function(a){this.getFieldsAsArray().forEach(function(b){b.setDisabled(a)});return this},getFieldsAsArray:function(){var b=[],a=function(c){if(c.isField){b.push(c)}if(c.isContainer){c.getItems().each(a)}};this.getItems().each(a);return b}},0,['fieldset'],['widget','component','container','fieldset'],{'widget':!0,'component':!0,'container':!0,'fieldset':!0},['widget.fieldset'],0,[Ext.form,'FieldSet'],0);Ext.cmd.derive('Ext.form.Panel',Ext.Panel,{alternateClassName:'Ext.form.FormPanel',config:{baseCls:'x-form',standardSubmit:!1,url:null,enctype:null,baseParams:null,submitOnAction:!1,record:null,method:'post',scrollable:!0,trackResetOnLoad:!1,api:null,paramOrder:null,paramsAsHash:null,timeout:30,multipartDetection:!0,enableSubmissionForm:!0},getElementConfig:function(){var a=Ext.Panel.prototype.getElementConfig.call(this);a.tag='form';a.children.push({tag:'input',type:'submit',style:'visibility: hidden; width: 0; height: 0; position: absolute; right: 0; bottom: 0;'});return a},initialize:function(){var a=this;Ext.Panel.prototype.initialize.call(this);a.element.on({submit:'onSubmit',scope:a})},applyEnctype:function(b){var a=this.element.dom||null;if(a){if(b){a.setAttribute('enctype',b)}else {a.setAttribute('enctype')}}},updateRecord:function(c){var d,b,a;if(c){b=this.getValues();for(a in b){if(b.hasOwnProperty(a)&&c.getField(a)){c.set(a,b[a])}}}return this},setRecord:function(a){var b=this;if(a&&a.data){b.setValues(a.data)}b._record=a;return this},onSubmit:function(a){var b=this;if(a&&!b.getStandardSubmit()){a.stopEvent()}else {this.submit(null,a)}},updateSubmitOnAction:function(a){if(a){this.on({action:'onFieldAction',scope:this})}else {this.un({action:'onFieldAction',scope:this})}},onFieldAction:function(a){if(this.getSubmitOnAction()){a.blur();this.submit()}},submit:function(b,e){b=b||{};var a=this,d=a.getValues(a.getStandardSubmit()||!b.submitDisabled),c=a.element.dom||{};if(this.getEnableSubmissionForm()){c=this.createSubmissionForm(c,d)}b=Ext.apply({url:a.getUrl()||c.action,submit:!1,form:c,method:a.getMethod()||c.method||'post',autoAbort:!1,params:null,waitMsg:null,headers:null,success:null,failure:null},b||{});return a.fireAction('beforesubmit',[a,d,b,e],'doBeforeSubmit',null,null,'after')},createSubmissionForm:function(a,h){var f=this.getFields(),e,b,d,c,g;if(a.nodeType===1){a=a.cloneNode(!1);for(e in h){b=document.createElement('input');b.setAttribute('type','text');b.setAttribute('name',e);b.setAttribute('value',h[e]);a.appendChild(b)}}for(e in f){if(f.hasOwnProperty(e)){d=f[e];if(d.isFile){if(!a.$fileswap){a.$fileswap=[]}g=d.getComponent().input;c=g.dom;b=c.cloneNode(!0);c.parentNode.insertBefore(b,c.nextSibling);a.appendChild(c);a.$fileswap.push({original:c,placeholder:b})}else {if(d.isPassword){if(d.getComponent().getType!=='password'){d.setRevealed(!1)}}}}}return a},doBeforeSubmit:function(b,r,a){var c=a.form||{},l=!1;if(this.getMultipartDetection()===!0){this.getFieldsAsArray().forEach(function(c){if(c.isFile===!0){l=!0;return !1}});if(l){c.setAttribute('enctype','multipart/form-data')}}if(a.enctype){c.setAttribute('enctype',a.enctype)}if(b.getStandardSubmit()){if(a.url&&Ext.isEmpty(c.action)){c.action=a.url}var n=this.query('spinnerfield'),q=n.length,h,j;for(h=0;h<q;h++){j=n[h];if(!j.getDisabled()){j.getComponent().setDisabled(!1)}}c.method=(a.method||c.method).toLowerCase();c.submit()}else {var k=b.getApi(),p=a.url||b.getUrl(),o=a.scope||b,g=a.waitMsg,f=function(c,d){if(Ext.isFunction(a.failure)){a.failure.call(o,b,c,d)}b.fireEvent('exception',b,c)},m=function(c,d){if(Ext.isFunction(a.success)){a.success.call(a.scope||b,b,c,d)}b.fireEvent('submit',b,c)},e;if(a.waitMsg){if(typeof g==='string'){g={xtype:'loadmask',message:g}}b.setMasked(g)}if(k){e=k.submit;if(typeof e==='string'){e=Ext.direct.Manager.parseMethod(e);if(e){k.submit=e}}if(e){return e(this.element,function(c,d,e){b.setMasked(!1);if(e){if(c.success){m(d,c)}else {f(d,c)}}else {f(d,c)}},this)}}else {var d=Ext.merge({},{url:p,timeout:this.getTimeout()*1000,form:c,scope:b},a);delete d.success;delete d.failure;d.params=Ext.merge(b.getBaseParams()||{},a.params);d.header=Ext.apply({'Content-Type':'application/x-www-form-urlencoded; charset=UTF-8'},a.headers||{});d.callback=function(n,g,d){var l=this,e=d.responseText,k=d.responseXML,i=Ext.data.request.Ajax.parseStatus(d.status,d);if(c.$fileswap){var j,h;Ext.each(c.$fileswap,function(c){j=c.original;h=c.placeholder;h.parentNode.insertBefore(j,h.nextSibling);h.parentNode.removeChild(h)});c.$fileswap=null;delete c.$fileswap}l.setMasked(!1);if(d.success===!1){g=!1}if(g){if(i&&e&&e.length===0){g=!0}else {if(!Ext.isEmpty(d.responseBytes)){g=i.success}else {if(Ext.isString(e)&&d.request.options.responseType==='text'){d.success=!0}else {if(Ext.isString(e)){try{d=Ext.decode(e)}catch(s){d.success=!1;d.error=s;d.message=s.message}}else {if(Ext.isSimpleObject(e)){d=e;Ext.applyIf(d,{success:!0})}}}if(d.success&&!Ext.isEmpty(k)){d.success=!0}g=!!d.success}}if(g){m(d,e)}else {f(d,e)}}else {f(d,e)}};if(Ext.feature.has.XHR2&&d.xhr2){delete d.form;var i=new FormData(c);if(d.params){Ext.iterate(d.params,function(d,c){if(Ext.isArray(c)){Ext.each(c,function(e){i.append(d,e)})}else {i.append(d,c)}});delete d.params}d.formData=i}return Ext.Ajax.request(d)}}},load:function(b){b=b||{};var a=this,g=a.getApi(),j=a.getUrl()||b.url,d=b.waitMsg,h=function(c,d){a.setValues(d.data);if(Ext.isFunction(b.success)){b.success.call(b.scope||a,a,c,d)}a.fireEvent('load',a,c)},e=function(c,d){if(Ext.isFunction(b.failure)){b.failure.call(scope,a,c,d)}a.fireEvent('exception',a,c)},c,i,f;if(b.waitMsg){if(typeof d==='string'){d={xtype:'loadmask',message:d}}a.setMasked(d)}if(g){c=g.load;if(typeof c==='string'){c=Ext.direct.Manager.parseMethod(c);if(c){g.load=c}}if(c){i=c.directCfg.method;f=i.getArgs(a.getParams(b.params),a.getParamOrder(),a.getParamsAsHash());f.push(function(d,c,f){a.setMasked(!1);if(f){h(c,d)}else {e(c,d)}},a);return c.apply(window,f)}}else {if(j){return Ext.Ajax.request({url:j,timeout:(b.timeout||this.getTimeout())*1000,method:b.method||'GET',autoAbort:b.autoAbort,headers:Ext.apply({'Content-Type':'application/x-www-form-urlencoded; charset=UTF-8'},b.headers||{}),callback:function(i,f,c){var d=c.responseText,g=Ext.data.request.Ajax.parseStatus(c.status,c);a.setMasked(!1);if(f){if(g&&d.length===0){f=!0}else {c=Ext.decode(d);f=!!c.success}if(f){h(c,d)}else {e(c,d)}}else {e(c,d)}}})}}},getParams:function(a){return Ext.apply({},a,this.getBaseParams())},setValues:function(d){var h=this.getFields(),i=this,f,a,b,g,e,c;d=d||{};for(f in d){if(d.hasOwnProperty(f)){a=h[f];b=d[f];if(a){if(Ext.isArray(a)){g=a.length;for(e=0;e<g;e++){c=a[e];if(c.isRadio){c.setGroupValue(b);break}else {if(c.isCheckbox){if(Ext.isArray(b)){c.setChecked(b.indexOf(c._value)!=-1)}else {c.setChecked(b==c._value)}}else {if(Ext.isArray(b)){c.setValue(b[e])}}}}}else {if(a.isRadio||a.isCheckbox){a.setChecked(b)}else {a.setValue(b)}}if(i.getTrackResetOnLoad()){a.resetOriginalValue()}}}}return this},getValues:function(k,l){var i=this.getFields(),c={},h=Ext.isArray,d,b,g,a,e,j,f;g=function(d,e){if(!l&&(!e||e==='null')||d.isFile){return}if(d.isCheckbox){b=d.getSubmitValue()}else {b=d.getValue()}if(!(k&&d.getDisabled())){if(d.isRadio){if(d.isChecked()){c[e]=b}}else {a=c[e];if(!Ext.isEmpty(a)){if(!h(a)){a=c[e]=[a]}if(h(b)){a=c[e]=a.concat(b)}else {a.push(b)}}else {c[e]=b}}}};for(e in i){if(i.hasOwnProperty(e)){d=i[e];if(h(d)){j=d.length;for(f=0;f<j;f++){g(d[f],e)}}else {g(d,e)}}}return c},reset:function(){this.getFieldsAsArray().forEach(function(a){a.reset()});return this},updateDisabled:function(a){this.getFieldsAsArray().forEach(function(b){b.setDisabled(a)});return this},getFieldsAsArray:function(){var b=[],a=function(c){if(c.isField){b.push(c)}if(c.isContainer){c.getItems().each(a)}};this.getItems().each(a);return b},getFields:function(c){var b={},a;var d=function(e){if(e.isField){a=e.getName();if(c&&a==c||typeof c=='undefined'){if(b.hasOwnProperty(a)){if(!Ext.isArray(b[a])){b[a]=[b[a]]}b[a].push(e)}else {b[a]=e}}}if(e.isContainer){e.items.each(d)}};this.getItems().each(d);return c?b[c]||[]:b},getFieldsArray:function(){var b=[];var a=function(c){if(c.isField){b.push(c)}if(c.isContainer){c.items.each(a)}};this.items.each(a);return b},getFieldsFromItem:Ext.emptyFn,showMask:function(a,b){a=Ext.isObject(a)?a.message:a;if(a){this.setMasked({xtype:'loadmask',message:a})}else {this.setMasked(!0)}return this},hideMask:function(){this.setMasked(!1);return this},getFocusedField:function(){var c=this.getFieldsArray(),d=c.length,b,a;for(a=0;a<d;a++){b=c[a];if(b.isFocused){return b}}return null},getNextField:function(){var b=this.getFieldsArray(),c=this.getFocusedField(),a;if(c){a=b.indexOf(c);if(a!==b.length-1){a++;return b[a]}}return !1},focusNextField:function(){var a=this.getNextField();if(a){a.focus();return a}return !1},getPreviousField:function(){var c=this.getFieldsArray(),b=this.getFocusedField(),a;if(b){a=c.indexOf(b);if(a!==0){a--;return c[a]}}return !1},focusPreviousField:function(){var a=this.getPreviousField();if(a){a.focus();return a}return !1}},0,['formpanel'],['widget','component','container','panel','formpanel'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'formpanel':!0},['widget.formpanel'],0,[Ext.form,'Panel',Ext.form,'FormPanel'],0);Ext.define('TS.overrides.form.Panel',{override:'Ext.form.Panel',resetDirtyState:function(){this.getForm().isDirty=function(){return !1}}});Ext.define('TS.overrides.form.Panel',{override:'Ext.form.Panel',isValid:function(){return !0},getForm:function(){return this}});Ext.cmd.derive('Ext.grid.cell.Base',Ext.Widget,{cachedConfig:{align:null,cls:null,hidden:!1,innerCls:null},config:{column:null,record:null,value:null},element:{reference:'element',cls:'x-grid-cell',children:[{reference:'innerElement',cls:'x-grid-cell-inner'}]},defaultBindProperty:'value',hiddenCls:'x-grid-cell-hidden',getComputedWidth:function(){return this.getHidden()?0:this.getWidth()},updateAlign:function(c,b){var a='x-grid-cell-align-';this.element.replaceCls(a+b,a+c)},updateCls:function(b,a){this.element.replaceCls(a,b)},updateInnerCls:function(b,a){if(b||a){this.innerElement.replaceCls(a,b)}},updateColumn:function(a){this.dataIndex=a?a.getDataIndex():null},applyHidden:function(a){return Boolean(a)},updateHidden:function(a){this.element.toggleCls(this.hiddenCls,a)},updateRecord:function(b){var a=this.dataIndex;if(b&&a){this.setValue(b.get(a))}},destroy:function(){this.setColumn(null);this.setRecord(null);Ext.Widget.prototype.destroy.call(this)}},0,0,['widget'],{'widget':!0},0,0,[Ext.grid.cell,'Base'],0);Ext.cmd.derive('Ext.grid.cell.Text',Ext.grid.cell.Base,{config:{encodeHtml:!0,rawValue:null},updateRawValue:function(a){var b=this.innerElement.dom;if(this.getEncodeHtml()){b.textContent=a}else {b.innerHTML=a}},updateValue:function(){this.writeValue()},writeValue:function(){this.setRawValue(this.getValue())}},0,['textcell'],['widget','textcell'],{'widget':!0,'textcell':!0},['widget.textcell'],0,[Ext.grid.cell,'Text'],0);Ext.cmd.derive('Ext.grid.cell.Cell',Ext.grid.cell.Text,{updateRecord:function(b,k){var c=this,a=c.getColumn(),d,j,e,f,h,g,i;if(b&&a){j=a.getTpl();e=a.getRenderer();if(j){f=j.apply(b.getData(!0));g=!0}else {if(e){d=c.dataIndex;i=d?b.get(d):undefined;h=a.getScope();if(typeof e==='function'){f=e.call(h||a,i,b,d,c,a)}else {f=Ext.callback(e,h,[i,b,d,c,a],0,c)}g=!0}}if(g){c.setRawValue(f);return}}Ext.grid.cell.Text.prototype.updateRecord.call(this,b,k)}},0,['gridcell'],['widget','textcell','gridcell'],{'widget':!0,'textcell':!0,'gridcell':!0},['widget.gridcell'],0,[Ext.grid.cell,'Cell'],0);Ext.cmd.derive('Ext.grid.Row',Ext.Component,{config:{baseCls:'x-grid-row',header:{xtype:'component',cls:'x-grid-header',html:' '},grid:null},constructor:function(a){this.cells=[];this.columnMap={};Ext.Component.prototype.constructor.call(this,a)},applyHeader:function(a){if(a&&!a.isComponent){a=Ext.factory(a,Ext.Component,this.getHeader())}return a},updateHeader:function(b,a){if(a){a.destroy()}},updateGrid:function(c){var e=this,a,b,d;if(c){b=c.getColumns();for(a=0,d=b.length;a<d;a++){e.addColumn(b[a])}}},addColumn:function(a){this.insertColumn(this.cells.length,a)},getRefItems:function(){return this.cells},insertColumn:function(d,e){var c=this,b=c.cells,a=c.createCell(e);if(d===b.length){c.element.appendChild(a.element);b.push(a)}else {a.element.insertBefore(b[d].element);b.splice(d,0,a)}c.columnMap[e.getId()]=a},moveColumn:function(e,c,b){var a=this.cells,d=a[c];Ext.Array.move(a,c,b);if(b===a.length-1){this.element.appendChild(d.element)}else {d.element.insertBefore(a[b+1].element)}},removeColumn:function(e){var d=this,b=d.columnMap,c=e.getId(),a=b[c];if(a){Ext.Array.remove(d.cells,a);delete b[c];a.destroy()}},updateRecord:function(a){if(!a){return}var d=this.cells,e=d.length,c,b;for(c=0;c<e;++c){b=d[c];if(b.getRecord()===a){b.updateRecord(a)}else {b.setRecord(a)}}},setColumnWidth:function(b,c){var a=this.getCellByColumn(b);if(a){a.setWidth(c)}},showColumn:function(a){this.setCellHidden(a,!1)},hideColumn:function(a){this.setCellHidden(a,!0)},getCellByColumn:function(a){return this.columnMap[a.getId()]},getColumnByCell:function(a){return a.getColumn()},destroy:function(){var a=this;a.cells=Ext.destroy(a.cells,a.getHeader());a.setRecord(null);Ext.Component.prototype.destroy.call(this)},privates:{createCell:function(b){var a=this.getCellCfg(b);a.$initParent=this;a=Ext.create(a);delete a.$initParent;return a},getCellCfg:function(a){return Ext.apply({parent:this,column:a,align:a.getAlign(),record:this.getRecord(),hidden:a.getHidden(),width:a.getComputedWidth()},a.getCell())},setCellHidden:function(b,c){var a=this.getCellByColumn(b);if(a){a.setHidden(c)}}}},1,['gridrow'],['widget','component','gridrow'],{'widget':!0,'component':!0,'gridrow':!0},['widget.gridrow'],[[Ext.mixin.Queryable.prototype.mixinId||Ext.mixin.Queryable.$className,Ext.mixin.Queryable]],[Ext.grid,'Row'],0);Ext.cmd.derive('Ext.grid.column.Column',Ext.Component,{alternateClassName:'Ext.grid.column.Template',config:{align:'left',cell:{xtype:'gridcell'},dataIndex:null,text:'&nbsp;',sortable:!0,groupable:!0,resizable:!0,hideable:!0,renderer:!1,scope:null,editable:!1,editor:null,defaultEditor:{xtype:'textfield',required:!0},ignore:!1,summaryType:null,summaryRenderer:null,minWidth:40,baseCls:'x-grid-column',sortedCls:'x-column-sorted',sortDirection:null,tpl:null,computedWidth:null},getElementConfig:function(){return {reference:'element',children:[{reference:'trigger',className:'x-grid-column-trigger'},{reference:'resizer',className:'x-grid-column-resizer'}]}},applyTpl:function(a){if(!a||!a.isXTemplate){a=new Ext.XTemplate(a)}return a},updateAlign:function(a,c){var b='x-grid-column-align-';if(c){this.removeCls(b+a)}if(a){this.addCls(b+a)}},initialize:function(){Ext.Component.prototype.initialize.call(this);this.element.on({tap:'onColumnTap',longpress:'onColumnLongPress',scope:this})},onColumnTap:function(a){this.fireEvent('tap',this,a)},onColumnLongPress:function(a){this.fireEvent('longpress',this,a)},updateResizable:function(a){this.resizer.toggleCls('x-grid-column-resizable',a)},updateText:function(a){this.setHtml(a||'&#160;')},updateWidth:function(a,b){Ext.Component.prototype.updateWidth.call(this,a,b);if(a!==null){this.setComputedWidth(a)}},updateFlex:function(c,d){var a=this,b=a.resizeListener;Ext.Component.prototype.updateFlex.call(this,c,d);if(!c){a.resizeListener=Ext.destroy(b)}else {if(!b){a.resizeListener=a.on('resize',a.onFlexResize,a,{destroyable:!0})}}},onFlexResize:function(){this.setComputedWidth(this.element.getWidth(!1,!0))},getComputedWidth:function(){return this.isVisible(!0)?(arguments.callee.$previous||Ext.Component.prototype.getComputedWidth).call(this):0},updateComputedWidth:function(b,a){this.fireEvent('columnresize',this,b,a)},updateDataIndex:function(a){var b=this.getEditor();if(b){b.name=a}else {this.getDefaultEditor().name=a}},updateSortDirection:function(b,a){if(!this.getSortable()){return}var c=this.getSortedCls();if(a){this.element.removeCls(c+'-'+a.toLowerCase())}if(b){this.element.addCls(c+'-'+b.toLowerCase())}this.fireEvent('sort',this,b,a)},destroy:function(){this.resizeListener=Ext.destroy(this.resizeListener);Ext.Component.prototype.destroy.call(this)}},0,['column','templatecolumn'],['widget','component','column','templatecolumn'],{'widget':!0,'component':!0,'column':!0,'templatecolumn':!0},['widget.column','widget.templatecolumn'],0,[Ext.grid.column,'Column',Ext.grid.column,'Template'],0);Ext.cmd.derive('Ext.grid.cell.Date',Ext.grid.cell.Text,{config:{format:''},updateColumn:function(a,c){Ext.grid.cell.Text.prototype.updateColumn.call(this,a,c);if(a){var b=a.getFormat();if(b!==null){this.setFormat(b)}}},applyFormat:function(a){return a||Ext.Date.defaultFormat},updateFormat:function(a){if(!this.isConfiguring){this.writeValue()}},writeValue:function(){var a=this.getValue();this.setRawValue(a?Ext.Date.format(a,this.getFormat()):null)}},0,['datecell'],['widget','textcell','datecell'],{'widget':!0,'textcell':!0,'datecell':!0},['widget.datecell'],0,[Ext.grid.cell,'Date'],0);Ext.cmd.derive('Ext.grid.column.Date',Ext.grid.column.Column,{config:{format:null,cell:{xtype:'datecell'}}},0,['datecolumn'],['widget','component','column','templatecolumn','datecolumn'],{'widget':!0,'component':!0,'column':!0,'templatecolumn':!0,'datecolumn':!0},['widget.datecolumn'],0,[Ext.grid.column,'Date'],0);Ext.cmd.derive('Ext.grid.HeaderContainer',Ext.Container,{config:{baseCls:'x-grid-header-container',docked:'top',defaultType:'column',layout:{type:'hbox',align:'stretch'},sortable:!0,scrollable:{autoRefresh:null,x:!1,y:!1},grid:null},initialize:function(){var a=this;a.columns=[];Ext.Container.prototype.initialize.call(this);a.on({tap:'onHeaderTap',columnresize:'onColumnResize',show:'onColumnShow',hide:'onColumnHide',sort:'onColumnSort',scope:a,delegate:'column'});a.on({show:'onGroupShow',hide:'onGroupHide',add:'onColumnAdd',move:'onColumnMove',remove:'onColumnRemove',scope:a,delegate:'gridheadergroup'});a.on({add:'onColumnAdd',move:'onColumnMove',remove:'onColumnRemove',scope:a})},factoryItem:function(a){if(a.columns){return Ext.factory(a,Ext.grid.HeaderGroup)}return Ext.Container.prototype.factoryItem.call(this,a)},getColumns:function(){return this.columns},getAbsoluteColumnIndex:function(e){var f=this.getInnerItems(),g=f.length,a=0,d,c,b;for(c=0;c<g;c++){b=f[c];if(b===e){return a}else {if(b.isHeaderGroup){d=b.innerIndexOf(e);if(d!==-1){a+=d;return a}else {a+=b.getInnerItems().length}}else {a+=1}}}},onColumnAdd:function(h,a){var b=this,f=b.columns,e=b.getAbsoluteColumnIndex(a),d,g,c;if(a.isHeaderGroup){d=a.getItems().items;for(c=0,g=d.length;c<g;c++){f.splice(e+c,0,d[c]);b.fireEvent('columnadd',b,d[c],a)}}else {f.splice(e,0,a);b.fireEvent('columnadd',b,a,null)}},onColumnMove:function(m,d){var e=this,h=e.columns,f=e.getAbsoluteColumnIndex(d),i,k,c,j,l,g,a,b;if(d.isHeaderGroup){i=d.getItems().items;for(c=0,k=i.length;c<k;c++){j=i[c];if(c===0){g=h.indexOf(j);l=g-f<0}if(l){b=f+k-1;a=g}else {a=g+c;b=f+c}Ext.Array.move(h,a,b);e.fireEvent('columnmove',e,j,d,a,b)}}else {a=h.indexOf(d);b=f;Ext.Array.move(h,a,b);e.fireEvent('columnmove',e,d,null,a,b)}},onColumnRemove:function(e,b){if(b.isHeaderGroup){var c=b.getItems().items,d=c.length,a;for(a=0;a<d;a++){Ext.Array.remove(this.columns,c[a]);this.fireEvent('columnremove',this,c[a])}}else {Ext.Array.remove(this.columns,b);this.fireEvent('columnremove',this,b)}},onHeaderTap:function(a){if(this.getSortable()&&!a.getIgnore()&&a.getSortable()){var b=a.getSortDirection()||'DESC',c=b==='DESC'?'ASC':'DESC';a.setSortDirection(c)}this.fireEvent('columntap',this,a)},onColumnShow:function(a){this.fireEvent('columnshow',this,a)},onColumnHide:function(a){this.fireEvent('columnhide',this,a)},onGroupShow:function(d){var c=d.getInnerItems(),e=c.length,a,b;for(a=0;a<e;a++){b=c[a];if(!b.isHidden()){this.fireEvent('columnshow',this,b)}}},onGroupHide:function(d){var b=d.getInnerItems(),e=b.length,a,c;for(a=0;a<e;a++){c=b[a];this.fireEvent('columnhide',this,c)}},onColumnResize:function(b,c,a){this.fireEvent('columnresize',this,b,c,a)},onColumnSort:function(c,a,b){if(a!==null){this.fireEvent('columnsort',this,c,a,b)}},scrollTo:function(a){this.getScrollable().scrollTo(a)},setTotalWidth:function(c){var a=this.getScrollable(),b;if(a&&a.isTouchScroller){b=a.getInnerElement();if(b){b.setWidth(c);a.setSize({x:c,y:a.getSize().y})}}},destroy:function(){var a=this,b=a.spacerTask;if(b){b.cancel();a.spacerTask=null}a.setGrid(null);Ext.Container.prototype.destroy.call(this)},privates:{updateSpacer:function(){var a=this,b=a.spacerTask;if(!b){a.spacerTask=b=new Ext.util.DelayedTask(a.doUpdateSpacer,a)}b.delay(1)},doUpdateSpacer:function(){var a=this.getGrid().getScrollable();this.element.setStyle('padding-right',a.getScrollbarSize().width+'px')}}},0,['headercontainer'],['widget','component','container','headercontainer'],{'widget':!0,'component':!0,'container':!0,'headercontainer':!0},['widget.headercontainer'],0,[Ext.grid,'HeaderContainer'],0);Ext.cmd.derive('Ext.grid.HeaderGroup',Ext.Container,{isHeaderGroup:!0,config:{text:'&nbsp;',columns:null,items:undefined,defaultType:'column',baseCls:'x-grid-headergroup',hidden:!0,layout:{type:'hbox',align:'stretch'}},getElementConfig:function(){return {reference:'element',classList:['x-container','x-unsized'],children:[{reference:'textElement',className:'x-grid-headergroup-text'},{reference:'innerElement',className:'x-inner'}]}},applyItems:function(a,b){if(!a){a=this.getColumns()}Ext.Container.prototype.applyItems.call(this,a,b)},updateText:function(a){this.textElement.setHtml(a)},initialize:function(){var a=this;a.on({add:'doVisibilityCheck',remove:'doVisibilityCheck',show:'onColumnShow',hide:'onColumnHide',delegate:'> column',scope:'this'});a.on({show:'onShow',scope:'this'});Ext.Container.prototype.initialize.call(this);a.doVisibilityCheck()},onColumnShow:function(a){if(this.getVisibleCount()===this.getInnerItems().length){this.show()}},onColumnHide:function(a){if(this.getVisibleCount()===0){this.hide()}},onShow:function(){var a;if(!this.getVisibleCount()){a=this.getComponent(0);if(a){a.show()}}},doVisibilityCheck:function(){var a=this,c=a.getInnerItems(),e=c.length,b,d;for(b=0;b<e;b++){d=c[b];if(!d.isHidden()){if(a.isHidden()){if(a.initialized){a.show()}else {a.setHidden(!1)}}return}}a.hide()},destroy:function(){this.setColumns(null);Ext.Container.prototype.destroy.call(this)},privates:{getVisibleCount:function(){var b=this.getInnerItems(),d=b.length,c=0,a;for(a=0;a<d;++a){c+=b[a].isHidden()?0:1}return c}}},0,['gridheadergroup'],['widget','component','container','gridheadergroup'],{'widget':!0,'component':!0,'container':!0,'gridheadergroup':!0},['widget.gridheadergroup'],0,[Ext.grid,'HeaderGroup'],0);Ext.cmd.derive('Ext.grid.Grid',Ext.dataview.List,{config:{defaultType:'gridrow',infinite:!0,columns:null,baseCls:'x-grid',variableHeights:!1,headerContainer:{xtype:'headercontainer'},hideHeaders:!1,striped:!0,itemCls:'x-list-item',scrollToTopOnRefresh:!1,titleBar:{xtype:'titlebar',docked:'top'},title:''},customScrollCls:'x-scroll-scroller-has-width',getElementConfig:function(){var a=Ext.dataview.List.prototype.getElementConfig.call(this);a.children.push({reference:'resizeMarker',className:'x-grid-resize-marker',hidden:!0});return a},initialize:function(){var a=this,e=a.getTitleBar(),c=a.getHeaderContainer(),d=a.getScrollable(),b;Ext.dataview.List.prototype.initialize.call(this);if(d){c.getScrollable().addPartner(d,'x')}b=a.container;if(e){b.add(a.getTitleBar())}b.add(c);a.scrollElement.addCls(a.customScrollCls)},applyTitleBar:function(a){if(a&&!a.isComponent){a=Ext.factory(a,Ext.TitleBar)}return a},updateTitle:function(b){var a=this.getTitleBar();if(a){if(b){a.setTitle(b)}else {a.hide()}}},applyHeaderContainer:function(a){if(a&&!a.isComponent){a=Ext.factory(a,Ext.grid.HeaderContainer)}return a},updateHeaderContainer:function(a,c){var b=this;if(c){c.un({columnsort:'onColumnSort',columnresize:'onColumnResize',columnshow:'onColumnShow',columnhide:'onColumnHide',columnadd:'onColumnAdd',columnmove:'onColumnMove',columnremove:'onColumnRemove',scope:b})}if(a){a.on({columnsort:'onColumnSort',columnresize:'onColumnResize',columnshow:'onColumnShow',columnhide:'onColumnHide',columnadd:'onColumnAdd',columnmove:'onColumnMove',columnremove:'onColumnRemove',scope:b});a.setGrid(b)}},updateHideHeaders:function(a){var b=this.getHeaderContainer(),c=this.oldCtHeight||null;if(!a&&b.getHeight()!==0){return}if(a){this.oldCtHeight=b.getHeight()}b.setHeight(a?0:c)},addColumn:function(a){return this.getHeaderContainer().add(a)},removeColumn:function(a){return this.getHeaderContainer().remove(a)},insertColumn:function(b,a){return this.getHeaderContainer().insert(b,a)},onColumnAdd:function(h,d){var a=this,e,g,c,b,f;if(a.initialized&&!a.destroying){e=this.listItems;g=e.length;c=h.getColumns().indexOf(d);for(b=0;b<g;b++){f=e[b];f.insertColumn(c,d)}a.updateTotalColumnWidth();a.fireEvent('columnadd',a,d,c)}},onColumnMove:function(i,e,j,d,f){var a=this,c,h,b,g;if(a.initialized&&!a.destroying){c=a.listItems;h=c.length;for(b=0;b<h;b++){g=c[b];g.moveColumn(e,d,f)}a.fireEvent('columnmove',a,e,d,f)}},onColumnRemove:function(g,d){var a=this,c,f,b,e;if(a.initialized&&!a.destroying){c=a.listItems;f=c.length;for(b=0;b<f;b++){e=c[b];e.removeColumn(d)}a.updateTotalColumnWidth();a.fireEvent('columnremove',a,d)}},updateColumns:function(a){if(a&&a.length){var c=a.length,b;for(b=0;b<c;b++){this.addColumn(a[b])}this.updateTotalColumnWidth()}},getColumns:function(){return this.getHeaderContainer().getColumns()},onColumnResize:function(i,c,e,g){var a=this,d=a.listItems,h=d.length,b,f;if(!a.destroying){for(b=0;b<h;b++){f=d[b];f.setColumnWidth(c,e)}if(a.initialized){a.updateTotalColumnWidth();if(g!==null&&!c.getHidden()){a.fireEvent('columnresize',a,c,e)}}}},onColumnShow:function(h,b){var a=this,d,g,c,e,f;if(a.initialized&&!a.destroying){d=a.listItems;g=d.length;a.updateTotalColumnWidth();if(!b.getFlex()){f=b.getWidth()}for(c=0;c<g;c++){e=d[c];e.showColumn(b);if(f!==undefined){e.setColumnWidth(b,f)}}a.fireEvent('columnshow',a,b)}},onColumnHide:function(g,d){var a=this,c,f,b,e;if(a.initialized&&!a.destroying){c=a.listItems;f=c.length;a.updateTotalColumnWidth();for(b=0;b<f;b++){e=c[b];e.hideColumn(d)}a.fireEvent('columnhide',a,d)}},onColumnSort:function(e,b,d){var a=this,c=a.sortedColumn;if(c&&c!==b){c.setSortDirection(null)}a.sortedColumn=b;a.getStore().sort(b.getDataIndex(),d);a.fireEvent('columnsort',a,b,d)},refreshScroller:function(a){Ext.dataview.List.prototype.refreshScroller.call(this,a);this.getHeaderContainer().updateSpacer()},getTotalColumnWidth:function(){var g=this,e=g.getColumns(),f=e.length,d=0,b,a,c;for(b=0;b<f;b++){a=e[b];c=a.getParent();if(!a.isHidden()&&(!c.isHeaderGroup||!c.isHidden())){d+=a.getComputedWidth()}}return d},updateTotalColumnWidth:function(){var b=this,c=b.getScrollable(),a=this.getTotalColumnWidth(),d=b.getHeaderContainer();b.scrollElement.setWidth(a);d.setTotalWidth(a);d.updateSpacer();c.setSize({x:a,y:c.getSize().y})},createItem:function(a){a.grid=this;return Ext.dataview.List.prototype.createItem.call(this,a)},destroy:function(){this.destroying=!0;Ext.dataview.List.prototype.destroy.call(this);this.destroying=!1}},0,['grid'],['widget','component','container','dataview','list','grid'],{'widget':!0,'component':!0,'container':!0,'dataview':!0,'list':!0,'grid':!0},['widget.grid'],0,[Ext.grid,'Grid'],0);Ext.define('TS.overrides.grid.Grid',{override:'Ext.grid.Grid',compatibility:'6.0.2',initialize:function(){var a=this,c,f=a.getTitleBar(),d=a.getHeaderContainer(),e=a.getScrollable(),b;(arguments.callee.$previous||Ext.dataview.List.prototype.initialize).call(this);if(e){d.getScrollable().addPartner(e,'x')}b=a.container;if(f){b.add(a.getTitleBar())}b.add(d);a.scrollElement.addCls(a.customScrollCls);c=a.getStore();if(c){c.on({add:'adjustSize',scope:a})}},adjustSize:function(b){var a=this;if(b.getCount()===1){a.onContainerResize(a.container,{height:a.container.element.getHeight()})}}});Ext.cmd.derive('Ext.grid.cell.Widget',Ext.grid.cell.Base,{config:{widget:null},applyWidget:function(a){if(a){var b=this.getParent();if(b&&!b.isSpecialRow){a=Ext.apply({parent:this},a);a=Ext.widget(a)}else {a=undefined}}return a},updateWidget:function(b,a){if(a){a.destroy()}if(b){this.innerElement.appendChild(b.element)}},updateValue:function(c){var b=this.getWidget(),a;if(b){a=b.defaultBindProperty;if(a){b.setConfig(a,c)}}},destroy:function(){this.setWidget(null);Ext.grid.cell.Base.prototype.destroy.call(this)}},0,['widgetcell'],['widget','widgetcell'],{'widget':!0,'widgetcell':!0},['widget.widgetcell'],0,[Ext.grid.cell,'Widget'],0);Ext.cmd.derive('Ext.grid.plugin.Editable',Ext.Component,{config:{grid:null,triggerEvent:'doubletap',formConfig:null,defaultFormConfig:{xtype:'formpanel',modal:!0,scrollable:!0,items:{xtype:'fieldset'}},toolbarConfig:{xtype:'titlebar',docked:'top',items:[{xtype:'button',ui:'decline',text:'Cancel',align:'left',action:'cancel'},{xtype:'button',ui:'confirm',text:'Submit',align:'right',action:'submit'}]},enableDeleteButton:!0},init:function(a){this.setGrid(a)},updateGrid:function(c,b){var a=this.getTriggerEvent();if(b){b.renderElement.un(a,'onTrigger',this)}if(c){c.renderElement.on(a,'onTrigger',this)}},onCancelTap:function(){var b=this,a=b.form.getRecord(),c=b.getGrid();if(a.phantom&&!a.dirty){c.getStore().remove(a)}this.sheet.hide()},onSubmitTap:function(){var a=this;a.form.getRecord().set(a.form.getValues());a.sheet.hide()},onSheetHide:function(){this.sheet.destroy();this.form=null;this.sheet=null},getRecordByTriggerEvent:function(c){var b=c.getTarget('.x-grid-row'),a;if(b){a=Ext.getCmp(b.id);if(a){return a.getRecord()}}return null},getEditorFields:function(d){var e=[],f=d.length,b,a,c;for(b=0;b<f;b++){a=d[b];if(a.getEditable()){c=Ext.apply({},a.getEditor()||a.getDefaultEditor());c.label=a.getText();e.push(c)}}return e},onTrigger:function(j){var a=this,f=a.getGrid(),g=a.getFormConfig(),i=a.getToolbarConfig(),e=a.getRecordByTriggerEvent(j),h,b,d,c;if(e){if(g){this.form=b=Ext.factory(g,Ext.form.Panel)}else {this.form=b=Ext.factory(a.getDefaultFormConfig());h=a.getEditorFields(f.getColumns());b.down('fieldset').setItems(h)}b.setRecord(e);c=Ext.factory(i,Ext.form.TitleBar);c.down('button[action=cancel]').on('tap','onCancelTap',this);c.down('button[action=submit]').on('tap','onSubmitTap',this);this.sheet=d=f.add({xtype:'sheet',items:[c,b],hideOnMaskTap:!0,enter:'right',exit:'right',right:0,width:320,layout:'fit',stretchY:!0,hidden:!0});if(a.getEnableDeleteButton()){b.add({xtype:'button',itemId:'deleteButton',text:'Delete',ui:'decline',margin:10,handler:function(){f.getStore().remove(e);d.hide()}})}d.on('hide','onSheetHide',this);d.show()}}},0,0,['widget','component'],{'widget':!0,'component':!0},['plugin.grideditable'],0,[Ext.grid.plugin,'Editable'],0);Ext.cmd.derive('TS.Messages',Ext.Base,{singleton:!0,prompts:{notAuthorizedForApplication:{title:'Not Authorized',message:'User not authorized for '},cancelledLicenseAgreement:{title:'Non-Agreement',message:'No access to application until accepting the terms in the license agreement.'},sessionTimeout:{title:'Session Timeout',message:'Session has timed out. Please log in again.'},fwaSubmitSuccess:{title:'Successfully Submitted',message:'FWA has been successfully submitted.'},fwaSubmitNoChiefSig:{title:'Submission Failure',message:"This FWA cannot be submitted without the party chief's signature."},fwaSaveSuccess:{title:'Successfully Saved',message:'FWA has been successfully saved.'},fwaAddressSuccess:{title:'Successfully Saved',message:'FWA location has been successfully saved.'},fwaStartWorkSuccess:{title:'Successfully Started',message:'FWA work has been started.'},fwaStopWorkSuccess:{title:'Successfully Stopped',message:'FWA work has been stopped.'},crewDelete:{title:'Crew Delete',message:'Are you sure you want to delete this crew?'},timesheetCopySuccess:{title:'Timesheet Copied',message:'Timesheet has been successfully copied.'},timesheetRequireSelect:{title:'Select Timesheet',message:'You must select a timesheet to copy.'},timesheetRequireSelectApprovals:{title:'Select Timesheet',message:'You must select a timesheet before viewing approvals.'},timesheetSaveSuccess:{title:'Sucessfully Saved',message:'Timesheet has been successfully saved.'},timesheetSubmitSuccess:{title:'Success',message:'Timesheet successfully submitted.'},expenseSubmitSuccess:{title:'Successfully Submitted',message:'Expense Report has been successfully submitted.'},expenseSaveSuccess:{title:'Successfully Saved',message:'Expense Report has been successfully saved.'},sendEmailSuccess:{title:'Success',message:'Email successfully sent.'},sendSmsSuccess:{title:'Success',message:'Text successfully sent.'},sendEmailMissingFields:{title:'Required Fields',message:'Please enter missing required fields.'},noPrintTemplate:{title:'Warning',message:'No printing template selected.'},timesheetApproveSuccess:{title:'Success',message:'Timesheet has been approved.'},timesheetRejectSuccess:{title:'Success',message:'Timesheet has been rejected.'},confirmApproval:{title:'Please Confirm',message:'Are you sure you want to approve this?'},confirmSubmission:{title:'Please Confirm',message:'Are you sure you want to submit?'},rejectionCommentRequired:{title:'Missing Comment',message:'Comments are required when rejecting a timesheet.'},expenseApproveSuccess:{title:'Success',message:'Expense has been approved.'},expenseRejectSuccess:{title:'Success',message:'Expense has been rejected.'},unsavedChanges:{title:'Unsaved Changes',message:'You have unsaved changes. Do you want to discard your changes and continue?'},settingsSaved:{title:'Successfully Saved',message:'Settings have been successfully saved.'},viewportInitError:{title:'URL Error',message:'An invalid entry was entered for the URL "app" parameter ('+Ext.Object.fromQueryString(location.search).app+').'},viewportInitErrorScheduler:{title:'URL Error',message:Ext.Object.fromQueryString(location.search).app+' is not compatible on mobile at this time.'},submitWithoutApproval:{title:'Submit without Client Approval?',message:'This FWA requires a client signature, but does not have one. Do you still want to submit?'},onDeleteCrew:{title:'Crew Delete',message:'Are you sure you want to delete this crew?'},formUnsaved:{title:'Unsaved Changes',message:'You have unsaved changes. Do you want to discard your changes and continue?'},tsSubmitPinBadField:{title:'Incorrect PIN',message:'You have entered an incorrect PIN, please try again.'},approveTimeSheet:{title:'Please Confirm',message:'Are you sure you want to approve this?'},timesheetSaved:{title:'Success',message:'Timesheet successfully saved.'},submitTimesheet:{title:'Please Confirm',message:'Are you sure you want to submit?'},timesheetRowUnsaved:{title:'Unsaved Changes',message:'You have unsaved changes. Do you want to discard your changes and continue?'},confirmSubmit:{title:'Please Confirm',message:'Are you sure you want to save your changes and submit?'},checkPinMissingFields:{title:'PIN Error',message:'Missing or illegal PIN'},globalSettingsLoadError:{title:'Critical Failure',message:'Unable to load global settings from server. Contact support.'}},loaders:{savingFwa:'Saving FWA...'},phrases:{FailedRemoteAPI:'Failed to load remote API.',UnknownError:'Unknown Error - Please Contact Support',FailedUpdate:'Failed to perform update.',AvailableEmployeesFor:'Available employees for',SelectInitialTimesheet:'Please select an initial timesheet.',OnlyImageFilesAllowed:'Only Image files allowed',SubmitWithoutClientApproval:'Submit without Client Approval?',RequireClientApprovalConfirm:'This FWA requires a client signature, but does not have one. Do you still want to submit?'},words:[{submitted:'submitted'},{successfully:'successfully'},{Start:'Start'},{Stop:'Stop'},{Open:'Open'},{Copy:'Copy'},{NewCrew:'New Crew'},{Upload:'Upload'},{Message:'Message'}],getByCode:function(b){var a=this.prompts[b]||this.loaders[b];if(!a){return !1}else {return a}},getReadOnlyMessage:function(a){Ext.Msg.show({title:'FYI',message:'Selected record is read only. </br>'+a,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})},getSimpleAlertMessage:function(b){var a=this.getByCode(b);Ext.Msg.show({title:a.title,message:a.message,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO})}},0,0,0,0,0,0,[TS,'Messages'],0);Ext.define('TS.overrides.grid.plugin.Editable',{override:'Ext.grid.plugin.Editable',config:{disableSubmitBt:!1},startEdit:function(a){this.onTrigger(null,a)},onTrigger:function(s,j){var b=this,d=TS.app.settings,c=b.getGrid(),e=b.getFormConfig(),q=b.getToolbarConfig(),a=j&&j instanceof Ext.data.Model?j:b.getRecordByTriggerEvent(s),p=c.getParent().getViewModel()||c.getParent().getParent().getViewModel(),o=p.get('selectedFWA'),k=o._hours.getRange(),n,f,h,g,i,l=0;d.isLoading=!0;if(!a){return}if(Ext.first('#addButton')){Ext.first('#addButton').setDisabled(!0)}if(Ext.first('fwa-managehours')){if(!d.justSaved){Ext.first('fwa-managehours').lookup('workCodeDateBar').setHidden(!0)}else {d.justSaved=!1}}else {if(Ext.first('fwa-manageunits')){if(!d.justSaved){Ext.first('fwa-manageunits').lookup('unitDateBar').setHidden(!0)}else {d.justSaved=!1}}else {if(Ext.first('fwa-manageexpenses')){if(!a.get('amountPerMile')){a.set('amountPerMile',d.exMileageRate)}}}}if(k&&a){Ext.each(k,function(b){if(b.get('workCodeId')==a.get('workCodeId')){l+=b.get('regHrs')+b.get('ovtHrs')+b.get('ovt2Hrs')+b.get('travelHrs')}})}if(a){if(e){b.form=f=Ext.factory(e,Ext.form.Panel)}else {b.form=f=Ext.factory(b.getDefaultFormConfig());n=b.getEditorFields(c.getColumns());f.down('fieldset').setItems(n)}f.setRecord(a);g=Ext.factory(q,Ext.form.TitleBar);g.down('button[action=cancel]').on('tap','onCancelTap',b);i=g.down('button[action=submit]');i.on('tap','onSubmitTap',b);i.setDisabled(b.getDisableSubmitBt());b.sheet=h=c.add({xtype:'sheet',items:[g,f],hideOnMaskTap:!0,enter:'right',exit:'right',width:'100%',right:0,layout:'fit',stretchY:!0,hidden:!0});if(b.getEnableDeleteButton()&&c.getReference()!='templateGrid'){f.add({xtype:'button',text:'Delete',itemId:'deleteButton',ui:'decline',docked:'bottom',margin:10,handler:function(){var d=l>0,b=TS.app.settings;if(d&&a.get('actualHours')){Ext.Msg.alert('Warning',b.fwaAbbrevLabel+' Hours have been entered for '+b.workCodeLabel+' '+a.get('workCodeAbbrev')+' and cannot be deleted.')}else {if(c.referenceKey=='hoursGrid'||c.referenceKey=='expensesGrid'){a.set('modified','D');c.getStore().addFilter({filterFn:function(a){return a.get('modified')!=='D'}})}else {c.getStore().remove(a)}o.dirty=!0;h.hide()}}});if(c.getReference()=='workCodeGrid'){Ext.first('#deleteButton').setText('Remove '+d.workCodeLabel)}else {if(c.getReference()=='unitCodeGrid'){Ext.first('#deleteButton').setText('Remove '+d.unitLabel+' for this Date')}else {if(c.getReference()=='hoursGrid'){Ext.first('#deleteButton').setText('Remove Employee for this Date')}}}}if(a.get('unitCodeId')&&e){var b=this,m=Ext.getStore('UnitCode').getById(a.get('unitCodeId')),r=m&&m.get('requireDetail')!='M'||a.get('unitCodeId')==''?!0:!1;b.form.down('button[action=showUnitDetails]').setHidden(r)}h.on('hide','onSheetHide',b);h.show();if((a.get('regHrs')||a.get('ovtHrs')||a.get('ovt2Hrs')||a.get('travelHrs'))&&a.get('readOnly')&&e){TS.Messages.getReadOnlyMessage(a.get('readOnlyReason'));b.setHoursReadOnly()}if(a.get('unitCodeId')&&a.get('readOnly')&&e){TS.Messages.getReadOnlyMessage(a.get('readOnlyReason'));b.setUnitsReadOnly()}if(a.get('dtDate')&&p.get('selectedUnit').get('readOnly')&&e){b.setUnitDetailsReadOnly()}}d.isLoading=!1},getRecordByTriggerEvent:function(f){var b=this,d=b.getGrid(),e=d.getParent().getViewModel(),c=f.getTarget('.x-grid-row'),a;if(c){a=Ext.getCmp(c.id);if(a){if(a.getRecord().get('readOnly')||a.getRecord().get('dtDate')&&e.get('selectedUnit').get('readOnly')){b.setEnableDeleteButton(!1);b.setDisableSubmitBt(!0)}else {b.setEnableDeleteButton(!0);b.setDisableSubmitBt(!1)}return a.getRecord()}}return null},setHoursReadOnly:function(){Ext.first('#hoursWorkDate').setReadOnly(!0);Ext.first('#empGroupSelect').setReadOnly(!0);Ext.first('#hoursEmpName').setReadOnly(!0);Ext.first('#hoursCrewRole').setReadOnly(!0);Ext.first('#workCodeGridEditColumn').setReadOnly(!0);Ext.first('#hoursRegHrs').setReadOnly(!0);Ext.first('#hoursOvtHrs').setReadOnly(!0);Ext.first('#hoursOvt2Hrs').setReadOnly(!0);Ext.first('#hoursTravelHrs').setReadOnly(!0);Ext.first('#hoursComments').setReadOnly(!0)},setUnitsReadOnly:function(){Ext.first('#unitDate').setReadOnly(!0);Ext.first('#unitCodeCombo').setReadOnly(!0);Ext.first('#unitCodeName').setDisabled(!0);Ext.first('#quantity').setReadOnly(!0);Ext.first('#unitEquipmentId').setReadOnly(!0);Ext.first('#equipmentName').setReadOnly(!0);Ext.first('#unitComments').setReadOnly(!0)},setUnitDetailsReadOnly:function(){Ext.first('#unitDetailDate').setReadOnly(!0);Ext.first('#unitDetailFrom').setReadOnly(!0);Ext.first('#unitDetailTo').setReadOnly(!0);Ext.first('#unitDetailLValue1').setReadOnly(!0);Ext.first('#unitDetailLValue2').setReadOnly(!0);Ext.first('#unitDetailLValue3').setReadOnly(!0);Ext.first('#unitDetailSValue1').setReadOnly(!0)},disableSubmit:function(b){var a=this;if(a.form){a.form.down('button[action=submit]').setDisabled(b)}else {a.setDisableSubmitBt(b)}},hideDeleteButton:function(a){var b=this;b.setEnableDeleteButton(a)},setPhotoRequiredHidden:function(a){var b=this;b.getFormConfig().items[7].hidden=!a;b.setPhotoRequiredTextHidden(a)},setPhotoRequiredTextHidden:function(a){var b=this;b.getFormConfig().items[7].hidden=a},hidePhotoButton:function(a){var b=this;b.getFormConfig().items[8].hidden=a;b.getFormConfig().items[9].hidden=a},setActualHrsReadOnly:function(a){var b=this;b.getFormConfig().items[3].readOnly=a},setScheduledHrsReadOnly:function(a){var b=this;b.getFormConfig().items[2].readOnly=a},setActualHrsHidden:function(a){var b=this;b.getFormConfig().items[3].hidden=a},setPercentCompleteHidden:function(a){var b=this;b.getFormConfig().items[5].hidden=a},disableEmployeeHours:function(a){var b=this},hideOvtHrs:function(a){var b=this;b.getFormConfig().items[6].items[1].hidden=a},hideOvt2Hrs:function(a){var b=this;b.getFormConfig().items[6].items[2].hidden=a},hideTravelHrs:function(a){var b=this;b.getFormConfig().items[6].items[3].hidden=a},hideWorkCode:function(a){var b=this;b.getFormConfig().items[4].hidden=a},hideDetails:function(a){var b=this;b.getFormConfig().items[8].hidden=a},hideExpAccounts:function(a){var b=this;b.getFormConfig().items[10].hidden=a;b.getFormConfig().items[11].hidden=a},hideExpBillable:function(a){var b=this;b.getFormConfig().items[12].hidden=a},hideExpFields:function(b){var a=this;a.getFormConfig().items.find(function(a){return a.name=='wbs1Container'}).items.find(function(a){return a.name=='wbs1'}).hidden=a.hideExpWbs1(b);a.getFormConfig().items.find(function(a){return a.name=='wbs1Container'}).items.find(function(a){return a.name=='projectButton'}).hidden=a.hideExpWbs1(b);a.getFormConfig().items.find(function(a){return a.name=='wbs1name'}).hidden=a.hideExpWbs1Name(b);a.getFormConfig().items.find(function(a){return a.name=='wbs2'}).hidden=a.hideExpWbs2(b);a.getFormConfig().items.find(function(a){return a.name=='wbs2name'}).hidden=a.hideExpWbs2Name(b);a.getFormConfig().items.find(function(a){return a.name=='wbs3'}).hidden=a.hideExpWbs3(b);a.getFormConfig().items.find(function(a){return a.name=='wbs3name'}).hidden=a.hideExpWbs3Name(b);a.getFormConfig().items.find(function(a){return a.name=='account'}).hidden=a.hideAccount(b);a.getFormConfig().items.find(function(a){return a.name=='accountname'}).hidden=a.hideAccountName(b)},modifyFwaExpFields:function(a){var b=this;b.getFormConfig().items.find(function(b){return b.name=='expDate'}).disabled=!a.exCanModifyFwaExp;b.getFormConfig().items.find(function(b){return b.name=='category'}).disabled=!a.exCanModifyFwaExp;b.getFormConfig().items.find(function(b){return b.name=='amount'}).disabled=!a.exCanModifyFwaExp;b.getFormConfig().items.find(function(b){return b.name=='wbs1Container'}).items.find(function(b){return b.name=='wbs1'}).disabled=!a.exCanModifyFwaExp;b.getFormConfig().items.find(function(b){return b.name=='wbs1Container'}).items.find(function(b){return b.name=='projectButton'}).disabled=!a.exCanModifyFwaExp;b.getFormConfig().items.find(function(b){return b.name=='wbs1name'}).disabled=!a.exCanModifyFwaExp;b.getFormConfig().items.find(function(b){return b.name=='wbs2'}).disabled=!a.exCanModifyFwaExp;b.getFormConfig().items.find(function(b){return b.name=='wbs2name'}).disabled=!a.exCanModifyFwaExp;b.getFormConfig().items.find(function(b){return b.name=='wbs3'}).disabled=!a.exCanModifyFwaExp;b.getFormConfig().items.find(function(b){return b.name=='wbs3name'}).disabled=!a.exCanModifyFwaExp;b.getFormConfig().items.find(function(b){return b.name=='account'}).disabled=!a.exCanModifyFwaExp;b.getFormConfig().items.find(function(b){return b.name=='reason'}).disabled=!a.exCanModifyFwaExp;b.getFormConfig().items.find(function(b){return b.name=='other'}).disabled=!a.exCanModifyFwaExp;b.getFormConfig().items.find(function(b){return b.name=='billable'}).disabled=!a.exCanModifyFwaExp;b.getFormConfig().items.find(function(b){return b.name=='companyPaid'}).disabled=!a.exCanModifyFwaExp;b.getFormConfig().items.find(function(b){return b.name=='miles'}).disabled=!a.exCanModifyFwaExp;b.getFormConfig().items.find(function(b){return b.name=='amountPerMile'}).disabled=!a.exCanModifyFwaExp},canModifyFwaExp:function(b){var a=this,c=a.getToolbarConfig();a.getFormConfig().items.find(function(a){return a.name=='wbs2'}).hidden=b;a.form.down('button[action=submit]').setDisabled(!b)},onSubmitTap:function(x){var b=this,d=TS.app.settings,a=b.form.getValues(),v=d.chiefRoleIds.indexOf('^'+a.crewRoleId+'^')>-1,w=b.getGrid().getParent().getViewModel()||b.getGrid().getParent().getParent().getViewModel(),l=w.get('selectedFWA'),k=b.getGrid(),p=d.fwaChiefDataFlowToCrew=='N',q=d.fwaChiefDataFlowToCrew=='H'||d.fwaChiefDataFlowToCrew=='B',o=d.fwaChiefDataFlowToCrew=='C'||d.fwaChiefDataFlowToCrew=='B',c,m=!1,f,e,i,h=0,j=a.workCodeId,n,g,r=Ext.getStore('Employees');if(k.getReference()=='workCodeGrid'&&!j){Ext.Msg.alert('Warning','A '+d.workCodeLabel+' is required to be selected. Either select a code or click Cancel to continue');return}r.clearFilter();if(Ext.first('#empGroupSelect')){Ext.first('#empGroupSelect').setValue('')}a.dirty=!0;if(a.unitCodeId){var t=Ext.getStore('UnitCode').getById(a.unitCodeId),s=t.get('requireDetail')=='M',u=Ext.Array.pluck(b.form.getRecord().get('details').getRange(),'data');a.equipmentName=!b.form.innerItems[5].getSelection()?'':b.form.innerItems[5].getSelection().get('equipmentName');if(s&&u.length>0){if(a.quantity!=b.form.getRecord().get('quantity')){Ext.Msg.alert('FYI','Mileage quantity does not match the calculated mileage total in details.')}}}b.form.getRecord().set(b.form.getValues());if(a.unitCodeId){b.form.getRecord().set('equipmentName',a.equipmentName)}if(v){if(!p){if(q){Ext.each(l._hours.getRange(),function(b){if(b.get('empId')!=a.empId){if(b.get('workCodeId')==j){if(b.get('regHrs')==0){b.set('regHrs',a.regHrs)}if(b.get('ovtHrs')==0){b.set('ovtHrs',a.ovtHrs)}if(b.get('ovt2Hrs')==0){b.set('ovt2Hrs',a.ovt2Hrs)}}}})}if(o){Ext.each(l._hours.getRange(),function(b){if(b.get('empId')!=a.empId&&!b.get('comment')&&b.get('workCodeId')==j){b.set('comment',a.comment)}})}}}b.form.getRecord().store.sort([{property:'lastName',direction:'ASC'},{property:'workCodeAbbrev',direction:'DESC'}]);if(k.getItemId()=='hoursGrid'){c=l.get('recurrenceDatesInRange');e=Ext.Date.format(new Date(b.form.getValues().workDate),'m/d/Y');i=e;n=Ext.first('#hoursGrid');g=n.getStore();Ext.each(c,function(a){f=(new Date(a)).getUTCMonth()+1+'/'+(new Date(a)).getUTCDate()+'/'+(new Date(a)).getUTCFullYear();f=Ext.Date.format(new Date(f),'m/d/Y');if(f==e){m=!0;return !1}});Ext.first('#dateHeader').setValue(i);if(!m){e=Ext.Date.format(new Date(e),'Y-m-d');if(!c){c=[]}c.push(e+'T00:00:00')}if(c&&c.length>0){if(c.length==1){Ext.first('#lastHoursDate').setDisabled(!0);Ext.first('#nextHoursDate').setDisabled(!0)}else {c=c.sort(function(a,b){return new Date(a)-new Date(b)});Ext.each(c,function(a){h++;f=Ext.Date.format(new Date((new Date(a)).getUTCMonth()+1+'/'+(new Date(a)).getUTCDate()+'/'+(new Date(a)).getUTCFullYear()),'m/d/Y');var b=f==Ext.first('#dateHeader').getValue();if(b&&h==1){Ext.first('#lastHoursDate').setDisabled(!0);Ext.first('#nextHoursDate').setDisabled(!1);return !1}else {if(b&&h==c.length){Ext.first('#nextHoursDate').setDisabled(!0);Ext.first('#lastHoursDate').setDisabled(!1);return !1}}})}}else {Ext.first('#lastHoursDate').setDisabled(!0);Ext.first('#nextHoursDate').setDisabled(!0)}}if(g){g.clearFilter();g.setRemoteFilter(!1);g.filterBy(function(a){return Ext.Date.format(new Date(a.get('workDate')),'m/d/Y')===Ext.Date.format(new Date(i),'m/d/Y')})}b.sheet.hide();if(k.getItemId()=='unitDetailsGrid'){b.sheet.parent.up('sheet').hide()}d.justSaved=!0;if(Ext.first('fwa-managehours')){Ext.first('fwa-managehours').lookup('workCodeDateBar').setHidden(!1)}else {if(Ext.first('fwa-manageunits')){Ext.first('fwa-manageunits').lookup('unitDateBar').setHidden(!1)}}if(Ext.first('#addButton')){Ext.first('#addButton').setDisabled(!1)}},onCancelTap:function(){var b=this,e=TS.app.settings,a=b.form.getRecord(),c=a.get('fwaInfo'),f=b.getGrid(),d=Ext.getStore('Employees');if(Ext.first('#addButton')){Ext.first('#addButton').setDisabled(!1)}d.clearFilter();if(Ext.first('#empGroupSelect')){Ext.first('#empGroupSelect').setValue('')}if(a.phantom&&(!a.get('workCodeId')&&!a.get('unitCodeId')&&!a.get('empId'))&&(!a.dirty||a.dirty&&!a.get('empId'))&&!c){f.getStore().remove(a)}e.justSaved=!0;if(Ext.first('fwa-managehours')){Ext.first('fwa-managehours').lookup('workCodeDateBar').setHidden(!1)}else {if(Ext.first('fwa-manageunits')){Ext.first('fwa-manageunits').lookup('unitDateBar').setHidden(!1)}}this.sheet.hide()},hideExpWbs1:function(a){if(a.exDisplayWbs1=='B'||a.exDisplayWbs1=='U'){return !1}else {return !0}},hideExpWbs1Name:function(a){if(a.exDisplayWbs1=='B'||a.exDisplayWbs1=='A'){return !1}else {return !0}},hideExpWbs2:function(a){if(a.exDisplayWbs2=='B'||a.exDisplayWbs2=='U'){return !1}else {return !0}},hideExpWbs2Name:function(a){if(a.exDisplayWbs2=='B'||a.exDisplayWbs2=='A'){return !1}else {return !0}},hideExpWbs3:function(a){if(a.exDisplayWbs3=='B'||a.exDisplayWbs3=='U'){return !1}else {return !0}},hideExpWbs3Name:function(a){if(a.exDisplayWbs3=='B'||a.exDisplayWbs3=='A'){return !1}else {return !0}},hideAccount:function(a){if(a.exDisplayAccount=='B'||a.exDisplayAccount=='U'){return !1}else {return !0}},hideAccountName:function(a){if(a.exDisplayAccount=='B'||a.exDisplayAccount=='A'){return !1}else {return !0}}});Ext.cmd.derive('Ext.panel.Header',Ext.Container,{isPanelHeader:!0,baseCls:'x-panel-header',config:{glyph:null,icon:null,iconAlign:null,iconCls:null,title:null,titleAlign:null,layout:{type:'hbox',align:'center'}},add:function(f){var d=this,j=Ext.isArray(f),b=j?f.slice(0):[f],e=d.getItems(),g=e.length,i=b.length,h,a,i,c;for(a=0;a<i;++a){b[a]=d.factoryItem(b[a])}Ext.Array.sort(b,d.sortByWeight);if(g){e=e.items;c=0;for(a=0;a<i;++a){h=b[a];for(;c<g;++c){if(d.sortByWeight(h,e[c])<0){break}}d.insert(c,h);++c;++g}}else {Ext.Container.prototype.add.call(this,b)}return j?b:f},applyTitle:function(a,c){var b=c;if(b){if(!a||typeof a==='string'){b.setText(a||'')}else {if(a){b.setConfig(a)}}}else {b=Ext.create(this.createTitle(a))}return b},createTitle:function(a){var b={xtype:'paneltitle',flex:1};if(a){if(typeof a==='string'){a={text:a}}Ext.merge(b,a)}return b},createTools:function(d,b){var f=d&&d.length,e=f&&[],a,c;b=b||null;for(c=0;c<f;++c){a=d[c];if(typeof a==='string'){a={xtype:'paneltool',type:a,toolOwner:b}}else {if(a.isInstance){if(b){a.setToolOwner(b)}}else {a=Ext.apply({xtype:'paneltool',toolOwner:b},a)}}e[c]=a}return e},updateGlyph:function(a){this.ensureTitle().setGlyph(a)},updateIcon:function(a){this.ensureTitle().setIcon(a)},updateIconAlign:function(a,b){this.ensureTitle().setIconAlign(a)},updateIconCls:function(a){this.ensureTitle().setIconCls(a)},updateTitle:function(b,a){if(a){a.setConfig(b)}else {this.add(b)}},updateTitleAlign:function(a,b){this.ensureTitle().setTextAlign(a)},updateUi:function(a,b){Ext.Container.prototype.updateUi.call(this,a,b);this.ensureTitle().setUi(a)},privates:{clearTools:function(){var c=this.getItems().items,a,b;for(b=c.length;b-->0;){a=c[b];if(a.isPanelTool){this.remove(a)}}},ensureTitle:function(){var b=this,a=b.getTitle();if(!a){b.setTitle('');a=b.getTitle()}return a},sortByWeight:function(a,b){return (a.weight||0)-(b.weight||0)}}},0,['panelheader'],['widget','component','container','panelheader'],{'widget':!0,'component':!0,'container':!0,'panelheader':!0},['widget.panelheader'],0,[Ext.panel,'Header'],0);Ext.cmd.derive('Ext.panel.Title',Ext.Component,{isPanelTitle:!0,_textAlign:'left',_iconAlign:'left',_text:'&#160;',cachedConfig:{textAlign:null,text:null,glyph:null,icon:null,iconAlign:null,iconCls:null},weight:-10,element:{unselectable:'on',reference:'element',cls:'x-panel-title-align-left',children:[{reference:'iconElement',style:'display:none',cls:'x-panel-title-icon x-panel-title-icon-left'},{reference:'textElement',cls:'x-panel-title-text'}]},_textAlignClasses:{left:'x-panel-title-align-left',center:'x-panel-title-align-center',right:'x-panel-title-align-right'},_iconAlignClasses:{top:'x-panel-title-icon-top',right:'x-panel-title-icon-right',bottom:'x-panel-title-icon-bottom',left:'x-panel-title-icon-left'},baseCls:'x-panel-title',_titleSuffix:'-title',_glyphCls:'x-panel-title-glyph',_verticalCls:'x-panel-title-vertical',applyText:function(a){return a||'&#160;'},updateGlyph:function(a,g){a=a||0;var c=this,f=c._glyphCls,b=c.iconElement,d,e;c.glyph=a;c._syncIconVisibility();if(typeof a==='string'){e=a.split('@');a=e[0];d=e[1]||Ext._glyphFontFamily}if(!a){b.dom.innerHTML='';b.removeCls(f)}else {b.dom.innerHTML='&#'+a+';';b.addCls(f)}if(d){b.setStyle('font-family',d)}},updateIcon:function(b,d){var c=this,a;c._syncIconVisibility();a=c.iconElement;a.setStyle('background-image',b?'url('+b+')':'')},updateIconAlign:function(a,f){var b=this,c=b.iconElement,e=b._iconAlignClasses,d=b.el;if(f){c.removeCls(e[f])}c.addCls(e[a]);if(a==='top'||a==='left'){d.insertFirst(c)}else {d.appendChild(c)}if(a==='top'||a==='bottom'){d.addCls(b._verticalCls)}else {d.removeCls(b._verticalCls)}},updateIconCls:function(c,b){var a=this.iconElement;this._syncIconVisibility();if(b){a.removeCls(b)}if(c){a.addCls(c)}},updateText:function(a){this.textElement.setHtml(a)},updateTextAlign:function(d,c){var a=this,b=a._textAlignClasses;if(c){a.removeCls(b[c])}a.addCls(b[d])},privates:{_getVerticalAdjustDirection:function(){return 'left'},_hasIcon:function(){return !!(this.getIcon()||this.getIconCls()||this.getGlyph())},_syncIconVisibility:function(){this.iconElement.setDisplayed(this._hasIcon())}}},0,['paneltitle'],['widget','component','paneltitle'],{'widget':!0,'component':!0,'paneltitle':!0},['widget.paneltitle'],0,[Ext.panel,'Title'],0);Ext.cmd.derive('Ext.panel.Tool',Ext.Component,{isPanelTool:!0,baseCls:'x-tool',disabledCls:'x-tool-disabled',toolPressedCls:'x-tool-pressed',toolOverCls:'x-tool-over',element:{reference:'element',listeners:{click:'onClick',mousedown:'onMouseDown',mouseover:'onMouseOver',mouseout:'onMouseOut'},children:[{reference:'toolElement'}]},handler:null,scope:null,toolOwner:null,config:{iconCls:null,type:null},stopEvent:!0,weight:10,updateIconCls:function(b,a){var c=this.toolElement;c.replaceCls(a,b)},updateType:function(c,b){var a=this.getBaseCls(),d=this.toolElement;d.replaceCls(b&&a+'-'+b,c&&a+'-'+c)},privates:{onClick:function(b,d){var a=this,c=a.handler||a.callback;if(a.disabled){return !1}if(b.type!=='keydown'){a.el.removeCls(a.toolPressedCls+' '+a.toolOverCls)}if(a.stopEvent!==!1){b.stopEvent()}if(c){Ext.callback(c,a.scope,[a.toolOwner||a.parent,a,b],0,a)}a.fireEvent('click',a,b,a.toolOwner||a.ownerCt);return !0},onMouseDown:function(a){a.preventDefault();if(this.disabled){return !1}this.el.addCls(this.toolPressedCls)},onMouseOver:function(){if(this.disabled){return !1}this.el.addCls(this.toolOverCls)},onMouseOut:function(){this.el.removeCls(this.toolOverCls)}}},0,['paneltool','tool'],['widget','component','paneltool','tool'],{'widget':!0,'component':!0,'paneltool':!0,'tool':!0},['widget.paneltool','widget.tool'],0,[Ext.panel,'Tool'],0);Ext.cmd.derive('Ext.plugin.Responsive',Ext.mixin.Responsive,{pluginId:'responsive',isPlugin:!0,constructor:function(f){var c=this,a=f.cmp,d=a.initialConfig,e=Ext.apply({responsiveConfig:d.responsiveConfig,responsiveFormulas:d.responsiveFormulas},f),b;delete e.cmp;delete e.type;c.cmp=a;c.initConfig(e);b=c.transformed;if(b){c.transformed=null;if(a.initConfig.$nullFn){a.setConfig(b)}else {a.initialConfig=Ext.merge(Ext.merge({},d),b)}}},init:Ext.emptyFn,privates:{transformInstanceConfig:function(b){var c=Ext.mixin.Responsive.prototype.transformInstanceConfig.call(this,b),a;this.transformed=c;a=Ext.apply({},b);delete a.responsiveConfig;delete a.responsiveFormulas;return a},updateResponsiveState:function(){var a=this.getResponsiveState();this.cmp.setConfig(a)}}},1,0,0,0,['plugin.responsive'],0,[Ext.plugin,'Responsive'],0);Ext.cmd.derive('Ext.tab.Tab',Ext.Button,{alternateClassName:'Ext.Tab',isTab:!0,config:{baseCls:'x-tab',pressedCls:'x-tab-pressed',activeCls:'x-tab-active',active:!1,title:'&nbsp;'},updateIconCls:function(a,b){Ext.Button.prototype.updateIconCls.call(this,a,b);if(b){this.removeCls('x-tab-icon')}if(a){this.addCls('x-tab-icon')}},updateTitle:function(a){this.setText(a)},updateActive:function(c,b){var a=this.getActiveCls();if(c&&!b){this.element.addCls(a);this.fireEvent('activate',this)}else {if(b){this.element.removeCls(a);this.fireEvent('deactivate',this)}}}},0,['tab'],['widget','component','button','tab'],{'widget':!0,'component':!0,'button':!0,'tab':!0},['widget.tab'],0,[Ext.tab,'Tab',Ext,'Tab'],function(){this.override({activate:function(){this.setActive(!0)},deactivate:function(){this.setActive(!1)}})});Ext.cmd.derive('Ext.tab.Bar',Ext.Toolbar,{alternateClassName:'Ext.TabBar',config:{baseCls:'x-tabbar',defaultType:'tab',defaultTabUI:null,layout:{type:'hbox',align:'middle'}},eventedConfig:{activeTab:null},initialize:function(){var a=this;Ext.Toolbar.prototype.initialize.call(this);a.on({tap:'onTabTap',delegate:'> tab',scope:a})},onTabTap:function(a){this.setActiveTab(a)},applyActiveTab:function(a,c){if(!a&&a!==0){return}var b=this.parseActiveTab(a);if(!b){return}return b},updateDocked:function(d){var a=this.getLayout(),c=this.getInitialConfig(),b;if(!c.layout||!c.layout.pack){b=d=='bottom'?'center':'left';if(a.isLayout){a.setPack(b)}else {a.pack=a&&a.pack?a.pack:b}}Ext.Toolbar.prototype.updateDocked.apply(this,arguments)},updateActiveTab:function(b,a){if(b){b.setActive(!0)}if(a&&a.parent){a.setActive(!1)}},parseActiveTab:function(a){if(typeof a=='number'){return this.getItems().items[a]}else {if(typeof a=='string'){a=Ext.getCmp(a)}}return a},onItemAdd:function(a,c){var b=this.getDefaultTabUI();if(b&&a.isTab&&a.getUi()==null){a.setUi(b)}Ext.Toolbar.prototype.onItemAdd.call(this,a,c)}},0,['tabbar'],['widget','component','container','toolbar','tabbar'],{'widget':!0,'component':!0,'container':!0,'toolbar':!0,'tabbar':!0},['widget.tabbar'],0,[Ext.tab,'Bar',Ext,'TabBar'],0);Ext.cmd.derive('Ext.tab.Panel',Ext.Container,{alternateClassName:'Ext.TabPanel',config:{tabBar:!0,tabBarPosition:'top',layout:{type:'card',animation:{type:'slide',direction:'left'}},cls:'x-tabpanel'},initialize:function(){Ext.Container.prototype.initialize.call(this);this.on({beforeactivetabchange:'doTabChange',delegate:'> tabbar',scope:this});this.on({disabledchange:'onItemDisabledChange',delegate:'> component',scope:this})},applyScrollable:function(){return !1},updateUi:function(a,b){Ext.Container.prototype.updateUi.apply(this,arguments);if(this.initialized){this.getTabBar().setUi(a)}},updateActiveItem:function(d,i){if(d){var h=this.getInnerItems(),e=h.indexOf(i),a=h.indexOf(d),j=e>a,b=this.getLayout().getAnimation(),c=this.getTabBar(),g=c.parseActiveTab(e),f=c.parseActiveTab(a);if(b&&b.setReverse){b.setReverse(j)}Ext.Container.prototype.updateActiveItem.apply(this,arguments);if(a!=-1){this.forcedChange=!0;c.setActiveTab(a);this.forcedChange=!1;if(g){g.setActive(!1)}if(f){f.setActive(!0)}}}},doTabChange:function(d,c){var b=this.getActiveItem(),a;this.setActiveItem(d.indexOf(c));a=this.getActiveItem();return this.forcedChange||b!==a},applyTabBar:function(a){if(a===!0){a={}}if(a){Ext.applyIf(a,{ui:this.getUi(),docked:this.getTabBarPosition()})}return Ext.factory(a,Ext.tab.Bar,this.getTabBar())},updateTabBar:function(a){if(a){this.add(a);this.setTabBarPosition(a.getDocked())}},updateTabBarPosition:function(b){var a=this.getTabBar();if(a){a.setDocked(b)}},onItemAdd:function(a){var q=this;if(!a.isInnerItem()){return Ext.Container.prototype.onItemAdd.apply(this,arguments)}var d=q.getTabBar(),c=a.getInitialConfig(),b=c.tab||{},m=a.getTitle?a.getTitle():c.title,j=a.getIconCls?a.getIconCls():c.iconCls,l=a.getHidden?a.getHidden():c.hidden,h=a.getDisabled?a.getDisabled():c.disabled,g=a.getBadgeText?a.getBadgeText():c.badgeText,i=q.getInnerItems(),o=i.indexOf(a),p=d.getItems(),k=d.getActiveTab(),f=p.length>=i.length&&p.getAt(o),n=a.isPanel&&a.getHeader(),e;if(m&&!b.title){b.title=m}if(j&&!b.iconCls){b.iconCls=j}if(l&&!b.hidden){b.hidden=l}if(h&&!b.disabled){b.disabled=h}if(g&&!b.badgeText){b.badgeText=g}e=Ext.factory(b,Ext.tab.Tab,f);if(!f){d.insert(o,e)}a.tab=e;if(n){n.setHidden(!0)}Ext.Container.prototype.onItemAdd.apply(this,arguments);if(!k&&k!==0){d.setActiveTab(d.getActiveItem())}},onItemDisabledChange:function(a,b){if(a&&a.tab){a.tab.setDisabled(b)}},onItemRemove:function(a,b){this.getTabBar().remove(a.tab,this.getAutoDestroy());Ext.Container.prototype.onItemRemove.apply(this,arguments)}},0,['tabpanel'],['widget','component','container','tabpanel'],{'widget':!0,'component':!0,'container':!0,'tabpanel':!0},['widget.tabpanel'],0,[Ext.tab,'Panel',Ext,'TabPanel'],0);Ext.namespace('Ext.theme.is')['theme-modern-ccg']=!0;Ext.theme.name='theme-modern-ccg';Ext.ComponentQuery.pseudos.last=function(a){return a[a.length-1]};Ext.ComponentQuery.pseudos.first=function(a){return a[0]};Ext.Date.patterns={ISO8601Long:'Y-m-d H:i:s',ISO8601Short:'Y-m-d',ShortDate:'n/j/Y',LongDate:'l, F d, Y',FullDateTime:'l, F d, Y g:i:s A',MonthDay:'F d',ShortTime:'g:i A',LongTime:'g:i:s A',SortableDateTime:'Y-m-d\\TH:i:s',UniversalSortableDateTime:'Y-m-d H:i:sO',YearMonth:'F, Y'};Ext.Date.formatFunctions['DateOnly']=function(){return this.toISOString().split('T')[0]};Ext.util.Format.belongsTo=function(g,j,b,h,f,i,d){var a=d.getColumnManager().getHeaderAtIndex(f),c=b.associations[a.associationKey].getterName,e=a.associationDisplay;b[c]({callback:function(c){var e=c?a.associationDisplay(c):g+' (Missing Association)';d.getCell(b,a).down('div').setHtml(e)},scope:this});return b[c]().get(e)||'Loading...'};Ext.cmd.derive('TS.overrides.TouchScroller',Ext.Base,{},0,0,0,0,0,0,[TS.overrides,'TouchScroller'],0);Ext.cmd.derive('TS.common.TR',Ext.Base,{singleton:!0,dictionary:'TR',findObject:function(a){var b=a.split('.');return b.reduce(function(b,c){return typeof b=='undefined'?b:b[c]},window)}},0,0,0,0,0,0,[TS.common,'TR'],function(){Ext.override(Ext.Base,{initConfig:function(a){var c=this,e=TS.common.TR,d=e.findObject(e.dictionary),f=c.getConfigurator(),b;c.initConfig=Ext.emptyFn;c.initialConfig=a||{};if(d){for(b in a){if(a[b]&&typeof a[b]==='object'&&a[b]._tr){a[b]=a[b].tpl?Ext.String.format(a[b].tpl,d[a[b]._tr]):d[a[b]._tr]}}}f.configure(c,a);return c}})});Ext.cmd.derive('TS.BaseApplication',Ext.app.Application,{name:'TS',listen:{global:{'App:Ready':'appReady','Route:Silent':'silentRoute','ChangeViewport':'changeViewport'}},appName:null,settings:{},config:{viewport:null},launch:function(){Ext.ariaWarn=Ext.emptyFn;Ext.fly('spinner-wrap').destroy();this.appName=Ext.Object.fromQueryString(location.search).app;Ext.History.setHash=Ext.Function.createInterceptor(Ext.History.setHash,function(){this.lastToken=this.currentToken});var d=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform),c=(new Date()).toString().match(/\(([A-Za-z\s].*)\)/)[1],b=c.split(' '),a='';if(!d){Ext.each(b,function(b){a+=b.substring(0,1)})}else {a=b}Ext.get('appfooter').setHtml(' v:'+VERSION.config.appVersion+'  <b>'+a+'</b>')},appReady:function(){var a=document.createElement('script');a.type='text/javascript';a.src='https://maps.googleapis.com/maps/api/js?key='+TS.app.settings.mapApi;document.head.appendChild(a);this.createViewport()},createViewport:function(){var a=this.appName=='History'?this.appName:SETTINGS.config.APP,f={Scheduler:'crew',Crew:'crew',TS:'ts',TSA:'tsa',FWA:'fwa',FSS:'fss',EXP:'exp',History:'history'},e=f[a]||a,d=TS.view[e]&&TS.view[e].Main,c,b=Ext.first('viewport');if(b&&!Ext.isModern){b.destroy()}if(d){c=Ext.create(d);Ext.app.route.Router.onStateChange(Ext.History.currentToken);this.setViewport(c)}else {if(a=='Scheduler'){Ext.GlobalEvents.fireEvent('Message:Code','viewportInitErrorScheduler')}else {Ext.GlobalEvents.fireEvent('Message:Code','viewportInitError')}}},changeViewport:function(g){var d=g,f={Scheduler:'crew',Crew:'crew',TS:'ts',TSA:'tsa',FWA:'fwa',FSS:'fss',EXP:'exp',EXA:'exa',History:'history'},e=f[d]||d,c=TS.view[e]&&TS.view[e].Main,a,b=Ext.first('viewport');if(b&&!Ext.isModern){b.destroy()}if(c){a=Ext.create(c);a.getViewModel().set('fromFSS',!0);Ext.app.route.Router.onStateChange(Ext.History.currentToken);this.setViewport(a)}else {Ext.GlobalEvents.fireEvent('Message:Code','viewportInitError')}},silentRoute:function(a){a=typeof a=='string'?a:Ext.History.lastToken;Ext.app.route.Router.routes.forEach(function(b){if(b.recognize(a)){var c=b,d=b.before;b.before=function(){var e=arguments[arguments.length-1];e.stop();c.before=d;return !1};this.redirectTo(a)}}.bind(this))},onAppUpdate:function(){Ext.Msg.confirm('Application Update','This application has an update, reload?',function(a){if(a==='yes'){window.location.reload()}})}},0,0,0,0,0,0,[TS,'BaseApplication'],0);var FwaStatus={Create:'C',Scheduled:'D',InProgress:'I',Saved:'V',Submitted:'S',Approved:'A',Removed:'X'};var TsStatus={Missing:'M',InProgress:'I',Submitted:'S',Approved:'A',Saved:'V',Rejected:'R',Blank:'B'};var AttachmentType={EmpSignature:'E',ClientSignature:'S',Photo:'P',Document:'D',Expense:'X'};Ext.cmd.derive('TS.Util',Ext.Base,{singleton:!0,objByString:function(b,a){a=a.replace(/\[(\w+)\]/g,'.$1');a=a.replace(/^\./,'');var d=a.split('.');for(var c=0,f=d.length;c<f;++c){var e=d[c];if(e in b){b=b[e]}else {return}}return b},doMultiRefs:function(a,b,c){if(a){Ext.Array.forEach(typeof b==='string'?[b]:b,function(d){if(a.lookup(d)&&a.lookup(d)[c]){TS.Util.objByString(a.lookup(d),c)()}},this)}},capitalizeKeys:function(a,b,c){var d=this;if(a===null||typeof a!=='object'){return a}Object.keys(a).forEach(function(e){if(c&&e==='id'){return}var g=b?Ext.String.uncapitalize(e):Ext.String.capitalize(e),f;if(g!==e){f=a[e];a[g]=f;delete a[e]}else {f=a[e]}if(f!==null&&typeof f==='object'){d.capitalizeKeys(f,b,c)}});return a},onCheckForDoubleBookedEmployees:function(f,e,g,h,a){var c=TS.app.settings,b=TS.common.Util.getOutUTCDate(g),d=TS.common.Util.getOutUTCDate(h);if(IS_OFFLINE&&MobileApp){a(!0)}else {Fwa.CheckForDoubleBookedEmp(null,c.username,f,e,b,d,function(b){if(b.success&&b.total>0){var c='',d=b.data;Ext.Array.each(d,function(d){c+=d.errorValue+'<br>'});c+='Do you wish to continue?';Ext.Msg.confirm(d[0].errorType+'s',c,function(c){if(c==='yes'){a(!0)}else {a(!1)}})}else {a(!0)}})}},onCheckForDoubleBookedEmployeesByEmpId:function(e,f,g,a){var c=TS.app.settings,b=TS.common.Util.getOutUTCDate(f),d=TS.common.Util.getOutUTCDate(g);if(IS_OFFLINE&&MobileApp){a(!0)}else {Fwa.CheckForDoubleBookedByEmpId(null,c.username,e,b,d,function(b){if(b.success&&b.total>0){var c='',d=b.data;Ext.Array.each(d,function(d){c+=d.errorValue+'<br>'});c+='Do you wish to continue?';Ext.Msg.confirm(d[0].errorType+'s',c,function(c){if(c==='yes'){a(!0)}else {a(!1)}})}else {a(!0)}})}},isValidDate:function(a){return a instanceof Date&&!isNaN(a.valueOf())},onCheckPriorToEmployeeAssn:function(i,g,f,b){var c=this,h=TS.app.settings,j,d,a=Ext.clone(i),e;if(IS_OFFLINE&&MobileApp){b(!0)}else {a.scheduledCrewId=f;a.hours=[];a.notes=[];a.workSchedAndPerf=[];a.nonFieldActions=[];if(!a.dateOrdered||a.dateOrdered<new Date('1/1/0001 12:30:00 AM')||!c.isValidDate(a.dateOrdered)){a.dateOrdered=new Date('1/1/2001 12:00:00 AM')}if(!a.dateRequired||a.dateRequired<new Date('1/1/0001 12:30:00 AM')||!c.isValidDate(a.dateRquired)){a.dateRequired=new Date('1/1/2001 12:00:00 AM')}if(!c.isValidDate(a.lastSubmittedDate)||!a.lastSubmittedDate||a.lastSubmittedDate<=new Date('1/1/0001 12:30:00 AM')){a.lastSubmittedDate=new Date('1/1/2001 12:00:00 AM')}else {a.lastSubmittedDate=TS.common.Util.getOutUTCDate(a.lastSubmittedDate)}if(!c.isValidDate(a.lastApprovedDate)||!a.lastApprovedDate||a.lastApprovedDate<=new Date('1/1/0001 12:30:00 AM')){a.lastApprovedDate=new Date('1/1/2001 12:00:00 AM')}else {a.lastApprovedDate=TS.common.Util.getOutUTCDate(a.lastApprovedDate)}a.nextDate=new Date();a.units=[];if(a.schedStartDate){a.schedStartDate=TS.common.Util.getOutUTCDate(a.schedStartDate)}if(c.isValidDate(a.schedEndDate)){a.schedEndDate=TS.common.Util.getOutUTCDate(a.schedEndDate)}else {a.schedEndDate=Ext.Date.add(a.schedStartDate,Ext.Date.HOUR,1)}e=a.schedEndDate-a.schedStartDate;a.duration=e/1000/60/60;a.duration=a.duration*60;a.availableTemplates=[];a.fwaDisplayString='';Fwa.CheckPriorToEmployeeAssn(null,h.username,a,g,function(a){if(a.success){if(a.message&&a.message.mdBody){if(a.message.mdType.toLowerCase()=='error'){d=a.message.mdBody+'<br>';Ext.Msg.alert('Error',d,function(c){b(!1)})}else {d=a.message.mdBody+'<br>';d+='Do you wish to continue?';Ext.Msg.confirm('FYI',d,function(c){if(c==='yes'){b(!0)}else {b(!1)}})}}else {b(!0)}}else {if(a.message&&a.message.mdBody){Ext.GlobalEvents.fireEvent('Error',a);b(!1)}}},c,{autoHandle:!0})}},retrieveGPSData:function(a){var b=this,c=Ext.create('TS.model.fwa.GPSData',{gpsAltitude:a.GPSAltitude?a.GPSAltitude:'N/A',gpsAltitudeRef:a.GPSAltitudeRef?a.GPSAltitudeRef:'N/A',gpsDestBearing:a.GPSDestBearing?a.GPSDestBearing:'N/A',gpsDestBearingRef:a.GPSDestBearingRef?a.GPSDestBearingRef:'N/A',gpsImgDirection:a.GPSImgDirection?a.GPSImgDirectionRef:'N/A',gpsImgDirectionRef:a.GPSImgDirectionRef?a.GPSImgDirectionRef:'N/A',gpsLatitude:a.GPSLatitude?a.GPSLatitude:'N/A',gpsLatitudeRef:a.GPSLatitudeRef?a.GPSLatitudeRef:'N/A',gpsLongitude:a.GPSLongitude?a.GPSLongitude:'N/A',gpsLongituderEF:a.GPSLongitudeRef?a.GPSLongitudeRef:'N/A',dateTime:a.DateTime?a.DateTime:'N/A',altitudeInFeet:a.GPSAltitude?(a.GPSAltitude.numerator/a.GPSAltitude.denominator*3.28084).toFixed(2):'N/A',bearing:a.GPSDestBearing?(a.GPSDestBearing.numerator/a.GPSDestBearing.denominator).toFixed(2):'N/A',imageDirection:a.GPSImgDirection?(a.GPSImgDirection.numerator/a.GPSImgDirection.denominator).toFixed(2):'N/A',direction:a.GPSImgDirection?(a.GPSImgDirection.numerator/a.GPSImgDirection.denominator).toFixed(2):'N/A',latitude:a.GPSLatitude?b.dmsToDegrees(a.GPSLatitude[0].numerator/a.GPSLatitude[0].denominator,a.GPSLatitude[1].numerator/a.GPSLatitude[1].denominator,a.GPSLatitude[2].numerator/a.GPSLatitude[2].denominator,a.GPSLatitudeRef):'N/A',longitude:a.GPSLongitude?b.dmsToDegrees(a.GPSLongitude[0].numerator/a.GPSLongitude[0].denominator,a.GPSLongitude[1].numerator/a.GPSLongitude[1].denominator,a.GPSLongitude[2].numerator/a.GPSLongitude[2].denominator,a.GPSLongitudeRef):'N/A',imageDirectionRef:a.GPSImgDirectionRef?a.GPSImgDirectionRef=='T'?'True Direction':'Magnetic Direction':'N/A',bearingDirectionRef:a.GPSDestBearingRef?a.GPSDestBearingRef=='T'?'True Direction':'Magnetic Direction':'N/A',imageDirectionString:a.GPSImgDirection?(a.GPSImgDirection.numerator/a.GPSImgDirection.denominator).toFixed(2)+' / '+b.getDegreeDirection((a.GPSImgDirection.numerator/a.GPSImgDirection.denominator).toFixed(2)):'N/A',bearingDirectionString:a.GPSDestBearing?(a.GPSDestBearing.numerator/a.GPSDestBearing.denominator).toFixed(2)+' / '+b.getDegreeDirection((a.GPSDestBearing.numerator/a.GPSDestBearing.denominator).toFixed(2)):'N/A'});return c},dmsToDegrees:function(e,c,d,a){a.toUpperCase();var b=e+c/60+d/(60*60);if(a=='S'||a=='W'){b=b*-1}return b},getOrientation:function(b){var a='';switch(b){case 2:case 3:case 4:a='transform:rotate(180deg)';break;case 6:a='transform:rotate(90deg)';break;case 8:a='transform:rotate(270deg)';break;}return a},getDegreeDirection:function(a){var b;if(a>=348.76&&a<=360){b='N'}else {if(a>=0&&a<=11.25){b='N'}else {if(a>=11.26&&a<=33.75){b='NNE'}else {if(a>=33.76&&a<=56.25){b='NE'}else {if(a>=56.26&&a<=78.75){b='ENE'}else {if(a>=78.76&&a<=101.25){b='E'}else {if(a>=101.26&&a<=123.75){b='ESE'}else {if(a>=123.76&&a<=146.25){b='SE'}else {if(a>=146.26&&a<=168.75){b='SSE'}else {if(a>=168.76&&a<=191.25){b='S'}else {if(a>=191.26&&a<=213.25){b='SSW'}else {if(a>=213.26&&a<=236.25){b='SW'}else {if(a>=236.26&&a<=258.75){b='WSW'}else {if(a>=258.76&&a<=281.25){b='W'}else {if(a>=281.26&&a<=303.75){b='WNW'}else {if(a>=303.76&&a<=326.25){b='NW'}else {if(a>=326.26&&a<=348.75){b='NNW'}}}}}}}}}}}}}}}}}return b}},0,0,0,0,0,0,[TS,'Util'],0);Ext.cmd.derive('TS.common.Util',Ext.Base,{singleton:!0,getLanguage:function(){var a,b=this;a=Ext.Object.fromQueryString(location.search).language;if(a===undefined||a===null){a=SETTINGS.config.language;if(a===undefined||a===null){a='en-US'}}return a},getDBI:function(){var a,b=this;a=Ext.Object.fromQueryString(location.search).dbi||SETTINGS.config.DBI;return a},getEmail:function(){var a,b=this;a=Ext.Object.fromQueryString(location.search).email;return a},convertRecordToData:function(g){var b=g.getData(),e={},c,d;for(var a in b){if(b[a]!==null&&b[a].$className&&b[a].$className==='Ext.data.Store'){d=b[a].getRange();c=[];for(var f=0;f<d.length;f++){c.push(this.convertRecordToData(d[f]))}e[a]=c}else {e[a]=b[a]}}return e},getInUTCDate:function(b){var a=new Date(b),c=(new Date(b)).getTimezoneOffset()/60;a.setHours(a.getHours()-c);return a},getOutUTCDate:function(b){var a=new Date(b),c=(new Date(b)).getTimezoneOffset()/60;a.setHours(a.getHours()+c);return a},createUTCDate:function(a){return new Date(a.getUTCMonth()+1+'/'+a.getUTCDate()+'/'+a.getUTCFullYear())},createUTCDateWithTime:function(a){return new Date(a.getUTCMonth()+1+'/'+a.getUTCDate()+'/'+a.getUTCFullYear()+' '+a.getUTCHours()+':'+a.getUTCMinutes()+':'+a.getUTCSeconds())},createGroupHeader:function(k){var b=k.hasOwnProperty('data')?k.data:k,d=TS.app.settings,h=b.wbs1Name,i=b.wbs2Name,j=b.wbs3Name,e=b.wbs1,f=b.wbs2,g=b.wbs3,c=Ext.String.trim,a=[];switch(d.tsDisplayWbs1){case 'B':a.push(c(e)?e+': '+h:'');break;case 'A':a.push(c(h)?h:'');break;case 'U':a.push(c(e)?e:'');break;case 'N':a.push('');break;}switch(d.tsDisplayWbs2){case 'B':a.push(c(f)?f+': '+i:'');break;case 'A':a.push(c(i)?i:'');break;case 'U':a.push(c(f)?f:'');break;case 'N':a.push('');break;}switch(d.tsDisplayWbs3){case 'B':a.push(c(g)?g+': '+j:'');break;case 'A':a.push(c(j)?j:'');break;case 'U':a.push(c(g)?g:'');break;case 'N':a.push('');break;}switch(d.tsDisplayClient){case 'B':a.push(c(b.clientNumber)?b.clientNumber+': '+b.clientName:'');break;case 'A':a.push(c(b.clientName)?b.clientName:'');break;case 'U':a.push(c(b.clientNumber)?b.clientNumber:'');break;case 'N':a.push('');break;}if(d.tsDisplayLaborCode!=='N'){a.push(b.laborCode)}return Ext.Array.clean(a).join(', ')},getTranslation:function(b){var a;if(window.userGlobal.translations){a=window.userGlobal.translations.entries[b]}if(a===undefined||a===null){a=b}return a}},0,0,0,0,0,0,[TS.common,'Util'],0);Ext.cmd.derive('TS.controller.Direct',Ext.app.Controller,{init:function(){var a=this;if(Ext.app.REMOTING_API===undefined){Ext.GlobalEvents.fireEvent('Error:Critical',{message:'Failed to load remote API.'});return}a.provider=Ext.direct.Manager.addProvider(Ext.app.REMOTING_API);a.provider.on({beforecall:this.appendRequiredParams,beforecallback:this.handleDirectResponse,scope:this});Ext.direct.Manager.on({exception:function(a){Ext.GlobalEvents.fireEvent(a.code==401?'Message:Timeout':'Error:Server',a)},scope:a})},appendRequiredParams:function(b,a){if(!window.userGlobal||!window.userGlobal.dbi){return}if(!a.args[0]){a.args[0]=window.userGlobal.dbi;a.data[0]=window.userGlobal.dbi}},handleDirectResponse:function(e,c,b){if(b&&b.callbackOptions&&b.callbackOptions.autoHandle){var a=c.result?c.result:c,d=a.message;if(a&&a.success){return !0}else {if(a){Ext.Msg.show({title:'Error',message:d.mdBody?d.mdBody:d,buttons:Ext.Msg.OK,icon:Ext.Msg.WARNING});(b.callbackOptions.failure||Ext.emptyFn)()}}return !1}else {return !0}}},0,0,0,0,0,0,[TS.controller,'Direct'],0);Ext.cmd.derive('TS.controller.Error',Ext.app.Controller,{listen:{global:{'Error':'handleGenericError','Error:MsgBox':'handleErrorWarningError','Error:Critical':'handleCriticalError','Error:Server':'handleServerError'}},init:function(){Ext.Error.handle=function(b){if(window.trackJs){var a=new Ext.Error(b);window.trackJs.track(a)}return !0}},handleGenericError:function(a){Ext.Msg.alert('Error',this.getErrorMessage(a))},handleErrorWarningError:function(a){Ext.create('Ext.MessageBox').show({cls:'myWindowCls',title:'Error',message:this.getErrorMessage(a),maxHeight:300,scrollable:!0,buttons:Ext.MessageBox.OK})},handleCriticalError:function(a){Ext.Msg.alert('Critical Error',this.getErrorMessage(a))},handleServerError:function(a){if(a){Ext.Msg.alert('Server Error',this.getErrorMessage(a))}},handleRawError:function(a){},getErrorMessage:function(a){if(typeof a=='string'){try{a=Ext.JSON.decode(a)}catch(d){a=a}}if(a&&a.getError){return a.getError()}else {if(a){if(a.message){a=a.message}if(typeof a=='object'&&a.length>0){return Ext.Array.map(a,function(b){return b.Value}).join('<br/>')}else {if(typeof a=='object'&&a.mdBody){var b='',c='';try{c=JSON.parse(a.mdBody);Ext.Array.each(c,function(c){b+=c.errorValue+'<br>'})}catch(e){b=a.mdBody}return b}else {return a.message||a}}}else {return typeof a=='string'?a:'Unknown Error - Please Contact Support'}}}},0,0,0,0,0,0,[TS.controller,'Error'],0);Ext.cmd.derive('TS.controller.Messenger',Ext.app.Controller,{listen:{global:{'Loadmask':'handleLoadmask','Message':'handleMessage','Message:Code':'handleCodeMessage','Message:Validate':'handleValidation','Message:Timeout':'handleTimeout','Message:Maps':'handleGoogleMaps'}},handleValidation:function(a,c,b){if(a.isValid()){a.save({callback:function(e,f,d){if(d){Ext.pass(c,e,b||this)()}else {Ext.GlobalEvents.fireEvent('Message','Failed to perform update.')}},scope:b||this})}else {Ext.Msg.alert('Validation Error',a.validate().items)}},handleMessage:function(a){Ext.Msg.alert('Message',a)},handleCodeMessage:function(c,a){var b=TS.Messages.getByCode(c),a=typeof a=='function'?a:Ext.emptyFn;if(b){Ext.Msg.alert(b.title,b.message,a)}},handleTimeout:function(a){Ext.Msg.alert('Session Timeout','Session has timed out. Please log in again.',function(){document.location.reload()})},handleGoogleMaps:function(a){var b={ZERO_RESULTS:'No map results found. Please verify address/latitude and longitude and try again.',INVALID_REQUEST:'Required address data is missing. Please verify and try again.'};Ext.Msg.alert('Mapping Error',b[a]||a)},handleLoadmask:function(a,b){var a=a||this.getApplication().getViewport();var b=TS.Messages.getByCode(b)||b||'Please wait...';if(a.setLoading){a.setLoading({xtype:'loadmask',msg:b})}}},0,0,0,0,0,0,[TS.controller,'Messenger'],0);Ext.cmd.derive('TS.model.Base',Ext.data.Model,{schema:{namespace:'TS.model'}},0,0,0,0,0,0,[TS.model,'Base'],0);Ext.cmd.derive('TS.model.shared.WorkCode',TS.model.Base,{idProperty:'workCodeId',identifier:'uuid',fields:[{name:'workCodeId',type:'auto'},{name:'workCodeAbbrev',type:'auto'},{name:'workCodeDescr',type:'string'},{name:'status',type:'string'},{name:'workCodeCombo',mapping:function(a){return a.workCodeAbbrev+' : '+a.workCodeDescr}},{name:'pctComplete',type:'float'}],proxy:{type:'default',directFn:'WorkCode.GetList',paramOrder:'dbi|username|start|limit|includeInactive',extraParams:{start:0,limit:25,includeInactive:!0}}},0,0,0,0,0,0,[TS.model.shared,'WorkCode'],0);Ext.cmd.derive('TS.store.WorkCodes',Ext.data.Store,{storeId:'WorkCodes',model:'TS.model.shared.WorkCode',autoLoad:!1,settingsDependency:!0,pageSize:100000,filters:[{property:'status',value:'A'}],sorters:[{property:'workCodeAbbrev',direction:'ASC'}]},0,0,0,0,0,0,[TS.store,'WorkCodes'],0);Ext.cmd.derive('TS.model.shared.Employee',TS.model.Base,{idProperty:'empId',identifier:'uuid',fields:[{name:'empId',type:'auto'},{name:'empGroupId',type:'string'},{name:'empGroupName',type:'string'},{name:'fname',type:'string'},{name:'lname',type:'string'},{name:'startDate',type:'date'},{name:'defaultBillCategory',type:'string'},{name:'isScheduler',type:'bool'},{name:'defaultCrewRoleId',type:'string',reference:{parent:'TS.model.shared.CrewRole'}},{name:'crewRoleName',type:'string'},{name:'eMail',type:'string'},{name:'title',type:'string'},{name:'flags',type:'string'},{name:'phoneNumbers',type:'auto'},{name:'empNameLastFirst',mapping:function(a){return a.lname+', '+a.fname}},{name:'mobilePhone',mapping:function(b){var a='';Ext.each(b.phoneNumbers,function(c){if(c.phoneType==='Mobile'){a=c.phoneNumber}});return a.replace(/[.]/g,'')}}],proxy:{type:'default',api:{read:'Employee.Get'},paramOrder:'dbi|username|id'}},0,0,0,0,0,0,[TS.model.shared,'Employee'],0);Ext.cmd.derive('TS.store.Employees',Ext.data.Store,{storeId:'Employees',model:'TS.model.shared.Employee',autoLoad:!1,settingsDependency:!0,pageSize:100000,sorters:[{property:'lname',direction:'ASC'}],proxy:{type:'default',directFn:'Employee.GetList',paramOrder:'dbi|username|start|limit|includeInactive|fwaEmployeesOnly',extraParams:{includeInactive:!1,fwaEmployeesOnly:!0}}},0,0,0,0,['store.Employees'],0,[TS.store,'Employees'],0);Ext.cmd.derive('TS.store.AllEmployees',Ext.data.Store,{storeId:'AllEmployees',model:'TS.model.shared.Employee',autoLoad:!1,settingsDependency:!0,pageSize:100000,proxy:{type:'default',directFn:'Employee.GetAll',paramOrder:'dbi|username'}},0,0,0,0,0,0,[TS.store,'AllEmployees'],0);Ext.cmd.derive('TS.model.shared.CrewRole',TS.model.Base,{idProperty:'crewRoleId',fields:[{name:'crewRoleId',type:'auto'},{name:'crewRoleName',type:'string'},{name:'crewRoleIsChief',type:'bool',defaultValue:!1},{name:'crewRoleStatus',type:'auto'}],proxy:{type:'default',directFn:'Role.GetList',paramOrder:'dbi|username|start|limit',extraParams:{start:0,limit:25}}},0,0,0,0,0,0,[TS.model.shared,'CrewRole'],0);Ext.cmd.derive('TS.store.Roles',Ext.data.Store,{storeId:'Roles',model:'TS.model.shared.CrewRole',autoLoad:!1,settingsDependency:!0,pageSize:100000},0,0,0,0,0,0,[TS.store,'Roles'],0);Ext.cmd.derive('TS.store.ActiveRoles',Ext.data.Store,{storeId:'ActiveRoles',model:'TS.model.shared.CrewRole',autoLoad:!1,settingsDependency:!0,pageSize:100000,proxy:{type:'default',directFn:'Role.GetList',paramOrder:'dbi|username|start|limit',extraParams:{start:0,limit:25}},filters:[{property:'crewRoleStatus',value:'A'}]},0,0,0,0,['store.ActiveRoles'],0,[TS.store,'ActiveRoles'],0);Ext.cmd.derive('TS.model.shared.EmpGroup',TS.model.Base,{idProperty:'empGroupId',identifier:'uuid',fields:[{name:'empGroupId',type:'string'},{name:'empGroupName',type:'string'},{name:'empGroupStatus',type:'string'},{name:'empIds',type:'string'},{name:'policies',type:'auto'},{name:'rules',type:'auto'},{name:'periods',type:'auto'},{name:'holidayScheduleId',type:'string'},{name:'tsApproverCanModify',type:'bool'},{name:'tsApprover',type:'string'},{name:'tsAuditLevel',type:'int'},{name:'tsIncrement',type:'int'},{name:'tsAllowHtmlComments',type:'bool'},{name:'tsAllowUnsubmit',type:'bool'},{name:'tsAllowTimeOnInactive',type:'bool'},{name:'tsReqSubmitSignature',type:'bool'},{name:'tsReqApprovalSignature',type:'bool'},{name:'tsReqApproval',type:'bool'},{name:'tsAutoCalcOvt',type:'bool'},{name:'tsAllowOvtHrs',type:'bool'},{name:'tsAllowOvt2Hrs',type:'bool'},{name:'tsAllowTravelHrs',type:'bool'},{name:'tsCanEnterCrewMemberTime',type:'bool'},{name:'tsDisplayWbs1',type:'string'},{name:'tsDisplayWbs2',type:'string'},{name:'tsDisplayWbs3',type:'string'},{name:'tsDisplayClient',type:'string'},{name:'tsDisplayLaborCode',type:'string'},{name:'tsDisplayBillCat',type:'string'},{name:'fwaApprover',type:'string'},{name:'fwaApproversCanModify',type:'bool'},{name:'fwaAuditLevel',type:'int'},{name:'fwaAvailableForFwaAssignment',type:'string'},{name:'fwaDisplayWbs1',type:'string'},{name:'fwaDisplayWbs2',type:'string'},{name:'fwaDisplayWbs3',type:'string'},{name:'fwaDisplayClient',type:'string'},{name:'fwaReqClientSignature',type:'string'}]},0,0,0,0,0,0,[TS.model.shared,'EmpGroup'],0);Ext.cmd.derive('TS.store.EmpGroups',Ext.data.Store,{storeId:'EmpGroups',model:'TS.model.shared.EmpGroup',autoLoad:!1,settingsDependency:!0,pageSize:100000,proxy:{type:'default',directFn:'EmpGroup.GetList',paramOrder:'dbi|username'}},0,0,0,0,['store.EmpGroups'],0,[TS.store,'EmpGroups'],0);Ext.cmd.derive('TS.store.MyEmpGroup',Ext.data.Store,{storeId:'MyEmpGroup',model:'TS.model.shared.EmpGroup',autoLoad:!1,settingsDependency:!0,pageSize:100000,proxy:{type:'default',directFn:'EmpGroup.Get',paramOrder:'dbi|username|empGroupId'}},0,0,0,0,['store.MyEmpGroup'],0,[TS.store,'MyEmpGroup'],0);Ext.cmd.derive('TS.model.shared.Priority',TS.model.Base,{idProperty:'priorityId',identifier:'uuid',fields:[{name:'priorityId',type:'string'},{name:'priorityValue',type:'int'},{name:'priorityDescr',type:'string'},{name:'priorityDefault',type:'bool'},{name:'priorityHighlightColor',type:'auto'},{name:'priorityCombo',mapping:function(a){return a.priorityValue+' : '+a.priorityDescr}}],proxy:{type:'default',directFn:'PriorityList.GetList',paramOrder:'dbi|username'}},0,0,0,0,0,0,[TS.model.shared,'Priority'],0);Ext.cmd.derive('TS.store.PriorityList',Ext.data.Store,{storeId:'PriorityList',model:'TS.model.shared.Priority',autoLoad:!1,settingsDependency:!0,pageSize:100000},0,0,0,0,0,0,[TS.store,'PriorityList'],0);Ext.cmd.derive('TS.model.shared.NonFieldActionItem',Ext.data.Model,{idProperty:'actionItemId',identifier:'uuid',fields:[{name:'id',type:'string'},{name:'actionItemId',type:'string'},{name:'actionItemStatus',type:'string'},{name:'actionItemDescr',type:'string'},{name:'actionItemDefaultTypeId',type:'string'}],proxy:{type:'default',directFn:'ActionItem.GetList',paramOrder:'dbi|username'}},0,0,0,0,0,0,[TS.model.shared,'NonFieldActionItem'],0);Ext.cmd.derive('TS.store.NonFieldActionItem',Ext.data.Store,{storeId:'NonFieldActionItem',model:'TS.model.shared.NonFieldActionItem',autoLoad:!1,settingsDependency:!0,pageSize:100000,filters:[{property:'actionItemStatus',value:'A'}]},0,0,0,0,0,0,[TS.store,'NonFieldActionItem'],0);Ext.cmd.derive('TS.data.field.CrewMemberList',Ext.data.field.Field,{sortType:'none',convert:function(a){if(a&&a.length>0){Ext.Array.each(a,function(b,c){if(!b.empId){a[c].empId=b.crewMemberEmpId}})}var b=Ext.create('Ext.data.Store',{model:'TS.model.shared.Employee'});if(a){b.loadData(a)}return b},serialize:function(a){if(a){return Ext.Array.map(a.getRange(),function(b){return {crewMemberEmpId:b.get('empId'),crewMemberRoleId:b.get('crewMemberRoleId'),crewMemberPhone:b.get('crewMemberPhone'),crewMemberEmail:b.get('crewMemberEmail')}})}return a},getType:function(){return 'crewmemberlist'}},0,0,0,0,['data.field.crewmemberlist'],0,[TS.data.field,'CrewMemberList'],0);Ext.cmd.derive('TS.model.fwa.Crew',Ext.data.Model,{idProperty:'crewId',identifier:'uuid',fields:[{name:'crewId',type:'auto'},{name:'crewName',type:'string'},{name:'crewStatus',type:'string'},{name:'crewChiefEmpId',type:'string',reference:{parent:'TS.model.shared.Employee'},unique:!0},{name:'crewChiefRoleId',type:'string'},{name:'crewMembers',type:'crewmemberlist'},{name:'crewCt',type:'int',persist:!1},{name:'preparedByEmpId',type:'string'}]},0,0,0,0,0,0,[TS.model.fwa,'Crew'],0);Ext.cmd.derive('TS.store.AllCrews',Ext.data.Store,{storeId:'AllCrews',model:'TS.model.fwa.Crew',autoLoad:!1,settingsDependency:!0,pageSize:100000,proxy:{type:'default',directFn:'Crew.GetList',paramOrder:'dbi|username|start|limit|empId|isPreparedByMe',extraParams:{limit:1000,isPreparedByMe:'N'}}},0,0,0,0,0,0,[TS.store,'AllCrews'],0);Ext.cmd.derive('TS.store.CrewsForNewFWA',Ext.data.Store,{storeId:'CrewsForNewFWA',model:'TS.model.fwa.Crew',autoLoad:!1,settingsDependency:!0,pageSize:100000,proxy:{type:'default',directFn:'Crew.GetCrewListForNewFwa',paramOrder:'dbi|username|empId'}},0,0,0,0,0,0,[TS.store,'CrewsForNewFWA'],0);Ext.cmd.derive('TS.model.shared.HolidaySchedule',TS.model.Base,{idProperty:'holidayScheduleId',identifier:'uuid',fields:[{name:'holidayScheduleId',type:'string'},{name:'holidayDate',type:'date',format:'c',persist:!1,convert:function(a){return Ext.Date.add(Ext.Date.clearTime(new Date(a)),Ext.Date.DAY,1)}},{name:'holidayDescr',type:'string'},{name:'holidayEnd',type:'date',persist:!1,convert:function(b,a){return Ext.Date.add(Ext.Date.clearTime(new Date(a.data.holidayDate)),Ext.Date.DAY,1)}}]},0,0,0,0,0,0,[TS.model.shared,'HolidaySchedule'],0);Ext.cmd.derive('TS.store.HolidaySchedule',Ext.data.Store,{storeId:'HolidaySchedule',model:'TS.model.shared.HolidaySchedule',autoLoad:!1,settingsDependency:!0,pageSize:100000,proxy:{type:'default',directFn:'Holiday.GetListByEmployee',paramOrder:'dbi|username|start|limit|empId'}},0,0,0,0,['store.HolidaySchedule'],0,[TS.store,'HolidaySchedule'],0);Ext.cmd.derive('TS.model.shared.ActionType',TS.model.Base,{idProperty:'actionTypeId',identifier:'uuid',fields:[{name:'actionTypeId',type:'string'},{name:'actionTypeStatus',type:'string'},{name:'actionTypeDescr',type:'string'}],proxy:{type:'default',directFn:'ActionType.GetList',paramOrder:'dbi|username'}},0,0,0,0,0,0,[TS.model.shared,'ActionType'],0);Ext.cmd.derive('TS.store.ActionType',Ext.data.Store,{storeId:'ActionType',model:'TS.model.shared.ActionType',autoLoad:!1,settingsDependency:!0,pageSize:100000,filters:[{property:'actionTypeStatus',value:'A'}]},0,0,0,0,0,0,[TS.store,'ActionType'],0);Ext.cmd.derive('TS.store.WorkCodeList',Ext.data.Store,{storeId:'WorkCodeList',model:'TS.model.shared.WorkCode',autoLoad:!1,settingsDependency:!0,pageSize:100000,filters:[{property:'status',value:'A'}],sorters:[{property:'workCodeAbbrev',direction:'ASC'}]},0,0,0,0,0,0,[TS.store,'WorkCodeList'],0);Ext.cmd.derive('TS.model.shared.BillCategory',TS.model.Base,{idProperty:'id',identifier:'uuid',fields:[{name:'id',type:'auto'},{name:'category',type:'string'},{name:'description',type:'string'}],proxy:{type:'default',directFn:'BillCategory.GetList',paramOrder:'dbi|username|start|limit'}},0,0,0,0,0,0,[TS.model.shared,'BillCategory'],0);Ext.cmd.derive('TS.store.BillCategory',Ext.data.Store,{storeId:'BillCategory',model:'TS.model.shared.BillCategory',autoLoad:!1,settingsDependency:!0,pageSize:100000},0,0,0,0,0,0,[TS.store,'BillCategory'],0);Ext.cmd.derive('TS.store.TsEmployees',Ext.data.Store,{storeId:'TsEmployees',model:'TS.model.shared.Employee',autoLoad:!1,settingsDependency:!0,pageSize:100000,sorters:[{property:'lname',direction:'ASC'}],proxy:{type:'default',directFn:'Employee.GetList',paramOrder:'dbi|username|start|limit|includeInactive|fwaEmployeesOnly',extraParams:{includeInactive:!1,fwaEmployeesOnly:!1}}},0,0,0,0,['store.TsEmployees'],0,[TS.store,'TsEmployees'],0);Ext.cmd.derive('TS.model.shared.UnitCode',Ext.data.Model,{idProperty:'unitCodeId',identifier:'uuid',fields:[{name:'unitCodeId',type:'string'},{name:'unitCodeAbbrev',type:'string'},{name:'unitCodeName',type:'string'},{name:'status',type:'string'},{name:'equipSelection',type:'bool'},{name:'equipSource',type:'string'},{name:'requireDetail',type:'string'},{name:'unitCodeCombo',mapping:function(a){return a.unitCodeAbbrev+' : '+a.unitCodeName}}]},0,0,0,0,0,0,[TS.model.shared,'UnitCode'],0);Ext.cmd.derive('TS.store.UnitCode',Ext.data.Store,{storeId:'UnitCode',model:'TS.model.shared.UnitCode',autoLoad:!1,settingsDependency:!0,proxy:{type:'default',directFn:'UnitCode.GetList',paramOrder:'dbi|username|start|limit|wbs1|wbs2|wbs3|includeInactive',extraParams:{start:0,limit:25,wbs1:'^',wbs2:'^',wbs3:'^',includeInactive:!0}}},0,0,0,0,0,0,[TS.store,'UnitCode'],0);Ext.cmd.derive('TS.model.shared.EquipmentList',Ext.data.Model,{idProperty:'equipmentId',identifier:'uuid',fields:[{name:'equipmentId',type:'string'},{name:'equipmentName',type:'string'},{name:'status',type:'string'}]},0,0,0,0,0,0,[TS.model.shared,'EquipmentList'],0);Ext.cmd.derive('TS.store.EquipmentList',Ext.data.Store,{storeId:'EquipmentList',model:'TS.model.shared.EquipmentList',autoLoad:!1,settingsDependency:!0,proxy:{type:'default',directFn:'Equipment.GetList',paramOrder:'dbi|username|start|limit|unitCodeId',extraParams:{unitCodeId:'First__a5eLoad'}}},0,0,0,0,0,0,[TS.store,'EquipmentList'],0);Ext.cmd.derive('TS.store.Schedulers',Ext.data.Store,{storeId:'Schedulers',model:'TS.model.shared.Employee',autoLoad:!1,settingsDependency:!0,pageSize:100000,proxy:{type:'default',directFn:'Employee.GetAll',paramOrder:'dbi|username'},remoteFilter:!1,filters:[{property:'isScheduler',value:!0}]},0,0,0,0,0,0,[TS.store,'Schedulers'],0);Ext.cmd.derive('TS.store.ActionOwners',Ext.data.Store,{storeId:'ActionOwners',model:'TS.model.shared.Employee',autoLoad:!1,settingsDependency:!0,pageSize:100000,proxy:{type:'default',directFn:'Employee.GetAll',paramOrder:'dbi|username'},remoteFilter:!1,filters:[{property:'flags',value:'A'}]},0,0,0,0,0,0,[TS.store,'ActionOwners'],0);Ext.cmd.derive('TS.store.Duration',Ext.data.Store,{autoLoad:!1,settingsDependency:!0,storeId:'Duration',fields:['value','description'],data:[{'value':'15','description':'.25'},{'value':'30','description':'.5'},{'value':'45','description':'.75'},{'value':'60','description':'1'},{'value':'75','description':'1.25'},{'value':'90','description':'1.5'},{'value':'105','description':'1.75'},{'value':'120','description':'2'},{'value':'135','description':'2.25'},{'value':'150','description':'2.5'},{'value':'165','description':'2.75'},{'value':'180','description':'3'},{'value':'195','description':'3.25'},{'value':'210','description':'3.5'},{'value':'225','description':'3.75'},{'value':'240','description':'4'},{'value':'255','description':'4.25'},{'value':'270','description':'4.5'},{'value':'285','description':'4.75'},{'value':'300','description':'5'},{'value':'315','description':'5.25'},{'value':'330','description':'5.5'},{'value':'345','description':'5.75'},{'value':'360','description':'6'},{'value':'375','description':'6.25'},{'value':'390','description':'6.5'},{'value':'405','description':'6.75'},{'value':'420','description':'7'},{'value':'435','description':'7.25'},{'value':'350','description':'7.5'},{'value':'365','description':'7.75'},{'value':'480','description':'8'},{'value':'495','description':'8.25'},{'value':'510','description':'8.5'},{'value':'525','description':'8.75'},{'value':'540','description':'9'},{'value':'555','description':'9.25'},{'value':'570','description':'9.5'},{'value':'585','description':'9.75'},{'value':'600','description':'10'},{'value':'615','description':'10.25'},{'value':'630','description':'10.5'},{'value':'645','description':'10.75'},{'value':'660','description':'11'},{'value':'675','description':'11.25'},{'value':'690','description':'11.5'},{'value':'705','description':'11.75'},{'value':'720','description':'12'},{'value':'735','description':'12.25'},{'value':'750','description':'12.5'},{'value':'765','description':'12.75'},{'value':'780','description':'13'},{'value':'795','description':'13.25'},{'value':'810','description':'13.5'},{'value':'825','description':'13.75'},{'value':'840','description':'14'},{'value':'855','description':'14.25'},{'value':'870','description':'14.5'},{'value':'885','description':'14.75'},{'value':'900','description':'15'},{'value':'915','description':'15.25'},{'value':'930','description':'15.5'},{'value':'945','description':'15.75'},{'value':'960','description':'16'},{'value':'975','description':'16.25'},{'value':'990','description':'16.5'},{'value':'1005','description':'16.75'},{'value':'1020','description':'17'},{'value':'1035','description':'17.25'},{'value':'1050','description':'17.5'},{'value':'1065','description':'17.75'},{'value':'1080','description':'18'},{'value':'1095','description':'18.25'},{'value':'1110','description':'18.5'},{'value':'1125','description':'18.75'},{'value':'1140','description':'19'},{'value':'1155','description':'19.25'},{'value':'1170','description':'19.5'},{'value':'1185','description':'19.75'},{'value':'1200','description':'20'},{'value':'1215','description':'20.25'},{'value':'1230','description':'20.5'},{'value':'1245','description':'20.75'},{'value':'1260','description':'21'},{'value':'1275','description':'21.25'},{'value':'1290','description':'21.5'},{'value':'1305','description':'21.75'},{'value':'1320','description':'22'},{'value':'1335','description':'22.25'},{'value':'1350','description':'22.5'},{'value':'1365','description':'22.75'},{'value':'1380','description':'23'},{'value':'1395','description':'23.25'},{'value':'1410','description':'23.5'},{'value':'1425','description':'23.75'},{'value':'1440','description':'24'}]},0,0,0,0,0,0,[TS.store,'Duration'],0);Ext.cmd.derive('TS.store.DaySequence',Ext.data.Store,{autoLoad:!1,settingsDependency:!0,storeId:'DaySequence',fields:['value','description'],data:[{'value':1,'description':'first'},{'value':2,'description':'second'},{'value':3,'description':'third'},{'value':4,'description':'fourth'}]},0,0,0,0,0,0,[TS.store,'DaySequence'],0);Ext.cmd.derive('TS.store.WeekdaySequence',Ext.data.Store,{autoLoad:!1,settingsDependency:!0,storeId:'WeekdaySequence',fields:['value','description'],data:[{'value':'SU','description':'Sunday'},{'value':'MO','description':'Monday'},{'value':'TU','description':'Tuesday'},{'value':'WE','description':'Wednesday'},{'value':'TH','description':'Thursday'},{'value':'FR','description':'Friday'},{'value':'SA','description':'Saturday'}]},0,0,0,0,0,0,[TS.store,'WeekdaySequence'],0);Ext.cmd.derive('TS.store.MonthSequence',Ext.data.Store,{autoLoad:!1,settingsDependency:!0,storeId:'MonthSequence',fields:['value','description'],data:[{'value':'1','description':'January'},{'value':'2','description':'February'},{'value':'3','description':'March'},{'value':'4','description':'April'},{'value':'5','description':'May'},{'value':'6','description':'June'},{'value':'7','description':'July'},{'value':'8','description':'August'},{'value':'9','description':'September'},{'value':'10','description':'October'},{'value':'11','description':'November'},{'value':'12','description':'December'}]},0,0,0,0,0,0,[TS.store,'MonthSequence'],0);Ext.cmd.derive('TS.store.FwaStatus',Ext.data.Store,{autoLoad:!1,settingsDependency:!0,storeId:'FwaStatus',fields:['value','description'],data:[{'value':'C','description':'Creating'},{'value':'D','description':'Scheduled'},{'value':'I','description':'In Progress'},{'value':'V','description':'Saved'},{'value':'S','description':'Submitted'},{'value':'A','description':'Approved'},{'value':'X','description':'Removed'}]},0,0,0,0,0,0,[TS.store,'FwaStatus'],0);Ext.cmd.derive('TS.model.shared.Hours',Ext.data.Model,{model:'',idProperty:'id',identifier:'uuid',fields:[{name:'id',type:'auto'},{name:'value',type:'date'},{name:'description',type:'date'}]},0,0,0,0,0,0,[TS.model.shared,'Hours'],0);Ext.cmd.derive('TS.store.HoursList',Ext.data.Store,{autoLoad:!1,settingsDependency:!0,storeId:'HoursList',model:'TS.model.shared.Hours',fields:['value','description'],data:[{'value':'1900-01-01T00:00:00','description':'12:00 AM'},{'value':'1900-01-01T01:00:00','description':'1:00 AM'},{'value':'1900-01-01T02:00:00','description':'2:00 AM'},{'value':'1900-01-01T03:00:00','description':'3:00 AM'},{'value':'1900-01-01T04:00:00','description':'4:00 AM'},{'value':'1900-01-01T05:00:00','description':'5:00 AM'},{'value':'1900-01-01T06:00:00','description':'6:00 AM'},{'value':'1900-01-01T07:00:00','description':'7:00 AM'},{'value':'1900-01-01T08:00:00','description':'8:00 AM'},{'value':'1900-01-01T09:00:00','description':'9:00 AM'},{'value':'1900-01-01T10:00:00','description':'10:00 AM'},{'value':'1900-01-01T11:00:00','description':'11:00 AM'},{'value':'1900-01-01T12:00:00','description':'12:00 PM'},{'value':'1900-01-01T13:00:00','description':'1:00 PM'},{'value':'1900-01-01T14:00:00','description':'2:00 PM'},{'value':'1900-01-01T15:00:00','description':'3:00 PM'},{'value':'1900-01-01T16:00:00','description':'4:00 PM'},{'value':'1900-01-01T17:00:00','description':'5:00 PM'},{'value':'1900-01-01T18:00:00','description':'6:00 PM'},{'value':'1900-01-01T19:00:00','description':'7:00 PM'},{'value':'1900-01-01T20:00:00','description':'8:00 PM'},{'value':'1900-01-01T21:00:00','description':'9:00 PM'},{'value':'1900-01-01T22:00:00','description':'10:00 PM'},{'value':'1900-01-01T23:00:00','description':'11:00 PM'},{'value':'1900-01-01T23:59:00','description':'11:59 PM'}]},0,0,0,0,0,0,[TS.store,'HoursList'],0);Ext.cmd.derive('TS.store.Providers',Ext.data.Store,{autoLoad:!1,settingsDependency:!0,storeId:'Providers',fields:['value','description'],data:[{'value':'@txt.att.net','description':'AT&T'},{'value':'@myboostmobile.com','description':'Boost Mobile'},{'value':'@sms.mycricket.com','description':'Cricket'},{'value':'@messaging.sprintpcs.com','description':'Sprint'},{'value':'@tmomail.net','description':'T-Mobile'},{'value':'@email.uscc.net','description':'US Cellular'},{'value':'@vtext.com','description':'Verizon'},{'value':'@vmobl.com','description':'Virgin Mobile'}]},0,0,0,0,0,0,[TS.store,'Providers'],0);Ext.cmd.derive('TS.model.shared.ExpCategory',TS.model.Base,{idProperty:'category',identifier:'uuid',fields:[{name:'category',type:'int'},{name:'description',type:'string'},{name:'detailType',type:'string'},{name:'billByDefault',type:'bool'},{name:'availableOnFWAs',type:'bool'},{name:'defaultRegularBillableAccount',type:'string'},{name:'defaultRegularNonbillableAccount',type:'string'},{name:'defaultNonRegularAccount',type:'string'}],proxy:{type:'default',directFn:'Exp.GetExpCategories',paramOrder:'dbi|username'}},0,0,0,0,0,0,[TS.model.shared,'ExpCategory'],0);Ext.cmd.derive('TS.store.ExpCategory',Ext.data.Store,{storeId:'ExpCategory',model:'TS.model.shared.ExpCategory',autoLoad:!1,settingsDependency:!0,pageSize:100000},0,0,0,0,0,0,[TS.store,'ExpCategory'],0);Ext.cmd.derive('TS.model.shared.ExpAccount',TS.model.Base,{idProperty:'account',identifier:'uuid',fields:[{name:'account',type:'string'},{name:'accountName',type:'string'},{name:'useOnRegularProjects',type:'bool'},{name:'billable',type:'bool'}],proxy:{type:'default',directFn:'Exp.GetExpAccounts',paramOrder:'dbi|username'}},0,0,0,0,0,0,[TS.model.shared,'ExpAccount'],0);Ext.cmd.derive('TS.store.ExpAccount',Ext.data.Store,{storeId:'ExpAccount',model:'TS.model.shared.ExpAccount',autoLoad:!1,settingsDependency:!0,pageSize:100000},0,0,0,0,0,0,[TS.store,'ExpAccount'],0);Ext.cmd.derive('TS.model.fwa.ExpFwaModel',Ext.data.Model,{fields:[{name:'fwaId',type:'string'},{name:'fwaNum',type:'string'},{name:'fwaName',type:'string'}]},0,0,0,0,0,0,[TS.model.fwa,'ExpFwaModel'],0);Ext.cmd.derive('TS.store.ExpFwaList',Ext.data.Store,{storeId:'ExpFwaList',model:'TS.model.fwa.ExpFwaModel',autoLoad:!1,settingsDependency:!0,proxy:{type:'default',directFn:'Fwa.GetExpenseFwaList',paramOrder:'dbi|username|start|limit|empId|startDate|isPreparer|isScheduler',extraParams:{startDate:'',isPreparer:'N',isScheduler:!1}},sorters:[{property:'fwaName',direction:'ASC'}]},0,0,0,0,0,0,[TS.store,'ExpFwaList'],0);Ext.cmd.derive('TS.model.shared.LaborCode',TS.model.Base,{idProperty:'id',identifier:'uuid',fields:[{name:'id',type:'auto'},{name:'lcLevel',type:'auto'},{name:'lcCode',type:'auto'},{name:'lcLabel',type:'auto'}],proxy:{type:'default',directFn:'LaborCode.GetList',paramOrder:'dbi|username|start|limit'}},0,0,0,0,0,0,[TS.model.shared,'LaborCode'],0);Ext.cmd.derive('TS.store.LaborCodes',Ext.data.Store,{storeId:'LaborCodes',model:'TS.model.shared.LaborCode',autoLoad:!1,settingsDependency:!0,pageSize:100000},0,0,0,0,0,0,[TS.store,'LaborCodes'],0);Ext.cmd.derive('TS.controller.Settings',Ext.app.Controller,{stores:['TS.store.WorkCodes','TS.store.Employees','TS.store.AllEmployees','TS.store.Roles','TS.store.ActiveRoles','TS.store.EmpGroups','TS.store.MyEmpGroup','TS.store.PriorityList','TS.store.NonFieldActionItem','TS.store.AllCrews','TS.store.CrewsForNewFWA','TS.store.HolidaySchedule','TS.store.ActionType','TS.store.WorkCodeList','TS.store.BillCategory','TS.store.TsEmployees','TS.store.UnitCode','TS.store.EquipmentList','TS.store.Schedulers','TS.store.ActionOwners','TS.store.Duration','TS.store.DaySequence','TS.store.WeekdaySequence','TS.store.MonthSequence','TS.store.FwaStatus','TS.store.HoursList','TS.store.Providers','TS.store.ExpCategory','TS.store.ExpAccount','TS.store.ExpFwaList','TS.store.LaborCodes'],listen:{global:{'Settings:Loaded':'doSynchronousCachedDirect'}},doSynchronousCachedDirect:function(b,a){var c=this;if(MobileApp){TS.service.SynchronousCachedDirect.init().then(function(){return c.onSettingsLoad(b,a)})['catch'](function(c){})}else {this.onSettingsLoad(b,a)}},onSettingsLoad:function(c,b){TS.app.settings=Ext.create('TS.model.admin.UserConfig',c).data;TS.common.TR.dictionary='TS.app.settings';if(b){return}var a=0;Ext.data.StoreManager.each(function(d){if(d.settingsDependency){d.on('load',function(){a++;if(a>=this.stores.length){Ext.GlobalEvents.fireEvent('App:Ready')}},this,{single:!0});d.load(function(f,a,e){if(!e){Ext.GlobalEvents.fireEvent('Error',{message:'Failed on call to '+a.getResponse().action+'.'+a.getResponse().method+'. Please contact Support.'})}})}},this)}},0,0,0,0,0,0,[TS.controller,'Settings'],0);Ext.cmd.derive('TS.view.Login',Ext.Container,{controller:'login',fullscreen:!0,layout:'card',modal:!0,autoShow:!0,activeItem:0,defaults:{xtype:'formpanel',layout:{type:'vbox',pack:'middle'}},items:[{reference:'loginForm',defaultButton:'loginSubmit',items:[{xtype:'titlebar',cls:'blue-title-bar',docked:'top',title:'User Login',id:'loginScreenTitle'},{xtype:'fieldset',cls:'loginForm'+IS_TABLET,items:[{xtype:'emailfield',label:'Username',allowBlank:!1,reference:'email',id:'loginScreenEmail'},{xtype:'textfield',inputType:'password',label:'Password',allowBlank:!1,name:'pin',reference:'pin',id:'loginScreenPin'},{xtype:'textfield',label:'Domain',name:'domain',reference:'domain',hidden:!0},{xtype:'checkboxfield',label:'Windows Authentication',labelAlign:'right',labelWidth:'95%',name:'integrated',reference:'integrated',hidden:!0}]},{xtype:'titlebar',cls:'ts-gray-toolbar',docked:'bottom',items:[{text:'Submit Login',handler:'submitEmailAddress',formBind:!0,ui:'action',align:'right',reference:'loginSubmit',id:'loginScreenSubmit'}]}]},{reference:'pinCreateForm',defaultButton:'createPinSubmit',items:[{xtype:'titlebar',cls:'blue-title-bar',docked:'top',title:'Create SSN'},{xtype:'fieldset',items:[{xtype:'textfield',inputType:'password',minLength:4,maxLength:4,label:'Last 4 SSN',allowBlank:!1,name:'ssn'}]},{xtype:'titlebar',cls:'ts-gray-toolbar',docked:'bottom',items:[{text:'Check SSN',align:'right',handler:'submitPinCreate',formBind:!0,ui:'action',reference:'createPinSubmit'},{text:'Cancel',align:'left',handler:'loginReset'}]}]},{reference:'pinForm',defaultButton:'pinSubmit',items:[{xtype:'titlebar',cls:'blue-title-bar',docked:'top',title:'Enter PIN'},{xtype:'fieldset',items:[{xtype:'numberfield',inputType:'password',minLength:4,maxLength:4,label:'PIN',allowBlank:!1,name:'pin'}]},{xtype:'titlebar',cls:'ts-gray-toolbar',docked:'bottom',items:[{text:'Submit PIN',handler:'submitPin',formBind:!0,ui:'action',align:'right',reference:'pinSubmit'}]}]}],listeners:{painted:function(){if(TS.MISSING_FILE){Ext.Msg.alert('Warning',"Missing file 'settings.js'; application cannot continue.")}}}},0,['window-login'],['widget','component','container','window-login'],{'widget':!0,'component':!0,'container':!0,'window-login':!0},['widget.window-login'],0,[TS.view,'Login'],0);Ext.cmd.derive('TS.controller.User',Ext.app.Controller,{listen:{global:{'ShowLicenseAgreement':'showLicenseAgreement'}},views:['TS.view.Login'],init:function(){Ext.create('TS.view.Login')},showLicenseAgreement:function(a){Ext.create('TS.common.window.LicenseAgreement',{modal:!0,viewModel:{data:a}}).show()}},0,0,0,0,0,0,[TS.controller,'User'],0);Ext.cmd.derive('TS.data.IconsSelector',Ext.Base,{singleton:!0,constructor:function(){var a=!MobileApp?'./classic/resources/icons/':'./modern/resources/icons/',b='.png',c={Fallback:a+'page_white_text'+b,PHOTO:a+'photo'+b,RTF:a+'text-document-file-icone-9088-96'+b,PPT:a+'powerpoint-icone-4723-96'+b,PDF:a+'adobe-acrobat-icone-6284-96'+b,XLSX:a+'microsoft-office-excel-icone-6690-96'+b,XLS:a+'microsoft-office-excel-icone-6690-96'+b,XML:a+'microsoft-office-excel-icone-6690-96'+b,XLA:a+'microsoft-office-excel-icone-6690-96'+b,CLASS:a+'page_white_cup'+b,SWF:a+'page_white_flash'+b,PHP:a+'page_white_php'+b,RBW:a+'page_white_ruby'+b,TXT:a+'text-document-file-icone-9088-96'+b,DOC:a+'microsoft-office-word-icone-9865-96'+b,DOCX:a+'microsoft-office-word-icone-9865-96'+b,ZIP:a+'page_white_zip'+b};Ext.apply(this,c)}},1,0,0,0,0,0,[TS.data,'IconsSelector'],0);Ext.cmd.derive('TS.model.fwa.DateList',TS.model.Base,{idProperty:'id',identifier:'uuid',fields:[{name:'id',type:'auto'},{name:'thisDate',type:'date',dateFormat:'c'}]},0,0,0,0,0,0,[TS.model.fwa,'DateList'],0);Ext.cmd.derive('TS.model.exp.Expense',TS.model.Base,{idProperty:'id',identifier:'uuid',fields:[{name:'id',type:'auto'},{name:'expReportId',type:'string'},{name:'expId',type:'string'},{name:'expDate',type:'date',dateFormat:'c'},{name:'reportDate',type:'date',dateFormat:'c'},{name:'status',type:'string'},{name:'empId',type:'string'},{name:'fwaId',type:'string'},{name:'fwaNum',type:'string'},{name:'fwaName',type:'string'},{name:'category',type:'string'},{name:'description',type:'string'},{name:'amount',type:'float'},{name:'wbs1',type:'string'},{name:'wbs2',type:'string'},{name:'wbs3',type:'string'},{name:'billable',type:'bool'},{name:'companyPaid',type:'bool'},{name:'modified',type:'string'},{name:'account',type:'string'},{name:'reason',type:'string'},{name:'other',type:'string'},{name:'miles',type:'float'},{name:'amountPerMile',type:'float'},{name:'eKGroup',type:'string'},{name:'attachmentsToDelete',type:'auto'},{name:'attachments',reference:'TS.model.shared.Attachment'},{name:'attachmentsToAdd',type:'auto'}]},0,0,0,0,0,0,[TS.model.exp,'Expense'],0);Ext.cmd.derive('TS.model.fwa.FwaAction',TS.model.Base,{idProperty:'id',identifier:'uuid',fields:[{name:'id',type:'auto'},{name:'actionItemId',type:'string'},{name:'actionItemDescr',type:'string'},{name:'actionTypeId',type:'string'},{name:'actionOwnerId',type:'string'},{name:'actionDateCompleted',type:'date',dateFormat:'c'},{name:'actionNotes',type:'string'},{name:'actionTempSaveData',type:'string'},{name:'tempDateCompleted',type:'date',dateFormat:'c'},{name:'tempOwnerId',type:'string'},{name:'tempNew',type:'bool'}]},0,0,0,0,0,0,[TS.model.fwa,'FwaAction'],0);Ext.cmd.derive('TS.model.fwa.FwaHours',TS.model.Base,{idProperty:'id',identifier:'uuid',fields:[{name:'id',type:'auto'},{name:'empId',type:'string',reference:{parent:'TS.model.shared.Employee'},unique:!0},{name:'lastName',type:'string'},{name:'crewRoleId',type:'string',reference:{parent:'TS.model.shared.CrewRole'}},{name:'isChief',type:'bool'},{name:'workDate',type:'date',dateFormat:'c'},{name:'workCodeId',type:'string'},{name:'workCodeAbbrev',type:'string'},{name:'regHrs',type:'float'},{name:'ovtHrs',type:'float'},{name:'ovt2Hrs',type:'float'},{name:'travelHrs',type:'float'},{name:'comment',type:'string'},{name:'readOnly',type:'bool'},{name:'readOnlyReason',type:'string'},{name:'attributes',type:'string'},{name:'modified',type:'auto'},{name:'laborCode',type:'string'}]},0,0,0,0,0,0,[TS.model.fwa,'FwaHours'],0);Ext.cmd.derive('TS.model.fwa.FwaNote',TS.model.Base,{idProperty:'id',identifier:'uuid',fields:[{name:'id',type:'auto'},{name:'seq',type:'string'},{name:'empId',type:'string'},{name:'contents',type:'string'},{name:'createDate',type:'date',dateFormat:'c',mapping:function(a){return TS.common.Util.getInUTCDate(a.createDate)}},{name:'modDate',type:'date',dateFormat:'c',mapping:function(a){return TS.common.Util.getInUTCDate(a.modDate)}},{name:'modUser',type:'string'},{name:'canEdit',type:'bool'},{name:'formattedDateEmployee',type:'string'},{name:'order',type:'int'}]},0,0,0,0,0,0,[TS.model.fwa,'FwaNote'],0);Ext.cmd.derive('TS.model.fwa.UnitDetail',TS.model.Base,{idProperty:'id',identifier:'uuid',fields:[{name:'id',type:'auto'},{name:'dtDate',type:'date',dateFormat:'c'},{name:'lValue1',type:'float'},{name:'lValue2',type:'float'},{name:'lValue3',type:'float'},{name:'sValue1',type:'string'},{name:'from',type:'string'},{name:'to',type:'string'}]},0,0,0,0,0,0,[TS.model.fwa,'UnitDetail'],0);Ext.cmd.derive('TS.data.field.UnitDetailList',Ext.data.field.Field,{sortType:'none',convert:function(b){var a=Ext.create('Ext.data.Store',{model:'TS.model.fwa.UnitDetail'});if(b){a.loadData(b)}return a},serialize:function(a){return Ext.Array.pluck(a.getRange(),'data')},getType:function(){return 'unitdetaillist'}},0,0,0,0,['data.field.unitdetaillist'],0,[TS.data.field,'UnitDetailList'],0);Ext.cmd.derive('TS.model.fwa.Unit',TS.model.Base,{idProperty:'id',identifier:'uuid',fields:[{name:'id',type:'auto'},{name:'unitCodeId',type:'string'},{name:'unitSeq',type:'string'},{name:'quantity',type:'float'},{name:'equipmentId',type:'string'},{name:'equipmentName',type:'string'},{name:'comments',type:'string'},{name:'unitDate',type:'date'},{name:'details',type:'unitdetaillist'},{name:'readOnly',type:'bool'},{name:'readOnlyReason',type:'string'}]},0,0,0,0,0,0,[TS.model.fwa,'Unit'],0);Ext.cmd.derive('TS.model.fwa.Work',TS.model.Base,{idProperty:'id',identifier:'uuid',fields:[{name:'id',type:'auto'},{name:'workCodeId',type:'auto'},{name:'workCodeAbbrev',reference:'workCodeId'},{name:'scheduledHours',type:'float'},{name:'actualHours',type:'float'},{name:'comments',type:'string'},{name:'picRequired',type:'bool'},{name:'pctComplete',type:'float'}]},0,0,0,0,0,0,[TS.model.fwa,'Work'],0);Ext.cmd.derive('TS.data.proxy.Default',Ext.data.proxy.Direct,{config:{reader:'default',writer:{type:'json'}},doRequest:function(e){var b=TS.app.settings,d=this.getParamOrder();var c={username:'username',empId:'empId',empGroupId:'empGroupId',employeeName:'empName',includeCrewMembers:'tsCanEnterCrewMemberTime',isPreparer:'isPreparer',includeInactive:'includeInactive',isPreparedByMe:'schedFwaPreparedByMe'};var a={};Ext.Object.each(c,function(c,f){if(Ext.Array.contains(d,c)){a[c]=b[f]}});this.setExtraParams(Ext.Object.merge(a,this.getExtraParams()));Ext.data.proxy.Direct.prototype.doRequest.apply(this,arguments)}},0,0,0,0,['proxy.default'],0,[TS.data.proxy,'Default'],0);Ext.cmd.derive('TS.data.reader.Default',Ext.data.reader.Json,{config:{rootProperty:'data',messageProperty:'message'}},0,0,0,0,['reader.default'],0,[TS.data.reader,'Default'],0);Ext.cmd.derive('TS.field.FssDate',Ext.data.field.Field,{convert:function(a,b){return TS.common.Util.getInUTCDate(a)}},0,0,0,0,['data.field.fssdate'],0,[TS.field,'FssDate'],0);Ext.cmd.derive('TS.model.admin.UserConfig',TS.model.Base,{idProperty:'username',identifier:'uuid',fields:[{name:'usernameDisplay',type:'auto'},{name:'username',type:'auto'},{name:'empId',type:'auto'},{name:'empName',type:'auto'},{name:'fwaTitle',type:'auto'},{name:'tsTitle',type:'auto'},{name:'schedLabel',type:'auto'},{name:'crewLabel',type:'auto'},{name:'crewLabelPlural',type:'auto'},{name:'crewChiefLabel',type:'auto'},{name:'crewChiefLabelPlural',type:'auto'},{name:'chiefRoleIds',type:'auto'},{name:'fwaLabel',type:'auto'},{name:'fwaAbbrevLabel',type:'auto'},{name:'wbs1SearchBy',type:'string',defaultValue:'id'},{name:'crewChiefLabelWithFwaAbbrevLabel',convert:function(b,a){return a.get('crewChiefLabel')+' '+a.get('fwaAbbrevLabel')+' List'}},{name:'crewLabelWithFwaAbbrevLabel',convert:function(b,a){return a.get('crewLabel')+' '+a.get('fwaAbbrevLabel')+' List'}},{name:'empNameFirstLast',convert:function(b,a){return ''}},{name:'fwaLabelPlural',type:'auto'},{name:'fwaWorkCodeActual',type:'string'},{name:'unitLabel',type:'string',defaultValue:'Unit'},{name:'unitLabelPlural',type:'string',defaultValue:'Units'},{name:'clientLabel',type:'auto'},{name:'clientLabelPlural',type:'auto'},{name:'contactLabel',type:'auto'},{name:'contactLabelPlural',type:'auto'},{name:'wbs1Label',type:'string'},{name:'wbs1LabelPlural',type:'string'},{name:'wbsDisplayLabel',convert:function(e,a){var b=a.get('wbs1Label')?a.get('wbs1Label'):'',c=a.get('wbs2Label')?a.get('wbs2Label'):'',d=a.get('wbs3Label')?a.get('wbs3Label'):'';return b+c+d}},{name:'wbs2Label',type:'string'},{name:'wbs2LabelPlural',type:'string'},{name:'wbs3Label',type:'string'},{name:'billCatLabel',type:'string'},{name:'wbs3LabelPlural',type:'string'},{name:'laborCodeLabel',type:'string'},{name:'laborCodeLabelPlural',type:'string'},{name:'workCodeLabel',type:'string',defaultValue:'Function'},{name:'workCodeLabelPlural',type:'string',defaultValue:'Functions'},{name:'workDescriptionLabel',type:'string',defaultValue:'Function Description'},{name:'workDescriptionLabelPlural',type:'string',defaultValue:'Function Descriptions'},{name:'tsAuditLevel',type:'auto'},{name:'tsIncrement',type:'auto'},{name:'tsAllowHtmlComments',type:'auto'},{name:'tsAllowUnsubmit',type:'auto'},{name:'tsAllowTimeOnInactive',type:'auto'},{name:'tsReqSubmitSignature',type:'auto'},{name:'tsReqApprovalSignature',type:'auto'},{name:'tsApproverCanModify',type:'bool'},{name:'tsReqApproval',type:'auto'},{name:'tsAutoCalcOvt',type:'auto'},{name:'tsAllowOvtHrs',type:'auto'},{name:'tsAllowOvt2Hrs',type:'auto'},{name:'tsAllowTravelHrs',type:'auto'},{name:'tsCanViewCrewMemberTime',type:'auto'},{name:'tsCanEnterCrewMemberTime',type:'auto'},{name:'tsCanModifyFwaHours',type:'auto'},{name:'tsModifiedFwaHoursFlowBack',type:'auto'},{name:'tsDisplayWbs1',type:'auto'},{name:'tsDisplayWbs2',type:'auto'},{name:'tsDisplayWbs3',type:'auto'},{name:'tsDisplayClient',type:'auto'},{name:'tsDisplayLaborCode',type:'auto'},{name:'tsDisplayBillCat',type:'auto'},{name:'tsLcLevels',type:'auto'},{name:'tcLcDelimiter',type:'auto'},{name:'tcLc1Start',type:'auto'},{name:'tcLc2Start',type:'auto'},{name:'tcLc3Start',type:'auto'},{name:'tcLc4Start',type:'auto'},{name:'tcLc5Start',type:'auto'},{name:'tsLc1Len',type:'auto'},{name:'tsLc2Len',type:'auto'},{name:'tsLc3Len',type:'auto'},{name:'tsLc4Len',type:'auto'},{name:'tsLc5Len',type:'auto'},{name:'tsDefLaborCode',type:'auto'},{name:'tsDefLc1',type:'auto'},{name:'tsDefLc2',type:'auto'},{name:'tsDefLc3',type:'auto'},{name:'tsDefLc4',type:'auto'},{name:'tsDefLc5',type:'auto'},{name:'tsLc1CanChange',type:'auto'},{name:'tsLc2CanChange',type:'auto'},{name:'tsLc3CanChange',type:'auto'},{name:'tsLc4CanChange',type:'auto'},{name:'tsLc5CanChange',type:'auto'},{name:'fwaAuditLevel',type:'auto'},{name:'fwaAvailableForFwaAssignment',type:'auto'},{name:'fwaDisplayWbs1',type:'auto'},{name:'fwaDisplayWbs2',type:'auto'},{name:'fwaDisplayWbs3',type:'auto'},{name:'fwaDisplayClient',type:'auto'},{name:'fwaReqChiefSignature',type:'auto'},{name:'fwaReqClientSignature',type:'auto'},{name:'fwaDisplayWorkCodeInHours',type:'auto'},{name:'fwaAutoNumbering',type:'auto'},{name:'fwaCanModify',type:'auto'},{name:'fwaAddWorkCode',type:'auto'},{name:'fwaCreateNew',type:'auto'},{name:'fwaAllowUnsubmit',type:'auto'},{name:'fwaUnitsEnabled',type:'bool'},{name:'fwaHideWorkCodes',type:'bool'},{name:'fwaUnitVisibility',type:'string'},{name:'fwaIsApprover',type:'auto'},{name:'schedVisibleHoursStart',type:'date',dateFormat:'c'},{name:'schedVisibleHoursEnd',type:'date',dateFormat:'c'},{name:'schedTimeAxisGranularity',type:'int'},{name:'schedCrewPreparedByMe',type:'string'},{name:'schedFwaPreparedByMe',type:'string'},{name:'schedWeeklyStartDay',type:'int'},{name:'schedDefaultTimeframe',type:'string'},{name:'schedDefaultStartDay',type:'string'},{name:'schedDaysLookback',type:'int'},{name:'schedFilters',type:'string'},{name:'tsDefLaborCode',type:'string'},{name:'tsDefBillCat',type:'string'},{name:'empGroupId',type:'string'},{name:'holidayScheduleId',type:'string'},{name:'requiredFieldText',type:'string',defaultValue:'(*required field)'},{name:'tsCanEnterCrewMemberTime',type:'boolean'},{name:'includeCrewMembers',type:'boolean'},{name:'isPreparer',type:'boolean',defaultValue:!1},{name:'includeInactive',type:'boolean',defaultValue:!1},{name:'okdLicense',type:'boolean',defaultValue:!1},{name:'tsIsApprover',type:'boolean'},{name:'availableForUseInField',type:'boolean'},{name:'udf_t1_Label',type:'string','default':''},{name:'fwaDisplayWorkCodePctComplete',type:'bool'},{name:'fwaDisplayStartButton',type:'bool'},{name:'fwaChiefDataFlowToCrew',type:'string'},{name:'fwaDisplayActionsbutton',type:'bool'},{name:'documentStorageLoc',type:'string'},{name:'imageStorageLoc',type:'string'},{name:'appAccess',type:'string'},{name:'appAccessRO',type:'string'},{name:'hideSections',type:'string'},{name:'empEkGroup',type:'auto'},{name:'exMileageRateReadOnly',type:'bool'},{name:'exMileageRate',type:'auto'},{name:'exMileageRateLabel',type:'string'},{name:'mapInterval',type:'auto',defaultValue:1000},{name:'mapApi',type:'auto',defaultValue:'AIzaSyCqae6gSIFW29rjr-ymlJdAG7akPVc1zC8'}]},0,0,0,0,0,0,[TS.model.admin,'UserConfig'],0);Ext.cmd.derive('TS.model.exp.ExpenseReport',TS.model.Base,{required:['TS.model.exp.Expense'],idProperty:'id',identifier:'uuid',fields:[{name:'id',type:'auto'},{name:'expReportId',type:'string'},{name:'empId',type:'string'},{name:'reportDate',type:'date',dateFormat:'c'},{name:'formattedReportDate',mapping:function(a){return Ext.Date.format(new Date(a.reportDate),'m/d/Y')}},{name:'reportName',type:'string'},{name:'visionStatus',type:'string'},{name:'status',type:'string'},{name:'submittedBy',type:'string'},{name:'submittedDate',type:'date'},{name:'apprRejBy',type:'string'},{name:'apprRejDate',type:'date'},{name:'apprRejComment',type:'string'},{name:'signature',type:'auto'},{name:'expLines',type:'auto'}]},0,0,0,0,0,0,[TS.model.exp,'ExpenseReport'],0);Ext.cmd.derive('TS.model.fss.FssList',TS.model.Base,{identifier:'uuid',fields:[{name:'app',type:'string'},{name:'name',type:'string'},{name:'path',type:'string'},{name:'icon',type:'string'},{name:'offline',type:'bool'}]},0,0,0,0,0,0,[TS.model.fss,'FssList'],0);Ext.cmd.derive('TS.model.fwa.CrewChief',TS.model.Base,{idProperty:'id',identifier:'uuid',fields:[{name:'id',type:'auto'},{name:'crewChiefEmpId',type:'string'},{name:'crewChiefEmpName',type:'string'}]},0,0,0,0,0,0,[TS.model.fwa,'CrewChief'],0);Ext.cmd.derive('TS.model.fwa.FwaDailyList',Ext.data.Model,{idProperty:'id',identifier:'uuid',fields:[{name:'id',type:'auto'},{name:'fwaId',type:'auto'},{name:'schedStartDate',type:'date',dateFormat:'c',mapping:function(a){return TS.common.Util.getInUTCDate(a.schedStartDate)}},{name:'scheduledCrewId',type:'string'},{name:'scheduledCrewChiefId',type:'string'},{name:'topLevelDescription',type:'string'},{name:'detailsDescription',type:'auto'}]},0,0,0,0,0,0,[TS.model.fwa,'FwaDailyList'],0);Ext.cmd.derive('TS.model.fwa.FwaInfo',Ext.data.Model,{fields:[{name:'fieldInfo',type:'string'},{model:'TS.model.fwa.Work',role:'workInfo'},{model:'TS.model.fwa.Unit',role:'unitsInfo'}]},0,0,0,0,0,0,[TS.model.fwa,'FwaInfo'],0);Ext.cmd.derive('TS.model.fwa.GPSData',Ext.data.Model,{idProperty:'id',identifier:'uuid',fields:[{name:'id',type:'auto'},{name:'gpsAltitude',type:'auto'},{name:'gpsAltitudeRef',type:'auto'},{name:'gpsDestBearing',type:'auto'},{name:'gpsDestBearingRef',type:'auto'},{name:'gpsImgDirection',type:'auto'},{name:'gpsImgDirectionRef',type:'auto'},{name:'gpsLatitude',type:'auto'},{name:'gpsLatitudeRef',type:'auto'},{name:'gpsLongitude',type:'auto'},{name:'gpsLongitudeRef',type:'auto'},{name:'dateTime',type:'auto',dateFormat:'c',mapping:function(a){return TS.common.Util.getInUTCDate(a.dateTime)}},{name:'altitudeInFeet',mapping:function(a){return a.gpsAltitude.numerator/a.gpsAltitude.denominator*3.2808}},{name:'bearing',mapping:function(a){return a.gpsDestBearing.numerator/a.gpsDestBearing.denominator}},{name:'direction',mapping:function(a){return a.gpsImgDirection.numerator/a.gpsImgDirection.denominator}},{name:'latitude',mapping:function(a){return TS.Util.dmsToDegrees(a.gpsLatitude[0].numerator/a.gpsLatitude[0].denominator,a.gpsLatitude[1].numerator/a.gpsLatitude[1].denominator,a.gpsLatitude[2].numerator/a.gpsLatitude[2].denominator,a.gpsLatitudeRef)}},{name:'longitude',mapping:function(a){return TS.Util.dmsToDegrees(a.gpsLongitude[0].numerator/a.gpsLongitude[0].denominator,a.gpsLongitude[1].numeratordata.gpsLongitude[1].denominator,a.gpsLongitude[2].numerator/a.gpsLongitude[2].denominator,a.gpsLongitudeRef)}}]},0,0,0,0,0,0,[TS.model.fwa,'GPSData'],0);Ext.cmd.derive('TS.model.fwa.RecurrenceConfig',TS.model.Base,{idProperty:'id',identifier:'uuid',fields:[{name:'id',type:'auto'},{name:'freq',type:'string'},{name:'interval',type:'int'},{name:'everyWeekday',type:'boolean'},{name:'monday',type:'boolean'},{name:'tuesday',type:'boolean'},{name:'wednesday',type:'boolean'},{name:'thursday',type:'boolean'},{name:'friday',type:'boolean'},{name:'saturday',type:'boolean'},{name:'sunday',type:'boolean'},{name:'dayNum',type:'int'},{name:'dayOccurrence',type:'int'},{name:'dayOfWeek',type:'string'},{name:'startDate',type:'date'},{name:'count',type:'int'},{name:'until',type:'date'},{name:'noEndDate',type:'boolean'},{name:'addlDates',type:'auto'},{name:'exceptDates',type:'auto'},{name:'recurEnd',type:'auto'},{name:'recurStart',type:'auto'}]},0,0,0,0,0,0,[TS.model.fwa,'RecurrenceConfig'],0);Ext.cmd.derive('TS.model.shared.Address',TS.model.Base,{idProperty:'addressId',identifier:'uuid',fields:[{name:'addressId',type:'auto'},{name:'address1',type:'string'},{name:'address2',type:'string'},{name:'city',type:'string'},{name:'state',type:'string'},{name:'zip',type:'string'},{name:'country',type:'string'},{name:'latitude',type:'auto','default':0},{name:'longitude',type:'auto','default':0}],proxy:{type:'default',directFn:'Address.GetAddress',paramOrder:'dbi|username|clientId|addressId',writer:{type:'json',writeAllFields:!0}}},0,0,0,0,0,0,[TS.model.shared,'Address'],0);Ext.cmd.derive('TS.model.shared.Attachment',TS.model.Base,{idProperty:'id',identifier:'uuid',fields:[{name:'id',type:'auto'},{name:'attachmentId',type:'int'},{name:'attachedByEmpId',type:'string'},{name:'owningModelType',type:'string'},{name:'owningModelId',type:'string'},{name:'dateAttached',type:'auto'},{name:'attachmentType',type:'string'},{name:'extension',type:'string'},{name:'filename',type:'string'},{name:'description',type:'string'},{name:'attachmentItem',type:'auto'},{name:'location',type:'string'},{name:'includeTemplates',type:'bool'},{name:'exIfData',type:'auto'}],proxy:{type:'default',api:{read:'AttachmentData.GetAttachmentById',create:'AttachmentData.SaveAttachment'},paramOrder:'dbi|username|attachmentid'}},0,0,0,0,0,0,[TS.model.shared,'Attachment'],0);Ext.cmd.derive('TS.model.shared.AttachmentData',TS.model.Base,{idProperty:'id',identifier:'uuid',fields:[{name:'id',type:'auto'},{name:'attachmentId',type:'int'},{name:'attachmentItem',type:'auto'}],proxy:{type:'direct',api:{read:'AttachmentData.GetAttachmentDataById'},paramOrder:'dbi|username|id'}},0,0,0,0,0,0,[TS.model.shared,'AttachmentData'],0);Ext.cmd.derive('TS.model.shared.IdList',TS.model.Base,{idProperty:'id',identifier:'uuid',fields:[{name:'id',type:'auto'}]},0,0,0,0,0,0,[TS.model.shared,'IdList'],0);Ext.cmd.derive('TS.model.shared.PrintTemplate',TS.model.Base,{idProperty:'templateId',identifier:'uuid',fields:[{name:'templateId',type:'auto'},{name:'templateName',type:'string'},{name:'templateApp',type:'string'},{name:'templateType',type:'string'},{name:'templateOrigPath',type:'string'},{name:'filename',mapping:function(a){var b=Ext.Date.format(new Date(),'Y-m-d h.i A');return b+' '+a.templateName}},{name:'description',mapping:function(a){var b=Ext.Date.format(new Date(),'Y-m-d h.i A');return b+' '+a.templateName}}],proxy:{type:'default',directFn:'Document.GetTemplateList',paramOrder:'dbi|username|modelType|modelId'}},0,0,0,0,0,0,[TS.model.shared,'PrintTemplate'],0);Ext.cmd.derive('TS.model.shared.Wbs1',TS.model.Base,{idProperty:'newId',identifier:'uuid',fields:[{name:'newId',type:'auto'},{name:'id',type:'string',sortType:'asUCText'},{name:'name',type:'string',sortType:'asUCText'},{name:'chargeType',type:'string'},{name:'clientId',reference:'TS.model.shared.Client'},{name:'clientName',type:'string'},{name:'wbs2Required',type:'auto'}],proxy:{type:'default',autoLoad:!1,directFn:'Wbs1.GetList',paramOrder:'dbi|username|start|limit|filter|empId|includeInactive|app'}},0,0,0,0,0,0,[TS.model.shared,'Wbs1'],0);Ext.cmd.derive('TS.model.shared.Wbs2',TS.model.Base,{idProperty:'newId',identifier:'uuid',fields:[{name:'newId',type:'auto'},{name:'id',type:'string',sortType:'asUCText'},{name:'name',type:'string',sortType:'asUCText'},{name:'wbs3Required',type:'auto'},{name:'wbs1',type:'string'}],proxy:{type:'default',directFn:'Wbs2.GetList',paramOrder:'dbi|username|start|limit|empId|wbs1|includeInactive|app'}},0,0,0,0,0,0,[TS.model.shared,'Wbs2'],0);Ext.cmd.derive('TS.model.shared.Wbs3',TS.model.Base,{idProperty:'newId',identifier:'uuid',fields:[{name:'newId',type:'auto'},{name:'id',type:'string',sortType:'asUCText'},{name:'name',type:'string',sortType:'asUCText'},{name:'wbs1',type:'string'},{name:'wbs2',type:'string'}],proxy:{type:'default',directFn:'Wbs3.GetList',paramOrder:'dbi|username|empId|wbs1|wbs2|includeInactive|app',extraParams:{includeInactive:!1}}},0,0,0,0,0,0,[TS.model.shared,'Wbs3'],0);Ext.cmd.derive('TS.model.shared.WbsProjectTree',Ext.data.TreeModel,{entityName:'Projects',idProperty:'id',fields:[{name:'id',type:'auto',sortType:'asUCText'},{name:'model',type:'auto'},{name:'displayId',type:'auto',sortType:'asDisplayId'},{name:'text',type:'auto',sortType:'asUCText'},{name:'mtype',type:'auto'},{name:'leaf',type:'auto'},{name:'parentId',type:'auto'},{name:'children',type:'auto'},{name:'clientId',type:'auto'},{name:'originalQTip',mapping:'qtip'},{name:'qtip',mapping:function(a){return a.displayId+' : '+a.text}}]},0,0,0,0,0,0,[TS.model.shared,'WbsProjectTree'],0);Ext.cmd.derive('TS.model.ts.LaborCode',TS.model.Base,{idProperty:'id',identifier:'uuid',fields:[{name:'id',type:'auto'},{name:'lcLevel',type:'auto'},{name:'lcCode',type:'auto'},{name:'lcLabel',type:'auto'}],proxy:{type:'default',directFn:'LaborCode.GetList',paramOrder:'dbi|username|start|limit'}},0,0,0,0,0,0,[TS.model.ts,'LaborCode'],0);Ext.cmd.derive('TS.model.ts.TsSummary',TS.model.Base,{idProperty:'tsPeriodId',identifier:'uuid',fields:[{name:'tsPeriodId',type:'auto'},{name:'startDate',type:'date',dateFormat:'c'},{name:'endDate',type:'date',dateFormat:'c'},{name:'expectedHrs',type:'auto'},{name:'rows',type:'auto'}],proxy:{type:'default',directFn:'TimeSheet.GetTimesheetApprovalSummary',paramOrder:'dbi|username|tsPeriodId'}},0,0,0,0,0,0,[TS.model.ts,'TsSummary'],0);Ext.cmd.derive('TS.model.ts.TsSummaryRow',TS.model.Base,{idProperty:'id',identifier:'uuid',fields:[{name:'id',type:'auto'},{name:'seq',type:'auto'},{name:'empId',type:'auto'},{name:'empName',type:'auto'},{name:'org',type:'auto'},{name:'tsAllowOvtHrs',type:'auto'},{name:'tsAllowOvt2Hrs',type:'auto'},{name:'tsAllowTravelHrs',type:'auto'},{name:'totalRegHrs',type:'auto'},{name:'totalOvtHrs',type:'auto'},{name:'totalOvt2Hrs',type:'auto'},{name:'totalTravelHrs',type:'auto'},{name:'totalHrs',type:'auto'},{name:'totalFwaHrs',type:'auto'},{name:'expectedHrs',type:'auto'},{name:'status',type:'auto'},{name:'visionStatus',type:'string'},{name:'statusString',type:'auto'},{name:'cells',type:'auto'}]},0,0,0,0,0,0,[TS.model.ts,'TsSummaryRow'],0);Ext.cmd.derive('TS.view.LicenseAgreementController',Ext.app.ViewController,{init:function(){var a=this.getView().lookup('licenseAgreementHtml');Licensing.GetLicenseAgreement(function(b,c,d){if(b&&b.data){a.setHtml(b.data)}},this,{autoHandle:!0})},doCancelLicense:function(){var b=this,a=TS.Messages.getByCode('cancelledLicenseAgreement');Ext.Msg.show({title:a.title,message:a.message,buttons:Ext.Msg.OK,icon:Ext.Msg.WARNING,fn:function(a){if(a=='ok'){b.onCancelLicense()}else {return}}})},onCancelLicense:function(){Ext.create('TS.view.Login');if(!Ext.isModern){this.getView().close()}else {this.closeView()}},doSaveLicense:function(){var a=this,b=a.getViewModel(),f=Ext.Object.fromQueryString(location.search),d=!0,c,e;Licensing.SetOkdLicense(window.userGlobal.dbi,b.get('username'),function(c,e,d){if(d&&c.data){Ext.GlobalEvents.fireEvent('Settings:Loaded',b.getData());a.closeView()}},a,{autoHandle:!0})},onRadioCheck:function(a){var b=a.up('container').down('button[action=save]');a.dontAgree?b.disable():b.enable()}},0,0,0,0,['controller.window-licenseagreement'],0,[TS.view,'LicenseAgreementController'],0);Ext.cmd.derive('TS.view.LoginController',Ext.app.ViewController,{listen:{global:{'loginReset':'loginReset'}},init:function(){TS.MISSING_FILE=!1;if(typeof SETTINGS=='undefined'){this.getView().lookup('loginSubmit').setHidden(!0);TS.MISSING_FILE=!0}else {var a=this,c,b,f=a.lookup('email'),k=a.getUrlParams().email,j=a.lookup('pin'),e=a.lookup('domain'),d=a.lookup('integrated'),g=function(){try{localStorage.setItem('test',!0);localStorage.removeItem('test');return !0}catch(m){return !1}}();b=Ext.Object.fromQueryString(location.search).app;if(b=='History'){window.userGlobal={dbi:SETTINGS.config.DBI,email:a.getUrlParams().email,username:a.getUrlParams().username,fwaId:a.getUrlParams().fwaId};a.getUserConfigByUserName()}if(g){c=localStorage.getItem('emailAddress')||'';f.setValue(c);e.setValue(localStorage.getItem('domain')&&localStorage.getItem('domain')!='_none_'?localStorage.getItem('domain'):'');d.setValue(localStorage.getItem('integrated')||!1)}var h,i=TS.common.Util.getLanguage(),l=TS.common.Util.getDBI();if(b!='History'){a.checkSupportIntegratedLogin();a.setTranslations()}}},checkSupportIntegratedLogin:function(){var c=this,d=c.lookup('domain'),a=c.lookup('integrated'),e=TS.common.Util.getLanguage(),f=TS.common.Util.getDBI(),b=JSON.parse(localStorage.getItem('integratedLogin'));if(IS_OFFLINE&&MobileApp||!navigator.onLine){TS.app.settings=Ext.JSON.decode(localStorage.getItem('TS.app.settings'));d.setHidden(!b);a.setHidden(!b);a.setValue(b)}else {User.SupportIntegratedLogin(e,f,function(b,c,e){if(b.success){localStorage.setItem('integratedLogin',Ext.JSON.encode(b.data));d.setHidden(!b.data);a.setHidden(!b.data);a.setValue(b.data)}else {Ext.Msg.alert('Critical Failure','Unable to check support for integrated login. Contact support.')}},c,{autoHandle:!0})}},setTranslations:function(){},getUrlParams:function(){return Ext.Object.fromQueryString(location.search)},submitEmailAddress:function(){var a=this,b=new Ext.LoadMask({msg:'Confirming user...',target:a.getView()}),f=a.lookup('email').getValue(),c=a.lookup('domain').getValue(),d=a.lookup('integrated').getValue(),h=d?'Y':'N',l=a.lookup('loginForm'),g=l.getValues(),i=function(){try{localStorage.setItem('test',!0);localStorage.removeItem('test');return !0}catch(n){return !1}}(),e;if(!f||!g.pin){Ext.Msg.alert('Warning','Both Username and Password are required fields');return}b.show();if(d){if(!c){Ext.Msg.alert('Warning','Domain is a required field');b.hide();return}e=a.cryptoEncrypt(g.pin)}else {e=sha256_digest(f.toUpperCase()+g.pin)}c=c==''?'_none_':c;localStorage.setItem('domain',c);localStorage.setItem('integrated',d);localStorage.setItem('integratedLogin',d);b.show();var j=TS.common.Util.getLanguage(),m=TS.common.Util.getDBI(),k=f.toUpperCase();window.userGlobal={dbi:m,email:f,language:j,username:k,password:e,encrypted_username:'',ssn:'',domain:c,integrated:d};if(IS_OFFLINE&&MobileApp||!navigator.onLine){if(localStorage.getItem('username')!=window.userGlobal.username||localStorage.getItem('password')!=e){Ext.Msg.alert('Warning','Application is currently offline. Username and/or password do not match prior user.')}else {Ext.GlobalEvents.fireEvent('Settings:Loaded',Ext.JSON.decode(localStorage.getItem('TS.app.settings')));a.closeView()}}else {User.Login(window.userGlobal.dbi,window.userGlobal.username,window.userGlobal.password,'_none_',h,function(c,k,h){var g=c.message,d,j;if(h){d=c.data.split('^^^')[0];j=c.data.split('^^^')[1];if(c.total==1){if(i){localStorage.setItem('emailAddress',f);if(localStorage.getItem('userSettings')==undefined||localStorage.getItem('userSettings')==null){localStorage.setItem('userSettings','{"annotationMenu":{"menuTools":null,"menuPin":true}}')}localStorage.setItem('freeTextAnnotation','false');localStorage.setItem('needSaveCheck','false')}window.userGlobal.encrypted_username=d;localStorage.setItem('username',window.userGlobal.username);localStorage.setItem('password',e);a.getUserConfig(b)}else {Ext.create('Ext.MessageBox').show({title:'Login Error',message:'Error on login, please call support.',scrollable:!0,buttons:Ext.MessageBox.OK})}}else {if(g.mdBody!=''){a.showResponseMessage(g)}else {Ext.create('Ext.MessageBox').show({title:'Login Error',message:'Error on login, please call support.',scrollable:!0,buttons:Ext.MessageBox.OK})}}b.hide()},a,{autoHandle:!0})}b.hide()},cryptoEncrypt:function(d){var b=CryptoJS.enc.Utf8.parse('7061737323313233'),c=CryptoJS.enc.Utf8.parse('7061737323313233'),a=CryptoJS.AES.encrypt(CryptoJS.enc.Utf8.parse(d),b,{keySize:128/8,iv:c,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7}),e=CryptoJS.AES.decrypt(a,b,{keySize:128/8,iv:c,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7});return a.toString()},showPinLogin:function(a,b){if(a.pin){this.submitPin(a,b)}else {this.getView().setActiveItem(2)}},showPinCreate:function(a){var c=this,b=c.getView();b.setActiveItem(1);if(a){a.hide()}else {b.setLoading(!1)}},loginReset:function(){var a=this,c=a.lookup('email'),b=localStorage.getItem('emailAddress')||'';a.getView().setLoading(!1);a.getView().setActiveItem(0);a.lookup('pinCreateForm').getForm().reset();c.setValue(b)},encodePin:function(b){var e=0,c,d='',a,f=b.toString().length+1;Ext.each(b.toString().split(''),function(g){a=g.charCodeAt(0);a=a-f-e%5;c=a.toString(16).toUpperCase();d+=c;e++});b=Math.floor(Math.random()*10).toString()+d+Math.floor(Math.random()*10).toString();return b},submitPin:function(c,b){var a=this,d=a.lookup('pinForm').getForm(),e=c||d.getValues();a.getView().setLoading(!0,'Validating PIN...');if(c||d.isValid()){User.AuthenticatePin(window.userGlobal.dbi,e.pin,window.userGlobal.email,function(d,e,f){if(d.data){a.getView().setLoading(!1);a.getUserConfig(b)}else {a.showPinCreate(b);a.getView().setLoading(!1)}},a,{autoHandle:!0})}else {Ext.GlobalEvents.fireEvent('Message:Code','authenticateWithPinMissingFields');a.getView().setLoading(!1)}},showResponseMessage:function(a){Ext.create('Ext.MessageBox').show({message:a.mdBody,scrollable:!0,buttons:Ext.MessageBox.OK});this.getView().setLoading(!1)},submitPinCreate:function(e){var a=this,c=a.lookup('pinCreateForm').getForm(),b=c.getValues(),d=Ext.Object.fromQueryString(location.search),f=a.encodePin(b.ssn);if(c.isValid()){if(!d.lang){d.lang='en-US'}if(b.ssn==window.userGlobal.ssn){User.UpdatePassword(window.userGlobal.dbi,window.userGlobal.encrypted_username,window.userGlobal.password,function(b,c,d){if(b.total===1){a.getUserConfig(e)}else {Ext.Msg.confirm('Update Password Error',b.message.Body+'\n Do you wish re-enter?',function(f){if(f==='yes'){a.loginReset()}else {localStorage.setItem('emailAddress','')}});Ext.GlobalEvents.fireEvent('Error',Ext.JSON.encode(b))}},this,{autoHandle:!0})}else {Ext.create('Ext.MessageBox').show({title:'Check SSN Error',message:'SSN entered does not match',scrollable:!0,buttons:Ext.MessageBox.OK})}}},getUserConfig:function(g){var e=this,f=Ext.Object.fromQueryString(location.search),c,a=!0,b,d;UserConfig.GetByUsername(window.userGlobal.dbi,window.userGlobal.encrypted_username,'FSS',function(h,i,j){if(h.success&&h.data){c=h.data.appAccess.split('^');switch(f.app){case 'FWA':case 'fwa':a=c.indexOf('FF')>=0;b=f.app;break;case 'TS':case 'ts':a=c.indexOf('FT')>=0;b='Timesheet';break;case 'TSA':case 'tsa':a=h.data.tsIsApprover;b='Timesheet Approval';break;case 'Scheduler':case 'scheduler':a=c.indexOf('FS')>=0;b=f.app;break;case 'EX':case 'ex':a=c.indexOf('FE')>=0;b='Expenses';break;case 'EXA':case 'exa':a=h.data.exIsApprover;b='Expense Approval';break;}if(!a){d=TS.Messages.getByCode('notAuthorizedForApplication');Ext.Msg.show({title:d.title,message:'You have not been configured for access to the '+b,buttons:Ext.Msg.OK,icon:Ext.Msg.WARNING,fn:function(a){if(a=='ok'){e.loginReset()}}})}else {if(!h.data.okdLicense){e.showLicenseAgreement(h.data)}else {Ext.GlobalEvents.fireEvent('Settings:Loaded',h.data)}}e.closeView()}else {if(h.data=='Not Authorized'){d=TS.Messages.getByCode('notAuthorizedForApplication');Ext.Msg.show({title:d.title,message:d.message+f.app,buttons:Ext.Msg.OK,icon:Ext.Msg.WARNING,fn:function(a){if(a=='ok'){e.loginReset()}}})}else {Ext.Msg.alert('Critical Failure','Unable to load global settings from server. Contact support.')}}},e,{autoHandle:!0});if(g){g.hide()}},getUserConfigByUserName:function(){var a=this,b=Ext.Object.fromQueryString(location.search);UserConfig.GetByUsername(window.userGlobal.dbi,window.userGlobal.username,b.app,function(b,c,d){if(b.success&&b.data){a.closeView();Ext.GlobalEvents.fireEvent('Settings:Loaded',b.data)}else {Ext.Msg.alert('Critical Failure','Unable to load global settings from server. Contact support.')}},a,{autoHandle:!0})},showLicenseAgreement:function(a){Ext.create({xtype:'window-licenseagreement',modal:!0,autoShow:!0,viewModel:{data:a}})}},0,0,0,0,['controller.login'],0,[TS.view,'LoginController'],0);Ext.cmd.derive('TS.view.main.MainController',Ext.app.ViewController,{initViewModel:function(){var b=this,c=b.getViewModel(),a=TS.app.settings;c.set('user',a);c.set('settings',a);b.setDocumentTitle()},setDocumentTitle:function(){document.title=this.getViewModel().getPageTitle()}},0,0,0,0,['controller.main'],0,[TS.view.main,'MainController'],0);Ext.cmd.derive('TS.view.main.MainModel',Ext.app.ViewModel,{data:{name:'CCG App',user:null,settings:null},getPageTitle:function(){return this.get('name')},formulas:{isDesktop:function(a){return Ext.os.is.Desktop||!1},notDesktop:function(){return !Ext.os.is.Desktop},isTimesheetApproval:function(a){return a('name')=='TimesheetApproval'},isTimesheet:function(a){return a('name')=='Timesheet'},isFwa:function(a){return !a('newFwa')&&a('name')=='FWA'},canWindowFwaCopyOpen:function(a){return !a('newFwa')&&(a('name')=='FWA'||a('name')=='Scheduler')&&a('isChief')&&!IS_OFFLINE},canFwaCopy:function(a){return !a('newFwa')&&(a('name')=='FWA'||a('name')=='Scheduler')},isNewFwaWithRights:function(a){return a('newFwa')&&a('hasRights')},isNewOrOffline:function(a){return a('newFwa')},notFwaCreateNew:function(a){return !a('settings.fwaCreateNew')||IS_OFFLINE},isScheduler:function(a){return a('name')=='Crew'||a('name')=='Scheduler'},isSchedulerAndNotReadOnly:function(a){return (a('name')=='Crew'||a('name')=='Scheduler')&&a('settings.schedReadOnly')},schedReadOnlyAndNotScheduler:function(a){return a('name')!='Crew'&&a('name')!='Scheduler'||a('settings.schedReadOnly')},notIsSchedulerAndNewFwa:function(a){return a('newFwa')&&!a('isScheduler')},isNotSchedulerOrReadOnly:function(a){return a('name')!='Crew'&&a('name')!='Scheduler'||a('settings.schedReadOnly')},isSchedulerAndCannotApprove:function(a){return a('isScheduler')&&!a('settings.fwaIsApprover')},isSchedulerAndCannotApproveOrIsNotScheduler:function(a){return a('isScheduler')&&!a('settings.fwaIsApprover')||a('name')!='Crew'&&a('name')!='Scheduler'},isSchedulerOrNewFwa:function(a){return a('newFwa')||a('name')=='Scheduler'},hideFwaStartStop:function(a){return a('newFwa')||a('isScheduler')||!a('settings.fwaDisplayStartButton')},hideBillCategory:function(a){return a('settings.tsDisplayBillCat')=='N'},hideLaborCode:function(a){return a('settings.tsDisplayLaborCode')=='N'},hideFwaWbs1:function(a){if(a('settings.fwaDisplayWbs1')=='B'||a('settings.fwaDisplayWbs1')=='U'){return !1}else {return !0}},hideFwaWbs1Name:function(a){if(a('settings.fwaDisplayWbs1')=='B'||a('settings.fwaDisplayWbs1')=='A'){return !1}else {return !0}},hideFwaWbs2:function(a){if(a('settings.fwaDisplayWbs2')=='B'||a('settings.fwaDisplayWbs2')=='U'){return !1}else {return !0}},hideFwaWbs2Name:function(a){if(a('settings.fwaDisplayWbs2')=='B'||a('settings.fwaDisplayWbs2')=='A'){return !1}else {return !0}},hideFwaWbs3:function(a){if(a('settings.fwaDisplayWbs3')=='B'||a('settings.fwaDisplayWbs3')=='U'){return !1}else {return !0}},hideFwaWbs3Name:function(a){if(a('settings.fwaDisplayWbs3')=='B'||a('settings.fwaDisplayWbs3')=='A'){return !1}else {return !0}},hideFwaDisplayClient:function(a){return a('settings.fwaDisplayClient')=='N'},hideFwaDisplayCrew:function(a){return a('settings.fwaDisplayCrew')=='N'},canFwaAddWorkCode:function(a){return a('settings.fwaAddWorkCode')!='N'},hideFwaClientSignatures:function(a){return a('newFwa')||a('settings.hideSections').indexOf('CS')!=-1},hideFwaChiefSignatures:function(a){return a('newFwa')||a('settings.hideSections').indexOf('ES')!=-1},hideTsWbs2:function(a){return a('settings.tsDisplayWbs2')=='N'},hideTsWbs3:function(a){return a('settings.tsDisplayWbs3')=='N'},hideTsDisplayClient:function(a){return a('settings.tsDisplayClient')=='N'},hideEmployeeHrsWorkCode:function(a){return !a('settings.fwaDisplayWorkCodeInHours')},tsIncrement:function(a){if(a('settings.tsIncrement')==15){return 0.25}if(a('settings.tsIncrement')==30){return 0.5}return 1},tsApproverCanModify:function(a){return a('settings.tsApproverCanModify')},fwaHideActualHours:function(a){return a('settings.fwaWorkCodeActual')=='H'},fwaReadOnlyActualHours:function(a){return a('settings.fwaWorkCodeActual')=='R'},fwaUnitsEnabled:function(a){return a('settings.fwaUnitsEnabled')&&a('settings.fwaUnitVisibility')!='H'&&a('settings.hideSections').indexOf('U')==-1},fwaHideWorkCodes:function(a){return a('settings.fwaHideWorkCodes')||a('settings.hideSections').indexOf('W')!=-1},hideWorkCodeUnitPanel:function(a){return a('settings.hideSections').indexOf('U')!=-1&&a('settings.hideSections').indexOf('W')!=-1},hideExpenses:function(a){return a('settings.hideSections').indexOf('X')!=-1},hideClientSignature:function(a){return a('settings.hideSections').indexOf('CS')!=-1},hideEmployeeSignature:function(a){return a('settings.hideSections').indexOf('ES')!=-1},hideSignaturePanel:function(a){return a('settings.hideSections').indexOf('ES')!=-1&&a('settings.hideSections').indexOf('CS')!=-1},fwaUnitsReadOnly:function(a){return a('settings.fwaUnitVisibility')=='R'},hasUdfT1:function(a){return a('settings.udf_t1_Label')!=null&&a('settings.udf_t1_Label')!=''},hasUdfT1AndIsScheduler:function(a){return a('settings.udf_t1_Label')!=null&&a('settings.udf_t1_Label')!=''&&(a('name')=='Crew'||a('name')=='Scheduler')},isFwaScheduler:function(a){return a('name')=='Crew'||a('name')=='Scheduler'},schedReadOnly:function(a){return a('settings.schedReadOnly')||a('!settings.fwaDisplayActionsbutton')},fwaReadOnly:function(a){return a('settings.fwaReadOnly')},timesheetReadOnly:function(a){return a('settings.timesheetReadOnly')},crewChiefLabelWithFwaAbbrevLabel:function(a){return a('settings.crewChiefLabel')+' '+a('settings.fwaAbbrevLabel')+' List'},crewLabelWithFwaAbbrevLabel:function(a){return a('settings.crewLabel')+' '+a('settings.fwaAbbrevLabel')+' List'},fullEmpName:function(a){return a('settings.empNameFirstLast')},hideSignatures:function(a){return a('settings.hideSections').indexOf('S')!=-1},hideWorkCodes:function(a){return a('settings.hideSections').indexOf('W')!=-1},hideUnits:function(a){return a('settings.hideSections').indexOf('U')!=-1},isExa:function(a){return a('name')=='EXA'},isExaAndCanEdit:function(a){return a('name')=='EXA'&&a('settings.exApproverCanModify')}},getFwaStatusColor:function(b){var a='#DAA520',e=b.get('schedStartDate')||b.get('startDateTime'),c=b.get('schedEndDate')||b.get('endDateTime'),d=new Date();if(b.get('availableForUseInField')){switch(b.get('fwaStatusId')){case FwaStatus.Approved:a='#808080';break;case FwaStatus.Submitted:a='#00cd00';break;case FwaStatus.InProgress:a='#6a5acd';break;case FwaStatus.Create:a='#';break;case FwaStatus.Scheduled:a='#e2da77';break;case FwaStatus.Saved:a='#0000FF';break;default:a='#808080';break;}if(new Date(c)<d&&(b.get('fwaStatusId')!=FwaStatus.Submitted&&b.get('fwaStatusId')!=FwaStatus.Approved)){a='#FF0000'}}else {a='#FFC080'}return a}},0,0,0,0,['viewmodel.main'],0,[TS.view.main,'MainModel'],0);Ext.cmd.derive('TS.controller.Modern',Ext.app.Controller,{stores:[]},0,0,0,0,0,0,[TS.controller,'Modern'],0);Ext.cmd.derive('TS.view.main.Main',Ext.tab.Panel,{fullscreen:!0,tabBar:{hidden:!0},mixin:['Ext.mixin.Responsive']},0,['app-main'],['widget','component','container','tabpanel','app-main'],{'widget':!0,'component':!0,'container':!0,'tabpanel':!0,'app-main':!0},['widget.app-main'],0,[TS.view.main,'Main'],0);Ext.cmd.derive('TS.view.crew.Scheduler',Ext.Container,{items:[{xtype:'displayfield',value:'Yet to come'}]},0,['scheduler'],['widget','component','container','scheduler'],{'widget':!0,'component':!0,'container':!0,'scheduler':!0},['widget.scheduler'],0,[TS.view.crew,'Scheduler'],0);Ext.cmd.derive('TS.view.crew.Main',TS.view.main.Main,{fullscreen:!0,controller:'crew-main',viewModel:'crew-main',items:[{xtype:'container',layout:'vbox',title:'Main card',items:[{xtype:'titlebar',cls:'ts-navigation-header',docked:'top',title:{_tr:'schedTitle'},items:[{xtype:'button',iconCls:'x-fa  fa-home',align:'left',handler:'onBackToFSS',bind:{hidden:'{!fromFSS}'}}]},{xtype:'scheduler',flex:1}]}]},0,['app-crew'],['widget','component','container','tabpanel','app-main','app-crew'],{'widget':!0,'component':!0,'container':!0,'tabpanel':!0,'app-main':!0,'app-crew':!0},['widget.app-crew'],0,[TS.view.crew,'Main'],0);Ext.cmd.derive('TS.view.fwa.Photo',Ext.Sheet,{controller:'fwa-edit',stretchX:!0,stretchY:!0,approvalType:null,attachmentsList:!1,autoDestroy:!0,layout:'fit',items:[{xtype:'titlebar',reference:'photoTitleBar',docked:'top',cls:'ts-navigation-header',title:'Attach Photo',items:[{align:'right',text:'Close',handler:'closeSheet'}]},{xtype:'formpanel',scrollable:'y',items:[{xtype:'panel',itemId:'attachFormFrame',items:[{height:15},{xtype:'container',padding:'10 10 10 0',items:[{xtype:'filefield',accept:'image/*',centered:!0,reference:'fileUploadField',iconCls:'x-fa fa-camera',top:'-0.6em',right:'1em',listeners:{change:'onFileUploadChange',scope:'self.controller'}}]},{xtype:'fieldset',items:[{xtype:'textfield',reference:'filePathField',label:'Filename'},{xtype:'textfield',reference:'filenameField',maskRe:/[^!^@^$^%^~^#^&^+^=^.^*^{^}^\\^:^<^>^|^"\^]/,label:'File Name',placeHolder:'Enter document filename (*required)',required:!0,clearIcon:!0},{xtype:'textfield',reference:'descriptionField',maskRe:/[^!^@^$^%^~^#^&^+^=^.^*^{^}^\\^:^<^>^|^"\^]/,label:'Description',placeHolder:'Enter document description (*required)',required:!0,clearIcon:!0}]},{xtype:'fieldset',title:'Preview',scrollable:'y',style:'padding:10 10 10 0;',width:'95%',items:[{xtype:'image',src:'',mode:'image',reference:'imagePreview',width:300,style:'padding:10 10 10 0;',hidden:!0}]}]},{xtype:'fieldset',title:'Attachments',scrollable:'y',width:'90%',reference:'attachmentList'}]},{xtype:'titlebar',docked:'bottom',items:[{text:'Upload',align:'right',iconCls:'x-fa  fa-upload',ui:'action',handler:'loadFwaPhoto',disabled:!0,reference:'loadDoc',itemId:'loadDoc'}]}]},0,['window-photo'],['widget','component','container','panel','sheet','window-photo'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'sheet':!0,'window-photo':!0},['widget.window-photo'],0,[TS.view.fwa,'Photo'],0);Ext.cmd.derive('TS.common.picker.TwoLineSlot',Ext.picker.Slot,{updateDisplayField:function(){if(!this.config.itemTpl){this.setItemTpl('<div class="x-picker-item {cls} <tpl if="extra">x-picker-invalid</tpl> ts-twolineslot"><span>{id}</span><span> - {name}</span></div>')}}},0,['twolinepickerslot'],['widget','component','container','dataview','pickerslot','twolinepickerslot'],{'widget':!0,'component':!0,'container':!0,'dataview':!0,'pickerslot':!0,'twolinepickerslot':!0},['widget.twolinepickerslot'],0,[TS.common.picker,'TwoLineSlot'],0);Ext.cmd.derive('TS.common.picker.TwoLinePicker',Ext.picker.Picker,{config:{defaultType:'twolinepickerslot'}},0,['twolinepicker'],['widget','component','container','panel','sheet','picker','twolinepicker'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'sheet':!0,'picker':!0,'twolinepicker':!0},['widget.twolinepicker'],0,[TS.common.picker,'TwoLinePicker'],0);Ext.cmd.derive('TS.common.field.WBS',Ext.field.Select,{referenceRoot:'formpanel',valueField:'id',displayField:'id',autoSelect:!1,getPhonePicker:function(){var a=this,b=a.phonePicker,c;if(!b){c=a.getDefaultPhonePickerConfig();a.phonePicker=b=Ext.create('TS.common.picker.TwoLinePicker',Ext.apply({slots:[{align:'left',name:a.getName(),valueField:a.getValueField(),displayField:a.getDisplayField(),value:a.getValue(),store:a.getStore()}],listeners:{change:a.onPickerChange,scope:a}},c))}return b},isDirty:function(){var a=this,b=a.getValue()===''||a.getValue()===' '?null:a.getValue();return !a.disabled&&!a.isEqual(b,a.originalValue)},initialize:function(){if(IS_OFFLINE){return}var b=this,c=TS.app.settings,a=b.config;if(!a.modelName){Ext.Error.raise('Component of xtype "field-wbs" must have modelName config set.');return}b.setStore({model:'TS.model.shared.'+a.modelName,pageSize:10000,sorters:[{property:a.modelName=='Wbs2'?'id':'name',direction:'ASC'}]});Ext.field.Select.prototype.initialize.apply(this,arguments);b.getStore().getProxy().extraParams['app']=a.app;b.getStore().getProxy().extraParams['includeInactive']=c.tsAllowTimeOnInactive;if(a.deferredLoad){b.getStore().load()}},setValue:function(c,j){if(IS_OFFLINE){return}var a=this,i=Ext.isObject(c)?c.get('id'):c,g=a.config,f=g.sets?a.up(a.referenceRoot).down('#'+g.sets):!1,d=g.clears,e=f?f.getStore():null,b;(arguments.callee.$previous||Ext.field.Select.prototype.setValue).apply(this,arguments);if(j&&d&&d.length){d.forEach(function(b){a.up(a.referenceRoot).down('#'+b).setValue('')})}if(f&&e&&i){for(var h in a.dependencyFilter){if(h===a.modelName.toLowerCase()){b=i}else {b=a.up(a.referenceRoot).down('#'+a.dependencyFilter[h]).getValue()}e.getProxy().extraParams[h]=b}e.load()}},onPickerChange:function(g,f){var a=this,c=f[a.getName()],b=a.getStore(),e=b.find(a.getValueField(),c,null,null,null,!0),d=b.getAt(e);a.setValue(d,!0)}},0,['field-wbs'],['widget','component','field','textfield','selectfield','field-wbs'],{'widget':!0,'component':!0,'field':!0,'textfield':!0,'selectfield':!0,'field-wbs':!0},['widget.field-wbs'],0,[TS.common.field,'WBS'],0);Ext.cmd.derive('TS.view.main.FWAEdit',Ext.form.Panel,{controller:'fwa-edit',reference:'fwaEditForm',itemId:'fwaForm',scrollable:'y',items:[{xtype:'titlebar',cls:'ts-navigation-header',docked:'top',title:'Edit',items:[{xtype:'button',text:'Back',iconCls:'x-fa fa-chevron-left',action:'navigation-back',reference:'backButton'},{align:'right',iconCls:'x-fa fa-bars',handler:'onEditMenuTap',reference:'fwaEditMenuButton'}]},{xtype:'titlebar',docked:'bottom',items:[{bind:{text:'Start',hidden:'{hideFwaStartStop}',iconCls:'x-fa fa-hourglass-start'},handler:'toggleWork',reference:'toggleWorkButton'},{text:'Save',align:'right',ui:'action',iconCls:'x-fa fa-save',handler:'onSaveFwa',style:'margin-right: 5px;',reference:'saveFwaButton'},{text:'Submit',align:'right',ui:'action',iconCls:'x-fa fa-save',handler:'onSubmitFwa',reference:'submitFwaButton'}]},{xtype:'fieldset',title:{_tr:'fwaLabel'},items:[{xtype:'textfield',hidden:!0,bind:'{selectedFWA.fwaId}'},{xtype:'textfield',reference:'fwaNumField',label:{_tr:'fwaAbbrevLabel',tpl:'{0} #'},bind:{readOnly:'{settings.fwaAutoNumbering}',value:'{selectedFWA.fwaNum}'}},{xtype:'textfield',label:{_tr:'fwaAbbrevLabel',tpl:'{0} Name'},reference:'fwaNameField',bind:'{selectedFWA.fwaName}'},{xtype:'displayfield',label:'Status',bind:'{selectedFWA.fwaStatusString}'},{xtype:'field-prioritylist',label:'Field Priority',itemId:'fieldPriorityField',placeHolder:'Select priority',bind:{value:'{selectedFWA.fieldPriorityId}',readOnly:'{wbsLocked}',style:'{selectedFWA.fieldPriorityColor}'}},{xtype:'button',handler:'onManageNotesTap',bind:{iconCls:'{notesCls}'},text:'Notes',cls:'ts-bt-margin-small',reference:'notesButton'},{xtype:'button',text:'Non-field Actions',iconCls:'x-fa fa-list-ol',cls:'ts-bt-margin-small',handler:'onActionLookup',reference:'nonFieldActionsButton'}]},{xtype:'container',items:[{xtype:'button',top:'-0.6em',right:'1em',iconCls:'x-fa fa-search',handler:'onProjectLookup',bind:{disabled:'{wbsLocked}'}}]},{xtype:'fieldset',title:'General Information',reference:'onlineGeneralInformation',items:[{label:{_tr:'wbs1Label',tpl:'{0} #'},xtype:'field-wbs',modelName:'Wbs1',itemId:'fwawbs1id',reference:'wbs1combo',deferredLoad:!0,clears:['fwawbs2id','fwawbs3id'],sets:'fwawbs2id',dependencyFilter:{wbs1:'fwawbs1id'},app:'FWA',bind:{value:'{selectedFWA.wbs1}',readOnly:'{wbsLocked}',hidden:'{hideFwaWbs1}'},listeners:{change:'onWbsChange'}},{label:{_tr:'wbs2Label',tpl:'{0} #'},xtype:'field-wbs',itemId:'fwawbs2id',reference:'wbs2combo',clears:['fwawbs3id'],modelName:'Wbs2',app:'FWA',sets:'fwawbs3id',dependencyFilter:{wbs1:'fwawbs1id',wbs2:'fwawbs2id'},bind:{value:'{selectedFWA.wbs2}',readOnly:'{wbsLocked}',hidden:'{hideFwaWbs2}'},listeners:{change:'onWbsChange'}},{label:{_tr:'wbs3Label',tpl:'{0} #'},xtype:'field-wbs',itemId:'fwawbs3id',reference:'wbs3combo',modelName:'Wbs3',app:'FWA',bind:{value:'{selectedFWA.wbs3}',readOnly:'{wbsLocked}',hidden:'{hideFwaWbs3}'}},{xtype:'displayfield',userCls:'ts-long-label',label:{_tr:'wbs1Label',tpl:'{0} Name'},bind:{value:'{wbs1combo.selection.name}',hidden:'{hideFwaWbs1Name}'}},{xtype:'displayfield',userCls:'ts-long-label',label:{_tr:'wbs2Label',tpl:'{0} Name'},bind:{value:'{wbs2combo.selection.name}',hidden:'{hideFwaWbs2Name}'}},{xtype:'displayfield',label:{_tr:'wbs3Label',tpl:'{0} Name'},bind:{value:'{wbs3combo.selection.name}',hidden:'{hideFwaWbs3Name}'}},{xtype:'displayfield',userCls:'ts-long-label',reference:'clientNameField',label:{_tr:'clientLabel',tpl:'{0} Name'},bind:{value:'{wbs1combo.selection.clientName}',hidden:'{hideFwaDisplayClient}'}},{xtype:'field-schedulers',label:'Scheduled By',itemId:'scheduledByField',bind:{value:'{selectedFWA.preparedByEmpId}',readOnly:'{wbsLocked}'}},{xtype:'textfield',label:{_tr:'contactLabel'},reference:'contactField',bind:'{selectedFWA.contactInfo}'},{xtype:'segmentedbutton',cls:'filterbar-segmented-button',pressedCls:'filterbar-segmented-button-pressed',allowMultiple:!0,items:[{text:{_tr:'crewLabelPlural',tpl:'All {0}'},handler:'onAllCrewsClick',iconCls:'user',itemId:'allCrewButton',width:'50%'},{text:{_tr:'crewLabelPlural',tpl:'My {0} Only'},width:'50%',itemId:'myCrewsButton',iconCls:'compose',handler:'onMyCrewOnlyClick',pressed:!0,style:'color:white;background-color:#939393;font-weight: bold;'}],bind:{hidden:'{!newFwa}'}},{xtype:'container',style:'border-bottom: 1px solid #d0d0d0;',items:[{xtype:'button',iconCls:'x-fa fa-phone',itemId:'crewPhoneButton',handler:'onCrewPhoneClick',top:'.0em',right:'.0em',bind:{hidden:'{newFwa}'}},{xtype:'field-crewlist',label:{_tr:'crewLabel'},itemId:'crewLabel',reference:'schedCrewfield',bind:{value:'{selectedFWA.scheduledCrewId}',readOnly:'{!newFwa}'}}]},{xtype:'container',style:'border-bottom: 1px solid #d0d0d0;',items:[{xtype:'button',iconCls:'x-fa fa-file-o',itemId:'udfButton',handler:'onUdfClick',top:'.0em',right:'.0em'},{xtype:'textfield',label:{_tr:'udf_t1_Label'},bind:{value:'{selectedFWA.udf_t1}'},listeners:{focus:function(b,c){var a=b.getParent().getParent().getParent().getScrollable();TS.app.settings.currentPosition=a.position.y;if(Ext.os.is.Android&&Ext.os.is.Phone){a.scrollTo(null,700)}},blur:function(b,c){var a=b.getParent().getParent().getParent().getScrollable();if(Ext.os.is.Android&&Ext.os.is.Phone){a.scrollTo(null,TS.app.settings.currentPosition)}}}}],bind:{hidden:'{!hasUdfT1}'}},{xtype:'checkboxfield',label:'Contract?',itemId:'isContractWorkCbx',bind:{value:'{selectedFWA.isContractWork}',disabled:'{!newFwa}'}},{xtype:'checkboxfield',label:'WBS Locked',itemId:'wbsLockedCbx',reference:'wbsLockedCbx',bind:{value:'{selectedFWA.wbsLocked}',hidden:'{!newFwa}'}}]},{xtype:'fieldset',title:'Work Address',items:[{xtype:'textfield',label:'Address 1',bind:'{selectedFWA.loc.address1}',itemId:'address1Field',reference:'address1Field',listeners:{focus:function(b,c){var a=b.getParent().getParent().getScrollable();TS.app.settings.currentPosition=a.position.y;if(Ext.os.is.Android&&Ext.os.is.Phone){a.scrollTo(null,835)}},blur:function(b,c){var a=b.getParent().getParent().getScrollable();if(Ext.os.is.Android&&Ext.os.is.Phone){a.scrollTo(null,TS.app.settings.currentPosition)}}}},{xtype:'textfield',label:'Address 2',bind:'{selectedFWA.loc.address2}',itemId:'address2Field',reference:'address2Field',listeners:{focus:function(b,c){var a=b.getParent().getParent().getScrollable();TS.app.settings.currentPosition=a.position.y;if(Ext.os.is.Android&&Ext.os.is.Phone){a.scrollTo(null,885)}},blur:function(b,c){var a=b.getParent().getParent().getScrollable();if(Ext.os.is.Android&&Ext.os.is.Phone){a.scrollTo(null,TS.app.settings.currentPosition)}}}},{xtype:'textfield',label:'City',bind:'{selectedFWA.loc.city}',itemId:'cityField',reference:'cityField',listeners:{focus:function(b,c){var a=b.getParent().getParent().getScrollable();TS.app.settings.currentPosition=a.position.y;if(Ext.os.is.Android&&Ext.os.is.Phone){a.scrollTo(null,935)}},blur:function(b,c){var a=b.getParent().getParent().getScrollable();if(Ext.os.is.Android&&Ext.os.is.Phone){a.scrollTo(null,TS.app.settings.currentPosition)}}}},{xtype:'textfield',label:'State',bind:'{selectedFWA.loc.state}',itemId:'stateField',reference:'stateField',listeners:{focus:function(b,c){var a=b.getParent().getParent().getScrollable();TS.app.settings.currentPosition=a.position.y;if(Ext.os.is.Android&&Ext.os.is.Phone){a.scrollTo(null,985)}},blur:function(b,c){var a=b.getParent().getParent().getScrollable();if(Ext.os.is.Android&&Ext.os.is.Phone){a.scrollTo(null,TS.app.settings.currentPosition)}}}},{xtype:'textfield',label:'Zip',bind:'{selectedFWA.loc.zip}',itemId:'zipField',reference:'zipField',listeners:{focus:function(b,c){var a=b.getParent().getParent().getScrollable();TS.app.settings.currentPosition=a.position.y;if(Ext.os.is.Android&&Ext.os.is.Phone){a.scrollTo(null,1035)}},blur:function(b,c){var a=b.getParent().getParent().getScrollable();if(Ext.os.is.Android&&Ext.os.is.Phone){a.scrollTo(null,TS.app.settings.currentPosition)}}}},{xtype:'textfield',label:'Latitude',reference:'locLatitude',bind:'{selectedFWA.loc.latitude}',itemId:'latitudeField',listeners:{focus:function(b,c){var a=b.getParent().getParent().getScrollable();TS.app.settings.currentPosition=a.position.y;if(Ext.os.is.Android&&Ext.os.is.Phone){a.scrollTo(null,1085)}},blur:function(b,c){var a=b.getParent().getParent().getScrollable();if(Ext.os.is.Android&&Ext.os.is.Phone){a.scrollTo(null,TS.app.settings.currentPosition)}}}},{xtype:'textfield',label:'Longitude',reference:'locLongitude',bind:'{selectedFWA.loc.longitude}',itemId:'longitudeField',listeners:{focus:function(b,c){var a=b.getParent().getParent().getScrollable();TS.app.settings.currentPosition=a.position.y;if(Ext.os.is.Android&&Ext.os.is.Phone){a.scrollTo(null,1135)}},blur:function(b,c){var a=b.getParent().getParent().getScrollable();if(Ext.os.is.Android&&Ext.os.is.Phone){a.scrollTo(null,TS.app.settings.currentPosition)}}}},{xtype:'button',cls:'ts-bt-margin-small',iconCls:'x-fa fa-map-pin ',text:'Map Location',handler:'onMapLocationTap',reference:'mapButton'}]},{xtype:'fieldset',title:'Dates & Times',items:[{xtype:'container',style:'border-bottom: 1px solid #d0d0d0;',items:[{xtype:'button',top:'.0em',right:'.0em',iconCls:'x-fa  fa-refresh',handler:'onResetOrderedDates',itemId:'resetOrderedDatesBtn',bind:{disabled:'{wbsLocked}'}},{xtype:'datepickerfield',label:'Date Ordered',itemId:'dateOrderedField',reference:'dateOrderedField',bind:'{selectedFWA.dateOrdered}',picker:{yearFrom:2017,yearTo:(new Date()).getFullYear()+2}}]},{xtype:'field-employee',label:'Ordered By',itemId:'orderedByField',bind:'{selectedFWA.orderedBy}'},{xtype:'datepickerfield',label:'Date Required',itemId:'dateRequiredField',reference:'dateRequiredField',bind:'{selectedFWA.dateRequired}',picker:{yearFrom:2015,yearTo:(new Date()).getFullYear()+2}},{xtype:'container',style:'border-bottom: 1px solid #d0d0d0;',items:[{xtype:'button',top:'.0em',right:'.0em',iconCls:'x-fa  fa-refresh',handler:'onResetDates',itemId:'resetDatesBtn',bind:{disabled:'{wbsLocked}'}},{xtype:'datepickerfield',label:'Start Date',itemId:'schedStartDateField',reference:'schedStartDateField',bind:'{selectedFWA.schedStartDate}',picker:{yearFrom:2015,yearTo:(new Date()).getFullYear()+2},dateFormat:'n/j/Y',listeners:{change:'onStartDateChange'}}]},{xtype:'timepickerfield',label:'Start Time',reference:'schedStartTimeField',itemId:'schedStartTimeField',bind:'{selectedFWA.schedStartDate}',dateFormat:'g:i A'},{xtype:'datepickerfield',label:'End Date',bind:'{selectedFWA.schedEndDate}',itemId:'schedEndDateField',reference:'schedEndDateField',picker:{yearFrom:2015,yearTo:(new Date()).getFullYear()+2},dateFormat:'n/j/Y',listeners:{change:'onEndDateChange'}},{xtype:'timepickerfield',label:'End Time',bind:'{selectedFWA.schedEndDate}',itemId:'schedEndTimeField',reference:'schedEndTimeField',dateFormat:'g:i A'}],listeners:{painted:function(){var a=this,d=TS.app.settings,c=a.getParent().getParent().getViewModel(),b=c.get('selectedFWA');if(b.get('recurrencePattern')){a.setTitle('Dates & Times (*recurring)')}else {a.setTitle('Dates & Times')}}}},{xtype:'fieldset',title:'Approval Requirements',items:[{xtype:'checkboxfield',bind:'{selectedFWA.clientSigReq}',label:{_tr:'clientLabel',tpl:'{0} Signature'},reference:'clientReqCheckBox'},{xtype:'checkboxfield',bind:'{selectedFWA.chiefSigReq}',label:{_tr:'crewChiefLabel',tpl:'{0} Signature'},reference:'chiefReqCheckBox'}],bind:{hidden:'{!newFwa}'}},{xtype:'fieldset',userCls:'ts-required-field',itemId:'signatureFields',bind:{title:'Signatures',hidden:'{hideSignaturePanel}'},items:[{xtype:'container',itemId:'fwaClientSignatures',bind:{hidden:'{hideFwaClientSignatures}'},items:[{xtype:'button',iconCls:'x-fa fa-remove',itemId:'deleteClientSignatureButton',handler:'onDeleteClientSignatureClick',top:'2.8em',right:'.0em',bind:{}},{xtype:'segmentedbutton',allowMultiple:!0,items:[{cls:'ts-bt-margin-small',text:{_tr:'clientLabel',tpl:'Manage {0} Signature'},handler:'onManageClientApproval',reference:'clientApprovalButton',itemId:'clientApprovalButton',width:'75%'},{text:'View All',width:'25%',handler:'viewAllClientSignatures',itemId:'viewAllClientSignatureButton'}]},{xtype:'image',reference:'clientApprovalImage',itemId:'clientApprovalImage',attachmentId:null,height:75,hidden:!0},{xtype:'textfield',userCls:'ts-long-label',itemId:'clientApprovalDate',label:'Signature Date',bind:'{selectedFWA.clientApprovalDate}',dateFormat:'n/j/Y',component:{useMask:!1},readOnly:!0},{xtype:'container',itemId:'fwaChiefSignatures',bind:{hidden:'{hideFwaChiefSignatures}'},items:[{xtype:'button',iconCls:'x-fa fa-remove',itemId:'deleteChiefSignatureButton',handler:'onDeleteChiefSignatureClick',top:'2.8em',right:'.0em'},{xtype:'segmentedbutton',allowMultiple:!0,items:[{cls:'ts-bt-margin-small',text:{_tr:'crewChiefLabel',tpl:'Manage {0} Signature'},handler:'onManageChiefApproval',reference:'chiefApprovalButton',itemId:'chiefApprovalButton',width:'75%'},{text:'View All',width:'25%',handler:'viewAllChiefSignatures',itemId:'viewAllChiefSignatureButton'}]},{xtype:'image',reference:'chiefApprovalImage',itemId:'chiefApprovalImage',attachmentId:null,height:75,hidden:!0},{xtype:'textfield',userCls:'ts-long-label',itemId:'chiefApprovalDate',label:'Signature Date',bind:'{selectedFWA.chiefApprovalDate}',dateFormat:'n/j/Y',component:{useMask:!1},readOnly:!0}]}]}]},{xtype:'fieldset',reference:'workCodeUnitFieldset',bind:{title:'{settings.workCodeLabelPlural}'},cls:'ts-fieldset-nbr',items:[{xtype:'button',handler:'onManageWorkCodesTap',text:{_tr:'workCodeLabelPlural',tpl:'{0}'},reference:'manageWorkCodeButton',bind:{hidden:'{fwaHideWorkCodes}'}},{xtype:'button',handler:'onManageUnitsTap',text:{_tr:'unitLabelPlural',tpl:'{0}'},reference:'manageUnitsButton',bind:{hidden:'{!fwaUnitsEnabled}'}},{xtype:'button',handler:'onManageHoursTap',text:'Employee Hours',reference:'manageHoursButton'},{xtype:'button',handler:'onManageExpensesTap',text:'Employee Expenses',reference:'manageExpensesButton',bind:{hidden:'{hideExpenses}'}}]}],listeners:{painted:'onClearDirty'}},0,['fwa-edit-view'],['widget','component','container','panel','formpanel','fwa-edit-view'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'formpanel':!0,'fwa-edit-view':!0},['widget.fwa-edit-view'],0,[TS.view.main,'FWAEdit'],0);Ext.cmd.derive('TS.controller.fwa.MainOfflineController',Ext.Mixin,{constructor:function(){TS.localforage_fwa=TS.localforage_fwa||localforage.createInstance({driver:[localforage.WEBSQL,localforage.INDEXEDDB,localforage.LOCALSTORAGE],name:'CcgFieldApp',version:1,size:Math.pow(2,21),storeName:'FWA',description:'FWA saves and submits while offline'});TS.localforage_fwastore=TS.localforage_fwastore||localforage.createInstance({driver:[localforage.WEBSQL,localforage.INDEXEDDB,localforage.LOCALSTORAGE],name:'CcgFieldApp',version:1,size:Math.pow(2,21),storeName:'FWALIST',description:'Original FWA list when going offline'})},_saveFwaListData:function(a){if(typeof a!=='string'){Ext.error('Parameter must be a string')}TS.localforage_fwastore.setItem('fwastore',a).then()},_getFwaListData:function(a){a=a===undefined||a===null?!0:!!a;return new Promise(function(b,c){TS.localforage_fwastore.getItem('fwastore').then(function(d){b(a?JSON.parse(d):d)})})},saveFwa:function(a){a.save=!0;return this._saveOrSubmit(a)},submitFwa:function(a){a.save=!1;return this._saveOrSubmit(a)},_saveOrSubmit:function(a){if(this.isWorkingOffline()){return this._saveOrSubmitWhenWorkingOffline(a)}else {return this._saveOrSubmitToBackend(a)}},goOffline:function(){var b=this;var a,c=TS.app.settings;a=Ext.create('TS.view.fwa.GoOffline',{showAnimation:!1,documents:!1,photos:!1,listeners:{'continue':function(c,a){b._goOfflineProcessFwaStore(a.photos,a.documents)},cancel:function(){b.goOnline(!0)}}});Ext.Viewport.add(a);a.show()},_directAsPromise:function(e,f){var b=[];for(var a=1;a<arguments.length;++a){b[a-1]=arguments[a]}{var c=b;var d=c.slice();return new Promise(function(a,b){e.apply(null,[].concat($jscomp.arrayFromIterable(d),[function(c){if(c&&c.success){a(c.data||[])}else {throw c}}]))})}},_goOfflineProcessFwaStore:function(d,b){var h=this;var a=this,j=a.getViewModel(),e=j.get('fwalist'),f=Ext.getStore('EquipmentList'),g=Ext.getStore('UnitCode');localStorage.setItem('TS.app.settings',Ext.JSON.encode(TS.app.settings));var c=e.getData().items;var i=function(a,c){return a.then(function(e){return processFwaRecordPromise(c)})};c.reduce(i,Promise.resolve()).then(function(a){h._saveFwaListData(e.serialize())}).then(function(){return a._flagOfflineList(c)})['catch'](function(a){return Ext.GlobalEvents.fireEvent('Error',a)});function processFwaRecordPromise(c){a._loadEquipmentForUnits(c._units,f);return a._loadAttachments(d,c,'P').then(function(){return a._loadAttachments(b,c,'D')}).then(function(){return a._loadWorkCodeAttachments(d,c,'P')}).then(function(){return a._loadWorkCodeAttachments(b,c,'D')}).then(function(){return a._loadUnitCodeListByRecord(c,g)}).then(function(){})}},_flagOfflineList:function(c){var b=[],a=TS.app.settings;Ext.each(c,function(a){b.push(a.data.fwaId)});Fwa.FlagOfflineList(window.userGlobal.dbi,a.username,a.empId,b,function(a){if(a&&a.success){}else {if(a){Ext.GlobalEvents.fireEvent('Error',a)}}})},_clearOfflineList:function(c){var b=[],a=TS.app.settings;Ext.each(c,function(a){b.push(a.data.fwaId)});Fwa.ClearOfflineList(window.userGlobal.dbi,a.username,a.empId,b,function(a){if(a&&a.success){}else {if(a){Ext.GlobalEvents.fireEvent('Error',a)}}})},_loadAttachments:function(d,a,c){if(d){var b=Ext.Array.pluck(a.data.attachments,'attachmentId');return this._directAsPromise(AttachmentData.GetAttachmentList,window.userGlobal.dbi,TS.app.settings.username,'FWA',a.data.fwaId,!0,c).then(function(e){e.forEach(function(f){if(!b.includes(f.attachmentId)){a.data.attachments.push(f)}})})}else {return Promise.resolve()}},_loadWorkCodeAttachments:function(d,a,c){var e=this;if(d){var b=Ext.Array.pluck(a.data.attachments,'attachmentId');Ext.each(a.workSchedAndPerf().getRange(),function(f){return e._directAsPromise(AttachmentData.GetAttachmentList,window.userGlobal.dbi,TS.app.settings.username,'FWA',a.data.fwaId+'||'+f.get('workCodeId'),!0,c).then(function(e){e.forEach(function(g){if(!b.includes(g.attachmentId)){a.data.attachments.push(g)}})})})}else {return Promise.resolve()}},_loadEquipmentForUnits:function(b,a){Ext.each(b.getRange(),function(c){Equipment.GetList(window.userGlobal.dbi,TS.app.settings.username,0,25,c.get('unitCodeId'),function(d){if(d&&d.success){if(d.data){Ext.each(d.data,function(e){var f={equipmentId:e.equipmentId,equipmentName:e.equipmentName,unitCodeId:c.get('unitCodeId'),status:e.status};a.add(f)})}}else {if(d){Ext.GlobalEvents.fireEvent('Error',d)}}})})},_loadUnitCodeListByRecord:function(a,b){var g=window.userGlobal.dbi;var c=TS.app.settings.username;var d=a.data.wbs1;var e=a.data.wbs2||'^';var f=a.data.wbs3||'^';return this._directAsPromise(UnitCode.GetList,g,c,0,25,d,e,f,!0).then(function(c){c.forEach(function(d){var e={applyToLabor:d.applyToLabor,crewSize:d.crewSize,equipSelection:d.equipSelection,equipSource:d.equipSource,howBilled:d.howBilled,requireDetail:d.requireDetail,status:d.status,unitCodeAbbrev:d.unitCodeAbbrev,unitCodeId:d.unitCodeId,unitCodeName:d.unitCodeName,unitCodeCombo:d.unitCodeAbbrev+' : '+d.unitCodeName};b.add(e)})})},goOnline:function(f){var b=this,c=TS.localforage_fwa,e=TS.app.settings,d=[],a,h,g='';if(!navigator.onLine){Ext.Msg.alert('FYI','No internet connection available. Please try later.');return !1}else {e.fwaSaveFails=[];localStorage.setItem('isOffline',!1);localStorage.setItem('offlineDateTime','');IS_OFFLINE=!1;if(Ext.first('#offLineButton')){Ext.first('#offLineButton').setText(IS_OFFLINE?'Go Online':'Go Offline')}if(f){return !1}c.iterate(function(c,a,b){d.push(a)}).then(function(){Ext.each(d,function(d){c.getItem(d).then(function(g){a=Ext.JSON.decode(g);a.attachments=[];var h=a.fwaNum+'-'+a.fwaName;b._saveOrSubmitToBackend(a).then(function(a){if(!a.success){var b=a.message&&a.message.mdBody!==''?mdBody:'bob';e.fwaSaveFails.push(h+': '+b);c.removeItem(d).then(function(){})}else {c.removeItem(d).then(function(){})}})})})}).then(function(){var a=b.getViewModel().get('fwalist');b._clearOfflineList(a)}).then(function(){b.reloadFwaListAfterGoingOnline(b.getViewModel(),d)})}},reloadFwaListAfterGoingOnline:function(c,a){var b=this;setTimeout(function(){var f=c.get('fwalist');if(!f){b.backOnlineMessage(a);return}var e=TS.app.settings,d='';f.getProxy().setExtraParams({isPreparer:TS.app.settings.schedFwaPreparedByMe,isScheduler:!1,startDate:(new Date()).toDateString()});f.load({callback:function(){TS.localforage_fwastore.clear();if(e.fwaSaveFails.length>0){d+='<b>The following '+e.fwaAbbrevLabel+" 's failed to Save/Submit:</b></br></br>";Ext.Array.each(e.fwaSaveFails,function(b){d+=b+'</br></br>'});d+='Back Online';Ext.Msg.show({title:'Saved w/Errors',message:d,width:300,buttons:Ext.Msg.OK,style:'text-align: center;'})}else {b.backOnlineMessage(a)}}})},1000)},backOnlineMessage:function(a){if(a.length>0){Ext.Msg.alert('Success',TS.app.settings.fwaAbbrevLabel+' changes saved and back online')}else {Ext.Msg.show({title:'FYI',message:'Back Online',width:500,buttons:Ext.Msg.OK,style:'text-align: center;'})}},_saveOrSubmitWhenWorkingOffline:function(a){var b=this;return new Promise(function(d,f){var c=Ext.JSON.encode(a);TS.localforage_fwa.setItem(a.id,c).then();var e=b.getViewModel().get('fwalist');b._saveFwaListData(e.serialize());d({success:!0,data:c,message:{mdBody:TS.app.settings.fwaAbbrevLabel+' '+(a.save?'saved':'submitted')+' offline',mdTitleBarText:null,mdType:'info'}})})},_getParameterList:function(b){var a=[null,TS.app.settings.username,TS.app.settings.empId,b,this.getViewModel().get('isScheduler')];if(b.save){a.push(!1)}return a},_saveOrSubmitToBackend:function(a){var c=this;var f=TS.app.settings;var b=this._getParameterList(a);a.attachments=[];var e=a.save?Fwa.Save:Fwa.Submit;var d=new Promise(function(f,g){var d=function(b){return f(b)};b.push(d);e.apply(c,b)});return d},isWorkingOffline:function(){return !navigator.onLine||IS_OFFLINE},isOffline:function(){return !navigator.onLine||IS_OFFLINE},onLoadFwaList:function(b,d,a,c){}},1,0,0,0,0,0,[TS.controller.fwa,'MainOfflineController'],0);Ext.cmd.derive('TS.controller.fwa.MainController',TS.view.main.MainController,{constructor:function(){TS.view.main.MainController.prototype.constructor.apply(this,arguments);this.mixins.offline.constructor(this)},control:{'button[action=camera]':{change:'newFileLoaded',data:'fileDataReceived'},'button[action=create-fwa]':{tap:'onCreateFwa'},'button[action=close]':{tap:'onCloseSheet'}},onSubmit:function(a,b){this._onSaveSubmit(!1,a,b);a.destroy()},onSave:function(a,b){this._onSaveSubmit(!0,a,b);a.destroy()},_onSaveSubmit:function(e,f,a){var b=this;var c=function(d){var c=b.getViewModel();b.getView().setActiveItem(0);c.set('selectedFWA','')};if(e){this.saveFwa(a).then(c)}else {this.submitFwa(a).then(c);var d=this.getViewModel().get('fwalist');d.findRecord('fwaId',a.fwaId).set('fwaStatusId',FwaStatus.Submitted)}},initViewModel:function(b){var a=b.get('fwalist');if(IS_OFFLINE){this._getFwaListData().then(function(c){return a.loadRawData(c)})}else {a.getProxy().setExtraParams({isPreparer:TS.app.settings.schedFwaPreparedByMe,isScheduler:!1,startDate:(new Date()).toDateString()});a.load()}},init:function(){var b=this,d=b.getViewModel(),c=b.getView(),a=TS.app.settings;d.set('hasRights',a.fwaCreateNew);Ext.first('#description').setHidden(IS_TABLET);c.lookup('offLineButton').setHidden(!IS_CORDOVA_APP||!a.supportOffline);c.lookup('mainSelectBtn').setHidden(IS_TABLET);if(this.getView().down('fwa-tabletlist')){Ext.first('#wbs1Column').setHidden(!(a.fwaDisplayWbs1=='B'||a.fwaDisplayWbs1=='U'));Ext.first('#wbs1NameColumn').setHidden(!(a.fwaDisplayWbs1=='B'||a.fwaDisplayWbs1=='A'));Ext.first('#crewNameColumn').setHidden(a.fwaDisplayCrew=='N');Ext.first('#clientNameColumn').setHidden(a.fwaDisplayClient=='N')}},onCloseSheet:function(a){a.up('sheet').hide()},onBackToFSS:function(){Ext.Viewport.setActiveItem('app-fss')},reloadUserConfig:function(){var b=this,a=TS.app.settings;UserConfig.GetByUsername(window.userGlobal.dbi,a.username,'FWA',function(a,b,c){if(a&&a.success){Ext.GlobalEvents.fireEvent('Settings:Loaded',a.data,!0)}},b,{autoHandle:!0})},checkForCrewChief:function(b,c){var a=!1;if(!b){return !1}if(b.get('scheduledCrewChiefId')==c){a=!0}Ext.each(b.hours().getRange(),function(d){if(d.get('empId')==c&&d.get('isChief')){a=!0}});return a},onSelectionChange:function(h,f,g){var a=this,b=a.getView(),d=TS.app.settings,c=a.checkForCrewChief(record,d.empId),e=c?'Edit Selected':'View Selected';b.lookup('mainSelectBtn').setText(e);b.lookup('mainSelectBtn').setDisabled(!0)},onSelectionDoubleTap:function(i,h,g,e){var a=this,b=a.getView(),d=TS.app.settings,c=a.checkForCrewChief(e,d.empId),f=c?'Edit Selected':'View Selected';b.lookup('mainSelectBtn').setText(f);b.lookup('mainSelectBtn').setDisabled(!1)},onLoadFwaEdit:function(z){var d=this,e=d.getViewModel(),b=!IS_OFFLINE?d.getView().add({xtype:'fwa-edit-view',title:'Edit card',listeners:{save:'onSave',submit:'onSubmit'}}):d.getView().add({xtype:'fwa-edit-offline',title:'Edit card',listeners:{save:'onSave',submit:'onSubmit'}}),v=d.getView(),q;q=TS.model.fwa.Fwa.createWithAssociations(e.get('selectedFWA'));e.set('selectedFWA',q);var a=e.get('selectedFWA'),c=TS.app.settings,h,m,p,n=b.lookup('clientApprovalImage'),o=b.lookup('chiefApprovalImage'),u=Ext.first('#dateOrderedField'),y=Ext.first('#orderedByField'),s=Ext.first('#dateRequiredField'),r=b.lookup('workCodeUnitFieldset'),i=0,j=0,t='';d.setFormRead();n.setSrc(null);n.setHidden(!0);o.setSrc(null);o.setHidden(!0);h=d.checkForCrewChief(a,c.empId);m=a.get('fwaApprovers').indexOf(c.empId)!==-1;if(a.get('lastSubmittedDate')<new Date('1/1/0001 12:30:00 AM')){a.set('lastSubmittedDate',new Date('1/1/0001 12:00:00 AM'))}if(a.get('lastApprovedDate')<new Date('1/1/0001 12:30:00 AM')){a.set('lastApprovedDate',new Date('1/1/0001 12:00:00 AM'))}if(a.get('dateOrdered')<new Date('1/1/0001 12:30:00 AM')){u.setValue('')}if(a.get('dateRequired')<new Date('1/1/0001 12:30:00 AM')){s.setValue('')}if(a.getLoc()){if(a.getLoc().get('latitude')=='0'){a.getLoc().set('latitude','')}if(a.getLoc().get('longitude')=='0'){a.getLoc().set('longitude','')}}if(!a){Ext.Msg.alert('FYI','Please select '+c.fwaAbbrevLabel+' from list');return}e.set('newFwa',!1);e.set('isScheduler',!1);e.set('clientSigReq',a.get('clientSigReq'));e.set('chiefSigReq',a.get('chiefSigReq'));e.set('hasRights',c.fwaCreateNew);e.set('notesCls',a.get('hasNotes')?'x-fa fa-folder-open':'x-fa fa-folder');e.set('wbsLocked',a.get('wbsLocked'));if(!a.get('preparedByEmpId')||a.get('preparedByEmpId')==''){a.set('preparedByEmpId',c.preparedByEmpId)}if(c.fwaAutoNumbering){b.lookup('fwaNumField').setLabel(c.fwaAbbrevLabel+' # (auto-number)');b.lookup('fwaNumField').setReadOnly(!0)}p=a.get('attachments');if(p||a.get('clientApprovalImage')||a.get('chiefApprovalImage')){var f=a.get('attachments').filter(function(a){return a.attachmentType=='S'&&a.owningModelType=='Fwa'}),g=a.get('attachments').filter(function(a){return a.attachmentType=='E'&&a.owningModelType=='Fwa'}),k,w,l,x;if(f&&f.length>0){Ext.first('#fwaClientSignatures').setHidden(!1);n.config.attachmentId=f[0].attachmentId}if(g&&g.length>0){Ext.first('#fwaChiefSignatures').setHidden(!1);o.config.attachmentId=g[0].attachmentId}Ext.each(a.get('attachments'),function(a){if(a.attachmentType=='S'&&a.owningModelType=='Fwa'){i++}if(a.attachmentType=='E'&&a.owningModelType=='Fwa'){j++}});Ext.first('#deleteClientSignatureButton').setHidden(i==0);Ext.first('#viewAllClientSignatureButton').setHidden(i<=1);Ext.first('#clientApprovalButton').setWidth(i<=1?'100%':'75%');Ext.first('#deleteChiefSignatureButton').setHidden(j==0);Ext.first('#viewAllChiefSignatureButton').setHidden(j<=1);Ext.first('#chiefApprovalButton').setWidth(j<=1?'100%':'75%');if(!a.get('clientApprovalImage')){if(f&&f.length>0){k=f[0].dateAttached;a.set('clientApprovalDate',k);Ext.first('#clientApprovalDate').setValue(Ext.Date.format(new Date(k),'m/d/Y h:i A'));a.set('clientApprovalImage','data:application/octet-stream;base64,'+f[0].attachmentItem);a.set('clientApprovalImageId',f[0].attachmentId);b.lookup('clientApprovalImage').setSrc(a.get('clientApprovalImage'));b.lookup('clientApprovalImage').setHidden(!1)}}if(!a.get('chiefApprovalImage')){if(g&&g.length>0){l=g[0].dateAttached;a.set('chiefApprovalDate',l);Ext.first('#chiefApprovalDate').setValue(Ext.Date.format(new Date(l),'m/d/Y h:i A'));a.set('chiefApprovalImage','data:application/octet-stream;base64,'+g[0].attachmentItem);a.set('chiefApprovalImageId',g[0].attachmentId);b.lookup('chiefApprovalImage').setSrc(a.get('chiefApprovalImage'));b.lookup('chiefApprovalImage').setHidden(!1)}}}if(a.get('nonFieldActionCt')==0||e.get('newFwa')||!c.fwaDisplayActionsbutton){b.lookup('nonFieldActionsButton').setHidden(!0)}else {b.lookup('nonFieldActionsButton').setHidden(!1)}if(!a.get('scheduledCrewId')){Ext.first('#crewPhoneButton').setHidden(!0)}d.showHideBySecuritySettings(a);if(a.get('fwaStatusId')==FwaStatus.Submitted){if(!c.fwaAllowUnsubmit){d.setFormReadOnly()}}if(a.get('fwaStatusId')==FwaStatus.Submitted&&m){if(!a.get('fwaApproversCanModify')){d.setFormReadOnly()}}if(a.get('fwaStatusId')==FwaStatus.Submitted&&m&&h){if(c.fwaAllowUnsubmit||a.get('fwaApproversCanModify')){d.setFormRead()}}if(c.hideSections.indexOf('W')==-1){t+=c.workCodeLabelPlural+', '}r.setTitle('Manage');v.setActiveItem(b);Ext.first('#resetDatesBtn').setHidden(a.get('recurrencePattern')!=''||!h||a.get('recurrencePattern')==''&&a.get('fwaStatusId')==FwaStatus.Approved);Ext.first('#schedStartDateField').setDisabled(a.get('recurrencePattern')!='');Ext.first('#schedStartTimeField').setDisabled(a.get('recurrencePattern')!='');Ext.first('#schedEndDateField').setDisabled(a.get('recurrencePattern')!='');Ext.first('#schedEndTimeField').setDisabled(a.get('recurrencePattern')!='');Ext.first('#isContractWorkCbx').setDisabled(!0);Ext.first('#wbsLockedCbx').setHidden(!0);Ext.first('#scheduledByField').setDisabled(!h);Ext.first('#fieldPriorityField').setDisabled(!h);b.lookup('manageExpensesButton').setHidden(IS_OFFLINE);if(a._loc){a._loc.dirty=!1}a.dirty=!1;d.getView().down('toolbar[docked=bottom]').items.items[1].setDisabled(!0)},setFormRead:function(){var a=this,f=a.getView(),e=a.getViewModel(),d=TS.app.settings,c=e.get('selectedFWA'),g=a.checkForCrewChief(c,d.empId),b=f.lookup('fwaEditForm');b.enable();Ext.Array.each(b.query('button'),function(a){a.setDisabled(!1)})},setFormReadOnly:function(){var b=this,g=b.getView(),f=b.getViewModel(),c=TS.app.settings,e=f.get('selectedFWA'),d=b.checkForCrewChief(e,c.empId)||b.getViewModel().get('newFwa')&&c.fwaCreateNew,a=g.lookup('fwaEditForm');a.disable();Ext.Array.each(a.query('button'),function(a){a.setDisabled(!0)});a.lookup('schedStartDateField').setReadOnly(!0);a.lookup('schedStartTimeField').setReadOnly(!0);a.lookup('schedEndDateField').setReadOnly(!0);a.lookup('schedEndTimeField').setReadOnly(!0);a.lookup('saveFwaButton').setDisabled(!0);a.lookup('submitFwaButton').setDisabled(!0);a.lookup('fwaEditMenuButton').setDisabled(!1);a.lookup('backButton').setDisabled(!1);a.lookup('notesButton').setDisabled(!1);a.lookup('manageHoursButton').setDisabled(!1);a.lookup('manageWorkCodeButton').setDisabled(!1);a.lookup('manageUnitsButton').setDisabled(!1);a.lookup('nonFieldActionsButton').setDisabled(!1);Ext.first('#crewPhoneButton').setDisabled(!1);if(d){a.lookup('clientApprovalButton').setDisabled(!1);a.lookup('chiefApprovalButton').setDisabled(!1)}},showHideBySecuritySettings:function(i){var c=this,a=c.getViewModel(),h=c.getView().lookup('fwaEditForm'),b=TS.app.settings,j=c.getViewModel().get('isScheduler'),k=c.getViewModel().get('hasRights'),d=c.checkForCrewChief(i,b.empId),g=(b.fwaCanModify=='A'||b.fwaCanModify=='M')&&d,f=h.lookup('saveFwaButton'),e=h.lookup('submitFwaButton');a.set('hideFwaCopyButton',!1);a.set('hideFwaCreateButton',!1);a.set('hideAddWorkCode',!1);a.set('isNewOrHideCopy',!1);a.set('isNewOrHideCreate',!1);if(b.fwaAddWorkCode!='A'){if(b.fwaAddWorkCode=='N'){a.set('hideAddWorkCode',!0)}else {if(b.fwaAddWorkCode=='M'){if(!d){a.set('hideAddWorkCode',!0)}}}}if(!g){c.setFormReadOnly()}if(d||g){f.setDisabled(!1);e.setDisabled(!1)}else {f.setDisabled(!0);e.setDisabled(!0)}if(!b.fwaCreateNew){a.set('hideFwaCreateButton',!0)}else {a.set('hideFwaCopyButton',!1)}a.set('isNewOrHideCopy',a.get('newFwa')||a.get('hideFwaCopyButton'));a.set('isNewOrHideCreate',a.get('newFwa')||a.get('hideFwaCreateButton')||!d)},onCreateFwa:function(f){var d=this,a=d.getViewModel(),i=d.getView(),b=d.getView().lookup('fwaEditForm')?d.getView().lookup('fwaEditForm'):d.getView().add({xtype:'fwa-edit-view',title:'Edit card',listeners:{save:'onSave',submit:'onSubmit'}}),h=a.getStore('fwalist'),e=TS.app.settings,g=b.lookup('submitFwaButton'),j,k,c,l,m;b.lookup('schedStartDateField').setValue('');b.lookup('schedEndDateField').setValue('');g.setDisabled(!0);c=TS.model.fwa.Fwa.createWithAssociations({fwaId:'',availableForUseInField:e.availableForUseInField});c.set('schedStartDate',new Date());c.set('schedEndDate',new Date());if(e.fwaAutoNumbering){b.lookup('fwaNumField').setLabel(e.fwaAbbrevLabel+' # (auto-number)')}b.lookup('notesButton').setHidden(!1);h.add(c);a.set('newFwa',!0);a.set('selectedFWA',c);a.get('selectedFWA').set('wbs1','');a.get('selectedFWA').set('wbs2','');a.get('selectedFWA').set('wbs3','');a.get('selectedFWA').set('clientName','');a.get('selectedFWA').set('wbsLocked',!1);a.get('selectedFWA').set('dateOrdered',new Date());i.setActiveItem(1);if(!f.up('fwa-mainmenu')){f.up('fwa-editmenu').hide()}else {f.up('fwa-mainmenu').hide()}Ext.first('#signatureFields').setHidden(!0)},newFileLoaded:function(d,a){var c=this,b=c.getView().down('button[action=camera]'),e='Loading image data';b.getFileData(a,128,128)},fileDataReceived:function(a){this.getView().down('#description').setData({description:'Image Loaded',imagesrc:a})},onMainMenuTap:function(b){if(IS_OFFLINE){Ext.Msg.alert('FYI','While Off Line, no options available.');return}var a=this.getView().add(Ext.create({xtype:'fwa-mainmenu'}));a.show()},onAttachDoc:function(f){var d=this,b=d.getViewModel().get('selectedFWA'),e=b.get('fwaId'),h=d.getView().down('grid'),a=TS.app.settings,c=Ext.create({xtype:'window-document',viewModel:{parent:d.getViewModel()},attType:'Document',associatedRecordId:e,attachmentsList:{modelType:'FWA',modelId:e,includeItem:!0,attachmentType:AttachmentType.Document}}),g=a.fwaCanModify=='A'||a.fwaCanModify=='M'&&b.get('scheduledCrewChiefId')==a.empId||b.get('fwaApprovers').indexOf(a.empId)!==-1&&b.get('fwaApproversCanModify')?'Attach ':'View ';d.getView().setLoading(!0,'Loading Documents....');if(Ext.first('#attachFormFrame')){if(a.fwaCanModify=='A'||a.fwaCanModify=='M'&&b.get('scheduledCrewChiefId')==a.empId||b.get('fwaApprovers').indexOf(a.empId)!==-1&&b.get('fwaApproversCanModify')){Ext.first('#attachFormFrame').setHidden(!1)}else {Ext.first('#attachFormFrame').setHidden(!0)}}c.lookup('attachmentList').setTitle('Attachments'+d.getAttachmentCount(AttachmentType.Document));c.lookup('attachmentList').add({xtype:'attachments',attachmentParams:c.attachmentsList});c.down('titlebar[docked=top]').setTitle(g+TS.app.settings.fwaAbbrevLabel+' Document');setTimeout(function(){Ext.Viewport.add(c);c.show();if(IS_OFFLINE){f.up('fwa-editmenu-offline').hide()}else {f.up('fwa-editmenu').hide()}d.getView().setLoading(!1)},500)},getAttachmentCount:function(a){var e=this,b=e.getViewModel().get('selectedFWA'),c=b.get('attachmentCtDoc'),d=b.get('attachmentCtPhoto');if(a==AttachmentType.Photo){return ' ('+d+')'}else {if(a==AttachmentType.Document){return ' ('+c+')'}}},onAttachPhoto:function(f){var d=this,b=d.getViewModel().get('selectedFWA'),e=b.get('fwaId'),h=d.getView().down('grid'),a=TS.app.settings,c=Ext.create({xtype:'window-photo',viewModel:{parent:d.getViewModel()},attType:'Photo',associatedRecordId:e,attachmentsList:{modelType:'FWA',modelId:e,includeItem:!0,attachmentType:AttachmentType.Photo}}),g=a.fwaCanModify=='A'||a.fwaCanModify=='M'&&b.get('scheduledCrewChiefId')==a.empId||b.get('fwaApprovers').indexOf(a.empId)!==-1&&b.get('fwaApproversCanModify')?'Attach ':'View ';d.getView().setLoading(!0,'Loading Attachments...');if(Ext.first('#attachFormFrame')){if(a.fwaCanModify=='A'||a.fwaCanModify=='M'&&b.get('scheduledCrewChiefId')==a.empId||b.get('fwaApprovers').indexOf(a.empId)!==-1&&b.get('fwaApproversCanModify')){Ext.first('#attachFormFrame').setHidden(!1)}else {Ext.first('#attachFormFrame').setHidden(!0)}}c.lookup('attachmentList').setTitle('Attachments'+d.getAttachmentCount(AttachmentType.Photo));c.lookup('attachmentList').add({xtype:'attachments',attachmentParams:c.attachmentsList});c.down('titlebar[docked=top]').setTitle(g+TS.app.settings.fwaAbbrevLabel+' Photo');setTimeout(function(){Ext.Viewport.add(c);c.show();if(IS_OFFLINE){f.up('fwa-editmenu-offline').hide()}else {f.up('fwa-editmenu').hide()}d.getView().setLoading(!1)},500)},onOpenEmail:function(g){var c=this.getViewModel().get('selectedFWA').get('fwaId'),f=TS.app.settings,e=Ext.getStore('Employees').getById(f.empId),a=Ext.create({xtype:'window-email',viewModel:{parent:this.getViewModel()},appType:'FWA',modelId:c,emailNote:{_tr:'fwaAbbrevLabel',tpl:'Attach {0}'}}),d,b;a.lookup('ccEmailField').setValue(e.get('emailAddress'));d=Ext.first('#attachList');b=d.getStore();b.getProxy().setExtraParams({modelType:'FWA',modelId:c,includeItem:!1,attachmentType:'X'});b.reload();a.lookup('ccEmailField');a.down('titlebar[docked=top]').setTitle('Email');a.down('formpanel').down('checkboxfield').setLabel(a.emailNote);Ext.Viewport.add(a);a.show();g.up('fwa-editmenu').hide()},onCellMapTap:function(b,d){var c=b.parent.getRecord(),a;if(IS_OFFLINE){Ext.Msg.alert('FYI','Currenly offline, no mapping available');return}a=Ext.create({xtype:'fwa-map',viewModel:{parent:this.getViewModel()},dataRecord:c});Ext.Viewport.add(a);a.show()},onPrintAll:function(g){var b=this,f=b.getViewModel().get('fwalist'),e=[],c=[],d=TS.app.settings,h=b.getView(),a;f.each(function(a){e.push(a.get('fwaId'));c.push(a.get('fwaNum'))});a=Ext.create({xtype:'window-print',viewModel:{parent:b.getViewModel()},modelId:'_none_',appType:'FWA',empId:d.empId,isList:!0,idArray:e,fwaNumArray:c});Ext.Viewport.add(a);a.down('titlebar[docked=top]').setTitle(d.fwaAbbrevLabel+' List');a.show();g.up('fwa-mainmenu').hide()},onPrint:function(d){var c=this,e=c.getViewModel().get('selectedFWA').get('fwaId'),b=TS.app.settings,a=Ext.create({xtype:'window-print',viewModel:{parent:c.getViewModel()},modelId:e,appType:'FWA',empId:b.empId,isList:!1});Ext.Viewport.add(a);a.down('titlebar[docked=top]').setTitle(b.fwaAbbrevLabel+' List');a.show();d.up('fwa-editmenu').hide()},onGroupMapClick:function(c,d){var b=this.getViewModel().get('fwalist'),a;a=Ext.create({xtype:'fwa-map',viewModel:{parent:this.getViewModel()},dataRecord:null,store:b});Ext.Viewport.add(a);a.show();c.up('fwa-mainmenu').hide()},onRefreshList:function(b,c){var a=this.getViewModel().get('fwalist');a.reload();b.up('fwa-mainmenu').hide()},doCopyFwa:function(g){var a=this,b=a.getViewModel(),d=a.getView(),e=b.get('selectedFWA').get('fwaId'),f=b.getStore('fwalist'),c=TS.app.settings,h;d.setLoading(!0);Fwa.Copy(null,c.username,e,function(j){var i=j.data,e,h;i.fwaId='';e=TS.model.fwa.Fwa.createWithAssociations(i);h=e.getLoc();if(h.get('latitude')==0){h.set('latitude','')}if(h.get('longitude')==0){h.set('longitude','')}if(Ext.Date.format(new Date(e.get('dateOrdered')),'m/d/Y')=='01/01/0001'){e.set('dateOrdered','')}if(Ext.Date.format(new Date(e.get('dateRequired')),'m/d/Y')=='01/01/0001'){e.set('dateRequired','')}b.set('newFwa',!0);e.set('schedStartDate',new Date());f.add(e);b.set('selectedFWA',e);if(c.fwaAutoNumbering){a.getView().lookup('fwaEditForm').lookup('fwaNumField').setLabel(c.fwaAbbrevLabel+' # (auto-number)')}d.setActiveItem(1);d.setLoading(!1);g.up('fwa-editmenu').hide()},a,{autoHandle:!0})},approveFwaForm:function(d){var b=this,e=b.getViewModel(),a=e.get('selectedFWA'),c=TS.app.settings;if(a.dirty){Ext.Msg.confirm('Unsaved Changes','You have unsaved changes. Do you want to discard your changes and continue?',function(e){if(e=='yes'){Ext.Msg.confirm('Please Confirm','Are you sure you want to approve '+c.fwaAbbrevLabel+' '+a.get('fwaNum')+': '+a.get('fwaName')+'?',b.onApproveConfirm,b)}})}else {Ext.Msg.confirm('Please Confirm','Are you sure you want to approve '+c.fwaAbbrevLabel+' '+a.get('fwaNum')+': '+a.get('fwaName')+'?',b.onApproveConfirm,b)}d.up('fwa-editmenu').hide()},searchFwaForm:function(h){var c=this,e=c.getViewModel(),a=e.get('selectedFWA'),g=Ext.getStore('WorkCodes'),f=TS.app.settings,i,b,d;e.set('isChief',c.checkForCrewChief(a,f.empId));b=Ext.create({xtype:'fwa-search',viewModel:{parent:c.getViewModel()},dataRecord:null,fwa:a});Ext.first('#clientSearch').setValue(a.get('clientName'));Ext.first('#wbs1Search').setValue(a.get('wbs1'));Ext.first('#wbs2Search').setValue(a.get('wbs2'));Ext.first('#wbs3Search').setValue(a.get('wbs3'));d=Ext.first('#workCodeList');d.setStore(g);Ext.Viewport.add(b);b.show();h.up(!IS_OFFLINE?'fwa-editmenu':'fwa-editmenu-offline').hide()},onApproveConfirm:function(d){var b=this,a=TS.app.settings,c=b.getViewModel(),e=c.get('selectedFWA');if(d==='yes'){Fwa.Approve(null,a.username,a.empId,e.get('fwaId'),c.get('isScheduler'),function(c){if(c.success){Ext.Msg.alert('Approved',a.fwaAbbrevLabel+' Approved');b.getView().setActiveItem(0)}},b,{autoHandle:!0})}},removeFwaForm:function(l){var h=this,g=TS.app.settings,m=h.getViewModel(),c=m.get('selectedFWA'),j=g.fwaUnitsEnabled,a,k=!1,b='',d=0,f=0,i=!1,e='';Ext.each(c.hours().getRange(),function(a){if(a.get('readOnly')){k=!0;b=a.get('readOnlyReason')}d+=a.get('regHrs')+a.get('ovtHrs')+a.get('ovt2Hrs')+a.get('travelHrs');if(a.dirty){c.dirty=!0}});Ext.each(c.units().getRange(),function(a){if(a.get('readOnly')){i=!0;e=a.get('readOnlyReason')}f+=a.get('quantity');if(a.dirty){c.dirty=!0}});if(c.dirty){Ext.Msg.alert('Unsaved Changes','Un-saved changes to Hours and or Units must be saved first before a '+g.fwaAbbrevLabel+' can be removed.');return !1}if((k||i)&&(d>0||f>0)){if(j){if(d>0||f>0){a='Removal not allowed as time and unit processing has started. Contact the office.</br>'+(b||e)}else {a='Delete hour and/or unit quantity before removal is allowed.</br>'+(b||e)}}else {if(d>0){a='Removal not allowed as time processing has started. Contact the office.</br>'+b}else {a='Delete hour quantity before removal is allowed.</br>'+b}}Ext.Msg.show({title:'FYI',message:a,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO});return !1}else {if(d>0||f>0){if(j){a='Delete hour and/or unit quantity before removal is allowed.</br>'+(b||e)}else {a='Delete hour quantity before removal is allowed.</br>'+b}Ext.Msg.show({title:'FYI',message:a,buttons:Ext.Msg.OK,icon:Ext.Msg.INFO});return !1}}Ext.Msg.confirm('Please Confirm','Are you sure you want to remove '+g.fwaAbbrevLabel+' '+c.get('fwaNum')+': '+c.get('fwaName')+" from my crew's list?",h.onRemoveFwaFormConfirm,h);l.up('fwa-editmenu').hide()},onRemoveFwaFormConfirm:function(f){var d=this,c=TS.app.settings,a=d.getViewModel(),e=a.getStore('fwalist'),b=a.get('selectedFWA');if(f==='yes'){Fwa.SaveFwaStatus(null,c.username,c.empId,b.get('fwaId'),FwaStatus.Removed,function(g){if(g&&g.success){b.dirty=!1;a.set('fromSaveSubmit',!0);e.reload();Ext.Msg.alert('Successfully Removed',c.fwaAbbrevLabel+' has been successfully removed.',function(c){if(c=='ok'){if(!a.get('newFwa')){a.set('selectedFWA','')}b.set('clientApprovalImage','');b.set('chiefApprovalImage','')}})}else {if(g){Ext.GlobalEvents.fireEvent('Error',g)}}d.getView().setLoading(!1)});d.getView().setActiveItem(0)}},onTaskList:function(f){var e=this,c,a=TS.app.settings,b=Ext.create({xtype:'dailytasklist',viewModel:{parent:e.getViewModel()}}),d;d=Ext.first('#crewChiefGrid');Crew.GetCrewChiefList(null,a.username,a.empId,function(a){if(a&&a.success){c=new Ext.data.Store({data:a.data});d.setStore(c)}},e,{autoHandle:!0});Ext.Viewport.add(b);b.show();f.up('fwa-mainmenu').hide()},onCrewList:function(f){var b=this,d,c=TS.app.settings,a,e;if(!IS_TABLET){a=Ext.create({xtype:'dailycrewlist',viewModel:{parent:b.getViewModel()}});e=Ext.first('#crewGrid');Crew.GetList(null,c.username,c.empId,0,25,'N',function(a){if(a&&a.success){d=new Ext.data.Store({data:a.data});e.setStore(d)}},b,{autoHandle:!0})}else {a=Ext.create({xtype:'dailycrewtabletlist',viewModel:{parent:b.getViewModel()}});Ext.first('#tabletCrewTaskDateHeader').setValue(Ext.Date.format(new Date(),'m/d/Y'))}Ext.Viewport.add(a);a.show();f.up('fwa-mainmenu').hide()},selectLaborCode:function(i,d,h,g){var a=this.getViewModel(),f=TS.app.settings,e=d.get('lcLevel'),c=a.get('laborCodes')||[],b=a.get('laborLabels')||[];c[e]=d.get('lcCode');b[e]=d.get('lcLabel');a.set('laborCodes',c);a.set('laborLabels',b);a.set('laborCodeString',c.filter(function(a){return a}).join(f.tsLcDelimiter));a.set('laborLabelString',b.filter(function(a){return a}).join(' / '))},takeOfflineOnline:function(e){var f,b=TS.app.settings,d=Ext.first('fwa-list').getStore(),a=0,c=0;Ext.each(d.getRange(),function(b){a+=b.get('attachmentCtDoc');c+=b.get('attachmentCtPhoto')});b.documentCt=a;b.photoCt=c;if(!JSON.parse(localStorage.getItem('isOffline'))){localStorage.setItem('isOffline',!0);localStorage.setItem('offlineDateTime',Ext.JSON.encode(new Date()));IS_OFFLINE=!0}else {localStorage.setItem('isOffline',!1);localStorage.setItem('offlineDateTime','');IS_OFFLINE=!1}e.setText(IS_OFFLINE?'Go Online':'Go Offline');if(IS_OFFLINE){this.goOffline()}else {this.goOnline()}}},1,0,0,0,['controller.fwa-main'],[['offline',TS.controller.fwa.MainOfflineController]],[TS.controller.fwa,'MainController'],0);Ext.cmd.derive('TS.model.fwa.Fwa',TS.model.Base,{idProperty:'id',identifier:'uuid',fields:[{name:'id',type:'auto'},{name:'fwaId',type:'string'},{name:'fwaNum',type:'string'},{name:'fwaName',type:'string'},{name:'udf_t1',type:'string'},{name:'fieldPriorityId',type:'string'},{name:'fieldPriorityDesc',type:'string'},{name:'fieldPriorityColor',calculate:function(c){var b=Ext.getStore('PriorityList').findRecord('priorityId',c.fieldPriorityId),a;if(b){a=b.get('priorityHighlightColor')}return a?'background:rgb('+a+');':''}},{name:'fieldPriorityFontColor',calculate:function(g){var b=Ext.getStore('PriorityList').findRecord('priorityId',g.fieldPriorityId),a,c,f,e,d;if(b){a=b.get('priorityHighlightColor');if(a){a=a.split(',');f=a[0]&255;e=a[1]&255;d=a[2]&255;c=0.2126*f+0.7152*e+0.0722*d;if(c<40){return 'color:#fff !important;'}return 'color:#000'}}else {return 'color:#000'}}},{name:'fwaApprovers',type:'string'},{name:'fwaApproversCanModify',type:'bool'},{name:'hoverRows',type:'string'},{name:'clientId',type:'string'},{name:'clientNumber',type:'string'},{name:'clientName',type:'string'},{name:'contactInfo',type:'string',defaultValue:''},{name:'wbs1',type:'string',allowNull:!0,convert:function(a){return a===' '||a===''?null:a}},{name:'wbs1Name',type:'string'},{name:'wbs2',type:'string',allowNull:!0,convert:function(a){return a===' '||a===''?null:a}},{name:'wbs2Name',type:'string'},{name:'wbs3',type:'string',allowNull:!0,convert:function(a){return a===' '||a===''?null:a}},{name:'wbs3Name',type:'string'},{name:'fwaDisplayString',calculate:function(a){return a.wbs1+a.wbs2?'-'+a.wbs2:'-'+a.wbs1Name+a.wbs2Name?a.wbs2Name:''}},{name:'wbsLocked',type:'boolean'},{name:'schedStartDate',type:'date',dateFormat:'c',mapping:function(a){if(IS_OFFLINE){return a.schedStartDate}else {return TS.common.Util.getInUTCDate(a.schedStartDate)}}},{name:'schedEndDate',type:'date',dateFormat:'c',mapping:function(a){if(IS_OFFLINE){return a.schedEndDate}else {return TS.common.Util.getInUTCDate(a.schedEndDate)}}},{name:'isAllDay',type:'boolean'},{name:'duration',type:'int'},{name:'recurrencePattern',type:'string'},{name:'recurrenceDatesInRange',type:'auto'},{name:'nextDate',type:'date',dateFormat:'c',mapping:function(a){if(IS_OFFLINE){return a.nextDate}else {return TS.common.Util.getInUTCDate(a.nextDate)}}},{name:'lastSubmittedDate',type:'date',dateFormat:'c'},{name:'lastSubmittedByEmpId',type:'string'},{name:'lastApprovedDate',type:'date',dateFormat:'c'},{name:'lastApprovedByEmpId',type:'string'},{name:'dateOrdered',type:'date',dateFormat:'c'},{name:'orderedBy',type:'string'},{name:'dateRequired',type:'date',dateFormat:'c'},{name:'preparedByEmpId',type:'string'},{name:'isContractWork',type:'boolean',defaultValue:!1},{name:'schedCrewCt',type:'int'},{name:'scheduledCrewId',type:'string'},{name:'scheduledCrewName',type:'string'},{name:'scheduledCrewChiefId',type:'string'},{name:'clientApprovalImage',type:'string'},{name:'chiefApprovalImage',type:'string'},{name:'attachmentCtPhoto',type:'int'},{name:'attachmentCtDoc',type:'int'},{name:'attachmentsToDelete',type:'auto'},{name:'attachmentsToAdd',type:'auto'},{name:'attachmentsToKeep',type:'auto'},{name:'attachmentCtSig',type:'int'},{name:'fwaStatusId',type:'string',defaultValue:'C'},{name:'fwaStatusIdOld',type:'string',defaultValue:'C'},{name:'fwaStatusString',type:'string',defaultValue:'Creating'},{name:'schedHrsTtl',type:'float'},{name:'perfHrsTtl',type:'float'},{name:'clientSigReq',type:'bool','default':!1},{name:'chiefSigReq',type:'bool','default':!1},{name:'hasNotes',type:'bool'},{name:'availableForUseInField',type:'bool','default':!0},{name:'unitDatesInRange',mapping:function(c){var a=[],b;if(c.units){Ext.each(c.units,function(b){a.push(b.unitDate)})}b=a.filter(function(b,d){return a.indexOf(b)==d});return b}}],hasOne:[{model:'TS.model.shared.Address',role:'loc'},{model:'TS.model.fwa.RecurrenceConfig',role:'recurrenceConfig'}],hasMany:[{model:'TS.model.fwa.FwaHours',role:'hours',storeConfig:{sorters:[{property:'workDate',direction:'ASC'},{sorterFn:function(d,e){var c=Ext.getStore('Roles'),b=c.getById(d.get('crewRoleId')),a=c.getById(e.get('crewRoleId'));if(b&&a){if(b.get('crewRoleIsChief')&&!a.get('crewRoleIsChief')){return 1}else {if(a.get('crewRoleIsChief')){return -1}}}return 0},direction:'DESC'},{sorterFn:function(d,e){var a=Ext.getStore('Employees'),b=a.getById(d.get('empId')),c=a.getById(e.get('empId'));if(!b||!c){return 0}else {return b.get('lname').substr(0,1)>c.get('lname').substr(0,1)?1:-1}},direction:'DESC'},{property:'workCodeAbbrev',direction:'ASC'}]}},{model:'TS.model.fwa.Work',role:'workSchedAndPerf'},{model:'TS.model.fwa.FwaAction',role:'nonFieldActions'},{model:'TS.model.fwa.Unit',role:'units'},{model:'TS.model.fwa.FwaNote',role:'notes'},{model:'TS.model.shared.PrintTemplate',role:'availableTemplates'},{model:'TS.model.exp.Expense',role:'expenses'}],validators:{wbs1:'presence'},proxy:{type:'default',api:{read:'Fwa.Get',update:'Fwa.Save'},paramOrder:'dbi|username|id'}},0,0,0,0,0,0,[TS.model.fwa,'Fwa'],0);Ext.cmd.derive('TS.model.fwa.Store',Ext.data.Store,{serialize:function(a){a=a===undefined||a===null?!0:!!a;var c=function(b){return b.getData().items.map(function(c){return c.getData(!0)})};var b=c(this).map(function(e){var b=Object.assign({},e);var f=b.units;delete b.units;var d=f.map(function(d){var b=Object.assign({},d);var f=c(d.details);delete b.details;b.details=f;return b});b.units=d;return b});if(a){b=JSON.stringify(b);return b}else {return b}}},0,0,0,0,['store.fwalist'],0,[TS.model.fwa,'Store'],0);Ext.cmd.derive('TS.model.fwa.MainModel',TS.view.main.MainModel,{data:{name:'FWA',isScheduler:!1,newFwa:!1,clientSigReq:!1,chiefSigReq:!1,startDate:null,endDate:null,selectedTimesheet:null,hideColumn:!1,isSubmitted:!1,notesCls:'x-fa fa-file-o',hasRights:!1,wbsLocked:!navigator.onLine||IS_OFFLINE,fromFSS:!1},stores:{fwalist:{type:'fwalist',model:'TS.model.fwa.Fwa',proxy:{type:'default',directFn:'Fwa.GetList',paramOrder:'dbi|username|start|limit|empId|startDate|isPreparer|isScheduler'},filters:[function(a){return a.data.fwaStatusId!=='S'}],listeners:{load:'onLoadFwaList'}},viewfwa:{model:'TS.model.fwa.Fwa',proxy:{type:'default',directFn:'Fwa.Get',paramOrder:'dbi|username|id'}},notesview:{model:'TS.model.fwa.FwaNote',sorters:[{property:'modeDate',direction:'ASC'}]},signaturelist:{model:'TS.model.shared.Attachment',sorters:[{property:'dateAttached',direction:'ASC'}]}},init:function(){var a=this;a.get('viewfwa').on('load',function(c,b){a.set('fwa',b[0])})},constructor:function(a){TS.view.main.MainModel.prototype.constructor.call(this,a)},formulas:{fwaStartStop:function(a){return a('fwaStatusId')!==FwaStatus.InProgress?'Start':'Stop'},hourglassIconCls:function(a){return a('fwaStatusId')!==FwaStatus.InProgress?'x-fa fa-hourglass-start':'x-fa fa-hourglass-end'},clientSigReqTxt:function(a){if(a('clientSigReq')){return ' (*required field)'}else {return ''}},chiefSigReqTxt:function(a){if(a('chiefSigReq')){return ' (*required field)'}else {return ''}},dayCount:function(e){var a=e('startDate'),c=e('endDate'),d,b,f,g;if(a){d=c.getTime()-a.getTime();b=Math.ceil(d/1000/60/60/24);if(c.getTimezoneOffset()<=a.getTimezoneOffset()){b++}}return a&&c&&b?b:0},isHidden:function(a){return a('hideColumn')}},getPageTitle:function(){return TS.app.settings.fwaTitle}},1,0,0,0,['viewmodel.fwa-main'],0,[TS.model.fwa,'MainModel'],0);Ext.cmd.derive('TS.view.main.Map',Ext.Sheet,{includes:['TS.controller.fwa.MapController'],controller:'fwa-map',stretchX:!0,stretchY:!0,gmapType:'map',layout:'fit',items:[{xtype:'titlebar',docked:'top',cls:'ts-navigation-header',title:'Map',items:[{align:'right',text:'Close',handler:function(b){var a=b.up('sheet');a.hide()}}]}]},0,['fwa-map'],['widget','component','container','panel','sheet','fwa-map'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'sheet':!0,'fwa-map':!0},['widget.fwa-map'],0,[TS.view.main,'Map'],0);Ext.cmd.derive('TS.view.fwa.FWAList',Ext.grid.Grid,{isScheduler:!1,itemConfig:{viewModel:{formulas:{buttonBGColor:function(a){return a('record').get('fieldPriorityColor')}}}},columns:[{text:'Start',dataIndex:'nextDate',cell:{xtype:'gridcell',innerCls:'ts-multiline-cell',encodeHtml:!1},renderer:function(b,a,e,d){var c=Ext.util.Format.date;d.setStyle(a.get('fieldPriorityColor')+a.get('fieldPriorityFontColor'));return '<span>'+c(b,'n/j/Y')+'</span><span>'+c(b,'h:i A')+'</span>'},width:80},{text:'End',dataIndex:'schedEndDate',cell:{xtype:'gridcell',innerCls:'ts-multiline-cell',encodeHtml:!1},renderer:function(b,a,e,d){var c=Ext.util.Format.date;d.setStyle(a.get('fieldPriorityColor')+a.get('fieldPriorityFontColor'));return '<span>'+c(b,'n/j/Y')+'</span><span>'+c(b,'h:i A')+'</span>'},width:80,hidden:!0},{text:{_tr:'fwaAbbrevLabel',tpl:'{0} Name'},dataIndex:'fwaName',renderer:function(b,a,d,c){c.setStyle(a.get('fieldPriorityColor')+a.get('fieldPriorityFontColor'));return b||'-'},flex:2},{text:'Map',cell:{xtype:'widgetcell',widget:{xtype:'button',ui:'plain',iconCls:'x-fa fa-map-pin ',handler:'onCellMapTap'},width:60,bind:{style:'{buttonBGColor}'}}}],listeners:{itemdoubletap:'onSelectionDoubleTap'}},0,['fwa-list'],['widget','component','container','dataview','list','grid','fwa-list'],{'widget':!0,'component':!0,'container':!0,'dataview':!0,'list':!0,'grid':!0,'fwa-list':!0},['widget.fwa-list'],0,[TS.view.fwa,'FWAList'],0);Ext.cmd.derive('TS.view.fwa.FWATabletList',Ext.grid.Grid,{isScheduler:!1,itemConfig:{viewModel:{formulas:{buttonBGColor:function(a){return a('record').get('fieldPriorityColor')}}}},columns:[{text:'Start',dataIndex:'nextDate',cell:{xtype:'gridcell',innerCls:'ts-multiline-cell',encodeHtml:!1},renderer:function(b,a,e,d){var c=Ext.util.Format.date;d.setStyle(a.get('fieldPriorityColor')+a.get('fieldPriorityFontColor'));return '<span>'+c(b,'n/j/Y')+'</span><span>'+c(b,'h:i A')+'</span>'},width:80},{text:'Status',dataIndex:'fwaStatusString',renderer:function(b,a,d,c){c.setStyle(a.get('fieldPriorityColor')+a.get('fieldPriorityFontColor'));return b||'-'},flex:0.75},{text:{_tr:'fwaAbbrevLabel',tpl:'{0}'},dataIndex:'fwaNum',renderer:function(b,a,d,c){c.setStyle(a.get('fieldPriorityColor')+a.get('fieldPriorityFontColor'));return b||'-'},flex:1},{text:{_tr:'fwaAbbrevLabel',tpl:'{0} Name'},dataIndex:'fwaName',renderer:function(b,a,d,c){c.setStyle(a.get('fieldPriorityColor')+a.get('fieldPriorityFontColor'));return b||'-'},flex:2},{text:{_tr:'crewLabel'},itemId:'crewNameColumn',dataIndex:'scheduledCrewName',flex:1,renderer:function(b,a,d,c){c.setStyle(a.get('fieldPriorityColor')+a.get('fieldPriorityFontColor'));return b||'-'}},{text:{_tr:'wbs1Label',tpl:'{0}'},itemId:'wbs1Column',dataIndex:'wbs1',flex:1,style:'white-space: nowrap;',renderer:function(b,a,d,c){c.setStyle(a.get('fieldPriorityColor')+a.get('fieldPriorityFontColor'));return b}},{text:{_tr:'wbs1Label',tpl:'{0} Name'},itemId:'wbs1NameColumn',dataIndex:'wbs1Name',flex:1,renderer:function(b,a,d,c){c.setStyle(a.get('fieldPriorityColor')+a.get('fieldPriorityFontColor'));return b}},{text:{_tr:'clientLabel'},itemId:'clientNameColumn',dataIndex:'clientName',flex:1,renderer:function(b,a,d,c){c.setStyle(a.get('fieldPriorityColor')+a.get('fieldPriorityFontColor'));return b}},{text:'Map',cell:{xtype:'widgetcell',widget:{xtype:'button',ui:'plain',iconCls:'x-fa fa-map-marker',handler:'onCellMapTap'},width:60,bind:{style:'{buttonBGColor}'}}}]},0,['fwa-tabletlist'],['widget','component','container','dataview','list','grid','fwa-tabletlist'],{'widget':!0,'component':!0,'container':!0,'dataview':!0,'list':!0,'grid':!0,'fwa-tabletlist':!0},['widget.fwa-tabletlist'],0,[TS.view.fwa,'FWATabletList'],0);Ext.cmd.derive('TS.view.fwa.Main',TS.view.main.Main,{controller:'fwa-main',viewModel:'fwa-main',items:[{xtype:'container',layout:'vbox',title:'Main card',items:[{xtype:'titlebar',cls:'ts-navigation-header',docked:'top',title:{_tr:'empName'},items:[{xtype:'button',iconCls:'x-fa  fa-home',align:'left',handler:'onBackToFSS',bind:{hidden:'{!fromFSS}'}},{align:'right',iconCls:'x-fa fa-bars',handler:'onMainMenuTap'}]},{xtype:IS_TABLET?'fwa-tabletlist':'fwa-list',itemId:'fwaList',bind:{store:'{fwalist}',selection:'{selectedFWA}'},style:'border-bottom:1px solid #ccc',flex:1,listeners:{itemsingletap:'onLoadFwaEdit'}},{xtype:'component',itemId:'description',height:95,padding:10,bind:{data:'{selectedFWA}'},data:{data:{fwaNum:'',wbs1:'',clientName:'',fwaStatusString:'',wbs1Name:'',fieldPriorityDesc:''}},cls:'ts-details-container',tpl:new Ext.XTemplate('<div><span>{[this.dic("fwaAbbrevLabel")]}:</span>{[this.displayFwaNum(values)]}</div><div><span>{[this.dic("wbs1Label")]}:</span>{[this.displayWbs1(values)]}</div><div><span>{[this.dic("clientLabel")]}:</span>{[this.displayClient(values)]}</div>','<div>','   <div style="float:left;padding-right:10px;"><span>Status:</span>{[this.displayStatus(values)]}</div>&nbsp;','   <div style="float:left"><span>Priority:</span>{[this.displayPriority(values)]}</div>','</div',{dic:function(a){return TS.app.settings[a]},displayPriority:function(a){var c=a.data&&a.data.fieldPriorityId?a.data.fieldPriorityId:999,b=Ext.getStore('PriorityList').getById(c);return b?b.get('priorityDescr'):''},displayFwaNum:function(a){return a.data?a.data.fwaNum:''},displayWbs1:function(a){return a.data&&a.data.wbs1?a.data.wbs1+'-'+a.data.wbs1Name:''},displayClient:function(a){return a.data&&a.data.clientName?a.data.clientName:''},displayStatus:function(a){return a.data?a.data.fwaStatusString:''}})},{xtype:'toolbar',itemId:'fwaListToolbar',height:70,docked:'bottom',items:[{text:'{settings.offLineText}',iconCls:'x-fa fa-wifi',ui:'action',height:33,padding:'5 5 5 5',handler:'takeOfflineOnline',itemId:'offLineButton',reference:'offLineButton'},'->',{text:{_tr:'fwaAbbrevLabel',tpl:'Select {0}'},ui:'action',iconCls:'x-fa fa-pencil',handler:'onLoadFwaEdit',reference:'mainSelectBtn',disabled:!0,height:33,padding:'5 5 5 5'}]}]}]},0,['app-fwa'],['widget','component','container','tabpanel','app-main','app-fwa'],{'widget':!0,'component':!0,'container':!0,'tabpanel':!0,'app-main':!0,'app-fwa':!0},['widget.app-fwa'],0,[TS.view.fwa,'Main'],0);Ext.cmd.derive('TS.model.ts.TsCell',Ext.data.Model,{fields:[{name:'workDate',type:'string'},{name:'startTime',type:'string'},{name:'endTime',type:'string'},{name:'regHrs',type:'float'},{name:'ovtHrs',type:'float'},{name:'ovt2Hrs',type:'float'},{name:'travelHrs',type:'float'},{name:'comment',type:'string'},{name:'fwaId',type:'string'},{name:'fwaNum',type:'string'},{name:'rowNum',type:'auto'}]},0,0,0,0,0,0,[TS.model.ts,'TsCell'],0);Ext.cmd.derive('TS.model.ts.TsRow',Ext.data.Model,{idProperty:'seq',identifier:{type:'sequential',seed:10000},fields:[{name:'projectId',type:'string'},{name:'seq',type:'auto'},{name:'rowNum',type:'auto'},{name:'clientId',type:'string'},{name:'clientName',type:'string'},{name:'wbs1',type:'string',allowNull:!0},{name:'wbs1Name',type:'string'},{name:'wbs2',type:'string',allowNull:!0},{name:'wbs2Name',type:'string'},{name:'wbs3',type:'string',allowNull:!0},{name:'wbs3Name',type:'string'},{name:'chargeType',type:'string'},{name:'billCategory',type:'string'},{name:'laborCode',type:'string','default':'001'},{name:'empId',type:'string'},{name:'empName',type:'string'},{name:'crewRoleId',type:'int'},{name:'reqComments',type:'boolean'},{name:'tsheetStatus',type:'string'},{name:'attachments',reference:'TS.model.shared.Attachment'}],hasMany:[{model:'TS.model.ts.TsCell',role:'cells'}]},0,0,0,0,0,0,[TS.model.ts,'TsRow'],0);Ext.cmd.derive('TS.model.ts.Tsheet',Ext.data.Model,{idProperty:'tsheetId',identifier:'uuid',fields:[{name:'tsheetId',type:'string'},{name:'tsEmpId',type:'string'},{name:'tsEmpName',type:'string'},{name:'tsPeriodId',type:'int'},{name:'startDate',type:'date',dateFormat:'c'},{name:'endDate',type:'date',dateFormat:'c'},{name:'status',type:'string'},{name:'visionStatus',type:'string'},{name:'statusString',type:'string'},{name:'submittedBy',type:'string'},{name:'submittedDate',type:'auto'},{name:'approvedBy',type:'string'},{name:'approvedDate',type:'auto'},{name:'signature',type:'auto'},{name:'comments',type:'string'}],hasMany:[{model:'TS.model.ts.TsRow',role:'rows'}],proxy:{type:'default',directFn:'TimeSheet.Save',paramOrder:'dbi|username|timesheet'}},0,0,0,0,0,0,[TS.model.ts,'Tsheet'],0);Ext.cmd.derive('TS.view.ts.Main',TS.view.main.Main,{fullscreen:!0,controller:'ts-main',viewModel:'ts-main',header:{hidden:!0},items:[{xtype:'container',layout:'fit',title:'Main card',items:[{xtype:'titlebar',cls:'ts-navigation-header',docked:'top',title:{_tr:'tsTitle',tpl:'Select {0}'},items:[{xtype:'button',iconCls:'x-fa  fa-home',align:'left',handler:'onBackToFSS',bind:{hidden:'{!fromFSS}'}}]},{xtype:'ts-list',reference:'timesheets',bind:{store:'{tsheet}',selection:'{selectedTS}'},style:'border-bottom:1px solid #ccc',flex:1,listeners:{itemsingletap:'editSelectedTimesheet'}}]},{xtype:'ts-timesheet',title:{_tr:'tsTitle'}},{xtype:'ts-hours',title:'Hours'},{xtype:'ts-edit-hours',title:'Edit Hours'}],listeners:{painted:'findCurrentTimesheet'}},0,['app-ts'],['widget','component','container','tabpanel','app-main','app-ts'],{'widget':!0,'component':!0,'container':!0,'tabpanel':!0,'app-main':!0,'app-ts':!0},['widget.app-ts'],0,[TS.view.ts,'Main'],0);Ext.cmd.derive('TS.view.tsa.Main',TS.view.main.Main,{fullscreen:!0,controller:'tsa-main',viewModel:'tsa-main',header:{hidden:!0},items:[{xtype:'container',layout:'fit',title:'Main card',items:[{xtype:'titlebar',cls:'ts-navigation-header',docked:'top',title:{_tr:'tsTitle',tpl:'Select {0} Period'},items:[{xtype:'button',iconCls:'x-fa  fa-home',align:'left',handler:'onBackToFSS',bind:{hidden:'{!fromFSS}'}}]},{xtype:'tsa-list',reference:'timesheets',bind:{store:'{tsasheet}',selection:'{selectedTSA}'},style:'border-bottom:1px solid #ccc',flex:1,listeners:{itemsingletap:'editSelectedTimesheetPeriod'}},{xtype:'titlebar',docked:'bottom',items:[{text:'Open',ui:'action',bind:{disabled:'{!timesheets.selection}'},align:'right',iconCls:'x-fa fa-external-link',handler:'editSelectedTimesheetPeriod'}]}]},{xtype:'tsa-approvallist',title:{_tr:'tsTitle',tpl:'{0} Approvals'},style:'border-bottom:1px solid #ccc'},{xtype:'tsa-timesheet',title:'ApprovalTimesheet'},{xtype:'ts-hours',title:'Approval Hours'},{xtype:'ts-edit-hours',title:'Edit Approval Hours'}]},0,['app-tsa'],['widget','component','container','tabpanel','app-main','app-tsa'],{'widget':!0,'component':!0,'container':!0,'tabpanel':!0,'app-main':!0,'app-tsa':!0},['widget.app-tsa'],0,[TS.view.tsa,'Main'],0);Ext.cmd.derive('TS.view.fss.FssList',Ext.grid.Grid,{isScheduler:!1,scrollable:{directionLock:!0,x:!1},columns:[{text:'<b>Select from application(s) below.</b>',dataIndex:'name',flex:1,style:'font-weight: bold; text-align: center; '}]},0,['fss-list'],['widget','component','container','dataview','list','grid','fss-list'],{'widget':!0,'component':!0,'container':!0,'dataview':!0,'list':!0,'grid':!0,'fss-list':!0},['widget.fss-list'],0,[TS.view.fss,'FssList'],0);Ext.cmd.derive('TS.controller.fss.MainController',TS.view.main.MainController,{constructor:function(){TS.view.main.MainController.prototype.constructor.apply(this,arguments);this.mixins.offline.constructor(this)},init:function(){var a=this;if(IS_OFFLINE&&MobileApp&&TS.app.settings.supportOffline){Ext.Msg.confirm('Confirmation','Application is currently offline (@'+Ext.Date.format(new Date(JSON.parse(localStorage.getItem('offlineDateTime'))),'m/d/y h:i A')+'). Would you like to sync-up and go back on line?',function(b){if(b==='yes'){a.goOnline();a.reloadGrid()}else {if(b==='no'){}}})}},reloadGrid:function(){var d=this,b=d.getStore('fsslist'),a=TS.app.settings,c=a.appAccess.split('^'),e=d.getView();b.removeAll();if(c.indexOf('FF')>=0){b.add({app:'FWA',name:a.fwaLabelPlural,path:'app-fwa'});a.fwaLinkDisplay=!0}if(c.indexOf('FT')>=0&&!IS_OFFLINE){b.add({app:'TS',name:a.tsTitle+'s',path:'app-ts'});a.timesheetLinkDisplay=!0}if(a.tsIsApprover&&!IS_OFFLINE){b.add({app:'TSA',name:a.tsTitle+' Approval',path:'app-tsa'});a.timesheetApprovalLinkDisplay=!0}if(c.indexOf('FE')>=0&&!IS_OFFLINE){b.add({app:'EXP',name:'Expenses',path:'app-exp'});a.expenseLinkDisplay=!0}if(a.exIsApprover&&!IS_OFFLINE){b.add({app:'EXA',name:'Expense Approval',path:'app-exa'});a.timesheetApprovalLinkDisplay=!0}},onApplicationSelection:function(f,g,e){var b=this,c=b.getViewModel(),d=TS.app.settings,a=c.get('selectedFSS');Ext.GlobalEvents.fireEvent('ChangeViewport',a.get('app'));Ext.Viewport.setActiveItem(a.get('path'));b.closeView();if(a.get('app')=='FWA'){Ext.first('#offLineButton').setText(IS_OFFLINE?'Go Online':'Go Offline')}}},1,0,0,0,['controller.fss-main'],[['offline',TS.controller.fwa.MainOfflineController]],[TS.controller.fss,'MainController'],0);Ext.cmd.derive('TS.model.fss.MainModel',TS.view.main.MainModel,{stores:{fsslist:{model:'TS.model.fss.FssList'}},constructor:function(e){var d=this,b,a=TS.app.settings,c=a.appAccess.split('^'),f=d.getView();TS.view.main.MainModel.prototype.constructor.call(this,e);b=d.getStore('fsslist');if(c.indexOf('FF')>=0){b.add({app:'FWA',name:a.fwaLabelPlural,path:'app-fwa'});a.fwaLinkDisplay=!0}if(c.indexOf('FT')>=0&&!IS_OFFLINE){b.add({app:'TS',name:a.tsTitle+'s',path:'app-ts'});a.timesheetLinkDisplay=!0}if(a.tsIsApprover&&!IS_OFFLINE){b.add({app:'TSA',name:a.tsTitle+' Approval',path:'app-tsa'});a.timesheetApprovalLinkDisplay=!0}if(c.indexOf('FE')>=0&&!IS_OFFLINE){b.add({app:'EXP',name:'Expenses',path:'app-exp'});a.expenseLinkDisplay=!0}if(a.exIsApprover&&!IS_OFFLINE){b.add({app:'EXA',name:'Expense Approval',path:'app-exa'});a.timesheetApprovalLinkDisplay=!0}},getPageTitle:function(){return 'FSS'}},1,0,0,0,['viewmodel.fss-main'],0,[TS.model.fss,'MainModel'],0);Ext.cmd.derive('TS.view.fss.Main',TS.view.main.Main,{fullscreen:!0,config:{fromFSS:!0},controller:'fss-main',viewModel:'fss-main',header:{hidden:!0},items:[{xtype:'container',layout:'vbox',title:'Main card',items:[{xtype:'titlebar',cls:'ts-navigation-header',docked:'top',title:'<div style="float:left; font-weight: bold; color: white;">EleVia Field Services Suite</div>'},{xtype:'fss-list',reference:'fss',itemId:'fssList',bind:{store:'{fsslist}',selection:'{selectedFSS}'},style:'border-bottom:1px solid #ccc',flex:1,listeners:{itemsingletap:'onApplicationSelection'}}]}],listeners:{painted:function(b){var a=Ext.first('#fssList').getStore()}}},0,['app-fss'],['widget','component','container','tabpanel','app-main','app-fss'],{'widget':!0,'component':!0,'container':!0,'tabpanel':!0,'app-main':!0,'app-fss':!0},['widget.app-fss'],0,[TS.view.fss,'Main'],0);Ext.cmd.derive('TS.controller.exp.MainController',TS.view.main.MainController,{init:function(){var a=this,d=a.getViewModel(),b=d.getStore('expreportlist'),c=TS.app.settings;a.getView().setLoading(!0);b.getProxy().setExtraParams({empId:c.empId});b.load({scope:a,callback:function(){a.afterStoreLoad(b)}});a.getView().setLoading(!1)},control:{'button[action=navigation-back]':{tap:'navigateToGrid'},'button[action=navigation-back-expList]':{tap:'navigateToExpList'},'button[action=expsign]':{tap:'expSubmitPinClick'}},onBackToFSS:function(){Ext.GlobalEvents.fireEvent('ChangeViewport','FSS');Ext.Viewport.setActiveItem('app-fss')},navigateToGrid:function(f){var d=this,a=d.getViewModel(),e=a.get('selectedExpReport'),c=a.getStore('expreportlist'),b=a.getStore('explist');c.rejectChanges();b.removeAll();Ext.first('app-exp').setActiveItem(0)},navigateToExpList:function(d){var b=this,c=b.getViewModel(),a=c.getStore('explist');a.rejectChanges();Ext.first('app-exp').setActiveItem(1)},afterStoreLoad:function(a){},editSelectedExpReport:function(j,m,l,a,n){var c=this,f=c.getView(),g=c.getViewModel(),k=TS.app.settings,e=g.getStore('explist'),i=g.get('selectedExpReport'),b=f.lookup('reportNameText'),h=f.lookup('reportStatusText'),d;if(a.get('expReportId')){d=Ext.getStore('FwaStatus').findRecord('value',a.get('status')).get('description')}else {d=FwaStatus.InProgress}e.getProxy().setExtraParams({expReportId:a.get('expReportId')||a.get('oldRptId')});e.load({scope:c,callback:function(){c.afterExpenseLoad(e,a.get('oldRptId'))}});if(a.get('reportName')!=''){b.setValue(a.get('reportName'));b.setReadOnly(!0)}else {b.setValue('');b.setPlaceHolder('Enter Report Name');b.setReadOnly(!1)}i.dirty=!1;h.setValue(d);f.setActiveItem(1)},afterExpenseLoad:function(b,c){var a=TS.app.settings;if(a.expenseReportCopy){Ext.each(b.getRange(),function(a){a.set('id',Ext.data.identifier.Uuid.Global.generate());a.set('expReportId','');a.set('expDate',new Date());a.set('amount',null)});a.expenseReportCopy=!1}},addNewExpReport:function(g){var d=this,a=d.getView(),e=d.getViewModel(),f=e.getStore('expreportlist'),c=TS.app.settings,b=Ext.create('TS.model.exp.ExpenseReport',{createDate:new Date(),createUser:c.empId,empId:c.empId,reportDate:new Date(),expLines:[],status:FwaStatus.InProgress});e.set('selectedExpReport',b);f.add(b);a.lookup('reportNameText').setReadOnly(!1);a.lookup('reportStatusText').setValue(Ext.getStore('FwaStatus').findRecord('value',FwaStatus.InProgress).get('description'));g.up('exprpt-editmenu').hide();a.setActiveItem(1)},onEditMenuTap:function(){var b=this,c=b.getView(),a=Ext.first('app-exp').add({xtype:'exp-editmenu'});a.show()},onCategoryChange:function(j,g,k){var h=this,c=h.getView(),a=c.lookup('reasonField'),b=c.lookup('otherField'),f=c.lookup('milesField'),d=c.lookup('amountPerMileField'),i=c.lookup('billableCheckBoxField'),e;h.setAccount(null,null,null);a.setHidden(!0);b.setHidden(!0);f.setHidden(!0);d.setHidden(!0);if(g){record=Ext.getStore('ExpCategory').getById(g.get('category'));e=record.get('detailType');switch(e){case 'M':a.setHidden(!1);a.setLabel('Business reason</br>for expense');b.setHidden(!1);b.setLabel('Travel From/To');f.setHidden(!1);d.setHidden(!1);break;case 'B':a.setHidden(!1);a.setLabel('Business reason</br>for expense');b.setHidden(!1);b.setLabel('Name of</br>each person');break;case 'G':a.setHidden(!1);a.setLabel('Business reason</br>for expense');break;}i.setValue(record.get('billByDefault'))}},editSelectedExpense:function(f,i,h,g,j){var e=this,c=e.getView(),b=e.getViewModel(),a=b.get('selectedEXP'),d=TS.app.settings;if(a.get('amountPerMile')==0){a.set('amountPerMile',d.exMileageRate)}b.set('originalValues',a.clone());c.lookup('showFwaButton').setHidden(!a.get('fwaId'));c.lookup('fwaNumberField').setHidden(!a.get('fwaId'));c.lookup('fwaNameField').setHidden(!a.get('fwaId'));if(a.get('fwaId')){b.set('hasExpEditRights',d.exCanModifyFwaExp)}else {b.set('hasExpEditRights',!0)}c.setActiveItem(2)},onCancelExp:function(){var f=this,a=f.getViewModel(),d=a.get('selectedEXP'),c=a.get('originalValues'),b=a.getStore('explist'),e=b.getById(d.id);b.remove(e);b.add(c);b.sort([{property:'sortOrder',direction:'ASC'}]);a.set('originalValues',null);Ext.first('app-exp').setActiveItem(1);a.set('hasExpEditRights',!0)},onWbs1Change:function(d,a,b,c){this.setAccount(null,null,null)},onWbsChange:function(n,f,g,j){var c=this,h=TS.app.settings,b=c.getView(),d=c.getViewModel(),a=d.get('selectedEXP'),k=a&&a.get('wbs1')?a.get('wbs1'):b.lookup('wbs1combo')&&b.lookup('wbs1combo').getSelection()?b.lookup('wbs1combo').getSelection().get('id'):'',l=a&&a.get('wbs2')?a.get('wbs2'):b.lookup('wbs2combo')&&b.lookup('wbs2combo').getSelection()?b.lookup('wbs2combo').getSelection().get('id'):'',m=a?a.get('wbs3'):'',i=[],e=[]},onProjectLookup:function(b){var a=Ext.create({xtype:'exp-projectlookuptree',viewModel:{parent:this.getViewModel()},app:'EXP'});Ext.Viewport.add(a);a.show()},addNewExpense:function(g){var e=this,b=TS.app.settings,h=e.getView(),c=e.getViewModel(),f=c.getStore('explist'),a=c.get('selectedExpReport'),d=Ext.create('TS.model.exp.Expense',{id:Ext.data.identifier.Uuid.Global.generate(),empId:b.empId,expReportId:a.get('expReportId'),reportDate:a.get('reportDate'),reportName:a.get('reportName'),amountPerMile:b.exMileageRate,eKGroup:b.empEkGroup,expDate:new Date(),modified:'A',status:'I'});f.add(d);c.set('selectedEXP',d);Ext.first('#showFwaButton').hide();Ext.first('#fwaNameField').setValue('');h.setActiveItem(2);g.up('explist-editmenu').hide()},onSaveExpReport:function(){var d=this,b=d.getView(),c=d.getViewModel(),h=c.getStore('explist'),e=c.get('expreportlist'),g=TS.app.settings,f=Ext.Array.pluck(h.getRange(),'data'),a=c.get('selectedExpReport'),i=b.lookup('reportDateField').getHtml();a.set('reportName',b.lookup('reportNameText').getValue());a.set('reportDate',new Date(b.lookup('reportDateField').getHtml()));a.set('submittedBy','');a.set('submittedDate',new Date(2001,1,1));a.set('apprRejDate',new Date(2001,1,1));a.set('status',FwaStatus.InProgress);a=a.data;a.expLines=f;Exp.SaveExpReport(null,g.username,a,function(a){if(a&&a.success){TS.Messages.getSimpleAlertMessage('expenseSaveSuccess');e.rejectChanges()}else {if(a&&!a.success){Ext.GlobalEvents.fireEvent('Error',a)}}},this,{autoHandle:!0});b.setActiveItem(0)},onSubmitExp:function(k,d){var f=this,j=f.getView(),b=f.getViewModel(),e=TS.app.settings,i=b.getStore('explist'),g=b.get('expreportlist'),h=Ext.Array.pluck(i.getRange(),'data'),a=b.get('selectedExpReport'),c;c=d!=null?d.getData().attachmentItem:null;a.set('signature',c);a.set('submittedBy',e.empId);a.set('submittedDate',new Date());a.set('apprRejDate',new Date(2001,1,1));a.set('status',FwaStatus.Submitted);a=a.data;a.expLines=h;Exp.SaveExpReport(null,e.username,a,function(a){if(a&&a.success){TS.Messages.getSimpleAlertMessage('expenseSaveSuccess');g.rejectChanges()}else {if(a&&!a.success){Ext.GlobalEvents.fireEvent('Error',a)}}},this,{autoHandle:!0});j.setActiveItem(0)},doSubmitExpenseReport:function(f){var a=this,g=a.getViewModel(),c=g.get('selectedExpReport'),b=c.get('expReportId'),h=c.get('empId'),e=TS.app.settings,d=Ext.first('app-exp');Ext.Msg.confirm('Please Confirm','<div align="center">Are you sure you want to submit?</div>',function(c){if(c==='yes'){if(e.exReqSubmitSignature){sheet=Ext.create({xtype:'exp-submitpin',viewModel:{parent:a.getViewModel()},attType:'Employee',associatedRecordId:b,attachmentsList:{modelType:'EXP',modelId:b,attachmentType:'E'}});d.add(sheet);sheet.show()}else {a.onSubmitExp(f)}}})},onCloseSheet:function(a){a.up('sheet').hide()},expSubmitPinClick:function(e){var a=this,f=TS.app.settings,d=a.lookup('expSubmitPinField').getValue(),c=a.getView(),b=a.lookup('saveSignatureButton');if(!c.lookup('expSubmitPinField').getValue()){Ext.Msg.alert('Warning','<div align="center">PIN and Signature are both required</div>');b.setDisabled(!0);return}User.AuthenticatePin(window.userGlobal.dbi,d,window.userGlobal.email,function(b,c,d){if(b.data){this.doSaveSignature(e)}else {Ext.GlobalEvents.fireEvent('Message:Code','tsSubmitPinBadField');a.lookup('expSubmitPinField').setValue('');a.getView().setLoading(!1)}},a,{autoHandle:!0})},doSaveSignature:function(d){var b=this,c=TS.app.settings,j=b.getViewModel(),g=j.get('selectedExpReport'),e=g.get('expReportId'),k=b.getView(),h=k.down('ts-draw'),f=h.toDataURL(),i=new Blob([f],{type:'image/png'}),a;a={type:'EXP',location:c.imageStorageLoc,associatedId:e,attachmentType:'E',fileExt:'png',fileName:'signature_'+Ext.data.identifier.Uuid.Global.generate(),description:'Expense Report Approval Signature',file:i};b.convertFileToByteData(a.file,Ext.bind(function(f){var e=Ext.create('TS.model.shared.Attachment',{owningModelType:a.type,owningModelId:a.associatedId+'||'+c.empId,dateAttached:a.date||new Date(),attachmentType:a.attachmentType,location:a.location,extension:a.fileExt,filename:a.fileName,description:a.description,attachmentItem:f});b.onSubmitExp(d,e)},b));b.onCloseSheet(d)},convertFileToByteData:function(b,c){var a=new FileReader();a.onload=function(a){return function(g){var f=new Uint8Array(g.target.result),e=[];for(var d=0;d<f.length;d++){e[d]=f[d]}c(e)}}(b);a.readAsArrayBuffer(b)},onSaveExpense:function(){var d=this,l=TS.app.settings,a=d.getView(),e=d.getViewModel(),i=e.get('selectedEXP'),c=a.lookup('wbs1combo'),b=a.lookup('wbs2combo'),h=a.lookup('wbs3combo'),j=b.getValue(),k=h.getValue(),f=!1,g=!1;if(c.getValue()){f=c.getSelection().get('wbs2Required')}if(b.getValue()){g=b.getSelection().get('wbs3Required')}if(!e.get('selectedEXP').get('expDate')){Ext.Msg.alert('Error','Expense Date is a required field.');return}a.setActiveItem(1)},doCopyExpReport:function(g){var d=this,c=Ext.first('exp-report-list'),i=d.getView(),h=d.getViewModel(),b=c.getSelection(),e=TS.app.settings,f=h.get('expreportlist'),j,a;if(b){a=b.copy(null);a.set('id',Ext.data.identifier.Uuid.Global.generate());a.set('oldRptId',b.get('expReportId'));a.set('reportName','');a.set('reportDate',new Date());a.set('expReportId','');a.set('signature',null);a.set('statusText',Ext.getStore('FwaStatus').findRecord('value',b.get('status')).get('description'));e.expenseReportCopy=!0;f.add(a);c.setSelection(a);i.setActiveItem(1)}else {Ext.Msg.alert('Error','<div style="text-align:center;">No expense report selected</div>')}g.up('exprpt-editmenu').hide()},doCopyExpItem:function(h){var d=this,f=d.getView(),c=f.lookup('expenseList'),e=d.getViewModel(),b=c.getSelection(),j=TS.app.settings,g=e.get('explist'),i=e.get('selectedExpReport'),a;if(b){a=b.copy(null);a.set('id',Ext.data.identifier.Uuid.Global.generate());a.set('amount','');a.set('expDate',new Date());g.add(a);c.setSelection(a);f.setActiveItem(2)}else {Ext.Msg.alert('Error','<div style="text-align: center;">No expense selected</div>')}h.up('explist-editmenu').hide()},removeExpReport:function(e){var f=this,h=Ext.first('exp-report-list'),j=f.getView(),i=f.getViewModel(),d=h.getSelection(),c=i.get('expreportlist'),g=TS.app.settings,a,b;if(!d){Ext.Msg.alert('Error','<div style="text-align: center;">No expense report selected</div>');e.up('exprpt-editmenu').hide();return}a=d.get('expReportId');Ext.each(c.getRange(),function(c,d){if(c.get('expReportId')==a){b=d}});Ext.Msg.confirm('Please Confirm','<div style="text-align: center;">Are you sure you want to delete this expense report?</div>',function(d){if(d=='yes'){if(a){Exp.DeleteExpenseReport(null,g.username,a,function(a,f,g){if(a&&a.success){c.removeAt(b)}else {if(a){Ext.GlobalEvents.fireEvent('Error',a)}}}.bind(this))}else {c.removeAt(b)}}e.up('exprpt-editmenu').hide()})},onEditReportMenuTap:function(){var b=this,c=b.getView(),a=Ext.first('app-exp').add({xtype:'exprpt-editmenu'});a.show()},onEditListMenuTap:function(){var b=this,c=b.getView(),a=Ext.first('app-exp').add({xtype:'explist-editmenu'});a.show()},removeExpListItem:function(d){var f=this,i=f.getView(),g=i.lookup('expenseList'),h=f.getViewModel(),b=g.getSelection(),c=h.get('explist'),a,e;if(!b){Ext.Msg.alert('Error','<div style="text-align: center;">No expense selected</div>');d.up('explist-editmenu').hide();return}e=b.get('id');Ext.each(c.getRange(),function(b,c){if(b.get('id')==e){a=c}});Ext.Msg.confirm('Please Confirm','<div style="text-align: center;">Are you sure you want to delete this expense?</div>',function(b){if(b=='yes'){c.removeAt(a)}d.up('explist-editmenu').hide()})},onReportDateChange:function(c,e,f){var a=this,b=a.getViewModel(),d=b.get('selectedExpReport')},onEditExpenseDoubleTap:function(a,d,c,b,e){return !1},setMileageAmount:function(f,g){var e=this,a=e.getView(),d=a.lookup('milesField'),c=a.lookup('amountPerMileField'),b=a.lookup('amountField');b.setValue(Math.round(d.getValue()*c.getValue()*100)/100)},setAccount:function(m,n,o){var d=this,l=TS.app.settings,g=d.lookup('categoryField'),i=g.getStore(),a=i.findRecord('category',g.getValue()),f=d.lookup('wbs1combo'),k=f.getStore(),b=d.lookup('accountField'),j=b.getStore(),c=d.lookup('billableCheckBoxField'),h,e;if(f.getValue()&&a){h=k.findRecord('id',f.getValue()).get('chargeType');j.clearFilter();if(h=='R'){if(c.getValue()){b.setValue(a.get('defaultRegularBillableAccount'))}else {b.setValue(a.get('defaultRegularNonbillableAccount'))}c.setHidden(!l.exDisplayBillable)}else {b.setValue(a.get('defaultNonRegularAccount'));c.setValue(!1);c.setHidden(!0)}}else {if(a){e=a.get('billByDefault');c.setValue(e);if(e){b.setValue(a.get('defaultRegularBillableAccount'))}else {b.setValue(a.get('defaultRegularNonbillableAccount'))}}}},showFwa:function(){var c=this,i=c.getView(),d=c.getViewModel(),f=d.get('selectedEXP'),h=Ext.first('app-exp'),g=f.get('fwaId'),b=TS.app.settings,e=d.getStore('viewfwa'),a=Ext.create({xtype:'fwa-view',viewModel:{parent:d,isFromTS:!0}});e.getProxy().setExtraParams({username:b.username,id:g});e.load({callback:c.loadFwaViewSheet,scope:c});Ext.Viewport.add(a);a.down('titlebar[docked=top]').setTitle(b.fwaAbbrevLabel+' for Expense');Ext.first('#fwaOpenButton').setHidden(!0);Ext.first('#fwaCopyButton').setHidden(!0);a.show();a.getViewModel().getView().getItems().items[5].setTitle(b.clientLabel+' Signature');a.getViewModel().getView().getItems().items[6].setTitle(b.crewChiefLabel+' Signature')},loadFwaViewSheet:function(j,n,o){var k=this,g=k.getViewModel(),a=j[0],f=a.get('attachments');g.set('selectedFWA',a);g.set('attachments',f);if(f||a.get('clientApprovalImage')||a.get('chiefApprovalImage')){var b=a.get('attachments').filter(function(a){return a.attachmentType=='S'&&a.owningModelType=='Fwa'}),c=a.get('attachments').filter(function(a){return a.attachmentType=='E'&&a.owningModelType=='Fwa'}),h=0,i=0,d,l,e,m;Ext.each(a.get('attachments'),function(a){if(a.attachmentType=='S'&&a.owningModelType=='Fwa'){h++}if(a.attachmentType=='E'&&a.owningModelType=='Fwa'){i++}});Ext.first('#viewAllClientSignatureButton').setHidden(!0);Ext.first('#viewAllChiefSignatureButton').setHidden(!0);if(!a.get('clientApprovalImage')){if(b&&b.length>0){d=b[0].dateAttached;Ext.first('#clientApprovalDate').setValue(Ext.Date.format(new Date(d),'m/d/Y h:i A'));Ext.first('#clientApprovalImage').setSrc('data:application/octet-stream;base64,'+b[0].attachmentItem)}}if(!a.get('chiefApprovalImage')){if(c&&c.length>0){e=c[0].dateAttached;Ext.first('#chiefApprovalDate').setValue(Ext.Date.format(new Date(e),'m/d/Y h:i A'));Ext.first('#chiefApprovalImage').setSrc('data:application/octet-stream;base64,'+c[0].attachmentItem)}}}},onBillableChange:function(a,n,o){var d=this,k=TS.app.settings,f=d.lookup('categoryField'),h=f.getStore(),c=h.findRecord('category',f.getValue()),e=d.lookup('wbs1combo'),j=e.getStore(),b=d.lookup('accountField'),i=b.getStore(),m=d.lookup('billableCheckBoxField'),g,l;i.clearFilter();if(!e.getValue()){b.setValue(c.get('defaultNonRegularAccount'));a.setValue(!1);a.setDisabled(!0)}else {g=j.findRecord('id',e.getValue()).get('chargeType');if(g=='R'){if(a.getValue()){b.setValue(c.get('defaultRegularBillableAccount'))}else {b.setValue(c.get('defaultRegularNonbillableAccount'))}a.setHidden(!k.exDisplayBillable)}else {b.setValue(c.get('defaultNonRegularAccount'));a.setValue(!1);a.setDisabled(!0)}}}},0,0,0,0,['controller.exp-main'],0,[TS.controller.exp,'MainController'],0);Ext.cmd.derive('TS.model.exp.MainModel',TS.view.main.MainModel,{init:function(){var a=this;a.get('viewfwa').on('load',function(c,b){a.set('fwa',b[0])})},data:{isExa:!1},stores:{expreportlist:{model:'TS.model.exp.ExpenseReport',proxy:{type:'default',directFn:'Exp.GetOpenExpReports',paramOrder:'dbi|username|empId'}},explist:{model:'TS.model.exp.Expense',proxy:{type:'default',directFn:'Exp.GetExpReport',paramOrder:'dbi|username|expReportId',reader:{type:'default',rootProperty:'data.expLines'}}},viewfwa:{model:'TS.model.fwa.Fwa',proxy:{type:'default',directFn:'Fwa.Get',paramOrder:'dbi|username|id'}},signaturelist:{model:'TS.model.shared.Attachment',sorters:[{property:'dateAttached',direction:'ASC'}]}},formulas:{hideExpWbs1:function(a){if(a('settings.exDisplayWbs1')=='B'||a('settings.exDisplayWbs1')=='U'){return !1}else {return !0}},hideExpWbs1Name:function(a){if(a('settings.exDisplayWbs1')=='B'||a('settings.exDisplayWbs1')=='A'){return !1}else {return !0}},hideExpWbs2:function(a){if(a('settings.exDisplayWbs2')=='B'||a('settings.exDisplayWbs2')=='U'){return !1}else {return !0}},hideExpWbs2Name:function(a){if(a('settings.fwaDisplayWbs3')=='B'||a('settings.fwaDisplayWbs3')=='A'){return !1}else {return !0}},hideExpWbs3:function(a){if(a('settings.exDisplayWbs3')=='B'||a('settings.exDisplayWbs3')=='U'){return !1}else {return !0}},hideExpWbs3Name:function(a){if(a('settings.exDisplayWbs3')=='B'||a('settings.exDisplayWbs3')=='A'){return !1}else {return !0}},hideAccount:function(a){if(a('settings.exDisplayAccount')=='B'||a('settings.exDisplayAccount')=='U'){return !1}else {return !0}},hideAccountName:function(a){if(a('settings.exDisplayAccount')=='B'||a('settings.exDisplayAccount')=='A'){return !1}else {return !0}},displayBillable:function(a){return a('settings.exDisplayBillable')},displayCompanyPaid:function(a){return a('settings.exDisplayCompanyPaid')},hasExpEditRights:function(a){var b=this;if(b.data.isExa){return a('settings.exApproverCanModify')}else {return !0}}},getPageTitle:function(){return 'Expenses'}},0,0,0,0,['viewmodel.exp-main'],0,[TS.model.exp,'MainModel'],0);Ext.cmd.derive('TS.view.exp.Main',TS.view.main.Main,{fullscreen:!0,config:{fromFSS:!0},controller:'exp-main',viewModel:'exp-main',items:[{xtype:'container',layout:'fit',title:'Main card',scrollable:!0,items:[{xtype:'titlebar',cls:'ts-navigation-header',docked:'top',title:'Expense Reports',items:[{xtype:'button',iconCls:'x-fa  fa-home',align:'left',handler:'onBackToFSS',bind:{hidden:'{!fromFSS}'}},{align:'right',iconCls:'x-fa fa-bars',handler:'onEditReportMenuTap'}]},{xtype:'exp-report-list',reference:'expReports',bind:{store:'{expreportlist}',selection:'{selectedExpReport}'},style:'border-bottom:1px solid #ccc',flex:1,listeners:{itemsingletap:'editSelectedExpReport'}}]},{xtype:'exp-list',reference:'expList',title:'Expense List'},{xtype:'exp-edit',title:'Expense'}]},0,['app-exp'],['widget','component','container','tabpanel','app-main','app-exp'],{'widget':!0,'component':!0,'container':!0,'tabpanel':!0,'app-main':!0,'app-exp':!0},['widget.app-exp'],0,[TS.view.exp,'Main'],0);Ext.cmd.derive('TS.controller.exa.MainController',TS.view.main.MainController,{init:function(){},control:{'button[action=tssign]':{tap:'expSubmitPinClick'},'button[action=close]':{tap:'onCloseSheet'}},onBackToFSS:function(){Ext.GlobalEvents.fireEvent('ChangeViewport','FSS');Ext.Viewport.setActiveItem('app-fss')},openAboutFss:function(){Ext.create('TS.view.crew.window.AboutFSS').show()},editSelectedExpDate:function(f,i,h,g,j){var d=this,e=d.getView(),a=d.getViewModel(),c=a.getStore('expapprovallist'),b=a.get('selectedExpDate');a.set('formattedDate',Ext.Date.format(new Date(b.get('value')),'m/d/Y'));c.getProxy().setExtraParams({expDate:b.get('value')});c.load();e.setActiveItem(1)},navigateBackToDateGrid:function(){var a=this,c=a.getView(),b=a.getViewModel();b.set('selectedExpReport',null);c.setActiveItem(0)},navigateToGrid:function(){var a=this,b=a.getView();b.setActiveItem(1)},onExpensesSelectionTap:function(e,a){var d=this,f=d.getView(),c=Ext.first('#rejectButton'),b=Ext.first('#approveButton');c.setHidden(a[0].get('ttlRptExpenses')===0||a[0].get('status')==TsStatus.Approved&&a[0].get('visionStatus')=='U');b.setHidden(a[0].get('ttlRptExpenses')===0||a[0].get('status')==TsStatus.Approved&&a[0].get('visionStatus')=='U')},onEditSelectedExpenses:function(k,b,l,m,n){var d=this,f=d.getView(),e=d.getViewModel(),j=TS.app.settings,g=e.getStore('explist'),i=e.get('selectedExpReport'),a=f.lookup('reportNameText'),h=f.lookup('reportStatusText'),c;if(b.get('expReportId')){c=Ext.getStore('FwaStatus').findRecord('value',b.get('status')).get('description')}else {c=FwaStatus.InProgress}g.getProxy().setExtraParams({expReportId:b.get('expReportId')});g.load({scope:d});if(b.get('reportName')!=''){a.setValue(b.get('reportName'));a.setReadOnly(!0)}else {a.setValue('');a.setPlaceHolder('Enter Report Name');a.setReadOnly(!1)}i.dirty=!1;h.setValue(c);e.set('hasExpEditRights',j.exApproverCanModify);f.setActiveItem(2)},onSaveExpReport:function(){var d=this,c=d.getView(),b=d.getViewModel(),h=b.getStore('explist'),e=b.get('expreportlist'),g=TS.app.settings,f=Ext.Array.pluck(h.getRange(),'data'),a=b.get('selectedExpReport');a.set('reportName',c.lookup('reportNameText').getValue());a.set('reportDate',new Date(c.lookup('reportDateField').getHtml()));a.set('submittedBy','');a.set('submittedDate',new Date(2001,1,1));a.set('apprRejDate',new Date(2001,1,1));a.set('status',FwaStatus.InProgress);a=a.data;a.expLines=f;Exp.SaveExpReport(null,g.username,a,function(a){if(a&&a.success){TS.Messages.getSimpleAlertMessage('expenseSaveSuccess');e.rejectChanges()}else {if(a&&!a.success){Ext.GlobalEvents.fireEvent('Error',a)}}},this,{autoHandle:!0});c.setActiveItem(1)},doSubmitExpenseReport:function(f){var a=this,g=a.getViewModel(),c=g.get('selectedExpReport'),b=c.get('expReportId'),h=c.get('empId'),e=TS.app.settings,d=Ext.first('app-exp');Ext.Msg.confirm('Please Confirm','<div align="center">Are you sure you want to submit?</div>',function(c){if(c==='yes'){if(e.exReqSubmitSignature){sheet=Ext.create({xtype:'exp-submitpin',viewModel:{parent:a.getViewModel()},attType:'Employee',associatedRecordId:b,attachmentsList:{modelType:'EXP',modelId:b,attachmentType:'E'}});d.add(sheet);sheet.show()}else {a.onSubmitExp(f)}}})},onSubmitExp:function(k,d){var f=this,j=f.getView(),b=f.getViewModel(),e=TS.app.settings,i=b.getStore('explist'),g=b.get('expreportlist'),h=Ext.Array.pluck(i.getRange(),'data'),a=b.get('selectedExpReport'),c;c=d!=null?d.getData().attachmentItem:null;a.set('signature',c);a.set('submittedBy',e.empId);a.set('submittedDate',new Date());a.set('apprRejDate',new Date(2001,1,1));a.set('status',FwaStatus.Submitted);a=a.data;a.expLines=h;Exp.SaveExpReport(null,e.username,a,function(a){if(a&&a.success){TS.Messages.getSimpleAlertMessage('expenseSaveSuccess');g.rejectChanges()}else {if(a&&!a.success){Ext.GlobalEvents.fireEvent('Error',a)}}},this,{autoHandle:!0});j.setActiveItem(1)},approveSelectedExpReport:function(){var a=this,d=a.getViewModel(),b=d.get('selectedExpReport'),c=b.get('status');if(c==='I'){Ext.Msg.confirm('Confirmation','Please confirm that you would like to approve this expense that is still IN-PROGRESS?',function(b){if(b==='yes'){a.onApproveExpense()}else {if(b==='no'){}}})}else {a.onApproveExpense()}},onApproveExpense:function(){var b=this,h=b.getViewModel(),g=TS.app.settings,e=h.get('selectedExpReport'),c=e.get('expReportId'),f=Ext.first('app-exa'),a,d;if(g.exReqApprovalSignature){a=Ext.create({xtype:'ts-submitpin',viewModel:{parent:b.getViewModel()},attType:'Employee',associatedRecordId:c,attachmentsList:{modelType:'EXA',modelId:c,attachmentType:'E'}});d=Ext.first('#signatureTitleBar');d.setTitle('Expense Approval');f.add(a);a.show()}else {b.continueAfterApprovalSignature()}},continueAfterApprovalSignature:function(b,d){var c=this,f=c.getViewModel(),e=Ext.first('app-exa'),a;a=Ext.create({xtype:'exp-approvereject',viewModel:{parent:c.getViewModel()},approvalType:'Approval',attachment:d});Ext.first('#approveRejectTitleText').setTitle('Approval Comment');Ext.first('#approveRejectCommentText').setHtml('Please provide a comment for your approval.');if(b){b.up('sheet').hide()}e.add(a);a.show()},rejectSelectedExpReport:function(){var c=this,b=Ext.first('app-exa'),a=Ext.create({xtype:'exp-approvereject',viewModel:{parent:c.getViewModel()},approvalType:'Rejection'});Ext.first('#approveRejectTitleText').setTitle('Rejection Comment');Ext.first('#approveRejectCommentText').setHtml('Please provide a comment for your rejection.');b.add(a);a.show()},sendApproveReject:function(k){var d=this,i=TS.app.settings,e=d.getViewModel(),g=e.get('selectedExpReport'),h=g.get('expReportId'),c=Ext.first('exp-approvereject').approvalType==='Approval',b=Ext.first('exp-approvereject').attachment,a=Ext.first('#approveRejectComment').getValue(),j=e.getStore('expapprovallist'),f=b!=null?b.getData():null;if(!c&&(!a||a=='')){Ext.Msg.alert('Missing Comment','Expense comments are required when rejecting.');return}Exp.ApproveRejectExpense(null,i.username,h,c,a,f,function(b,a,c){j.reload()},d,{autoHandle:!0});k.up('sheet').hide()},onCloseSheet:function(a){a.up('sheet').hide()},expSubmitPinClick:function(e){var a=this,f=TS.app.settings,d=a.lookup('tsSubmitPinField').getValue(),c=a.getView(),b=a.lookup('saveSignatureButton');if(!c.lookup('tsSubmitPinField').getValue()){Ext.Msg.alert('Warning','PIN and Signature are both required');b.setDisabled(!0);return}User.AuthenticatePin(window.userGlobal.dbi,d,window.userGlobal.email,function(b,c,d){if(b.data){this.doSaveSignature(e)}else {Ext.GlobalEvents.fireEvent('Message:Code','tsSubmitPinBadField');a.lookup('tsSubmitPinField').setValue('');a.getView().setLoading(!1)}},a,{autoHandle:!0})},doSaveSignature:function(i){var b=this,c=TS.app.settings,j=b.getViewModel(),f=j.get('selectedExpReport'),d=f.get('expReportId'),k=b.getView(),g=k.down('ts-draw'),e=g.toDataURL(),h=new Blob([e],{type:'image/png'}),a;a={type:'EXA',location:c.imageStorageLoc,associatedId:d,attachmentType:'E',fileExt:'png',fileName:'signature_'+Ext.data.identifier.Uuid.Global.generate(),description:'Expense Approval Signature',file:h};b.convertFileToByteData(a.file,Ext.bind(function(e){var d=Ext.create('TS.model.shared.Attachment',{owningModelType:a.type,owningModelId:a.associatedId+'||'+c.empId,dateAttached:a.date||new Date(),attachmentType:a.attachmentType,location:a.location,extension:a.fileExt,filename:a.fileName,description:a.description,attachmentItem:e});b.continueAfterApprovalSignature(i,d)},b))},convertFileToByteData:function(b,c){var a=new FileReader();a.onload=function(a){return function(g){var f=new Uint8Array(g.target.result),e=[];for(var d=0;d<f.length;d++){e[d]=f[d]}c(e)}}(b);a.readAsArrayBuffer(b)},editSelectedExpense:function(f,i,h,g,j){var e=this,c=e.getView(),b=e.getViewModel(),a=b.get('selectedEXP'),d=TS.app.settings;if(a.get('amountPerMile')==0){a.set('amountPerMile',d.exMileageRate)}b.set('originalValues',a.clone());if(!d.exCanModifyFwaExp&&a.get('fwaId')){b.set('hasExpEditRights',!1)}else {b.set('hasExpEditRights',d.exApproverCanModify)}c.lookup('showFwaButton').setHidden(!a.get('fwaId'));c.lookup('fwaNumberField').setHidden(!a.get('fwaId'));c.lookup('fwaNameField').setHidden(!a.get('fwaId'));c.setActiveItem(3)},onCategoryChange:function(k,h,l){var i=this,c=i.getView(),a=c.lookup('reasonField'),b=c.lookup('otherField'),g=c.lookup('milesField'),e=c.lookup('amountPerMileField'),j=c.lookup('billableCheckBoxField'),f,d;i.setAccount(null,null,null);a.setHidden(!0);b.setHidden(!0);g.setHidden(!0);e.setHidden(!0);if(h){d=Ext.getStore('ExpCategory').getById(h.get('category'));f=d.get('detailType');switch(f){case 'M':a.setHidden(!1);a.setLabel('Business reason</br>for expense');b.setHidden(!1);b.setLabel('Travel From/To');g.setHidden(!1);e.setHidden(!1);break;case 'B':a.setHidden(!1);a.setLabel('Business reason</br>for expense');b.setHidden(!1);b.setLabel('Name of</br>each person');break;case 'G':a.setHidden(!1);a.setLabel('Business reason</br>for expense');break;}j.setValue(d.get('billByDefault'))}},setAccount:function(l,m,n){var d=this,k=TS.app.settings,f=d.lookup('categoryField'),h=f.getStore(),a=h.findRecord('category',f.getValue()),e=d.lookup('wbs1combo'),j=e.getStore(),b=d.lookup('accountField'),i=b.getStore(),c=d.lookup('billableCheckBoxField'),g;if(e.getValue()&&a){g=j.findRecord('id',e.getValue()).get('chargeType');i.clearFilter();if(g=='R'){if(c.getValue()){b.setValue(a.get('defaultRegularBillableAccount'))}else {b.setValue(a.get('defaultRegularNonbillableAccount'))}c.setHidden(!k.exDisplayBillable)}else {b.setValue(a.get('defaultNonRegularAccount'));c.setValue(!1);c.setHidden(!0)}}else {if(a){billByDefault=a.get('billByDefault');c.setValue(billByDefault);if(billByDefault){b.setValue(a.get('defaultRegularBillableAccount'))}else {b.setValue(a.get('defaultRegularNonbillableAccount'))}}}},showFwa:function(){var c=this,i=c.getView(),d=c.getViewModel(),f=d.get('selectedEXP'),h=Ext.first('app-exp'),g=f.get('fwaId'),b=TS.app.settings,e=d.getStore('viewfwa'),a=Ext.create({xtype:'fwa-view',viewModel:{parent:d,isFromTS:!0}});e.getProxy().setExtraParams({username:b.username,id:g});e.load({callback:c.loadFwaViewSheet,scope:c});Ext.Viewport.add(a);a.down('titlebar[docked=top]').setTitle(b.fwaAbbrevLabel+' for Expense');Ext.first('#fwaOpenButton').setHidden(!0);Ext.first('#fwaCopyButton').setHidden(!0);a.show();a.getViewModel().getView().getItems().items[5].setTitle(b.clientLabel+' Signature');a.getViewModel().getView().getItems().items[6].setTitle(b.crewChiefLabel+' Signature')},loadFwaViewSheet:function(j,n,o){var k=this,g=k.getViewModel(),a=j[0],f=a.get('attachments');g.set('selectedFWA',a);g.set('attachments',f);if(f||a.get('clientApprovalImage')||a.get('chiefApprovalImage')){var b=a.get('attachments').filter(function(a){return a.attachmentType=='S'&&a.owningModelType=='Fwa'}),c=a.get('attachments').filter(function(a){return a.attachmentType=='E'&&a.owningModelType=='Fwa'}),h=0,i=0,d,l,e,m;Ext.each(a.get('attachments'),function(a){if(a.attachmentType=='S'&&a.owningModelType=='Fwa'){h++}if(a.attachmentType=='E'&&a.owningModelType=='Fwa'){i++}});Ext.first('#viewAllClientSignatureButton').setHidden(!0);Ext.first('#viewAllChiefSignatureButton').setHidden(!0);if(!a.get('clientApprovalImage')){if(b&&b.length>0){d=b[0].dateAttached;Ext.first('#clientApprovalDate').setValue(Ext.Date.format(new Date(d),'m/d/Y h:i A'));Ext.first('#clientApprovalImage').setSrc('data:application/octet-stream;base64,'+b[0].attachmentItem)}}if(!a.get('chiefApprovalImage')){if(c&&c.length>0){e=c[0].dateAttached;Ext.first('#chiefApprovalDate').setValue(Ext.Date.format(new Date(e),'m/d/Y h:i A'));Ext.first('#chiefApprovalImage').setSrc('data:application/octet-stream;base64,'+c[0].attachmentItem)}}}},onWbs1Change:function(d,a,b,c){this.setAccount(null,null,null)},onWbsChange:function(n,f,g,j){var c=this,h=TS.app.settings,b=c.getView(),d=c.getViewModel(),a=d.get('selectedEXP'),k=a&&a.get('wbs1')?a.get('wbs1'):b.lookup('wbs1combo')&&b.lookup('wbs1combo').getSelection()?b.lookup('wbs1combo').getSelection().get('id'):'',l=a&&a.get('wbs2')?a.get('wbs2'):b.lookup('wbs2combo')&&b.lookup('wbs2combo').getSelection()?b.lookup('wbs2combo').getSelection().get('id'):'',m=a?a.get('wbs3'):'',i=[],e=[]},onProjectLookup:function(b){var a=Ext.create({xtype:'exp-projectlookuptree',viewModel:{parent:this.getViewModel()},app:'EXP'});Ext.Viewport.add(a);a.show()},onEditMenuTap:function(){var b=this,c=b.getView(),a=Ext.first('app-exa').add({xtype:'exp-editmenu'});a.show()},onCancelExp:function(){var f=this,b=f.getViewModel(),d=b.get('selectedEXP'),c=b.get('originalValues'),a=b.getStore('explist'),e=a.getById(d.id);a.remove(e);a.add(c);a.sort([{property:'sortOrder',direction:'ASC'}]);b.set('originalValues',null);Ext.first('app-exa').setActiveItem(2)},onSaveExpense:function(){var d=this,l=TS.app.settings,a=d.getView(),e=d.getViewModel(),i=e.get('selectedEXP'),c=a.lookup('wbs1combo'),b=a.lookup('wbs2combo'),h=a.lookup('wbs3combo'),j=b.getValue(),k=h.getValue(),f=!1,g=!1;if(c.getValue()){f=c.getSelection().get('wbs2Required')}if(b.getValue()){g=b.getSelection().get('wbs3Required')}if(!e.get('selectedEXP').get('expDate')){Ext.Msg.alert('Error','Expense Date is a required field.');return}a.setActiveItem(2)},doCopyExpReport:function(g){var d=this,c=Ext.first('exp-report-list'),i=d.getView(),h=d.getViewModel(),b=c.getSelection(),e=TS.app.settings,f=h.get('expreportlist'),j,a;if(b){a=b.copy(null);a.set('id',Ext.data.identifier.Uuid.Global.generate());a.set('oldRptId',b.get('expReportId'));a.set('reportName','');a.set('reportDate',new Date());a.set('expReportId','');a.set('signature',null);a.set('statusText',Ext.getStore('FwaStatus').findRecord('value',b.get('status')).get('description'));e.expenseReportCopy=!0;f.add(a);c.setSelection(a);i.setActiveItem(1)}else {Ext.Msg.alert('Error','<div style="text-align:center;">No expense report selected</div>')}g.up('exprpt-editmenu').hide()},doCopyExpItem:function(h){var d=this,f=d.getView(),c=f.lookup('expenseList'),e=d.getViewModel(),b=c.getSelection(),j=TS.app.settings,g=e.get('explist'),i=e.get('selectedExpReport'),a;if(b){a=b.copy(null);a.set('id',Ext.data.identifier.Uuid.Global.generate());a.set('amount','');a.set('expDate',new Date());g.add(a);c.setSelection(a);f.setActiveItem(2)}else {Ext.Msg.alert('Error','<div style="text-align: center;">No expense selected</div>')}h.up('explist-editmenu').hide()},removeExpReport:function(e){var f=this,h=Ext.first('exp-report-list'),j=f.getView(),i=f.getViewModel(),d=h.getSelection(),c=i.get('expreportlist'),g=TS.app.settings,a,b;if(!d){Ext.Msg.alert('Error','<div style="text-align: center;">No expense report selected</div>');e.up('exprpt-editmenu').hide();return}a=d.get('expReportId');Ext.each(c.getRange(),function(c,d){if(c.get('expReportId')==a){b=d}});Ext.Msg.confirm('Please Confirm','<div style="text-align: center;">Are you sure you want to delete this expense report?</div>',function(d){if(d=='yes'){if(a){Exp.DeleteExpenseReport(null,g.username,a,function(a,f,g){if(a&&a.success){c.removeAt(b)}else {if(a){Ext.GlobalEvents.fireEvent('Error',a)}}}.bind(this))}else {c.removeAt(b)}}e.up('exprpt-editmenu').hide()})},onEditReportMenuTap:function(){var b=this,c=b.getView(),a=Ext.first('app-exp').add({xtype:'exprpt-editmenu'});a.show()},onEditListMenuTap:function(){var b=this,c=b.getView(),a=Ext.first('app-exa').add({xtype:'explist-editmenu'});a.show()},removeExpListItem:function(d){var f=this,i=f.getView(),g=i.lookup('expenseList'),h=f.getViewModel(),b=g.getSelection(),c=h.get('explist'),a,e;if(!b){Ext.Msg.alert('Error','<div style="text-align: center;">No expense selected</div>');d.up('explist-editmenu').hide();return}e=b.get('id');Ext.each(c.getRange(),function(b,c){if(b.get('id')==e){a=c}});Ext.Msg.confirm('Please Confirm','<div style="text-align: center;">Are you sure you want to delete this expense?</div>',function(b){if(b=='yes'){c.removeAt(a)}d.up('explist-editmenu').hide()})},onReportDateChange:function(c,e,f){var a=this,b=a.getViewModel(),d=b.get('selectedExpReport')},onEditExpenseDoubleTap:function(a,d,c,b,e){return !1},onBillableChange:function(a,n,o){var d=this,k=TS.app.settings,f=d.lookup('categoryField'),h=f.getStore(),c=h.findRecord('category',f.getValue()),e=d.lookup('wbs1combo'),j=e.getStore(),b=d.lookup('accountField'),i=b.getStore(),m=d.lookup('billableCheckBoxField'),g,l;i.clearFilter();if(!e.getValue()){b.setValue(c.get('defaultNonRegularAccount'));a.setValue(!1);a.setDisabled(!0)}else {g=j.findRecord('id',e.getValue()).get('chargeType');if(g=='R'){if(a.getValue()){b.setValue(c.get('defaultRegularBillableAccount'))}else {b.setValue(c.get('defaultRegularNonbillableAccount'))}a.setHidden(!k.exDisplayBillable)}else {b.setValue(c.get('defaultNonRegularAccount'));a.setValue(!1);a.setDisabled(!0)}}},setMileageAmount:function(f,g){var e=this,a=e.getView(),d=a.lookup('milesField'),c=a.lookup('amountPerMileField'),b=a.lookup('amountField');b.setValue(Math.round(d.getValue()*c.getValue()*100)/100)}},0,0,0,0,['controller.exa-main'],0,[TS.controller.exa,'MainController'],0);Ext.cmd.derive('TS.model.exa.MainModel',TS.view.main.MainModel,{init:function(){var a=this;a.get('viewfwa').on('load',function(c,b){a.set('fwa',b[0])})},stores:{expapprovaldatelist:{model:'TS.model.exp.Expense',autoLoad:!0,proxy:{type:'default',directFn:'Exp.GetExpenseApprovalDates',paramOrder:'dbi|username|empId'}},expapprovallist:{model:'TS.model.exp.ExpenseReport',proxy:{type:'default',directFn:'Exp.GetExpenseApprovalListByDate',paramOrder:'dbi|username|expDate'}},explist:{model:'TS.model.exp.Expense',proxy:{type:'default',directFn:'Exp.GetExpReport',paramOrder:'dbi|username|expReportId',reader:{type:'default',rootProperty:'data.expLines'}}},viewfwa:{model:'TS.model.fwa.Fwa',proxy:{type:'default',directFn:'Fwa.Get',paramOrder:'dbi|username|id'}},signaturelist:{model:'TS.model.shared.Attachment',sorters:[{property:'dateAttached',direction:'ASC'}]}},data:{isExa:!0},formulas:{hideExpWbs1:function(a){if(a('settings.exDisplayWbs1')=='B'||a('settings.exDisplayWbs1')=='U'){return !1}else {return !0}},hideExpWbs1Name:function(a){if(a('settings.exDisplayWbs1')=='B'||a('settings.exDisplayWbs1')=='A'){return !1}else {return !0}},hideExpWbs2:function(a){if(a('settings.exDisplayWbs2')=='B'||a('settings.exDisplayWbs2')=='U'){return !1}else {return !0}},hideExpWbs2Name:function(a){if(a('settings.fwaDisplayWbs3')=='B'||a('settings.fwaDisplayWbs3')=='A'){return !1}else {return !0}},hideExpWbs3:function(a){if(a('settings.exDisplayWbs3')=='B'||a('settings.exDisplayWbs3')=='U'){return !1}else {return !0}},hideExpWbs3Name:function(a){if(a('settings.exDisplayWbs3')=='B'||a('settings.exDisplayWbs3')=='A'){return !1}else {return !0}},hideAccount:function(a){if(a('settings.exDisplayAccount')=='B'||a('settings.exDisplayAccount')=='U'){return !1}else {return !0}},hideAccountName:function(a){if(a('settings.exDisplayAccount')=='B'||a('settings.exDisplayAccount')=='A'){return !1}else {return !0}},displayBillable:function(a){return a('settings.exDisplayBillable')},displayCompanyPaid:function(a){return a('settings.exDisplayCompanyPaid')},hasExpEditRights:function(a){var b=this;if(b.data.isExa){return a('settings.exApproverCanModify')}else {return !0}},isExa:function(b){var a=this;return a.data.isExa}},getPageTitle:function(){return 'Expense Approvals'}},0,0,0,0,['viewmodel.exa-main'],0,[TS.model.exa,'MainModel'],0);Ext.cmd.derive('TS.view.exa.Main',TS.view.main.Main,{fullscreen:!0,config:{fromFSS:!0},controller:'exa-main',viewModel:'exa-main',header:{hidden:!0},items:[{xtype:'container',layout:'fit',title:'Main card',items:[{xtype:'titlebar',cls:'ts-navigation-header',docked:'top',title:'Select Expense Period',items:[{xtype:'button',iconCls:'x-fa  fa-home',align:'left',handler:'onBackToFSS',bind:{hidden:'{!fromFSS}'}}]},{xtype:'exp-approval-date-list',reference:'approvalDates',bind:{store:'{expapprovaldatelist}',selection:'{selectedExpDate}'},style:'border-bottom:1px solid #ccc',flex:1,listeners:{itemsingletap:'editSelectedExpDate'}},{xtype:'titlebar',docked:'bottom',items:[{text:'Open',ui:'action',bind:{disabled:'{!approvalDates.selection}'},align:'right',iconCls:'x-fa fa-external-link',handler:'editSelectedExpDate'}]}]},{xtype:'exp-approval-list-panel',layout:'fit',title:'Expense List'},{xtype:'exp-list',reference:'expList',title:'Expense List'},{xtype:'exp-edit',title:'Expense'}]},0,['app-exa'],['widget','component','container','tabpanel','app-main','app-exa'],{'widget':!0,'component':!0,'container':!0,'tabpanel':!0,'app-main':!0,'app-exa':!0},['widget.app-exa'],0,[TS.view.exa,'Main'],0);Ext.cmd.derive('TS.Application',TS.BaseApplication,{controllers:['Error','Direct','Messenger','User','Settings','Modern'],views:['TS.view.crew.Main','TS.view.fwa.Main','TS.view.ts.Main','TS.view.tsa.Main','TS.view.fss.Main','TS.view.exp.Main','TS.view.exa.Main']},0,0,0,0,0,0,[TS,'Application'],0);Ext.cmd.derive('TS.view.common.Menu',Ext.Panel,{isTSMenu:!0,modal:!0,hideOnMaskTap:!0,right:0,top:5,bodyPadding:5,width:160,defaults:{xtype:'button'},scrollable:!0,hide:function(){Ext.Panel.prototype.hide.apply(this,arguments);this.destroy()},destroy:function(){var a=this;Ext.Panel.prototype.destroy.apply(this,arguments);if(a.parent){a.parent.remove(a)}}},0,0,['widget','component','container','panel'],{'widget':!0,'component':!0,'container':!0,'panel':!0},0,0,[TS.view.common,'Menu'],0);Ext.cmd.derive('TS.common.dataview.Attachments',Ext.dataview.DataView,{layout:'fit',controller:'attachments',scrollable:!0,itemTpl:new Ext.XTemplate('<tpl exec="values.parent = this;" for=".">','<div class="thumb-wrap" data-attid="{attachmentId}" style="overflow:hidden;width:20%;text-align:center;float:left;margin-left:5px;margin-top:5px; height:auto">','<div class="thumb" style="margin:4px;"><img src="{[this.getValue(values)]}" title="{name:htmlEncode}"  style="width:75%;height:auto;" /></div>','<div style="font-size:85%;word-wrap: break-word;">{[this.setFileName(values)]}</div>','<div style="white-space:nowrap;">','<div class="x-button related-btn" btnType="enlarge" style="text-align: center; display: block; {[this.setHidden(values)]}  ">View</div>','<div class="x-button related-btn" btnType="delete" style="text-align: center; display: block;{[this.setDeleteHidden()]}">Delete</div>','</div>','</div>','</tpl>','<div class="x-clear"></div>',{setFileName:function(a){if(a.filename.length>15){return a.filename.substring(0,15)+'...'}else {return a.filename}},getValue:function(a){if(a.attachmentType=='P'){if(a.attachmentItem){return 'data:image/'+a.extension+';base64,'+a.attachmentItem}else {return TS.data.IconsSelector['PHOTO']}}else {if(a.attachmentType=='D'){var b=a.extension.toUpperCase();return TS.data.IconsSelector[b]||TS.data.IconsSelector['Fallback']}}},getAttachDate:function(a){return Ext.Date.format(new Date(a.dateAttached),'Y-m-d')},setHidden:function(a){return a.attachmentType=='D'&&!Ext.os.is.Desktop?'visibility: hidden':''},setDeleteHidden:function(){var a=TS.app.settings;return a.fwaCanModify=='N'||Ext.first('#attachFormFrame').isHidden()?'visibility: hidden':''}}),listeners:{itemtap:function(f,i,g,a,d,h){var j=f,c=d.getTarget('div.x-button'),b,e;if(!c){return}b=c.getAttribute('btnType');e=d.target.className;if(b=='delete'){Ext.GlobalEvents.fireEvent('DeleteAttachment',a)}else {if(b=='enlarge'){if(a.get('attachmentType')=='P'){Ext.GlobalEvents.fireEvent('ViewEnlargedImage',a)}else {if(a.get('attachmentType')=='D'){Ext.GlobalEvents.fireEvent('ViewEnlargedDocument',a)}}}}}},itemSelector:'div.thumb-wrap',emptyText:'No attachments available',trackOver:!0,alwaysOnTop:!1,attachmentParams:null,store:{model:'TS.model.shared.Attachment',autoLoad:!1,proxy:{type:'default',directFn:'AttachmentData.GetAttachmentList',paramOrder:'dbi|username|modelType|modelId|includeItem|attachmentType'}}},0,['attachments'],['widget','component','container','dataview','attachments'],{'widget':!0,'component':!0,'container':!0,'dataview':!0,'attachments':!0},['widget.attachments'],0,[TS.common.dataview,'Attachments'],0);Ext.cmd.derive('TS.common.field.DivComponent',Ext.Component,{config:{cls:'x-field-input ts-div-component'},getTemplate:function(){return [{reference:'displayElement',tag:'div'}]}},0,['divcomponent'],['widget','component','divcomponent'],{'widget':!0,'component':!0,'divcomponent':!0},['widget.divcomponent'],0,[TS.common.field,'DivComponent'],0);Ext.cmd.derive('TS.common.field.Display',Ext.field.Field,{config:{displayText:null,cls:'ts-displayfield',component:{xtype:'divcomponent'}},updateValue:function(a){this.getComponent().displayElement.setHtml(a);this.fireEvent('change',a)}},0,['displayfield'],['widget','component','field','displayfield'],{'widget':!0,'component':!0,'field':!0,'displayfield':!0},['widget.displayfield'],0,[TS.common.field,'Display'],0);Ext.cmd.derive('TS.view.fwa.PdfViewer',Ext.Panel,{config:{src:null,height:'100%',width:'100%',overflow:'scroll'},constructor:function(b){Ext.Panel.prototype.constructor.call(this,b);var a=this,f=a.getSrc(),c=a.getHeight(),e=a.getWidth(),d=a.config.style;a.bodyElement.createChild({tag:'embed',height:c,width:e,style:d,src:f})}},1,['pdfviewer'],['widget','component','container','panel','pdfviewer'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'pdfviewer':!0},['widget.pdfviewer'],0,[TS.view.fwa,'PdfViewer'],0);Ext.cmd.derive('TS.common.dataview.AttachmentsController',Ext.app.ViewController,{listen:{global:{'DeleteAttachment':'onDeleteAttachment','ViewEnlargedImage':'onViewEnlargedImage','ViewEnlargedDocument':'onViewEnlargedDocument'}},init:function(){this.onLoadStore()},onLoadStore:function(){var d=this,h=d.getView(),g=d.getViewModel(),b=h.getStore(),j=b.getProxy(),a=h.attachmentParams,f=g.get('selectedFWA')||g.get('selectedEXP'),e=f.get('attachments')||[],i=f.get('attachmentsToAdd')||[],c;if(e.length!=0){b.clearData();c=d.loadDynamicAttachments(a.attachmentType,a.modelId);Ext.each(c,function(a){b.loadRawData(a,!0)})}if((b.loadCount==0||e.length==0)&&!IS_OFFLINE){j.setExtraParams({attachmentType:a.attachmentType,includeItem:a.includeItem,modelId:a.modelId,modelType:a.modelType});b.load(function(a,c,b){if(b){Ext.each(a,function(d){e.push(d.getData())})}})}if(i.length>0){c=d.loadDynamicAttachmentsToAdd(a.attachmentType,a.modelId);Ext.each(c,function(a){b.loadRawData(a,!0)})}},loadDynamicAttachments:function(f,d){var g=this,e=g.getViewModel().get('selectedFWA'),c=e.get('attachments'),a=[];Ext.each(c,function(b){if(b.attachmentType==f&&b.owningModelId==d){a.push(b)}});if(a.length>0){var b=[];Ext.each(a,function(a){var c=Ext.create('TS.model.shared.Attachment',{attachmentId:a.attachmentId,attachmentItem:a.attachmentItem,attachmentType:a.attachmentType,dateAttached:a.dateAttached,description:a.description,extension:a.extension,filename:a.filename,owningModelId:a.owningModelId,owningModelType:a.owningModelType});if(a.base64String){c.set('attachmentItem',a.base64String)}b.push(c)});return b}},loadDynamicAttachmentsToAdd:function(j,h){var k=this,i=k.getViewModel().get('selectedFWA'),g=i.get('attachmentsToAdd'),d=[],c='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',e='',a,b=0;Ext.each(g,function(a){if(a.attachmentType==j&&a.owningModelId==h){d.push(a)}});if(d.length>0){var f=[];Ext.each(d,function(d){while(d.attachmentItem.length>=b+3){a=(d.attachmentItem[b++]&255)<<16|(d.attachmentItem[b++]&255)<<8|d.attachmentItem[b++]&255;e+=c.charAt((a&16515072)>>18)+c.charAt((a&258048)>>12)+c.charAt((a&4032)>>6)+c.charAt(a&63)}if(d.attachmentItem.length-b>0&&d.attachmentItem.length-b<3){var g=Boolean(d.attachmentItem.length-b-1);a=(d.attachmentItem[b++]&255)<<16|(g?(d.attachmentItem[b]&255)<<8:0);e+=c.charAt((a&16515072)>>18)+c.charAt((a&258048)>>12)+(g?c.charAt((a&4032)>>6):'=')+'='}var i=Ext.create('TS.model.shared.Attachment',{attachmentId:d.attachmentId,attachmentItem:e,attachmentType:d.attachmentType,dateAttached:d.dateAttached,description:d.description,extension:d.extension,filename:d.filename,owningModelId:d.owningModelId,owningModelType:d.owningModelType});if(d.base64String){i.set('attachmentItem',d.base64String)}f.push(i)});return f}},onDeleteAttachment:function(e){var d=this,m=TS.app.settings,k=e.get('owningModelId'),g=e.get('attachmentId'),f=e.get('attachmentType'),l=e.get('attachmentType')=='P'?'photo':'document',i=e.get('filename'),c=d.getViewModel().get('selectedFWA'),n=d.getView(),h=n.getStore(),a=c.get('attachments'),b=c.get('attachmentsToAdd')||[],j;d.getView().setLoading(!0);if(!c.get('attachmentsToDelete')){c.set('attachmentsToDelete',[])}j=c.get('attachmentsToDelete');Ext.Msg.confirm('Attachment Delete','Are you sure you want to delete the '+l+' "'+i.substring(0,15)+'"? '+m.fwaAbbrevLabel+' must be saved or submitted to complete delete.',function(m){if(m==='yes'){for(var l=0;l<a.length;l++){if(a[l].attachmentType==f&&a[l].filename==i&&a[l].owningModelId==k&&a[l].attachmentId==g){h.removeAt(h.findExact('attachmentId',a[l].attachmentId));a.splice(l,1)}}if(g!=0){j.push(g)}c.set('attachments',a);for(var l=0;l<b.length;l++){if(b[l].attachmentType==f&&b[l].filename==i&&b[l].owningModelId==k&&b[l].attachmentId==g){h.removeAt(h.findExact('attachmentId',b[l].attachmentId));b.splice(l,1)}}d.onResetAttachmentCounts(f,!0);if(f==AttachmentType.Photo){Ext.first('window-photo').hide()}else {Ext.first('window-document').hide()}}});d.getView().refresh();d.getView().setLoading(!1)},onResetAttachmentCounts:function(b,c){var f=this,a=f.getViewModel().get('selectedFWA'),e=a.get('attachmentCtPhoto'),d=a.get('attachmentCtDoc');if(b==AttachmentType.Photo){if(c){a.set('attachmentCtPhoto',e-1)}else {a.set('attachmentCtPhoto',e+1)}}else {if(b==AttachmentType.Document){if(c){a.set('attachmentCtDoc',d-1)}else {a.set('attachmentCtDoc',d+1)}}}},onViewEnlargedImage:function(b){this.getView().setLoading(!0);var q=this,p=TS.app.settings,e=b.get('filename'),k=b.get('attachmentItem'),l=b.get('extension'),h='data:image/'+l+';base64,'+k,m=Ext.getBody().getViewSize().height-5,n=Ext.getBody().getViewSize().width-5,i=new Image(),j=Ext.Viewport.getOrientation(),d=!0,o='',g='',c,a,f;f=j=='portrait'?'50%':'90%';i.src=h;EXIF.getData(i,function(){var c=EXIF.getAllTags(this);if(c.GPSAltitude){d=!1;a=TS.Util.retrieveGPSData(c)}if(c.Orientation){g=TS.Util.getOrientation(c.Orientation)}a=TS.Util.retrieveGPSData(c)});c=Ext.create('Ext.Sheet',{stretchX:!0,stretchY:!0,autoDestroy:!0,scrollable:!0,layout:'fit',items:[{xtype:'titlebar',docked:'top',cls:'ts-navigation-header',title:e,items:[{align:'right',text:'Close',handler:function(){this.up('sheet').hide()}}]},{xtype:'toolbar',docked:'bottom',items:[{xtype:'displayfield',value:'<b>No GPS Info Available</b>',hidden:!d},{xtype:'button',align:'left',text:'Show GPS Info',hidden:d,reference:'propertiesBtn',handler:function(){var d=this,c=Ext.create('Ext.Sheet',{stretchX:!0,stretchY:!0,autoDestroy:!0,scrollable:'y',layout:'fit',items:[{xtype:'formpanel',scrollable:'y',items:[{xtype:'titlebar',docked:'top',cls:'ts-navigation-header',title:e,items:[{align:'right',text:'Close',handler:function(){this.up('sheet').hide()}}]},{xtype:'fieldset',title:'Properties (GPS Info)',items:[{xtype:'displayfield',labelWidth:'45%',label:'Date Taken',value:a.data.dateTime},{xtype:'numberfield',labelWidth:'45%',label:'Elevation(in feet)',value:a.data.altitudeInFeet,readOnly:!0},{xtype:'numberfield',labelWidth:'45%',label:'Latitude',value:a.data.latitude,readOnly:!0},{xtype:'numberfield',labelWidth:'45%',label:'Longitude',value:a.data.longitude,readOnly:!0},{xtype:'displayfield',labelWidth:'45%',label:'Bearing</br>(degrees from N)',value:a.data.bearingDirectionString},{xtype:'displayfield',label:'Bearing Direction Ref',value:a.data.bearingDirectionRef,labelWidth:'45%'},{xtype:'displayfield',labelWidth:'45%',label:'Image Direction</br>(degrees from N)',value:a.data.imageDirectionString},{xtype:'displayfield',label:'Image Direction Ref',value:a.data.imageDirectionRef,labelWidth:'45%'},{xtype:'container',layout:'fit',title:'GMap Window',width:'100%',height:150,items:[{xtype:'map',reference:'modernMap',mapOptions:{center:{lat:a.data.latitude,lng:a.data.longitude},mapTypeId:google.maps.MapTypeId.ROADMAP},listeners:{maprender:function(f,c){var d=new google.maps.LatLng(a.data.latitude,a.data.longitude),e=new google.maps.Marker({position:d,map:c})}}}]}]}]}]});Ext.Viewport.add(c);c.show()}}]},{xtype:'panel',padding:'30 0 0 0',layout:'vbox',items:[{xtype:'image',itemId:'myImage',padding:'200 0 0 0',frame:!0,src:h,height:f,style:g}]}]});Ext.Viewport.add(c);c.show();this.getView().setLoading(!1);Ext.Viewport.on('orientationchange',function(d,c,f,e){var a=Ext.first('#myImage');if(a){if(c=='portrait'){a.setHeight('50%')}else {a.setHeight('90%')}}})},onViewEnlargedDocument:function(e){this.getView().setLoading(!0);var u=TS.app.settings,t=e.get('filename'),h=e.get('attachmentItem'),r=e.get('extension'),o=Ext.getBody().getViewSize().height-1,p=Ext.getBody().getViewSize().width-1,b='',a='',m,i=atob(h),k=[],l=512,n,s,f;switch(r){case 'pdf':b='data:application/pdf;base64,';a='application/pdf';break;case 'doc':b='data:application/msword;base64,';a='application/msword';break;case 'docx':b='data:application/vnd.openxmlformats-officedocument.wordprocessingml.document;base64,';a='application/vnd.openxmlformats-officedocument.wordprocessingml.document';break;case 'xls':case 'xlt':case 'xla':b='data:application/vnd.ms-excel;base64,';a='application/vnd.ms-excel';break;case 'xlsx':b='data:application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;base64,';a='application/vnd.openxmlformats-officedocument.spreadsheetml.sheet';break;case 'txt':b='data:text/plain;base64,';a='text/plain';break;case 'html':b='data:text/html;base64,';a='text/html';break;default:b='data:text/plain;base64,';a='text/plain';break;}m=b+h;for(var c=0;c<i.length;c+=l){var g=i.slice(c,c+l);var j=new Array(g.length);for(var d=0;d<g.length;d++){j[d]=g.charCodeAt(d)}var q=new Uint8Array(j);k.push(q)}n=new Blob(k,{type:a});s=window.URL.createObjectURL(n);setTimeout(function(){var b=this,a;f=m;a=Ext.create('Ext.Sheet',{fullscreen:!0,stretchX:!0,stretchY:!0,autoDestroy:!0,scrollable:!0,items:[{xtype:'titlebar',docked:'top',cls:'ts-navigation-header',title:'Document View',items:[{align:'left',text:'Print',handler:function(){var b,a;b=Ext.getBody().appendChild({id:'printerContent',tag:'iframe'});a=b.dom.contentWindow;a.document.open(f);a.document.write();a.print();a.close();Ext.fly('printerContent').destroy()},hidden:!0},{align:'right',text:'Close',handler:function(){this.up('sheet').hide()}}]},{flex:1,xtype:'pdfviewer',height:o,width:p,src:f,style:'overflow: scroll; -webkit-overflow-scrolling: touch;'}]});Ext.Viewport.add(a);a.show()},400);this.getView().setLoading(!1)},closeSheet:function(a){a.up('sheet').hide()},onOpenExIfData:function(){var c=this,b=c.getViewModel(),d=TS.app.settings,e=b.get('selectedFWA'),a=Ext.create({xtype:'fwa-exIfData',viewModel:{parent:b}});Ext.Viewport.add(a);a.show()}},0,0,0,0,['controller.attachments'],0,[TS.common.dataview,'AttachmentsController'],0);Ext.cmd.derive('TS.common.draw.Bezier',Ext.Base,{constructor:function(a,b,c,d){this.startPoint=a;this.control1=b;this.control2=c;this.endPoint=d},point:function(a,b,d,e,c){return b*(1-a)*(1-a)*(1-a)+3*d*(1-a)*(1-a)*a+3*e*(1-a)*a*a+c*a*a*a},length:function(){var a=this,i=10,h=0,b,g,e,f,j,k,c,d;for(b=0;b<=i;b++){g=b/i;e=a.point(g,a.startPoint.x,a.control1.x,a.control2.x,a.endPoint.x);f=a.point(g,a.startPoint.y,a.control1.y,a.control2.y,a.endPoint.y);if(b>0){c=e-j;d=f-k;h+=Math.sqrt(c*c+d*d)}j=e;k=f}return h}},1,0,0,0,0,0,[TS.common.draw,'Bezier'],0);Ext.cmd.derive('TS.common.draw.Draw',Ext.Component,{reqires:['TS.common.draw.Bezier','TS.common.draw.Point'],velocityFilterWeight:0.7,lineMinWidth:0.2,lineMaxWidth:2.5,penColor:'black',config:{background:'rgba(0,0,0,0)',isClean:!0},publishes:['isClean'],template:[{tag:'canvas',reference:'canvasElement'}],initialize:function(){var a=this,b=a.canvasElement.dom;Ext.Component.prototype.initialize.call(this);a.element.on({scope:a,touchstart:'onTouchStart',touchmove:'onTouchMove',touchend:'onTouchEnd'});this.on({scope:this,resize:'onResize'});a._canvas=b;a._ctx=b.getContext('2d');a.dotSize=function(){return (a.lineMinWidth+a.lineMaxWidth)/2};a.clear()},onResize:function(){var a=this,d=a._canvas,e=a.el.getBox(),c=a.oldSize,f,b;if(!a._isEmpty){f=d.toDataURL()}d.width=e.width;d.height=e.height;if(!a._isEmpty&&c){b=new Image();a.reset();b.src=f;b.onload=function(){a._ctx.drawImage(b,0,0,c.width,c.height)};a._isEmpty=!1}a.oldSize=e},onTouchStart:function(a){if(a.event.targetTouches.length==1){var b=a.event.changedTouches[0];this.strokeBegin(b)}},onTouchMove:function(a){a.event.preventDefault();var b=a.event.targetTouches[0];this.strokeUpdate(b)},onTouchEnd:function(a){var b=a.event.target===this._canvas;if(b){a.event.preventDefault();this.strokeEnd(a.event)}this.setIsClean(!1)},getCanvasWidthScale:function(){return this._canvas.clientWidth/this._canvas.width},getCanvasHeightScale:function(){return this._canvas.clientHeight/this._canvas.height},clear:function(){var b=this,c=b._ctx,a=b._canvas;c.fillStyle=b.getBackground();c.clearRect(0,0,a.width,a.height);c.fillRect(0,0,a.width,a.height);b.reset()},rotateCanvas:function(){},toDataURL:function(b,c,d){var a=this._canvas;if(b){this.rotateCanvas()}return a.toDataURL.apply(a,Ext.Array.slice(arguments,1))},fromDataURL:function(d){var a=this,b=new Image(),c=window.devicePixelRatio||1,f=a._canvas.width/c,e=a._canvas.height/c;a.reset();b.src=d;b.onload=function(){a._ctx.drawImage(b,0,0,f,e)};a._isEmpty=!1},strokeUpdate:function(a){var b=this.createPoint(a);this.addPoint(b)},strokeBegin:function(b){var a=this;a.reset();a.strokeUpdate(b);if(typeof a.onBegin==='function'){a.onBegin(b)}},strokeDraw:function(c){var a=this,b=a._ctx,d=typeof a.dotSize==='function'?a.dotSize():a.dotSize;b.beginPath();a.drawPoint(c.x,c.y,d);b.closePath();b.fill()},strokeEnd:function(d){var a=this,c=a.points.length>2,b=a.points[0];if(!c&&b){a.strokeDraw(b)}if(typeof a.onEnd==='function'){a.onEnd(d)}},isEmpty:function(){return this._isEmpty},reset:function(){var a=this;a.points=[];a._lastVelocity=0;a._lastWidth=(a.lineMinWidth+a.lineMaxWidth)/2;a._isEmpty=!0;a._ctx.fillStyle=a.penColor;a.setIsClean(!0)},createPoint:function(a){var b=this._canvas.getBoundingClientRect();return new TS.common.draw.Point((a.clientX-b.left)/this.getCanvasWidthScale(),(a.clientY-b.top)/this.getCanvasHeightScale())},addPoint:function(f){var a=this.points,d,e,c,b;a.push(f);if(a.length>2){if(a.length===3){a.unshift(a[0])}b=this.calculateCurveControlPoints(a[0],a[1],a[2]);d=b.c2;b=this.calculateCurveControlPoints(a[1],a[2],a[3]);e=b.c1;c=new TS.common.draw.Bezier(a[1],d,e,a[2]);this.addCurve(c);a.shift()}},calculateCurveControlPoints:function(d,a,e){var f=TS.common.draw,g=d.x-a.x,i=d.y-a.y,h=a.x-e.x,j=a.y-e.y,c={x:(d.x+a.x)/2,y:(d.y+a.y)/2},b={x:(a.x+e.x)/2,y:(a.y+e.y)/2},r=Math.sqrt(g*g+i*i),l=Math.sqrt(h*h+j*j),p=c.x-b.x,q=c.y-b.y,o=l/(r+l),k={x:b.x+p*o,y:b.y+q*o},m=a.x-k.x,n=a.y-k.y;return {c1:new f.Point(c.x+m,c.y+n),c2:new f.Point(b.x+m,b.y+n)}},addCurve:function(d){var a=this,e=d.startPoint,f=d.endPoint,b,c;b=f.velocityFrom(e);b=a.velocityFilterWeight*b+(1-a.velocityFilterWeight)*a._lastVelocity;c=a.strokeWidth(b);a.drawCurve(d,a._lastWidth,c);a._lastVelocity=b;a._lastWidth=c},drawPoint:function(b,c,d){var a=this._ctx;a.moveTo(b,c);a.arc(b,c,d,0,2*Math.PI,!1);this._isEmpty=!1},drawCurve:function(a,m,p){var k=this._ctx,o=p-m,j,n,i,b,g,f,c,h,l,d,e;j=Math.floor(a.length());k.beginPath();for(i=0;i<j;i++){b=i/j;g=b*b;f=g*b;c=1-b;h=c*c;l=h*c;d=l*a.startPoint.x;d+=3*h*b*a.control1.x;d+=3*c*g*a.control2.x;d+=f*a.endPoint.x;e=l*a.startPoint.y;e+=3*h*b*a.control1.y;e+=3*c*g*a.control2.y;e+=f*a.endPoint.y;n=m+f*o;this.drawPoint(d,e,n)}k.closePath();k.fill()},strokeWidth:function(a){return Math.max(this.lineMaxWidth/(a+1),this.lineMinWidth)}},0,['ts-draw'],['widget','component','ts-draw'],{'widget':!0,'component':!0,'ts-draw':!0},['widget.ts-draw'],0,[TS.common.draw,'Draw'],0);Ext.cmd.derive('TS.common.draw.Point',Ext.Base,{constructor:function(b,c,a){this.x=b;this.y=c;this.time=a||(new Date()).getTime()},velocityFrom:function(a){return this.time!==a.time?this.distanceTo(a)/(this.time-a.time):1},distanceTo:function(a){return Math.sqrt(Math.pow(this.x-a.x,2)+Math.pow(this.y-a.y,2))}},1,0,0,0,0,0,[TS.common.draw,'Point'],0);Ext.cmd.derive('TS.common.field.AllEmployees',Ext.field.Select,{autoSelect:!1,config:{valueField:'empId',displayField:'empName',store:'AllEmployees'}},0,['field-allemployees'],['widget','component','field','textfield','selectfield','field-allemployees'],{'widget':!0,'component':!0,'field':!0,'textfield':!0,'selectfield':!0,'field-allemployees':!0},['widget.field-allemployees'],0,[TS.common.field,'AllEmployees'],0);Ext.cmd.derive('TS.common.field.BillCat',Ext.field.Select,{config:{valueField:'category',displayField:'description'},initialize:function(){this.setStore({model:'TS.model.shared.BillCategory',autoLoad:!0,pageSize:1000});Ext.field.Select.prototype.initialize.call(this)}},0,['field-billcategory'],['widget','component','field','textfield','selectfield','field-billcategory'],{'widget':!0,'component':!0,'field':!0,'textfield':!0,'selectfield':!0,'field-billcategory':!0},['widget.field-billcategory'],0,[TS.common.field,'BillCat'],0);Ext.cmd.derive('TS.common.field.CrewList',Ext.field.Select,{config:{valueField:'crewId',displayField:'crewName',store:'CrewsForNewFWA'},initialize:function(){var c=this,b=TS.app.settings,a=c.getStore();if(b.schedCrewPreparedByMe=='Y'){a.clearFilter();a.filterBy(function(a){return a.get('preparedByEmpId')==b.empId})}else {a.clearFilter()}Ext.field.Select.prototype.initialize.call(this)}},0,['field-crewlist'],['widget','component','field','textfield','selectfield','field-crewlist'],{'widget':!0,'component':!0,'field':!0,'textfield':!0,'selectfield':!0,'field-crewlist':!0},['widget.field-crewlist'],0,[TS.common.field,'CrewList'],0);Ext.cmd.derive('TS.common.field.CrewRole',Ext.field.Select,{config:{valueField:'crewRoleId',displayField:'crewRoleName',store:'Roles'}},0,['field-crewrole'],['widget','component','field','textfield','selectfield','field-crewrole'],{'widget':!0,'component':!0,'field':!0,'textfield':!0,'selectfield':!0,'field-crewrole':!0},['widget.field-crewrole'],0,[TS.common.field,'CrewRole'],0);Ext.cmd.derive('TS.common.field.Employee',Ext.field.Select,{autoSelect:!1,config:{valueField:'empId',displayField:'empName',store:'Employees'}},0,['field-employee'],['widget','component','field','textfield','selectfield','field-employee'],{'widget':!0,'component':!0,'field':!0,'textfield':!0,'selectfield':!0,'field-employee':!0},['widget.field-employee'],0,[TS.common.field,'Employee'],0);Ext.cmd.derive('TS.common.field.Equipment',Ext.field.Select,{valueField:'equipmentId',displayField:'equipmentName',initialize:function(){var a=this,c=Ext.getStore('EquipmentList'),b=TS.app.getViewport().getViewModel().get('selectedUnit');Ext.field.Select.prototype.initialize.apply(this,arguments);a.setStore(c);if(b){if(IS_OFFLINE){a.getStore().clearFilter();a.getStore().addFilter({filterFn:function(a){return a.get('unitCodeId')===b.get('unitCodeId')}})}else {a.getStore().getProxy().extraParams['unitCodeId']=b.get('unitCodeId');a.getStore().load(function(b,c,a){})}}}},0,['field-equipment'],['widget','component','field','textfield','selectfield','field-equipment'],{'widget':!0,'component':!0,'field':!0,'textfield':!0,'selectfield':!0,'field-equipment':!0},['widget.field-equipment'],0,[TS.common.field,'Equipment'],0);Ext.cmd.derive('TS.common.picker.ExpTwoLineSlot',Ext.picker.Slot,{updateDisplayField:function(){if(!this.config.itemTpl){this.setItemTpl('<div class="x-picker-item {cls} <tpl if="extra">x-picker-invalid</tpl> ts-twolineslot"><span>{account}</span><span> - {accountName}</span></div>')}}},0,['exptwolinepickerslot'],['widget','component','container','dataview','pickerslot','exptwolinepickerslot'],{'widget':!0,'component':!0,'container':!0,'dataview':!0,'pickerslot':!0,'exptwolinepickerslot':!0},['widget.exptwolinepickerslot'],0,[TS.common.picker,'ExpTwoLineSlot'],0);Ext.cmd.derive('TS.common.picker.ExpTwoLinePicker',Ext.picker.Picker,{config:{defaultType:'exptwolinepickerslot'}},0,['exptwolinepicker'],['widget','component','container','panel','sheet','picker','exptwolinepicker'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'sheet':!0,'picker':!0,'exptwolinepicker':!0},['widget.exptwolinepicker'],0,[TS.common.picker,'ExpTwoLinePicker'],0);Ext.cmd.derive('TS.common.field.ExpAccount',Ext.field.Select,{autoSelect:!1,referenceRoot:'formpanel',valueField:'account',displayField:'account',store:'ExpAccount',getPhonePicker:function(){var a=this,b=a.phonePicker,c;if(!b){c=a.getDefaultPhonePickerConfig();a.phonePicker=b=Ext.create('TS.common.picker.ExpTwoLinePicker',Ext.apply({slots:[{align:'left',name:a.getName(),valueField:a.getValueField(),displayField:a.getDisplayField(),value:a.getValue(),store:a.getStore()}],listeners:{change:a.onPickerChange,scope:a}},c))}return b},isDirty:function(){var a=this,b=a.getValue()===''||a.getValue()===' '?null:a.getValue();return !a.disabled&&!a.isEqual(b,a.originalValue)},initialize:function(){var a=this,b=TS.app.settings,c=a.config;Ext.field.Select.prototype.initialize.apply(this,arguments);a.getStore().getProxy().extraParams['app']=c.app;a.getStore().getProxy().extraParams['includeInactive']=b.tsAllowTimeOnInactive;a.getStore().load()},setValue:function(c,j){var a=this,i=Ext.isObject(c)?c.get('id'):c,g=a.config,f=g.sets?a.up(a.referenceRoot).down('#'+g.sets):!1,d=g.clears,e=f?f.getStore():null,b;(arguments.callee.$previous||Ext.field.Select.prototype.setValue).apply(this,arguments);if(j&&d&&d.length){d.forEach(function(b){a.up(a.referenceRoot).down('#'+b).setValue('')})}if(f&&e&&i){for(var h in a.dependencyFilter){if(h===a.modelName.toLowerCase()){b=i}else {b=a.up(a.referenceRoot).down('#'+a.dependencyFilter[h]).getValue()}e.getProxy().extraParams[h]=b}e.load()}},onPickerChange:function(g,f){var a=this,c=f[a.getName()],b=a.getStore(),e=b.find(a.getValueField(),c,null,null,null,!0),d=b.getAt(e);a.setValue(d,!0)}},0,['field-expaccount'],['widget','component','field','textfield','selectfield','field-expaccount'],{'widget':!0,'component':!0,'field':!0,'textfield':!0,'selectfield':!0,'field-expaccount':!0},['widget.field-expaccount'],0,[TS.common.field,'ExpAccount'],0);Ext.cmd.derive('TS.common.field.ExpCategory',Ext.field.Select,{autoSelect:!1,config:{valueField:'category',displayField:'description',store:'ExpCategory'}},0,['field-expcategory'],['widget','component','field','textfield','selectfield','field-expcategory'],{'widget':!0,'component':!0,'field':!0,'textfield':!0,'selectfield':!0,'field-expcategory':!0},['widget.field-expcategory'],0,[TS.common.field,'ExpCategory'],0);Ext.cmd.derive('TS.common.picker.ExpFwaTwoLineSlot',Ext.picker.Slot,{updateDisplayField:function(){if(!this.config.itemTpl){this.setItemTpl('<div class="x-picker-item {cls} <tpl if="extra">x-picker-invalid</tpl> ts-twolineslot"><span>{fwaNum}</span><span> - {fwaName}</span></div>')}}},0,['expfwatwolinepickerslot'],['widget','component','container','dataview','pickerslot','expfwatwolinepickerslot'],{'widget':!0,'component':!0,'container':!0,'dataview':!0,'pickerslot':!0,'expfwatwolinepickerslot':!0},['widget.expfwatwolinepickerslot'],0,[TS.common.picker,'ExpFwaTwoLineSlot'],0);Ext.cmd.derive('TS.common.picker.ExpFwaTwoLinePicker',Ext.picker.Picker,{config:{defaultType:'expfwatwolinepickerslot'}},0,['expfwatwolinepicker'],['widget','component','container','panel','sheet','picker','expfwatwolinepicker'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'sheet':!0,'picker':!0,'expfwatwolinepicker':!0},['widget.expfwatwolinepicker'],0,[TS.common.picker,'ExpFwaTwoLinePicker'],0);Ext.cmd.derive('TS.common.field.ExpFwaList',Ext.field.Select,{autoSelect:!1,referenceRoot:'formpanel',valueField:'fwaNum',displayField:'fwaNum',store:'ExpFwaList',getPhonePicker:function(){var a=this,b=a.phonePicker,c;if(!b){c=a.getDefaultPhonePickerConfig();a.phonePicker=b=Ext.create('TS.common.picker.ExpFwaTwoLinePicker',Ext.apply({slots:[{align:'left',name:a.getName(),valueField:a.getValueField(),displayField:a.getDisplayField(),value:a.getValue(),store:a.getStore()}],listeners:{change:a.onPickerChange,scope:a}},c))}return b},isDirty:function(){var a=this,b=a.getValue()===''||a.getValue()===' '?null:a.getValue();return !a.disabled&&!a.isEqual(b,a.originalValue)},initialize:function(){var a=this,b=TS.app.settings,c=a.config;Ext.field.Select.prototype.initialize.apply(this,arguments);a.getStore().getProxy().extraParams['app']=c.app;a.getStore().getProxy().extraParams['includeInactive']=b.tsAllowTimeOnInactive;a.getStore().load()},setValue:function(c,j){var a=this,i=Ext.isObject(c)?c.get('id'):c,g=a.config,f=g.sets?a.up(a.referenceRoot).down('#'+g.sets):!1,d=g.clears,e=f?f.getStore():null,b;(arguments.callee.$previous||Ext.field.Select.prototype.setValue).apply(this,arguments);if(j&&d&&d.length){d.forEach(function(b){a.up(a.referenceRoot).down('#'+b).setValue('')})}if(f&&e&&i){for(var h in a.dependencyFilter){if(h===a.modelName.toLowerCase()){b=i}else {b=a.up(a.referenceRoot).down('#'+a.dependencyFilter[h]).getValue()}e.getProxy().extraParams[h]=b}e.load()}},onPickerChange:function(g,f){var a=this,c=f[a.getName()],b=a.getStore(),e=b.find(a.getValueField(),c,null,null,null,!0),d=b.getAt(e);a.setValue(d,!0)}},0,['field-expfwalist'],['widget','component','field','textfield','selectfield','field-expfwalist'],{'widget':!0,'component':!0,'field':!0,'textfield':!0,'selectfield':!0,'field-expfwalist':!0},['widget.field-expfwalist'],0,[TS.common.field,'ExpFwaList'],0);Ext.cmd.derive('TS.common.field.PriorityList',Ext.field.Select,{config:{valueField:'priorityId',displayField:'priorityDescr',store:'PriorityList',padding:5,listeners:{change:function(d,b){if(b){var c=Ext.getStore('PriorityList').findRecord('priorityId',b.get('priorityId')),a}if(c){a=c.get('priorityHighlightColor')}if(a){d.parent.parent.parent.getViewModel().get('selectedFWA').set('fieldPriorityColor','background-color:rgb('+a+')')}}}}},0,['field-prioritylist'],['widget','component','field','textfield','selectfield','field-prioritylist'],{'widget':!0,'component':!0,'field':!0,'textfield':!0,'selectfield':!0,'field-prioritylist':!0},['widget.field-prioritylist'],0,[TS.common.field,'PriorityList'],0);Ext.cmd.derive('TS.common.field.Schedulers',Ext.field.Select,{autoSelect:!1,config:{valueField:'empId',displayField:'empName',store:'Schedulers',listeners:{focus:function(b){var a=b.getStore();a.filter('isScheduler',!0)}}}},0,['field-schedulers'],['widget','component','field','textfield','selectfield','field-schedulers'],{'widget':!0,'component':!0,'field':!0,'textfield':!0,'selectfield':!0,'field-schedulers':!0},['widget.field-schedulers'],0,[TS.common.field,'Schedulers'],0);Ext.cmd.derive('TS.common.field.Template',Ext.field.Select,{valueField:'templateId',displayField:'templateName',store:{model:'TS.model.shared.PrintTemplate',autoLoad:!0,pageSize:10000,remoteFilter:!1,remoteSort:!1}},0,['field-template'],['widget','component','field','textfield','selectfield','field-template'],{'widget':!0,'component':!0,'field':!0,'textfield':!0,'selectfield':!0,'field-template':!0},['widget.field-template'],0,[TS.common.field,'Template'],0);Ext.cmd.derive('TS.common.picker.Time',Ext.picker.Picker,{isPicker:!0,enableAMPM:!1,originalDate:null,config:{minuteText:'Minute',hourText:'Hour',ampmText:'AM / PM',slotOrder:[],useTitles:!0,doneButton:!0},constructor:function(){Ext.picker.Picker.prototype.constructor.apply(this,arguments);this.createSlots()},createSlots:function(){var b=this,j=TS.app.settings,i=j.schedTimeAxisGranularity,g=['hour','minute','daytime'],h=['hour','minute'],c=[],e=[],d=[],f=[],a;for(a=0;a<60;a+=i){e.push({text:a<10?'0'+a:a,value:a})}if(b.enableAMPM){b.setSlotOrder(g);for(a=1;a<=12;a++){c.push({text:a,value:a})}d.push({text:'AM',value:'AM'});d.push({text:'PM',value:'PM'});g.forEach(function(a){f.push(b.createSlot(a,c,e,d))},b)}else {b.setSlotOrder(h);for(a=0;a<=23;a++){c.push({text:a,value:a})}h.forEach(function(a){f.push(b.createSlot(a,c,e))},b)}b.setSlots(f)},createSlot:function(e,d,c,b){var a=this.getUseTitles();switch(e){case 'hour':return {name:'hour',align:'center',data:d,title:a?this.getHourText():!1,flex:2};case 'minute':return {name:'minute',align:'center',data:c,title:a?this.getMinuteText():!1,flex:2};case 'daytime':return {name:'daytime',align:'center',data:b,title:a?this.getAmpmText():!1,flex:2};}},setValue:function(a,e){var d=this,c,b;if(!a){a=new Date()}if(Ext.isDate(a)){d.originalDate=a;a={hour:a.getHours(),minute:Math.floor(a.getMinutes()/5)*5,daytime:a.getHours()>=12?'PM':'AM'};if(d.enableAMPM){if(a.hour===0&&a.daytime==='AM'){a.hour=12}if(a.hour>12){a.hour-=12}}}else {if(typeof a==='string'){a=a.trim();b=a.indexOf(':');c=a.substring(0,b);if(d.enableAMPM){a={hour:c,minute:Math.floor(a.substring(b+1,a.indexOf(' '))/5)*5,daytime:c>=12?'PM':'AM'}}else {a={hour:c,minute:a.substring(b+1)}}}}(arguments.callee.$previous||Ext.picker.Picker.prototype.setValue).call(this,a,e);d.onSlotPick()},getValue:function(h){var d=this,b={},g=d.getItems().items,i=g.length,c,e,a,j,f=new Date(d.originalDate?d.originalDate:'');for(e=0;e<i;e++){c=g[e];if(c instanceof Ext.picker.Slot){b[c.getName()]=c.getValue(h)}}a=b.hour;if(d.enableAMPM){if(b.daytime==='PM'&&a<12){a+=12}else {if(b.daytime==='AM'&&a===12){a=0}}}f.setHours(a);f.setMinutes(b.minute);return f},onDoneButtonTap:function(){var a=this,c=a._value,b=a.getValue(!0),d=b;if(Ext.isDate(b)){d=b.toDateString()}if(Ext.isDate(c)){c=c.toDateString()}if(d!=c){a.fireEvent('change',a,b)}a.hide();Ext.util.InputBlocker.unblockInputs()}},1,0,['widget','component','container','panel','sheet','picker'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'sheet':!0,'picker':!0},0,0,[TS.common.picker,'Time'],0);Ext.cmd.derive('TS.common.field.TimePicker',Ext.field.DatePicker,{config:{dateFormat:'H:i',destroyPickerOnHide:!0,picker:{xclass:'TS.common.picker.Time',enableAMPM:!0}}},0,['timepickerfield'],['widget','component','field','textfield','datepickerfield','timepickerfield'],{'widget':!0,'component':!0,'field':!0,'textfield':!0,'datepickerfield':!0,'timepickerfield':!0},['widget.timepickerfield'],0,[TS.common.field,'TimePicker'],0);Ext.cmd.derive('TS.common.field.TsEmployee',Ext.field.Select,{autoSelect:!1,config:{valueField:'empId',displayField:'empName',store:'TsEmployees'}},0,['field-tsemployee'],['widget','component','field','textfield','selectfield','field-tsemployee'],{'widget':!0,'component':!0,'field':!0,'textfield':!0,'selectfield':!0,'field-tsemployee':!0},['widget.field-tsemployee'],0,[TS.common.field,'TsEmployee'],0);Ext.cmd.derive('TS.common.field.UnitCode',Ext.field.Select,{config:{valueField:'unitCodeId',displayField:'unitCodeCombo',store:'UnitCode'}},0,['field-unitcode'],['widget','component','field','textfield','selectfield','field-unitcode'],{'widget':!0,'component':!0,'field':!0,'textfield':!0,'selectfield':!0,'field-unitcode':!0},['widget.field-unitcode'],0,[TS.common.field,'UnitCode'],0);Ext.cmd.derive('TS.common.field.WorkCode',Ext.field.Select,{config:{valueField:'workCodeId',displayField:'workCodeCombo',store:'WorkCodes'}},0,['field-workcode'],['widget','component','field','textfield','selectfield','field-workcode'],{'widget':!0,'component':!0,'field':!0,'textfield':!0,'selectfield':!0,'field-workcode':!0},['widget.field-workcode'],0,[TS.common.field,'WorkCode'],0);Ext.cmd.derive('TS.common.fwaview.FwaExpenses',Ext.Sheet,{stretchX:!0,stretchY:!0,autoDestroy:!0,layout:'fit',items:[{xtype:'titlebar',docked:'top',cls:'ts-navigation-header',title:'Employee Expenses',items:[{align:'right',text:'Close',handler:function(){this.up('sheet').hide()}}]},{xtype:'component',height:25,docked:'top',userCls:'ts-user-details',bind:{data:{settings:'{settings}'}},tpl:new Ext.XTemplate('<div class="hours-header">','<span><h2>Date</h2></span><span><h2>Employee</h2></span><span><h2>Category</h2></span></div>')},{xtype:'list',scrollable:'y',itemCls:'ts-day-view-item',itemTpl:new Ext.XTemplate('<div class="hours-detail"><span>{expDate:date("n/j/Y")}</span><span>{[this.getEmployeeName(values)]}</span><span>{[this.getCategoryName(values)]}</span></div>','<div><b>Description:</b><span>&nbsp;{description}</span></div>','<div><b>Amount:</b> {[this.getAmount(values)]}</div>','<div><b>Reason:</b> {reason}</div>',{getEmployeeName:function(a){return Ext.getStore('Employees').getById(a.empId).get('empName')},getCategoryName:function(a){return Ext.getStore('ExpCategory').getById(a.category).get('description')},getAmount:function(a){return '$'+a.amount}}),itemHeight:80,onItemDisclosure:!1,bind:{store:'{fwa.expenses}'}}]},0,['ts-fwaexpenses'],['widget','component','container','panel','sheet','ts-fwaexpenses'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'sheet':!0,'ts-fwaexpenses':!0},['widget.ts-fwaexpenses'],0,[TS.common.fwaview,'FwaExpenses'],0);Ext.cmd.derive('TS.common.fwaview.FwaHours',Ext.Sheet,{stretchX:!0,stretchY:!0,autoDestroy:!0,layout:'fit',items:[{xtype:'titlebar',docked:'top',cls:'ts-navigation-header',title:'Employee Hours',items:[{align:'right',text:'Close',handler:function(){this.up('sheet').hide()}}]},{xtype:'component',height:25,docked:'top',userCls:'ts-user-details',bind:{data:{settings:'{settings}'}},tpl:new Ext.XTemplate('<div class="hours-header">','<span><h2>Start</h2></span><span><h2>Employee</h2></span><span><h2>{settings.workCodeLabel}</h2></span></div>')},{xtype:'list',scrollable:'y',itemCls:'ts-day-view-item',itemTpl:new Ext.XTemplate('<div class="hours-detail"><span>{workDate:date("n/j/Y")}</span><span>{[this.getEmployeeName(values)]}</span><span>{workCodeAbbrev}</span></div>','<div>{[this.getCrewRole(values)]}</div>','<div><b>Comments:</b> {comment}</div>','{[this.getHours(values)]}',{getEmployeeName:function(a){return Ext.getStore('Employees').getById(a.empId).get('empName')},getCrewRole:function(b){var a=TS.app.settings,c=a.crewLabel;return '<b>'+c+' Role:</b> '+Ext.getStore('Roles').getById(b.crewRoleId).get('crewRoleName')},getHours:function(b){var c=TS.app.settings,a='';a+='<span><h2>Regular</h2><span>'+b.regHrs+'</span></span>';if(c.tsAllowOvtHrs){a+='<span><h2>Overtime</h2><span>'+b.ovtHrs+'</span></span>'}if(c.tsAllowOvt2Hrs){a+='<span><h2>Ovt 2</h2><span>'+b.ovt2Hrs+'</span></span>'}if(c.tsAllowTravelHrs){a+='<span><h2>Travel</h2><span>'+b.travelHrs+'</span></span>'}return a}}),itemHeight:80,onItemDisclosure:!1,bind:{store:'{fwa.hours}'}}]},0,['ts-fwahours'],['widget','component','container','panel','sheet','ts-fwahours'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'sheet':!0,'ts-fwahours':!0},['widget.ts-fwahours'],0,[TS.common.fwaview,'FwaHours'],0);Ext.cmd.derive('TS.common.fwaview.FwaNotes',Ext.Sheet,{stretchX:!0,stretchY:!0,autoDestroy:!0,layout:'fit',items:[{xtype:'panel',scrollable:!1,layout:'fit',items:[{xtype:'titlebar',docked:'top',cls:'ts-navigation-header',title:{_tr:'fwaAbbrevLabel',tpl:'{0} Notes'},items:[{align:'right',text:'Close',handler:function(){this.up('sheet').hide()}}]},{xtype:'list',itemId:'notesList',reference:'notesList',scrollable:'y',disableSelection:!0,bind:{store:'{fwa.notes}'},itemTpl:new Ext.XTemplate('<tpl if="canEdit">','<div style="margin-left: 15%;">','\t<div class="message-name-mine">{[this.getEmployee(values)]}</div>','\t<div class="notes mine">','\t\t<div style="word-wrap: break-word">{contents}','       <p class="message-datetime"><div class="message-datetime">{[this.getModDate(values)]}</div></p>','   </div>','</div>','<tpl else>','<div style="margin-right: 15%;">','\t<div class="message-name-other">{[this.getEmployee(values)]}</div>','\t<div class="notes other">','\t\t<div style="word-wrap: break-word">{contents}','       <p class="message-datetime"><div class="message-datetime">{[this.getModDate(values)]}</div></p>','   </div>','</div>','</tpl>',{getEmployee:function(a){var b=Ext.getStore('Employees').getById(a.empId);return b.get('empName')},getModDate:function(a){return Ext.Date.format(a.modDate,'Y-m-d h:i A')}})}]}]},0,['ts-fwanotes'],['widget','component','container','panel','sheet','ts-fwanotes'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'sheet':!0,'ts-fwanotes':!0},['widget.ts-fwanotes'],0,[TS.common.fwaview,'FwaNotes'],0);Ext.cmd.derive('TS.common.fwaview.FwaUnits',Ext.Sheet,{stretchX:!0,stretchY:!0,autoDestroy:!0,layout:'fit',items:[{xtype:'titlebar',docked:'top',cls:'ts-navigation-header',title:{_tr:'unitLabelPlural'},items:[{align:'right',text:'Close',handler:function(){this.up('sheet').hide()}}]},{xtype:'component',height:25,docked:'top',userCls:'ts-user-details',bind:{data:{settings:'{settings}'}},tpl:new Ext.XTemplate('<div class="workcode-header">','<span><h2>{settings.unitLabel}</h2></span><span><h2>Name</h2></span><span><h2>Qty</h2></span></div>')},{xtype:'list',scrollable:'y',itemCls:'ts-user-details',itemTpl:new Ext.XTemplate('<div class="workcode-detail"><span>{[this.getUnit(values)]}</span><span>{[this.getName(values)]}</span><span>{quantity}</span></div>','<div><b>Equipment:</b> {[this.getEquipmentName(values)]}</div>','<div><b>Comments:</b> {[this.getComments(values)]}</div>',{getUnit:function(b){var a=Ext.getStore('UnitCode').getById(b.unitCodeId);return a?a.get('unitCodeAbbrev'):'N/A'},getName:function(b){var a=Ext.getStore('UnitCode').getById(b.unitCodeId);return a?a.get('unitCodeName'):'N/A'},getEquipmentName:function(a){return a.equipmentName?a.equipmentName:''},getComments:function(a){return a.comments?a.coments:''}}),itemHeight:80,onItemDisclosure:!1,bind:{store:'{fwa.units}'}}]},0,['ts-fwaunits'],['widget','component','container','panel','sheet','ts-fwaunits'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'sheet':!0,'ts-fwaunits':!0},['widget.ts-fwaunits'],0,[TS.common.fwaview,'FwaUnits'],0);Ext.cmd.derive('TS.common.fwaview.FwaView',Ext.Sheet,{controller:'fwa-edit',stretchX:!0,stretchY:!0,approvalType:null,autoDestroy:!0,layout:'vbox',scrollable:'y',items:[{xtype:'titlebar',cls:'ts-navigation-header',docked:'top',items:[{xtype:'button',align:'right',text:'Close',handler:function(){this.up('sheet').hide()}}]},{xtype:'fieldset',title:{_tr:'fwaLabel'},items:[{xtype:'textfield',hidden:!0,bind:'{fwa.fwaId}'},{xtype:'displayfield',reference:'fwaNumField',label:{_tr:'fwaAbbrevLabel',tpl:'{0} #'},bind:'{fwa.fwaNum}'},{xtype:'displayfield',label:{_tr:'fwaAbbrevLabel',tpl:'{0} Name'},reference:'fwaNameField',bind:'{fwa.fwaName}'},{xtype:'displayfield',label:'Status',bind:'{fwa.fwaStatusString}'},{xtype:'button',handler:'onManageNotesTapView',bind:{iconCls:'{notesCls}',hidden:'{!fwa.hasNotes}'},text:'Notes',cls:'ts-bt-margin-small',reference:'notesButton'}]},{xtype:'fieldset',title:'General Information',items:[{label:{_tr:'wbs1Label',tpl:'{0} #'},xtype:'displayfield',bind:'{fwa.wbs1}'},{label:{_tr:'wbs2Label',tpl:'{0} #'},xtype:'displayfield',bind:{value:'{fwa.wbs2}',hidden:'{hideFwaWbs2}'}},{label:{_tr:'wbs3Label',tpl:'{0} #'},xtype:'displayfield',bind:{value:'{fwa.wbs3}',hidden:'{hideFwaWbs3}'}},{xtype:'displayfield',userCls:'ts-long-label',label:{_tr:'wbs1Label',tpl:'{0} Name'},bind:'{fwa.wbs1Name}'},{xtype:'displayfield',userCls:'ts-long-label',label:{_tr:'wbs2Label',tpl:'{0} Name'},bind:{bind:'{fwa.wbs2Name}',hidden:'{hideFwaWbs2}'}},{xtype:'displayfield',label:{_tr:'wbs3Label',tpl:'{0} Name'},bind:{bind:'{fwa.wbs3Name}',hidden:'{hideFwaWbs3}'}},{xtype:'displayfield',userCls:'ts-long-label',label:{_tr:'clientLabel',tpl:'{0} Name'},bind:{value:'{fwa.clientName}',hidden:'{hideFwaDisplayClient}'}},{xtype:'displayfield',label:{_tr:'contactLabel'},bind:'{fwa.contactInfo}'},{xtype:'displayfield',label:{_tr:'crewLabel'},bind:'{fwa.scheduledCrewName}'},{xtype:'checkboxfield',label:'Contract?',readOnly:!0,bind:'{fwa.isContractWork}'}]},{xtype:'fieldset',title:'Work Address',items:[{xtype:'displayfield',label:'Address 1',bind:'{fwa.loc.address1}'},{xtype:'displayfield',label:'Address 2',bind:'{fwa.loc.address2}'},{xtype:'displayfield',label:'City',bind:'{fwa.loc.city}'},{xtype:'displayfield',label:'State',bind:'{fwa.loc.state}'},{xtype:'displayfield',label:'Zip',bind:'{fwa.loc.zip}'},{xtype:'displayfield',label:'Latitude',reference:'locLatitude',bind:'{fwa.loc.latitude}'},{xtype:'displayfield',label:'Longitude',reference:'locLongitude',bind:'{fwa.loc.longitude}'}]},{xtype:'fieldset',title:'Date and Time',items:[{xtype:'datepickerfield',label:'Start Time',bind:'{fwa.schedStartDate}',dateFormat:'n/j/Y',component:{useMask:!1},readOnly:!0},{xtype:'timepickerfield',label:'Start Time',bind:'{fwa.schedStartDate}',dateFormat:'g:i A',component:{useMask:!1},readOnly:!0},{xtype:'datepickerfield',label:'Start Time',bind:'{fwa.schedEndDate}',dateFormat:'n/j/Y',component:{useMask:!1},readOnly:!0},{xtype:'timepickerfield',label:'Start Time',bind:'{fwa.schedEndDate}',dateFormat:'g:i A',component:{useMask:!1},readOnly:!0}]},{xtype:'fieldset',userCls:'ts-required-field',items:[{xtype:'textfield',userCls:'ts-long-label',label:'Signature Date',bind:'{fwa.clientApprovalDate}',itemId:'clientApprovalDate',dateFormat:'n/j/Y',component:{useMask:!1},readOnly:!0},{xtype:'image',itemId:'clientApprovalImage',height:150},{xtype:'button',text:'View All',handler:'viewAllClientSignatures',itemId:'viewAllClientSignatureButton'}],reference:'clientApprovalButton',itemId:'clientApprovalButton'},{xtype:'fieldset',items:[{xtype:'textfield',userCls:'ts-long-label',label:'Signature Date',bind:'{fwa.chiefApprovalDate}',itemId:'chiefApprovalDate',dateFormat:'n/j/Y',component:{useMask:!1},readOnly:!0},{xtype:'image',itemId:'chiefApprovalImage',height:150},{xtype:'button',text:'View All',handler:'viewAllChiefSignatures',itemId:'viewAllChiefSignatureButton'}],reference:'chiefApprovalButton',itemId:'chiefApprovalButton'},{xtype:'fieldset',title:'Views',cls:'ts-fieldset-nbr',items:[{xtype:'button',handler:'onManageWorkCodesTapView',text:{_tr:'workCodeLabelPlural',tpl:'{0}'},reference:'manageWorkCodeButton'},{xtype:'button',handler:'onManageUnitsTapView',text:{_tr:'unitLabelPlural',tpl:'{0}'},reference:'manageUnitsButton',bind:{hidden:'{!fwaUnitsEnabled}'}},{xtype:'button',handler:'onManageHoursTapView',text:'Employee Hours',reference:'manageHoursButton'},{xtype:'button',handler:'onManageExpensesTapView',text:'Employee Expenses',reference:'manageExpensesButton'}]},{xtype:'titlebar',docked:'bottom',items:[{text:'Open',align:'right',ui:'action',iconCls:'x-fa fa-folder-open-o',handler:'doOpenFwa',itemId:'fwaOpenButton',reference:'fwaOpenButton',margin:'0 5 0 0',bind:{hidden:'{!canWindowFwaCopyOpen}'}},{text:'Copy',align:'right',ui:'action',iconCls:'x-fa fa-copy',handler:'doCopyFwa',itemId:'fwaCopyButton',reference:'fwaCopyButton',bind:{hidden:'{!canWindowFwaCopyOpen}'}}]}]},0,['fwa-view'],['widget','component','container','panel','sheet','fwa-view'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'sheet':!0,'fwa-view':!0},['widget.fwa-view'],0,[TS.common.fwaview,'FwaView'],0);Ext.cmd.derive('TS.common.fwaview.FwaWorkCodes',Ext.Sheet,{stretchX:!0,stretchY:!0,autoDestroy:!0,layout:'fit',items:[{xtype:'titlebar',docked:'top',cls:'ts-navigation-header',title:{_tr:'workCodeLabelPlural'},items:[{align:'right',text:'Close',handler:function(){this.up('sheet').hide()}}]},{xtype:'component',height:25,docked:'top',userCls:'ts-user-details',bind:{data:{settings:'{settings}'}},tpl:new Ext.XTemplate('<div class="workcode-header">','<span><h2>{settings.workCodeLabel}</h2></span><span><h2>Scheduled</h2></span><span><h2>Actual</h2></span></div>')},{xtype:'list',scrollable:'y',itemCls:'ts-user-details',itemTpl:new Ext.XTemplate('<div class="workcode-detail"><span>{workCodeAbbrev}</span><span>{scheduledHours}</span><span>{actualHours}</span></div>','<div><b>Desc:</b> {[this.getDescription(values)]}</div>','<div><b>Comments:</b> {comments}</div>',{getDescription:function(b){var a=Ext.getStore('WorkCodes').getById(b.workCodeId);return a?a.get('workCodeDescr'):''}}),itemHeight:80,onItemDisclosure:!1,bind:{store:'{fwa.workSchedAndPerf}'}}]},0,['ts-fwaworkcodes'],['widget','component','container','panel','sheet','ts-fwaworkcodes'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'sheet':!0,'ts-fwaworkcodes':!0},['widget.ts-fwaworkcodes'],0,[TS.common.fwaview,'FwaWorkCodes'],0);Ext.cmd.derive('TS.common.grid.LaborCode',Ext.grid.Grid,{flex:1,height:'100%',border:1,margin:'0 10 0 0',selModel:'rowmodel',columns:[{text:'Level',dataIndex:'lcLevel',hidden:!0},{text:'Code',dataIndex:'lcCode',width:55,align:'center'},{text:'Label',dataIndex:'lcLabel',flex:1}],listeners:{select:'selectLaborCode'}},0,['grid-tslaborcode'],['widget','component','container','dataview','list','grid','grid-tslaborcode'],{'widget':!0,'component':!0,'container':!0,'dataview':!0,'list':!0,'grid':!0,'grid-tslaborcode':!0},['widget.grid-tslaborcode'],0,[TS.common.grid,'LaborCode'],0);Ext.cmd.derive('TS.common.ts.EditHours',Ext.form.Panel,{layout:'vbox',items:[{xtype:'titlebar',cls:'ts-navigation-header',title:'Edit Hours',docked:'top'},{xtype:'component',docked:'top',bind:{data:{empName:'{currentTSRow.empName}',workDate:'{selectedDay.workDate}',groupHeader:'{groupHeader}'}},userCls:'ts-shadow-line',tpl:new Ext.XTemplate('{empName}','<div>{workDate:date("l n/j/Y")}</div>','<div>{groupHeader}</div>'),style:'background:#fff;text-align:center;font-weight:bold;padding:0.4em;font-size: 0.9em;'},{xtype:'fieldset',reference:'employeeHours',title:'Hours',layout:'hbox',margin:'0 10 0 10',userCls:'ts-wide-fieldset',defaults:{flex:1,labelAlign:'top'},items:[{xtype:'numberfield',label:'Regular',itemId:'regHrsField',stepValue:1,bind:{value:'{selectedDay.regHrs}'},listeners:{change:'onTsHoursChange',clearicontap:'onClearIconTap'}},{xtype:'numberfield',label:'Ovt',stepValue:1,itemId:'ovtHrsField',bind:{value:'{selectedDay.ovtHrs}',hidden:'{!settings.tsAllowOvtHrs}'},listeners:{change:'onTsHoursChange',clearicontap:'onClearIconTap'}},{xtype:'numberfield',label:'Ovt 2',stepValue:1,itemId:'ovt2HrsField',bind:{value:'{selectedDay.ovt2Hrs}',hidden:'{!settings.tsAllowOvt2Hrs}'},listeners:{change:'onTsHoursChange',clearicontap:'onClearIconTap'}},{xtype:'numberfield',label:'Travel',stepValue:1,itemId:'travelHrsField',bind:{value:'{selectedDay.travelHrs}',hidden:'{!settings.tsAllowTravelHrs}'},listeners:{change:'onTsHoursChange',clearicontap:'onClearIconTap'}}]},{xtype:'fieldset',title:'Comments',layout:'hbox',userCls:'ts-wide-fieldset',margin:'0 10 0 10',items:[{xtype:'textareafield',itemId:'commentField',maxLength:255,bind:'{selectedDay.comment}',flex:1,labelAlign:'top',height:64}]},{xtype:'fieldset',itemId:'fwaField',items:[{xtype:'displayfield',label:{_tr:'fwaAbbrevLabel'},bind:'{selectedDay.fwaNum}'}]},{xtype:'titlebar',docked:'bottom',items:[{text:{_tr:'fwaAbbrevLabel'},itemId:'fwaButton',align:'left',style:'margin-right: 5px;',handler:'showFwa'},{align:'left',text:'Update',ui:'action',iconCls:'x-fa fa-save',handler:'onEditHoursSave'},{text:'Cancel',align:'right',iconCls:'x-fa  fa-times-circle-o',handler:'onBeforeEditHoursBack'}]}]},0,['ts-edit-hours'],['widget','component','container','panel','formpanel','ts-edit-hours'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'formpanel':!0,'ts-edit-hours':!0},['widget.ts-edit-hours'],0,[TS.common.ts,'EditHours'],0);Ext.cmd.derive('TS.common.ts.Hours',Ext.container.Container,{layout:'fit',items:[{xtype:'titlebar',cls:'ts-navigation-header',title:'Hours',docked:'top',items:[{xtype:'button',text:'Back',iconCls:'x-fa fa-chevron-left',align:'left',handler:'onBeforeHoursBack'}]},{xtype:'component',docked:'top',bind:{data:{empName:'{currentTSRow.empName}',startDate:'{selectedTS.startDate}',endDate:'{selectedTS.endDate}',groupHeader:'{groupHeader}'}},tpl:new Ext.XTemplate('{startDate:date("n/j/Y")} - {endDate:date("n/j/Y")}','<div>{groupHeader}</div>'),style:'background:#fff;text-align:center;font-weight:bold;padding:0.4em;font-size: 0.9em;'},{xtype:'field-tsemployee',itemId:'hoursEmployee',height:48,docked:'top',userCls:'ts-shadow-line',label:'Employee',name:'empId',style:'border-top:1px solid #ccc',bind:{value:'{currentTSRow.empId}',disabled:'{lockEmployee}',readOnly:!0},listeners:{change:'setCrewRole'}},{xtype:'field-crewrole',height:48,docked:'top',itemId:'hoursCrewRole',userCls:'ts-shadow-line',label:{_tr:'crewLabel',tpl:'{0} Role'},name:'crewRoleId',style:'border-top:1px solid #ccc',bind:{value:'{currentTSRow.crewRoleId}',readOnly:!0}},{xtype:'list',grouped:!0,itemId:'ts-rowlist',itemCls:'ts-day-view-item',listeners:{itemtap:'onHoursEditTap'},bind:{store:'{hoursview}',selection:'{selectedDay}'},itemTpl:new Ext.XTemplate('{[this.getHours(values)]}',{getHours:function(b){var c=TS.app.settings,a='';a+='<span><h2>Regular</h2><span>'+b.regHrs+'</span></span>';if(c.tsAllowOvtHrs){a+='<span><h2>Overtime</h2><span>'+b.ovtHrs+'</span></span>'}if(c.tsAllowOvt2Hrs){a+='<span><h2>Ovt 2</h2><span>'+b.ovt2Hrs+'</span></span>'}if(c.tsAllowTravelHrs){a+='<span><h2>Travel</h2><span>'+b.travelHrs+'</span></span>'}return a}}),preventSelectionOnDisclose:!1,onItemDisclosure:!0},{xtype:'component',docked:'bottom',height:24,style:'text-align:center;border-top:1px solid #ccc',bind:{data:{periodTtlHrs:'{periodTtlHrs}',periodTtlRegHrs:'{periodTtlRegHrs}',periodTtlOvtHrs:'{periodTtlOvtHrs}',periodTtlOvt2Hrs:'{periodTtlOvt2Hrs}',periodTtlTravelHrs:'{periodTtlTravelHrs}'}},tpl:new Ext.XTemplate('{[this.getTtlHours(values)]}',{getTtlHours:function(b){var c=TS.app.settings,a='<div class="align-right" style="font-size: smaller;">';a+='<span>Total Hours: </span><span>'+b.periodTtlHrs+'</span>';a+='&nbsp;';a+='(&nbsp;';a+='<span>Reg: <span>'+b.periodTtlRegHrs+'</span>';if(c.tsAllowOvtHrs){a+='&nbsp;';a+='<span>Ovt: <span>'+b.periodTtlOvtHrs+'</span>'}if(c.tsAllowOvt2Hrs){a+='&nbsp;';a+='<span>Ovt2: <span>'+b.periodTtlOvt2Hrs+'</span>'}if(c.tsAllowTravelHrs){a+='&nbsp;';a+='<span>Travel: <span>'+b.periodTtlTravelHrs+'</span>'}return a+='&nbsp;)</div>'}})},{xtype:'toolbar',docked:'bottom',items:[{xtype:'button',itemId:'deleteRowButton',text:'Delete This Project',flex:1,ui:'decline',handler:'onRowDelete',bind:{}},{xtype:'button',itemId:'copyRowButton',text:'Copy This Project',flex:1,ui:'action',handler:'onRowCopy',bind:{}}]}]},0,['ts-hours'],['widget','component','container','ts-hours'],{'widget':!0,'component':!0,'container':!0,'ts-hours':!0},['widget.ts-hours'],0,[TS.common.ts,'Hours'],0);Ext.cmd.derive('TS.common.window.Email',Ext.Sheet,{controller:'fwa-edit',stretchX:!0,stretchY:!0,autoDestroy:!0,layout:'fit',items:[{xtype:'titlebar',docked:'top',cls:'ts-navigation-header',items:[{align:'right',text:'Close',handler:'closeSheet'}]},{xtype:'formpanel',scrollable:'y',reference:'emailForm',items:[{xtype:'fieldset',items:[{xtype:'emailfield',name:'to',label:'To',allowBlank:!1,required:!0},{xtype:'emailfield',name:'cc',label:'CC',reference:'ccEmailField'},{xtype:'emailfield',name:'bcc',label:'BCC'},{xtype:'textfield',name:'subject',label:'Subject',allowBlank:!1,required:!0},{xtype:'textareafield',name:'body',label:'Body',allowBlank:!1,required:!0},{xtype:'checkboxfield',name:'attachForm',checked:!0,reference:'attachFormField',value:'true',labelCls:'red-checkbox-label',labelWrap:!0,labelWidth:'70%',labelAlign:'right',style:{'background-color':'#f6f6f6'}},{xtype:'button',text:'Select Attachment(s)',disabled:!0},{xtype:'list',mode:'multi',itemId:'attachList',name:'attachments',store:{model:'TS.model.shared.Attachment',autoLoad:!1,proxy:{type:'default',directFn:'AttachmentData.GetAttachmentList',paramOrder:'dbi|username|modelType|modelId|includeItem|attachmentType'}},itemTpl:new Ext.XTemplate('<p>{[this.getDocType(values)]} - {[this.getDescription(values)]}</p>',{getDocType:function(a){if(a.attachmentType=='P'){return 'Photo'}else {return 'Doc'}},getDescription:function(a){return a.filename==''?a.description:a.filename}})}]}]},{xtype:'titlebar',docked:'bottom',items:[{text:'Send',align:'right',iconCls:'x-fa fa-envelope-o',handler:'sendEmail'}]}]},0,['window-email'],['widget','component','container','panel','sheet','window-email'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'sheet':!0,'window-email':!0},['widget.window-email'],0,[TS.common.window,'Email'],0);Ext.cmd.derive('TS.common.window.LaborCodeLookup',Ext.Sheet,{stretchX:!0,stretchY:!0,autoDestroy:!0,layout:'vbox',items:[{xtype:'titlebar',docked:'top',cls:'ts-navigation-header',title:{_tr:'laborCodeLabel',tpl:'{0} Lookup'},items:[{align:'right',text:'Close',action:'close'}]},{xtype:'container',border:!0,style:'border: 1 px solid #000',layout:'hbox',width:'100%',margin:10,defaults:{xtype:'textfield',flex:1,readOnly:!0},items:[{label:{_tr:'laborCodeLabel'},bind:{value:'{laborCodeString}'},margin:'0 10 0 0'},{bind:{value:'{laborLabelString}'}}]},{xtype:'container',border:!0,style:'border: 1px solid #000',reference:'ts-laborCodeGridsContainer',itemId:'ts-laborCodeGridsContainer',flex:1,margin:'0 0 10 10',layout:'hbox',width:'100%'},{xtype:'titlebar',docked:'bottom',items:[{text:'Select',iconCls:'x-fa fa-check-square-o',align:'right',action:'select-laborcode'}]}]},0,['ts-laborcodelookup'],['widget','component','container','panel','sheet','ts-laborcodelookup'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'sheet':!0,'ts-laborcodelookup':!0},['widget.ts-laborcodelookup'],0,[TS.common.window,'LaborCodeLookup'],0);Ext.cmd.derive('TS.common.window.LicenseAgreement',Ext.Container,{controller:'window-licenseagreement',fullscreen:!0,layout:'fit',items:[{xtype:'component',cls:'license-header',docked:'top',html:'<div><img src="resources/elevia_sm.png"/></div><h1>License Agreement</h1><h2>Please read the following license agreement carefully.</h2>'},{xtype:'container',cls:'license-body',scrollable:!0,reference:'licenseAgreementHtml'},{xtype:'toolbar',docked:'bottom',layout:{type:'hbox',pack:'middle'},items:[{text:'OK',width:100,ui:'confirm',action:'save',handler:'doSaveLicense',disabled:!0},{text:'Cancel',width:100,ui:'decline',handler:'doCancelLicense'}]},{xtype:'radiofield',docked:'bottom',cls:'license-field',labelAlign:'right',label:'I accept the terms in the license agreement',name:'rb-col',listeners:{check:'onRadioCheck'}},{xtype:'radiofield',docked:'bottom',cls:'license-field',labelAlign:'right',label:'I do not accept the terms in the license agreement',name:'rb-col',checked:!0,dontAgree:!0,listeners:{check:'onRadioCheck'}}]},0,['window-licenseagreement'],['widget','component','container','window-licenseagreement'],{'widget':!0,'component':!0,'container':!0,'window-licenseagreement':!0},['widget.window-licenseagreement'],0,[TS.common.window,'LicenseAgreement'],0);Ext.cmd.derive('TS.common.window.MyMessageBox',Ext.Sheet,{controller:'fwa-edit',width:'75%',height:'75%',autoDestroy:!0,layout:'fit',items:[{xtype:'panel',scrollable:!0,layout:'fit',items:[{xtype:'titlebar',docked:'top',cls:'ts-navigation-header',title:{_tr:'fwaAbbrevLabel',tpl:'{0} Details'},items:[{align:'right',text:'Close',handler:'closeSheet'}]},{xtype:'displayfield',reference:'myInfo'}]}]},0,['my-messagebox'],['widget','component','container','panel','sheet','my-messagebox'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'sheet':!0,'my-messagebox':!0},['widget.my-messagebox'],0,[TS.common.window,'MyMessageBox'],0);Ext.cmd.derive('TS.common.window.Print',Ext.Sheet,{controller:'print',layout:'fit',items:[{xtype:'formpanel',layout:'fit',bodyPadding:10,items:[{xtype:'titlebar',reference:'signatureTitleBar',docked:'top',cls:'ts-navigation-header',items:[{align:'right',text:'Close',handler:'closeSheet'}]},{xtype:'field-template',label:'Template',anchor:'100%',placeHolder:'Select Template',reference:'templateSelect'},{xtype:'titlebar',docked:'bottom',items:[{text:'Print',align:'right',iconCls:'x-fa  fa-print',ui:'action',handler:'print'}]}]}]},0,['window-print'],['widget','component','container','panel','sheet','window-print'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'sheet':!0,'window-print':!0},['widget.window-print'],0,[TS.common.window,'Print'],0);Ext.cmd.derive('TS.common.window.PrintController',Ext.app.ViewController,{init:function(){var c=this,e=c.getViewModel(),d=c.getView(),b=this.lookup('templateSelect'),a=b.getStore();a.getProxy().setExtraParams({modelType:d.appType,modelId:d.modelId});a.load();a.filterBy(function(a){return a.get('templateApp')===this.getView().appType},this);a.on('load',function(){b.setValue(this.getData().items[0].get('templateId'))})},print:function(n){var b=this,a=b.getView(),f=TS.app.settings,e=b.lookup('templateSelect').getValue(),c=b.lookup('templateSelect').getSelection().getData().templateType,l=a.modelId,k=a.empId||f.empId,g=a.appType,j=(new Date()).getTimezoneOffset()/60,m=a.isList,d=0,h='',i;if(!e){Ext.GlobalEvents.fireEvent('Message:Code','noPrintTemplate');return}if(m){d=0;i=a.idArray.length;Ext.each(a.idArray,function(l){Document.GetDocument(null,f.username,k,e,g,l,c,'N',j,function(e,f,g){if(c=='X'){b.sendToPrinter(e.data,c,a.fwaNumArray[d]);d++}else {h+=e.data+'</br><div style="page-break-before: always;"></div>';d++;if(d==i){b.sendToPrinter(h,c,'')}}},b,{autoHandle:!0})})}else {Document.GetDocument(null,f.username,k,e,g,l,c,'N',j,function(d,e,f){b.sendToPrinter(d.data,c,a.title)},b,{autoHandle:!0})}n.up('sheet').hide()},s2ab:function(b){var c=new ArrayBuffer(b.length);var d=new Uint8Array(c);for(var a=0;a!=b.length;++a){d[a]=b.charCodeAt(a)&255}return c},sendToPrinter:function(d,f,e){var g,a,b,k;if(Ext.isIE||Ext.isEdge){if(f=='X'){if(window.navigator.msSaveBlob){var i=new Blob([this.s2ab(atob(d))],{type:"'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;base64,'"});k=navigator.msSaveBlob(i,e+'.xlsx')}}else {b=window.open('','printWindow');b.document.write(d);b.document.close();b.focus();b.print();b.close()}}else {if(f=='X'){var h='data:application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;base64,',j='.xlsx',c=document.createElement('a');c.href=h+d;c.download=e+j;document.body.appendChild(c);c.click();document.body.removeChild(c)}else {g=Ext.getBody().appendChild({id:'printerContent',tag:'iframe'});a=g.dom.contentWindow;a.document.open();a.document.title=e;a.document.write(d);a.print();a.close();Ext.fly('printerContent').destroy()}}},closeSheet:function(a){a.up('sheet').hide()}},0,0,0,0,['controller.print'],0,[TS.common.window,'PrintController'],0);Ext.cmd.derive('TS.common.window.ProjectLookupWindow',Ext.Sheet,{controller:'fwa-edit',stretchX:!0,stretchY:!0,autoDestroy:!0,layout:'fit',items:[{xtype:'titlebar',docked:'top',cls:'ts-navigation-header',title:{_tr:'wbs1Label',tpl:'{0} Lookup'},items:[{align:'right',text:'Close',handler:'closeSheet'}]},{xtype:'tree-list',reference:'project-treelist'},{xtype:'titlebar',docked:'bottom',items:[{text:'Cancel',align:'right',iconCls:'x-fa  fa-times-circle-o',ui:'action',handler:'closeSheet'},{text:'Select',iconCls:'x-fa fa-check-square-o',align:'left',handler:'onSelectProject'}]}]},0,['projectlookuptree'],['widget','component','container','panel','sheet','projectlookuptree'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'sheet':!0,'projectlookuptree':!0},['widget.projectlookuptree'],0,[TS.common.window,'ProjectLookupWindow'],0);Ext.cmd.derive('TS.common.window.Signature',Ext.Sheet,{controller:'fwa-edit',stretchX:!0,stretchY:!0,approvalType:null,autoDestroy:!0,layout:'fit',scrollable:'y',items:[{xtype:'titlebar',reference:'signatureTitleBar',docked:'top',cls:'ts-navigation-header',items:[{align:'right',text:'Close',handler:'closeSheet'}]},{xtype:'panel',layout:{type:'vbox',pack:'center'},items:[{xtype:'displayfield',padding:'0 0 0 10',bind:{html:'{selectedFWA.signatureHtml}',hidden:'{!selectedFWA.signatureHtml}'}},{xtype:'fieldset',itemId:'signatureWindow',width:'90%',height:'30%',items:[{xtype:'ts-draw',reference:'signature',itemId:'signatureDraw',height:'100%',width:'100%'}],listeners:{painted:function(c){var a=Ext.Viewport.getOrientation(),b=a=='portrait'?'30%':'60%';Ext.first('#signatureWindow').setHeight(b);Ext.Viewport.on('orientationchange',function(d,b,f,e){var a=Ext.first('#signatureWindow');if(a){if(b=='portrait'){a.setHeight('30%')}else {a.setHeight('60%')}}})}}},{xtype:'fieldset',title:'Stats',defaults:{xtype:'displayfield',labelWidth:'35%'},items:[{reference:'fwaInfoField'},{reference:'workCodeField',bind:{hidden:'{settings.fwaHideWorkCodes}'}},{reference:'empHoursField'}]}]},{xtype:'titlebar',docked:'bottom',items:[{text:'Save',iconCls:'x-fa fa-save',action:'save',reference:'saveSignatureButton',disabled:!0,bind:{disabled:'{signature.isClean}'},handler:'doSaveSignature'},{text:'Clear',align:'right',iconCls:'x-fa  fa-pencil-square-o',ui:'action',handler:function(a){a.up('sheet').down('ts-draw').clear()}}]}]},0,['window-signature'],['widget','component','container','panel','sheet','window-signature'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'sheet':!0,'window-signature':!0},['widget.window-signature'],0,[TS.common.window,'Signature'],0);Ext.cmd.derive('TS.common.window.TreeList',Ext.Container,{layout:'fit',viewModel:{type:'tree-list'},scrollable:'y',items:[{xtype:'textfield',docked:'top',userCls:'ts-long-label ts-border-bottom',action:'search',label:{_tr:'wbs1Label',tpl:'{0} Number or Name'},triggers:{clear:{cls:'x-form-clear-trigger',handler:function(a){a.reset()}}},listeners:{change:'onProjectSearchChange',buffer:750}},{xtype:'treelist',reference:'treelist',bind:'{navItems}',userCls:'ts-list-tree-noicons'},{xtype:'component',docked:'bottom',reference:'selectedText',userCls:'ts-long-label ts-project-ct-details',bind:{html:'{selectionText}'}}]},0,['tree-list'],['widget','component','container','tree-list'],{'widget':!0,'component':!0,'container':!0,'tree-list':!0},['widget.tree-list'],0,[TS.common.window,'TreeList'],0);Ext.cmd.derive('TS.common.window.TreeListModel',Ext.app.ViewModel,{formulas:{selectionText:function(d){var b=d('treelist.selection'),c=TS.app.settings,a;if(b){a=b.getPath('qtip');a=a.replace(/^\/Root/,'');return 'Selected: '+a}else {return 'No '+c.wbs1Label+' selected'}}},stores:{navItems:{type:'tree',autoLoad:!0,filterer:'bottomup',rootNode:{expanded:!1},model:'TS.model.shared.WbsProjectTree',proxy:{type:'default',directFn:'Wbs1.GetWbsProjectTree',paramOrder:'dbi|username|empId|node|app',extraParams:{app:'FWA'}},remoteSort:!1}}},0,0,0,0,['viewmodel.tree-list'],0,[TS.common.window,'TreeListModel'],0);Ext.cmd.derive('TS.controller.crew.MainController',TS.view.main.MainController,{init:function(){},onCloseSheet:function(a){a.up('sheet').hide()},onBackToFSS:function(){Ext.GlobalEvents.fireEvent('ChangeViewport','FSS',this);Ext.Viewport.setActiveItem('app-fss')}},0,0,0,0,['controller.crew-main'],0,[TS.controller.crew,'MainController'],0);Ext.cmd.derive('TS.controller.exp.ExpEditorController',Ext.app.ViewController,{init:function(){},onSelectProject:function(g){var d=this,h=d.getView(),b=d.getViewModel().get('selectedEXP'),e=h.lookup('project-treelist'),c=e.getViewModel().getData().treelist.selection,f=TS.app.settings,a;if(!c){Ext.Msg.alert('FYI','Please select '+f.wbs1Label+' from list');return}a=c.getId().split('^');b.set('wbs1',a[0]);b.set('wbs2',a[1]||'');b.set('wbs3',a[2]||'');g.up('sheet').hide()},closeSheet:function(a){a.up('sheet').hide()},doCopyExp:function(f){var d=this,h=d.getView(),b=d.getViewModel(),c=b.get('selectedEXP'),a=c.clone(),e=b.get('explist'),g=c.get('expReportId');a.set('id',Ext.data.identifier.Uuid.Global.generate());a.set('amount','');a.set('expDate',new Date());a.set('miles','');a.set('reason','');a.set('other','');e.add(a);b.set('selectedEXP',a);f.up('exp-editmenu').hide()},onAttachExpDoc:function(g){var e=this,c=e.getViewModel().get('selectedEXP'),b=c.get('expReportId'),d=c.get('expId'),f=TS.app.settings,a;if(!b){Ext.Msg.alert('Warning','Please save new expense first.');return}a=Ext.create({xtype:'exp-window-document',viewModel:{parent:e.getViewModel()},attType:'Document',location:f.documentStorageLoc,associatedRecordId:b+'||'+d,attachmentsList:{modelType:'EXP',modelId:b+'||'+d,includeItem:!0,attachmentType:AttachmentType.Document}});a.lookup('attachmentList').add({xtype:'attachments',attachmentParams:a.attachmentsList});Ext.Viewport.add(a);a.show();g.up('exp-editmenu').hide()},removeExpForm:function(e){var g=this,d=g.getViewModel(),c=d.get('selectedEXP'),b=d.get('explist'),h=c.get('expReportId'),f=c.get('id'),i=TS.app.settings,a;Ext.each(b.getRange(),function(b,c){if(b.get('id')==f){a=c}});Ext.Msg.confirm('Please Confirm','Are you sure you want to delete this expense?',function(c){if(c=='yes'){b.removeAt(a);Ext.first('app-exp').setActiveItem(1)}e.up('exp-editmenu').hide()})},doCreateExp:function(){},onSaveExp:function(){},reverseStringReturnExtention:function(e){var b=e.split(''),a=b.reverse(),c=a.join(''),d=c.split('.')[0];b=d.split('');a=b.reverse();return a.join('')},onFileUploadChange:function(f,g,o){var a=this,c=a.reverseStringReturnExtention(g),j=a.lookup('descriptionField'),k=a.lookup('filenameField'),i=Ext.Date.format(new Date(),'Y-m-d'),m=f.el.down('input[type=file]').dom.files[0],e,b,d,h,n,p,l;if(f.initialConfig.iconCls=='x-fa fa-file-text'&&(c=='jpg'||c=='jpeg'||c=='png'||c=='zip')){Ext.Msg.alert('Warning','Not an acceptable document type.');return}b=g.replace(/C:\\fakepath\\/g,'');e=b.split('\\');b=e[e.length-1];d=b.replace('.'+c,'');h=a.getView().lookup('filePathField');l=a.getView().lookup('fileUploadField');h.setValue(b);k.setValue(i+' '+d);j.setValue(i+' '+d);if(f.initialConfig.iconCls=='x-fa fa-camera'){a.setImagePreview(m)}Ext.first('#loadDoc').enable()},setImagePreview:function(c){var e=this,f=e.lookup('fileUploadField'),d=TS.app.settings,a,b;a=e.lookup('imagePreview');if(c&&c.type.match('image.*')){b=new FileReader();b.onload=function(b){a.setSrc(b.target.result);d.myImage='<img src="'+a.getSrc()+'" />'};b.readAsDataURL(c);b.onloadend=function(b){var a=new Image();a.src=b.target.result;d.myImage=a};a.setHidden(!1)}},loadExpDoc:function(p){var b=this,n=TS.app.settings,d=b.getView(),q=b.getViewModel(),c=d.lookup('filePathField').getValue().split('.'),a=d.lookup('filePathField').getValue(),k=c[c.length-1],h=b.lookup('descriptionField').getValue(),m=b.lookup('filenameField'),j=q.get('selectedEXP'),g=j.get('attachmentsToAdd')||[],l=Ext.ComponentQuery.query('filefield')[0],o=l.el.down('input[type=file]').dom.files[0],e,r,i,s;if(c.indexOf('.')>-1){for(var f=0;f<c.length-1;f++){a+=c[f]+'.'}a=a.substring(0,a.length-1)}a=a.substring(0,a.length-1);b.getView().setLoading(!0,'Saving Document...');if(!h||!m){Ext.Msg.alert('FYI','Both Filename and Description are required fields');b.getView().setLoading(!1);return}e=Ext.create('TS.model.shared.Attachment',{attachmentType:AttachmentType.Document,attachedByEmpId:n.empId,dateAttached:new Date(),description:h,extension:k,filename:a,owningModelId:d.associatedRecordId,owningModelType:'EXP'});b.convertFileToByteData(o,Ext.bind(function(a){i=Ext.create('TS.model.shared.AttachmentData',{attachmentItem:a});e.set('attachmentItem',i.get('attachmentItem'));g.push(e.getData());j.set('attachmentsToAdd',g);d.setLoading(!1)},b));p.up('sheet').hide()},convertFileToByteData:function(b,c){var a=new FileReader();a.onload=function(a){return function(g){var f=new Uint8Array(g.target.result),e=[];for(var d=0;d<f.length;d++){e[d]=f[d]}c(e)}}(b);a.readAsArrayBuffer(b)}},0,0,0,0,['controller.exp-editor'],0,[TS.controller.exp,'ExpEditorController'],0);Ext.cmd.derive('TS.view.fwa.ManageExpenses',Ext.Sheet,{controller:'fwa-edit',itemId:'manageExpenses',stretchX:!0,stretchY:!0,autoDestroy:!0,layout:'fit',items:[{xtype:'titlebar',docked:'top',cls:'ts-navigation-header',title:'Expenses',items:[{iconCls:'x-fa fa-plus',handler:'addExpense',itemId:'addButton'},{align:'right',text:'Close',handler:'closeSheet'}]},{xtype:'grid',reference:'expensesGrid',itemId:'expensesGrid',grouped:!0,bind:{store:'{selectedFWA.expenses}',selection:'{selectedEXP}'},emptyText:'Tap plus icon to add expenses',deferEmptyText:!1,plugins:[{type:'grideditable',triggerEvent:'singletap',itemId:'gridPlugin',formConfig:{items:[{xtype:'textfield',name:'modified',reference:'modifiedField',hidden:!0},{xtype:'datepickerfield',name:'reportDate',hidden:!0},{xtype:'field-allemployees',label:'Employee',labelWidth:'35%',name:'empId',renderer:function(c){var b=TS.app.settings,a=Ext.getStore('AllEmployees').getById(c||b.empId);return a?a.get('lname')+', '+a.get('fname'):'N/A'}},{xtype:'datepickerfield',name:'expDate',itemId:'expDate',labelWidth:'35%',label:'Date',disabledCls:''},{xtype:'field-expcategory',label:'Category',labelWidth:'35%',name:'category',itemId:'categoryEditField',reference:'categoryEditField',listeners:{change:function(b,q,v,w){if(!q){return}var x=this,r=Ext.getStore('ExpCategory').getById(q.get('category')),d=b.parent.innerItems.find(function(a){return a.referenceKey=='reasonField'}),g=b.parent.innerItems.find(function(a){return a.referenceKey=='otherField'}),p=b.parent.innerItems.find(function(a){return a.referenceKey=='milesField'}),k=b.parent.innerItems.find(function(a){return a.referenceKey=='amountPerMileField'}),f=b.parent.innerItems.find(function(a){return a.referenceKey=='billableField'}),o,u=TS.app.settings,m=b.parent.innerItems.find(function(a){return a.referenceKey=='categoryEditField'}),s=m.getStore(),c=s.findRecord('category',m.getValue()),j=b.parent.innerItems.find(function(a){return a.referenceKey=='wbs1Container'}).getItems().items[1],t=j.getStore(),a=b.parent.innerItems.find(function(a){return a.referenceKey=='accountField'}),i=b.parent.innerItems.find(function(a){return a.referenceKey=='accountNameField'}),h=a.getStore(),l=c.get('billByDefault'),n,e;if(j.getValue()&&c){n=t.findRecord('id',j.getValue()).get('chargeType');h.clearFilter();if(n=='R'){if(f.getValue()){a.setValue(c.get('defaultRegularBillableAccount'));e=h.findRecord('account',a.getValue()||a.cachedValue);i.setValue(e.get('accountName'))}else {a.setValue(c.get('defaultRegularNonbillableAccount'));e=h.findRecord('account',a.getValue()||a.cachedValue);i.setValue(e.get('accountName'))}f.setHidden(!u.exDisplayBillable)}else {a.setValue(c.get('defaultNonRegularAccount'));f.setValue(!1);f.setHidden(!0);e=h.findRecord('account',a.getValue()||a.cachedValue);i.setValue(e.get('accountName'))}}else {if(c){f.setValue(l);if(l){a.setValue(c.get('defaultRegularBillableAccount'))}else {a.setValue(c.get('defaultRegularNonbillableAccount'))}}}d.setHidden(!0);g.setHidden(!0);p.setHidden(!0);k.setHidden(!0);if(r){o=r.get('detailType');switch(o){case 'M':d.setHidden(!1);d.setLabel('Business reason</br>for expense');g.setHidden(!1);g.setLabel('Travel From/To');p.setHidden(!1);k.setHidden(!1);break;case 'B':d.setHidden(!1);d.setLabel('Business reason</br>for expense');g.setHidden(!1);g.setLabel('Name of</br>each person');break;case 'G':d.setHidden(!1);d.setLabel('Business reason</br>for expense');break;}}}},disabledCls:''},{xtype:'textfield',label:'Description',labelWidth:'35%',name:'description'},{xtype:'numberfield',labelWidth:'35%',name:'amount',reference:'amountField',stepValue:0,label:'Amount',disabledCls:'',listeners:{change:function(c,d,e,f){var a=TS.app.settings,b=c.getParent().getItems().getRange()[0];if(a.hasLoaded){b.setValue('M')}a.hasLoaded=!0}}},{xtype:'field-expfwalist',labelWidth:'35%',label:{_tr:'fwaAbbrevLabel',tpl:'{0} #'},name:'fwaNum',reference:'fwaNumberField',readOnly:!0,hidden:!0},{xtype:'textfield',labelWidth:'35%',label:{_tr:'fwaAbbrevLabel',tpl:'{0} Name'},reference:'fwaNameField',name:'fwaName',readOnly:!0,hidden:!0},{xtype:'container',name:'wbs1Container',reference:'wbs1Container',items:[{xtype:'button',top:'.0em',right:'.0em',iconCls:'x-fa fa-search',handler:'onProjectLookup',name:'projectButton',disabledCls:''},{label:{_tr:'wbs1Label',tpl:'{0} #'},labelWidth:'35%',xtype:'field-wbs',modelName:'Wbs1',itemId:'exp_fwawbs1id',name:'wbs1',reference:'wbs1combo',deferredLoad:!0,clears:['exp_fwawbs2id','exp_fwawbs3id','wbs2Label','wbs3Label'],sets:'exp_fwawbs2id',dependencyFilter:{wbs1:'exp_fwawbs1id'},app:'EXP',listeners:{change:function(b,a,e,f){if(a){var d=b.getStore().findRecord('id',a.get('id')),c=d.get('name');b.parent.parent.innerItems.find(function(c){return c.referenceKey=='wbs1name'}).setValue(c)}}},disabledCls:''}]},{xtype:'displayfield',labelWidth:'35%',userCls:'ts-long-label',label:{_tr:'wbs1Label',tpl:'{0} Name'},name:'wbs1name',reference:'wbs1name',itemId:'wbs1NameField',disabledCls:''},{label:{_tr:'wbs2Label',tpl:'{0} #'},labelWidth:'35%',xtype:'field-wbs',itemId:'exp_fwawbs2id',reference:'wbs2combo',clears:['exp_fwawbs3id','wbs3Label'],modelName:'Wbs2',name:'wbs2',app:'FWA',sets:'exp_fwawbs3id',dependencyFilter:{wbs1:'exp_fwawbs1id',wbs2:'exp_fwawbs2id'},listeners:{change:function(b,a,c,d){if(a){b.getParent().innerItems.find(function(e){return e.referenceKey=='wbs2name'}).setValue(b.getStore().findRecord('id',a.get('id')).get('name'))}}},disabledCls:''},{xtype:'displayfield',labelWidth:'35%',itemId:'wbs2Label',userCls:'ts-long-label',label:{_tr:'wbs2Label',tpl:'{0} Name'},name:'wbs2name',reference:'wbs2name',disabledCls:''},{label:{_tr:'wbs3Label',tpl:'{0} #'},labelWidth:'35%',xtype:'field-wbs',name:'wbs3',itemId:'exp_fwawbs3id',reference:'wbs3combo',modelName:'Wbs3',app:'FWA',listeners:{change:function(b,a,c,d){if(a){b.getParent().innerItems.find(function(e){return e.referenceKey=='wbs3name'}).setValue(b.getStore().findRecord('id',a.get('id')).get('name'))}}},disabledCls:''},{xtype:'displayfield',labelWidth:'35%',itemId:'wbs3Label',label:{_tr:'wbs3Label',tpl:'{0} Name'},name:'wbs3name',reference:'wbs3name'},{xtype:'field-expaccount',label:'Account',reference:'accountField',itemId:'accountField',labelWidth:'35%',name:'account',disabledCls:''},{xtype:'displayfield',labelWidth:'35%',reference:'accountNameField',label:'Account Name',name:'accountname',disabledCls:''},{xtype:'checkboxfield',labelWidth:'35%',name:'billable',reference:'billableField',label:'Billable',disabledCls:'',listeners:{change:function(c,m,o,p){var n=TS.app.settings,i=c.parent.innerItems.find(function(a){return a.referenceKey=='categoryEditField'}),k=i.getStore(),d=k.findRecord('category',i.getValue()),h=c.parent.innerItems.find(function(a){return a.referenceKey=='wbs1Container'}).getItems().items[1],l=h.getStore(),a=c.parent.innerItems.find(function(a){return a.referenceKey=='accountField'}),f=c.parent.innerItems.find(function(a){return a.referenceKey=='accountNameField'}),e=a.getStore(),g=c.parent.innerItems.find(function(a){return a.referenceKey=='billableField'}),j,b;if(h.getValue()&&d){j=l.findRecord('id',h.getValue()).get('chargeType');e.clearFilter();if(j=='R'){if(m){a.setValue(d.get('defaultRegularBillableAccount'));b=e.findRecord('account',a.getValue());f.setValue(b.get('accountName'))}else {a.setValue(d.get('defaultRegularNonbillableAccount'));b=e.findRecord('account',a.getValue());f.setValue(b.get('accountName'))}g.setHidden(!n.exDisplayBillable)}else {a.setValue(d.get('defaultNonRegularAccount'));g.setValue(!1);g.setHidden(!0);b=e.findRecord('account',a.getValue());f.setValue(b.get('accountName'))}}}}},{xtype:'checkboxfield',labelWidth:'35%',name:'companyPaid',reference:'companyPaidField',label:'Company Paid'},{xtype:'textareafield',labelWidth:'35%',name:'reason',label:'Business reason </br> for expense',reference:'reasonField',disabledCls:''},{xtype:'textareafield',labelWidth:'35%',label:'Name of each person',name:'other',reference:'otherField',hidden:!0,disabledCls:''},{xtype:'numberfield',labelWidth:'35%',label:'Miles Driven',name:'miles',reference:'milesField',listeners:{blur:function(a,e){var c=a.parent.innerItems.find(function(b){return b.referenceKey=='amountField'}),d=a.parent.innerItems.find(function(b){return b.referenceKey=='milesField'}),b=a.parent.innerItems.find(function(b){return b.referenceKey=='amountPerMileField'});c.setValue(Math.round(d.getValue()*(b.getValue()*0.01)*100)/100)}},hidden:!0,disabledCls:''},{xtype:'numberfield',labelWidth:'35%',label:'Mileage Rate',name:'amountPerMile',readOnly:!0,reference:'amountPerMileField',hidden:!0,disabledCls:''},{xtype:'button',text:'Doc',iconCls:'x-fa fa-file-text-o',handler:'onAttachExpDoc',reference:'addDocButton',itemId:'addDocButton'},{xtype:'button',name:'dummy',text:'  ',height:300,listeners:{painted:function(a){if(Ext.os.is.Android&&Ext.os.is.Phone){a.hidden=!1}else {a.hidden=!0}}}}]},toolbarConfig:{xtype:'titlebar',docked:'top',items:[{xtype:'button',ui:'decline',text:'Cancel',align:'right',action:'cancel'},{xtype:'button',ui:'confirm',text:'Save',reference:'saveButton',align:'left',action:'submit'}]}}],columns:[{xtype:'datecolumn',text:'Date',dataIndex:'reportDate',renderer:function(a,c,d,e){var b=Ext.util.Format.date;return b(a||new Date(),'m/d/Y')},hidden:!0},{xtype:'datecolumn',text:'Date',dataIndex:'expDate',renderer:function(a,c,d,e){var b=Ext.util.Format.date;return b(a,'m/d/Y')},flex:1},{text:'Employee',dataIndex:'empId',flex:1,renderer:function(b){var a=Ext.getStore('AllEmployees').getById(b);return a?a.get('lname')+', '+a.get('fname'):'N/A'}},{text:'Category',dataIndex:'category',reference:'categoryField',flex:1,renderer:function(b){var a=Ext.getStore('ExpCategory').getById(b);return a?a.get('description'):'N/A'}}]}]},0,['fwa-manageexpenses'],['widget','component','container','panel','sheet','fwa-manageexpenses'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'sheet':!0,'fwa-manageexpenses':!0},['widget.fwa-manageexpenses'],0,[TS.view.fwa,'ManageExpenses'],0);Ext.cmd.derive('TS.view.fwa.SignatureList',Ext.Sheet,{controller:'fwa-edit',stretchX:!0,stretchY:!0,autoDestroy:!0,layout:'fit',items:[{xtype:'panel',scrollable:!1,layout:'fit',items:[{xtype:'titlebar',docked:'top',reference:'signatureListTitle',cls:'ts-navigation-header',title:'Signature List',items:[{align:'right',text:'Close',handler:'closeSheet'}]},{xtype:'list',itemId:'signatureList',reference:'signatureList',scrollable:'y',disableSelection:!0,bind:{store:'{signaturelist}'},itemTpl:new Ext.XTemplate('<tpl>','<div  style="margin:4px;"><img src="{[this.getValue(values)]}" title="{name:htmlEncode}"  style="width:100%;height:auto;" /></div>','<div style="font-size:85%;">   <div style="float:left">{[this.getPostedBy(values)]}</div>','   <div style="float:right">{[this.getAttachDate(values)]}</div>','</div>','<div class="x-clear"></div>','<div style="white-space:nowrap;">&nbsp;</div>','</tpl>',{getValue:function(a){if(a.attachmentItem){return a.attachmentItem}else {return TS.data.IconsSelector['TEXT']}},getAttachDate:function(a){return Ext.Date.format(new Date(a.dateAttached),'Y-m-d h:i A')},getPostedBy:function(b){var a=Ext.getStore('AllEmployees').getById(b.attachedByEmpId);return a?a.get('empName'):''}})}]}]},0,['fwa-signaturelist'],['widget','component','container','panel','sheet','fwa-signaturelist'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'sheet':!0,'fwa-signaturelist':!0},['widget.fwa-signaturelist'],0,[TS.view.fwa,'SignatureList'],0);Ext.cmd.derive('TS.controller.fwa.FWAEditController',Ext.app.ViewController,{listen:{controller:{'fwa-map':{positionUpdate:'refreshAddressValues'}}},init:function(){var c=this,b=TS.app.settings,d=c.getViewModel(),a=Ext.getStore('CrewsForNewFWA');a.clearFilter();a.filterBy(function(a){return a.get('crewChiefEmpId')==b.empId});if(Ext.first('#allCrewButton')){Ext.first('#myCrewsButton').setStyle('color:white;background-color:#939393;font-weight: bold;');Ext.first('#allCrewButton').setStyle('background-color: #f6f6f6;color: #606060;font-weight: normal;')}},control:{'button[action=navigation-back]':{tap:'navigateToGrid'},'button[action=camera]':{change:'newFileLoaded',data:'fileDataReceived'},'button[action=close]':{tap:'closeSheet'},'button[action=showUnitDetails]':{tap:'onUnitDetailsTap'},'button[action=select-laborcode]':{tap:'onSelectLaborCode'}},addHours:function(e){var d=e.up('sheet').down('grid'),c=d.findPlugin('grideditable'),a=Ext.create('TS.model.fwa.FwaHours'),b=this.getViewModel().get('selectedFWA');a.set('workDate',b.get('nextDate')!='Invalid Date'?b.get('nextDate'):new Date());a.set('empGroupId',TS.app.settings.empGroupId);a.set('modified','A');a.dirty=!0;b.hours().add(a);c.startEdit(a)},onEmployeeChange:function(f,c,d,e){var a=c.get('defaultCrewRoleId'),b=this.getView().lookup('employeeCrewRole');b.setValue(a)},addWorkCodes:function(g){var f=g.up('sheet').down('grid'),e=f.findPlugin('grideditable'),a=Ext.create('TS.model.fwa.Work'),c=this.getViewModel(),d=c.get('selectedFWA'),b=Ext.getStore('WorkCodes').getRange();if(b.length==1){a.set('workCodeId',b[1])}d.workSchedAndPerf().add(a);e.startEdit(a);c.set('fromSaveSubmit',!0)},addUnits:function(e){var b=e.up('sheet').down('grid'),d=b.lookup('unitCodeGrid'),a=b.findPlugin('grideditable'),c=Ext.first('#manageUnits').lookup('unitsDateHeader').getValue();rec=Ext.create('TS.model.fwa.Unit',{unitDate:new Date(c)}),vm=this.getViewModel(),unitCodeStore=Ext.getStore('UnitCode'),selection=vm.get('selectedFWA'),wbs1=selection.get('wbs1'),wbs2=selection.get('wbs2'),wbs3=selection.get('wbs3'),settings=TS.app.settings;if(!wbs1){Ext.Msg.alert('Warning','A '+settings.wbs1Label+'# selection is required.');return}unitCodeStore.filterBy(function(a){return a.get('status')=='A'});a.hideDetails(!0);if(unitCodeStore.getRange().length==0){Ext.Msg.alert('FYI','No units available for current '+settings.wbs1Label+'#: '+wbs1+'.');return}if(selection.units().length==0){selection._units=Ext.create('Ext.data.Store',{model:'TS.model.fwa.Unit'});d.setStore(selection._units)}selection.units().add(rec);a.startEdit(rec);vm.set('fromSaveSubmit',!0)},addUnitDetails:function(e){var a=e.up('sheet').down('grid'),d=a.findPlugin('grideditable'),b=Ext.create('TS.model.fwa.UnitDetail',{dtDate:new Date()}),f=this.getViewModel(),c=f.get('selectedUnit');c.get('details').add(b);d.startEdit(b);a.refresh()},closeSheet:function(c){if(Ext.first('#workCodeGrid')){var a=Ext.first('#workCodeGrid'),b=a.getStore().getRange();Ext.each(b,function(b){if(b.phantom&&!b.get('workCodeId')){a.getStore().remove(b)}})}else {if(Ext.first('#unitCodeGrid')){var a=Ext.first('#unitCodeGrid'),b=a.getStore().getRange();Ext.each(b,function(b){if(b.phantom&&!b.get('unitCodeId')){a.getStore().remove(b)}})}}c.up('sheet').hide()},closeTemplateSheet:function(a){a.up('sheet').hide();if(Ext.first('window-document')){Ext.first('window-document').hide()}},closeEditNotesSheet:function(b){var a=this,d=a.getView(),c=d.getViewModel().note;a.getViewModel().set('selectedNote.contents',c);if(a.sheet){a.sheet.hide()}else {if(b.up('sheet')){b.up('sheet').hide()}}},closeDetailsSheet:function(d){var b=this,g=b.getViewModel(),c=g.get('selectedUnit'),e=c.get('details'),f=Ext.first('#unitCodeGrid'),h=f.getPlugins()[0],a=0;Ext.each(e.getRange(),function(b){a+=b.get('lValue3')});c.set('quantity',a);Ext.first('#quantity').setValue(a);if(b.sheet){b.sheet.hide()}else {if(d.up('sheet')){d.up('sheet').hide()}}},onManageClientApproval:function(){var g=this,b=g.getViewModel().get('selectedFWA'),f=b.get('fwaId'),h=b.get('clientApprovalImage'),d=TS.app.settings,a=Ext.create({xtype:'window-signature',viewModel:{parent:this.getViewModel()},attType:AttachmentType.ClientSignature,associatedRecordId:f}),c='',e=0;Ext.each(b.workSchedAndPerf().getRange(),function(a){c+=a.get('workCodeAbbrev')+', '});c=c.substring(0,c.length-2);Ext.each(b.hours().getRange(),function(a){e+=a.get('regHrs')+a.get('ovtHrs')+a.get('ovt2Hrs')+a.get('travelHrs')});a.lookup('fwaInfoField').setLabel('<b>'+d.fwaAbbrevLabel+'</b>');a.lookup('fwaInfoField').setValue(b.get('fwaNum')+' : '+b.get('fwaName'));a.lookup('workCodeField').setLabel('<b>'+d.workCodeLabelPlural+'</b>');a.lookup('workCodeField').setValue(c);a.lookup('empHoursField').setLabel('<b>Ttl Emp Hours </b>');a.lookup('empHoursField').setValue(e);Fwa.GetSignatureHtmlDisplay(null,d.username,f,AttachmentType.ClientSignature,function(c){if(c&&c.success){a.down('titlebar[docked=top]').setTitle(d.clientLabel+' Approval');b.set('signatureHtml',c.data);Ext.Viewport.add(a);a.show()}else {if(c){Ext.GlobalEvents.fireEvent('Error',c)}}}.bind(g))},onManageChiefApproval:function(){var e=this,b=e.getViewModel().get('selectedFWA'),g=b.get('fwaId'),h=b.get('chiefApprovalImage'),d=TS.app.settings,a=Ext.create({xtype:'window-signature',viewModel:{parent:e.getViewModel()},attType:AttachmentType.EmpSignature,associatedRecordId:g}),c='',f=0;Ext.each(b.workSchedAndPerf().getRange(),function(a){c+=a.get('workCodeAbbrev')+', '});c=c.substring(0,c.length-2);Ext.each(b.hours().getRange(),function(a){f+=a.get('regHrs')+a.get('ovtHrs')+a.get('ovt2Hrs')+a.get('travelHrs')});a.lookup('fwaInfoField').setLabel('<b>'+d.fwaAbbrevLabel+'</b>');a.lookup('fwaInfoField').setValue(b.get('fwaNum')+' : '+b.get('fwaName'));a.lookup('workCodeField').setLabel('<b>'+d.workCodeLabelPlural+'</b>');a.lookup('workCodeField').setValue(c);a.lookup('empHoursField').setLabel('<b>Ttl Emp Hours </b>');a.lookup('empHoursField').setValue(f);Fwa.GetSignatureHtmlDisplay(null,d.username,g,AttachmentType.EmpSignature,function(c){if(c&&c.success){a.down('titlebar[docked=top]').setTitle(d.crewChiefLabel+' Approval');b.set('signatureHtml',c.data);Ext.Viewport.add(a);a.show()}else {if(c){Ext.GlobalEvents.fireEvent('Error',c)}}}.bind(e))},onManageNotesTap:function(){var i=this,c=i.getViewModel(),a=c.getStore('notesview'),g=TS.app.settings,h=c.get('selectedFWA'),f=[],d,b,e;Ext.each(h.notes().getRange(),function(a){d=Ext.create('TS.model.fwa.FwaNote',{empId:a.get('empId'),seq:a.get('seq'),contents:a.get('contents'),createDate:a.get('createDate'),modDate:a.get('modDate'),modUser:a.get('modUser'),canEdit:a.get('empId')==g.empId,formattedDateEmployee:a.get('formattedDateEmployee')});f.push(d)});a.setRemoteSort(!1);a.loadRawData(f);b=Ext.create({xtype:'fwa-notes',viewModel:{parent:c}});e=Ext.first('#notesList');a.sort('modDate','ASC');Ext.Viewport.add(b);b.show();setTimeout(function(){e.getScrollable().doScrollTo(0,1000000)},500)},onTextAreaChange:function(c,a,b){if(a){Ext.first('#postNoteButton').setDisabled(!1)}else {Ext.first('#postNoteButton').setDisabled(!0)}},onNotesAdd:function(h,i){var f=this,a=TS.app.settings,e=Ext.getStore('AllEmployees'),g=e.getById(a.empId),b=f.getViewModel(),d=b.get('selectedFWA'),c=Ext.create('TS.model.fwa.FwaNote',{empId:a.empId,contents:'',createUser:a.usernameDisplay,createDate:new Date(),modDate:new Date(),modUser:a.usernameDisplay,canEdit:!0,formattedDateEmployee:'Me',order:0,isNew:!0});b.set('selectedNote',c);d.notes().add(c);sheet=Ext.create({xtype:'fwa-editnotes',viewModel:{parent:b}});Ext.Viewport.add(sheet);sheet.show()},onEditNotesDelete:function(f){var g=this,d=g.getViewModel(),b=Ext.first('#notesList'),a=b.getStore('notesview'),e=d.get('selectedNote'),c;c=a.findRecord('seq',e.get('seq'));a.remove(c);d.get('selectedFWA').set('notes',a);b.refresh();f.up('sheet').hide()},onNotesEdit:function(d,e){var b=this.getViewModel(),c=b.get('selectedNote'),a;a=Ext.create({xtype:'fwa-editnotes',viewModel:{parent:b,note:c.get('contents')}});a.lookup('fwaNotesDeleteBtn').setHidden(!1);Ext.Viewport.add(a);a.show()},onNotesEditTap:function(c,f,e,a){var b=this,d=b.getViewModel();d.set('selectedNote',a);if(!a.get('canEdit')){Ext.Msg.alert('FYI','Past notes cannot be edited.');return}b.onNotesEdit(c,a)},onEditNotesSave:function(j){var h=this,i=h.getViewModel(),e=Ext.first('#notesList'),c=Ext.first('#textAreaMessage'),b=Ext.first('#notesList').getStore(),a=TS.app.settings,f=Ext.getStore('AllEmployees'),g=f.getById(a.empId),d;d=Ext.create('TS.model.fwa.FwaNote',{empId:a.empId,contents:c.getValue(),createUser:a.usernameDisplay,createDate:new Date(),modDate:new Date(),modUser:a.usernameDisplay,canEdit:!0,formattedDateEmployee:Ext.Date.format(new Date(),'D, M d, Y h:i A')+'   '+g.get('empName'),order:0,isNew:!0});b.insert(b.getCount(),d);i.get('selectedFWA').set('notes',b);c.setValue();setTimeout(function(){e.getScrollable().doScrollTo(0,1000000)},500)},doSaveNotes:function(c){var d=this,a=d.getViewModel(),f=a.get('selectedFWA'),e=a.get('selectedNote'),b=Ext.first('#notesList').getStore();a.get('selectedFWA').set('notes',b);c.up('sheet').hide()},onClearNotes:function(b){var a=this.getView().lookup('fwaNotes');a.setValue('')},doEditNotes:function(a){Ext.first('fwa-notes').down().setActiveItem(1)},onCloseEditNotes:function(a){Ext.first('fwa-notes').down().setActiveItem(0)},onManageHoursTap:function(){var j=this,i=j.getView().getDisabled(),g=j.getViewModel(),s=j.getView(),e=TS.app.settings,b=Ext.create({xtype:'fwa-managehours',viewModel:{parent:g},showOvtHrs:e.tsAllowOvtHrs,showOvt2Hrs:e.tsAllowOvt2Hrs,showTravelHrs:e.tsAllowTravelHrs}),d=b.lookup('hoursGrid'),r=d.getPlugins()[0].getFormConfig(),c=g.get('selectedFWA'),l=Ext.getStore('AllCrews').getById(c.get('scheduledCrewId')),p=l?l.get('crewMembers'):'',f,n=b.lookup('workDateField'),o=b.lookup('workCodeDateBar'),a=g.get('selectedFWA.hours'),q=a.model,k,m,h=0;Ext.each(a.getRange(),function(b){var a=Ext.getStore('Employees').getById(b.get('empId'));if(a){b.set('empGroupId',a.get('empGroupId'))}});if(g.get('newFwa')&&c.get('schedStartDate')){f=c.get('schedStartDate')}else {if(g.get('newFwa')&&!c.get('schedStartDate')){f=new Date()}else {if(!c.get('nextDate')||new Date(c.get('nextDate'))<new Date('Mon Jan 01 1 00:30:00 GMT-0600 (Central Standard Time)')){f=new Date()}else {f=c.get('nextDate')}}}n.setHidden(!0);o.setHidden(!1);b.lookup('dateHeader').setValue(Ext.Date.format(new Date(f),'m/d/Y'));a.setRemoteFilter(!1);a.clearFilter();Ext.each(a.collect('empId'),function(b){a.clearFilter();a.filter('empId',b);Ext.each(a.collect('crewRoleId'),function(d){a.filter('crewRoleId',d);Ext.each(a.collect('workCodeAbbrev'),function(e){a.filter('workCodeAbbrev',e);Ext.each(a.getRange(),function(f){Ext.each(c.get('recurrenceDatesInRange'),function(c){a.filter('workDate',new Date(c));if(a.getRange().length===0&&p.getById(b)){a.add(new q({workDate:new Date(c),empId:b,crewRoleId:d,workCodeId:Ext.getStore('WorkCodes').findRecord('workCodeAbbrev',e).get('workCodeId'),workCodeAbbrev:e,ovt2Hrs:0,ovtHrs:0,regHrs:0,travelHrs:0}))}})})})})});a.clearFilter();a.filterBy(function(a){a.dirty=!1;return Ext.Date.format(new Date(a.get('workDate')),'m/d/Y')===Ext.Date.format(new Date(c.get('nextDate')),'m/d/Y')&&a.get('modified')!=='D'});a.sort([{property:'workCodeId',direction:'ASC'},{property:'isChief',direction:'DESC'},{property:'lastName',direction:'ASC'}]);if(c.get('recurrenceDatesInRange')&&c.get('recurrenceDatesInRange').length>0){if(c.get('recurrenceDatesInRange').length==1){b.lookup('lastDate').setDisabled(!0);b.lookup('nextDate').setDisabled(!0)}else {k=c.get('recurrenceDatesInRange').sort(function(a,b){return new Date(a)-new Date(b)});Ext.each(k,function(a){h++;m=Ext.Date.format(new Date((new Date(a)).getUTCMonth()+1+'/'+(new Date(a)).getUTCDate()+'/'+(new Date(a)).getUTCFullYear()),'m/d/Y');var d=m==b.lookup('dateHeader').getValue();if(d&&h==1){b.lookup('lastDate').setDisabled(!0);b.lookup('nextDate').setDisabled(!1);return !1}else {if(d&&h==c.get('recurrenceDatesInRange').length){b.lookup('nextDate').setDisabled(!0);b.lookup('lastDate').setDisabled(!1);return !1}}})}}else {b.lookup('nextDate').setDisabled(!0);b.lookup('lastDate').setDisabled(!0)}d.getPlugins()[0].disableSubmit(i);d.getPlugins()[0].setEnableDeleteButton(!i);d.getColumns()[1].setHidden(!e.fwaDisplayWorkCodeInHours);d.getPlugins()[0].hideOvtHrs(!e.tsAllowOvtHrs);d.getPlugins()[0].hideOvt2Hrs(!e.tsAllowOvt2Hrs);d.getPlugins()[0].hideTravelHrs(!e.tsAllowTravelHrs);d.getPlugins()[0].hideWorkCode(!e.fwaDisplayWorkCodeInHours);b.lookup('addHoursButton').setDisabled(i);Ext.Viewport.add(b);b.show()},loadDefaultCrew:function(a){a.clearFilter();var d=this,j=d.getView(),h=d.getViewModel(),c=h.get('selectedFWA'),g=a.model,i=Ext.first('#manageHours').lookup('dateHeader').getValue(),e=c.get('recurrenceDatesInRange').sort(function(b,c){return new Date(b)-new Date(c)}),b=Ext.getStore('AllCrews').getById(c.get('scheduledCrewId')),f=b?b.get('crewMembers'):'';Ext.each(a.collect('empId'),function(b){a.clearFilter();a.filter('empId',b);Ext.each(a.collect('crewRoleId'),function(c){a.filter('crewRoleId',c);Ext.each(a.collect('workCodeAbbrev'),function(d){a.filter('workCodeAbbrev',d);Ext.each(a.getRange(),function(h){Ext.each(e,function(e){a.filter('workDate',new Date(e));if(a.getRange().length==0&&f.getById(b)){a.add(new g({workDate:new Date(e),empId:b,crewRoleId:c,workCodeId:Ext.getStore('WorkCodes').findRecord('workCodeAbbrev',d).get('workCodeId'),workCodeAbbrev:d,ovt2Hrs:0,ovtHrs:0,regHrs:0,travelHrs:0}))}})})})})})},closeHoursSheet:function(d){var e=this,f=e.getViewModel(),c=f.get('selectedFWA.hours');if(Ext.first('#hoursGrid')){var a=Ext.first('#hoursGrid'),b=a.getStore().getRange();Ext.each(b,function(b){if(b.phantom&&!b.get('empId')){a.getStore().remove(b)}})}c.clearFilter();d.up('sheet').hide()},lastDate:function(){var i=this,p=i.getView(),o=i.getViewModel(),h=o.get('selectedFWA'),l=Ext.first('#hoursGrid'),a=l.getStore(),n=a.model,m=Ext.first('#manageHours').lookup('dateHeader').getValue(),e=h.get('recurrenceDatesInRange').sort(function(a,b){return new Date(b)-new Date(a)}),g=Ext.getStore('AllCrews').getById(h.get('scheduledCrewId')),k=g?g.get('crewMembers'):'',b='',c='',f=!1,d=0,j=e.length;Ext.each(e,function(a){d++;c=(new Date(a)).getUTCMonth()+1+'/'+(new Date(a)).getUTCDate()+'/'+(new Date(a)).getUTCFullYear();if(new Date(Ext.Date.format(new Date(c),'m/d/Y'))<new Date(m)){b=Ext.Date.format(new Date(c),'m/d/Y');f=!0;return !1}});if(f){Ext.each(a.collect('empId'),function(c){a.clearFilter();a.filter('empId',c);Ext.each(a.collect('crewRoleId'),function(d){a.filter('crewRoleId',d);Ext.each(a.collect('workCodeAbbrev'),function(e){a.filter('workCodeAbbrev',e);Ext.each(a.getRange(),function(f){a.filter('workDate',new Date(b));if(a.getRange().length==0&&k.getById(c)){a.add(new n({workDate:new Date(b),empId:c,crewRoleId:d,workCodeId:Ext.getStore('WorkCodes').findRecord('workCodeAbbrev',e).get('workCodeId'),workCodeAbbrev:e,ovt2Hrs:0,ovtHrs:0,regHrs:0,travelHrs:0}))}})})})});a.clearFilter();a.setRemoteFilter(!1);a.filterBy(function(a){return Ext.Date.format(new Date(a.get('workDate')),'m/d/Y')===Ext.Date.format(new Date(b),'m/d/Y')})}Ext.first('#manageHours').lookup('dateHeader').setValue(Ext.Date.format(new Date(b),'m/d/Y'));Ext.first('#manageHours').lookup('lastDate').setDisabled(d==j);Ext.first('#manageHours').lookup('nextDate').setDisabled(!1)},onAddWorkDate:function(){var b=this,c=b.getViewModel(),a=Ext.create({xtype:'fwa-addworkdatehours',viewModel:{parent:c}});Ext.Viewport.add(a);a.lookup('addWorkDatePicker').setValue(Ext.first('#manageHours').lookup('dateHeader').getValue());a.show()},saveAddWorkDate:function(l,o){var i=this,n=i.getView(),m=i.getViewModel(),e=m.get('selectedFWA'),j=Ext.first('#hoursGrid'),a=j.getStore(),k=a.model,f=!1,h,c=0,b=e.get('recurrenceDatesInRange'),g=Ext.Date.format(new Date(Ext.first('#addWorkDatePicker').getValue()),'Y-m-d'),d=Ext.Date.format(new Date(Ext.first('#addWorkDatePicker').getValue()),'m/d/Y');if(!b){e.set('recurrenceDatesInRange',[]);b=e.get('recurrenceDatesInRange')}Ext.each(b,function(a){c++;if(a==g+'T00:00:00'){f=!0;return !1}});if(!f){b.push(g+'T00:00:00');c++}Ext.each(a.collect('empId'),function(b){a.clearFilter();a.filter('empId',b);Ext.each(a.collect('crewRoleId'),function(c){a.filter('crewRoleId',c);Ext.each(a.collect('workCodeAbbrev'),function(e){a.filter('workCodeAbbrev',e);Ext.each(a.getRange(),function(f){a.filter('workDate',new Date(d));if(a.getRange().length==0){a.add(new k({workDate:new Date(d),empId:b,crewRoleId:c,workCodeId:Ext.getStore('WorkCodes').findRecord('workCodeAbbrev',e).get('workCodeId'),workCodeAbbrev:e,ovt2Hrs:0,ovtHrs:0,regHrs:0,travelHrs:0}))}})})})});a.clearFilter();a.setRemoteFilter(!1);a.filterBy(function(a){return Ext.Date.format(new Date(a.get('workDate')),'m/d/Y')===Ext.Date.format(new Date(d),'m/d/Y')});Ext.first('#manageHours').lookup('dateHeader').setValue(Ext.Date.format(new Date(d),'m/d/Y'));c=0;if(b&&b.length>0){if(b.length==1){Ext.first('#manageHours').lookup('lastDate').setDisabled(!0);Ext.first('#manageHours').lookup('nextDate').setDisabled(!0)}else {b=b.sort(function(a,b){return new Date(a)-new Date(b)});Ext.each(b,function(a){c++;h=Ext.Date.format(new Date((new Date(a)).getUTCMonth()+1+'/'+(new Date(a)).getUTCDate()+'/'+(new Date(a)).getUTCFullYear()),'m/d/Y');var d=h==Ext.Date.format(new Date(n.lookup('addWorkDatePicker').getValue()),'m/d/Y');if(d&&c==1){Ext.first('#manageHours').lookup('lastDate').setDisabled(!0);Ext.first('#manageHours').lookup('nextDate').setDisabled(!1);return !1}else {if(d&&c==b.length){Ext.first('#manageHours').lookup('lastDate').setDisabled(!1);Ext.first('#manageHours').lookup('nextDate').setDisabled(!0);return !1}}})}}else {Ext.first('#manageHours').lookup('lastDate').setDisabled(!0);Ext.first('#manageHours').lookup('nextDate').setDisabled(!0)}l.up('sheet').hide()},nextDate:function(){var i=this,p=i.getView(),o=i.getViewModel(),h=o.get('selectedFWA'),l=Ext.first('#hoursGrid'),a=l.getStore(),n=a.model,m=Ext.first('#manageHours').lookup('dateHeader').getValue(),e=h.get('recurrenceDatesInRange').sort(function(a,b){return new Date(a)-new Date(b)}),g=Ext.getStore('AllCrews').getById(h.get('scheduledCrewId')),k=g?g.get('crewMembers'):'',b='',c='',f=!1,d=0,j=e.length;Ext.each(e,function(a){d++;c=(new Date(a)).getUTCMonth()+1+'/'+(new Date(a)).getUTCDate()+'/'+(new Date(a)).getUTCFullYear();if(new Date(Ext.Date.format(new Date(c),'m/d/Y'))>new Date(m)){b=Ext.Date.format(new Date(c),'m/d/Y');f=!0;return !1}});if(f){Ext.each(a.collect('empId'),function(c){a.clearFilter();a.filter('empId',c);Ext.each(a.collect('crewRoleId'),function(d){a.filter('crewRoleId',d);Ext.each(a.collect('workCodeAbbrev'),function(e){a.filter('workCodeAbbrev',e);Ext.each(a.getRange(),function(f){a.filter('workDate',new Date(b));if(a.getRange().length==0&&k.getById(c)){a.add(new n({workDate:new Date(b),empId:c,crewRoleId:d,workCodeId:Ext.getStore('WorkCodes').findRecord('workCodeAbbrev',e).get('workCodeId'),workCodeAbbrev:e,ovt2Hrs:0,ovtHrs:0,regHrs:0,travelHrs:0}))}})})})});a.clearFilter();a.setRemoteFilter(!1);a.filterBy(function(a){return Ext.Date.format(new Date(a.get('workDate')),'m/d/Y')===Ext.Date.format(new Date(b),'m/d/Y')})}Ext.first('#manageHours').lookup('dateHeader').setValue(Ext.Date.format(new Date(b),'m/d/Y'));Ext.first('#manageHours').lookup('nextDate').setDisabled(d==j);Ext.first('#manageHours').lookup('lastDate').setDisabled(!1)},onManageWorkCodesTap:function(){var g=this,d=TS.app.settings,c=g.getView().getDisabled(),a=g.getViewModel(),e=Ext.create({xtype:'fwa-manageworkcodes',viewModel:{parent:g.getViewModel()}}),f=e.lookup('workCodeGrid'),b=f.getPlugins()[0],h=b.getFormConfig();f.getColumns()[2].setHidden(a.get('fwaHideActualHours'));f.getColumns()[2].setEditable(!a.get('fwaReadOnlyActualHours'));e.lookup('addWorkCodeButton').setDisabled((c||a.get('hideAddWorkCode'))&&!a.get('newFwa'));b.disableSubmit((c||a.get('hideAddWorkCode'))&&!a.get('newFwa'));b.setEnableDeleteButton(!c&&!a.get('hideAddWorkCode'));b.hidePhotoButton(a.get('newFwa'));b.setPhotoRequiredHidden(a.get('newFwa'));b.setActualHrsReadOnly(a.get('fwaReadOnlyActualHours'));b.setActualHrsHidden(a.get('fwaHideActualHours'));b.setPercentCompleteHidden(!d.fwaDisplayWorkCodePctComplete);if(d.fwaAddWorkCode!='A'){if(d.fwaAddWorkCode=='N'){b.setScheduledHrsReadOnly((c||a.get('hideAddWorkCode'))&&!a.get('newFwa'))}else {if(d.fwaAddWorkCode=='M'){b.setScheduledHrsReadOnly((c||a.get('hideAddWorkCode'))&&!a.get('newFwa'))}}}Ext.Viewport.add(e);e.show()},onManageUnitsTap:function(){var c=this,d=c.getViewModel(),a=d.get('selectedFWA'),b=Ext.getStore('UnitCode');if(!IS_OFFLINE){b.removeAll();b.getProxy().setExtraParams({start:0,limit:25,wbs1:a.get('wbs1')?a.get('wbs1'):'^',wbs2:a.get('wbs2')?a.get('wbs2'):'^',wbs3:a.get('wbs3')?a.get('wbs3'):'^',includeInactive:!0});b.load(function(d,e,b){c.onManageUnitsTapContinue(a)})}else {c.onManageUnitsTapContinue(a)}},onManageUnitsTapContinue:function(){if(!this.getView()){return}var k=this,e=k.getView().getDisabled(),d=k.getViewModel(),a=Ext.create({xtype:'fwa-manageunits',viewModel:{parent:d}}),m=a.lookup('unitCodeGrid'),f=m.findPlugin('grideditable'),b=d.get('selectedFWA'),c,l=a.lookup('unitDateBar'),h=d.get('selectedFWA.units'),i,j,g=0;if(d.get('newFwa')&&b.get('schedStartDate')){c=b.get('schedStartDate')}else {if(d.get('newFwa')&&!b.get('schedStartDate')){c=new Date()}else {if(!b.get('nextDate')||new Date(b.get('nextDate'))<new Date('Mon Jan 01 1 00:30:00 GMT-0600 (Central Standard Time)')){c=new Date()}else {c=b.get('nextDate')}}}l.setHidden(!1);a.lookup('unitsDateHeader').setValue(Ext.Date.format(new Date(c),'m/d/Y'));h.setRemoteFilter(!1);h.clearFilter();h.filterBy(function(a){a.dirty=!1;return Ext.Date.format(new Date(a.get('unitDate')),'m/d/Y')===Ext.Date.format(new Date(b.get('nextDate')),'m/d/Y')});b.set('unitDatesInRange',b.get('recurrenceDatesInRange'));if(b.get('unitDatesInRange')&&b.get('unitDatesInRange').length>0){if(b.get('unitDatesInRange').length==1){a.lookup('lastUnitsDate').setDisabled(!0);a.lookup('nextUnitsDate').setDisabled(!0)}else {i=b.get('unitDatesInRange').sort(function(a,b){return new Date(a)-new Date(b)});Ext.each(i,function(c){g++;j=Ext.Date.format(new Date((new Date(c)).getUTCMonth()+1+'/'+(new Date(c)).getUTCDate()+'/'+(new Date(c)).getUTCFullYear()),'m/d/Y');var d=j==a.lookup('unitsDateHeader').getValue();if(d&&g==1){a.lookup('lastUnitsDate').setDisabled(!0);a.lookup('nextUnitsDate').setDisabled(!1);return !1}else {if(d&&g==b.get('unitDatesInRange').length){a.lookup('nextUnitsDate').setDisabled(!0);a.lookup('lastUnitsDate').setDisabled(!1);return !1}}})}}else {a.lookup('nextUnitsDate').setDisabled(!0);a.lookup('lastUnitsDate').setDisabled(!0)}f.disableSubmit(e);f.hideDetails(e);f.hideDeleteButton(!e);a.lookup('addUnitsButton').setDisabled(e);Ext.Viewport.add(a);a.show()},onUnitDetailsTap:function(){var d=this,g=TS.app.settings,e=d.getView().getDisabled(),a=d.getViewModel(),j=d.getView().down('grid'),c=Ext.create({xtype:'fwa-manageunitdetails',viewModel:{parent:a}}),i=c.lookup('unitDetailsGrid'),b=i.getPlugins()[0],k=b.getFormConfig(),f=j.selected,h=f.items[0];b.disableSubmit(e);b.hideDeleteButton(!e);if(!h){Ext.Msg.alert('Warning','Please save new '+g.unitLabel+' first.');return}if(!a.get('selectedUnit')){a.set('selectedUnit',Ext.create('TS.model.fwa.Unit'))}a.set('selectedUnitDetails',a.get('selectedUnit').get('details'));Ext.each(a.get('selectedUnitDetails').getRange(),function(a){a.phantom=!1});Ext.Viewport.add(c);c.show()},onProjectLookup:function(c){var b=this.getViewModel(),a;b.set('isExpense',c.getParent().getParent().viewModelKey?!1:!0);a=Ext.create({xtype:'projectlookuptree',viewModel:{parent:b},app:'FWA'});Ext.Viewport.add(a);a.show()},onSelectProject:function(g){var d=this,h=d.getView(),b=d.getViewModel().getParent().getData().selectedFWA,e=h.lookup('project-treelist'),c=e.getViewModel().getData().treelist.selection,f=TS.app.settings,a;if(!c){Ext.Msg.alert('FYI','Please select '+f.wbs1Label+' from list');return}a=c.getId().split('^');if(d.getViewModel().getParent().getData().isExpense){Ext.first('#exp_fwawbs1id').setValue(a[0]);Ext.first('#exp_fwawbs2id').setValue(a[1]||'');Ext.first('#exp_fwawbs3id').setValue(a[2]||'')}else {b.set('wbs1',a[0]);b.set('wbs2',a[1]||'');b.set('wbs3',a[2]||'');b.set('clientId',c.get('clientId'))}g.up('sheet').hide()},onAttachExpDoc:function(j){var c=this,h=c.getViewModel().get('selectedFWA'),i=h.get('fwaId'),g=c.getView().down('grid'),f=TS.app.settings,e=g.selected,a=e.items[0];if(!a){Ext.Msg.alert('Warning','Please save new expense first.');return}var b=Ext.create({xtype:'exp-window-document',viewModel:{parent:c.getViewModel()},attType:'Document',location:f.documentStorageLoc,associatedRecordId:a.get('expReportId')+'||'+a.get('expId'),attachmentsList:{modelType:'EXP',modelId:a.get('expReportId')+'||'+a.get('expId'),includeItem:!0,attachmentType:AttachmentType.Document}}),d='Attach ';if(Ext.first('#attachFormFrame')){Ext.first('#attachFormFrame').setHidden(!1)}b.lookup('attachmentList').add({xtype:'attachments',attachmentParams:b.attachmentsList});b.down('titlebar[docked=top]').setTitle(d+' Expense Document');Ext.Viewport.add(b);b.show()},onAttachDoc:function(j){var e=this,b=e.getViewModel().get('selectedFWA'),f=b.get('fwaId'),i=e.getView().down('grid'),a=TS.app.settings,h=i.selected,d=h.items[0];if(!d){Ext.Msg.alert('Warning','Please save new '+a.workCodeLabel+' first.');return}var c=Ext.create({xtype:'window-document',viewModel:{parent:e.getViewModel()},attType:'Document',location:a.documentStorageLoc,associatedRecordId:f+'||'+d.get('workCodeId'),attachmentsList:{modelType:'FWA',modelId:f+'||'+d.get('workCodeId'),includeItem:!0,attachmentType:AttachmentType.Document}}),g=a.fwaCanModify=='A'||a.fwaCanModify=='M'&&b.get('scheduledCrewChiefId')==a.empId||b.get('fwaApprovers').indexOf(a.empId)!==-1&&b.get('fwaApproversCanModify')?'Attach ':'View ';if(Ext.first('#attachFormFrame')){if(a.fwaCanModify=='A'||a.fwaCanModify=='M'&&b.get('scheduledCrewChiefId')==a.empId||b.get('fwaApprovers').indexOf(a.empId)!==-1&&b.get('fwaApproversCanModify')){Ext.first('#attachFormFrame').setHidden(!1)}else {Ext.first('#attachFormFrame').setHidden(!0)}}c.lookup('attachmentList').add({xtype:'attachments',attachmentParams:c.attachmentsList});c.lookup('fromTemplateButton').setHidden(!0);c.down('titlebar[docked=top]').setTitle(g+TS.app.settings.workCodeLabel+' Document');Ext.Viewport.add(c);c.show()},onAttachPhoto:function(k){var e=this,j=e.getView(),b=e.getViewModel().get('selectedFWA'),g=b.get('fwaId'),i=j.down('grid'),a=TS.app.settings,f=i.selected,d=f.items[0];if(!d){Ext.Msg.alert('Warning','Please save new '+a.workCodeLabel+' first.');return}var c=Ext.create({xtype:'window-photo',viewModel:{parent:e.getViewModel()},attType:'Photo',location:a.imageStorageLoc,associatedRecordId:g+'||'+d.get('workCodeId'),attachmentsList:{modelType:'FWA',modelId:g+'||'+d.get('workCodeId'),includeItem:!0,attachmentType:AttachmentType.Photo}}),h=a.fwaCanModify=='A'||a.fwaCanModify=='M'&&f.get('scheduledCrewChiefId')==a.empId||b.get('fwaApprovers').indexOf(a.empId)!==-1&&b.get('fwaApproversCanModify')?'Attach ':'View ';if(Ext.first('#attachFormFrame')){if(a.fwaCanModify=='A'||a.fwaCanModify=='M'&&b.get('scheduledCrewChiefId')==a.empId||b.get('fwaApprovers').indexOf(a.empId)!==-1&&b.get('fwaApproversCanModify')){Ext.first('#attachFormFrame').setHidden(!1)}else {Ext.first('#attachFormFrame').setHidden(!0)}}c.lookup('attachmentList').add({xtype:'attachments',attachmentParams:c.attachmentsList});c.down('titlebar[docked=top]').setTitle(h+TS.app.settings.workCodeLabel+' Photo');Ext.Viewport.add(c);c.show()},onClearDirty:function(){var b=this,c=b.getViewModel(),a=c.get('selectedFWA');a.dirty=!1},navigateToGrid:function(j){var c=this,h=c.getView(),b=c.getViewModel(),a=b.get('selectedFWA'),i=TS.app.settings,g=b.getStore('fwalist'),e=[],d=[],f=[];if(a.hours()){e=a.hours().getRange()}if(a.workSchedAndPerf()){d=a.workSchedAndPerf().getRange()}if(a.units()){f=a.units().getRange()}if(!b.get('fromSaveSubmit')){Ext.each(e,function(b){if(b.dirty){a.dirty=!0}});Ext.each(d,function(b){if(b.dirty){a.dirty=!0}});Ext.each(f,function(b){if(b.dirty){a.dirty=!0}});if(IS_OFFLINE){}else {if(a._loc.dirty){a.dirty=!0}}}if(a.dirty){Ext.Msg.confirm('Unsaved Changes','You have unsaved changes. Do you want to discard your changes and continue?',function(d){if(d=='yes'){c.getView().up('tabpanel').setActiveItem(0);a.dirty=!1;g.reload();if(!b.get('newFwa')){b.set('selectedFWA','')}}else {}})}else {c.getView().up('tabpanel').setActiveItem(0);if(!b.get('newFwa')){b.set('selectedFWA','')}else {b.getStore('fwalist').reload()}h.destroy()}a.set('clientApprovalImage','');a.set('chiefApprovalImage','')},checkDailyTtlHours:function(b){var g=[],f=[],e=0,a,d=!1;for(var c=0;c<b.length;c++){a=b[c].empId;Ext.Array.include(g,a);a=Ext.Date.format(b[c].workDate,'m/d/Y');Ext.Array.include(f,a)}Ext.each(g,function(a){Ext.each(f,function(c){e=0;Ext.each(b,function(d){if(d.empId==a&&Ext.Date.format(d.workDate,'m/d/Y')==c){e+=d.regHrs+d.ovtHrs+d.ovt2Hrs+d.travelHrs}});if(e>24){d=!0}})});if(d){Ext.Msg.alert('Warning','Employee hours entered for work date exceed 24. Please correct.')}return d},onSaveFwa:function(){var c=this,k=c.getViewModel(),b=k.get('selectedFWA'),d=b.get('schedStartDate'),j=b.get('schedEndDate'),a=TS.app.settings,i=c.lookup('wbs1combo'),n=c.lookup('wbs2combo'),o=c.lookup('wbs3combo'),l=Ext.first('#schedStartDateField'),m=Ext.first('#schedEndDateField'),e=0,f=0;if(!IS_OFFLINE){b.set('attachments',[])}if(!d&&!j){Ext.each(b.hours().getRange(),function(a){e+=a.get('ovtHrs')+a.get('ovt2Hrs')+a.get('regHrs')+a.get('travelHrs')});Ext.each(b.units().getRange(),function(a){f+=a.get('quantity')});if(e>0||f>0){Ext.Msg.show({title:'Warning',message:a.fwaAbbrevLabel+'s with hours entered or unit quantities entered cannot be unscheduled.',buttons:Ext.Msg.OK,icon:Ext.Msg.WARNING});return !1}}if(a.fwaAutoNumbering&&b.get('fwaName')==''){Ext.Msg.alert('Warning',a.fwaAbbrevLabel+' Name is a required field.');return}else {if(!a.fwaAutoNumbering&&(b.get('fwaName')==''||b.get('fwaNum')=='')){Ext.Msg.alert('Warning','Both'+a.fwaAbbrevLabel+'# and '+a.fwaAbbrevLabel+'Name are required fields.');return}}if(!IS_OFFLINE&&!i.getValue()){Ext.Msg.alert('Warning',a.wbs1Label+'# is a required field.');return}if(c.checkDailyTtlHours(b.getData(!0).hours)){c.getView().setLoading(!1);return}if(d&&a.schedVisibleHoursStart.getTime()>d.getTime()){var h=Ext.Date.format(d,'g:i A'),g=Ext.Date.format(a.schedVisibleHoursStart,'g:i A');Ext.Msg.confirm('Please Confirm','Start time ('+h+') is earlier than visible start time ('+g+') on calendar, do you wish to continue? ',function(a){if(a=='yes'){c.continueSave()}else {c.getView().setLoading(!1)}})}else {c.continueSave()}},continueSave:function(){var c=this,e=c.getViewModel(),a,o,m=Ext.first('#scheduledByField'),d=c.getView(),p=e.getStore('fwalist'),b=e.get('selectedFWA'),f=b.get('schedStartDate'),h=b.get('schedEndDate'),k=Ext.first('#schedEndTimeField').getValue(),j=b.get('dateOrdered'),n=b.get('orderedBy'),i=b.get('dateRequired'),l=c.getViewModel().get('isScheduler'),g=TS.app.settings;if(!b.get('preparedByEmpId')){Ext.Msg.alert('Warning','Scheduled By is a required field.');return}if(e.get('newFwa')){if(b.workSchedAndPerf().getRange().length===0){Ext.Msg.alert('Warning','At least one(1) '+g.workCodeLabel+' entry is required.');return}if(f&&h&&b.hours().getRange().length>0&&!b.get('scheduledCrewId')){Ext.Msg.alert('Warning','A '+g.crewLabel+' selection is required when start/end date & employee hours are entered.');return !1}}Ext.each(b.hours().getRange(),function(a){a.set('isChief',Ext.getStore('Roles').getById(a.get('crewRoleId')).get('crewRoleIsChief'))});if(!f){b.set('schedStartDate',new Date('1/1/0001 12:00:00 AM'))}if(!h){b.set('schedEndDate',new Date('1/1/0001 12:00:00 AM'))}else {b.set('schedEndDate',k)}if(!j||new Date(j)<new Date('Mon Jan 01 1 00:30:00 GMT-0600 (Central Standard Time)')){b.set('dateOrdered',new Date('1/1/0001 12:00:00 AM'))}if(!i||new Date(i)<new Date('Mon Jan 01 1 00:30:00 GMT-0600 (Central Standard Time)')){b.set('dateRequired',new Date('1/1/0001 12:00:00 AM'))}if(b.get('lastSubmittedDate')=='Invalid Date'||!b.get('lastSubmittedDate')||b.get('lastSubmittedDate')<=new Date('Mon Jan 01 1 00:30:00 GMT-0600 (Central Standard Time)')){b.set('lastSubmittedDate',new Date('1/1/0001 12:00:00 AM'))}if(b.get('lastApprovedDate')=='Invalid Date'||!b.get('lastApprovedDate')||b.get('lastApprovedDate')<=new Date('Mon Jan 01 1 00:30:00 GMT-0600 (Central Standard Time)')){b.set('lastApprovedDate',new Date('1/1/0001 12:00:00 AM'))}if(b.get('nextDate')=='Invalid Date'||!b.get('nextDate')||new Date(b.get('nextDate'))<new Date('Mon Jan 01 1 00:30:00 GMT-0600 (Central Standard Time)')){b.set('nextDate',new Date())}if(f>h){Ext.Msg.alert('Warning',g.fwaAbbrevLabel+' start date/time must be earlier than end date/time.');return}if(h<f){Ext.Msg.alert('Warning',g.fwaAbbrevLabel+' end date/time must be later than start date/time.');return}b.set('schedEndDate',k);a=b.getData(!0);if(e.get('newFwa')){a.recurrenceConfig=null}if(a.loc){if(a.loc.latitude==''){a.loc.latitude=0}if(a.loc.longitude==''){a.loc.longitude=0}}Ext.each(a.units,function(a){if(a.details){a.details=Ext.Array.pluck(a.details.getRange(),'data')}});c.getView().setLoading(!0,'Saving FWA...');if(e.get('selectedFWA').get('notes')){a.notes=Ext.Array.pluck(e.get('selectedFWA').get('notes').getRange(),'data')}a.expenses=a.expenses?a.expenses:[];a.schedStartDate=TS.common.Util.getOutUTCDate(a.schedStartDate);a.schedEndDate=TS.common.Util.getOutUTCDate(a.schedEndDate);Ext.each(a.notes,function(a){a.createDate=TS.common.Util.getOutUTCDate(a.createDate);a.modDate=TS.common.Util.getOutUTCDate(a.modDate)});TS.Util.onCheckPriorToEmployeeAssn(a,!1,a.scheduledCrewId,function(f){if(f){if(e.get('newFwa')){TS.Util.onCheckForDoubleBookedEmployees(a.fwaId,a.scheduledCrewId,a.schedStartDate,a.schedEndDate,function(e){if(!e){if(a.scheduledCrewId&&a.schedStartDate&&a.schedEndDate&&a.hours.length==0){d.lookup('schedCrewfield').setValue('');d.lookup('schedCrewfield_OL').setValue('');d.lookup('dateOrderedField').setValue('');d.lookup('dateRequiredField').setValue('');d.lookup('schedStartDateField').setValue('');d.lookup('schedStartTimeField').setValue('');d.lookup('schedEndDateField').setValue('');d.lookup('schedEndTimeField').setValue('')}c.getView().setLoading(!1)}else {a.attachments=[];a.availableTemplates=null;c.fireViewEvent('save',a);b.set('attachmentsToAdd',null)}})}else {if(!IS_OFFLINE){a.attachments=[]}a.availableTemplates=null;c.fireViewEvent('save',a);b.set('attachmentsToAdd',null)}}else {c.getView().setLoading(!1)}})},onSubmitFwa:function(){var d=this,i=d.getViewModel(),a=i.get('selectedFWA'),c=a.get('schedStartDate'),e=a.get('schedEndDate'),m=Ext.first('#schedEndTimeField').getValue(),l=a.get('dateOrdered'),o=a.get('orderedBy'),k=a.get('dateRequired'),b=TS.app.settings,h=!1,f,g;if(!IS_OFFLINE){a.set('attachments',[])}data.availableTemplates=null;if(!c&&!e){Ext.each(a.hours().getRange(),function(a){f+=a.get('ovtHrs')+a.get('ovt2Hrs')+a.get('regHrs')+a.get('travelHrs')});Ext.each(a.units().getRange(),function(a){g+=a.get('quantity')});if(f>0||g>0){Ext.Msg.show({title:'Warning',message:b.fwaAbbrevLabel+'s with hours entered or unit quantities entered cannot be unscheduled.',buttons:Ext.Msg.OK,icon:Ext.Msg.WARNING});return !1}}if(!a.get('preparedByEmpId')){Ext.Msg.alert('Warning','Scheduled By is a required field.');return}if(!c||!e){Ext.Msg.alert('Warning',b.fwaAbbrevLabel+' Start Date/Time and End Date/Time are required fields.');return}if(a.workSchedAndPerf().getRange().length===0){Ext.Msg.alert('Warning','At least one(1) '+b.workCodeLabel+' entry is required.');return}if(a.hours().getRange().length===0){Ext.Msg.alert('Warning','An Employee Hours  entry is required on Submit.');return}else {Ext.each(a.hours().getRange(),function(a){if(!a.get('workCodeId')||!a.get('empId')){Ext.Msg.alert('Warning','Both an Employee and '+b.workCodeLabel+' selection required with each Employee Hour entry on Submit.');h=!0}})}if(h){return}d.getView().setLoading(!0,'Submitting FWA...');if(!c){a.set('schedStartDate',new Date('1/1/0001 12:00:00 AM'))}if(!e){a.set('schedEndDate',new Date('1/1/0001 12:00:00 AM'))}else {a.set('schedEndDate',m)}if(!l){a.set('dateOrdered',new Date('1/1/0001 12:00:00 AM'))}if(!k){a.set('dateRequired',new Date('1/1/0001 12:00:00 AM'))}if(a.get('lastSubmittedDate')<=new Date('Mon Jan 01 1 00:30:00 GMT-0600 (Central Standard Time)')){a.set('lastSubmittedDate',new Date('1/1/0001 12:00:00 AM'))}if(a.get('lastApprovedDate')<=new Date('Mon Jan 01 1 00:30:00 GMT-0600 (Central Standard Time)')){a.set('lastApprovedDate',new Date('1/1/0001 12:00:00 AM'))}if(c&&b.schedVisibleHoursStart.getTime()>c.getTime()){var n=Ext.Date.format(c,'g:i A'),j=Ext.Date.format(b.schedVisibleHoursStart,'g:i A');Ext.Msg.confirm('Warning','Start time ('+n+') is earlier than visible start time ('+j+') on calendar, do you wish to continue? ',function(a){if(a=='yes'){d.continueSubmit()}else {d.getView().setLoading(!1)}})}else {d.continueSubmit()}if(i.get('newFwa')){if(a.workSchedAndPerf().getRange().length===0){Ext.Msg.alert('Warning','At least one(1) '+b.workCodeLabel+' entry is required.');return}if(c&&e&&a.hours().getRange().length>0&&!a.get('scheduledCrewId')){Ext.Msg.alert('Warning','A '+b.crewLabel+' selection is required when start/end date & employee hours are entered.');return !1}}},continueSubmit:function(){var c=this,g=c.getViewModel(),b=g.get('selectedFWA'),a,d=b.get('schedStartDate'),f=b.get('schedEndDate'),e=TS.app.settings;if(d>f){Ext.Msg.alert('Warning',e.fwaAbbrevLabel+' start date/time must be earlier than end date/time.');c.getView().setLoading(!1);return}if(f<d){Ext.Msg.alert('Warning',e.fwaAbbrevLabel+' end date/time must be later than start date/time.');c.getView().setLoading(!1);return}a=b.getData(!0);if(a.loc){if(a.loc.latitude==''){a.loc.latitude=0}if(a.loc.longitude==''){a.loc.longitude=0}}a.expenses=a.expenses?Ext.Array.pluck(a.expenses,'data'):null;Ext.each(a.units,function(a){a.details=Ext.Array.pluck(a.details.getRange(),'data')});if(b.get('notes')){a.notes=Ext.Array.pluck(b.get('notes').getRange(),'data')}c.onFinishSubmit(a)},onFinishSubmit:function(c){var b=this,a=TS.app.settings;if(c.chiefSigReq&&!b.signatureExists(c.attachments,AttachmentType.EmpSignature)){Ext.GlobalEvents.fireEvent('Message:Code','fwaSubmitNoChiefSig');b.getView().setLoading(!1)}else {if(c.clientSigReq&&!b.signatureExists(c.attachments,AttachmentType.ClientSignature)){Ext.Msg.show({title:'Submit without '+a.clientLabel+' Approval?',message:'This '+a.fwaAbbrevLabel+' requires a '+a.clientLabel+' signature, but does not have one. Do you still want to submit?',buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,fn:Ext.bind(function(d){if(d==='yes'){b.handleFwaSubmission(a.username,a.empId,c)}else {b.getView().setLoading(!1)}},b)})}else {b.handleFwaSubmission(a.username,a.empId,c)}}},signatureExists:function(a,c){if(!a||a.length==0){return !1}var b=Ext.Array.findBy(a,function(b){return Ext.String.capitalize(b.attachmentType)==c});return !!b},handleFwaSubmission:function(e,f,a){var b=this,c=b.getViewModel(),d=c.get('selectedFWA'),g=c.getStore('fwalist');a.schedStartDate=TS.common.Util.getOutUTCDate(a.schedStartDate);a.schedEndDate=TS.common.Util.getOutUTCDate(a.schedEndDate);Ext.each(a.notes,function(b){b.createDate=TS.common.Util.getOutUTCDate(b.createDate);b.modDate=TS.common.Util.getOutUTCDate(b.modDate)});a.duration=a.duration*60;a.availableTemplates=null;TS.Util.onCheckPriorToEmployeeAssn(a,!1,a.scheduledCrewId,function(c){if(c){b.fireViewEvent('submit',a);d.set('attachmentsToAdd',null)}else {b.getView().setLoading(!1)}})},newFileLoaded:function(l,e,r){var c=this,g=c.getView(),n=c.getViewModel(),m=n.get('selectedFWA'),q=Ext.Date.format(new Date(),'time'),i=Ext.Date.format(new Date(),'Y-m-d'),o=TS.app.settings,f=c.getView().down('button[action=camera]'),p='Loading image data',d=l.value.replace(/C:\\fakepath\\/g,''),b=g.lookup('filePathField'),k=g.lookup('filenameField'),j=g.lookup('descriptionField'),h=d.split('.')[0],a=b.getValue();k.setValue(i+' '+h);j.setValue(i+' '+h);if(!a||a==''){b.setValue(d)}else {a=a.replace('*','').replace('"','').replace('/','').replace('\\','').replace('[','').replace(']','').replace(':','');a=a.replace(';','').replace('|','').replace('=','').replace('<','').replace('>','').replace('?','');Ext.each(m.get('attachments'),function(c){if(c.filename==a){b.setValue(d)}});if(a.indexOf('.jpg')===-1){a+='.jpg'}b.setValue(a)}if(Ext.Viewport.getOrientation()=='portrait'){f.getFileData(e,480,640)}else {if(Ext.Viewport.getOrientation()=='landscape'){f.getFileData(e,640,480)}else {f.getFileData(e,640,640)}}c.getView().lookup('loadPhoto').enable()},fileDataReceived:function(a){this.getView().down('#description').setData({description:'Image Loaded',imagesrc:a})},reverseStringReturnExtention:function(e){var b=e.split(''),a=b.reverse(),c=a.join(''),d=c.split('.')[0];b=d.split('');a=b.reverse();return a.join('')},onFileUploadChange:function(f,g){var a=this,c=a.reverseStringReturnExtention(g),j=a.lookup('descriptionField'),k=a.lookup('filenameField'),i=Ext.Date.format(new Date(),'Y-m-d'),m=f.el.down('input[type=file]').dom.files[0],e,b,d,h,n,o,l;if(f.initialConfig.iconCls=='x-fa fa-file-text'&&(c=='jpg'||c=='jpeg'||c=='png'||c=='zip')){Ext.Msg.alert('Warning','Not an acceptable document type.');return}b=g.replace(/C:\\fakepath\\/g,'');e=b.split('\\');b=e[e.length-1];d=b.replace('.'+c,'');h=a.getView().lookup('filePathField');l=a.getView().lookup('fileUploadField');h.setValue(b);k.setValue(i+' '+d);j.setValue(i+' '+d);if(f.initialConfig.iconCls=='x-fa fa-camera'){a.setImagePreview(m)}Ext.first('#loadDoc').enable()},setImagePreview:function(c){var e=this,f=e.lookup('fileUploadField'),d=TS.app.settings,a,b;a=e.lookup('imagePreview');if(c&&c.type.match('image.*')){b=new FileReader();b.onload=function(b){a.setSrc(b.target.result);d.myImage='<img src="'+a.getSrc()+'" />'};b.readAsDataURL(c);b.onloadend=function(b){var a=new Image();a.src=b.target.result;d.myImage=a};a.setHidden(!1)}},loadFwaDoc:function(p){var a=this,n=TS.app.settings,d=a.getView(),q=a.getViewModel(),c=d.lookup('filePathField').getValue().split('.'),b=d.lookup('filePathField').getValue(),k=c[c.length-1],i=a.lookup('descriptionField').getValue(),m=a.lookup('filenameField'),f=q.get('selectedFWA'),h=f.get('attachmentsToAdd')||[],t=f.get('attachmentCtDoc'),l=Ext.ComponentQuery.query('filefield')[0],o=l.el.down('input[type=file]').dom.files[0],e,r,j,s;if(c.indexOf('.')>-1){for(var g=0;g<c.length-1;g++){b+=c[g]+'.'}b=b.substring(0,b.length-1)}b=b.substring(0,b.length-1);a.getView().setLoading(!0,'Saving Document...');if(!i||!m){Ext.Msg.alert('FYI','Both Filename and Description are required fields');a.getView().setLoading(!1);return}e=Ext.create('TS.model.shared.Attachment',{attachmentType:AttachmentType.Document,attachedByEmpId:n.empId,dateAttached:new Date(),description:i,extension:k,filename:b,owningModelId:d.associatedRecordId,owningModelType:'Fwa'});a.convertFileToByteData(o,Ext.bind(function(a){j=Ext.create('TS.model.shared.AttachmentData',{attachmentItem:a});e.set('attachmentItem',j.get('attachmentItem'));h.push(e.getData());f.set('attachmentsToAdd',h);d.setLoading(!1)},a));a.onResetAttachmentCounts(AttachmentType.Document,!1);p.up('sheet').hide()},onResetAttachmentCounts:function(b,c){var f=this,a=f.getViewModel().get('selectedFWA'),d=a.get('attachmentCtDoc'),e=a.get('attachmentCtPhoto');if(b==AttachmentType.Photo){if(c){a.set('attachmentCtPhoto',e-1)}else {a.set('attachmentCtPhoto',e+1)}}else {if(b==AttachmentType.Document){if(c){a.set('attachmentCtDoc',d-1)}else {a.set('attachmentCtDoc',d+1)}}}},uploadFwaTemplate:function(h){var a=this,b=a.getView(),g=a.getViewModel(),f=g.get('selectedFWA'),d=f.get('fwaId'),e=b.lookup('templateGrid'),c=e.getSelections();Ext.each(c,function(c){a.getTemplateDocument(c,b,d)})},getTemplateDocument:function(a,h,c){var f=this,b=TS.app.settings,d=a.get('templateType'),g=(new Date()).getTimezoneOffset()/60,e;Document.GetDocument(null,b.username,b.empId,a.get('templateId'),a.get('templateApp'),c,d,'Y',g,function(g,j,i){if(i&&g.data){e={associatedId:c,attachedByEmpId:b.empId,attachmentType:'D',location:b.documentStorageLoc,fileExt:d=='H'?'html':'xlsx',fileName:a.get('filename'),description:a.get('description'),file:g.data,type:'FWA'};f.performTemplateUpload(e,h,a)}else {if(i&&!g.data){Ext.Msg.alert('Warning','No data returned for selected template.')}else {Ext.Msg.alert('Warning','No data returned for selected template.')}}},f,{autoHandle:!0})},performTemplateUpload:function(a,g,k){var h=this,m=h.getView(),f=m.lookup('templateGrid'),i=h.getViewModel(),d,j=i.get('selectedFWA'),c=Ext.create('TS.model.shared.Attachment',{owningModelType:a.type,owningModelId:a.associatedId,dateAttached:a.date||new Date(),attachedByEmpId:a.attachedByEmpId,attachmentType:a.attachmentType,location:a.location,extension:a.fileExt,filename:a.fileName,description:a.description}),b=i.get('selectedFWA'),e=b.get('attachmentsToAdd')||[],l=b.get('attachmentCtDoc');g.setLoading(!0);d=Ext.create('TS.model.shared.AttachmentData',{attachmentItem:a.file});c.set('attachmentItem',d.get('attachmentItem'));c.set('base64String',d.get('attachmentItem'));e.push(c.getData());b.set('attachmentsToAdd',e);g.setLoading(!1);f.deselect(k);j.dirty=!0;if(f.getSelectionCount()===0){Ext.first('window-templates').destroy();Ext.first('window-document').destroy()}b.set('attachmentCtDoc',l+1)},loadTemplates:function(k){var e=this,i=e.getViewModel(),b=i.get('selectedFWA'),c=b.get('fwaId'),f=TS.app.settings,d=Ext.create({xtype:'window-templates',fwa:b,viewModel:{parent:i},attType:'Document',location:f.documentStorageLoc,associatedRecordId:c,attachmentsList:{modelType:'FWA',modelId:c,includeItem:!0,attachmentType:AttachmentType.Document}}),j=d.lookup('templateGrid'),g=b.get('wbs1'),h=b.get('wbs2'),a;Document.GetTemplateList(null,f.username,'FWA',c,function(c){if(c&&c.success){a=new Ext.data.Store({model:'TS.model.shared.PrintTemplate',data:c.data});a.filterBy(function(a){return a.get('templateApp')==='FWA'},e);Ext.each(a.getRange(),function(b){var d=Ext.Date.format(new Date(),'Y-m-d h.i A'),a=d+' '+b.get('templateName'),e=a.toUpperCase().indexOf('LEM')!=-1;if(e){if(g){a+=' '+g}if(h){a+=' - '+h}}b.set('filename',a);b.set('description',d+' '+b.get('templateName'))});j.setStore(a);b.set('availableTemplates',a.data);Ext.Viewport.add(d);d.show()}},e,{autoHandle:!0})},checkExists:function(a,b){if(b in a){return a[b]}return null},convertToDegrees:function(a){var b=a[0].numerator,c=a[0].denominator,h=b/c,d=a[1].numerator,e=a[1].denominator,i=d/e,f=a[2].numerator,g=a[2].denominator,j=f/g;return h+i/60+j/3600},loadFwaPhoto:function(p){var a=this,n=TS.app.settings,d=a.getView(),q=a.getViewModel(),b=d.lookup('filePathField').getValue().split('.'),c=d.lookup('filePathField').getValue(),k=b[b.length-1],h=d.lookup('descriptionField').getValue(),m=a.lookup('filenameField'),j=q.get('selectedFWA'),g=j.get('attachmentsToAdd')||[],l=Ext.ComponentQuery.query('filefield')[0],o=l.el.down('input[type=file]').dom.files[0],e,r,i,s;if(b.indexOf('.')>-1){for(var f=0;f<b.length-1;f++){c+=b[f]+'.'}c=c.substring(0,c.length-1)}a.getView().setLoading(!0,'Saving Photo...');if(!h||!m){Ext.Msg.alert('FYI','Both Filename and Description are required fields');a.getView().setLoading(!1);return}e=Ext.create('TS.model.shared.Attachment',{attachmentType:AttachmentType.Photo,attachedByEmpId:n.empId,dateAttached:new Date(),description:h,extension:k,filename:c,owningModelId:d.associatedRecordId,owningModelType:'Fwa'});a.convertFileToByteData(o,Ext.bind(function(a){i=Ext.create('TS.model.shared.AttachmentData',{attachmentItem:a});e.set('attachmentItem',i.get('attachmentItem'));g.push(e.getData());j.set('attachmentsToAdd',g);d.setLoading(!1)},a));a.onResetAttachmentCounts(AttachmentType.Photo,!1);p.up('sheet').hide()},onEditMenuTap:function(h){var e=this,g=e.getView(),c=e.getViewModel(),a=c.get('selectedFWA'),b=TS.app.settings,f=g.up('tabpanel').add(Ext.create({xtype:'fwa-editmenu',viewModel:{}})),d;if(a.get('attachmentCtPhoto')>0){Ext.first('#fwaPhotoButton').setText('Photo ('+a.get('attachmentCtPhoto')+')')}if(a.get('attachmentCtDoc')>0){Ext.first('#fwaDocButton').setText('Doc ('+a.get('attachmentCtDoc')+')')}if(a.get('recurrenceConfig')){d=a.get('recurrenceDatesInRange')[a.get('recurrenceDatesInRange').length-1];if(a.get('lastSubmittedDate')>a.get('lastApprovedDate')&&a.get('fwaApprovers').indexOf(b.empId)!==-1&&(new Date()<new Date(d)||a.get('fwaStatusId')==FwaStatus.Submitted)){Ext.first('#approveFwaButton').setDisabled(!1);if(!a.get('fwaApproversCanModify')){Ext.first('#fwaCopyButton').setDisabled(!0);Ext.first('#fwaPhotoButton').setDisabled(!0);Ext.first('#fwaCreateButton').setDisabled(!0)}}else {if(a.get('fwaStatusId')==FwaStatus.Submitted&&a.get('fwaApprovers').indexOf(b.empId)!==-1){Ext.first('#approveFwaButton').setDisabled(!1);if(!a.get('fwaApproversCanModify')){Ext.first('#fwaCopyButton').setDisabled(!0);Ext.first('#fwaPhotoButton').setDisabled(!0);Ext.first('#fwaCreateButton').setDisabled(!0)}}}}else {if(a.get('fwaStatusId')==FwaStatus.Submitted&&a.get('fwaApprovers').indexOf(b.empId)!==-1){Ext.first('#approveFwaButton').setDisabled(!1);if(!a.get('fwaApproversCanModify')){Ext.first('#fwaCopyButton').setDisabled(!0);Ext.first('#fwaPhotoButton').setDisabled(!0);Ext.first('#fwaCreateButton').setDisabled(!0)}}}if(b.fwaCanModify=='N'||a.get('fwaApprovers').indexOf(b.empId)!==-1&&!a.get('fwaApproversCanModify')){Ext.first('#fwaCopyButton').setDisabled(!0);Ext.first('#fwaCreateButton').setDisabled(!0)}c.set('isNewOrHideCopy',c.get('newFwa')||c.get('hideFwaCopyButton'));f.show()},onEditMenuOfflineTap:function(h){var c=this,g=c.getView(),f=c.getViewModel(),a=f.get('selectedFWA'),d=TS.app.settings,e=g.up('tabpanel').add(Ext.create({xtype:'fwa-editmenu-offline',viewModel:{}})),b;if(a.get('attachmentCtPhoto')>0){Ext.first('#fwaPhotoButton').setText('Photo ('+a.get('attachmentCtPhoto')+')')}if(a.get('attachmentCtDoc')>0){Ext.first('#fwaDocButton').setText('Doc ('+a.get('attachmentCtDoc')+')')}if(a.get('recurrenceConfig')){b=a.get('recurrenceDatesInRange')[a.get('recurrenceDatesInRange').length-1];if(a.get('lastSubmittedDate')>a.get('lastApprovedDate')&&a.get('fwaApprovers').indexOf(d.empId)!==-1&&(new Date()<new Date(b)||a.get('fwaStatusId')==FwaStatus.Submitted)){if(!a.get('fwaApproversCanModify')){Ext.first('#fwaCopyButton').setDisabled(!0);Ext.first('#fwaPhotoButton').setDisabled(!0)}}}e.show()},refreshAddressValues:function(c){var a=this.getViewModel().get('selectedFWA'),b=this.getView();if(a){b.lookup('locLatitude').setValue(a.getLoc().get('latitude'));b.lookup('locLongitude').setValue(a.getLoc().get('longitude'))}},onMapLocationTap:function(c,d){var b=this.getViewModel().get('selectedFWA'),a;a=Ext.create({xtype:'fwa-map',viewModel:{parent:this.getViewModel()},dataRecord:b});Ext.Viewport.add(a);a.show()},doSaveSignature:function(m){var d=this,e=d.getView(),j=e.down('ts-draw'),h=TS.app.settings,b=j.toDataURL(),k=new Blob([b],{type:'image/png'}),i=b.split('base64,')[1],f=window.atob(i),l=f.length,g=[],c;for(var a=0;a<l;a++){g[a]=f.charCodeAt(a)}c={type:'Fwa',location:h.imageStorageLoc,associatedId:e.associatedRecordId,attachedByEmpId:h.empId,attachmentType:e.attType,fileExt:'png',fileName:'signature_'+Ext.data.identifier.Uuid.Global.generate(),description:'Approval Signature',file:k,bytesArray:g};d.performRecordUpload(c,function(){m.up('sheet').hide();d.afterSignatureUpload(c.attachmentType,b)})},performRecordUpload:function(a,g){var d=this,h=d.getView(),i=d.getViewModel(),c=i.get('selectedFWA'),f=c.get('attachmentsToAdd')||[],e,j=TS.app.settings,b=Ext.create('TS.model.shared.Attachment',{owningModelType:a.type,owningModelId:a.associatedId,attachedByEmpId:a.attachedByEmpId,dateAttached:a.date||new Date(),attachmentType:a.attachmentType,location:a.location,extension:a.fileExt,filename:a.fileName,description:a.description});if(a.attachmentType==AttachmentType.ClientSignature){if(c.get('clientApprovalImageId')){b.set('attachmentId',c.get('clientApprovalImageId'))}}else {if(a.attachmentType==AttachmentType.EmpSignature){if(c.get('chiefApprovalImageId')){b.set('attachmentId',c.get('chiefApprovalImageId'))}}}h.setLoading(!0);d.convertFileToByteData(a.file,Ext.bind(function(d){var i=a.attachmentType.charAt(0)==AttachmentType.Document?'Document':a.attachmentType.charAt(0)==AttachmentType.Photo?'Photo':'Signature';if(i=='Signature'){e=Ext.create('TS.model.shared.AttachmentData',{attachmentItem:a.bytesArray,attachmentId:b.get('attachmentId')})}else {e=Ext.create('TS.model.shared.AttachmentData',{attachmentItem:d,attachmentId:b.get('attachmentId')})}b.set('attachmentItem',e.get('attachmentItem'));f.push(b.getData());c.set('attachmentsToAdd',f);h.setLoading(!1);if(g){g()}},d))},afterSignatureUpload:function(f,b){var e=this,h=e.getView(),c=e.getViewModel().get('selectedFWA'),g=new Date(),a=f===AttachmentType.ClientSignature?'client':'chief',d=Ext.first('#'+a+'ApprovalImage');c.set(a+'ApprovalDate',Ext.Date.format(new Date(g),'m/d/y h:i A'));c.set(a+'ApprovalImage',b);d.setSrc(b);d.show()},convertFileToByteData:function(b,c){var a=new FileReader();a.onload=function(a){return function(g){var f=new Uint8Array(g.target.result),e=[];for(var d=0;d<f.length;d++){e[d]=f[d]}c(e)}}(b);a.readAsArrayBuffer(b)},onProjectSearchChange:function(c,a){var d=c.up('tree-list'),e=d.getViewModel(),b=e.getStore('navItems');if(a===''){b.clearFilter()}else {b.clearFilter();b.filterBy(function(b){if(b.get('model')=='Wbs2'||b.get('model')=='Wbs3'){return !0}if(b.get('text').toLowerCase().match(a.toLowerCase())||b.get('id').toLowerCase().match(a.toLowerCase())){return !0}})}},sendEmail:function(h){var b=this,j=b.getView(),g=b.lookup('emailForm').getForm(),i=g.getRecord(),a=b.lookup('emailForm').getValues(),f=TS.app.settings,c,e,d=[];c=Ext.first('#attachList');if(c.getSelectionCount()>0){e=c.getSelections();Ext.each(e,function(a){d.push(a.data)})}b.getView().setLoading(!0,'Sending Email');a.app=b.getView().appType;a.empId=f.empId;a.modelId=b.getView().modelId;a.attachments=d;a.keepAfterSent=!1;a.attachForm=a.attachForm=='true'?!0:!1;if(g.isValid()&&(a.body&&a.to&&a.subject)){Email.SendEmail(null,f.username,a,function(b,a,c){h.up('sheet').hide();Ext.GlobalEvents.fireEvent('Message:Code','sendEmailSuccess')},b,{autoHandle:!0,failure:function(){b.getView().setLoading(!1)}.bind(b)})}else {Ext.GlobalEvents.fireEvent('Message:Code','sendEmailMissingFields');b.getView().setLoading(!1)}},toggleWork:function(e){var b=this,a=b.getViewModel().get('selectedFWA'),d=TS.app.settings,c;if(a.get('fwaStatusId')!==FwaStatus.InProgress){Fwa.StartWork(null,d.username,a.get('fwaId'),Ext.bind(b.handleToggleWorkResponse,b));c=FwaStatus.InProgress}else {Fwa.EndWork(null,d.username,a.get('fwaId'),Ext.bind(b.handleToggleWorkResponse,b));c=FwaStatus.Saved}a.set('fwaStatusId',c);e.setText(a.get('fwaStatusId')!==FwaStatus.InProgress?'Start':'Stop');e.setIconCls(a.get('fwaStatusId')!==FwaStatus.InProgress?'x-fa fa-hourglass-start':'x-fa fa-hourglass-end')},handleToggleWorkResponse:function(a,b){if(a&&a.success){}else {if(a){Ext.GlobalEvents.fireEvent('Error',a)}}},onExpWbs1Change:function(d,b,f,g){var a=Ext.first('#wbs1NameField'),c=d.getStore().findRecord('id',b.get('id')),e=this;a.setValue(c.get('name'));e.setAccount()},setAccount:function(){var d=this,m=TS.app.settings,i=d.lookup('categoryEditField'),k=i.getStore(),e=k.findRecord('category',i.getValue()),h=d.lookup('wbs1combo'),l=h.getStore(),a=d.lookup('accountField'),g=d.lookup('accountNameField'),b=a.getStore(),f=d.lookup('billableField'),j,c;if(h.getValue()&&e){j=l.findRecord('id',h.getValue()).get('chargeType');b.clearFilter();if(j=='R'){if(f.getChecked()){b.filter('useOnRegularProjects',!0);a.setValue(e.get('defaultRegularBillableAccount'));c=b.findRecord('account',a.getValue());g.setValue(c.get('accountName'))}else {b.filter('useOnRegularProjects',!1);a.setValue(e.get('defaultRegularNonbillableAccount'));c=b.findRecord('account',a.getValue());g.setValue(c.get('accountName'))}f.setHidden(!m.exDisplayBillable)}else {b.filter('useOnRegularProjects',!1);a.setValue(e.get('defaultNonRegularAccount'));f.setChecked(!1);f.setHidden(!0);c=b.findRecord('account',a.getValue());g.setValue(c.get('accountName'))}}},onExpCategoryChange:function(l,h,j,k){if(!h){return}var b=this,d=Ext.getStore('ExpCategory').getById(h.get('category')),a=b.lookup('reasonField'),c=b.lookup('otherField'),g=b.lookup('milesField'),e=b.lookup('amountPerMileField'),i=b.lookup('billableField'),f;a.setHidden(!0);c.setHidden(!0);g.setHidden(!0);e.setHidden(!0);if(d){f=d.get('detailType');switch(f){case 'M':a.setHidden(!1);a.setLabel('Business reason</br>for expense');c.setHidden(!1);c.setLabel('Travel From/To');g.setHidden(!1);e.setHidden(!1);break;case 'B':a.setHidden(!1);a.setLabel('Business reason</br>for expense');c.setHidden(!1);c.setLabel('Name of</br>each person');break;case 'G':a.setHidden(!1);a.setLabel('Business reason</br>for expense');break;}i.setValue(d.get('billByDefault'))}b.setAccount()},onExpWbsChange:function(b,d,h,j){var e=this,i=TS.app.settings,c=e.getView(),f=e.getViewModel(),a=f.get('selectedEXP'),k=a&&a.get('wbs1')?a.get('wbs1'):c.lookup('wbs1combo')&&c.lookup('wbs1combo').getSelection()?c.lookup('wbs1combo').getSelection().get('id'):'',l=a&&a.get('wbs2')?a.get('wbs2'):c.lookup('wbs2combo')&&c.lookup('wbs2combo').getSelection()?c.lookup('wbs2combo').getSelection().get('id'):'',m=a?a.get('wbs3'):'',g=Ext.first('#fwawbs1id').getSelection();if(b.getName()=='wbs2'){if(d){b.getParent().innerItems[7].setValue(b.getStore().findRecord('id',d.get('id')).get('name'))}}else {if(b.getName()=='wbs3'){if(d){b.getParent().innerItems[9].setValue(b.getStore().findRecord('id',d.get('id')).get('name'))}}}},onWbsChange:function(g,m,n,p){if(IS_OFFLINE){return}var b=this,h=TS.app.settings,k=h.empGroupId,c=b.getView(),d=b.getViewModel(),a=d.get('selectedFWA'),i=a&&a.get('wbs1')?a.get('wbs1'):c.lookup('wbs1combo')&&c.lookup('wbs1combo').getSelection()?c.lookup('wbs1combo').getSelection().get('id'):'',e=a&&a.get('wbs2')?a.get('wbs2'):c.lookup('wbs2combo')&&c.lookup('wbs2combo').getSelection()?c.lookup('wbs2combo').getSelection().get('id'):'',q=a?a.get('wbs3'):'',f=Ext.first('#fwawbs1id').getSelection(),j=b.getViewModel().get('isScheduler'),o=[],l=[];if(f&&a){a.set('clientId',f.get('clientId'))}if(g.modelName=='Wbs1'&&e==''&&i!=''){if(d.get('newFwa')&&!d.get('selectedFWA').get('wbs1')){b.onGetFwaInfoForWbs()}}if(g.modelName=='Wbs2'&&e!=''){if(d.get('newFwa')){b.onGetFwaInfoForWbs()}}if(a&&e==''){b.getFwaUnitsByWbs()}},onGetFwaInfoForWbs:function(){var d=this,i=TS.app.settings,h=i.empGroupId,m=d.getViewModel(),a=m.get('selectedFWA'),b=d.getView(),j=a&&a.get('wbs1')?a.get('wbs1'):b.lookup('wbs1combo')&&b.lookup('wbs1combo').getSelection()?b.lookup('wbs1combo').getSelection().get('id'):'',k=a&&a.get('wbs2')?a.get('wbs2'):b.lookup('wbs2combo')&&b.lookup('wbs2combo').getSelection()?b.lookup('wbs2combo').getSelection().get('id'):'',l=a&&a.get('wbs3')?a.get('wbs3'):b.lookup('wbs3combo')&&b.lookup('wbs3combo').getSelection()?b.lookup('wbs3combo').getSelection().get('id'):'',n=Ext.getStore('UnitCode'),f=[],o=[],g=a.units().data,e=a.workSchedAndPerf().data,c=Ext.create('TS.model.fwa.FwaInfo');Fwa.GetFwaInfoForWbs(null,h,j||'^',k||'^',l||'^',function(b){if(b&&b.success){c=b.data;f=c.fieldInfo.split('^');Ext.each(f,function(c){c.trim();if(c.indexOf('fwaName')==0){a.set('fwaName',c.split('=')[1])}if(c.indexOf('fwaNumber')==0&&a.get('fwaNum')==''){a.set('fwaNum',c.split('=')[1])}if(c.indexOf('contactInfo')==0){a.set('contactInfo',c.split('=')[1])}if(c.indexOf('isContractWork')==0){a.set('isContractWork',c.split('=')[1]!=='N')}if(c.indexOf('wbsLocked')==0){a.set('wbsLocked',c.split('=')[1]!=='N')}if(c.indexOf('udfT1')==0){a.set('udf_t1',c.split('=')[1])}if(c.indexOf('clientSigReq')==0){a.set('clientSigReq',c.split('=')[1]!=='N')}if(c.indexOf('chiefSigReq')==0){a.set('chiefSigReq',c.split('=')[1]!=='N')}if(c.indexOf('loc.address1')==0){a.set('address1',c.split('=')[1]);Ext.first('#address1Field').setValue(a.get('address1'))}if(c.indexOf('loc.address2')==0){a.set('address2',c.split('=')[1]);Ext.first('#address2Field').setValue(a.get('address2'))}if(c.indexOf('loc.city')==0){a.set('city',c.split('=')[1]);Ext.first('#cityField').setValue(a.get('city'))}if(c.indexOf('loc.state')==0){a.set('state',c.split('=')[1]);Ext.first('#stateField').setValue(a.get('state'))}if(c.indexOf('loc.zip')==0){a.set('zip',c.split('=')[1]);Ext.first('#zipField').setValue(a.get('zip'))}if(c.indexOf('loc.latitude')==0){a.set('latitude',c.split('=')[1]);Ext.first('#latitudeField').setValue(a.get('latitude'))}if(c.indexOf('loc.longitude')==0){a.set('longitude',c.split('=')[1]);Ext.first('#longitudeField').setValue(a.get('longitude'))}});e.clear();Ext.each(c.workInfo,function(a){e.add(Ext.create('TS.model.fwa.Work',{workCodeId:a.workCodeId,workCodeAbbrev:a.workCodeAbbrev,scheduledHours:a.scheduledHours,actualHours:a.actualHours,comments:a.comments,picRequired:a.picRequired,pctComplete:a.pctComplete,fwaInfo:!0}))});g.clear();Ext.each(c.unitInfo,function(a){g.add(Ext.create('TS.model.fwa.Unit',{unitCodeId:a.unitCodeId,quantity:a.quantity,equipmentId:a.equipmentId,equipmentName:a.equipmentName,comments:a.comments,details:a.details,unitSeq:a.unitSeq,fwaInfo:!0}))})}},d,{autoHandle:!0})},getFwaUnitsByWbs:function(){var e=this,j=e.getViewModel(),k=Ext.first('#unitCodeGrid'),i=TS.app.settings,a=j.get('selectedFWA'),g=Ext.getStore('UnitCode'),b=e.lookup('wbs1combo').getValue(),c=e.lookup('wbs2combo').getValue(),d=e.lookup('wbs3combo').getValue(),f,l,m,h=[];b=b?b:'^';c=c?c:'^';d=d?d:'^';if(a.units().getRange().length==0){return}f=a.units()&&a.units().length!=0?a.units().getRange():[];if(f.length!=0){Ext.each(f,function(a){h.push({unitCodeId:a.get('unitCodeId'),unitSeq:a.get('unitSeq'),quantity:a.get('quantity'),equipmentId:a.get('equipmentId'),equipmentName:a.get('equipmentName'),comments:a.get('comments'),details:Ext.Array.pluck(a.get('details').getRange(),'data')})})}UnitCode.GetFwaUnitsByWbs(null,i.username,a.get('fwaId'),b,c,d,h,function(e){if(e&&e.success){if(e.message&&e.message.mdType&&e.message.mdType=='warning'){Ext.Msg.alert('Warning',e.message.mdBody);a.units().data.removeAll();Ext.each(e.data,function(b){a.units().data.add(Ext.create('TS.model.fwa.Unit',{unitCodeId:b.unitCodeId,quantity:b.quantity,equipmentId:b.equipmentId,equipmentName:b.equipmentName,comments:b.comments,details:b.details}))})}g.getProxy().setExtraParams({wbs1:b,wbs2:c,wbs3:d,includeInactive:!0});g.reload();var f=Ext.create('Ext.data.Store',{model:'TS.model.fwa.Unit'});f.loadData(e.data)}else {if(!e.success){Ext.GlobalEvents.fireEvent('Error',e)}}}.bind(e))},onResetDates:function(){var d=this,c=TS.app.settings,e=d.getViewModel(),a=Ext.first('#schedStartDateField'),b=Ext.first('#schedEndDateField');Ext.Msg.confirm('Please Confirm','This will clear Start/End Dates & Times and un-schedule the '+c.fwaAbbrevLabel+'. Do you wish to continue?',function(c){if(c==='yes'){a.setValue('');b.setValue('')}})},onResetOrderedDates:function(){var e=this,f=e.getViewModel(),a=f.get('selectedFWA'),c=Ext.first('#resetOrderedDatesBtn'),d=Ext.first('#orderedByField'),b=Ext.first('#dateRequiredField');a.set('dateOrdered','');a.set('dateRequired','');a.set('orderedBy','');d.setValue('');c.setValue('');b.setValue('')},onStartDateChange:function(m,k,l){var i=this,e=i.getViewModel(),c=e?e.get('selectedFWA'):null,f,d,b=Ext.first('#schedStartDateField'),h=Ext.first('#schedEndDateField'),j=Ext.first('#schedStartTimeField'),g=(new Date()).toTimeString(),a;if(b&&e.get('newFwa')){e.set('dateHeader',b.getValue());h.setValue(b.getValue())}if(c){c.set('schedStartDate',new Date(Ext.Date.format(b.getValue(),'n/j/Y')+' '+Ext.Date.format(b.getValue(),'g:i A')));f=c.get('schedStartDate');d=c.get('schedEndDate');if(f){if(d){a=d.toDateString()}else {a=f.toDateString()}if(d){g=d.toTimeString()}else {a=new Date(a+' '+g);a=Ext.Date.add(a,Ext.Date.HOUR,1);c.set('schedEndDate',new Date(a))}}}},onEndDateChange:function(e,c,d){var b=Ext.first('#schedStartDateField'),a=Ext.first('#schedEndDateField');if(a.getValue()<b.getValue()&&c){Ext.Msg.alert('Warning','End Date must be greater than or equal to Start Date');a.setValue()}},onWorkCodeSelection:function(d){var e=this,c=d.up('sheet').down('grid'),b=c.findPlugin('grideditable'),a=e.getViewModel().get('selectedWSP');b.startEdit(a)},onHoursSelection:function(d){var e=this,c=d.up('sheet').down('grid'),b=c.findPlugin('grideditable'),a=e.getViewModel().get('selectedHRS'),g=TS.app.settings,f=Ext.first('#employeeHours'),h=a.get('empId');b.startEdit(a)},searchPrior:function(n){var f=this,k=f.getViewModel(),b=f.getView(),m=TS.app.settings,j=Ext.first('#workCodeList'),d=k.get('selectedFWA'),a='',c='',h=b.lookup('searchForm'),i=b.lookup('searchResultSet'),g=b.lookup('fwaResultList'),e=g.getStore(),l=b.lookup('checkBoxFieldset');b.setLoading(!0);Ext.each(j.getSelections(),function(a){c+=a.get('workCodeAbbrev')+','});a+=Ext.first('#clientSearch').getValue()?'^ClientID='+d.get('clientId'):'';a+=Ext.first('#wbs1Search').getValue()?'^WBS1='+Ext.first('#wbs1Search').getValue():'';a+=Ext.first('#wbs2Search').getValue()?'^WBS2='+Ext.first('#wbs2Search').getValue():'';a+=Ext.first('#wbs3Search').getValue()?'^WBS3='+Ext.first('#wbs3Search').getValue():'';a+=Ext.first('#startDateSearch').getValue()?'^StartDate='+Ext.Date.format(Ext.first('#startDateSearch').getValue(),'Y-m-d'):'';a+=Ext.first('#endDateSearch').getValue()?'^EndDate='+Ext.Date.format(Ext.first('#endDateSearch').getValue(),'Y-m-d'):'';a+=c?'^WC='+c:'';a=a.substr(1);e.getProxy().setExtraParams({fwaId:d.get('fwaId')?d.get('fwaId'):'',searchParameters:a});e.load();h.setHidden(!0);Ext.first('#clearSelectionButton').setHidden(!0);i.setHidden(!1);Ext.first('#searchButton').setHidden(!0);Ext.first('#resetSearchButton').setHidden(!1);Ext.first('#viewButton').setHidden(!1);b.setLoading(!1)},resetSearch:function(){var d=this,a=d.getView(),b=a.lookup('searchForm'),c=a.lookup('searchResultSet'),e=a.lookup('checkBoxFieldset');b.setHidden(!1);Ext.first('#clearSelectionButton').setHidden(!1);c.setHidden(!0);Ext.first('#searchButton').setHidden(!1);Ext.first('#resetSearchButton').setHidden(!0);Ext.first('#viewButton').setHidden(!0)},viewSelectedResult:function(){var d=this,g=d.getView(),e=d.getViewModel(),f=g.lookup('fwaResultList'),b=f.getSelections()[0],c=e.getParent().getStore('viewfwa'),a=Ext.create({xtype:'fwa-view',viewModel:{parent:e.getParent(),fwa:b}});c.getProxy().setExtraParams({id:b.get('fwaId')});a.setController('fwa-edit');c.load();a.down('titlebar[docked=top]').setTitle('Selected '+TS.app.settings.fwaAbbrevLabel);Ext.Viewport.add(a);a.show()},onManageNotesTapView:function(){var e=this,b=e.getViewModel(),d=b.get('fwa'),c=TS.app.settings,a=Ext.create({xtype:'ts-fwanotes',viewModel:{parent:b}});Ext.each(d.notes().getRange(),function(a){a.set('canEdit',a.get('empId')==c.empId)});Ext.Viewport.add(a);a.show()},onManageWorkCodesTapView:function(){var d=this,a=d.getViewModel(),c=a.get('selectedFWA'),b=Ext.create({xtype:'ts-fwaworkcodes',viewModel:{parent:a}});a.set('fwa',c);Ext.Viewport.add(b);b.show()},onManageUnitsTapView:function(){var d=this,a=d.getViewModel(),c=a.get('selectedFWA'),e=Ext.first('app-ts'),b=Ext.create({xtype:'ts-fwaunits',viewModel:{parent:a}});a.set('fwa',c);Ext.Viewport.add(b);b.show()},onManageHoursTapView:function(){var d=this,a=d.getViewModel(),c=a.get('selectedFWA'),e=Ext.first('app-fwa'),b=Ext.create({xtype:'ts-fwahours',viewModel:{parent:a}});a.set('fwa',c);Ext.Viewport.add(b);b.show()},onManageExpensesTapView:function(){var d=this,a=d.getViewModel(),c=a.get('selectedFWA'),e=Ext.first('app-fwa'),b=Ext.create({xtype:'ts-fwaexpenses',viewModel:{parent:a}});a.set('fwa',c);Ext.Viewport.add(b);b.show()},onActionLookup:function(){var b=this,c=b.getViewModel(),e=c.get('selectedFWA'),d=Ext.first('app-fwa'),a=Ext.create({xtype:'fwa-nonfieldactions',viewModel:{parent:b.getViewModel()}});Ext.Viewport.add(a);a.show()},onCrewPhoneClick:function(m){var f=this,l=Ext.first('app-fwa'),d=Ext.create({xtype:'fwa-crewphones',viewModel:{parent:f.getViewModel()}}),b=f.getViewModel(),k=b.get('selectedFWA'),i=k.get('scheduledCrewId'),h=Ext.getStore('Employees').getRange(),j=Ext.getStore('AllCrews').getById(i),g=j.getData().crewMembers.getRange(),e='',c=[],a;b.set('crewPhoneList',e);Ext.each(g,function(b){Ext.each(h,function(c){if(c.getId()==b.getId()){a=c.get('empName')}});c.push({name:a,phone:b.get('crewMemberPhone'),email:b.get('crewMemberEmail')});e+='<div>'+a+'  '+b.get('crewMemberPhone')+'  '+b.get('crewMemberEmail')+'</div>'});b.set('crewPhoneList',c);Ext.Viewport.add(d);d.show()},doOpenFwa:function(i){var c=this,e=c.getViewModel(),d=c.getView(),g=e.get('fwa').id,a=e.getParent(),h=a.getStore('fwalist'),f=TS.app.settings,b;d.setLoading(!0);Fwa.Get(null,f.username,g,function(e){var c=e.data;b=TS.model.fwa.Fwa.createWithAssociations(c);a.set('newFwa',!0);h.add(b);a.set('selectedFWA',b);d.setLoading(!1);i.up('sheet').hide();Ext.first('fwa-search').hide()},c,{autoHandle:!0})},doCopyFwa:function(j){var e=this,g=e.getViewModel(),f=e.getView(),h=g.get('selectedFWA').get('fwaId'),c=g.getParent(),i=c.getStore('fwalist'),d=TS.app.settings,a,b;f.setLoading(!0);Fwa.Copy(null,d.username,h,function(g){var e=g.data;e.fwaId='';a=TS.model.fwa.Fwa.createWithAssociations(e);b=a.getLoc();if(b.get('latitude')==0){b.set('latitude','')}if(b.get('longitude')==0){b.set('longitude','')}if(Ext.Date.format(new Date(a.get('dateOrdered')),'m/d/Y')=='01/01/0001'){a.set('dateOrdered','')}if(Ext.Date.format(new Date(a.get('dateRequired')),'m/d/Y')=='01/01/0001'){a.set('dateRequired','')}a.set('schedStartDate',new Date());c.set('newFwa',!0);i.add(a);c.set('selectedFWA',a);if(d.fwaAutoNumbering){Ext.first('fwa-edit').lookup('fwaNumField').setLabel(d.fwaAbbrevLabel+' # (auto-number)')}f.setLoading(!1);j.up('sheet').hide();Ext.first('fwa-search').hide()},e,{autoHandle:!0})},onClearSelections:function(a){Ext.first('#workCodeList').deselectAll()},onClearSearchDates:function(a){Ext.first('#startDateSearch').setValue();Ext.first('#endDateSearch').setValue()},viewAllClientSignatures:function(){var h=this,c=h.getViewModel(),a=c.getStore('signaturelist'),f=TS.app.settings,g=c.get('selectedFWA'),e=[],d,b,i;if(!a){a=Ext.create('Ext.data.Store',{model:'TS.model.shared.Attachment',sorters:[{property:'dateAttached',direction:'ASC'}]})}Ext.each(g.get('attachments'),function(a){if(a.attachmentType==AttachmentType.ClientSignature&&a.owningModelType=='Fwa'){d=Ext.create('TS.model.shared.Attachment',{attachmentId:a.attachmentId,dateAttached:a.dateAttached,attachmentItem:'data:application/octet-stream;base64,'+a.attachmentItem,attachedByEmpId:a.attachedByEmpId});e.push(d)}});a.setRemoteSort(!1);a.loadRawData(e);b=Ext.create({xtype:'fwa-signaturelist',viewModel:{parent:c}});b.lookup('signatureList').setStore(a);b.lookup('signatureListTitle').setTitle(f.clientLabel+' Signature List');a.sort('dateAttached','DESC');Ext.Viewport.add(b);b.show()},viewAllChiefSignatures:function(){var h=this,c=h.getViewModel(),b=c.getStore('signaturelist'),f=TS.app.settings,g=c.get('selectedFWA'),e=[],d,a,i;Ext.each(g.get('attachments'),function(a){if(a.attachmentType==AttachmentType.EmpSignature&&a.owningModelType=='Fwa'){d=Ext.create('TS.model.shared.Attachment',{attachmentId:a.attachmentId,dateAttached:a.dateAttached,attachmentItem:'data:application/octet-stream;base64,'+a.attachmentItem,attachedByEmpId:a.attachedByEmpId});e.push(d)}});b.setRemoteSort(!1);b.loadRawData(e);a=Ext.create({xtype:'fwa-signaturelist',viewModel:{parent:c}});a.lookup('signatureListTitle').setTitle(f.crewChiefLabel+' Signature List');b.sort('dateAttached','DESC');Ext.Viewport.add(a);a.show()},onDeleteClientSignatureClick:function(){var h=this,e=h.getView(),c=e.lookup('clientApprovalImage').config.attachmentId,j=h.getViewModel(),a=j.get('selectedFWA'),i=TS.app.settings,f=a.get('attachmentsToDelete')||[],b=a.get('attachments').filter(function(a){return a.attachmentType==AttachmentType.ClientSignature&&a.owningModelType=='Fwa'}),d,g;Ext.each(b,function(a){if(a.attachmentId==c){d=a;return !1}});g=b.indexOf(d);Ext.Msg.confirm('Signature Delete','Are you sure you want to delete the '+i.clientLabel+' signature?',function(h){if(h=='yes'){f.push(c);b.splice(g,1);Ext.Array.remove(a.get('attachments'),d);if(b.length>0){e.lookup('clientApprovalImage').config.attachmentId=b[0].attachmentId;a.set('clientApprovalDate',b[0].dateAttached);a.set('clientApprovalImage',Ext.util.Base64.decode(b[0].attachmentItem));a.set('clientApprovalImageId',b[0].attachmentId);Ext.first('#clientApprovalImage').setSrc(a.get('clientApprovalImage'));Ext.first('#clientApprovalImage').setHidden(!1)}else {e.lookup('clientApprovalImage').config.attachmentId='';a.set('clientApprovalDate','');a.set('clientApprovalImage','');a.set('clientApprovalImageId','');Ext.first('#clientApprovalImage').setSrc('');Ext.first('#clientApprovalImage').setHidden(!0)}Ext.first('#deleteClientSignatureButton').setHidden(b.length==0);Ext.first('#viewAllClientSignatureButton').setHidden(b.length<=1);Ext.first('#clientApprovalButton').setWidth(b.length<=1?'100%':'75%');if(!a.get('attachmentsToDelete')){a.set('attachmentsToDelete',f)}else {a.get('attachmentsToDelete').push(c)}}})},onDeleteChiefSignatureClick:function(){var h=this,e=h.getView(),c=e.lookup('chiefApprovalImage').config.attachmentId,j=h.getViewModel(),a=j.get('selectedFWA'),i=TS.app.settings,f=a.get('attachmentsToDelete')||[],b=a.get('attachments').filter(function(a){return a.attachmentType==AttachmentType.EmpSignature&&a.owningModelType=='Fwa'}),d,g;Ext.each(b,function(a){if(a.attachmentId==c){d=a;return !1}});g=b.indexOf(d);Ext.Msg.confirm('Signature Delete','Are you sure you want to delete the '+i.crewChiefLabel+' signature?',function(h){if(h=='yes'){f.push(c);b.splice(g,1);Ext.Array.remove(a.get('attachments'),d);if(b.length>0){e.lookup('chiefApprovalImage').config.attachmentId=b[0].attachmentId;a.set('chiefApprovalDate',b[0].dateAttached);a.set('chiefApprovalImage','data:application/octet-stream;base64,'+b[0].attachmentItem);a.set('chiefApprovalImageId',b[0].attachmentId);Ext.first('#chiefApprovalImage').setSrc(a.get('chiefApprovalImage'));Ext.first('#chiefApprovalImage').setHidden(!1)}else {e.lookup('chiefApprovalImage').config.attachmentId='';a.set('chiefApprovalDate','');a.set('chiefApprovalImage','');a.set('chiefApprovalImageId','');Ext.first('#chiefApprovalImage').setSrc('');Ext.first('#chiefApprovalImage').setHidden(!0)}Ext.first('#deleteClientSignatureButton').setHidden(b.length==0);Ext.first('#viewAllClientSignatureButton').setHidden(b.length<=1);Ext.first('#chiefApprovalButton').setWidth(b.length<=1?'100%':'75%');if(!a.get('attachmentsToDelete')){a.set('attachmentsToDelete',f)}else {a.get('attachmentsToDelete').push(c)}}})},onMyCrewOnlyClick:function(c){var d=this,a=TS.app.settings,e=d.getViewModel(),b=Ext.getStore('CrewsForNewFWA');b.filterBy(function(b){return b.get('crewChiefEmpId')===a.empId});c.setStyle('color:white;background-color:#939393;font-weight: bold;');Ext.first('#allCrewButton').setStyle('background-color: #f6f6f6;color: #606060;font-weight: normal;');Ext.first('#crewLabel').setValue('');e.get('selectedFWA').set('scheduledCrewId','')},onAllCrewsClick:function(c){var d=this,b=TS.app.settings,e=d.getViewModel(),a=Ext.getStore('CrewsForNewFWA');a.clearFilter();a.filterBy(function(d){var a=!1;Ext.each(d.get('crewMembers').getRange(),function(e){a=e.get('crewMemberEmpId')===b.empId;if(a){return !1}});if(a){return !0}});c.setStyle('color:white;background-color:#939393;font-weight: bold;');Ext.first('#myCrewsButton').setStyle('background-color: #f6f6f6;color: #606060;font-weight: normal;');e.get('selectedFWA').set('scheduledCrewId','');Ext.first('#crewLabel').setValue('')},onUdfClick:function(){var e=this,a=TS.app.settings,c=e.getViewModel(),b=Ext.create({xtype:'fwa-udtf',viewModel:{parent:c}}),d=c.get('selectedFWA');a.origUdfValue=d.get('udf_t1');b.lookup('udfTitle').setTitle(a.wbs1Label+' '+a.udf_t1_Label);Ext.Viewport.add(b);b.show()},onUdfSave:function(a){var b=this,d=TS.app.settings,c=b.getViewModel(),e=c.get('selectedFWA');a.up('sheet').hide()},closeUdfSheet:function(c){var d=this,a=TS.app.settings,e=d.getViewModel(),b=e.get('selectedFWA');b.set('udf_t1',a.origUdfValue);c.up('sheet').hide()},convertUtcDates:function(e){var a=e;if(a){while(a.indexOf('^fromUTC(')>-1){var f=a.indexOf('^fromUTC(')+9,d,b,c;d=a.indexOf(')^');b=a.substring(f,d);c=Ext.Date.format(TS.common.Util.getInUTCDate(b),'m/d/Y g:i A');a=a.replace('^fromUTC('+b+')^',c)}}else {a=a.replace(/\^fromUTC\(/g,'');a=a.replace(/\)\^/g,'')}return a},onSelectionCrewChange:function(i,h){var a=this,c=TS.app.settings,f=Ext.first('#crewTaskGrid'),g=!a.lookup('crewTaskDateHeader').getValue()?new Date():a.lookup('crewTaskDateHeader').getValue(),d=Ext.Date.format(new Date(g),'m/d/Y'),e=h[0].get('crewId'),b=f.getStore();c.selectedCrewId=e;if(!b){Fwa.GetDailyFwaList(null,c.username,c.empId,d,function(g){if(g&&g.success){Ext.each(g.data,function(b){b.topLevelDescription=a.convertUtcDates(b.topLevelDescription);b.detailsDescription=a.convertUtcDates(b.detailsDescription)});b=new Ext.data.Store({model:'TS.model.fwa.FwaDailyList',data:g.data});var j=[],k;j=a.loadUniqueDateStore();k=j.filter(function(a,b){return j.indexOf(a)==b});c.startDates=k;Ext.each(b.getRange(),function(a){a.set('schedStartDate',TS.common.Util.getInUTCDate(a.get('schedStartDate')))});a.loadCrewTaskGrid(f,b,e,d)}},a,{autoHandle:!0})}else {a.loadCrewTaskGrid(f,b,e,d)}},onSelectionCrewChiefChange:function(i,h){var a=this,c=TS.app.settings,f=Ext.first('#taskGrid'),g=!a.lookup('taskDateHeader').getValue()?new Date():a.lookup('taskDateHeader').getValue(),e=Ext.Date.format(new Date(g),'m/d/Y'),d=h.get('crewChiefEmpId'),b=f.getStore();c.selectedCrewChiefId=d;if(!b){Fwa.GetDailyFwaList(null,c.username,c.empId,e,function(g){if(g&&g.success){Ext.each(g.data,function(b){b.topLevelDescription=a.convertUtcDates(b.topLevelDescription);b.detailsDescription=a.convertUtcDates(b.detailsDescription)});b=new Ext.data.Store({model:'TS.model.fwa.FwaDailyList',data:g.data});Ext.each(b.getRange(),function(a){a.set('schedStartDate',TS.common.Util.getInUTCDate(a.get('schedStartDate')))});var j=[],k;j=a.loadUniqueDateStore();k=j.filter(function(a,b){return j.indexOf(a)==b});c.startDates=k;a.loadCrewChiefTaskGrid(f,b,d,e)}},a,{autoHandle:!0})}else {a.loadCrewChiefTaskGrid(f,b,d,e)}},loadUniqueDateStore:function(){var c=[];for(var b=14;b>0;b--){var a=new Date();a.setDate(a.getDate()-b);c.push(Ext.Date.format(a,'m/d/Y'))}for(var b=0;b<30;b++){var a=new Date();a.setDate(a.getDate()+b);c.push(Ext.Date.format(a,'m/d/Y'))}return c},loadCrewTaskGrid:function(j,b,f,a){var l=this,d=TS.app.settings,g=Ext.Array.max(d.startDates),h=Ext.Array.min(d.startDates),k=l.getView().lookup('crewTaskDateBar'),c=Ext.first('#crewGrid'),e=0,i;d.selectedCrewId=f;b.clearFilter();Ext.each(c.getStore().getRange(),function(d){i=d.get('crewId');if(b.findRecord('scheduledCrewId',i)){c.getItemAt(e).cells[1].setStyle('color: red; font-weight: bolder')}else {c.getItemAt(e).cells[1].setStyle('color: black; font-weight: normal;')}e++});b.filterBy(function(c){return c.get('scheduledCrewId')===f&&Ext.Date.format(new Date(c.get('schedStartDate')),'m/d/Y')===Ext.Date.format(new Date(a),'m/d/Y')});j.setStore(b);Ext.first('#crewTaskDateHeader').setValue(a);Ext.first('#lastCrewTaskDate').setDisabled(!h||a==h);Ext.first('#nextCrewTaskDate').setDisabled(!g||a==g);j.setHidden(!1);k.setHidden(!1)},loadCrewChiefTaskGrid:function(j,b,f,a){var l=this,d=TS.app.settings,h=Ext.Array.max(d.startDates),i=Ext.Array.min(d.startDates),k=l.getView().lookup('taskDateBar'),c=Ext.first('#crewChiefGrid'),e=0,g;d.selectedCrewChiefId=f;b.clearFilter();Ext.each(c.getStore().getRange(),function(d){g=d.get('crewChiefEmpId');if(b.findRecord('scheduledCrewChiefId',g)){c.getItemAt(e).cells[1].setStyle('color: red; font-weight: bolder')}else {c.getItemAt(e).cells[1].setStyle('color: black; font-weight: normal;')}e++});b.filterBy(function(c){return c.get('scheduledCrewChiefId')===f&&Ext.Date.format(new Date(c.get('schedStartDate')),'m/d/Y')===Ext.Date.format(new Date(a),'m/d/Y')});j.setStore(b);Ext.first('#taskDateHeader').setValue(a);Ext.first('#lastTaskDate').setDisabled(!i||a==i);Ext.first('#nextTaskDate').setDisabled(!h||a==h);j.setHidden(!1);k.setHidden(!1)},lastUnitsDate:function(){var g=this,n=g.getView(),l=g.getViewModel(),k=l.get('selectedFWA'),i=Ext.first('#unitCodeGrid'),a=i.getStore(),m=a.model,j=Ext.first('#manageUnits').lookup('unitsDateHeader').getValue(),e=k.get('unitDatesInRange').sort(function(a,b){return new Date(b)-new Date(a)}),c='',b,f=!1,d=0,h=e.length;Ext.each(e,function(a){d++;c=(new Date(a)).getUTCMonth()+1+'/'+(new Date(a)).getUTCDate()+'/'+(new Date(a)).getUTCFullYear();if(new Date(Ext.Date.format(new Date(c),'m/d/Y'))<new Date(j)){b=Ext.Date.format(new Date(c),'m/d/Y');f=!0;return !1}});if(f){a.clearFilter();a.setRemoteFilter(!1);a.filterBy(function(a){return Ext.Date.format(new Date(a.get('unitDate')),'m/d/Y')===Ext.Date.format(new Date(b),'m/d/Y')})}Ext.first('#manageUnits').lookup('unitsDateHeader').setValue(Ext.Date.format(new Date(b),'m/d/Y'));Ext.first('#manageUnits').lookup('lastUnitsDate').setDisabled(d==h);Ext.first('#manageUnits').lookup('nextUnitsDate').setDisabled(!1)},nextUnitsDate:function(){var g=this,n=g.getView(),l=g.getViewModel(),k=l.get('selectedFWA'),i=Ext.first('#unitCodeGrid'),a=i.getStore(),m=a.model,j=Ext.first('#manageUnits').lookup('unitsDateHeader').getValue(),e=k.get('unitDatesInRange').sort(function(a,b){return new Date(a)-new Date(b)}),b='',c='',f=!1,d=0,h=e.length;Ext.each(e,function(a){d++;c=(new Date(a)).getUTCMonth()+1+'/'+(new Date(a)).getUTCDate()+'/'+(new Date(a)).getUTCFullYear();if(new Date(Ext.Date.format(new Date(c),'m/d/Y'))>new Date(j)){b=Ext.Date.format(new Date(c),'m/d/Y');f=!0;return !1}});if(f){a.clearFilter();a.setRemoteFilter(!1);a.filterBy(function(a){return Ext.Date.format(new Date(a.get('unitDate')),'m/d/Y')===Ext.Date.format(new Date(b),'m/d/Y')})}Ext.first('#manageUnits').lookup('unitsDateHeader').setValue(Ext.Date.format(new Date(b),'m/d/Y'));Ext.first('#manageUnits').lookup('nextUnitsDate').setDisabled(d==h);Ext.first('#manageUnits').lookup('lastUnitsDate').setDisabled(!1)},onAddUnitsDate:function(){var b=this,c=b.getViewModel(),a=Ext.create({xtype:'fwa-addunitsdate',viewModel:{parent:c}});Ext.Viewport.add(a);a.lookup('addUnitDatePicker').setValue(Ext.first('#manageUnits').lookup('unitsDateHeader').getValue());a.show()},saveAddUnitDate:function(l){var i=this,n=i.getView(),m=i.getViewModel(),e=m.get('selectedFWA'),j=Ext.first('#unitCodeGrid'),b=j.getStore(),k=b.model,f=!1,h,c=0,a=e.get('unitDatesInRange'),g=Ext.Date.format(new Date(Ext.first('#addUnitDatePicker').getValue()),'Y-m-d'),d=Ext.Date.format(new Date(Ext.first('#addUnitDatePicker').getValue()),'m/d/Y');if(!a){e.set('unitDatesInRange',[]);a=e.get('unitDatesInRange')}Ext.each(a,function(a){c++;if(a==g+'T00:00:00'){f=!0;return !1}});if(!f){a.push(g+'T00:00:00');c++}Ext.each(b.getRange(),function(a){b.filter('unitDate',new Date(d));if(b.getRange().length==0){b.add(new k({unitCodeId:a.get('unitCodeId'),unitSeq:b.getRange()&&b.getRange().length>0?b.getRange().length+1:1,unitDate:new Date(d),equipmentId:a.get('equipmentId'),equipmentName:a.get('equipmentName')}))}});b.clearFilter();b.setRemoteFilter(!1);b.filterBy(function(a){return Ext.Date.format(new Date(a.get('unitDate')),'m/d/Y')===Ext.Date.format(new Date(d),'m/d/Y')});Ext.first('#manageUnits').lookup('unitsDateHeader').setValue(Ext.Date.format(new Date(d),'m/d/Y'));c=0;if(a&&a.length>0){if(a.length==1){Ext.first('#manageUnits').lookup('lastUnitsDate').setDisabled(!0);Ext.first('#manageUnits').lookup('nextUnitsDate').setDisabled(!0)}else {a=a.sort(function(a,b){return new Date(a)-new Date(b)});Ext.each(a,function(b){c++;h=Ext.Date.format(new Date((new Date(b)).getUTCMonth()+1+'/'+(new Date(b)).getUTCDate()+'/'+(new Date(b)).getUTCFullYear()),'m/d/Y');var d=h==Ext.Date.format(new Date(n.lookup('addUnitDatePicker').getValue()),'m/d/Y');if(d&&c==1){Ext.first('#manageUnits').lookup('lastUnitsDate').setDisabled(!0);Ext.first('#manageUnits').lookup('nextUnitsDate').setDisabled(!1);return !1}else {if(d&&c==a.length){Ext.first('#manageUnits').lookup('lastUnitsDate').setDisabled(!1);Ext.first('#manageUnits').lookup('nextUnitsDate').setDisabled(!0);return !1}}})}}else {Ext.first('#manageUnits').lookup('lastUnitsDate').setDisabled(!0);Ext.first('#manageUnits').lookup('nextUnitsDate').setDisabled(!0)}l.up('sheet').hide()},lastTaskDate:function(){var d=this,c=TS.app.settings,k=Ext.first('#taskGrid'),a=k.getStore(),m=Ext.first('#taskDateHeader').getValue(),h=c.startDates.sort(function(a,b){return new Date(b)-new Date(a)}),e='',b,f,a,i,j=!1,g=0,l=h.length;Ext.each(h,function(a){g++;e=(new Date(a)).getUTCMonth()+1+'/'+(new Date(a)).getUTCDate()+'/'+(new Date(a)).getUTCFullYear();if(new Date(Ext.Date.format(new Date(e),'m/d/Y'))<new Date(m)){b=Ext.Date.format(new Date(e),'m/d/Y');j=!0;return !1}});if(j){f=Ext.first('#taskGrid');i=c.selectedCrewChiefId;a=f.getStore();Fwa.GetDailyFwaList(null,c.username,c.empId,b,function(c){if(c&&c.success){Ext.each(c.data,function(a){a.topLevelDescription=d.convertUtcDates(a.topLevelDescription);a.detailsDescription=d.convertUtcDates(a.detailsDescription)});a=new Ext.data.Store({model:'TS.model.fwa.FwaDailyList',data:c.data});Ext.each(a.getRange(),function(a){a.set('schedStartDate',TS.common.Util.getInUTCDate(a.get('schedStartDate')))});d.loadCrewChiefTaskGrid(f,a,i,b)}},d,{autoHandle:!0})}Ext.first('#taskDateHeader').setValue(Ext.Date.format(new Date(b),'m/d/Y'));Ext.first('#lastTaskDate').setDisabled(g==l);Ext.first('#nextTaskDate').setDisabled(!1);k.deselectAll()},lastCrewTaskDate:function(){var d=this,b=TS.app.settings,j=Ext.first('#crewTaskGrid'),c=j.getStore(),m=Ext.first('#crewTaskDateHeader').getValue(),h=b.startDates.sort(function(a,b){return new Date(b)-new Date(a)}),e='',a,f,k,i=!1,g=0,l=h.length;Ext.each(h,function(b){g++;e=(new Date(b)).getUTCMonth()+1+'/'+(new Date(b)).getUTCDate()+'/'+(new Date(b)).getUTCFullYear();if(new Date(Ext.Date.format(new Date(e),'m/d/Y'))<new Date(m)){a=Ext.Date.format(new Date(e),'m/d/Y');i=!0;return !1}});if(i){f=Ext.first('#crewTaskGrid');k=b.selectedCrewId;c=f.getStore();Fwa.GetDailyFwaList(null,b.username,b.empId,a,function(b){if(b&&b.success){Ext.each(b.data,function(a){a.topLevelDescription=d.convertUtcDates(a.topLevelDescription);a.detailsDescription=d.convertUtcDates(a.detailsDescription)});c=new Ext.data.Store({model:'TS.model.fwa.FwaDailyList',data:b.data});Ext.each(c.getRange(),function(a){a.set('schedStartDate',TS.common.Util.getInUTCDate(a.get('schedStartDate')))});d.loadCrewTaskGrid(f,c,k,a)}},d,{autoHandle:!0})}Ext.first('#crewTaskDateHeader').setValue(Ext.Date.format(new Date(a),'m/d/Y'));Ext.first('#lastCrewTaskDate').setDisabled(g==l);Ext.first('#nextCrewTaskDate').setDisabled(!1);j.deselectAll()},nextTaskDate:function(){var d=this,c=TS.app.settings,k=Ext.first('#taskGrid'),a=k.getStore(),m=Ext.first('#taskDateHeader').getValue(),h=c.startDates.sort(function(a,b){return new Date(a)-new Date(b)}),e='',b,f,a,i,j=!1,g=0,l=h.length;Ext.each(h,function(a){g++;e=(new Date(a)).getUTCMonth()+1+'/'+(new Date(a)).getUTCDate()+'/'+(new Date(a)).getUTCFullYear();if(new Date(Ext.Date.format(new Date(e),'m/d/Y'))>new Date(m)){b=Ext.Date.format(new Date(e),'m/d/Y');j=!0;return !1}});if(j){f=Ext.first('#taskGrid');i=c.selectedCrewChiefId;a=f.getStore();Fwa.GetDailyFwaList(null,c.username,c.empId,b,function(c){if(c&&c.success){Ext.each(c.data,function(a){a.topLevelDescription=d.convertUtcDates(a.topLevelDescription);a.detailsDescription=d.convertUtcDates(a.detailsDescription)});a=new Ext.data.Store({model:'TS.model.fwa.FwaDailyList',data:c.data});Ext.each(a.getRange(),function(a){a.set('schedStartDate',TS.common.Util.getInUTCDate(a.get('schedStartDate')))});d.loadCrewChiefTaskGrid(f,a,i,b)}},d,{autoHandle:!0})}Ext.first('#taskDateHeader').setValue(Ext.Date.format(new Date(b),'m/d/Y'));Ext.first('#nextTaskDate').setDisabled(g==l);Ext.first('#lastTaskDate').setDisabled(!1);k.deselectAll()},nextCrewTaskDate:function(){var d=this,b=TS.app.settings,j=Ext.first('#crewTaskGrid'),c=j.getStore(),m=Ext.first('#crewTaskDateHeader').getValue(),h=b.startDates.sort(function(a,b){return new Date(a)-new Date(b)}),e='',f,k,a,i=!1,g=0,l=h.length;Ext.each(h,function(b){g++;e=(new Date(b)).getUTCMonth()+1+'/'+(new Date(b)).getUTCDate()+'/'+(new Date(b)).getUTCFullYear();if(new Date(Ext.Date.format(new Date(e),'m/d/Y'))>new Date(m)){a=Ext.Date.format(new Date(e),'m/d/Y');i=!0;return !1}});if(i){f=Ext.first('#crewTaskGrid');k=b.selectedCrewId;c=f.getStore();Fwa.GetDailyFwaList(null,b.username,b.empId,a,function(b){if(b&&b.success){Ext.each(b.data,function(a){a.topLevelDescription=d.convertUtcDates(a.topLevelDescription);a.detailsDescription=d.convertUtcDates(a.detailsDescription)});c=new Ext.data.Store({model:'TS.model.fwa.FwaDailyList',data:b.data});Ext.each(c.getRange(),function(a){a.set('schedStartDate',TS.common.Util.getInUTCDate(a.get('schedStartDate')))});d.loadCrewTaskGrid(f,c,k,a)}},d,{autoHandle:!0})}Ext.first('#crewTaskDateHeader').setValue(Ext.Date.format(new Date(a),'m/d/Y'));Ext.first('#nextCrewTaskDate').setDisabled(g==l);Ext.first('#lastCrewTaskDate').setDisabled(!1);j.deselectAll()},onSelectionFWAChange:function(e,i,g,c,j,h){var f=TS.app.settings,d=c.data,b=d.detailsDescription,a=Ext.create({xtype:'my-messagebox',viewModel:{parent:this.getViewModel()}});a.lookup('myInfo').setValue(b);Ext.Viewport.add(a);a.show()},closeCrewChiefs:function(){},onSelectionTemplateChange:function(e,f){var d=this,a=d.getView(),b=a.lookup('loadTemplateDoc'),c=a.lookup('templateGrid');b.setDisabled(c.getSelectionCount()==0)},lastTabletCrewTaskDate:function(){var m=this,j=TS.app.settings,k=Ext.first('#tableCrewTaskGrid'),a=k.getStore(),l=Ext.first('#tabletCrewTaskDateHeader').getValue(),c,b=[],e='',d,h=!1,g=0,i=[],f;a.clearFilter();Ext.each(a.getRange(),function(a){b.push(Ext.Date.format(new Date(a.get('schedStartDate')),'m/d/Y'))});i=b.filter(function(a,c){return b.indexOf(a)==c});j.startDates=i;c=j.startDates.sort(function(a,b){return new Date(b)-new Date(a)});f=c.length;Ext.each(c,function(a){g++;e=(new Date(a)).getUTCMonth()+1+'/'+(new Date(a)).getUTCDate()+'/'+(new Date(a)).getUTCFullYear();if(new Date(Ext.Date.format(new Date(e),'m/d/Y'))<new Date(l)){d=Ext.Date.format(new Date(e),'m/d/Y');h=!0;return !1}});if(h){a.setRemoteFilter(!1);a.filterBy(function(b){var a=Ext.Date.format(new Date(b.get('schedStartDate')),'m/d/Y');return a===Ext.Date.format(new Date(d),'m/d/Y')})}Ext.first('#tabletCrewTaskDateHeader').setValue(Ext.Date.format(new Date(d),'m/d/Y'));Ext.first('#lastTabletCrewTaskDate').setDisabled(g==f);Ext.first('#nextTabletCrewTaskDate').setDisabled(!1);k.deselectAll()},nextTabletCrewTaskDate:function(){var m=this,j=TS.app.settings,k=Ext.first('#tableCrewTaskGrid'),a=k.getStore(),l=Ext.first('#tabletCrewTaskDateHeader').getValue(),c,b=[],e='',d,h=!1,g=0,i=[],f;a.clearFilter();Ext.each(a.getRange(),function(a){b.push(Ext.Date.format(new Date(a.get('schedStartDate')),'m/d/Y'))});i=b.filter(function(a,c){return b.indexOf(a)==c});j.startDates=i;c=j.startDates.sort(function(a,b){return new Date(a)-new Date(b)});f=c.length;Ext.each(c,function(a){g++;e=(new Date(a)).getUTCMonth()+1+'/'+(new Date(a)).getUTCDate()+'/'+(new Date(a)).getUTCFullYear();if(new Date(Ext.Date.format(new Date(e),'m/d/Y'))>new Date(l)){d=Ext.Date.format(new Date(e),'m/d/Y');h=!0;return !1}});if(h){a.setRemoteFilter(!1);a.filterBy(function(b){var a=Ext.Date.format(new Date(b.get('schedStartDate')),'m/d/Y');return a===Ext.Date.format(new Date(d),'m/d/Y')})}Ext.first('#tabletCrewTaskDateHeader').setValue(Ext.Date.format(new Date(d),'m/d/Y'));Ext.first('#nextTabletCrewTaskDate').setDisabled(g==f);Ext.first('#lastTabletCrewTaskDate').setDisabled(!1);k.deselectAll()},onManageExpensesTap:function(){var h=this,e=h.getViewModel(),d=TS.app.settings,b=Ext.create({xtype:'fwa-manageexpenses',viewModel:{parent:e}}),f=b.lookup('expensesGrid'),a=f.getPlugins()[0],g=a.getToolbarConfig(),i=g.items[1],c=e.get('selectedFWA.expenses');a.hideExpBillable(!d.exDisplayBillable);a.hideExpFields(d);c.setRemoteFilter(!1);c.clearFilter();c.filterBy(function(a){a.dirty=!1;return a.get('modified')!=='D'});Ext.Viewport.add(b);b.show()},addExpense:function(g){var f=g.up('sheet').down('grid'),a=TS.app.settings,e=f.findPlugin('grideditable'),b=Ext.create('TS.model.exp.Expense',{eKGroup:a.empEkGroup,mileageRate:a.exMileageRate,reportDate:new Date(),modified:'A',empId:a.empId}),c=this.getViewModel(),d=c.get('selectedFWA');d.expenses().add(b);e.startEdit(b);c.set('fromSaveSubmit',!0)},onLaborCodeLookup:function(){var x=this,y=x.getViewModel(),f=Ext.first('#laborCodeField').getValue(),a=TS.app.settings,w=Ext.create({xtype:'emp-laborcodelookup',viewModel:{parent:y},app:'FWA'}),b,c,e,g,h,i,j,k,r,s,t,u,v,m,n,o,p,q;for(var l=1;l<=a.tsLcLevels;l++){this.addLaborCodeGrid(l,w)}Ext.Viewport.add(w);w.show();e=Ext.first('#ts-laborCodeGridsContainer');for(var d=0;d<a.tsLcLevels;d++){switch(d+1){case 1:b=a.tsLc1Start-1;c=a.tsLc1Len;m=Ext.util.Format.substr(f,b,c);g=e.items.items[d];r=g.getStore();g.select(r.findRecord('lcCode',m),!0);g.scrollToRecord(r.findRecord('lcCode',m),!0);break;case 2:b=a.tsLc2Start-1;c=a.tsLc2Len;n=Ext.util.Format.substr(f,b,c);h=e.items.items[d];s=h.getStore();h.select(s.findRecord('lcCode',n),!0);h.scrollToRecord(s.findRecord('lcCode',n),!0);break;case 3:b=a.tsLc3Start-1;c=a.tsLc3Len;o=Ext.util.Format.substr(f,b,c);i=e.items.items[d];t=i.getStore();i.select(t.findRecord('lcCode',o),!0);i.scrollToRecord(t.findRecord('lcCode',o),!0);break;case 4:b=a.tsLc4Start-1;c=a.tsLc4Len;p=Ext.util.Format.substr(f,b,c);j=e.items.items[d];u=j.getStore();j.select(u.findRecord('lcCode',p),!0);j.scrollToRecord(u.findRecord('lcCode',p),!0);break;case 5:b=a.tsLc5Start-1;c=a.tsLc5Len;q=Ext.util.Format.substr(f,b,c);k=e.items.items[d];v=k.getStore();k.select(v.findRecord('lcCode',q),!0);k.scrollToRecord(v.findRecord('lcCode',q),!0);break;}}},addLaborCodeGrid:function(c,d){var a=Ext.create({xtype:'grid-tslaborcode'}),b=Ext.getStore('LaborCodes');b.clearFilter();b.addFilter({filterFn:function(a){return a.get('lcLevel')===c}});a.setStore(Ext.create('Ext.data.Store',{model:'TS.model.shared.LaborCode',remoteFilter:!1}));Ext.each(b.getRange(),function(b){a.getStore().add(b)});d.items.items[2].add(a)},selectLaborCode:function(i,d,h,g){var a=this.getViewModel(),f=TS.app.settings,e=d.get('lcLevel'),c=a.get('laborCodes')||[],b=a.get('laborLabels')||[];c[e]=d.get('lcCode');b[e]=d.get('lcLabel');a.set('laborCodes',c);a.set('laborLabels',b);a.set('laborCodeString',c.filter(function(a){return a}).join(f.tsLcDelimiter));a.set('laborLabelString',b.filter(function(a){return a}).join(' / '))},onSelectLaborCode:function(e,g,i,h){var d=this.getViewModel(),f=TS.app.settings,c=Ext.first('#laborCodeField'),b=d.get('laborCodes')||[],a='';Ext.each(b,function(b){if(b){a+=b}});c.setValue(a);e.up('sheet').hide()}},0,0,0,0,['controller.fwa-edit'],0,[TS.controller.fwa,'FWAEditController'],0);Ext.cmd.derive('TS.controller.fwa.MapController',Ext.app.ViewController,{config:{draggableMarker:null,suppressMessages:!0},init:function(){this.getView().add({xtype:'map',reference:'gmap',mapOptions:{center:null,zoom:11,mapTypeId:google.maps.MapTypeId.ROADMAP},listeners:{maprender:'onMapRender'}})},onMapRender:function(c){var d=this,h=window.location.href,l=h.search('https:')>0||h.search('localhost')>0,j=TS.app.settings,b=c.up('sheet').dataRecord,g=c.up('sheet').store,a,f,e=!1;if(b){if(b.getLoc()){a=b.getLoc().getData();e=a.address1||a.address2||a.city||a.state||a.country||a.latitude||a.longitude||a.zip}else {if(b.loc){a=b.loc;e=a.address1||a.address2||a.city||a.state||a.country||a.latitude||a.longitude||a.zip}}if(!e){navigator.geolocation.getCurrentPosition(Ext.bind(function(a){b.getLoc().set('latitude',a.coords.latitude);b.getLoc().set('longitude',a.coords.longitude);d.setMapMarkerForRecord(c,b,null,{latitude:a.coords.latitude,longitude:a.coords.longitude})},d))}else {if(a.latitude&&a.longitude&&(a.latitude!='0'&&a.longitude!='0')){d.setMapMarkerForRecord(c,b,null,{latitude:a.latitude,longitude:a.longitude})}else {d.setMapMarkerForRecord(c,b)}}}else {if(g){f=new google.maps.LatLngBounds();var k=g.getRange();var i=j.mapInterval;k.forEach(function(b,g){setTimeout(function(){a=b.getLoc().getData();e=a.address1||a.address2||a.city||a.state||a.country||a.latitude||a.longitude;if(a.latitude&&a.longitude&&(a.latitude!='0'&&a.longitude!='0')){d.setMapMarkerForRecord(c,b,f,{latitude:a.latitude,longitude:a.longitude})}else {d.setMapMarkerForRecord(c,b,f)}},g*i)})}}},setMapMarkerForRecord:function(j,a,e,h){var c=this,b=h||(a?a.getLoc().getData():a.loc()),i=this.parsedAddress(b),f=b.latitude&&b.longitude?new google.maps.LatLng(b.latitude,b.longitude):null,d,g=j.getMap();c.geocodeAddress(i,f,Ext.bind(function(b){c.addMapMarker(a,b);if(e){e.extend(b);c.getView().lookup('gmap').getMap().fitBounds(e);g.setCenter(e.getCenter())}else {g.setCenter(b);g.setZoom(14)}},c));if(h&&f){d=a.get('loc')||{};d.latitude=f.lat();d.longitude=f.lng();a.set('loc',d);c.fireEvent('positionUpdate',a)}},addMapMarker:function(c,h){var d=this,a,j=this.getView().lookup('gmap').getMap(),f,e,i='resources/{0}-dot-marker.png',b,l=c.get('schedStartDate'),g=c.get('schedEndDate'),k=new Date(),m;if(c.get('availableForUseInField')){switch(c.get('fwaStatusId')){case FwaStatus.Approved:b='grey';break;case FwaStatus.Submitted:b='green';break;case FwaStatus.InProgress:b='slateblue';break;case FwaStatus.Create:b='orange';break;case FwaStatus.Scheduled:b='yellow';break;case FwaStatus.Saved:b='blue';break;}if(new Date(g)<k&&(c.get('fwaStatusId')!=FwaStatus.Submitted&&c.get('fwaStatusId')!=FwaStatus.Approved)){b='red'}}else {b='yelloworange'}a=d.addMarker(Ext.Object.merge({position:h,title:c.get('fwaNum')+': '+c.get('fwaName'),icon:Ext.String.format(i,b||'gray')},d?{draggable:!0}:{}));f=new google.maps.LatLng(a.position.lat(),a.position.lng());e=Ext.DomHelper.createDom({tag:'div',children:[{tag:'div',style:{'padding-top':'5px','width':'100px','text-align':'center'},children:[{html:'<a style="padding-top: 10px;" href="http://maps.google.com/maps?daddr='+f+'" target="_blank">Get Directions</a>'}]}]});a.infoWindow=new google.maps.InfoWindow({content:e});google.maps.event.addListener(a,'click',function(){a.infoWindow.open(j,a)});google.maps.event.addListener(a,'dragend',Ext.pass(d.onMapMarkerDragEnd,[c,a]).bind(d));d.setDraggableMarker(a)},geocodeAddress:function(a,b,c){if((!a||a.length==0)&&!b){return !1}else {a=typeof a=='object'?Ext.Object.getValues(a).join(','):a;var d=new google.maps.Geocoder();d.geocode({address:a,location:b},Ext.Function.bind(this.onLookupComplete,this,[c],!0))}},onMapMarkerDragEnd:function(c,d,e){var a=e.latLng,b=c.getLoc();b.set('latitude',a.lat());b.set('longitude',a.lng());this.fireEvent('positionUpdate');d.setAnimation(4)},parsedAddress:function(b){var a=b.isEntity?b.getData():b;return [a.address1,a.address2,a.city,a.state,a.zip,a.country].filter(Boolean).join(', ')},addMarker:function(a){var b=google.maps,c;a=Ext.apply({map:this.getView().lookup('gmap').getMap()},a);if(!a.position){a.position=new b.LatLng(a.lat,a.lng)}c=new b.Marker(a);Ext.Object.each(a.listeners,function(d,e){b.event.addListener(c,d,e)});return c},onLookupComplete:function(c,a,b){if(a!='OK'){if(!this.getSuppressMessages()){Ext.GlobalEvents.fireEvent('Message:Maps',a)}return}b(c[0].geometry.location)}},0,0,0,0,['controller.fwa-map'],0,[TS.controller.fwa,'MapController'],0);Ext.cmd.derive('TS.controller.ts.MainController',TS.view.main.MainController,{control:{'button[action=tssign]':{tap:'tsSubmitPinClick'},'button[action=close]':{tap:'onCloseSheet'},'button[action=copy-ts]':{tap:'onCopyTimesheet'},'button[action=select-project]':{tap:'onSelectProject'},'button[action=select-laborcode]':{tap:'onSelectLaborCode'},'button[action=save-project]':{tap:'onProjectSave'}},init:function(){},onBackToFSS:function(){Ext.GlobalEvents.fireEvent('ChangeViewport','FSS');Ext.Viewport.setActiveItem('app-fss')},findCurrentTimesheet:function(){this.getView().setLoading(!0);var h=this,k=h.getViewModel(),j=new Date(),d=TS.app.settings,a=null,i=Ext.Date.format(new Date(),'m/d/Y'),g=Ext.first('ts-list'),f=g.getStore(),b,c,e;TimeSheet.GetListByEmployee(null,d.username,d.empId,0,10000,function(d,j,k){if(d&&d.success){Ext.Array.each(d.data,function(b){c=Ext.Date.format(new Date(b.startDate),'m/d/Y');e=Ext.Date.format(new Date(b.endDate),'m/d/Y');if(Ext.Date.between(new Date(i),new Date(c),new Date(e))){a=b;return !1}},this);if(a){if(f){b=f.findRecord('tsPeriodId',a.tsPeriodId);if(b){g.setSelection(b);h.editSelectedTimesheet()}}}}});this.getView().setLoading(!1)},editSelectedTimesheet:function(l){var e=this,a=e.getViewModel(),c=TS.app.settings,g=a.get('currentTSRow'),h=a.get('selectedDay'),k=Ext.first('ts-timesheet').down('list'),j=function(a){return Ext.Date.format(a,'m/d/Y')},d=a.get('selectedTS'),i=TS.common.Util.createUTCDate(d.get('startDate')),f=TS.common.Util.createUTCDate(d.get('endDate')),b;c.tsStartDate=j(i);c.tsEndDate=j(f);a.set('startDate',i);a.set('endDate',f);b=a.getStore('tsrow');b.getProxy().setExtraParams({tsDate:f,includeCrewMembers:c.tsCanViewCrewMemberTime});b.load({scope:e,callback:function(){if(b.getRange().length>0){e.adjustTotalHours(b);b.sort('crewRoleId','ASC');b.filterBy(function(a){if(c.tsCanViewCrewMemberTime){return !0}else {return a.get('empId')===c.empId}});a.set('tsStatus',d.get('status'));if(d.get('status')==TsStatus.Approved||d.get('status')==TsStatus.Submitted&&!c.tsAllowUnsubmit){Ext.first('#tsSaveButton').setDisabled(!0);Ext.first('#tsSubmitButton').setDisabled(!0)}if(g){g.dirty=!1}if(h){h.dirty=!1}e.getView().setActiveItem(1);k.setOnItemDisclosure(!a.get('tsDisabled'))}}})},onMenuTap:function(){this.getView().add({xtype:'ts-editmenu'}).show()},onBackBt:function(){var a=this.getView(),b=a.innerItems.indexOf(a.getActiveItem());a.setActiveItem(--b)},onTsBackBt:function(){var e=this,f=e.getViewModel(),b=f.get('currentTSRow'),c=f.get('selectedDay'),a=e.getView(),d=a.innerItems.indexOf(a.getActiveItem()),g=TS.app.settings;if(b&&b.dirty||c&&c.dirty){Ext.Msg.confirm('Unsaved Changes','You have unsaved '+g.tsTitle+' changes. Do you want to discard your changes and continue?',function(b){if(b=='yes'){a.setActiveItem(--d)}})}else {a.setActiveItem(--d)}},onHoursTap:function(b,f,e,a){var c=this,d=c.getViewModel();d.set('currentTSRow',a);this.onHours(b,a)},onHours:function(u,f){var n=Ext.Date,k=this,c=k.getViewModel(),m=c.getStore('hoursview'),s=Ext.first('ts-hours').down('list'),d=TS.app.settings,b=c.get('currentTSRow').cells().getRange(),j=c.get('startDate'),t=c.get('dayCount'),o=c.get('currentTSRow'),p=Ext.first('#deleteRowButton'),r=Ext.first('#copyRowButton'),e=[],l,i,a=0,h=0,q=TS.common.Util.createGroupHeader(c.get('currentTSRow')),g;c.set('groupHeader',q);for(;a<t;a++){i=(new Date(j)).toISOString();l=Ext.create('TS.model.ts.TsCell',{workDate:i,regHrs:0,ovtHrs:0,ovt2Hrs:0,travelHrs:0,comment:'',fwaId:'',fwaNum:'',startTime:i,endTime:i,empId:f.get('empId')});e.push(l);j=n.add(j,n.DAY,1)}if(b&&b.length>0){for(a=0;a<b.length;a++){for(g=0;g<e.length;g++){if((new Date(b[a].get('workDate'))).getUTCDate()===(new Date(e[g].get('workDate'))).getUTCDate()){e[g].set(b[a].getData());h+=b[a].get('regHrs');if(d.tsAllowOvtHrs){h+=b[a].get('ovtHrs')}if(d.tsAllowOvt2Hrs){h+=b[a].get('ovt2Hrs')}if(d.tsAllowTravelHrs){h+=b[a].get('travelHrs')}break}}}}c.set('isNewRecord',f.get('isNewRecord')||!1);m.setRemoteSort(!0);m.loadRawData(e);k.getView().setActiveItem(2);k.calculatePeriodTtlHrs();p.setHidden(d.empId!==f.get('empId'));r.setHidden(d.empId!==f.get('empId'));s.setOnItemDisclosure(d.empId!==f.get('empId')&&!d.tsCanEnterCrewMemberTime);o.dirty=!1},onHoursEditTap:function(b,f,e,a){var c=this,d=c.getViewModel();d.set('selectedDay',a);this.onHoursEdit(b,a)},onHoursEdit:function(g,d){var c=TS.app.settings,b=this.getViewModel(),a=b.get('selectedDay'),f=new Date(a.get('workDate')),e=TS.common.Util.createUTCDate(f);a.set('workDate',e);b.set('regHrsCopy',a.get('regHrs'));b.set('ovtHrsCopy',a.get('ovtHrs'));b.set('ovt2HrsCopy',a.get('ovt2Hrs'));b.set('travelHrsCopy',a.get('travelHrs'));b.set('commentCopy',a.get('comment'));if(c.empId!==d.get('empId')&&!c.tsCanEnterCrewMemberTime){Ext.Msg.alert('Warning','User does not have rights to edit a '+c.crewLabel+' member. May view only.');return}Ext.first('#fwaField').setHidden(!d.get('fwaId'));Ext.first('#fwaButton').setHidden(!d.get('fwaId'));this.getView().setActiveItem(3);a.dirty=!1},onRowDelete:function(){var b=this,f=Ext.first('ts-timesheet'),c=b.getViewModel(),a=c.getStore('tsrow'),e=TS.app.settings,d=c.get('currentTSRow');Ext.Msg.confirm('Please Confirm','Are you sure you want to delete this '+e.tsTitle+' entry?',function(c){if(c==='yes'){a.removeAt(a.indexOfId(d.getId()));b.onBackBt();f.down('list').refresh();b.adjustTotalHours(a)}})},onRowCopy:function(){var c=this,g=Ext.first('ts-timesheet'),d=c.getViewModel(),b=d.getStore('tsrow'),f=TS.app.settings,a=d.get('currentTSRow'),e=new TS.model.ts.TsRow({seq:b.data.length+1,rowNum:b.data.length+1,billCategory:a.get('billCategory'),chargeType:a.get('chargeType'),clientId:a.get('clientId'),clientName:a.get('clientName'),clientNumber:a.get('clientNumber'),crewRoleId:a.get('crewRoleId'),empId:a.get('empId'),empName:a.get('empName'),laborCode:a.get('laborCode'),projectId:a.get('projectId'),tsheetStatus:a.get('tsheetStatus'),wbs1:a.get('wbs1'),wbs1Name:a.get('wbs1Name'),wbs2:a.get('wbs2'),wbs2Name:a.get('wbs2Name'),wbs3:a.get('wbe3'),wbs3Name:a.get('wbs3Name'),cells:[]});Ext.Msg.confirm('Please Confirm','Are you sure you want to copy this '+f.tsTitle+' row entry?',function(a){if(a==='yes'){b.add(e);c.onBackBt();g.down('list').refresh();c.adjustTotalHours(b)}})},onPrint:function(i){var d=this,j=d.getViewModel(),e=j.get('currentTSRow'),f=j.get('selectedDay'),b=d.getViewModel().get('selectedTS'),k=b.get('tsPeriodId'),g=Ext.Date.format(new Date(b.get('startDate')),Ext.Date.defaultFormat),h=Ext.Date.format(new Date(b.get('endDate')),Ext.Date.defaultFormat),l=b.get('empId'),c=TS.app.settings,a=Ext.create({xtype:'window-print',viewModel:{parent:d.getViewModel()},modelId:k,appType:'TS',empId:l,isList:!1});if(e&&e.dirty||f&&f.dirty){Ext.Msg.confirm('Unsaved Changes','You have unsaved '+c.tsTitle+' changes. These changes need to be saved to be reflected. Do you want continue?',function(b){if(b==='yes'){Ext.Viewport.add(a);a.down('titlebar[docked=top]').setTitle(c.tsTitle+': '+g+'-'+h);a.show();i.up('ts-editmenu').hide()}})}else {Ext.Viewport.add(a);a.down('titlebar[docked=top]').setTitle(c.tsTitle+': '+g+'-'+h);a.show();i.up('ts-editmenu').hide()}},onEmail:function(h){var b=this,i=b.getViewModel(),c=i.get('currentTSRow'),d=i.get('selectedDay'),e=b.getViewModel().get('selectedTS'),j=e.get('tsPeriodId'),k=e.get('empId'),g=TS.app.settings,f=Ext.getStore('TsEmployees').getById(g.empId),a=Ext.create({xtype:'window-email',viewModel:{parent:b.getViewModel()},appType:'Timesheet',empId:k,modelId:j,emailNote:{_tr:'tsTitle',tpl:'Attach {0}'}});if(c&&c.dirty||d&&d.dirty){Ext.Msg.confirm('Unsaved Changes','You have unsaved '+g.tsTitle+' changes. These changes need to be saved to be reflected. Do you want continue?',function(b){if(b==='yes'){a.lookup('ccEmailField').setValue(f.get('emailAddress'));a.down('titlebar[docked=top]').setTitle('Email');a.down('formpanel').down('checkboxfield').setLabel(a.emailNote);a.down('formpanel').down('button').setHidden(!0);Ext.Viewport.add(a);a.show();h.up('ts-editmenu').hide()}})}else {a.lookup('ccEmailField').setValue(f.get('emailAddress'));a.down('titlebar[docked=top]').setTitle('Email');a.down('formpanel').down('checkboxfield').setLabel(a.emailNote);a.down('formpanel').down('button').setHidden(!0);Ext.Viewport.add(a);a.show();h.up('ts-editmenu').hide()}},onTSCopy:function(c){var d=this,b=Ext.first('app-ts'),a=Ext.create({xtype:'ts-select',viewModel:{parent:d.getViewModel()}});b.add(a);a.show();c.up('ts-editmenu').hide()},checkWbs1Information:function(c){var b=TS.app.settings,a=!0;Ext.each(c,function(d){if(!d.wbs1){Ext.Msg.alert('Warning','Missing required '+b.wbs1Label+' information on an entry');a=!1}});return a},onSaveTS:function(){var a=this,b=a.getViewModel(),h=TS.app.settings,e=b.get('selectedTS').getData(!0),i=b.getStore('tsrow').getRange(),k=i.length,f=b.getStore('tsheet'),c=[],d=0,l,g=!0;for(;d<k;d++){c.push(i[d].getData(!0))}g=a.checkWbs1Information(c);if(!g){return}e.rows=c;var j=e;TimeSheet.Save(null,h.username,j,b.get('isTimesheetApproval'),function(b,c,d){if(b&&b.success){if(b.message&&b.message.mdType&&b.message.mdType==='warning'){Ext.Msg.show({title:'Warning',scrollable:!0,height:275,message:a.getWarningMessage(b),buttons:Ext.MessageBox.YESNO,buttonText:{yes:'YES',no:'NO'},icon:Ext.Msg.INFO,fn:function(e){if(e==='yes'){TimeSheet.SaveSubmitAfterWarning(null,h.username,j,!1,null,function(h,g,i){TS.Messages.getSimpleAlertMessage('timesheetSaveSuccess');f.load();a.onBackBt()},a,{autoHandle:!0})}else {return}}})}else {TS.Messages.getSimpleAlertMessage('timesheetSaveSuccess');f.load();a.onBackBt()}}else {if(b){Ext.GlobalEvents.fireEvent('Error:MsgBox',Ext.JSON.encode(b))}}})},onSubmitTS:function(l){var a=this,i=a.getViewModel(),e=i.get('selectedTS'),f=e.get('tsPeriodId'),m=e.get('empId'),k=TS.app.settings,j=Ext.first('app-ts'),g=i.getStore('tsrow').getRange(),b,h=[],d=!0;for(var c=0;c<g.length;c++){h.push(g[c].getData(!0))}d=a.checkWbs1Information(h);if(!d){return}if(k.tsReqSubmitSignature){b=Ext.create({xtype:'ts-submitpin',viewModel:{parent:a.getViewModel()},attType:'Employee',associatedRecordId:f,attachmentsList:{modelType:'TS',modelId:f,attachmentType:'E'}});j.add(b);b.show()}else {a.doSubmitTimesheet(l)}},doSubmitTimesheet:function(a,h){var b=this,c=b.getViewModel(),i=TS.app.settings,m=c.get('selectedTS'),e=c.get('selectedTS').getData(!0),j=c.getStore('tsrow').getRange(),g=c.getStore('tsheet'),l=j.length,k=[],f=0,n,d;for(;f<l;f++){k.push(j[f].getData(!0))}e.rows=k;Ext.Msg.confirm('Please Confirm','Are you sure you want to submit?',function(c){if(c==='yes'){d=h!=null?h.getData():null;TimeSheet.Submit(null,i.username,e,d,function(f,j,k){if(f&&f.success){if(f.message&&f.message.mdType&&f.message.mdType=='warning'){Ext.Msg.show({title:'Warning',scrollable:!0,height:275,message:b.getWarningMessage(f),buttons:Ext.MessageBox.YESNO,buttonText:{yes:'YES',no:'NO'},icon:Ext.Msg.INFO,fn:function(l){if(l==='yes'){TimeSheet.SaveSubmitAfterWarning(null,i.username,e,!0,d,function(e,d,i){a.up('sheet').hide();TS.Messages.getSimpleAlertMessage('timesheetSubmitSuccess');g.load();b.onBackBt()},b,{autoHandle:!0})}else {return}}})}else {if(a&&a.up('sheet')){a.up('sheet').hide()}TS.Messages.getSimpleAlertMessage('timesheetSubmitSuccess');g.reload();b.onBackBt()}}else {if(f){Ext.GlobalEvents.fireEvent('Error:MsgBox',Ext.JSON.encode(f));if(a.up('ts-submitpin')){a.up('ts-submitpin').hide()}}}})}})},getWarningMessage:function(a){var b;if(a){if(a.message){a=a.message}if(typeof a=='object'&&a.mdBody){var c='',d='';try{d=JSON.parse(a.mdBody);Ext.Array.each(d,function(b){c+=b.errorValue+'<br>'})}catch(e){c=a.mdBody}b=c+='Do you wish to continue?'}else {b=a.message}}else {b='Unknown Error - Please Contact Support'}return b},onCloseSheet:function(a){a.up('sheet').hide()},tsSubmitPinClick:function(e){var a=this,f=TS.app.settings,d=a.lookup('tsSubmitPinField').getValue(),c=a.getView(),b=a.lookup('saveSignatureButton');if(!c.lookup('tsSubmitPinField').getValue()){Ext.Msg.alert('Warning','PIN and Signature are both required');b.setDisabled(!0);return}User.AuthenticatePin(window.userGlobal.dbi,d,window.userGlobal.email,function(b,c,d){if(b.data){this.doSaveSignature(e)}else {Ext.GlobalEvents.fireEvent('Message:Code','tsSubmitPinBadField');a.lookup('tsSubmitPinField').setValue('');a.getView().setLoading(!1)}},a,{autoHandle:!0})},doSaveSignature:function(i){var b=this,c=TS.app.settings,j=b.getViewModel(),e=j.get('selectedTS'),f=e.get('tsPeriodId'),k=b.getView(),g=k.down('ts-draw'),d=g.toDataURL(),h=new Blob([d],{type:'image/png'}),a;a={type:'TS',location:c.imageStorageLoc,associatedId:f,attachmentType:'E',fileExt:'png',fileName:'signature_'+Ext.data.identifier.Uuid.Global.generate(),description:c.tsTitle+' Approval Signature',file:h};b.convertFileToByteData(a.file,Ext.bind(function(e){var d=Ext.create('TS.model.shared.Attachment',{owningModelType:a.type,owningModelId:a.associatedId+'||'+c.empId,dateAttached:a.date||new Date(),attachmentType:a.attachmentType,location:a.location,extension:a.fileExt,filename:a.fileName,description:a.description,attachmentItem:e});b.doSubmitTimesheet(i,d)},b))},convertFileToByteData:function(b,c){var a=new FileReader();a.onload=function(a){return function(g){var f=new Uint8Array(g.target.result),e=[];for(var d=0;d<f.length;d++){e[d]=f[d]}c(e)}}(b);a.readAsArrayBuffer(b)},onCopyTimesheet:function(a){var b=this,g=b.getViewModel(),h=g.getStore('tsrow'),d=h.getRange(),j=d.length,k=g.get('selectedTSCopy'),i=TS.app.settings,f,e=0,c=0;for(;c<j;c++){f=d[c].getData(!0);Ext.each(f,function(b){Ext.each(b.cells,function(c){e+=c.regHrs+c.ovtHrs+c.ovt2Hrs+c.travelHrs})})}if(e!=0){Ext.Msg.confirm('Warning','The current '+i.tsTitle+' will be replaced with the copied data, select \u201cYes\u201d to proceed.',function(c){if(c=='yes'){b.copyTimesheet(a)}a.up('sheet').hide()})}else {b.copyTimesheet(a)}},copyTimesheet:function(f){var a=this.getViewModel(),d=a.getStore('tsrow'),g=d.getRange(),l=g.length,c=a.get('selectedTSCopy'),h=a.get('selectedTS'),e=TS.app.settings,i,b,k,j=0,m=0;TimeSheet.Copy(null,e.username,e.empId,c.get('startDate'),c.data,function(a,c,e){if(a&&a.success){b=a.data.rows;d.loadData(b);f.up('sheet').hide()}else {Ext.GlobalEvents.fireEvent('Error',a);f.up('sheet').hide()}})},onManageEntry:function(){var b=this,d=TS.app.settings,c=Ext.first('app-ts'),a=Ext.create({xtype:'ts-projects',viewModel:{parent:b.getViewModel()},isNewProject:!0}),e=b.getStore('tsrow');if(!d.tsCanEnterCrewMemberTime){Ext.first('#addTimesheetBtn').setHidden(!0)}c.add(a);a.show()},onSelectProject:function(f){var c=this,h=c.getView(),g=c.getViewModel(),d=h.lookup('project-treelist'),b=d.getViewModel().getData().treelist.selection,e=TS.app.settings,i=g.get('currentTSRow'),a;if(!b){Ext.Msg.alert('FYI','Please select '+e.wbs1Label+' from list');return}a=b.getId().split('^');Ext.first('#fwawbs1id').setValue(a[0]);Ext.first('#fwawbs2id').setValue(a[1]||'');Ext.first('#fwawbs3id').setValue(a[2]||'');f.up('sheet').hide()},onProjectLookup:function(){var b=Ext.first('app-ts'),a=Ext.create({xtype:'ts-projectlookuptree',viewModel:{parent:this.getViewModel()},app:'TS'});b.add(a);a.show()},onLaborCodeLookup:function(){var z=this,x=z.getViewModel(),f=x.get('currentTSRow').get('laborCode'),y=Ext.first('app-ts'),a=TS.app.settings,w=Ext.create({xtype:'ts-laborcodelookup',viewModel:{parent:x},app:'TS'}),b,c,e,l,m,n,o,p,g,h,i,j,k,r,s,t,u,v;for(var q=1;q<=a.tsLcLevels;q++){this.addLaborCodeGrid(q,w)}y.add(w);w.show();e=Ext.first('#ts-laborCodeGridsContainer');for(var d=0;d<a.tsLcLevels;d++){switch(d+1){case 1:b=a.tsLc1Start-1;c=a.tsLc1Len;r=Ext.util.Format.substr(f,b,c);l=e.items.items[d];g=l.getStore();g.load(function(){l.select(g.findRecord('lcCode',r),!0);l.scrollToRecord(g.findRecord('lcCode',r),!0)});break;case 2:b=a.tsLc2Start-1;c=a.tsLc2Len;s=Ext.util.Format.substr(f,b,c);m=e.items.items[d];h=m.getStore();h.load(function(){m.select(h.findRecord('lcCode',s),!0);m.scrollToRecord(h.findRecord('lcCode',s),!0)});break;case 3:b=a.tsLc3Start-1;c=a.tsLc3Len;t=Ext.util.Format.substr(f,b,c);n=e.items.items[d];i=n.getStore();i.load(function(){n.select(i.findRecord('lcCode',t),!0);n.scrollToRecord(i.findRecord('lcCode',t),!0)});break;case 4:b=a.tsLc4Start-1;c=a.tsLc4Len;u=Ext.util.Format.substr(f,b,c);o=e.items.items[d];j=o.getStore();j.load(function(){o.select(j.findRecord('lcCode',u),!0);o.scrollToRecord(j.findRecord('lcCode',u),!0)});break;case 5:b=a.tsLc5Start-1;c=a.tsLc5Len;v=Ext.util.Format.substr(f,b,c);p=e.items.items[d];k=p.getStore();k.load(function(){p.select(k.findRecord('lcCode',v),!0);p.scrollToRecord(k.findRecord('lcCode',v),!0)});break;}}},addLaborCodeGrid:function(b,c){var a=Ext.create({xtype:'grid-tslaborcode'});a.setStore(Ext.create('Ext.data.Store',{model:'TS.model.ts.LaborCode',autoLoad:!0,remoteFilter:!1,filters:{property:'lcLevel',value:b}}));c.items.items[2].add(a)},selectLaborCode:function(i,d,h,g){var a=this.getViewModel(),f=TS.app.settings,e=d.get('lcLevel'),c=a.get('laborCodes')||[],b=a.get('laborLabels')||[];c[e]=d.get('lcCode');b[e]=d.get('lcLabel');a.set('laborCodes',c);a.set('laborLabels',b);a.set('laborCodeString',c.filter(function(a){return a}).join(f.tsLcDelimiter));a.set('laborLabelString',b.filter(function(a){return a}).join(' / '))},onSelectLaborCode:function(f){var c=this,b=c.getViewModel(),e=TS.app.settings,g=c.getView(),a=b.get('laborCodeString'),d=Ext.first('#fwalaborcode');if(!a||a==''){Ext.Msg.alert('FYI','Please select '+e.laborCodeLabel+' from list');return}d.setValue(a);b.set('laborCodeString','');b.set('laborLabelString','');f.up('sheet').hide()},adjustTotalHours:function(e){var i=e.getRange(),b=TS.app.settings,n=b.empId,d=this.getViewModel(),o=i.length,c=0,f=0,g=0,m=0,l=0,k=0,j=0,h,a;e.each(function(a,b){if(!a.get('wbs1')){e.remove(a)}});if(e.getRange().length==0){Ext.Msg.alert('FYI','No '+b.tsTitle+' entries for selected period.')}for(;f<o;f++){if(i[f].data.empId==n){h=i[f].cells().getRange();for(g=0;g<h.length;g++){a=h[g];c+=a.get('regHrs');m+=a.get('regHrs');l+=a.get('ovtHrs');k+=a.get('ovt2Hrs');j+=a.get('travelHrs');if(b.tsAllowOvtHrs){c+=a.get('ovtHrs')}if(b.tsAllowOvt2Hrs){c+=a.get('ovt2Hrs')}if(b.tsAllowTravelHrs){c+=a.get('travelHrs')}}}}d.set('totalHours',c);d.set('totalRegHours',m);d.set('totalOvtHours',l);d.set('totalOvt2Hours',k);d.set('totalTravelHours',j)},onAddTimesheet:function(h){var n=this,i=n.getViewModel(),l=h.up('ts-projects').down('#ts-projectlist'),j=TS.app.settings,m=Ext.getStore('TsEmployees').getById(j.empId),k=i.get('selectedProject'),c=i.get('tsrow'),d,e,f,g,a,b;f=c.findExact('seq',k.get('seq'));d=c.getAt(f);a=d.getData();b=m.getData();g={empId:b.empId,empName:b.empName,laborCode:b.tsDefLaborCode,billCategory:b.tsDefBillCategory,crewRoleId:b.defaultCrewRoleId,chargeType:a.chargeType,clientId:a.clientId,clientName:a.clientName,wbs1:a.wbs1,wbs2:a.wbs2,wbs3:a.wbs3,wbs1Name:a.wbs1Name,wbs2Name:a.wbs2Name,wbs3Name:a.wbs3Name,isNewRecord:!0};e=TS.model.ts.TsRow.createWithAssociations(g);c.add(e);l.setSelection(null);h.up('sheet').hide()},onAddNewProject:function(){var j=Ext.Date,g=TS.app.settings,d=this.getViewModel(),n=Ext.first('ts-timesheet'),a=Ext.create('TS.model.ts.TsRow'),b=Ext.getStore('TsEmployees').getById(g.empId),l=d.getStore('tsrow'),e=d.get('startDate'),m=d.get('dayCount'),h=[],f,c,k=0,i;a.set('empId',b.get('empId'));a.set('empName',b.get('empName'));a.set('laborCode',b.get('tsDefLaborCode'));a.set('billCategory',b.get('tsDefBillCategory'));a.set('crewRoleId',b.get('defaultCrewRoleId'));for(;k<m;k++){c=(new Date(e)).toISOString();f=Ext.create('TS.model.ts.TsCell',{workDate:c,regHrs:0,ovtHrs:0,ovt2Hrs:0,travelHrs:0,comment:'',fwaId:'',fwaNum:'',startTime:c,endTime:c});h.push(f);e=j.add(e,j.DAY,1)}a.set('cells',h);Ext.first('ts-projects').down().setActiveItem(1);i=Ext.first('ts-projects').down().getActiveItem();i.down('titlebar[docked=top]').setTitle('Add '+g.wbs1Label);d.set('currentTSRow',a);l.add(a);n.down('list').refresh()},onEditProjectTap:function(b,d,c,a){this.onEditProject(b,a)},onEditProject:function(g,f){var e=TS.app.settings,c=this.getViewModel(),b=c.get('tsrow'),d,a;a=b.findExact('seq',f.get('seq'));c.set('currentTSRow',b.getAt(a));c.set('projectId',b.getAt(a).get('projectId'));Ext.first('ts-projects').down().setActiveItem(1);d=Ext.first('ts-projects').down().getActiveItem();d.down('titlebar[docked=top]').setTitle('Edit '+e.wbs1Label)},onProjectSave:function(l){var j=this,d=j.getViewModel(),m=Ext.first('ts-timesheet'),o=Ext.first('#ts-projectlist'),c=d.getStore('tsrow').getRange(),n=d.getStore('tsrow'),a=d.get('currentTSRow'),k=d.get('projectId'),e=TS.app.settings,b=0,i=Ext.first('#fwawbs1id'),h=i.getSelection(),f=Ext.first('#fwawbs2id'),g=Ext.first('#fwawbs3id');if(!i.getValue()){Ext.Msg.alert('Warning','Missing required '+e.wbs1Label+' information');return}if(f&&f.getStore().getData().length>0){if(!f.getValue()){Ext.Msg.alert('Warning','Missing required '+e.wbs2Label+' information');return}}if(g&&g.getStore().getData().length>0){if(!g.getValue()){Ext.Msg.alert('Warning','Missing required '+e.wbs3Label+' information');return}}a.set('wbs1Name',Ext.first('#fwawbs1name').getHtml());a.set('wbs2Name',Ext.first('#fwawbs2name').getHtml());a.set('wbs3Name',Ext.first('#fwawbs3name').getHtml());a.set('clientId',h.get('clientId'));a.set('clientName',h.get('clientName'));if(a.dirty){for(;b<c.length;b++){if(c[b].get('projectId')===k){c[b].set('wbs1',a.get('wbs1'));c[b].set('wbs2',a.get('wbs2'));c[b].set('wbs3',a.get('wbs3'));c[b].set('wbs1Name',a.get('wbs1Name'));c[b].set('wbs2Name',a.get('wbs2Name'));c[b].set('wbs3Name',a.get('wbs3Name'));c[b].set('laborCode',a.get('laborCode'));c[b].set('billCategory',a.get('billCategory'));c[b].set('clientId',a.get('clientId'));c[b].set('clientName',a.get('clientName'))}}m.down('list').refresh()}l.up('sheet').hide();j.getView().setActiveItem(1)},onProjectCancel:function(f,e){var d=this,b=d.getViewModel(),a=b.get('currentTSRow'),c=b.getStore('tsrow');if(a.dirty){a.set('wbs1',a.getModified('wbs1')||a.get('wbs1'));a.set('wbs2',a.getModified('wbs2')||a.get('wbs2'));a.set('wbs3',a.getModified('wbs3')||a.get('wbs3'));a.set('billcategory',a.getModified('billcategory')||a.get('billcategory'));a.set('laborCode',a.getModified('laborCode')||a.get('laborCode'));if(a.phantom){c.remove(a)}}Ext.first('ts-projects').down().setActiveItem(0)},showFwa:function(){var c=this,j=c.getView(),d=c.getViewModel(),g=d.get('selectedDay'),f=Ext.first('app-ts'),h=g.get('fwaId'),a=TS.app.settings,e=d.getStore('timesheetfwa'),b=Ext.create({xtype:'fwa-view',viewModel:{parent:d,isFromTS:!0}}),i;e.getProxy().setExtraParams({username:a.username,id:h});e.load({callback:c.loadFwaViewSheet,scope:c});f.add(b);b.down('titlebar[docked=top]').setTitle(a.fwaAbbrevLabel+' for '+a.tsTitle);Ext.first('#fwaOpenButton').setHidden(!0);Ext.first('#fwaCopyButton').setHidden(!0);b.show();b.getViewModel().getView().getItems().items[5].setTitle(a.clientLabel+' Signature');b.getViewModel().getView().getItems().items[6].setTitle(a.crewChiefLabel+' Signature')},loadFwaViewSheet:function(j,n,o){var k=this,g=k.getViewModel(),a=j[0],f=a.get('attachments');g.set('selectedFWA',a);g.set('attachments',f);if(f||a.get('clientApprovalImage')||a.get('chiefApprovalImage')){var b=a.get('attachments').filter(function(a){return a.attachmentType=='S'&&a.owningModelType=='Fwa'}),c=a.get('attachments').filter(function(a){return a.attachmentType=='E'&&a.owningModelType=='Fwa'}),h=0,i=0,d,l,e,m;Ext.each(a.get('attachments'),function(a){if(a.attachmentType=='S'&&a.owningModelType=='Fwa'){h++}if(a.attachmentType=='E'&&a.owningModelType=='Fwa'){i++}});Ext.first('#viewAllClientSignatureButton').setHidden(!0);Ext.first('#viewAllChiefSignatureButton').setHidden(!0);if(!a.get('clientApprovalImage')){if(b&&b.length>0){d=b[0].dateAttached;Ext.first('#clientApprovalDate').setValue(Ext.Date.format(new Date(d),'m/d/Y h:i A'));Ext.first('#clientApprovalImage').setSrc('data:application/octet-stream;base64,'+b[0].attachmentItem)}}if(!a.get('chiefApprovalImage')){if(c&&c.length>0){e=c[0].dateAttached;Ext.first('#chiefApprovalDate').setValue(Ext.Date.format(new Date(e),'m/d/Y h:i A'));Ext.first('#chiefApprovalImage').setSrc('data:application/octet-stream;base64,'+c[0].attachmentItem)}}}},viewAllClientSignatures:function(){var g=this,c=g.getViewModel(),b=c.getStore('signaturelist'),f=TS.app.settings,e=[],d,a,h;Ext.each(c.get('attachments'),function(a){if(a.attachmentType==AttachmentType.ClientSignature&&a.owningModelType=='Fwa'){d=Ext.create('TS.model.shared.Attachment',{attachmentId:a.attachmentId,dateAttached:a.dateAttached,attachmentItem:'data:application/octet-stream;base64,'+a.attachmentItem,attachedByEmpId:a.attachedByEmpId});e.push(d)}});b.setRemoteSort(!1);b.loadRawData(e);a=Ext.create({xtype:'fwa-signaturelist',viewModel:{parent:c}});a.lookup('signatureListTitle').setTitle(f.clientLabel+' Signature List');b.sort('dateAttached','DESC');Ext.Viewport.add(a);a.show()},viewAllChiefSignatures:function(){var g=this,c=g.getViewModel(),b=c.getStore('signaturelist'),f=TS.app.settings,e=[],d,a,h;Ext.each(c.get('attachments'),function(a){if(a.attachmentType==AttachmentType.EmpSignature&&a.owningModelType=='Fwa'){d=Ext.create('TS.model.shared.Attachment',{attachmentId:a.attachmentId,dateAttached:a.dateAttached,attachmentItem:'data:application/octet-stream;base64,'+a.attachmentItem,attachedByEmpId:a.attachedByEmpId});e.push(d)}});b.setRemoteSort(!1);b.loadRawData(e);a=Ext.create({xtype:'fwa-signaturelist',viewModel:{parent:c}});a.lookup('signatureListTitle').setTitle(f.crewChiefLabel+' Signature List');b.sort('dateAttached','DESC');Ext.Viewport.add(a);a.show()},onManageNotesTap:function(){var c=this,b=Ext.first('app-ts'),a=Ext.create({xtype:'ts-fwanotes',viewModel:{parent:this.getViewModel()}});b.add(a);a.show()},onManageNotesTapView:function(){var d=this,e=d.getViewModel(),c=e.get('fwa'),b=TS.app.settings,a=Ext.create({xtype:'ts-fwanotes',viewModel:{parent:this.getViewModel()}});Ext.each(c.notes().getRange(),function(a){a.set('canEdit',a.get('empId')==b.empId)});Ext.Viewport.add(a);a.show()},onManageWorkCodesTapView:function(){var c=this,b=Ext.first('app-ts'),a=Ext.create({xtype:'ts-fwaworkcodes',viewModel:{parent:this.getViewModel()}});b.add(a);a.show()},onManageUnitsTapView:function(){var c=this,b=Ext.first('app-ts'),a=Ext.create({xtype:'ts-fwaunits',viewModel:{parent:this.getViewModel()}});b.add(a);a.show()},onManageHoursTapView:function(){var c=this,b=Ext.first('app-ts'),a=Ext.create({xtype:'ts-fwahours',viewModel:{parent:this.getViewModel()}});b.add(a);a.show()},onBeforeHoursBack:function(){var g=this,l=Ext.first('ts-timesheet'),b=g.getViewModel(),m=b.getStore('hoursview'),i=b.getStore('tsrow'),d=i.getById(b.get('currentTSRow').id).cells(),j=m.getRange(),h=0,e,n=j.length,a,c,k,f;for(;h<n;h++){a=j[h];e=-1;if(a.dirty){f=Ext.clone(a.data);f.id='';k=d.getRange().length;for(c=0;c<k;c++){if((new Date(d.getAt(c).get('workDate'))).getUTCDate()===(new Date(a.get('workDate'))).getUTCDate()){e=c;break}}if(e>-1){d.getAt(e).set(a.getData())}else {d.add(Ext.create('TS.model.ts.TsCell',f))}}}g.onBackBt();b.notify();l.down('list').deselect(b.get('currentTSRow'),!0);l.down('list').refresh();g.adjustTotalHours(i)},onBeforeEditHoursBack:function(o){var c=this,b=c.getViewModel(),a=b.get('selectedDay'),n=a.get('regHrs'),m=a.get('ovtHrs'),l=a.get('ovt2Hrs'),k=a.get('travelHrs'),i=a.get('comment'),h=b.get('regHrsCopy'),g=b.get('ovtHrsCopy'),f=b.get('ovt2HrsCopy'),e=b.get('travelHrsCopy'),d=b.get('commentCopy'),j=Ext.first('ts-hours').down('list');if(h!=n||g!=m||f!=l||e!=k||d!=i){a.set('comment',d);a.set('ovt2Hrs',f);a.set('ovtHrs',g);a.set('regHrs',h);a.set('travelHrs',e)}j.deselect(a,!0);c.calculatePeriodTtlHrs();a.dirty=!1;c.onBackBt()},onEditHoursSave:function(){var c=this,b=c.getViewModel(),q=Ext.first('ts-timesheet'),a=b.get('selectedDay'),g=a.get('workDate'),m=Ext.Date.format(TS.common.Util.getOutUTCDate(g),'m/d/Y'),k=a.get('regHrs'),j=a.get('ovtHrs'),i=a.get('ovt2Hrs'),f=a.get('travelHrs'),d=a.get('comment'),p=b.get('regHrsCopy'),o=b.get('ovtHrsCopy'),n=b.get('ovt2HrsCopy'),l=b.get('travelHrsCopy'),h=b.get('commentCopy'),e=Ext.first('ts-hours').down('list');if(p!=k||o!=j||n!=i||l!=f||h!=d){a.dirty=!0}a.set('workDate',m);e.deselect(a,!0);q.down('list').refresh();c.calculatePeriodTtlHrs();c.onBackBt()},calculatePeriodTtlHrs:function(){var j=this,e=TS.app.settings,c=j.getViewModel(),b=c.get('hoursview').getRange(),d=0,i=0,h=0,g=0,f=0,a=0;for(;a<b.length;a++){d+=b[a].get('regHrs');i+=b[a].get('regHrs');if(e.tsAllowOvtHrs){d+=b[a].get('ovtHrs');h+=b[a].get('ovtHrs')}if(e.tsAllowOvt2Hrs){d+=b[a].get('ovt2Hrs');g+=b[a].get('ovt2Hrs')}if(e.tsAllowTravelHrs){d+=b[a].get('travelHrs');f+=b[a].get('travelHrs')}}c.set('periodTtlHrs',d);c.set('periodTtlRegHrs',i);c.set('periodTtlOvtHrs',h);c.set('periodTtlOvt2Hrs',g);c.set('periodTtlTravelHrs',f)},onProjectSearchChange:function(b,a){var d=b.up('tree-list')||b.up(''),e=d.getViewModel(),c=e.getStore('navItems');if(a===''){c.clearFilter()}else {c.filterBy(function(c){if(c.get('model')=='Wbs2'||c.get('model')=='Wbs3'){return !0}if(c.get('text').match(a)||c.get('id').match(a)){return !0}})}},setCrewRole:function(e,b,d,f){var c=Ext.first('#hoursCrewRole'),a=b?Ext.getStore('TsEmployees').getById(b.id):null;if(a){c.setValue(Ext.getStore('Roles').getById(a.get('defaultCrewRoleId')))}},onTsHoursChange:function(b,a,c){if(!a){a=0}},onClearIconTap:function(a,b,c){a.setValue(0)}},0,0,0,0,['controller.ts-main'],0,[TS.controller.ts,'MainController'],0);Ext.cmd.derive('TS.controller.tsa.MainController',TS.view.main.MainController,{control:{'button[action=tssign]':{tap:'tsSubmitPinClick'},'button[action=close]':{tap:'onCloseSheet'},'button[action=tsa-sign]':{tap:'tsaSubmitPinClick'}},onBackToFSS:function(){var a=this;Ext.GlobalEvents.fireEvent('ChangeViewport','FSS',a);Ext.Viewport.setActiveItem('app-fss')},editSelectedTimesheetPeriod:function(){var f=this,a=f.getViewModel(),j=TS.app.settings,b=a.get('selectedTSA'),i=a.get('selectedDay'),k=function(a){return Ext.Date.format(a,'m/d/Y')},h=b.get('startDate'),g=b.get('endDate'),c,d,e;c=new Date(h.getUTCMonth()+1+'/'+h.getUTCDate()+'/'+h.getUTCFullYear());d=new Date(g.getUTCMonth()+1+'/'+g.getUTCDate()+'/'+g.getUTCFullYear());j.tsStartDate=k(c);j.tsEndDate=k(d);a.set('startDate',c);a.set('endDate',d);e=a.getStore('tsaapprovallist');e.getProxy().setExtraParams({tsPeriodId:b.get('tsPeriodId')});e.load({scope:f,callback:function(){}});f.getView().setActiveItem(1);b.dirty=!1;if(i){i.dirty=!1}},onEditSelectedTimesheet:function(){var e=this,a=e.getViewModel(),n=a.get('tsApproverCanModify'),l=TS.app.settings,b=a.get('currentTSARow'),c=a.get('selectedTSA'),k=a.get('selectedDay'),m=function(a){return Ext.Date.format(a,'m/d/Y')},j=c.get('startDate'),i=c.get('endDate'),f,d,h=a.getStore('tsrow'),g=a.getStore('tsheet');if(b.get('status')==TsStatus.Approved&&b.get('visionStatus')=='U'){a.set('tsApproverCanModify',!1)}else {a.set('tsApproverCanModify',n)}f=new Date(j.getUTCMonth()+1+'/'+j.getUTCDate()+'/'+j.getUTCFullYear());d=new Date(i.getUTCMonth()+1+'/'+i.getUTCDate()+'/'+i.getUTCFullYear());l.tsStartDate=m(f);l.tsEndDate=m(d);a.set('startDate',f);a.set('endDate',d);h.getProxy().setExtraParams({empId:b.get('empId'),tsDate:d,includeCrewMembers:!1});h.load({scope:e,callback:function(){e.adjustTotalHours(h,b.get('empId'))}});g.getProxy().setExtraParams({empId:b.get('empId')});g.load();g.filterBy(function(a){return a.get('tsPeriodId')===c.getId()});a.set('tsStatus',c.get('status'));b.dirty=!1;if(k){k.dirty=!1}e.getView().setActiveItem(2)},onTsBackBt:function(){var f=this,b=f.getViewModel(),c=b.get('currentTSRow'),d=b.get('selectedDay'),a=f.getView(),e=a.innerItems.indexOf(a.getActiveItem()),g=TS.app.settings;if(c&&c.dirty||d&&d.dirty){Ext.Msg.confirm('Unsaved Changes','You have unsaved '+g.tsTitle+' changes. Do you want to discard your changes and continue?',function(c){if(c=='yes'){a.setActiveItem(--e);b.set('currentTSARow',null)}})}else {a.setActiveItem(--e);b.set('currentTSARow',null)}},onCloseSheet:function(a){a.up('sheet').hide()},onTsSelectionChange:function(e,a,d){var f=this,c=Ext.first('#rejectTsButton'),b=Ext.first('#approveTsButton');c.setHidden(a[0].get('status')===TsStatus.Blank||a[0].get('status')==TsStatus.Approved&&a[0].get('visionStatus')=='U');b.setHidden(a[0].get('status')===TsStatus.Blank||a[0].get('status')==TsStatus.Approved&&a[0].get('visionStatus')=='U')},onMenuApprove:function(a){this.approveSelectedTimesheet();a.up('tsa-editmenu').hide()},approveSelectedTimesheet:function(){var a=this,e=a.getViewModel(),b=e.get('currentTSARow'),d=b.get('status'),c=TS.app.settings,f=Ext.first('app-tsa'),g;if(d==='I'){Ext.Msg.confirm('Confirmation','Please confirm that you would like to approve this '+c.tsTitle.toLowerCase()+' that is still IN-PROGRESS? Timesheet validation rules will not be run.',function(b){if(b==='yes'){a.onApproveTimeSheet()}else {if(b==='no'){}}})}else {a.onApproveTimeSheet()}},onApproveTimeSheet:function(){var b=this,g=b.getViewModel(),f=TS.app.settings,d=g.get('selectedTSA'),c=d.get('tsPeriodId'),e=Ext.first('app-tsa'),a;if(f.tsReqApprovalSignature){a=Ext.create({xtype:'tsa-submitpin',viewModel:{parent:b.getViewModel()},attType:'Employee',associatedRecordId:c,attachmentsList:{modelType:'TSA',modelId:c,attachmentType:'E'}});e.add(a);a.show()}else {b.continueAfterApprovalSignature()}},continueAfterApprovalSignature:function(b,c){var e=this,d=Ext.first('app-tsa'),a=Ext.create({xtype:'tsa-approvereject',viewModel:{parent:e.getViewModel()},approvalType:'Approval',attachment:c});Ext.first('#approveRejectTitleText').setTitle('Approval Comment');Ext.first('#approveRejectCommentText').setHtml('Please provide a comment for your approval.');if(b){b.up('sheet').hide()}d.add(a);a.show()},onMenuReject:function(a){this.rejectSelectedTimesheet();a.up('tsa-editmenu').hide()},rejectSelectedTimesheet:function(){var c=this,b=Ext.first('app-tsa'),a=Ext.create({xtype:'tsa-approvereject',viewModel:{parent:c.getViewModel()},approvalType:'Rejection'});Ext.first('#approveRejectTitleText').setTitle('Rejection Comment');Ext.first('#approveRejectCommentText').setHtml('Please provide a comment for your rejection.');b.add(a);a.show()},sendApproveReject:function(m){var c=this,f=TS.app.settings,a=c.getViewModel(),j=a.get('currentTSARow'),k=a.get('selectedTSA').get('tsPeriodId'),g=c.getView(),e=Ext.first('tsa-approvereject').approvalType==='Approval',d=Ext.first('tsa-approvereject').attachment,b=Ext.first('#approveRejectComment').getValue(),n=g.innerItems.indexOf(g.getActiveItem()),l=a.getStore('tsaapprovallist'),i=a.getStore('tsasheet'),h=d!=null?d.getData():null;if(!e&&(!b||b=='')){Ext.Msg.alert('Missing Comment',f.tsTitle+' comments are required when rejecting.');return}TimeSheet.ApproveRejectTimesheet(null,f.username,k,j.get('empId'),e,b||'',h,function(b,a,c){l.reload();i.reload()},c,{autoHandle:!0});m.up('sheet').hide()},onHoursTap:function(b,f,e,a){var c=this,d=c.getViewModel();d.set('currentTSRow',a);this.onHours(b,a)},onHours:function(){var m=Ext.Date,j=this,a=j.getViewModel(),l=a.getStore('hoursview'),t=Ext.first('ts-hours').down('list'),h=TS.app.settings,c=a.get('currentTSRow').cells().getRange(),i=a.get('startDate'),s=a.get('dayCount'),p=Ext.first('#deleteRowButton'),o=Ext.first('#copyRowButton'),n=Ext.first('#hoursEmployee'),r=a.get('currentTSRow').get('empId'),d=[],k,g,b=0,f=0,q=TS.common.Util.createGroupHeader(a.get('currentTSRow')),e;if(a.get('currentTSRow').get('status')==TsStatus.Approved&&a.get('currentTSRow').get('visionStatus')=='U'){return !1}a.set('groupHeader',q);for(;b<s;b++){g=(new Date(i)).toISOString();k=Ext.create('TS.model.ts.TsCell',{workDate:g,regHrs:0,ovtHrs:0,ovt2Hrs:0,travelHrs:0,comment:'',fwaId:'',fwaNum:'',startTime:g,endTime:g});d.push(k);i=m.add(new Date(i),m.DAY,1)}if(c&&c.length>0){for(b=0;b<c.length;b++){for(e=0;e<d.length;e++){if((new Date(c[b].get('workDate'))).getUTCDate()===(new Date(d[e].get('workDate'))).getUTCDate()){d[e].set(c[b].getData());f+=c[b].get('regHrs');if(h.tsAllowOvtHrs){f+=c[b].get('ovtHrs')}if(h.tsAllowOvt2Hrs){f+=c[b].get('ovt2Hrs')}if(h.tsAllowTravelHrs){f+=c[b].get('travelHrs')}break}}}}l.setRemoteSort(!0);l.loadRawData(d);j.getView().setActiveItem(3);j.calculatePeriodTtlHrs();a.get('currentTSRow').set('empName',Ext.getStore('TsEmployees').getById(r).get('empName'));p.setHidden(!0);o.setHidden(!0);n.setReadOnly(!0);Ext.first('ts-hours').down('titlebar[docked=top]').setTitle('Approval Hours');a.get('currentTSRow').dirty=!1},adjustTotalHours:function(n,j){var h=n.getRange(),d=TS.app.settings,j=d.empId,c=this.getViewModel(),o=h.length,b=0,e=0,f=0,m=0,l=0,k=0,i=0,g,a;for(;e<o;e++){if(h[e].data.empId==j){g=h[e].cells().getRange();for(f=0;f<g.length;f++){a=g[f];b+=a.get('regHrs');m+=a.get('regHrs');l+=a.get('ovtHrs');k+=a.get('ovt2Hrs');i+=a.get('travelHrs');if(d.tsAllowOvtHrs){b+=a.get('ovtHrs')}if(d.tsAllowOvt2Hrs){b+=a.get('ovt2Hrs')}if(d.tsAllowTravelHrs){b+=a.get('travelHrs')}}}}c.set('totalHours',b);c.set('totalRegHours',m);c.set('totalOvtHours',l);c.set('totalOvt2Hours',k);c.set('totalTravelHours',i)},calculatePeriodTtlHrs:function(){var j=this,e=TS.app.settings,c=j.getViewModel(),b=c.get('hoursview').getRange(),d=0,i=0,h=0,g=0,f=0,a=0;for(;a<b.length;a++){d+=b[a].get('regHrs');i+=b[a].get('regHrs');if(e.tsAllowOvtHrs){d+=b[a].get('ovtHrs');h+=b[a].get('ovtHrs')}if(e.tsAllowOvt2Hrs){d+=b[a].get('ovt2Hrs');g+=b[a].get('ovt2Hrs')}if(e.tsAllowTravelHrs){d+=b[a].get('travelHrs');f+=b[a].get('travelHrs')}}c.set('periodTtlHrs',d);c.set('periodTtlRegHrs',i);c.set('periodTtlOvtHrs',h);c.set('periodTtlOvt2Hrs',g);c.set('periodTtlTravelHrs',f)},onMenuTap:function(a){this.getView().add({xtype:'tsa-editmenu'}).show()},onBackBt:function(){var a=this.getView(),b=a.innerItems.indexOf(a.getActiveItem());a.setActiveItem(--b)},onBeforeHoursBack:function(o){var g=this,l=Ext.first('tsa-timesheet'),b=g.getViewModel(),m=b.getStore('hoursview'),i=b.getStore('tsrow'),d=i.getById(b.get('currentTSRow').id).cells(),j=m.getRange(),h=0,e,n=j.length,a,c,k,f;for(;h<n;h++){a=j[h];e=-1;if(a.dirty){f=Ext.clone(a.data);f.id='';k=d.getRange().length;for(c=0;c<k;c++){if((new Date(d.getAt(c).get('workDate'))).getUTCDate()===(new Date(a.get('workDate'))).getUTCDate()){e=c;break}}if(e>-1){d.getAt(e).set(a.getData())}else {d.add(Ext.create('TS.model.ts.TsCell',f))}}}g.onBackBt();b.notify();l.down('list').deselect(b.get('currentTSRow'),!0);l.down('list').refresh();g.adjustTotalHours(i)},onHoursEditTap:function(b,f,e,a){var c=this,d=c.getViewModel();d.set('selectedDay',a);this.onHoursEdit(b,a)},onHoursEdit:function(e,d){var c=TS.app.settings,a=this.getViewModel(),b=a.get('selectedDay');a.set('regHrsCopy',b.get('regHrs'));a.set('ovtHrsCopy',b.get('ovtHrs'));a.set('ovt2HrsCopy',b.get('ovt2Hrs'));a.set('travelHrsCopy',b.get('travelHrs'));a.set('commentCopy',b.get('comment'));if(c.empId!=d.get('empId')&&!a.get('tsApproverCanModify')){Ext.Msg.alert('Warning','User does not have rights to edit a '+c.crewLabel+' member. May view only.');return}Ext.first('#fwaField').setHidden(d.get('fwaId')?!1:!0);Ext.first('#fwaButton').setHidden(d.get('fwaId')?!1:!0);this.getView().setActiveItem(4);Ext.first('#ovtHrsField').setHidden(!c.tsAllowOvtHrs);Ext.first('#ovt2HrsField').setHidden(!c.tsAllowOvt2Hrs);Ext.first('#travelHrsField').setHidden(!c.tsAllowTravelHrs);Ext.first('ts-edit-hours').down('titlebar[docked=top]').setTitle('Edit Approval Hours');b.dirty=!1},showFwa:function(){var c=this,i=c.getView(),d=c.getViewModel(),g=d.get('selectedDay'),f=Ext.first('app-tsa'),h=g.get('fwaId'),a=TS.app.settings,e=d.getStore('timesheetfwa'),b=Ext.create({xtype:'fwa-view',viewModel:{parent:d,isFromTS:!0}});e.getProxy().setExtraParams({username:a.username,id:h});e.load({callback:c.loadFwaViewSheet,scope:c});f.add(b);b.down('titlebar[docked=top]').setTitle(a.fwaAbbrevLabel+' for '+a.tsTitle);Ext.first('#fwaOpenButton').setHidden(!0);Ext.first('#fwaCopyButton').setHidden(!0);b.show();b.getViewModel().getView().getItems().items[5].setTitle(a.clientLabel+' Signature');b.getViewModel().getView().getItems().items[6].setTitle(a.crewChiefLabel+' Signature')},loadFwaViewSheet:function(i,n,o){var j=this,k=j.getViewModel(),a=i[0],f=a.get('attachments');k.set('attachments',f);if(f||a.get('clientApprovalImage')||a.get('chiefApprovalImage')){var b=a.get('attachments').filter(function(a){return a.attachmentType=='S'&&a.owningModelType=='Fwa'}),c=a.get('attachments').filter(function(a){return a.attachmentType=='E'&&a.owningModelType=='Fwa'}),g=0,h=0,d,l,e,m;Ext.each(a.get('attachments'),function(a){if(a.attachmentType=='S'&&a.owningModelType=='Fwa'){g++}if(a.attachmentType=='E'&&a.owningModelType=='Fwa'){h++}});Ext.first('#viewAllClientSignatureButton').setHidden(!0);Ext.first('#viewAllChiefSignatureButton').setHidden(!0);if(!a.get('clientApprovalImage')){if(b&&b.length>0){d=b[0].dateAttached;Ext.first('#clientApprovalDate').setValue(Ext.Date.format(new Date(d),'m/d/Y h:i A'));Ext.first('#clientApprovalImage').setSrc('data:application/octet-stream;base64,'+b[0].attachmentItem)}}if(!a.get('chiefApprovalImage')){if(c&&c.length>0){e=c[0].dateAttached;Ext.first('#chiefApprovalDate').setValue(Ext.Date.format(new Date(e),'m/d/Y h:i A'));Ext.first('#chiefApprovalImage').setSrc('data:application/octet-stream;base64,'+c[0].attachmentItem)}}}},viewAllClientSignatures:function(){var g=this,c=g.getViewModel(),b=c.getStore('signaturelist'),f=TS.app.settings,e=[],d,a,h;Ext.each(c.get('attachments'),function(a){if(a.attachmentType==AttachmentType.ClientSignature&&a.owningModelType=='Fwa'){d=Ext.create('TS.model.shared.Attachment',{attachmentId:a.attachmentId,dateAttached:a.dateAttached,attachmentItem:'data:application/octet-stream;base64,'+a.attachmentItem,attachedByEmpId:a.attachedByEmpId});e.push(d)}});b.setRemoteSort(!1);b.loadRawData(e);a=Ext.create({xtype:'fwa-signaturelist',viewModel:{parent:c}});a.lookup('signatureListTitle').setTitle(f.clientLabel+' Signature List');b.sort('dateAttached','DESC');Ext.Viewport.add(a);a.show()},viewAllChiefSignatures:function(){var g=this,c=g.getViewModel(),b=c.getStore('signaturelist'),f=TS.app.settings,e=[],d,a,h;Ext.each(c.get('attachments'),function(a){if(a.attachmentType==AttachmentType.EmpSignature&&a.owningModelType=='Fwa'){d=Ext.create('TS.model.shared.Attachment',{attachmentId:a.attachmentId,dateAttached:a.dateAttached,attachmentItem:'data:application/octet-stream;base64,'+a.attachmentItem,attachedByEmpId:a.attachedByEmpId});e.push(d)}});b.setRemoteSort(!1);b.loadRawData(e);a=Ext.create({xtype:'fwa-signaturelist',viewModel:{parent:c}});a.lookup('signatureListTitle').setTitle(f.crewChiefLabel+' Signature List');b.sort('dateAttached','DESC');Ext.Viewport.add(a);a.show()},onManageNotesTap:function(){var c=this,b=Ext.first('app-tsa'),a=Ext.create({xtype:'ts-fwanotes',viewModel:{parent:this.getViewModel()}});b.add(a);a.show()},onManageNotesTapView:function(){var d=this,e=d.getViewModel(),c=e.get('fwa'),b=TS.app.settings,a=Ext.create({xtype:'ts-fwanotes',viewModel:{parent:this.getViewModel()}});Ext.each(c.notes().getRange(),function(a){a.set('canEdit',a.get('empId')==b.empId)});Ext.Viewport.add(a);a.show()},onManageWorkCodesTapView:function(){var c=this,b=Ext.first('app-tsa'),a=Ext.create({xtype:'ts-fwaworkcodes',viewModel:{parent:this.getViewModel()}});b.add(a);a.show()},onManageHoursTapView:function(){var c=this,b=Ext.first('app-tsa'),a=Ext.create({xtype:'ts-fwahours',viewModel:{parent:this.getViewModel()}});b.add(a);a.show()},onEditHoursSave:function(){var c=this,b=c.getViewModel(),a=b.get('selectedDay'),q=Ext.first('tsa-timesheet'),g=a.get('workDate'),m=Ext.Date.format(TS.common.Util.getOutUTCDate(g),'m/d/Y'),k=a.get('regHrs'),j=a.get('ovtHrs'),i=a.get('ovt2Hrs'),f=a.get('travelHrs'),d=a.get('comment'),p=b.get('regHrsCopy'),o=b.get('ovtHrsCopy'),n=b.get('ovt2HrsCopy'),l=b.get('travelHrsCopy'),h=b.get('commentCopy'),e=Ext.first('ts-hours').down('list');if(p!=k||o!=j||n!=i||l!=f||h!=d){a.dirty=!0}a.set('workDate',m);e.deselect(a,!0);q.down('list').refresh();c.calculatePeriodTtlHrs();c.onBackBt()},onBeforeEditHoursBack:function(o){var c=this,b=c.getViewModel(),a=b.get('selectedDay'),n=a.get('regHrs'),m=a.get('ovtHrs'),l=a.get('ovt2Hrs'),k=a.get('travelHrs'),i=a.get('comment'),h=b.get('regHrsCopy'),g=b.get('ovtHrsCopy'),f=b.get('ovt2HrsCopy'),e=b.get('travelHrsCopy'),d=b.get('commentCopy'),j=Ext.first('ts-hours').down('list');if(h!=n||g!=m||f!=l||e!=k||d!=i){a.set('comment',d);a.set('ovt2Hrs',f);a.set('ovtHrs',g);a.set('regHrs',h);a.set('travelHrs',e)}j.deselect(a,!0);c.calculatePeriodTtlHrs();a.dirty=!1;c.onBackBt()},setCrewRole:function(e,b,d,f){var c=Ext.first('#hoursCrewRole'),a=b?Ext.getStore('TsEmployees').getById(b.id):null;if(a){c.setValue(Ext.getStore('Roles').getById(a.get('defaultCrewRoleId')))}},checkWbs1Information:function(c){var b=TS.app.settings,a=!0;Ext.each(c,function(d){if(!d.wbs1){Ext.Msg.alert('Warning','Missing required '+b.wbs1Label+' information on an entry');a=!1}});return a},onSaveTS:function(){var b=this,c=b.getViewModel(),h=TS.app.settings,j=c.getStore('tsheet'),i=c.getStore('tsrow').getRange(),k=i.length,f=c.getStore('tsaapprovallist'),d=[],e=0,l,a,g=!0;c.set('selectedTS',j.data.items[0].data);a=c.get('selectedTS');for(;e<k;e++){d.push(i[e].getData(!0))}g=b.checkWbs1Information(d);if(!g){return}Ext.each(d,function(a){Ext.each(a.cells,function(b){b.workDate=TS.common.Util.getOutUTCDate(b.workDate);b.startTime=TS.common.Util.getOutUTCDate(b.startTime);b.endDate=TS.common.Util.getOutUTCDate(b.endDate)})});a.rows=d;a.startDate=TS.common.Util.getOutUTCDate(a.startDate);a.endDate=TS.common.Util.getOutUTCDate(a.endDate);TimeSheet.Save(null,h.username,a,c.get('isTimesheetApproval'),function(c,d,e){if(c&&c.success){if(c.message&&c.message.mdType&&c.message.mdType=='warning'){Ext.Msg.confirm('Warning',b.getWarningMessage(c),function(g){if(g==='yes'){TimeSheet.SaveSubmitAfterWarning(null,h.username,a,!1,signatureAttachment,function(h,a,i){TS.Messages.getSimpleAlertMessage('timesheetSaveSuccess');f.load();b.onBackBt()},b,{autoHandle:!0})}})}else {TS.Messages.getSimpleAlertMessage('timesheetSaveSuccess');f.load();b.onBackBt()}}else {if(c){Ext.GlobalEvents.fireEvent('Error',Ext.JSON.encode(c))}}})},onSubmitTS:function(){var a=this,b=a.getViewModel(),k=TS.app.settings,j=Ext.first('app-tsa'),l=b.getStore('tsheet'),h=b.getStore('tsrow').getRange(),c,d,m,i=[],e,g=!0;for(var f=0;f<h.length;f++){i.push(h[f].getData(!0))}g=a.checkWbs1Information(i);if(!g){return}b.set('selectedTS',l.data.items[0].data);c=b.get('selectedTS');d=c.tsPeriodId;m=c.empId;if(k.tsReqSubmitSignature){e=Ext.create({xtype:'ts-submitpin',viewModel:{parent:a.getViewModel()},attType:'Employee',associatedRecordId:d,attachmentsList:{modelType:'TS',modelId:d,attachmentType:'E'}});j.add(e);e.show()}else {a.doSubmitTimesheet()}},tsSubmitPinClick:function(e){var a=this,f=TS.app.settings,d=a.lookup('tsSubmitPinField').getValue(),c=a.getView(),b=a.lookup('saveSignatureButton');if(!c.lookup('tsSubmitPinField').getValue()){Ext.Msg.alert('Warning','PIN and Signature are both required');b.setDisabled(!0);return}User.AuthenticatePin(window.userGlobal.dbi,d,window.userGlobal.email,function(b,c,d){if(b.data){this.doSaveSignature(e)}else {Ext.GlobalEvents.fireEvent('Message:Code','tsSubmitPinBadField');a.lookup('tsSubmitPinField').setValue('');a.getView().setLoading(!1)}},a,{autoHandle:!0})},tsaSubmitPinClick:function(e){var a=this,f=TS.app.settings,d=a.lookup('tsSubmitPinField').getValue(),c=a.getView(),b=a.lookup('saveSignatureButton');if(!c.lookup('tsSubmitPinField').getValue()){Ext.Msg.alert('Warning','PIN and Signature are both required');b.setDisabled(!0);return}User.AuthenticatePin(window.userGlobal.dbi,d,window.userGlobal.email,function(b,c,d){if(b.data){this.doSaveApprovalSignature(e)}else {Ext.GlobalEvents.fireEvent('Message:Code','tsSubmitPinBadField');a.lookup('tsSubmitPinField').setValue('');a.getView().setLoading(!1)}},a,{autoHandle:!0})},doSaveSignature:function(d){var b=this,c=TS.app.settings,k=b.getView(),j=b.getViewModel(),f=j.get('selectedTSA'),g=f.get('tsPeriodId'),h=k.down('ts-draw'),e=h.toDataURL(),i=new Blob([e],{type:'image/png'}),a;a={type:'TS',location:c.imageStorageLoc,associatedId:g,attachmentType:'E',fileExt:'png',fileName:'signature_'+Ext.data.identifier.Uuid.Global.generate(),description:c.tsTitle+' Submit Signature',file:i};b.convertFileToByteData(a.file,Ext.bind(function(f){var e=Ext.create('TS.model.shared.Attachment',{owningModelType:a.type,owningModelId:a.associatedId+'||'+c.empId,location:a.location,dateAttached:a.date||new Date(),attachmentType:a.attachmentType,extension:a.fileExt,filename:a.fileName,description:a.description,attachmentItem:f});b.doSubmitTimesheet(d,e)},b));d.up('sheet').hide()},doSaveApprovalSignature:function(d){var b=this,c=TS.app.settings,k=b.getView(),j=b.getViewModel(),f=j.get('selectedTSA'),g=f.get('tsPeriodId'),h=k.down('ts-draw'),e=h.toDataURL(),i=new Blob([e],{type:'image/png'}),a;a={type:'TSA',location:c.imageStorageLoc,associatedId:g,attachmentType:'E',fileExt:'png',fileName:'signature_'+Ext.data.identifier.Uuid.Global.generate(),description:c.tsTitle+' Approval Signature',file:i};b.convertFileToByteData(a.file,Ext.bind(function(f){var e=Ext.create('TS.model.shared.Attachment',{owningModelType:a.type,owningModelId:a.associatedId+'||'+c.empId,location:a.location,dateAttached:a.date||new Date(),attachmentType:a.attachmentType,extension:a.fileExt,filename:a.fileName,description:a.description,attachmentItem:f});b.continueAfterApprovalSignature(d,e)},b));d.up('sheet').hide()},convertFileToByteData:function(b,c){var a=new FileReader();a.onload=function(a){return function(g){var f=new Uint8Array(g.target.result),e=[];for(var d=0;d<f.length;d++){e[d]=f[d]}c(e)}}(b);a.readAsArrayBuffer(b)},doSubmitTimesheet:function(o,h){var b=this,c=b.getViewModel(),i=TS.app.settings,m=Ext.first('app-tsa'),g=c.getStore('tsaapprovallist'),j=c.getStore('tsrow').getRange(),k=c.getStore('tsheet'),a,l=j.length,e=[],f=0,n,d;c.set('selectedTS',k.data.items[0].data);a=c.get('selectedTS');for(;f<l;f++){e.push(j[f].getData(!0))}Ext.each(e,function(a){Ext.each(a.cells,function(b){b.workDate=TS.common.Util.getOutUTCDate(b.workDate);b.startTime=TS.common.Util.getOutUTCDate(b.startTime);b.endDate=TS.common.Util.getOutUTCDate(b.endDate)})});a.rows=e;a.startDate=TS.common.Util.getOutUTCDate(a.startDate);a.endDate=TS.common.Util.getOutUTCDate(a.endDate);Ext.Msg.confirm('Please Confirm','Are you sure you want to submit?',function(c){if(c==='yes'){d=h!=null?h.getData():null;TimeSheet.Submit(null,i.username,a,d,function(e,f,j){if(e&&e.success){if(e.message&&e.message.mdType&&e.message.mdType=='warning'){Ext.Msg.confirm('Warning',b.getWarningMessage(e),function(k){if(k==='yes'){TimeSheet.SaveSubmitAfterWarning(null,i.username,a,!0,d,function(d,a,i){TS.Messages.getSimpleAlertMessage('timesheetSubmitSuccess');g.load();b.onBackBt()},b,{autoHandle:!0})}})}else {TS.Messages.getSimpleAlertMessage('timesheetSubmitSuccess');g.load();b.onBackBt()}}else {if(e){Ext.GlobalEvents.fireEvent('Error',Ext.JSON.encode(e))}}})}})},getWarningMessage:function(a){var b;if(a){if(a.message){a=a.message}if(typeof a=='object'&&a.mdBody){var c='',d='';try{d=JSON.parse(a.mdBody);Ext.Array.each(d,function(b){c+=b.errorValue+'<br>'})}catch(e){c=a.mdBody}b=c+='Do you wish to continue?'}else {b=a.message}}else {b='Unknown Error - Please Contact Support'}return b},onTsHoursChange:function(b,a,c){if(!a){a=0}},onClearIconTap:function(a,b,c){a.setValue(0)}},0,0,0,0,['controller.tsa-main'],0,[TS.controller.tsa,'MainController'],0);Ext.cmd.derive('TS.model.crew.MainModel',TS.view.main.MainModel,{data:{name:'Scheduler',isScheduler:!0,fromFSS:!1},constructor:function(a){TS.view.main.MainModel.prototype.constructor.call(this,a)},getPageTitle:function(){return TS.app.settings.schedTitle}},1,0,0,0,['viewmodel.crew-main'],0,[TS.model.crew,'MainModel'],0);Ext.cmd.derive('TS.model.fwa.FwaProjectSearch',TS.model.Base,{idProperty:'id',identifier:'uuid',fields:[{name:'id',type:'auto'},{name:'fwaId',type:'string'},{name:'fwaNum',type:'string'},{name:'fwaName',type:'string'},{name:'fwaStatusId',type:'string'},{name:'fwaStatusString',type:'string'},{name:'wbs1',type:'string',allowNull:!0,convert:function(a){return a===' '||a===''?null:a}},{name:'wbs2',type:'string',allowNull:!0,convert:function(a){return a===' '||a===''?null:a}},{name:'wbs3',type:'string',allowNull:!0,convert:function(a){return a===' '||a===''?null:a}},{name:'workCodeId',type:'string'},{name:'workCodeAbbrev',type:'string'},{name:'workCodeDescr',type:'string'},{name:'schedStartDate',type:'date',dateFormat:'c'}]},0,0,0,0,0,0,[TS.model.fwa,'FwaProjectSearch'],0);Ext.cmd.derive('TS.model.ts.MainModel',TS.view.main.MainModel,{init:function(){var b=this,a=function(i){var d=[],h=TS.app.settings,c=i.getRange(),e=0,f,a,g;if(c){for(;e<c.length;e++){a=TS.common.Util.createGroupHeader(c[e]);if(a==''){a='No '+h.wbs1Label+' info for '+h.tsTitle+' period, select to enter.'}g=!1;for(f=0;f<d.length;f++){if(d[f].title===a){g=!0;break}}if(!g){d.push({seq:c[e].get('seq'),title:a})}}}b.getStore('projects').loadData(d)};b.get('timesheetfwa').on('load',function(c,a){b.set('fwa',a[0])});b.get('tsrow').on({add:a,remove:a,load:a,update:a});(arguments.callee.$previous||TS.view.main.MainModel.prototype.init).call(this)},data:{name:'Timesheet',startDate:null,endDate:null,selectedTimesheet:null,employeeSelectedTimesheet:null,hideColumn:!1,isScheduler:!1,dayCount:0,totalHours:0,employeeDisabled:!1,tsStatus:'',fromFSS:!1},formulas:{dayCount:function(e){var a=e('startDate'),c=e('endDate'),d,b,f,g;if(a){d=c.getTime()-a.getTime();b=Math.ceil(d/1000/60/60/24);if(c.getTimezoneOffset()<=a.getTimezoneOffset()){b++}}return a&&c&&b?b:0},lockEmployee:function(a){return a('employeeDisabled')},tsDisabled:function(a){return a('tsStatus')=='A'||a('tsStatus')=='S'&&!a('settings.tsAllowUnsubmit')},tsProjectEdit:function(b){var a=TS.app.settings;if(b('tsStatus')=='A'||b('tsStatus')=='S'){if(!a.tsApproverCanModify&&a.tsIsApprover){if(!a.tsAllowUnsubmit){return !0}}if(!a.tsIsApprover){return !0}}return !1}},stores:{tsheet:{model:'TS.model.ts.Tsheet',autoLoad:!0,proxy:{type:'default',directFn:'TimeSheet.GetListByEmployee',paramOrder:'dbi|username|empId|start|limit',extraParams:{start:0,limit:1000}}},tsrow:{model:'TS.model.ts.TsRow',proxy:{type:'default',directFn:'TimeSheet.GetByEmployeeByDate',paramOrder:'dbi|username|start|limit|empId|tsDate|includeCrewMembers',extraParams:{start:0,limit:1000},reader:{type:'default',rootProperty:'data.rows'}},grouper:{groupFn:TS.common.Util.createGroupHeader}},hoursview:{model:'TS.model.ts.TsCell',grouper:{groupFn:function(c){var a=new Date(c.get('workDate')),b=['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'];return b[a.getUTCDay()]+' '+(a.getUTCMonth()+1)+'/'+a.getUTCDate()+'/'+a.getUTCFullYear()},property:'workDate'}},timesheetfwa:{model:'TS.model.fwa.Fwa',proxy:{type:'default',directFn:'Fwa.Get',paramOrder:'dbi|username|id'}},projects:{fields:['seq','title']},signaturelist:{model:'TS.model.shared.Attachment',sorters:[{property:'dateAttached',direction:'ASC'}]}},getPageTitle:function(){return TS.app.settings.tsTitle}},0,0,0,0,['viewmodel.ts-main'],0,[TS.model.ts,'MainModel'],0);Ext.cmd.derive('TS.model.ts.TsTreeListModel',Ext.app.ViewModel,{formulas:{selectionText:function(d){var b=d('treelist.selection'),c=TS.app.settings,a;if(b){a=b.getPath('qtip');a=a.replace(/^\/Root/,'');return 'Selected: '+a}else {return 'No '+c.wbs1Label+' selected'}}},stores:{navItems:{type:'tree',autoLoad:!0,filterer:'bottomup',rootNode:{expanded:!1},model:'TS.model.shared.WbsProjectTree',proxy:{type:'default',directFn:'Wbs1.GetWbsProjectTree',paramOrder:'dbi|username|empId|node|app',extraParams:{app:'TS'}},remoteSort:!1}}},0,0,0,0,['viewmodel.ts-tree-list'],0,[TS.model.ts,'TsTreeListModel'],0);Ext.cmd.derive('TS.model.tsa.MainModel',Ext.app.ViewModel,{init:function(){var a=this;a.get('timesheetfwa').on('load',function(c,b){a.set('fwa',b[0])});(arguments.callee.$previous||Ext.app.ViewModel.prototype.init).call(this)},data:{name:'TimesheetApproval',startDate:null,endDate:null,selectedTimesheet:null,employeeSelectedTimesheet:null,hideColumn:!1,tsStatus:'',fromFSS:!1},getPageTitle:function(){return TS.app.settings.tsTitle+' Approvals'},formulas:{formatDateRange:function(a){var c=a('startDate'),b=a('endDate');if(c&&b){return Ext.Date.format(c,Ext.Date.defaultFormat)+'  ->  '+Ext.Date.format(b,Ext.Date.defaultFormat)}else {return ''}},dayCount:function(e){var a=new Date(e('startDate')),c=new Date(e('endDate')),d,b,f,g;if(a){d=c.getTime()-a.getTime();b=Math.ceil(d/1000/60/60/24);if(c.getTimezoneOffset()<=a.getTimezoneOffset()){b++}}return a&&c&&b?b:0},isHidden:function(a){return a('hideColumn')},hasBlankTsheet:function(a){return a('tsStatus')==='B'},tsApproverCanModify:function(a){return a('settings.tsApproverCanModify')}},stores:{tsasheet:{model:'TS.model.ts.TsSummary',autoLoad:!0,proxy:{type:'default',directFn:'TimeSheet.GetTimesheetPeriodsForApproval',paramOrder:'dbi|username'}},tsaapprovallist:{model:'TS.model.ts.TsSummaryRow',proxy:{type:'default',directFn:'TimeSheet.GetTimesheetApprovalSummary',paramOrder:'dbi|username|empId|tsPeriodId',extraParams:{tsPeriodId:0},reader:{type:'default',rootProperty:'data.rows'},pageSize:1000}},tsheet:{model:'TS.model.ts.Tsheet',remoteSort:!0,autoLoad:!1,proxy:{type:'default',directFn:'TimeSheet.GetListByEmployee',paramOrder:'dbi|username|empId|start|limit',extraParams:{start:0,limit:1000}}},tsrow:{model:'TS.model.ts.TsRow',proxy:{type:'default',directFn:'TimeSheet.GetByEmployeeByDate',paramOrder:'dbi|username|start|limit|empId|tsDate|includeCrewMembers',extraParams:{start:0,limit:1000},reader:{type:'default',rootProperty:'data.rows'}},grouper:{groupFn:TS.common.Util.createGroupHeader}},hoursview:{model:'TS.model.ts.TsCell',grouper:{groupFn:function(b){var a=new Date(b.get('workDate'));return a.getUTCMonth()+1+'/'+a.getUTCDate()+'/'+a.getUTCFullYear()},property:'workDate'}},timesheetfwa:{model:'TS.model.fwa.Fwa',proxy:{type:'default',directFn:'Fwa.Get',paramOrder:'dbi|username|id'}},signaturelist:{model:'TS.model.shared.Attachment',sorters:[{property:'dateAttached',direction:'ASC'}]}},getPageTitle:function(){return TS.app.settings.tsTitle+' Approvals'}},0,0,0,0,['viewmodel.tsa-main'],0,[TS.model.tsa,'MainModel'],0);Ext.cmd.derive('TS.view.exa.ApproveReject',Ext.Sheet,{stretchX:!0,stretchY:!0,approvalType:null,autoDestroy:!0,fullscreen:!0,layout:'card',items:[{xtype:'titlebar',itemId:'approveRejectTitleText',cls:'ts-navigation-header',title:'ApproveReject',docked:'top',items:[{xtype:'button',text:'Back',iconCls:'x-fa fa-chevron-left',align:'left',handler:'onCloseSheet'}]},{xtype:'formpanel',layout:{type:'vbox',pack:'middle'},items:[{xtype:'component',itemId:'approveRejectCommentText',margin:'0 10 10 10',html:'Please provide a comment for your approval.'},{xtype:'fieldset',items:[{xtype:'textareafield',itemId:'approveRejectComment'}]}]},{xtype:'titlebar',docked:'bottom',items:[{align:'left',text:'Save',ui:'action',iconCls:'x-fa fa-save',style:'margin-right: 5px;',handler:'sendApproveReject'},{text:'Cancel',align:'right',ui:'decline',iconCls:'x-fa  fa-times-circle-o',handler:'onCloseSheet'}]}]},0,['exp-approvereject'],['widget','component','container','panel','sheet','exp-approvereject'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'sheet':!0,'exp-approvereject':!0},['widget.exp-approvereject'],0,[TS.view.exa,'ApproveReject'],0);Ext.cmd.derive('TS.view.exa.ExpApprovalDateList',Ext.grid.Grid,{isScheduler:!1,scrollable:{directionLock:!0,x:!1},columns:[{text:'Date',dataIndex:'value',align:'center',renderer:function(b,c){var a=new Date(b);return a.getUTCMonth()+1+'/'+a.getUTCDate()+'/'+a.getUTCFullYear()},flex:1}]},0,['exp-approval-date-list'],['widget','component','container','dataview','list','grid','exp-approval-date-list'],{'widget':!0,'component':!0,'container':!0,'dataview':!0,'list':!0,'grid':!0,'exp-approval-date-list':!0},['widget.exp-approval-date-list'],0,[TS.view.exa,'ExpApprovalDateList'],0);Ext.cmd.derive('TS.view.exa.ExpApprovalListPanel',Ext.container.Container,{layout:'fit',title:'Expense List',items:[{xtype:'titlebar',cls:'ts-navigation-header',docked:'top',bind:{title:'Expenses for {formattedDate}'},items:[{xtype:'button',text:'Back',align:'left',iconCls:'x-fa fa-chevron-left',handler:'navigateBackToDateGrid'}]},{xtype:'list',reference:'exa-approvals',bind:{store:'{expapprovallist}',selection:'{selectedExpReport}'},scrollable:{directionLock:!0,x:!1},itemTpl:new Ext.XTemplate('<div style="font-weight:bold" ><h1><b>Employee&nbsp;&nbsp;</b>{[this.getEmployeeName(values)]}</div></h1>','<div style="width:100%;"><div style="float:left;width:100px;font-weight:bold;">Rpt Name</div><div style="float:right;width:100px;font-weight:bold;">Status</div><div style="margin:0 auto;width:100px;font-weight:bold;text-align: right;">Amount</div></div>','<table style="width: 90%"><tr><td style="width: 33%; text-align: left;">{[this.getReportName(values)]}</td><td style="width: 33%;text-align: right;">{[this.getAmountTotal(values)]}</td><td style="width: 33%; text-align: right;">{[this.getStatus(values)]}</td></tr></table>',{getEmployeeName:function(a){return a.empId+' - '+Ext.getStore('AllEmployees').getById(a.empId).get('empName')},getReportName:function(a){return a.reportName},getAmountTotal:function(a){return Ext.util.Format.currency(a.ttlRptExpenses,'$',2)},getStatus:function(b){var a=Ext.getStore('FwaStatus').findRecord('value',b.status);return a?a.get('description'):''}}),preventSelectionOnDisclose:!1,onItemDisclosure:!0,listeners:[{disclose:'onEditSelectedExpenses',selectionchange:'onExpensesSelectionTap'}]},{xtype:'titlebar',docked:'bottom',items:[{text:'Approve',ui:'action',align:'left',iconCls:'x-fa fa-check-circle',itemId:'approveButton',handler:'approveSelectedExpReport',bind:{disabled:'{!exa-approvals.selection}'}},{text:'Reject',ui:'decline',align:'right',iconCls:'x-fa fa-times-circle',itemId:'rejectButton',handler:'rejectSelectedExpReport',bind:{disabled:'{!exa-approvals.selection}'}}]}]},0,['exp-approval-list-panel'],['widget','component','container','exp-approval-list-panel'],{'widget':!0,'component':!0,'container':!0,'exp-approval-list-panel':!0},['widget.exp-approval-list-panel'],0,[TS.view.exa,'ExpApprovalListPanel'],0);Ext.cmd.derive('TS.view.exp.Document',Ext.Sheet,{controller:'exp-editor',stretchX:!0,stretchY:!0,approvalType:null,attachmentsList:!1,itemId:'documentSheet',autoDestroy:!0,layout:'fit',items:[{xtype:'titlebar',reference:'docTitleBar',docked:'top',cls:'ts-navigation-header',title:'Attach Document',items:[{align:'right',text:'Close',handler:'closeSheet'}]},{xtype:'formpanel',scrollable:'y',items:[{xtype:'panel',itemId:'attachFormFrame',items:[{height:15},{xtype:'container',padding:'10 0 10 0',items:[{xtype:'filefield',reference:'fileUploadField',iconCls:'x-fa fa-file-text',accept:'.*',buttonText:'Select',top:'-0.6em',right:'1em',listeners:{change:'onFileUploadChange',scope:'self.controller'}}]},{xtype:'fieldset',items:[{xtype:'displayfield',reference:'filePathField',label:'Document'},{xtype:'textfield',reference:'filenameField',maskRe:/[^!^@^$^%^~^#^&^+^=^.^*^{^}^\\^:^<^>^|^"\^]/,label:'Filename',placeHolder:'Enter document filename (*required)',required:!0,clearIcon:!0},{xtype:'textfield',reference:'descriptionField',maskRe:/[^!^@^$^%^~^#^&^+^=^.^*^{^}^\\^:^<^>^|^"\^]/,label:'Description',placeHolder:'Enter document description (*required)',required:!0,clearIcon:!0}]}]},{xtype:'fieldset',title:'Attachments',scrollable:'y',width:'90%',reference:'attachmentList'}]},{xtype:'titlebar',docked:'bottom',items:[{text:'Upload',align:'right',iconCls:'x-fa  fa-upload',ui:'action',handler:'loadExpDoc',disabled:!0,reference:'loadDoc',itemId:'loadDoc'}]}]},0,['exp-window-document'],['widget','component','container','panel','sheet','exp-window-document'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'sheet':!0,'exp-window-document':!0},['widget.exp-window-document'],0,[TS.view.exp,'Document'],0);Ext.cmd.derive('TS.view.exp.ExpEditMenu',TS.view.common.Menu,{reference:'expEditMenu',scrollable:'y',controller:'exp-editor',items:[{text:'Doc',xtype:'button',reference:'expDocButton',itemId:'expDocButton',iconCls:'x-fa fa-file-text-o',handler:'onAttachExpDoc'},{text:'Delete',iconCls:'x-fa fa-trash',reference:'expRemoveButton',itemId:'removeExpButton',handler:'removeExpForm',bind:{disabled:'{!hasExpEditRights}'}}]},0,['exp-editmenu'],['widget','component','container','panel','exp-editmenu'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'exp-editmenu':!0},['widget.exp-editmenu'],0,[TS.view.exp,'ExpEditMenu'],0);Ext.cmd.derive('TS.view.exp.ExpEditor',Ext.form.Panel,{reference:'expEditForm',scrollable:'y',items:[{xtype:'titlebar',cls:'ts-navigation-header',docked:'top',title:'Edit Expense',items:[{align:'right',iconCls:'x-fa fa-bars',handler:'onEditMenuTap',reference:'expenseEditMenuButton'}]},{xtype:'titlebar',docked:'bottom',items:[{text:{_tr:'fwaAbbrevLabel'},handler:'showFwa',reference:'showFwaButton',itemId:'showFwaButton',style:'margin-right: 5px;'},{text:'Update',align:'left',ui:'action',iconCls:'x-fa fa-save',handler:'onSaveExpense',style:'margin-right: 5px;',reference:'updateExpButton'},{text:'Cancel',align:'right',ui:'decline',iconCls:'x-fa fa-times-circle',handler:'onCancelExp',reference:'cancelExpButton'}]},{xtype:'fieldset',items:[{xtype:'textfield',reference:'eKGroup',bind:{value:'{selectedEXP.eKGroup}',hidden:!0}},{xtype:'textfield',reference:'reportName',bind:{value:'{selectedEXP.reportName}',hidden:!0}},{xtype:'datepickerfield',bind:{value:'{selectedEXP.reportDate}',hidden:!0}},{xtype:'datepickerfield',labelWidth:'35%',label:'Expense Date',bind:{value:'{selectedEXP.expDate}',readOnly:'{!hasExpEditRights}'},reference:'expDateField',picker:{yearFrom:2018,yearTo:(new Date()).getFullYear()+1},disabledCls:''},{xtype:'field-allemployees',label:'Employee',labelWidth:'35%',name:'empId',reference:'empIdField',renderer:function(c){var b=TS.app.settings,a=Ext.getStore('AllEmployees').getById(c||b.empId);return a?a.get('lname')+', '+a.get('fname'):'N/A'},bind:{value:'{selectedEXP.empId}',hidden:'{!isExa}'}},{xtype:'field-expcategory',labelWidth:'35%',label:'Category',itemId:'categoryField',reference:'categoryField',bind:{value:'{selectedEXP.category}',readOnly:'{!hasExpEditRights}'},listeners:{change:'onCategoryChange'},disabledCls:''},{xtype:'textfield',labelWidth:'35%',label:'Description',itemId:'descriptionField',bind:{value:'{selectedEXP.description}',readOnly:'{!hasExpEditRights}'},disabledCls:''},{xtype:'numberfield',labelWidth:'35%',label:'Amount',itemId:'amountField',reference:'amountField',decimalPrecision:2,bind:{value:'{selectedEXP.amount}',readOnly:'{!hasExpEditRights}'},readOnly:!0,disabledCls:''},{xtype:'field-expfwalist',labelWidth:'35%',label:{_tr:'fwaAbbrevLabel',tpl:'{0} #'},reference:'fwaNumberField',bind:'{selectedEXP.fwaNum}',readOnly:!0},{xtype:'textfield',labelWidth:'35%',label:{_tr:'fwaAbbrevLabel',tpl:'{0} Name'},reference:'fwaNameField',itemId:'fwaNameField',bind:{value:'{fwaNumberField.selection.fwaName}'},readOnly:!0},{xtype:'container',items:[{xtype:'button',top:'.0em',right:'.0em',iconCls:'x-fa fa-search',handler:'onProjectLookup',bind:{disabled:'{!hasExpEditRights}'}},{label:{_tr:'wbs1Label',tpl:'{0} #'},labelWidth:'35%',xtype:'field-wbs',modelName:'Wbs1',itemId:'fwawbs1id',reference:'wbs1combo',deferredLoad:!0,clears:['fwawbs2id','fwawbs3id'],sets:'fwawbs2id',dependencyFilter:{wbs1:'fwawbs1id'},app:'EXP',bind:{value:'{selectedEXP.wbs1}',hidden:'{hideExpWbs1}',readOnly:'{!hasExpEditRights}'},listeners:{change:'onWbs1Change'}}]},{xtype:'displayfield',labelWidth:'35%',userCls:'ts-long-label',label:{_tr:'wbs1Label',tpl:'{0} Name'},bind:{value:'{wbs1combo.selection.name}',hidden:'{hideExpWbs1Name}'}},{label:{_tr:'wbs2Label',tpl:'{0} #'},labelWidth:'35%',xtype:'field-wbs',itemId:'fwawbs2id',reference:'wbs2combo',clears:['fwawbs3id'],modelName:'Wbs2',app:'FWA',sets:'fwawbs3id',dependencyFilter:{wbs1:'fwawbs1id',wbs2:'fwawbs2id'},bind:{value:'{selectedEXP.wbs2}',hidden:'{hideExpWbs2}',readOnly:'{!hasExpEditRights}'},listeners:{change:'onWbsChange'}},{xtype:'displayfield',labelWidth:'35%',userCls:'ts-long-label',label:{_tr:'wbs2Label',tpl:'{0} Name'},bind:{value:'{wbs2combo.selection.name}',hidden:'{hideExpWbs2Name}'}},{label:{_tr:'wbs3Label',tpl:'{0} #'},labelWidth:'35%',xtype:'field-wbs',itemId:'fwawbs3id',reference:'wbs3combo',modelName:'Wbs3',app:'FWA',bind:{value:'{selectedExp.wbs3}',hidden:'{hideExpWbs3}',readOnly:'{!hasExpEditRights}'}},{xtype:'displayfield',labelWidth:'35%',label:{_tr:'wbs3Label',tpl:'{0} Name'},bind:{value:'{wbs3combo.selection.name}',hidden:'{hideExpWbs3Name}'}},{xtype:'field-expaccount',labelWidth:'35%',label:'Account',reference:'accountField',bind:{value:'{selectedEXP.account}',hidden:'{hideAccount}',readOnly:'{!hasExpEditRights}'},disabledCls:''},{xtype:'displayfield',labelWidth:'35%',label:'Account Name',bind:{value:'{accountField.selection.accountName}',hidden:'{hideAccountName}'}},{xtype:'checkboxfield',labelWidth:'35%',bind:{value:'{selectedEXP.billable}',hidden:'{!displayBillable}',disabled:'{!hasExpEditRights}'},label:'Billable',reference:'billableCheckBoxField',disabledCls:'',listeners:{change:'onBillableChange'}},{xtype:'checkboxfield',labelWidth:'35%',bind:{value:'{selectedEXP.companyPaid}',hidden:'{!displayCompanyPaid}',disabled:'{!hasExpEditRights}'},label:'Company Paid',reference:'companyPaidCheckBoxField',disabledCls:''},{xtype:'textareafield',labelWidth:'35%',label:'Business Reason',bind:{value:'{selectedEXP.reason}',readOnly:'{!hasExpEditRights}'},reference:'reasonField',hidden:!0},{xtype:'textareafield',labelWidth:'35%',label:'Name of each person',bind:{value:'{selectedEXP.other}',readOnly:'{!hasExpEditRights}'},reference:'otherField',hidden:!0},{xtype:'numberfield',labelWidth:'35%',label:{_tr:'exMileageRateLabel',tpl:'{0}s Driven'},bind:{value:'{selectedEXP.miles}',readOnly:'{settings.MileageRateReadOnly}'},reference:'milesField',listeners:{blur:'setMileageAmount'},hidden:!0},{xtype:'numberfield',labelWidth:'35%',label:'Mileage Rate',bind:{value:'{selectedEXP.amountPerMile}',readOnly:'{!hasExpEditRights}'},reference:'amountPerMileField',hidden:!0}]}]},0,['exp-edit'],['widget','component','container','panel','formpanel','exp-edit'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'formpanel':!0,'exp-edit':!0},['widget.exp-edit'],0,[TS.view.exp,'ExpEditor'],0);Ext.cmd.derive('TS.view.exp.ExpList',Ext.container.Container,{layout:'fit',items:[{xtype:'titlebar',cls:'ts-navigation-header',docked:'top',title:'Expenses',items:[{xtype:'button',text:'Back',align:'left',iconCls:'x-fa fa-chevron-left',handler:'navigateToGrid'},{align:'right',iconCls:'x-fa fa-bars',handler:'onEditListMenuTap',bind:{disabled:'{!hasExpEditRights}'}}]},{xtype:'panel',scrollable:'y',items:[{xtype:'fieldset',title:'Report Values',items:[{xtype:'displayfield',label:'Report Date',bind:'{selectedExpReport.formattedReportDate}',reference:'reportDateField',listeners:{change:'onReportDateChange'},renderer:Ext.util.Format.dateRenderer('m/d/Y')},{xtype:'textfield',label:'Report Name',reference:'reportNameText',placeHolder:'Enter Report Name',bind:'{selectedExpReport.reportName}'},{xtype:'textfield',label:'Report Status',reference:'reportStatusText',readOnly:!0,cls:'border-bottom',bind:'{selectedExpReport.statusText}'}]},{xtype:'component',height:25,html:'<div style="width:100%;"><div style="float:left;width:100px;padding-left:10px;font-weight:bold;">Date</div><div style="float:right;width:100px;font-weight:bold;">Amount</div><div style="margin:0 auto;width:100px;font-weight:bold;">Category</div></div>'},{xtype:'list',grouped:!0,reference:'expenseList',itemTpl:new Ext.XTemplate('<table style="width: 90%"><tr><td style="width: 33%; text-align: left;">{[this.getExpenseDate(values)]}</td><td style="width: 33%;text-align: center;">{[this.getExpenseCategory(values)]}</td><td style="width: 33%; text-align: right;">{[this.getExpenseAmount(values)]}</td></tr></table>',{getExpenseDate:function(a){var b=Ext.Date;return b.format(new Date(a.expDate),'m/d/Y')},getExpenseCategory:function(b){var a=Ext.getStore('ExpCategory').findRecord('category',b.category);return a.get('description')},getExpenseAmount:function(a){return Ext.util.Format.currency(a.amount,'$',2)}}),preventSelectionOnDisclose:!1,onItemDisclosure:!0,listeners:[{itemsingletap:'editSelectedExpense',itemdoubletap:'onEditExpenseDoubleTap'}],bind:{store:'{explist}',selection:'{selectedEXP}'}}]},{xtype:'titlebar',docked:'bottom',items:[{text:'Save',align:'left',ui:'action',iconCls:'x-fa fa-save',handler:'onSaveExpReport',style:'margin-right: 5px;',reference:'saveExpButton',bind:{disabled:'{!hasExpEditRights}'}},{text:'Submit',align:'right',ui:'action',iconCls:'x-fa fa-save',handler:'doSubmitExpenseReport',reference:'submitExpButton',bind:{disabled:'{!hasExpEditRights}'}}]}]},0,['exp-list'],['widget','component','container','exp-list'],{'widget':!0,'component':!0,'container':!0,'exp-list':!0},['widget.exp-list'],0,[TS.view.exp,'ExpList'],0);Ext.cmd.derive('TS.view.exp.ExpListEditMenu',TS.view.common.Menu,{scrollable:'y',items:[{text:'New',iconCls:'x-fa fa-file',reference:'addNewExpenseButton',handler:'addNewExpense'},{text:'Copy',reference:'expCopyButton',iconCls:'x-fa fa-clone',handler:'doCopyExpItem'},{text:'Delete',iconCls:'x-fa fa-trash',reference:'expListRemoveButton',handler:'removeExpListItem'}]},0,['explist-editmenu'],['widget','component','container','panel','explist-editmenu'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'explist-editmenu':!0},['widget.explist-editmenu'],0,[TS.view.exp,'ExpListEditMenu'],0);Ext.cmd.derive('TS.view.exp.ExpReportList',Ext.grid.Grid,{scrollable:!0,columns:[{text:'Date',dataIndex:'reportDate',renderer:function(a,c,d,e){var b=Ext.util.Format.date;return b(a,'m/d/Y')},flex:1},{text:'Name',dataIndex:'reportName',flex:1.5},{text:'Status',dataIndex:'status',renderer:function(b,a,c,d){var a=Ext.getStore('FwaStatus').findRecord('value',b);return a?a.get('description'):''},flex:1}]},0,['exp-report-list'],['widget','component','container','dataview','list','grid','exp-report-list'],{'widget':!0,'component':!0,'container':!0,'dataview':!0,'list':!0,'grid':!0,'exp-report-list':!0},['widget.exp-report-list'],0,[TS.view.exp,'ExpReportList'],0);Ext.cmd.derive('TS.view.exp.ExpRptEditMenu',TS.view.common.Menu,{reference:'expEditMenu',scrollable:'y',items:[{text:'Copy',xtype:'button',reference:'expCopyButton',itemId:'expCopyButton',iconCls:'x-fa fa-clone',handler:'doCopyExpReport'},{text:'Delete',iconCls:'x-fa fa-trash',reference:'expRemoveButton',itemId:'removeExpButton',handler:'removeExpReport'}]},0,['exprpt-editmenu'],['widget','component','container','panel','exprpt-editmenu'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'exprpt-editmenu':!0},['widget.exprpt-editmenu'],0,[TS.view.exp,'ExpRptEditMenu'],0);Ext.cmd.derive('TS.view.exp.ExpSubmitPin',Ext.Sheet,{stretchX:!0,stretchY:!0,approvalType:null,autoDestroy:!0,layout:'vbox',items:[{xtype:'titlebar',reference:'signatureTitleBar',title:'Expense Report Submit',docked:'top',cls:'ts-navigation-header',items:[{align:'right',text:'Close',handler:function(){this.up('sheet').hide()}}]},{xtype:'numberfield',margin:10,style:'border:1px solid #ccc',inputType:'password',minLength:4,maxLength:4,label:'PIN',reference:'expSubmitPinField'},{xtype:'component',margin:'0 10 10 10',html:'Signature'},{xtype:'ts-draw',flex:1,margin:'0 10 10 10',style:'border:1px solid #ccc;',reference:'signature'},{xtype:'titlebar',docked:'bottom',items:[{text:'Submit',iconCls:'x-fa fa-save',action:'expsign',reference:'saveSignatureButton',disabled:!0,bind:{disabled:'{signature.isClean}'}},{text:'Clear',align:'right',iconCls:'x-fa  fa-pencil-square-o',ui:'action',handler:function(a){a.up('sheet').down('ts-draw').clear()}}]}]},0,['exp-submitpin'],['widget','component','container','panel','sheet','exp-submitpin'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'sheet':!0,'exp-submitpin':!0},['widget.exp-submitpin'],0,[TS.view.exp,'ExpSubmitPin'],0);Ext.cmd.derive('TS.view.exp.ProjectLookupWindow',Ext.Sheet,{controller:'exp-editor',stretchX:!0,stretchY:!0,autoDestroy:!0,layout:'fit',items:[{xtype:'titlebar',docked:'top',cls:'ts-navigation-header',title:{_tr:'wbs1Label',tpl:'{0} Lookup'},items:[{align:'right',text:'Close',handler:'closeSheet'}]},{xtype:'tree-list',reference:'project-treelist'},{xtype:'titlebar',docked:'bottom',items:[{text:'Cancel',align:'right',iconCls:'x-fa  fa-times-circle-o',ui:'action',handler:'closeSheet'},{text:'Select',iconCls:'x-fa fa-check-square-o',align:'left',handler:'onSelectProject'}]}]},0,['exp-projectlookuptree'],['widget','component','container','panel','sheet','exp-projectlookuptree'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'sheet':!0,'exp-projectlookuptree':!0},['widget.exp-projectlookuptree'],0,[TS.view.exp,'ProjectLookupWindow'],0);Ext.cmd.derive('TS.view.fwa.AddUnitsDate',Ext.Sheet,{controller:'fwa-edit',autoDestroy:!0,layout:'fit',items:[{xtype:'titlebar',docked:'top',cls:'ts-navigation-header',items:[{xtype:'datepickerfield',name:'unitDate',label:'Date',reference:'addUnitDatePicker',itemId:'addUnitDatePicker'}]},{xtype:'titlebar',docked:'bottom',cls:'ts-navigation-header',items:[{align:'right',text:'Close',handler:'closeSheet'},{align:'left',text:'Save',handler:'saveAddUnitDate'}]}]},0,['fwa-addunitsdate'],['widget','component','container','panel','sheet','fwa-addunitsdate'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'sheet':!0,'fwa-addunitsdate':!0},['widget.fwa-addunitsdate'],0,[TS.view.fwa,'AddUnitsDate'],0);Ext.cmd.derive('TS.view.fwa.AddWorkDateHours',Ext.Sheet,{controller:'fwa-edit',autoDestroy:!0,layout:'fit',items:[{xtype:'titlebar',docked:'top',cls:'ts-navigation-header',items:[{xtype:'datepickerfield',name:'workDate',label:'Date',reference:'addWorkDatePicker',itemId:'addWorkDatePicker'}]},{xtype:'titlebar',docked:'bottom',cls:'ts-navigation-header',items:[{align:'right',text:'Close',handler:'closeSheet'},{align:'left',text:'Save',handler:'saveAddWorkDate'}]}]},0,['fwa-addworkdatehours'],['widget','component','container','panel','sheet','fwa-addworkdatehours'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'sheet':!0,'fwa-addworkdatehours':!0},['widget.fwa-addworkdatehours'],0,[TS.view.fwa,'AddWorkDateHours'],0);Ext.cmd.derive('TS.view.fwa.CrewPhoneList',Ext.Sheet,{controller:'fwa-edit',stretchX:!0,stretchY:!0,autoDestroy:!0,layout:'fit',items:[{xtype:'titlebar',docked:'top',cls:'ts-navigation-header',title:{_tr:'crewLabel',tpl:'{0} Info'},items:[{align:'right',text:'Close',handler:'closeSheet'}]},{xtype:'list',scrollable:{directionLock:!0,x:!1},bind:{data:'{crewPhoneList}'},itemTpl:new Ext.XTemplate('<div><b>{[this.getName(values)]}</b>&nbsp;&nbsp;&nbsp;&nbsp;Mobile:&nbsp;&nbsp;<a href="tel://{[this.getStrippedPhone(values)]}">{[this.getPhone(values)]}</a></div>','<div><a href="mailto:{[this.getEmail(values)]}">{[this.getEmail(values)]}</a></div>',{getName:function(a){return a.name},getPhone:function(a){return a.phone},getStrippedPhone:function(a){return a.phone.replace(/[,.-]/g,'')},getEmail:function(a){return a.email}})}]},0,['fwa-crewphones'],['widget','component','container','panel','sheet','fwa-crewphones'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'sheet':!0,'fwa-crewphones':!0},['widget.fwa-crewphones'],0,[TS.view.fwa,'CrewPhoneList'],0);Ext.cmd.derive('TS.view.fwa.DailyCrewList',Ext.Sheet,{controller:'fwa-edit',viewModel:'fwa-main',stretchX:!0,stretchY:!0,layout:'fit',autoDestroy:!0,items:[{xtype:'titlebar',docked:'top',cls:'ts-navigation-header',title:{_tr:'fwaAbbrevLabel',tpl:'Daily {0} List'},items:[{align:'right',text:'Close',handler:function(b){var a=b.up('sheet');a.hide()}}]},{xtype:'panel',layout:'vbox',items:[{xtype:'grid',cls:'taskList',title:{_tr:'crewLabelPlural'},reference:'crewGrid',itemId:'crewGrid',flex:1,scrollable:!0,hideHeaders:!0,style:'border-bottom: 1px solid blue;',columns:[{dataIndex:'crewId',hidden:!0},{dataIndex:'crewName',flex:1,text:{_tr:'crewLabel'},align:'center'}],listeners:{selectionchange:'onSelectionCrewChange'}},{xtype:'grid',cls:'taskList',title:{_tr:'fwaAbbrevLabel',tpl:'Current {0}s'},reference:'crewTaskGrid',itemId:'crewTaskGrid',hideHeaders:!0,emptyText:{_tr:'fwaAbbrevLabel',tpl:'No {0}s for selected date'},height:'50%',scrollable:!0,hidden:!0,columns:[{dataIndex:'topLevelDescription',flex:1}],listeners:{itemtap:'onSelectionFWAChange'}},{xtype:'toolbar',cls:'ts-navigation-header',reference:'crewTaskDateBar',itemId:'crewTaskDateBar',hidden:!0,layout:{pack:'center'},docked:'bottom',items:[{iconCls:'x-fa fa-arrow-left',handler:'lastCrewTaskDate',reference:'lastCrewTaskDate',itemId:'lastCrewTaskDate',align:'left'},{xtype:'displayfield',cls:'ts-navigation-header',reference:'crewTaskDateHeader',itemId:'crewTaskDateHeader',width:100,style:'color: white'},{iconCls:'x-fa fa-arrow-right',handler:'nextCrewTaskDate',reference:'nextCrewTaskDate',itemId:'nextCrewTaskDate',align:'right'}]}]}]},0,['dailycrewlist'],['widget','component','container','panel','sheet','dailycrewlist'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'sheet':!0,'dailycrewlist':!0},['widget.dailycrewlist'],0,[TS.view.fwa,'DailyCrewList'],0);Ext.cmd.derive('TS.view.fwa.DailyCrewTableList',Ext.Sheet,{controller:'fwa-edit',viewModel:'fwa-main',stretchX:!0,stretchY:!0,layout:'fit',autoDestroy:!0,items:[{xtype:'titlebar',docked:'top',cls:'ts-navigation-header',bind:{title:'Daily {settings.crewLabel} {settings.fwaAbbrevLabel} List'},items:[{align:'right',text:'Close',handler:function(b){var a=b.up('sheet');a.hide()}}]},{xtype:'panel',layout:'vbox',items:[{xtype:'grid',flex:1,itemId:'tableCrewTaskGrid',store:{model:'TS.model.fwa.Fwa',autoLoad:!0,sorters:['scheduledCrewName','schedStartDate'],proxy:{type:'default',directFn:'Fwa.GetSchedulerFwaList',paramOrder:'dbi|username|start|limit|empId|isPreparedByMe|scheduledFwas',extraParams:{scheduledFwas:!0,isPreparedByMe:'N'}},filters:[function(a){return Ext.Date.format(new Date(a.get('schedStartDate')),'m/d/Y')==Ext.Date.format(new Date(),'m/d/Y')}]},columns:[{dataIndex:'scheduledCrewName',text:'Crew',flex:0.75,ignoreExport:!0},{xtype:'datecolumn',dataIndex:'schedStartDate',format:' m/d/Y g:i A',text:'Start Date/Time',flex:0.5},{xtype:'datecolumn',dataIndex:'schedEndDate',format:' m/d/Y g:i A',text:'End Date/Time',flex:0.5},{dataIndex:'fwaName',text:'FWA',flex:1},{dataIndex:'wbs1',text:'Project #',flex:0.5},{dataIndex:'wbs1Name',text:'Project Name',flex:1.5}]},{xtype:'toolbar',cls:'ts-navigation-header',reference:'crewTaskDateBar',itemId:'crewTaskDateBar',layout:{pack:'center'},docked:'bottom',items:[{iconCls:'x-fa fa-arrow-left',handler:'lastTabletCrewTaskDate',reference:'lastTabletCrewTaskDate',itemId:'lastTabletCrewTaskDate',align:'left'},{xtype:'displayfield',padding:'0 0 0 10',cls:'ts-navigation-header',reference:'tabletCrewTaskDateHeader',itemId:'tabletCrewTaskDateHeader',width:100,style:'color: white;'},{iconCls:'x-fa fa-arrow-right',handler:'nextTabletCrewTaskDate',reference:'nextTabletCrewTaskDate',itemId:'nextTabletCrewTaskDate',align:'right'}]}]}]},0,['dailycrewtabletlist'],['widget','component','container','panel','sheet','dailycrewtabletlist'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'sheet':!0,'dailycrewtabletlist':!0},['widget.dailycrewtabletlist'],0,[TS.view.fwa,'DailyCrewTableList'],0);Ext.cmd.derive('TS.view.fwa.DailyTaskList',Ext.Sheet,{controller:'fwa-edit',viewModel:'fwa-main',stretchX:!0,stretchY:!0,layout:'fit',autoDestroy:!0,items:[{xtype:'titlebar',docked:'top',cls:'ts-navigation-header',title:{_tr:'fwaAbbrevLabel',tpl:'Daily {0} List'},items:[{align:'right',text:'Close',handler:function(b){var a=b.up('sheet');a.hide()}}]},{xtype:'panel',layout:'vbox',items:[{xtype:'grid',cls:'taskList',title:{_tr:'crewChiefLabelPlural'},reference:'crewChiefGrid',itemId:'crewChiefGrid',flex:1,scrollable:!0,hideHeaders:!0,style:'border-bottom: 1px solid blue;',columns:[{dataIndex:'crewChiefEmpId',hidden:!0},{dataIndex:'crewChiefEmpName',flex:1,text:{_tr:'crewChiefLabel'},align:'center'}],listeners:{select:'onSelectionCrewChiefChange'}},{xtype:'grid',cls:'taskList',title:{_tr:'fwaAbbrevLabel',tpl:'Current {0}s'},reference:'taskGrid',itemId:'taskGrid',emptyText:{_tr:'fwaAbbrevLabel',tpl:'No {0}s for selected date'},height:'50%',scrollable:!0,hidden:!0,hideHeaders:!0,columns:[{dataIndex:'topLevelDescription',flex:1}],listeners:{itemtap:'onSelectionFWAChange'}},{xtype:'toolbar',cls:'ts-navigation-header',reference:'taskDateBar',itemId:'taskDateBar',hidden:!0,layout:{pack:'center'},docked:'bottom',items:[{iconCls:'x-fa fa-arrow-left',handler:'lastTaskDate',reference:'lastTaskDate',itemId:'lastTaskDate',align:'left'},{xtype:'displayfield',cls:'ts-navigation-header',reference:'taskDateHeader',itemId:'taskDateHeader',width:100,style:'color: white'},{iconCls:'x-fa fa-arrow-right',handler:'nextTaskDate',reference:'nextTaskDate',itemId:'nextTaskDate',align:'right'}]}]}]},0,['dailytasklist'],['widget','component','container','panel','sheet','dailytasklist'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'sheet':!0,'dailytasklist':!0},['widget.dailytasklist'],0,[TS.view.fwa,'DailyTaskList'],0);Ext.cmd.derive('TS.view.fwa.Document',Ext.Sheet,{controller:'fwa-edit',stretchX:!0,stretchY:!0,approvalType:null,attachmentsList:!1,itemId:'documentSheet',autoDestroy:!0,layout:'fit',items:[{xtype:'titlebar',reference:'docTitleBar',docked:'top',cls:'ts-navigation-header',title:'Attach Document',items:[{align:'right',text:'Close',handler:'closeSheet'}]},{xtype:'formpanel',scrollable:'y',items:[{xtype:'panel',itemId:'attachFormFrame',items:[{height:15},{xtype:'container',padding:'10 0 10 0',items:[{xtype:'filefield',reference:'fileUploadField',iconCls:'x-fa fa-file-text',accept:'.*',buttonText:'Select',top:'-0.6em',right:'1em',listeners:{change:'onFileUploadChange',scope:'self.controller'}}]},{xtype:'fieldset',items:[{xtype:'displayfield',reference:'filePathField',label:'Document'},{xtype:'textfield',reference:'filenameField',maskRe:/[^!^@^$^%^~^#^&^+^=^.^*^{^}^\\^:^<^>^|^"\^]/,label:'Filename',placeHolder:'Enter document filename (*required)',required:!0,clearIcon:!0},{xtype:'textfield',reference:'descriptionField',maskRe:/[^!^@^$^%^~^#^&^+^=^.^*^{^}^\\^:^<^>^|^"\^]/,label:'Description',placeHolder:'Enter document description (*required)',required:!0,clearIcon:!0}]}]},{xtype:'fieldset',title:'Attachments',scrollable:'y',width:'90%',reference:'attachmentList'}]},{xtype:'titlebar',docked:'bottom',items:[{text:'From Template',ui:'action',align:'left',iconCls:'x-fa fa-file-o',handler:'loadTemplates',reference:'fromTemplateButton',bind:{hidden:'{IS_CORDOVA_APP}'}},{text:'Upload',align:'right',iconCls:'x-fa  fa-upload',ui:'action',handler:'loadFwaDoc',disabled:!0,reference:'loadDoc',itemId:'loadDoc'}]}]},0,['window-document'],['widget','component','container','panel','sheet','window-document'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'sheet':!0,'window-document':!0},['widget.window-document'],0,[TS.view.fwa,'Document'],0);Ext.cmd.derive('TS.view.fwa.EditMenu',TS.view.common.Menu,{reference:'fwaEditMenu',scrollable:'y',items:[{text:'Copy',xtype:'button',reference:'fwaCopyButton',itemId:'fwaCopyButton',iconCls:'x-fa fa-copy',handler:'doCopyFwa',bind:{hidden:'{isNewOrHideCopy}'}},{text:'Print',xtype:'button',reference:'fwaPrintButton',itemId:'fwaPrintButton',iconCls:'x-fa fa-print',handler:'onPrint',bind:{hidden:'{newFwa}'}},{text:'Email',reference:'fwaEmailButton',itemId:'fwaEmailButton',iconCls:'x-fa fa-envelope-o',handler:'onOpenEmail',bind:{hidden:'{isNewOrOffline}'}},{text:'Doc',xtype:'button',reference:'fwaDocButton',itemId:'fwaDocButton',iconCls:'x-fa fa-file-text-o',handler:'onAttachDoc',bind:{hidden:'{newFwa}'}},{text:'Photo',xtype:'button',reference:'fwaPhotoButton',itemId:'fwaPhotoButton',iconCls:'x-fa fa-camera',handler:'onAttachPhoto',bind:{hidden:'{newFwa}'}},{text:'Approve',iconCls:'x-fa fa-check-square-o',reference:'fwaApproveButton',itemId:'approveFwaButton',handler:'approveFwaForm',disabled:!0,bind:{hidden:'{notIsSchedulerAndNewFwa}'}},{text:'Remove',iconCls:'x-fa fa-trash',reference:'fwaRemoveButton',itemId:'removeFwaButton',handler:'removeFwaForm',bind:{hidden:'{notIsSchedulerAndNewFwa}'}},{text:{_tr:'fwaAbbrevLabel',tpl:'New {0}'},iconCls:'x-fa fa-file-o',action:'create-fwa',reference:'fwaCreateButton',itemId:'fwaCreateButton',bind:{hidden:'{isNewOrHideCreate}'}},{text:'Search',iconCls:'x-fa fa-search',itemId:'fwaSearchButton',handler:'searchFwaForm',bind:{hidden:'{newFwa}'}}]},0,['fwa-editmenu'],['widget','component','container','panel','fwa-editmenu'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'fwa-editmenu':!0},['widget.fwa-editmenu'],0,[TS.view.fwa,'EditMenu'],0);Ext.cmd.derive('TS.view.fwa.EditMenuOffline',TS.view.common.Menu,{reference:'fwaEditMenu',scrollable:'y',items:[{text:'Doc',xtype:'button',reference:'fwaDocButton',itemId:'fwaDocButton',iconCls:'x-fa fa-file-text-o',handler:'onAttachDoc',bind:{hidden:'{newFwa}'}},{text:'Photo',xtype:'button',reference:'fwaPhotoButton',itemId:'fwaPhotoButton',iconCls:'x-fa fa-camera',handler:'onAttachPhoto',bind:{hidden:'{newFwa}'}},{text:'Search',iconCls:'x-fa fa-search',itemId:'fwaSearchButton',handler:'searchFwaForm',bind:{hidden:'{newFwa}'}}]},0,['fwa-editmenu-offline'],['widget','component','container','panel','fwa-editmenu-offline'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'fwa-editmenu-offline':!0},['widget.fwa-editmenu-offline'],0,[TS.view.fwa,'EditMenuOffline'],0);Ext.cmd.derive('TS.view.fwa.EditNotes',Ext.Sheet,{controller:'fwa-edit',stretchX:!0,stretchY:!0,autoDestroy:!0,layout:'fit',items:[{xtype:'titlebar',cls:'ts-navigation-header',title:{_tr:'fwaAbbrevLabel',tpl:'Edit {0} Notes'},docked:'top',items:[{align:'right',text:'Cancel',handler:'closeEditNotesSheet'}]},{xtype:'textareafield',reference:'fwaNotes',maxRows:100,scrollable:{direction:'vertical',x:!1},bind:{value:'{selectedNote.contents}',disabled:'{!isCrewChief}'}},{xtype:'titlebar',docked:'bottom',items:[{align:'left',text:'Update',iconCls:'x-fa fa-save',style:'margin-right: 5px;',handler:'onEditNotesSave'},{align:'left',text:'Delete',reference:'fwaNotesDeleteBtn',hidden:!0,ui:'action',iconCls:'x-fa fa-times-circle-o',handler:'onEditNotesDelete'},{text:'Clear',align:'right',iconCls:'x-fa  fa-pencil-square-o',ui:'action',handler:'onClearNotes'}]}]},0,['fwa-editnotes'],['widget','component','container','panel','sheet','fwa-editnotes'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'sheet':!0,'fwa-editnotes':!0},['widget.fwa-editnotes'],0,[TS.view.fwa,'EditNotes'],0);Ext.cmd.derive('TS.view.fwa.EmpLaborCodeLookup',Ext.Sheet,{stretchX:!0,stretchY:!0,autoDestroy:!0,controller:'fwa-edit',layout:'vbox',items:[{xtype:'titlebar',docked:'top',cls:'ts-navigation-header',title:{_tr:'laborCodeLabel',tpl:'{0} Lookup'},items:[{align:'right',text:'Close',action:'close'}]},{xtype:'container',border:!0,style:'border: 1 px solid #000',layout:'hbox',width:'100%',margin:10,defaults:{xtype:'textfield',flex:1,readOnly:!0},items:[{label:{_tr:'laborCodeLabel'},bind:{value:'{laborCodeString}'},margin:'0 10 0 0'},{bind:{value:'{laborLabelString}'}}]},{xtype:'container',border:!0,style:'border: 1px solid #000',reference:'ts-laborCodeGridsContainer',itemId:'ts-laborCodeGridsContainer',flex:1,margin:'0 0 10 10',layout:'hbox',width:'100%'},{xtype:'titlebar',docked:'bottom',items:[{text:'Select',iconCls:'x-fa fa-check-square-o',align:'right',action:'select-laborcode'}]}]},0,['emp-laborcodelookup'],['widget','component','container','panel','sheet','emp-laborcodelookup'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'sheet':!0,'emp-laborcodelookup':!0},['widget.emp-laborcodelookup'],0,[TS.view.fwa,'EmpLaborCodeLookup'],0);Ext.cmd.derive('TS.view.main.FWAEditOffline',Ext.form.Panel,{controller:'fwa-edit',reference:'fwaEditForm',itemId:'fwaForm',scrollable:'y',items:[{xtype:'titlebar',cls:'ts-navigation-header',docked:'top',title:'Edit',items:[{xtype:'button',text:'Back',iconCls:'x-fa fa-chevron-left',action:'navigation-back',reference:'backButton'},{align:'right',iconCls:'x-fa fa-bars',handler:'onEditMenuOfflineTap',reference:'fwaEditMenuButton'}]},{xtype:'titlebar',docked:'bottom',items:[{text:'Save',align:'right',ui:'action',iconCls:'x-fa fa-save',handler:'onSaveFwa',style:'margin-right: 5px;',reference:'saveFwaButton'},{text:'Submit',align:'right',ui:'action',iconCls:'x-fa fa-save',handler:'onSubmitFwa',reference:'submitFwaButton'}]},{xtype:'fieldset',title:{_tr:'fwaLabel'},items:[{xtype:'textfield',hidden:!0,bind:'{selectedFWA.fwaId}'},{xtype:'textfield',reference:'fwaNumField',label:{_tr:'fwaAbbrevLabel',tpl:'{0} #'},bind:{readOnly:'{settings.fwaAutoNumbering}',value:'{selectedFWA.fwaNum}'}},{xtype:'textfield',label:{_tr:'fwaAbbrevLabel',tpl:'{0} Name'},reference:'fwaNameField',bind:'{selectedFWA.fwaName}'},{xtype:'displayfield',label:'Status',bind:'{selectedFWA.fwaStatusString}'},{xtype:'field-prioritylist',label:'Field Priority',itemId:'fieldPriorityField',placeHolder:'Select priority',bind:{value:'{selectedFWA.fieldPriorityId}',readOnly:'{wbsLocked}',style:'{selectedFWA.fieldPriorityColor}'}},{xtype:'button',handler:'onManageNotesTap',bind:{iconCls:'{notesCls}'},text:'Notes',cls:'ts-bt-margin-small',reference:'notesButton'},{xtype:'button',text:'Non-field Actions',iconCls:'x-fa fa-list-ol',cls:'ts-bt-margin-small',handler:'onActionLookup',reference:'nonFieldActionsButton'}]},{xtype:'fieldset',title:'General Information',reference:'offlineGeneralInformation',items:[{xtype:'displayfield',label:{_tr:'wbs1Label',tpl:'{0} #'},bind:{value:'{selectedFWA.wbs1}',hidden:'{hideFwaWbs1}'}},{xtype:'displayfield',label:{_tr:'wbs2Label',tpl:'{0} #'},bind:{value:'{selectedFWA.wbs2}',hidden:'{hideFwaWbs2}'}},{xtype:'displayfield',label:{_tr:'wbs3Label',tpl:'{0} #'},bind:{value:'{selectedFWA.wbs3}',hidden:'{hideFwaWbs3}'}},{xtype:'displayfield',userCls:'ts-long-label',label:{_tr:'wbs1Label',tpl:'{0} Name'},bind:{value:'{selectedFWA.wbs1Name}',hidden:'{hideFwaWbs1}'}},{xtype:'displayfield',userCls:'ts-long-label',label:{_tr:'wbs2Label',tpl:'{0} Name'},bind:{value:'{selectedFWA.wbs2Name}',hidden:'{hideFwaWbs2}'}},{xtype:'displayfield',label:{_tr:'wbs3Label',tpl:'{0} Name'},bind:{value:'{selectedFWA.wbs3Name}',hidden:'{hideFwaWbs3}'}},{xtype:'displayfield',userCls:'ts-long-label',reference:'clientNameField',label:{_tr:'clientLabel',tpl:'{0} Name'},bind:{value:'{wbs1combo.selection.clientName}',hidden:'{hideFwaDisplayClient}'}},{xtype:'field-schedulers',label:'Scheduled By',itemId:'scheduledByField',bind:{value:'{selectedFWA.preparedByEmpId}',readOnly:'{wbsLocked}'}},{xtype:'textfield',label:{_tr:'contactLabel'},reference:'contactField',bind:'{selectedFWA.contactInfo}'},{xtype:'segmentedbutton',cls:'filterbar-segmented-button',pressedCls:'filterbar-segmented-button-pressed',allowMultiple:!0,items:[{text:{_tr:'crewLabelPlural',tpl:'All {0}'},handler:'onAllCrewsClick',iconCls:'user',itemId:'allCrewButton',width:'50%'},{text:{_tr:'crewLabelPlural',tpl:'My {0} Only'},width:'50%',itemId:'myCrewsButton',iconCls:'compose',handler:'onMyCrewOnlyClick',pressed:!0,style:'color:white;background-color:#939393;font-weight: bold;'}],bind:{hidden:'{!newFwa}'}},{xtype:'container',style:'border-bottom: 1px solid #d0d0d0;',items:[{xtype:'button',iconCls:'x-fa fa-phone',itemId:'crewPhoneButton',handler:'onCrewPhoneClick',top:'.0em',right:'.0em',bind:{hidden:'{newFwa}'}},{xtype:'field-crewlist',label:{_tr:'crewLabel'},itemId:'crewLabel',reference:'schedCrewfield',bind:{value:'{selectedFWA.scheduledCrewId}',readOnly:'{!newFwa}'}}]},{xtype:'container',style:'border-bottom: 1px solid #d0d0d0;',items:[{xtype:'button',iconCls:'x-fa fa-file-o',itemId:'udfButton',handler:'onUdfClick',top:'.0em',right:'.0em'},{xtype:'textfield',label:{_tr:'udf_t1_Label'},bind:{value:'{selectedFWA.udf_t1}'},listeners:{focus:function(b,c){var a=b.getParent().getParent().getParent().getScrollable();TS.app.settings.currentPosition=a.position.y;if(Ext.os.is.Android&&Ext.os.is.Phone){a.scrollTo(null,700)}},blur:function(b,c){var a=b.getParent().getParent().getParent().getScrollable();if(Ext.os.is.Android&&Ext.os.is.Phone){a.scrollTo(null,TS.app.settings.currentPosition)}}}}],bind:{hidden:'{!hasUdfT1}'}},{xtype:'checkboxfield',label:'Contract?',itemId:'isContractWorkCbx',bind:{value:'{selectedFWA.isContractWork}',disabled:'{!newFwa}'}},{xtype:'checkboxfield',label:'WBS Locked',itemId:'wbsLockedCbx',reference:'wbsLockedCbx',bind:{value:'{selectedFWA.wbsLocked}',hidden:'{!newFwa}'}}]},{xtype:'fieldset',title:'Work Address',items:[{xtype:'textfield',label:'Address 1',bind:'{selectedFWA.loc.address1}',itemId:'address1Field',reference:'address1Field',listeners:{focus:function(b,c){var a=b.getParent().getParent().getScrollable();TS.app.settings.currentPosition=a.position.y;if(Ext.os.is.Android&&Ext.os.is.Phone){a.scrollTo(null,835)}},blur:function(b,c){var a=b.getParent().getParent().getScrollable();if(Ext.os.is.Android&&Ext.os.is.Phone){a.scrollTo(null,TS.app.settings.currentPosition)}}}},{xtype:'textfield',label:'Address 2',bind:'{selectedFWA.loc.address2}',itemId:'address2Field',reference:'address2Field',listeners:{focus:function(b,c){var a=b.getParent().getParent().getScrollable();TS.app.settings.currentPosition=a.position.y;if(Ext.os.is.Android&&Ext.os.is.Phone){a.scrollTo(null,885)}},blur:function(b,c){var a=b.getParent().getParent().getScrollable();if(Ext.os.is.Android&&Ext.os.is.Phone){a.scrollTo(null,TS.app.settings.currentPosition)}}}},{xtype:'textfield',label:'City',bind:'{selectedFWA.loc.city}',itemId:'cityField',reference:'cityField',listeners:{focus:function(b,c){var a=b.getParent().getParent().getScrollable();TS.app.settings.currentPosition=a.position.y;if(Ext.os.is.Android&&Ext.os.is.Phone){a.scrollTo(null,935)}},blur:function(b,c){var a=b.getParent().getParent().getScrollable();if(Ext.os.is.Android&&Ext.os.is.Phone){a.scrollTo(null,TS.app.settings.currentPosition)}}}},{xtype:'textfield',label:'State',bind:'{selectedFWA.loc.state}',itemId:'stateField',reference:'stateField',listeners:{focus:function(b,c){var a=b.getParent().getParent().getScrollable();TS.app.settings.currentPosition=a.position.y;if(Ext.os.is.Android&&Ext.os.is.Phone){a.scrollTo(null,985)}},blur:function(b,c){var a=b.getParent().getParent().getScrollable();if(Ext.os.is.Android&&Ext.os.is.Phone){a.scrollTo(null,TS.app.settings.currentPosition)}}}},{xtype:'textfield',label:'Zip',bind:'{selectedFWA.loc.zip}',itemId:'zipField',reference:'zipField',listeners:{focus:function(b,c){var a=b.getParent().getParent().getScrollable();TS.app.settings.currentPosition=a.position.y;if(Ext.os.is.Android&&Ext.os.is.Phone){a.scrollTo(null,1035)}},blur:function(b,c){var a=b.getParent().getParent().getScrollable();if(Ext.os.is.Android&&Ext.os.is.Phone){a.scrollTo(null,TS.app.settings.currentPosition)}}}},{xtype:'textfield',label:'Latitude',reference:'locLatitude',bind:'{selectedFWA.loc.latitude}',itemId:'latitudeField',listeners:{focus:function(b,c){var a=b.getParent().getParent().getScrollable();TS.app.settings.currentPosition=a.position.y;if(Ext.os.is.Android&&Ext.os.is.Phone){a.scrollTo(null,1085)}},blur:function(b,c){var a=b.getParent().getParent().getScrollable();if(Ext.os.is.Android&&Ext.os.is.Phone){a.scrollTo(null,TS.app.settings.currentPosition)}}}},{xtype:'textfield',label:'Longitude',reference:'locLongitude',bind:'{selectedFWA.loc.longitude}',itemId:'longitudeField',listeners:{focus:function(b,c){var a=b.getParent().getParent().getScrollable();TS.app.settings.currentPosition=a.position.y;if(Ext.os.is.Android&&Ext.os.is.Phone){a.scrollTo(null,1135)}},blur:function(b,c){var a=b.getParent().getParent().getScrollable();if(Ext.os.is.Android&&Ext.os.is.Phone){a.scrollTo(null,TS.app.settings.currentPosition)}}}}]},{xtype:'fieldset',title:'Dates & Times',items:[{xtype:'container',style:'border-bottom: 1px solid #d0d0d0;',items:[{xtype:'button',top:'.0em',right:'.0em',iconCls:'x-fa  fa-refresh',handler:'onResetOrderedDates',itemId:'resetOrderedDatesBtn',bind:{disabled:'{wbsLocked}'}},{xtype:'datepickerfield',label:'Date Ordered',itemId:'dateOrderedField',reference:'dateOrderedField',bind:'{selectedFWA.dateOrdered}',picker:{yearFrom:2017,yearTo:(new Date()).getFullYear()+2}}]},{xtype:'field-employee',label:'Ordered By',itemId:'orderedByField',bind:'{selectedFWA.orderedBy}'},{xtype:'datepickerfield',label:'Date Required',itemId:'dateRequiredField',reference:'dateRequiredField',bind:'{selectedFWA.dateRequired}',picker:{yearFrom:2015,yearTo:(new Date()).getFullYear()+2}},{xtype:'container',style:'border-bottom: 1px solid #d0d0d0;',items:[{xtype:'button',top:'.0em',right:'.0em',iconCls:'x-fa  fa-refresh',handler:'onResetDates',itemId:'resetDatesBtn',bind:{disabled:'{wbsLocked}'}},{xtype:'datepickerfield',label:'Start Date',itemId:'schedStartDateField',reference:'schedStartDateField',bind:'{selectedFWA.schedStartDate}',picker:{yearFrom:2015,yearTo:(new Date()).getFullYear()+2},dateFormat:'n/j/Y',listeners:{change:'onStartDateChange'}}]},{xtype:'timepickerfield',label:'Start Time',reference:'schedStartTimeField',itemId:'schedStartTimeField',bind:'{selectedFWA.schedStartDate}',dateFormat:'g:i A'},{xtype:'datepickerfield',label:'End Date',bind:'{selectedFWA.schedEndDate}',itemId:'schedEndDateField',reference:'schedEndDateField',picker:{yearFrom:2015,yearTo:(new Date()).getFullYear()+2},dateFormat:'n/j/Y',listeners:{change:'onEndDateChange'}},{xtype:'timepickerfield',label:'End Time',bind:'{selectedFWA.schedEndDate}',itemId:'schedEndTimeField',reference:'schedEndTimeField',dateFormat:'g:i A'}],listeners:{painted:function(){var a=this,d=TS.app.settings,c=a.getParent().getParent().getViewModel(),b=c.get('selectedFWA');if(b.get('recurrencePattern')){a.setTitle('Dates & Times (*recurring)')}else {a.setTitle('Dates & Times')}}}},{xtype:'fieldset',title:'Approval Requirements',items:[{xtype:'checkboxfield',bind:'{selectedFWA.clientSigReq}',label:{_tr:'clientLabel',tpl:'{0} Signature'},reference:'clientReqCheckBox'},{xtype:'checkboxfield',bind:'{selectedFWA.chiefSigReq}',label:{_tr:'crewChiefLabel',tpl:'{0} Signature'},reference:'chiefReqCheckBox'}],bind:{hidden:'{!newFwa}'}},{xtype:'fieldset',userCls:'ts-required-field',bind:{title:'Signatures',hidden:'{hideSignaturePanel}'},items:[{xtype:'container',itemId:'fwaClientSignatures',bind:{hidden:'{hideFwaClientSignatures}'},items:[{xtype:'button',iconCls:'x-fa fa-remove',itemId:'deleteClientSignatureButton',handler:'onDeleteClientSignatureClick',top:'2.8em',right:'.0em',bind:{}},{xtype:'segmentedbutton',allowMultiple:!0,items:[{cls:'ts-bt-margin-small',text:{_tr:'clientLabel',tpl:'Manage {0} Signature'},handler:'onManageClientApproval',reference:'clientApprovalButton',itemId:'clientApprovalButton',width:'75%'},{text:'View All',width:'25%',handler:'viewAllClientSignatures',itemId:'viewAllClientSignatureButton'}]},{xtype:'image',reference:'clientApprovalImage',itemId:'clientApprovalImage',attachmentId:null,height:75,hidden:!0},{xtype:'textfield',userCls:'ts-long-label',itemId:'clientApprovalDate',label:'Signature Date',bind:'{selectedFWA.clientApprovalDate}',dateFormat:'n/j/Y',component:{useMask:!1},readOnly:!0},{xtype:'container',itemId:'fwaChiefSignatures',bind:{hidden:'{hideFwaChiefSignatures}'},items:[{xtype:'button',iconCls:'x-fa fa-remove',itemId:'deleteChiefSignatureButton',handler:'onDeleteChiefSignatureClick',top:'2.8em',right:'.0em'},{xtype:'segmentedbutton',allowMultiple:!0,items:[{cls:'ts-bt-margin-small',text:{_tr:'crewChiefLabel',tpl:'Manage {0} Signature'},handler:'onManageChiefApproval',reference:'chiefApprovalButton',itemId:'chiefApprovalButton',width:'75%'},{text:'View All',width:'25%',handler:'viewAllChiefSignatures',itemId:'viewAllChiefSignatureButton'}]},{xtype:'image',reference:'chiefApprovalImage',itemId:'chiefApprovalImage',attachmentId:null,height:75,hidden:!0},{xtype:'textfield',userCls:'ts-long-label',itemId:'chiefApprovalDate',label:'Signature Date',bind:'{selectedFWA.chiefApprovalDate}',dateFormat:'n/j/Y',component:{useMask:!1},readOnly:!0}]}]}]},{xtype:'fieldset',reference:'workCodeUnitFieldset',bind:{title:'{settings.workCodeLabelPlural}'},cls:'ts-fieldset-nbr',items:[{xtype:'button',handler:'onManageWorkCodesTap',text:{_tr:'workCodeLabelPlural',tpl:'{0}'},reference:'manageWorkCodeButton',bind:{hidden:'{fwaHideWorkCodes}'}},{xtype:'button',handler:'onManageUnitsTap',text:{_tr:'unitLabelPlural',tpl:'{0}'},reference:'manageUnitsButton',bind:{hidden:'{!fwaUnitsEnabled}'}},{xtype:'button',handler:'onManageHoursTap',text:'Employee Hours',reference:'manageHoursButton'},{xtype:'button',handler:'onManageExpensesTap',text:'Employee Expenses',reference:'manageExpensesButton',bind:{hidden:'{hideExpenses}'}}]}],listeners:{painted:'onClearDirty'}},0,['fwa-edit-offline'],['widget','component','container','panel','formpanel','fwa-edit-offline'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'formpanel':!0,'fwa-edit-offline':!0},['widget.fwa-edit-offline'],0,[TS.view.main,'FWAEditOffline'],0);Ext.cmd.derive('TS.view.fwa.GoOffline',Ext.Sheet,{config:{documents:!1,photos:!1},layout:'vbox',autoDestroy:!0,title:'Load Attachments?',items:[{xtype:'panel',reference:'checkboxPanel',items:[{xtype:'checkboxfield',labelWidth:'75%',name:'documents',label:'Documents',labelAlign:'right',itemId:'documentCheckbox',style:'background-color: white',listeners:{change:function(b,a){this.up('sheet').setDocuments(a)},painted:function(b){var a=TS.app.settings;this.setLabel('Documents ('+a.documentCt+')')}}},{xtype:'checkboxfield',labelWidth:'75%',name:'photos',label:'Photos',labelAlign:'right',itemId:'photoCheckbox',style:'background-color: white',listeners:{change:function(b,a){this.up('sheet').setPhotos(a)},painted:function(b){var a=TS.app.settings;this.setLabel('Photos ('+a.photoCt+')')}}}]},{xtype:'toolbar',docked:'bottom',cls:'ts-navigation-header',items:[{text:'Go Offline',ui:'confirm',iconCls:'fa fa-wifi',handler:function(b){var a=this.up('sheet');a.fireEvent('continue',a,{documents:a.getDocuments(),photos:a.getPhotos()});a.destroy()}},{text:'Cancel',ui:'decline',handler:function(b){var a=this.up('sheet');a.fireEvent('cancel',a);a.destroy()}}]}]},0,['fwa-gooffline'],['widget','component','container','panel','sheet','fwa-gooffline'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'sheet':!0,'fwa-gooffline':!0},['widget.fwa-gooffline'],0,[TS.view.fwa,'GoOffline'],0);Ext.cmd.derive('TS.view.fwa.MainMenu',TS.view.common.Menu,{viewModel:'main',width:260,items:[{text:{_tr:'fwaAbbrevLabel',tpl:'New {0}'},iconCls:'x-fa fa-file-o',action:'create-fwa',bind:{hidden:'{notFwaCreateNew}'}},{xtype:'spacer',height:2},{text:'Print All',iconCls:'x-fa fa-print',handler:'onPrintAll'},{xtype:'spacer',height:2},{text:'Map',iconCls:'x-fa fa-map-o',handler:'onGroupMapClick'},{xtype:'spacer',height:2},{text:{_tr:'crewChiefLabelWithFwaAbbrevLabel',tpl:'{0}'},iconCls:'x-fa fa-tasks',handler:'onTaskList'},{xtype:'spacer',height:2},{text:{_tr:'crewLabelWithFwaAbbrevLabel',tpl:'{0}'},iconCls:'x-fa fa-tasks',handler:'onCrewList'},{xtype:'spacer',height:2},{text:'Refresh',iconCls:'x-fa fa-refresh',handler:'onRefreshList'}]},0,['fwa-mainmenu'],['widget','component','container','panel','fwa-mainmenu'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'fwa-mainmenu':!0},['widget.fwa-mainmenu'],0,[TS.view.fwa,'MainMenu'],0);Ext.cmd.derive('TS.view.fwa.ManageHours',Ext.Sheet,{controller:'fwa-edit',itemId:'manageHours',stretchX:!0,stretchY:!0,autoDestroy:!0,layout:'fit',items:[{xtype:'titlebar',docked:'top',cls:'ts-navigation-header',title:'Employee Hours',items:[{iconCls:'x-fa fa-plus',handler:'addHours',reference:'addHoursButton',itemId:'addButton'},{align:'right',text:'Close',handler:'closeHoursSheet'}]},{xtype:'toolbar',cls:'ts-navigation-header',reference:'workCodeDateBar',layout:{pack:'center'},docked:'top',items:[{iconCls:'x-fa fa-arrow-left',handler:'lastDate',reference:'lastDate',itemId:'lastHoursDate',align:'left'},{xtype:'displayfield',cls:'ts-navigation-header',reference:'dateHeader',itemId:'dateHeader',value:'Date',width:100,style:'color: white'},{iconCls:'x-fa fa-arrow-right',handler:'nextDate',reference:'nextDate',itemId:'nextHoursDate',align:'right'},{iconCls:'x-fa fa-calendar-plus-o',handler:'onAddWorkDate',reference:'addWorkDate',itemId:'nextHoursDate',align:'right'}]},{xtype:'grid',reference:'hoursGrid',itemId:'hoursGrid',itemTpl:'{workDate}',grouped:!0,bind:{store:'{selectedFWA.hours}',selection:'{selectedHRS}'},emptyText:'Tap plus icon to add hours',deferEmptyText:!1,plugins:[{type:'grideditable',triggerEvent:'singletap',itemId:'gridPlugin',formConfig:{items:[{xtype:'datepickerfield',name:'workDate',itemId:'hoursWorkDate',label:'Date',listeners:{change:function(a,b,c){if(a.getParent().getRecord()){a.getParent().getRecord().set('modified','M')}}}},{xtype:'selectfield',itemId:'empGroupSelect',autoSelect:!1,valueField:'empGroupId',displayField:'empGroupName',store:'EmpGroups',name:'empGroupId',label:'Group',listeners:{change:function(c,a,d){var b=Ext.getStore('Employees');b.clearFilter();if(a){if(a.get('empGroupId')>0){b.filterBy(function(b){if(!a||a.get('empGroupId')==0){return !0}return b.get('empGroupId')==a.get('empGroupId')})}}if(c.getParent().getRecord()){c.getParent().getRecord().set('modified','M')}}}},{xtype:'selectfield',autoSelect:!1,itemId:'hoursEmpName',valueField:'empId',displayField:'empName',store:'Employees',name:'empId',label:'Employee',listeners:{change:function(a,b,d){if(b){var c=b.get('defaultCrewRoleId');a.getParent().getItems().getRange()[3].setValue(c)}if(a.getParent().getRecord()){a.getParent().getRecord().set('modified','M')}}}},{xtype:'selectfield',autoSelect:!1,itemId:'hoursCrewRole',valueField:'crewRoleId',displayField:'crewRoleName',name:'crewRoleId',label:'Role',store:'ActiveRoles',reference:'employeeCrewRole',listeners:{change:function(a,b,c){if(a.getParent().getRecord()){a.getParent().getRecord().set('modified','M')}}}},{xtype:'field-workcode',autoSelect:!1,name:'workCodeId',itemId:'workCodeGridEditColumn',label:{_tr:'workCodeLabel'},listeners:{change:function(a,b,c){if(a.getParent().getRecord()){a.getParent().getRecord().set('modified','M')}}}},{xtype:'container',items:[{xtype:'button',top:'.0em',right:'.0em',iconCls:'x-fa  fa-search',handler:'onLaborCodeLookup',itemId:'laborCodeBtn'},{xtype:'textfield',itemId:'laborCodeField',name:'laborCode',reference:'laborCodeField',label:{_tr:'laborCodeLabel'},readOnly:!0}]},{xtype:'fieldset',reference:'employeeHours',itemId:'employeeHours',title:'Hours',layout:'hbox',userCls:'ts-wide-fieldset',defaults:{flex:1,labelAlign:'top'},items:[{xtype:'numberfield',itemId:'hoursRegHrs',name:'regHrs',label:'Regular',stepValue:1,style:'border: 1px solid #ccc;',listeners:{focus:function(b,c){var a=b.getParent().getParent().getScrollable();TS.app.settings.currentPosition=a.position.y;if(Ext.os.is.Android&&Ext.os.is.Phone){a.scrollTo(null,250)}},blur:function(b,c){var a=b.getParent().getParent().getScrollable();if(Ext.os.is.Android&&Ext.os.is.Phone){a.scrollTo(null,TS.app.settings.currentPosition)}},change:function(a,c,d,e){var b=a.getParent().getItems().getRange()[4];if(a.getParent().getParent().getRecord()){b.setValue('M')}}}},{xtype:'numberfield',itemId:'hoursOvtHrs',name:'ovtHrs',label:'Ovt',stepValue:1,style:'border: 1px solid #ccc;',reference:'ovtHrsField',listeners:{focus:function(b,c){var a=b.getParent().getParent().getScrollable();TS.app.settings.currentPosition=a.position.y;if(Ext.os.is.Android&&Ext.os.is.Phone){a.scrollTo(null,250)}},blur:function(b,c){var a=b.getParent().getParent().getScrollable();if(Ext.os.is.Android&&Ext.os.is.Phone){a.scrollTo(null,TS.app.settings.currentPosition)}},change:function(a,c,d,e){var b=a.getParent().getItems().getRange()[4];if(a.getParent().getParent().getRecord()){b.setValue('M')}}}},{xtype:'numberfield',itemId:'hoursOvt2Hrs',name:'ovt2Hrs',label:'Ovt 2',stepValue:1,style:'border: 1px solid #ccc;',reference:'ovt2HrsField',listeners:{focus:function(b,c){var a=b.getParent().getParent().getScrollable();TS.app.settings.currentPosition=a.position.y;if(Ext.os.is.Android&&Ext.os.is.Phone){a.scrollTo(null,250)}},blur:function(b,c){var a=b.getParent().getParent().getScrollable();if(Ext.os.is.Android&&Ext.os.is.Phone){a.scrollTo(null,TS.app.settings.currentPosition)}},change:function(a,c,d,e){var b=a.getParent().getItems().getRange()[4];if(a.getParent().getParent().getRecord()){b.setValue('M')}}}},{xtype:'numberfield',itemId:'hoursTravelHrs',name:'travelHrs',label:'Travel',stepValue:1,style:'border: 1px solid #ccc;',reference:'travelHrsField',listeners:{focus:function(b,c){var a=b.getParent().getParent().getScrollable();TS.app.settings.currentPosition=a.position.y;if(Ext.os.is.Android&&Ext.os.is.Phone){a.scrollTo(null,250)}},blur:function(b,c){var a=b.getParent().getParent().getScrollable();if(Ext.os.is.Android&&Ext.os.is.Phone){a.scrollTo(null,TS.app.settings.currentPosition)}},change:function(a,c,d,e){var b=a.getParent().getItems().getRange()[4];if(a.getParent().getParent().getRecord()){b.setValue('M')}}}},{xtype:'textfield',name:'modified',reference:'modifiedField',hidden:!0}]},{xtype:'fieldset',title:'Comments',layout:'hbox',height:'auto',userCls:'ts-wide-fieldset',defaults:{flex:1,labelAlign:'top'},items:[{xtype:'textareafield',maxLength:255,itemId:'hoursComments',name:'comment',height:'auto',scrollable:'y',listeners:{focus:function(b,c){var a=b.getParent().getParent().getScrollable();TS.app.settings.currentPosition=a.position.y;if(Ext.os.is.Android&&Ext.os.is.Phone){a.scrollTo(null,350)}},blur:function(b,c){var a=b.getParent().getParent().getScrollable();if(Ext.os.is.Android&&Ext.os.is.Phone){a.scrollTo(null,TS.app.settings.currentPosition)}},change:function(a,b,c){if(a.getParent().getRecord()){a.getParent().getRecord().set('modified','M')}}}}]},{xtype:'button',name:'dummy',text:'  ',height:300,listeners:{painted:function(a){if(Ext.os.is.Android&&Ext.os.is.Phone){a.hidden=!1}else {a.hidden=!0}}}}]},toolbarConfig:{xtype:'titlebar',docked:'top',items:[{xtype:'button',ui:'decline',text:'Cancel',align:'right',action:'cancel'},{xtype:'button',ui:'confirm',text:'Save',align:'left',action:'submit'}]}}],columns:[{xtype:'datecolumn',reference:'workDateField',hidden:!0,text:'Start',dataIndex:'workDate',format:'n/j/Y',editable:!0,width:100,renderer:function(a){return a||'-'}},{text:'Employee',dataIndex:'empId',height:50,flex:1,renderer:function(b){var a=Ext.getStore('AllEmployees').getById(b);return a?a.get('empName'):'N/A'}},{text:{_tr:'workCodeLabel'},dataIndex:'workCodeId',flex:2,renderer:function(b){var a=Ext.getStore('WorkCodes').getById(b);return a?a.get('workCodeAbbrev')+'-'+a.get('workCodeDescr'):'N/A'}},{hidden:!0,text:'Group',flex:0.5,dataIndex:'empGroupId'},{dataIndex:'modified',hidden:!0}]}]},0,['fwa-managehours'],['widget','component','container','panel','sheet','fwa-managehours'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'sheet':!0,'fwa-managehours':!0},['widget.fwa-managehours'],0,[TS.view.fwa,'ManageHours'],0);Ext.cmd.derive('TS.view.fwa.ManageNonFieldActions',Ext.Sheet,{controller:'fwa-edit',stretchX:!0,stretchY:!0,autoDestroy:!0,layout:'fit',items:[{xtype:'titlebar',docked:'top',cls:'ts-navigation-header',title:'Non-Field Actions',items:[{align:'right',text:'Close',handler:'closeSheet'}]},{xtype:'list',scrollable:{directionLock:!0,x:!1},bind:{store:'{selectedFWA.nonFieldActions}'},itemTpl:new Ext.XTemplate('<table><tr><td><b>Action:</b></td><td>{[this.getAction(values)]}&nbsp;</td><td><b>Type:&nbsp;</b>{actionTypeId}</td></tr><tr><td><b>Assigned To:</b></td><td>{[this.getOwner(values)]}</td></tr><tr><td><b>Complete Date:</b></td><td>{[this.getFormattedDate(values)]}</td></tr></table>','<div><b>Notes:&nbsp;</b>{actionNotes}</div>',{getAction:function(a){return a.actionItemDescr!=null?a.actionItemDescr:''},getType:function(a){},getOwner:function(b){var a;if(b.actionOwnerId){a=Ext.getStore('AllEmployees').getById(b.actionOwnerId)}return a!=null?a.get('empName'):''},getNotes:function(a){return a.actionNotes!=null?a.actionNotes:''},getFormattedDate:function(a){return a.actionDateCompleted!=null?Ext.Date.format(new Date(a.actionDateCompleted),'m/d/y'):''}})}]},0,['fwa-nonfieldactions'],['widget','component','container','panel','sheet','fwa-nonfieldactions'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'sheet':!0,'fwa-nonfieldactions':!0},['widget.fwa-nonfieldactions'],0,[TS.view.fwa,'ManageNonFieldActions'],0);Ext.cmd.derive('TS.view.fwa.ManageNotes',Ext.Sheet,{controller:'fwa-edit',stretchX:!0,stretchY:!0,autoDestroy:!0,layout:'fit',items:[{xtype:'panel',scrollable:!1,layout:'fit',items:[{xtype:'titlebar',docked:'top',cls:'ts-navigation-header',title:{_tr:'fwaAbbrevLabel',tpl:'{0} Notes'},items:[{align:'right',text:'Close',handler:'closeSheet'}]},{xtype:'list',itemId:'notesList',reference:'notesList',scrollable:'y',disableSelection:!0,bind:{store:'{notesview}',selection:'{selectedNote}'},itemTpl:new Ext.XTemplate('<tpl if="canEdit">','<div style="margin-left: 15%;">','\t<div class="message-name-mine">{[this.getEmployee(values)]}</div>','\t<div class="notes mine">','\t\t<div style="word-wrap: break-word">{contents}','       <p class="message-datetime"><div class="message-datetime">{[this.getModDate(values)]}</div></p>','   </div>','</div>','<tpl else>','<div style="margin-right: 15%;">','\t<div class="message-name-other">{[this.getEmployee(values)]}</div>','\t<div class="notes other">','\t\t<div style="word-wrap: break-word">{contents}','       <p class="message-datetime"><div class="message-datetime">{[this.getModDate(values)]}</div></p>','   </div>','</div>','</tpl>',{getEmployee:function(a){var b=Ext.getStore('AllEmployees').getById(a.empId);return b.get('empName')},getModDate:function(a){return Ext.Date.format(a.modDate,'Y-m-d h:i A')}})},{xtype:'toolbar',docked:'bottom',items:[{xtype:'textareafield',scrollable:{directionLock:!0,x:!1},flex:5,style:{'border':'1'},name:'message',itemId:'textAreaMessage',listeners:{change:'onTextAreaChange'}},{xtype:'button',handler:'onEditNotesSave',itemId:'postNoteButton',ui:'action',flex:1,text:'Update',disabled:!0}]}]}]},0,['fwa-notes'],['widget','component','container','panel','sheet','fwa-notes'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'sheet':!0,'fwa-notes':!0},['widget.fwa-notes'],0,[TS.view.fwa,'ManageNotes'],0);Ext.cmd.derive('TS.view.fwa.ManageUnitDetails',Ext.Sheet,{controller:'fwa-edit',stretchX:!0,stretchY:!0,autoDestroy:!0,layout:'fit',listeners:{hide:'closeDetailsSheet'},bind:{disabled:'{fwaUnitsReadOnly}'},items:[{xtype:'titlebar',docked:'top',cls:'ts-navigation-header',title:'Mileage Details',items:[{iconCls:'x-fa fa-plus',handler:'addUnitDetails',reference:'addUnitDetailsButton'},{align:'right',text:'Close',handler:'closeDetailsSheet'}],reference:'topToolbar'},{xtype:'titlebar',docked:'bottom',items:[{text:'Open',ui:'action',hidden:!0,bind:{disabled:'{!unitdetailsGrid.selection}'},align:'right',iconCls:'x-fa fa-external-link',handler:'onUnitDetailSelection'}]},{xtype:'grid',reference:'unitDetailsGrid',itemId:'unitDetailsGrid',bind:{store:'{selectedUnitDetails}',selection:'{selectedDetail}'},emptyText:{_tr:'unitLabelPlural',tpl:'Tap plus icon to add mileage details'},deferEmptyText:!1,plugins:{type:'grideditable',triggerEvent:'singletap',formConfig:{viewModel:{},items:[{xtype:'datepickerfield',itemId:'unitDetailDate',name:'dtDate',label:'Date',bind:{value:'{selectedDetail.dtDate}'}},{xtype:'textfield',itemId:'unitDetailFrom',name:'from',label:'From',bind:{value:'{selectedDetail.from}'},listeners:{focus:function(b,c){var a=b.getParent().getScrollable();if(Ext.os.is.Android&&Ext.os.is.Phone){a.scrollTo(null,25)}}}},{xtype:'textfield',itemId:'unitDetailTo',name:'to',label:'To',bind:{value:'{selectedDetail.to}'},listeners:{focus:function(b,c){var a=b.getParent().getScrollable();if(Ext.os.is.Android&&Ext.os.is.Phone){a.scrollTo(null,75)}}}},{xtype:'numberfield',itemId:'unitDetailLValue1',name:'lValue1',reference:'lValue1',label:'Starting Odometer',stepValue:1,bind:{value:'{selectedDetail.lValue1}'},listeners:{change:function(a,b,e){var c=a.getParent().getItems().getRange()[4].getValue(),d=a.getParent().getItems().getRange()[5];d.setValue(c-b)},focus:function(b,c){var a=b.getParent().getScrollable();if(Ext.os.is.Android&&Ext.os.is.Phone){a.scrollTo(null,125)}}}},{xtype:'numberfield',itemId:'unitDetailLValue2',name:'lValue2',reference:'lValue2',label:'Ending Odometer',stepValue:1,bind:{value:'{selectedDetail.lValue2}'},listeners:{change:function(a,b,e){var c=a.getParent().getItems().getRange()[3].getValue(),d=a.getParent().getItems().getRange()[5];d.setValue(b-c)},focus:function(b,c){var a=b.getParent().getScrollable();if(Ext.os.is.Android&&Ext.os.is.Phone){a.scrollTo(null,175)}}}},{xtype:'numberfield',itemId:'unitDetailLValue3',label:'Miles',reference:'lValue3',name:'lValue3',bind:{value:'{selectedDetail.lValue3}'},readOnly:!0,listeners:{focus:function(b,c){var a=b.getParent().getScrollable();if(Ext.os.is.Android&&Ext.os.is.Phone){a.scrollTo(null,215)}}}},{xtype:'fieldset',title:'Description',layout:'hbox',height:'auto',userCls:'ts-wide-fieldset',defaults:{flex:1,labelAlign:'top'},items:[{xtype:'textareafield',itemId:'unitDetailSValue1',name:'sValue1',height:'auto',scrollable:'y',bind:{value:'{selectedDetail.sValue1}'},listeners:{focus:function(b,c){var a=b.getParent().getParent().getScrollable();if(Ext.os.is.Android&&Ext.os.is.Phone){a.scrollTo(null,250)}}}}]},{xtype:'textareafield',readOnly:!0,disabled:!0,border:!1,minHeight:'300px',scrollable:'y'}]},toolbarConfig:{xtype:'titlebar',docked:'top',items:[{xtype:'button',ui:'decline',text:'Cancel',align:'right',action:'cancel'},{xtype:'button',ui:'confirm',text:'Save',align:'left',action:'submit',reference:'submitUnitDetailButton'}]}},columns:[{xtype:'datecolumn',text:'Date',dataIndex:'dtDate',flex:1,format:'n/j/Y',editable:!0},{text:'Starting Odom',dataIndex:'lValue1',flex:1},{text:'Ending Odom',dataIndex:'lValue2',flex:1}]}]},0,['fwa-manageunitdetails'],['widget','component','container','panel','sheet','fwa-manageunitdetails'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'sheet':!0,'fwa-manageunitdetails':!0},['widget.fwa-manageunitdetails'],0,[TS.view.fwa,'ManageUnitDetails'],0);Ext.cmd.derive('TS.view.fwa.ManageUnits',Ext.Sheet,{controller:'fwa-edit',itemId:'manageUnits',stretchX:!0,stretchY:!0,autoDestroy:!0,layout:'fit',items:[{xtype:'titlebar',docked:'top',cls:'ts-navigation-header',title:{_tr:'unitLabelPlural'},items:[{iconCls:'x-fa fa-plus',handler:'addUnits',reference:'addUnitsButton',itemId:'addButton'},{align:'right',text:'Close',handler:'closeSheet'}],reference:'topToolbar'},{xtype:'toolbar',cls:'ts-navigation-header',reference:'unitDateBar',hidden:!1,layout:{pack:'center'},docked:'top',items:[{iconCls:'x-fa fa-arrow-left',handler:'lastUnitsDate',reference:'lastUnitsDate',itemId:'lastUnitsDate',align:'left'},{xtype:'displayfield',cls:'ts-navigation-header',reference:'unitsDateHeader',itemId:'unitsDateHeader',value:'Date',width:100,style:'color: white'},{iconCls:'x-fa fa-arrow-right',handler:'nextUnitsDate',reference:'nextUnitsDate',itemId:'nextUnitsDate',align:'right'},{iconCls:'x-fa fa-calendar-plus-o',handler:'onAddUnitsDate',reference:'addUnitsDate',itemId:'nextUnitsDate',align:'right'}]},{xtype:'grid',reference:'unitCodeGrid',itemId:'unitCodeGrid',bind:{store:'{selectedFWA.units}',selection:'{selectedUnit}',disabled:'{fwaUnitsReadOnly}'},emptyText:{_tr:'unitLabelPlural',tpl:'Tap plus icon to add {0}'},deferEmptyText:!1,plugins:{type:'grideditable',triggerEvent:'singletap',formConfig:{viewModel:{},items:[{xtype:'datepickerfield',name:'unitDate',itemId:'unitDate',label:'Date'},{xtype:'field-unitcode',itemId:'unitCodeCombo',autoSelect:!1,name:'unitCodeCombo',reference:'unitCodeCombo',label:{_tr:'unitLabel'},bind:{value:'{unitCodeCombo.selection.unitCodeId}',readOnly:'{fwaUnitsReadOnly}'},listeners:{change:function(f,a){var e=f,b=Ext.getStore('UnitCode'),d=Ext.getStore('EquipmentList'),c;if(a&&!IS_OFFLINE){d.getProxy().extraParams['unitCodeId']=a.getId();d.load()}if(b&&a){c=b.getById(a.get('unitCodeId')).get('requireDetail')=='M';e.getParent().getItems().getRange()[7].setHidden(!c)}}}},{xtype:'hiddenfield',name:'unitCodeId',bind:'{unitCodeCombo.selection.unitCodeId}'},{xtype:'displayfield',name:'unitCodeName',itemId:'unitCodeName',label:'Name',bind:{value:'{unitCodeCombo.selection.unitCodeName}'}},{xtype:'numberfield',name:'quantity',itemId:'quantity',label:'Quantity',stepValue:1,bind:{value:'{selectedUnit.quantity}'},listeners:{focus:function(b,c){var a=b.getParent().getScrollable();TS.app.settings.currentPosition=a.position.y;if(Ext.os.is.Android&&Ext.os.is.Phone){a.scrollTo(null,120)}},blur:function(b,c){var a=b.getParent().getScrollable();if(Ext.os.is.Android&&Ext.os.is.Phone){a.scrollTo(null,TS.app.settings.currentPosition)}}}},{xtype:'field-equipment',autoSelect:!1,label:'Equipment',itemId:'equipmentName',reference:'equipmentCombo',name:'equipmentName'},{xtype:'textareafield',itemId:'unitComments',name:'comments',label:'Comments',maxLength:255,hidden:!1,listeners:{focus:function(b,c){var a=b.getParent().getScrollable();TS.app.settings.currentPosition=a.position.y;if(Ext.os.is.Android&&Ext.os.is.Phone){a.scrollTo(null,220)}},blur:function(b,c){var a=b.getParent().getScrollable();if(Ext.os.is.Android&&Ext.os.is.Phone){a.scrollTo(null,TS.app.settings.currentPosition)}}}},{xtype:'hiddenfield',name:'equipmentId',itemId:'unitEquipmentId',bind:'{equipmentCombo.selection.equipmentId}'},{xtype:'button',text:'Details',iconCls:'x-fa fa-car',itemId:'onUnitDetailsButton',reference:'onUnitDetailsButton',action:'showUnitDetails'},{xtype:'button',name:'dummy',text:'  ',height:300,listeners:{painted:function(a){if(Ext.os.is.Android&&Ext.os.is.Phone){a.hidden=!1}else {a.hidden=!0}}}}]},toolbarConfig:{xtype:'titlebar',docked:'top',items:[{xtype:'button',ui:'decline',text:'Cancel',align:'right',action:'cancel'},{xtype:'button',ui:'confirm',text:'Save',align:'left',action:'submit',reference:'submitUnitButton'}]}},columns:[{text:{_tr:'unitLabel'},dataIndex:'unitCodeId',flex:1,renderer:function(b){var a=Ext.getStore('UnitCode').getById(b);return a?a.get('unitCodeAbbrev'):'N/A'},plugins:'responsive',responsiveConfig:{portrait:{hidden:!0},landscape:{hidden:!1}}},{text:'Name',dataIndex:'unitCodeId',flex:2,renderer:function(b){var a=Ext.getStore('UnitCode').getById(b);return a?a.get('unitCodeName'):'N/A'}},{xtype:'datecolumn',reference:'unitDateField',format:'n/j/Y',editable:!1,text:'Date',dataIndex:'unitDate',flex:1.5,hidden:!0},{text:'Equipment',dataIndex:'equipmentName',itemId:'gridEquipmentName',flex:2},{text:'Qty',dataIndex:'quantity',flex:1}]}]},0,['fwa-manageunits'],['widget','component','container','panel','sheet','fwa-manageunits'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'sheet':!0,'fwa-manageunits':!0},['widget.fwa-manageunits'],0,[TS.view.fwa,'ManageUnits'],0);Ext.cmd.derive('TS.view.fwa.ManageWorkCodes',Ext.Sheet,{controller:'fwa-edit',stretchX:!0,stretchY:!0,autoDestroy:!0,layout:'fit',items:[{xtype:'titlebar',docked:'top',cls:'ts-navigation-header',title:{_tr:'workCodeLabelPlural'},items:[{iconCls:'x-fa fa-plus',handler:'addWorkCodes',reference:'addWorkCodeButton',itemId:'addButton'},{align:'right',text:'Close',handler:'closeSheet'}],reference:'topToolbar'},{xtype:'grid',reference:'workCodeGrid',itemId:'workCodeGrid',bind:{store:'{selectedFWA.workSchedAndPerf}',selection:'{selectedWSP}'},emptyText:{_tr:'workCodeLabelPlural',tpl:'Tap plus icon to add {0}'},deferEmptyText:!1,plugins:{type:'grideditable',triggerEvent:'singletap',enableDeleteButton:!0,formConfig:{viewModel:{},items:[{xtype:'field-workcode',autoSelect:!1,name:'workCodeCombo',reference:'workCodeCombo',label:{_tr:'workCodeLabel'},bind:'{workCodeCombo.selection.workCodeId}'},{xtype:'hiddenfield',name:'workCodeId',bind:'{workCodeCombo.selection.workCodeId}'},{xtype:'numberfield',name:'scheduledHours',label:'Scheduled',minValue:0,stepValue:1,listeners:{change:function(b,a,c){if(a<0){b.setValue(0)}}}},{xtype:'numberfield',name:'actualHours',itemId:'wcActualHrs',label:'Actual',minValue:0,stepValue:1},{xtype:'displayfield',label:'Description',bind:'{workCodeCombo.selection.workCodeDescr}'},{xtype:'numberfield',label:'% Complete',itemId:'wcPercentComplete',name:'pctComplete',bind:{hidden:'{!settings.fwaDisplayWorkCodePctComplete}'},renderer:Ext.util.Format.numberRenderer('00%')},{xtype:'textfield',name:'comments',label:'Comments',maxLength:255,listeners:{focus:function(b,c){var a=b.getParent().getScrollable();if(Ext.os.is.Android&&Ext.os.is.Phone){a.scrollTo(null,125)}}}},{xtype:'checkboxfield',name:'picRequired',label:'Photo Req'},{xtype:'button',text:'Photo',iconCls:'x-fa fa-camera',handler:'onAttachPhoto',reference:'addPhotoWorkCodeButton',itemId:'addPhotoWorkCodeButton'},{xtype:'button',text:'Doc',iconCls:'x-fa fa-file-text-o',handler:'onAttachDoc',reference:'addDocButton',itemId:'addDocButton'},{xtype:'button',name:'dummy',text:'  ',height:300,listeners:{painted:function(a){if(Ext.os.is.Android&&Ext.os.is.Phone){a.hidden=!1}else {a.hidden=!0}}}}]},toolbarConfig:{xtype:'titlebar',docked:'top',items:[{xtype:'button',ui:'decline',text:'Cancel',align:'right',action:'cancel'},{xtype:'button',ui:'confirm',text:'Save',align:'left',action:'submit',reference:'submitWorkCodeButton'}]}},columns:[{text:{_tr:'workCodeLabel'},dataIndex:'workCodeId',flex:1,renderer:function(b){var a=Ext.getStore('WorkCodes').getById(b);return a?a.get('workCodeAbbrev'):'N/A'}},{text:'Scheduled',dataIndex:'scheduledHours',flex:1},{text:'Actual',dataIndex:'actualHours',flex:1}]}]},0,['fwa-manageworkcodes'],['widget','component','container','panel','sheet','fwa-manageworkcodes'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'sheet':!0,'fwa-manageworkcodes':!0},['widget.fwa-manageworkcodes'],0,[TS.view.fwa,'ManageWorkCodes'],0);Ext.cmd.derive('TS.view.fwa.Search',Ext.Sheet,{controller:'fwa-edit',stretchX:!0,stretchY:!0,autoDestroy:!0,layout:'fit',items:[{xtype:'titlebar',docked:'top',cls:'ts-navigation-header',title:{_tr:'fwaAbbrevLabel',tpl:'{0} Search'},items:[{align:'right',text:'Close',handler:'closeSheet'}]},{xtype:'formpanel',scrollable:'y',items:[{xtype:'fieldset',items:[{xtype:'textfield',itemId:'clientSearch',label:{_tr:'clientLabel',tpl:'{0}:'},labelWidth:'40%'},{xtype:'textfield',itemId:'wbs1Search',label:{_tr:'wbs1Label',tpl:'{0}:'},labelWidth:'40%'},{xtype:'textfield',itemId:'wbs2Search',label:{_tr:'wbs2Label',tpl:'{0}:'},labelWidth:'40%',bind:{hidden:'{hideFwaWbs2}'}},{xtype:'textfield',itemId:'wbs3Search',label:{_tr:'wbs3Label',tpl:'{0}:'},labelWidth:'40%',bind:{hidden:'{hideFwaWbs3}'}}]},{xtype:'container',items:[{xtype:'button',top:'-0.6em',right:'1em',iconCls:'x-fa fa-refresh',handler:'onClearSearchDates'}]},{xtype:'fieldset',title:'Search Dates',items:[{xtype:'datepickerfield',itemId:'startDateSearch',label:{_tr:'fwaAbbrevLabel',tpl:'For {0}s from:'},labelWidth:'40%'},{xtype:'datepickerfield',itemId:'endDateSearch',label:'To:',labelWidth:'40%'}]},{xtype:'container',items:[{xtype:'button',top:'-0.6em',right:'1em',iconCls:'x-fa fa-refresh',handler:'onClearSelections',itemId:'clearSelectionButton'}]},{xtype:'fieldset',padding:'0 40 0 40',title:{_tr:'workCodeLabelPlural',tpl:'Filter For {0}'},reference:'searchForm',items:[{xtype:'list',fullscreen:!1,scrollable:'y',mode:'MULTI',name:'workCodeList',itemId:'workCodeList',itemTpl:new Ext.XTemplate('<p>{[this.getWorkCodeAbbrev(values)]} - {[this.getDescription(values)]}</p>',{getWorkCodeAbbrev:function(a){return a.workCodeAbbrev},getDescription:function(a){return a.workCodeDescr}})}]},{xtype:'fieldset',title:{_tr:'fwaAbbrevLabel',tpl:'{0} Search Results'},reference:'searchResultSet',hidden:!0,items:[{xtype:'list',emptyText:{_tr:'fwaAbbrevLabel',tpl:'No Matching {0}s'},deferEmptyText:!1,fullscreen:!1,scrollable:'y',mode:'SINGLE',name:'resultList',reference:'fwaResultList',store:{model:'TS.model.fwa.FwaProjectSearch',autoLoad:!1,proxy:{type:'default',directFn:'Fwa.SearchForFwas',paramOrder:'dbi|username|fwaId|searchParameters'}},itemId:'resultsList',itemTpl:new Ext.XTemplate('<div style="font-weight: bold;">#{fwaNum} - {fwaName}</div><div >{[this.formatDate(values)]} - {fwaStatusString}</div>',{formatDate:function(a){var b=Ext.util.Format.date;return '<span>'+b(a.schedStartDate,'n/j/Y')+'</span>&nbsp;&nbsp;<span>'+b(a.schedStartDate,'h:i A')+'</span>'},getFwaNumber:function(a){return a.fwaNum},getDescription:function(a){return a.fwaName}}),listeners:{itemdoubletap:'viewSelectedResult'}}]}]},{xtype:'titlebar',docked:'bottom',items:[{text:'View',align:'left',iconCls:'x-fa fa-pencil',handler:'viewSelectedResult',itemId:'viewButton',hidden:!0,bind:{disabled:'{!fwaResultList.selection}'}},{text:'Search',align:'right',ui:'action',iconCls:'x-fa fa-search',handler:'searchPrior',itemId:'searchButton'},{text:'Search',align:'right',ui:'action',iconCls:'x-fa fa-repeat ',handler:'resetSearch',itemId:'resetSearchButton',hidden:!0},{text:'Cancel',style:'margin-left: 5px;',align:'right',ui:'action',handler:'closeSheet'}]}]},0,['fwa-search'],['widget','component','container','panel','sheet','fwa-search'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'sheet':!0,'fwa-search':!0},['widget.fwa-search'],0,[TS.view.fwa,'Search'],0);Ext.cmd.derive('TS.view.fwa.TemplateList',Ext.Sheet,{controller:'fwa-edit',stretchX:!0,stretchY:!0,autoDestroy:!1,layout:'fit',items:[{xtype:'titlebar',reference:'templateTitleBar',docked:'top',cls:'ts-navigation-header',title:'Available Templates',items:[{align:'right',text:'Close',handler:'closeTemplateSheet'}]},{xtype:'panel',layout:'vbox',items:[{xtype:'grid',reference:'templateGrid',scrollable:!0,mode:'MULTI',flex:1,plugins:{type:'grideditable',triggerEvent:'doubletap',enableDeleteButton:!1,formConfig:{viewModel:{},items:[{xtype:'textfield',name:'filename',label:'Filename',listeners:{change:function(a,b,c){var d=b.match(/[!^@^$^%^~^#^&^+^=^^*^{^}^\\^:^<^>^|^"]/gi);if(d){a.setValue(c)}}}},{xtype:'textfield',name:'description',label:'Description',listeners:{change:function(a,b,c){var d=b.match(/[!^@^$^%^~^#^&^+^=^^*^{^}^\\^:^<^>^|^"]/gi);if(d){a.setValue(c)}}}}]},toolbarConfig:{xtype:'titlebar',docked:'top',items:[{xtype:'button',ui:'decline',text:'Cancel',align:'right',action:'cancel'},{xtype:'button',ui:'confirm',text:'Save',align:'left',action:'submit'}]}},bind:{selection:'{selectedTemplate}'},columns:[{dataIndex:'templateId',hidden:!0},{text:'Template Name',dataIndex:'templateName',style:'white-space: nowrap;',flex:2},{text:'Filename',dataIndex:'filename',editable:!0,flex:1.5},{text:'Description',dataIndex:'description',editable:!0,flex:1.5}],listeners:{selectionchange:'onSelectionTemplateChange'}}]},{xtype:'titlebar',docked:'bottom',title:'*doubletap to edit',titleAlign:'left',items:[{text:'Upload',align:'right',iconCls:'x-fa  fa-upload',ui:'action',handler:'uploadFwaTemplate',disabled:!0,reference:'loadTemplateDoc',itemId:'loadTemplateDoc'}]}]},0,['window-templates'],['widget','component','container','panel','sheet','window-templates'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'sheet':!0,'window-templates':!0},['widget.window-templates'],0,[TS.view.fwa,'TemplateList'],0);Ext.cmd.derive('TS.view.fwa.Udtf',Ext.Sheet,{controller:'fwa-edit',stretchX:!0,stretchY:!0,autoDestroy:!0,layout:'fit',items:[{xtype:'panel',layout:'fit',items:[{xtype:'titlebar',docked:'top',cls:'ts-navigation-header',reference:'udfTitle',title:{_tr:'udf_t1_Label'},items:[{align:'right',text:'Close',handler:'closeUdfSheet'}]},{xtype:'textareafield',scrollable:'y',width:'100%',height:'100%',bind:{value:'{selectedFWA.udf_t1}'}},{xtype:'titlebar',docked:'bottom',items:[{text:'Cancel',align:'right',iconCls:'x-fa  fa-times-circle-o',ui:'action',handler:'closeUdfSheet'},{text:'Update',iconCls:'x-fa fa-save',align:'left',handler:'onUdfSave'}]}]}]},0,['fwa-udtf'],['widget','component','container','panel','sheet','fwa-udtf'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'sheet':!0,'fwa-udtf':!0},['widget.fwa-udtf'],0,[TS.view.fwa,'Udtf'],0);Ext.cmd.derive('TS.view.ts.EditMenu',TS.view.common.Menu,{items:[{text:'Copy',xtype:'button',iconCls:'x-fa fa-copy',handler:'onTSCopy',bind:{hidden:'{tsDisabled}'}},{xtype:'spacer',height:10},{text:'Email',iconCls:'x-fa fa-envelope-o',handler:'onEmail'},{xtype:'spacer',height:10},{text:'Print',xtype:'button',iconCls:'x-fa fa-print',handler:'onPrint'}]},0,['ts-editmenu'],['widget','component','container','panel','ts-editmenu'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'ts-editmenu':!0},['widget.ts-editmenu'],0,[TS.view.ts,'EditMenu'],0);Ext.cmd.derive('TS.view.ts.ProjectLookup',Ext.Sheet,{stretchX:!0,stretchY:!0,autoDestroy:!0,layout:'fit',items:[{xtype:'titlebar',docked:'top',cls:'ts-navigation-header',title:{_tr:'wbs1Label',tpl:'{0} Lookup'},items:[{align:'right',text:'Close',action:'close'}]},{xtype:'ts-tree-list',reference:'project-treelist'},{xtype:'titlebar',docked:'bottom',items:[{text:'Cancel',align:'right',iconCls:'x-fa  fa-times-circle-o',ui:'action',action:'close'},{text:'Select',iconCls:'x-fa fa-check-square-o',align:'left',action:'select-project'}]}]},0,['ts-projectlookuptree'],['widget','component','container','panel','sheet','ts-projectlookuptree'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'sheet':!0,'ts-projectlookuptree':!0},['widget.ts-projectlookuptree'],0,[TS.view.ts,'ProjectLookup'],0);Ext.cmd.derive('TS.view.ts.Projects',Ext.Sheet,{stretchX:!0,stretchY:!0,autoDestroy:!0,headerArr:[],layout:'fit',userCls:'ts-delete-padding',items:[{xtype:'tabpanel',tabBar:{hidden:!0},items:[{xtype:'container',title:'projects',scrollable:'y',layout:'fit',items:[{xtype:'titlebar',cls:'ts-navigation-header',docked:'top',title:{_tr:'wbs1LabelPlural',tpl:'Current {0}'},items:[{align:'left',iconCls:'x-fa fa-plus',handler:'onAddNewProject'},{align:'right',text:'Done',action:'close'}]},{xtype:'list',itemId:'ts-projectlist',scrollable:'y',reference:'projectlist',tpl:'{projectName}',headerArray:[],bind:{store:'{projects}',selection:'{selectedProject}'},itemCls:'ts-timesheet-row',itemTpl:'{title}',preventSelectionOnDisclose:!1,onItemDisclosure:!0,listeners:[{disclose:'onEditProject',itemsingletap:'onEditProjectTap'}]},{xtype:'toolbar',itemId:'addTimesheetBtn',docked:'bottom',items:[{text:'Add Timesheet',style:'color: #fff',cls:'ts-navigation-header',flex:1,bind:{disabled:'{!projectlist.selection}'},handler:'onAddTimesheet'}]}]},{xtype:'formpanel',itemId:'ts-wbsprojectlist',title:'edit',layout:'vbox',items:[{xtype:'titlebar',cls:'ts-navigation-header',docked:'top',title:'Add Project'},{xtype:'titlebar',docked:'bottom',items:[{align:'left',text:'Update',ui:'action',iconCls:'x-fa fa-save',action:'save-project'},{text:'Cancel',align:'right',iconCls:'x-fa  fa-times-circle-o',handler:'onProjectCancel'}]},{xtype:'container',margin:'10 15 0 0',layout:{type:'hbox',pack:'end'},items:[{xtype:'button',align:'right',ui:'action',text:'Projects',iconCls:'x-fa fa-search',handler:'onProjectLookup',bind:{disabled:'{wbsLocked}'}}]},{xtype:'fieldset',reference:'wbslist',items:[{label:{_tr:'wbs1Label',tpl:'{0} #'},xtype:'field-wbs',modelName:'Wbs1',name:'wbs1',itemId:'fwawbs1id',reference:'wbs1combo',deferredLoad:!0,clears:['fwawbs2id','fwawbs3id'],sets:'fwawbs2id',dependencyFilter:{wbs1:'fwawbs1id'},app:'TS',bind:{value:'{currentTSRow.wbs1}',readOnly:'{wbsLocked}'}},{label:{_tr:'wbs2Label',tpl:'{0} #'},xtype:'field-wbs',itemId:'fwawbs2id',reference:'wbs2combo',clears:['fwawbs3id'],modelName:'Wbs2',name:'wbs2',app:'TS',sets:'fwawbs3id',dependencyFilter:{wbs1:'fwawbs1id',wbs2:'fwawbs2id'},bind:{value:'{currentTSRow.wbs2}',readOnly:'{wbsLocked}',hidden:'{hideTsWbs2}'}},{label:{_tr:'wbs3Label',tpl:'{0} #'},xtype:'field-wbs',itemId:'fwawbs3id',reference:'wbs3combo',modelName:'Wbs3',name:'wbs3',app:'TS',bind:{value:'{currentTSRow.wbs3}',readOnly:'{wbsLocked}',hidden:'{hideTsWbs3}'}},{xtype:'displayfield',hidden:!0,itemId:'fwawbs1name',userCls:'ts-long-label',label:{_tr:'wbs1Label',tpl:'{0} Name'},bind:'{wbs1combo.selection.name}'},{xtype:'displayfield',hidden:!0,userCls:'ts-long-label',itemId:'fwawbs2name',label:{_tr:'wbs2Label',tpl:'{0} Name'},bind:{value:'{wbs2combo.selection.name}'}},{xtype:'displayfield',hidden:!0,itemId:'fwawbs3name',label:{_tr:'wbs3Label',tpl:'{0} Name'},bind:{value:'{wbs3combo.selection.name}'}}]},{xtype:'container',layout:{type:'hbox',pack:'end'},items:[{xtype:'button',align:'right',ui:'action',margin:'0 15 0 0',text:{_tr:'laborCodeLabelPlural'},iconCls:'x-fa fa-search',handler:'onLaborCodeLookup',bind:{disabled:'{wbsLocked}'}}]},{xtype:'fieldset',items:[{xtype:'textfield',label:{_tr:'laborCodeLabel',tpl:'{0} #'},labelWidth:110,name:'laborCode',itemId:'fwalaborcode',bind:{value:'{currentTSRow.laborCode}',hidden:'{hideLaborCode}'},listeners:{focus:function(b,c){var a=b.getParent().getParent().getScrollable();TS.app.settings.currentPosition=a.position.y;if(Ext.os.is.Android&&Ext.os.is.Phone){a.scrollTo(null,300)}},blur:function(b,c){var a=b.getParent().getParent().getScrollable();if(Ext.os.is.Android&&Ext.os.is.Phone){a.scrollTo(null,TS.app.settings.currentPosition)}}}},{xtype:'field-billcategory',label:'Bill Category',labelWidth:110,bind:{hidden:'{hideBillCategory}',value:'{currentTSRow.billCategory}'},name:'billCategory'}]},{xtype:'button',name:'dummy',text:'  ',height:300,listeners:{painted:function(a){if(Ext.os.is.Android&&Ext.os.is.Phone){a.hidden=!1}else {a.hidden=!0}}}}]}]}]},0,['ts-projects'],['widget','component','container','panel','sheet','ts-projects'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'sheet':!0,'ts-projects':!0},['widget.ts-projects'],0,[TS.view.ts,'Projects'],0);Ext.cmd.derive('TS.view.ts.SubmitPin',Ext.Sheet,{stretchX:!0,stretchY:!0,approvalType:null,autoDestroy:!0,layout:'vbox',items:[{xtype:'titlebar',reference:'signatureTitleBar',itemId:'signatureTitleBar',title:{_tr:'tsTitle',tpl:'{0} Submit'},docked:'top',cls:'ts-navigation-header',items:[{align:'right',text:'Close',handler:function(){this.up('sheet').hide()}}]},{xtype:'numberfield',margin:10,style:'border:1px solid #ccc',inputType:'password',minLength:4,maxLength:4,label:'PIN',reference:'tsSubmitPinField'},{xtype:'component',margin:'0 10 10 10',html:'Signature'},{xtype:'ts-draw',flex:1,margin:'0 10 10 10',style:'border:1px solid #ccc;',reference:'signature'},{xtype:'titlebar',docked:'bottom',items:[{text:'Submit',iconCls:'x-fa fa-save',action:'tssign',reference:'saveSignatureButton',disabled:!0,bind:{disabled:'{signature.isClean}'}},{text:'Clear',align:'right',iconCls:'x-fa  fa-pencil-square-o',ui:'action',handler:function(a){a.up('sheet').down('ts-draw').clear()}}]}]},0,['ts-submitpin'],['widget','component','container','panel','sheet','ts-submitpin'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'sheet':!0,'ts-submitpin':!0},['widget.ts-submitpin'],0,[TS.view.ts,'SubmitPin'],0);Ext.cmd.derive('TS.view.ts.TSList',Ext.grid.Grid,{isScheduler:!1,scrollable:{directionLock:!0,x:!1},columns:[{text:'Employee / Period',dataIndex:'tsEmpName',cell:{innerCls:'ts-multiline-cell',encodeHtml:!1},renderer:function(f,a){var d=Ext.util.Format,b=d.date,e=d.format,c='n/j/Y';return e('<div>{0}</div><span>{1}</span>',a.get('tsEmpName'),b(a.get('startDate'),c)+' - '+b(a.get('endDate'),c))},flex:1},{text:'Status',dataIndex:'statusString',width:110},{dataIndex:'tsPeriodId',hidden:!0},{dataIndex:'tsEmpId',hidden:!0}]},0,['ts-list'],['widget','component','container','dataview','list','grid','ts-list'],{'widget':!0,'component':!0,'container':!0,'dataview':!0,'list':!0,'grid':!0,'ts-list':!0},['widget.ts-list'],0,[TS.view.ts,'TSList'],0);Ext.cmd.derive('TS.view.ts.Timesheet',Ext.container.Container,{layout:'fit',items:[{xtype:'titlebar',title:{_tr:'tsTitle'},cls:'ts-navigation-header',docked:'top',items:[{xtype:'button',text:'Back',iconCls:'x-fa fa-chevron-left',align:'left',handler:'onTsBackBt'},{xtype:'button',align:'right',iconCls:'x-fa fa-bars',handler:'onMenuTap'}]},{xtype:'toolbar',docked:'top',items:[{xtype:'button',text:{_tr:'wbs1LabelPlural',tpl:'Manage {0}'},flex:1,style:'background-color: #ddf0ff',handler:'onManageEntry',bind:{disabled:'{tsProjectEdit}'}}]},{xtype:'component',height:50,docked:'top',userCls:'ts-user-details',bind:{data:{selected:'{selectedTS}',totalHours:'{totalHours}',totalRegHours:'{totalRegHours}',totalOvtHours:'{totalOvtHours}',totalOvt2Hours:'{totalOvt2Hours}',totalTravelHours:'{totalTravelHours}'}},tpl:new Ext.XTemplate('<div class="user">{selected.data.tsEmpName}</div><div class="periods">{selected.data.startDate:date("n/j/Y")} - {selected.data.endDate:date("n/j/Y")}</div><div class="align-right"><span>Total</span><span>{totalHours}</span></div>')},{xtype:'list',grouped:!0,scrollable:{directionLock:!0,x:!1},itemCls:'ts-timesheet-row',itemTpl:new Ext.XTemplate('<h1>{[this.getEmployeeName(values)]}</h1>','<div class="hours-row">{[this.getStartEndDates(values)]}</div>',{getEmployeeName:function(a){var b=TS.app.settings;if(!b.tsCanViewCrewMemberTime){return ''}return Ext.getStore('TsEmployees').getById(a.empId).get('empName')+': '+Ext.getStore('Roles').getById(a.crewRoleId).get('crewRoleName')},getCrewRole:function(a){return Ext.getStore('Roles').getById(a.crewRoleId).get('crewRoleName')},getStartEndDates:function(j){var b=Ext.Date,d=TS.app.settings,c=new Date(d.tsStartDate),e=new Date(d.tsEndDate),a=c,i=c&&e?b.diff(c,e,'d')+1:0,g='',f=0,h=0;for(;h<i;h++){f=this.getDailyHrsTtl(j.cells,a);g+='<span><h2>'+b.format(a,'M d D')+'</h2><span>'+f+'</span></span>';a=b.add(a,b.DAY,1)}return g},getDailyHrsTtl:function(e,f){var c=TS.app.settings,d=e.filter(function(a){return (new Date(a.workDate)).getUTCDate()===f.getUTCDate()}),a=0,b;if(d.length>0){b=d[0];a+=b.regHrs;if(c.tsAllowOvtHrs){a+=b.ovtHrs}if(c.tsAllowOvt2Hrs){a+=b.ovt2Hrs}if(c.tsAllowTravelHrs){a+=b.travelHrs}return a}return 0}}),preventSelectionOnDisclose:!1,onItemDisclosure:!0,listeners:[{disclose:'onHours',itemtap:'onHoursTap'}],bind:{store:'{tsrow}',selection:'{currentTSRow}'}},{xtype:'component',height:30,docked:'bottom',centered:!0,style:'text-align: center',bind:{data:{totalRegHours:'{totalRegHours}',totalOvtHours:'{totalOvtHours}',totalOvt2Hours:'{totalOvt2Hours}',totalTravelHours:'{totalTravelHours}'}},tpl:new Ext.XTemplate('{[this.getTtlHours(values)]}',{getTtlHours:function(b){var c=TS.app.settings,a='<div class="align-right" style="font-size: smaller;">';a+='<span>Reg: <span>'+b.totalRegHours+'</span>';if(c.tsAllowOvtHrs){a+='&nbsp;&nbsp;';a+='<span>Ovt: <span>'+b.totalOvtHours+'</span>'}if(c.tsAllowOvt2Hrs){a+='&nbsp;&nbsp;';a+='<span>Ovt2: <span>'+b.totalOvt2Hours+'</span>'}if(c.tsAllowTravelHrs){a+='&nbsp;&nbsp;';a+='<span>Travel: <span>'+b.totalTravelHours+'</span>'}return a+='</div>'}})},{xtype:'titlebar',docked:'bottom',items:[{text:'Save',align:'left',itemId:'tsSaveButton',iconCls:'x-fa fa-save',handler:'onSaveTS',ui:'action',bind:{disabled:'{tsDisabled}'}},{text:'Submit',align:'right',itemId:'tsSubmitButton',ui:'action',iconCls:'x-fa fa-thumbs-o-up',handler:'onSubmitTS',bind:{disabled:'{tsDisabled}'}}]}]},0,['ts-timesheet'],['widget','component','container','ts-timesheet'],{'widget':!0,'component':!0,'container':!0,'ts-timesheet':!0},['widget.ts-timesheet'],0,[TS.view.ts,'Timesheet'],0);Ext.cmd.derive('TS.view.ts.TimesheetSelect',Ext.Sheet,{stretchX:!0,stretchY:!0,autoDestroy:!0,layout:'fit',items:[{xtype:'titlebar',docked:'top',cls:'ts-navigation-header',title:{_tr:'tsTitle',tpl:'Select {0}'},items:[{align:'right',text:'Close',handler:function(){this.up('sheet').hide()}}]},{xtype:'ts-list',reference:'tspickerlist',bind:{store:'{tsheet}',selection:'{selectedTSCopy}'},style:'border-bottom:1px solid #ccc',flex:1},{xtype:'titlebar',docked:'bottom',items:[{xtype:'button',text:'Copy',align:'right',iconCls:'x-fa fa-copy',action:'copy-ts',bind:{disabled:'{!tspickerlist.selection}'}}]}]},0,['ts-select'],['widget','component','container','panel','sheet','ts-select'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'sheet':!0,'ts-select':!0},['widget.ts-select'],0,[TS.view.ts,'TimesheetSelect'],0);Ext.cmd.derive('TS.view.ts.TsTreeList',Ext.Container,{layout:'fit',viewModel:{type:'ts-tree-list'},scrollable:'y',items:[{xtype:'textfield',docked:'top',userCls:'ts-long-label ts-border-bottom',action:'search',label:{_tr:'wbs1Label',tpl:'{0} Number or Name'},triggers:{clear:{cls:'x-form-clear-trigger',handler:function(a){a.reset()}}},listeners:{change:'onProjectSearchChange',buffer:250}},{xtype:'treelist',reference:'treelist',bind:'{navItems}',userCls:'ts-list-tree-noicons'},{xtype:'component',docked:'bottom',reference:'selectedText',userCls:'ts-long-label ts-project-ct-details',bind:{html:'{selectionText}'}}]},0,['ts-tree-list'],['widget','component','container','ts-tree-list'],{'widget':!0,'component':!0,'container':!0,'ts-tree-list':!0},['widget.ts-tree-list'],0,[TS.view.ts,'TsTreeList'],0);Ext.cmd.derive('TS.view.tsa.ApproveReject',Ext.Sheet,{stretchX:!0,stretchY:!0,approvalType:null,autoDestroy:!0,fullscreen:!0,layout:'card',items:[{xtype:'titlebar',itemId:'approveRejectTitleText',cls:'ts-navigation-header',title:'ApproveReject',docked:'top',items:[{xtype:'button',text:'Back',iconCls:'x-fa fa-chevron-left',align:'left',handler:'onCloseSheet'}]},{xtype:'formpanel',layout:{type:'vbox',pack:'middle'},items:[{xtype:'component',itemId:'approveRejectCommentText',margin:'0 10 10 10',html:'Please provide a comment for your approval.'},{xtype:'fieldset',items:[{xtype:'textareafield',itemId:'approveRejectComment'}]}]},{xtype:'titlebar',docked:'bottom',items:[{align:'left',text:'Save',ui:'action',iconCls:'x-fa fa-save',style:'margin-right: 5px;',handler:'sendApproveReject'},{text:'Cancel',align:'right',iconCls:'x-fa  fa-times-circle-o',handler:'onCloseSheet'}]}]},0,['tsa-approvereject'],['widget','component','container','panel','sheet','tsa-approvereject'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'sheet':!0,'tsa-approvereject':!0},['widget.tsa-approvereject'],0,[TS.view.tsa,'ApproveReject'],0);Ext.cmd.derive('TS.view.tsa.EditMenu',TS.view.common.Menu,{items:[{text:'Approve',xtype:'button',iconCls:'x-fa fa-check-circle',handler:'onMenuApprove'},{xtype:'spacer',height:10},{text:'Reject',xtype:'button',iconCls:'x-fa fa-times-circle',handler:'onMenuReject'}]},0,['tsa-editmenu'],['widget','component','container','panel','tsa-editmenu'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'tsa-editmenu':!0},['widget.tsa-editmenu'],0,[TS.view.tsa,'EditMenu'],0);Ext.cmd.derive('TS.view.tsa.SubmitPin',Ext.Sheet,{stretchX:!0,stretchY:!0,approvalType:null,autoDestroy:!0,layout:'vbox',items:[{xtype:'titlebar',reference:'signatureTitleBar',itemId:'signatureTitleBar',title:{_tr:'tsTitle',tpl:'{0} Submit'},docked:'top',cls:'ts-navigation-header',items:[{align:'right',text:'Close',handler:function(){this.up('sheet').hide()}}]},{xtype:'numberfield',margin:10,style:'border:1px solid #ccc',inputType:'password',minLength:4,maxLength:4,label:'PIN',reference:'tsSubmitPinField'},{xtype:'component',margin:'0 10 10 10',html:'Signature'},{xtype:'ts-draw',flex:1,margin:'0 10 10 10',style:'border:1px solid #ccc;',reference:'signature'},{xtype:'titlebar',docked:'bottom',items:[{text:'Submit',iconCls:'x-fa fa-save',action:'tsa-sign',reference:'saveSignatureButton',disabled:!0,bind:{disabled:'{signature.isClean}'}},{text:'Clear',align:'right',iconCls:'x-fa  fa-pencil-square-o',ui:'action',handler:function(a){a.up('sheet').down('ts-draw').clear()}}]}]},0,['tsa-submitpin'],['widget','component','container','panel','sheet','tsa-submitpin'],{'widget':!0,'component':!0,'container':!0,'panel':!0,'sheet':!0,'tsa-submitpin':!0},['widget.tsa-submitpin'],0,[TS.view.tsa,'SubmitPin'],0);Ext.cmd.derive('TS.view.tsa.TSAApprovalList',Ext.container.Container,{layout:'fit',items:[{xtype:'titlebar',title:{_tr:'tsTitle',tpl:'Approval {0}s'},cls:'ts-navigation-header',docked:'top',items:[{xtype:'button',text:'Back',iconCls:'x-fa fa-chevron-left',align:'left',handler:'onTsBackBt'}]},{xtype:'component',height:20,docked:'top',userCls:'ts-user-details',bind:{data:'{selectedTSA}'},tpl:new Ext.XTemplate('<div class="periods">{[this.getDates(values)]}</div>',{getDates:function(b){var c=TS.common.Util.createUTCDate(b.get('startDate')),d=TS.common.Util.createUTCDate(b.get('endDate')),a=function(a){return Ext.Date.format(a,'n/j/Y')};return a(c)+' - '+a(d)}}),style:'background:#fff;text-align:center;font-weight:bold;padding-bottom:0.5em;font-size: 1em;'},{xtype:'list',reference:'approvals',bind:{store:'{tsaapprovallist}',selection:'{currentTSARow}'},scrollable:{directionLock:!0,x:!1},itemCls:'ts-timesheet-row',itemTpl:new Ext.XTemplate('<h1>{[this.getEmployeeName(values)]}</h1>','<div class="hours-row">{[this.getStartEndDates(values)]}</div>','<div class="approval-hours">','<label>Status=</label><span>{statusString},</span>','<label>Total=</label><span style="{[this.getBackColor(values)]}">{totalHrs},</span>','<label>FWA=</label><span style="{[this.getFwaBackColor(values)]}">{totalFwaHrs}</span></br>','<label>Reg=</label><span style="{[this.getBackColor(values)]}">{totalRegHrs}','{[this.getOvtHrs(values)]}','{[this.getOvt2Hrs(values)]}','{[this.getTravelHrs(values)]}</span>','</div>',{getEmployeeName:function(a){return Ext.getStore('TsEmployees').getById(a.empId).get('empName')},getOvtHrs:function(a){var b=TS.app.settings;if(b.tsAllowOvtHrs){return ', </span><label>Ovt=</label><span style='+this.getBackColor(a)+'>'+a.totalOvtHrs+''}else {return ''}},getOvt2Hrs:function(a){var b=TS.app.settings;if(b.tsAllowOvt2Hrs){return ', </span><label>Ovt2=</label><span style='+this.getBackColor(a)+'>'+a.totalOvt2Hrs+''}else {return ''}},getTravelHrs:function(a){var b=TS.app.settings;if(b.tsAllowTravelHrs){return ', </span><label>Travel=</label><span style='+this.getBackColor(a)+'>'+a.totalTravelHrs+''}else {return ''}},getBackColor:function(a){if(a.totalHrs<a.expectedHrs){return 'color: #FFFFFF; background-color: #FF0000; font-weight: 500;'}},getFwaBackColor:function(a){if(a.totalHrs!==a.totalFwaHrs){return 'background-color: #FFFFAD; font-weight: 500;'}},getStartEndDates:function(j){var b=Ext.Date,d=TS.app.settings,c=new Date(d.tsStartDate),e=new Date(d.tsEndDate),a=c,i=c&&e?b.diff(c,e,'d')+1:0,g='',f=0,h=0;for(;h<i;h++){f=this.getDailyHrsTtl(j.cells,a);g+='<span><h2>'+b.format(a,'M d D')+'</h2><span>'+f+'</span></span>';a=b.add(a,b.DAY,1)}return g},getDailyHrsTtl:function(e,f){var c=TS.app.settings,d=e.filter(function(a){return (new Date(a.workDate)).getUTCDate()===f.getUTCDate()}),a=0,b;if(d.length>0){b=d[0];a+=b.regHrs;if(c.tsAllowOvtHrs){a+=b.ovtHrs}if(c.tsAllowOvt2Hrs){a+=b.ovt2Hrs}if(c.tsAllowTravelHrs){a+=b.travelHrs}return a}return 0}}),preventSelectionOnDisclose:!1,onItemDisclosure:!0,listeners:[{disclose:'onEditSelectedTimesheet'},{selectionchange:'onTsSelectionChange'}]},{xtype:'titlebar',docked:'bottom',items:[{text:'Approve',itemId:'approveTsButton',ui:'action',bind:{disabled:'{!approvals.selection}'},align:'left',iconCls:'x-fa fa-check-circle',handler:'approveSelectedTimesheet'},{text:'Reject',itemId:'rejectTsButton',ui:'decline',bind:{disabled:'{!approvals.selection}'},align:'right',iconCls:'x-fa fa-times-circle',handler:'rejectSelectedTimesheet'}]}]},0,['tsa-approvallist'],['widget','component','container','tsa-approvallist'],{'widget':!0,'component':!0,'container':!0,'tsa-approvallist':!0},['widget.tsa-approvallist'],0,[TS.view.tsa,'TSAApprovalList'],0);Ext.cmd.derive('TS.view.tsa.TSAList',Ext.grid.Grid,{isScheduler:!1,scrollable:{directionLock:!0,x:!1},columns:[{text:'Start',dataIndex:'startDate',renderer:function(c,b){var a=new Date(b.get('startDate'));return a.getUTCMonth()+1+'/'+a.getUTCDate()+'/'+a.getUTCFullYear()},flex:1},{text:'End',dataIndex:'endDate',renderer:function(c,b){var a=new Date(b.get('endDate'));return a.getUTCMonth()+1+'/'+a.getUTCDate()+'/'+a.getUTCFullYear()},flex:1},{dataIndex:'tsPeriodId',hidden:!0}]},0,['tsa-list'],['widget','component','container','dataview','list','grid','tsa-list'],{'widget':!0,'component':!0,'container':!0,'dataview':!0,'list':!0,'grid':!0,'tsa-list':!0},['widget.tsa-list'],0,[TS.view.tsa,'TSAList'],0);Ext.cmd.derive('TS.view.tsa.Timesheet',Ext.container.Container,{layout:'fit',items:[{xtype:'titlebar',title:{_tr:'tsTitle',tpl:'Approval {0}'},cls:'ts-navigation-header',docked:'top',items:[{xtype:'button',text:'Back',iconCls:'x-fa fa-chevron-left',align:'left',handler:'onTsBackBt'},{xtype:'button',align:'right',iconCls:'x-fa fa-bars',handler:'onMenuTap'}]},{xtype:'component',height:50,docked:'top',userCls:'ts-user-details',bind:{data:{selected:'{currentTSARow}',dates:'{selectedTSA}',totalHours:'{totalHours}',totalRegHours:'{totalRegHours}',totalOvtHours:'{totalOvtHours}',totalOvt2Hours:'{totalOvt2Hours}',totalTravelHours:'{totalTravelHours}'}},tpl:new Ext.XTemplate('<div class="user">{selected.data.empName}</div><div class="periods">{dates.data.startDate:date("n/j/Y")} - {dates.data.endDate:date("n/j/Y")}</div><div class="align-right"><span>Total</span><span>{totalHours}</span></div>')},{xtype:'list',grouped:!0,scrollable:{directionLock:!0,x:!1},itemCls:'ts-timesheet-row',itemTpl:new Ext.XTemplate('<h1>{[this.getEmployeeName(values)]}: {[this.getCrewRole(values)]}</h1>','<div class="hours-row">{[this.getStartEndDates(values)]}</div>',{getEmployeeName:function(a){return Ext.getStore('TsEmployees').getById(a.empId).get('empName')},getCrewRole:function(a){return Ext.getStore('Roles').getById(a.crewRoleId).get('crewRoleName')},getStartEndDates:function(j){var b=Ext.Date,d=TS.app.settings,c=new Date(d.tsStartDate),e=new Date(d.tsEndDate),a=c,i=c&&e?b.diff(c,e,'d')+1:0,g='',f=0,h=0;for(;h<i;h++){f=this.getDailyHrsTtl(j.cells,a);g+='<span><h2>'+b.format(a,'M d D')+'</h2><span>'+f+'</span></span>';a=b.add(a,b.DAY,1)}return g},getDailyHrsTtl:function(e,f){var c=TS.app.settings,d=e.filter(function(a){return (new Date(a.workDate)).getUTCDate()===f.getUTCDate()}),a=0,b;if(d.length>0){b=d[0];a+=b.regHrs;if(c.tsAllowOvtHrs){a+=b.ovtHrs}if(c.tsAllowOvt2Hrs){a+=b.ovt2Hrs}if(c.tsAllowTravelHrs){a+=b.travelHrs}return a}return 0}}),preventSelectionOnDisclose:!1,onItemDisclosure:!0,listeners:[{disclose:'onHours',itemtap:'onHoursTap'}],bind:{store:'{tsrow}',selection:'{currentTSRow}'}},{xtype:'component',height:30,docked:'bottom',centered:!0,style:'text-align: center',bind:{data:{totalRegHours:'{totalRegHours}',totalOvtHours:'{totalOvtHours}',totalOvt2Hours:'{totalOvt2Hours}',totalTravelHours:'{totalTravelHours}'}},tpl:new Ext.XTemplate('{[this.getTtlHours(values)]}',{getTtlHours:function(b){var c=TS.app.settings,a='<div class="align-right" style="font-size: smaller;">';a+='<span>Reg: <span>'+b.totalRegHours+'</span>';if(c.tsAllowOvtHrs){a+='&nbsp;&nbsp;';a+='<span>Ovt: <span>'+b.totalOvtHours+'</span>'}if(c.tsAllowOvt2Hrs){a+='&nbsp;&nbsp;';a+='<span>Ovt2: <span>'+b.totalOvt2Hours+'</span>'}if(c.tsAllowTravelHrs){a+='&nbsp;&nbsp;';a+='<span>Travel: <span>'+b.totalTravelHours+'</span>'}return a+='</div>'}})},{xtype:'titlebar',docked:'bottom',items:[{text:'Save',align:'left',iconCls:'x-fa fa-save',handler:'onSaveTS',bind:{disabled:'{tsDisabled}',hidden:'{!tsApproverCanModify}'}},{text:'Submit',align:'right',ui:'action',iconCls:'x-fa fa-thumbs-o-up',handler:'onSubmitTS',bind:{disabled:'{tsDisabled}',hidden:'{!tsApproverCanModify}'}}]}]},0,['tsa-timesheet'],['widget','component','container','tsa-timesheet'],{'widget':!0,'component':!0,'container':!0,'tsa-timesheet':!0},['widget.tsa-timesheet'],0,[TS.view.tsa,'Timesheet'],0);Ext.application({name:'TS',extend:TS.Application});